<html><!-- Created by GNU Texinfo 7.2, https://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This text is a brief description of the features that are present in
the Bash shell (version 5.3, 18 May 2025).

This is Edition 5.3, last updated 18 May 2025,
of The GNU Bash Reference Manual,
for Bash, Version 5.3.

Copyright © 1988-2025 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
A copy of the license is included in the section entitled
"GNU Free Documentation License". -->
<title>Bash History Builtins</title>

<meta name="description" content="Bash History Builtins (Bash Reference Manual)">
<meta name="keywords" content="Bash History Builtins (Bash Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Indexes.html" rel="index" title="Indexes">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Using-History-Interactively.html" rel="up" title="Using History Interactively">
<link href="History-Interaction.html" rel="next" title="History Interaction">
<link href="Bash-History-Facilities.html" rel="prev" title="Bash History Facilities">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span:hover a.copiable-link {visibility: visible}
-->
</style>
<link rel="stylesheet" type="text/css" href="">


</head>

<body lang="en">
<div class="section-level-extent" id="Bash-History-Builtins">
<div class="nav-panel">
<p>
Next: <a href="History-Interaction.html" accesskey="n" rel="next">History Expansion</a>, Previous: <a href="Bash-History-Facilities.html" accesskey="p" rel="prev">Bash History Facilities</a>, Up: <a href="Using-History-Interactively.html" accesskey="u" rel="up">Using History Interactively</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Indexes.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Bash-History-Builtins-1"><span>9.2 Bash History Builtins<a class="copiable-link" href="#Bash-History-Builtins-1"> ¶</a></span></h3>
<a class="index-entry-id" id="index-history-builtins"></a>

<p>Bash provides two builtin commands which manipulate the
history list and history file.
</p>
<dl class="table">
<dt><a class="dashAnchor" name="//apple_ref/Builtin/fc"></a><a id="index-fc"></a><span><code class="code">fc</code><a class="copiable-link" href="#index-fc"> ¶</a></span></dt>
<dd><div class="example">
<pre class="example-preformatted"><code class="code">fc [-e <var class="var">ename</var>] [-lnr] [<var class="var">first</var>] [<var class="var">last</var>]</code>
<code class="code">fc -s [<var class="var">pat</var>=<var class="var">rep</var>] [<var class="var">command</var>]</code>
</pre></div>

<p>The first form selects a range of commands from
<var class="var">first</var> to <var class="var">last</var>
from the history list and displays or edits and re-executes them.
Both <var class="var">first</var> and
<var class="var">last</var> may be specified as a string (to locate the most recent
command beginning with that string) or as a number (an index into the
history list, where a negative number is used as an offset from the
current command number).
</p>
<p>When listing, a <var class="var">first</var> or <var class="var">last</var> of 0 is equivalent to -1
and -0 is equivalent to the current command (usually the <code class="code">fc</code>
command);
otherwise 0 is equivalent to -1 and -0 is invalid.
</p>
<p>If <var class="var">last</var> is not specified, it is set to
the current command for listing and to <var class="var">first</var> otherwise.
If <var class="var">first</var> is not specified, it is set to the previous
command for editing and −16 for listing.
</p>
<p>If the <samp class="option">-l</samp> flag is supplied,
the commands are listed on standard output.
The <samp class="option">-n</samp> flag suppresses the command numbers when listing.
The <samp class="option">-r</samp> flag reverses the order of the listing.
</p>
<p>Otherwise, <code class="code">fc</code> invokes the editor named by
<var class="var">ename</var> on a file containing those commands.
If <var class="var">ename</var> is not supplied, <code class="code">fc</code> uses the value of the following
variable expansion: <code class="code">${FCEDIT:-${EDITOR:-vi}}</code>.
This says to use the
value of the <code class="env">FCEDIT</code> variable if set, or the value of the
<code class="env">EDITOR</code> variable if that is set, or <code class="code">vi</code> if neither is set.
When editing is complete, <code class="code">fc</code> reads the file of edited commands
and echoes and executes them.
</p>
<p>In the second form, <code class="code">fc</code> re-executes <var class="var">command</var> after
replacing each instance of <var class="var">pat</var> in the selected command with <var class="var">rep</var>.
<var class="var">command</var> is interpreted the same as <var class="var">first</var> above.
</p>
<p>A useful alias to use with the <code class="code">fc</code> command is <code class="code">r='fc -s'</code>, so
that typing ‘<samp class="samp">r cc</samp>’ runs the last command beginning with <code class="code">cc</code>
and typing ‘<samp class="samp">r</samp>’ re-executes the last command (see <a class="pxref" href="Aliases.html">Aliases</a>).
</p>
<p>If the first form is used, the return value is zero unless an invalid
option is encountered or <var class="var">first</var> or <var class="var">last</var>
specify history lines out of range.
When editing and re-executing a file of commands,
the return value is the value of the last command executed
or failure if an error occurs with the temporary file.
If the second form is used, the return status
is that of the re-executed command, unless
<var class="var">command</var> does not specify a valid history entry, in which case
<code class="code">fc</code> returns a non-zero status.
</p>
</dd>
<dt><a class="dashAnchor" name="//apple_ref/Builtin/history"></a><a id="index-history"></a><span><code class="code">history</code><a class="copiable-link" href="#index-history"> ¶</a></span></dt>
<dd><div class="example">
<pre class="example-preformatted">history [<var class="var">n</var>]
history -c
history -d <var class="var">offset</var>
history -d <var class="var">start</var>-<var class="var">end</var>
history [-anrw] [<var class="var">filename</var>]
history -ps <var class="var">arg</var>
</pre></div>

<p>With no options, display the history list with numbers.
Entries prefixed with a ‘<samp class="samp">*</samp>’ have been modified.
An argument of <var class="var">n</var> lists only the last <var class="var">n</var> entries.
If the shell variable <code class="env">HISTTIMEFORMAT</code> is set and not null,
it is used as a format string for <code class="code">strftime</code>(3) to display
the time stamp associated with each displayed history entry.
If <code class="code">history</code> uses <code class="env">HISTTIMEFORMAT</code>, it does not print an
intervening space between the formatted time stamp and the history entry.
</p>
<p>Options, if supplied, have the following meanings:
</p>
<dl class="table">
<dt><code class="code">-c</code></dt>
<dd><p>Clear the history list.
This may be combined with the other options to replace the history list.
</p>
</dd>
<dt><code class="code">-d <var class="var">offset</var></code></dt>
<dd><p>Delete the history entry at position <var class="var">offset</var>.
If <var class="var">offset</var> is positive, it should be specified as it appears when
the history is displayed.
If <var class="var">offset</var> is negative, it is interpreted as relative to one greater
than the last history position, so negative indices count back from the
end of the history, and an index of ‘<samp class="samp">-1</samp>’ refers to the current
<code class="code">history -d</code> command.
</p>
</dd>
<dt><code class="code">-d <var class="var">start</var>-<var class="var">end</var></code></dt>
<dd><p>Delete the range of history entries between positions <var class="var">start</var> and
<var class="var">end</var>, inclusive.
Positive and negative values for <var class="var">start</var> and <var class="var">end</var>
are interpreted as described above.
</p>
</dd>
<dt><code class="code">-a</code></dt>
<dd><p>Append the "new" history lines to the history file.
These are history lines entered since the beginning of the current
Bash session, but not already appended to the history file.
</p>
</dd>
<dt><code class="code">-n</code></dt>
<dd><p>Read the history lines not already read from the history file
and add them to the current history list.
These are lines appended to the history
file since the beginning of the current Bash session.
</p>
</dd>
<dt><code class="code">-r</code></dt>
<dd><p>Read the history file and append its contents to the history list.
</p>
</dd>
<dt><code class="code">-w</code></dt>
<dd><p>Write the current history list to the history file, overwriting
the history file.
</p>
</dd>
<dt><code class="code">-p</code></dt>
<dd><p>Perform history substitution on the <var class="var">arg</var>s and display the result
on the standard output, without storing the results in the history list.
</p>
</dd>
<dt><code class="code">-s</code></dt>
<dd><p>Add the <var class="var">arg</var>s to the end of the history list as a single entry.
The last command in the history list is removed before adding the <var class="var">arg</var>s.
</p>
</dd>
</dl>

<p>If a <var class="var">filename</var> argument is supplied
with any of the <samp class="option">-w</samp>, <samp class="option">-r</samp>, <samp class="option">-a</samp>, or <samp class="option">-n</samp>
options, Bash uses <var class="var">filename</var> as the history file.
If not, it uses the value of the <code class="env">HISTFILE</code> variable.
If <code class="env">HISTFILE</code> is unset or null, these options have no effect.
</p>
<p>If the <code class="env">HISTTIMEFORMAT</code>
variable is set, <code class="code">history</code> writes the time stamp information
associated with each history entry to the history file,  
marked with the history comment character as described above.
When the history file is read, lines beginning with the history
comment character followed immediately by a digit are interpreted
as timestamps for the following history entry.
</p>
<p>The return value is 0 unless an invalid option is encountered, an
error occurs while reading or writing the history file, an invalid
<var class="var">offset</var> or range is supplied as an argument to <samp class="option">-d</samp>, or the
history expansion supplied as an argument to <samp class="option">-p</samp> fails.
</p>
</dd>
</dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="History-Interaction.html">History Expansion</a>, Previous: <a href="Bash-History-Facilities.html">Bash History Facilities</a>, Up: <a href="Using-History-Interactively.html">Using History Interactively</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Indexes.html" title="Index" rel="index">Index</a>]</p>
</div>





</body></html>