<HTML>
<HEAD>
<META HTTP-EQUIV="Content-type" content="text/html; charset=ISO-8859-1">
<TITLE>Vim documentation: version8</TITLE>
</HEAD>
<BODY BGCOLOR="#ffffff">
<H1>Vim documentation: version8</H1>
<A NAME="top"></A>
<A HREF="index.html">main help file</A>

<HR>
<PRE>

*<A NAME="version8.txt"></A><B>version8.txt</B>*  For Vim version 9.0.  Last change: 2022 Feb 26


		  VIM REFERENCE MANUAL    by <A HREF="intro.html#Bram">Bram</A> <A HREF="intro.html#Moolenaar">Moolenaar</A>



				*<A NAME="vim8"></A><B>vim8</B>* *<A NAME="vim-8"></A><B>vim-8</B>* *<A NAME="version-8.0"></A><B>version-8.0</B>* *<A NAME="version8.0"></A><B>version8.0</B>*
Welcome to Vim 8!  A large number of bugs have been fixed and several nice
features have been added.  This file mentions all the new items and changes to
existing features since Vim 7.4. The patches up to Vim 7.4 can be found here:
|<A HREF="version7.html#vim-7.4">vim-7.4</A>|.

Use this command to see the full version and features information of the Vim
program you are using:
<B>	:version</B>

NEW FEATURES				|<A HREF="#new-8">new-8</A>|
	Vim script enhancements		|<A HREF="#new-vim-script-8">new-vim-script-8</A>|
	Various new items		|<A HREF="#new-items-8">new-items-8</A>|

INCOMPATIBLE CHANGES			|<A HREF="#incompatible-8">incompatible-8</A>|

IMPROVEMENTS				|<A HREF="#improvements-8">improvements-8</A>|

COMPILE TIME CHANGES			|<A HREF="#compile-changes-8">compile-changes-8</A>|

PATCHES					|<A HREF="#patches-8">patches-8</A>|

VERSION 8.1			|<A HREF="#version-8.1">version-8.1</A>|
Changed					|<A HREF="#changed-8.1">changed-8.1</A>|
Added					|<A HREF="#added-8.1">added-8.1</A>|
Patches					|<A HREF="#patches-8.1">patches-8.1</A>|

VERSION 8.2			|<A HREF="#version-8.2">version-8.2</A>|
Changed					|<A HREF="#changed-8.2">changed-8.2</A>|
Added					|<A HREF="#added-8.2">added-8.2</A>|
Patches					|<A HREF="#patches-8.2">patches-8.2</A>|


See |<A HREF="vi_diff.html">vi_diff.txt</A>| for an overview of differences between <A HREF="intro.html#Vi">Vi</A> and Vim 8.0.
See |<A HREF="version4.html">version4.txt</A>|, |<A HREF="version5.html">version5.txt</A>|, |<A HREF="version6.html">version6.txt</A>| and |<A HREF="version7.html">version7.txt</A>| for
differences between other versions.


							*<A NAME="vim-changelog"></A><B>vim-changelog</B>*
You can find an overview of the most important changes (according to Martin
Tournoij) on this site: https://www.arp242.net/vimlog/

==============================================================================

NEW FEATURES						*<A NAME="new-8"></A><B>new-8</B>*

First an overview of the more interesting new features.  A comprehensive <A HREF="eval.html#list">list</A>
is below.


<B><FONT COLOR="PURPLE">Asynchronous I/O support, channels </FONT></B>

Vim can now exchange <A HREF="message.html#messages">messages</A> with other processes in the background.  This
makes <A HREF="motion.html#it">it</A> possible to have servers <A HREF="diff.html#do">do</A> work and send back the results to Vim.
See |<A HREF="channel.html#channel-demo">channel-demo</A>| for an example, this shows communicating with a <A HREF="if_pyth.html#Python">Python</A>
server.

Closely related to channels is JSON support.  JSON is widely supported and can
easily be used for inter-process communication, allowing for <A HREF="editing.html#writing">writing</A> a server
in any language.  The <A HREF="eval.html#functions">functions</A> to use are |<A HREF="builtin.html#json_encode()">json_encode()</A>| and |<A HREF="builtin.html#json_decode()">json_decode()</A>|.

This makes <A HREF="motion.html#it">it</A> possible to build very complex plugins, written in any language
and running in a separate process.


<B><FONT COLOR="PURPLE">Jobs </FONT></B>

Vim can now start a <A HREF="channel.html#job">job</A>, communicate with <A HREF="motion.html#it">it</A> and stop <A HREF="motion.html#it">it</A>.  This is very useful
to run a process for completion, <A HREF="syntax.html#syntax">syntax</A> checking, etc.  <A HREF="eval.html#Channels">Channels</A> are used to
communicate with the <A HREF="channel.html#job">job</A>.  <A HREF="eval.html#Jobs">Jobs</A> can also read from or write to a buffer or a
file.  See |<A HREF="channel.html#job_start()">job_start()</A>|.


<B><FONT COLOR="PURPLE">Timers </FONT></B>

Also asynchronous are <A HREF="builtin.html#timers">timers</A>.  They can fire once or repeatedly and invoke a
function to <A HREF="diff.html#do">do</A> any work.  For example:
<B>	let tempTimer = timer_start(4000, 'CheckTemp')</B>
This will call the CheckTemp() function four seconds (4000 milliseconds)
later.  See |<A HREF="builtin.html#timer_start()">timer_start()</A>|.


<B><FONT COLOR="PURPLE">Partials </FONT></B>

Vim already had a <A HREF="eval.html#Funcref">Funcref</A>, a reference to a function.  A <A HREF="builtin.html#partial">partial</A> also refers
to a function, and additionally binds arguments and/or a dictionary.  This is
especially useful for callbacks on channels and <A HREF="builtin.html#timers">timers</A>.  E.g., for the <A HREF="builtin.html#timer">timer</A>
example above, to pass an argument to the function:
<B>	let tempTimer = timer_start(4000, function('CheckTemp', ['out']))</B>
This will call CheckTemp('out') four seconds later.


<B><FONT COLOR="PURPLE">Lambda and Closure </FONT></B>

A short way to create a function has been added: {args <A HREF="eval.html#-&gt;">-&gt;</A> expr}.  See |<A HREF="eval.html#lambda">lambda</A>|.
This is useful for <A HREF="eval.html#functions">functions</A> such <A HREF="motion.html#as">as</A> `filter()` and `map()`, which now also
accept a function argument.  Example:
<B>	:call filter(mylist, {idx, val -&gt; val &gt; 20})</B>

A <A HREF="eval.html#lambda">lambda</A> can use <A HREF="eval.html#variables">variables</A> defined in the scope where the <A HREF="eval.html#lambda">lambda</A> is defined.
This is usually called a |<A HREF="eval.html#closure">closure</A>|.

<A HREF="autocmd.html#User">User</A> defined <A HREF="eval.html#functions">functions</A> can also be a <A HREF="eval.html#closure">closure</A> by adding the &quot;<A HREF="eval.html#closure">closure</A>&quot; argument
|<A HREF="eval.html#:func-closure">:func-closure</A>|.


<B><FONT COLOR="PURPLE">Packages </FONT></B>

Plugins keep growing and more of them are available than ever before.  To keep
the collection of plugins manageable package support has been added.  This is
a convenient way to get one or more plugins, drop them in a directory and
possibly keep them updated.  Vim will load them automatically, or only when
desired.  See |<A HREF="repeat.html#packages">packages</A>|.


<B><FONT COLOR="PURPLE">New style tests </FONT></B>

This is for Vim developers.  So far <A HREF="editing.html#writing">writing</A> tests for Vim has not been <A HREF="starting.html#easy">easy</A>.
Vim 8 adds assert <A HREF="eval.html#functions">functions</A> and a framework to run tests.  This makes <A HREF="motion.html#it">it</A> a lot
simpler to write tests and keep them updated.  Also new are several <A HREF="eval.html#functions">functions</A>
that are added specifically for <A HREF="testing.html#testing">testing</A>. See |<A HREF="usr_41.html#test-functions">test-functions</A>|.


<B><FONT COLOR="PURPLE">Window IDs </FONT></B>

Previously <A HREF="windows.html#windows">windows</A> could only be accessed by their number. And every time a
<A HREF="windows.html#window">window</A> would open, close or move that number changes.  Each <A HREF="windows.html#window">window</A> now has a
unique ID, so that they are <A HREF="starting.html#easy">easy</A> to find.  See |<A HREF="builtin.html#win_getid()">win_getid()</A>| and |<A HREF="builtin.html#win_id2win()">win_id2win()</A>|.


<B><FONT COLOR="PURPLE">Viminfo uses timestamps </FONT></B>

Previously the information stored in <A HREF="starting.html#viminfo">viminfo</A> was whatever the last Vim wrote
there.  Now <A HREF="editing.html#timestamps">timestamps</A> are used to always keep the most recent items.
See |<A HREF="starting.html#viminfo-timestamp">viminfo-timestamp</A>|.


<B><FONT COLOR="PURPLE">Wrapping lines with indent </FONT></B>

The <A HREF="options.html#'breakindent'">'breakindent'</A> option has been added to be able to wrap lines without
<A HREF="change.html#changing">changing</A> the amount of indent.


<B><FONT COLOR="PURPLE">Windows: DirectX support </FONT></B>

This adds the <A HREF="options.html#'renderoptions'">'renderoptions'</A> option to allow for switching on DirectX
(DirectWrite) support on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.


<B><FONT COLOR="PURPLE">GTK+ 3 support </FONT></B>

The <A HREF="gui_x11.html#GTK+">GTK+</A> 3 <A HREF="gui.html#GUI">GUI</A> works just like <A HREF="gui_x11.html#GTK+">GTK+</A> 2 except for hardly noticeable technical
differences between them.  Configure still chooses <A HREF="gui_x11.html#GTK+">GTK+</A> 2 if both 2 and 3 are
available.  See src/Makefile for how to use <A HREF="gui_x11.html#GTK+">GTK+</A> 3 instead.  See
|<A HREF="gui_x11.html#gui-x11-compiling">gui-x11-compiling</A>| for other details.



Vim <A HREF="usr_41.html#script">script</A> enhancements					*<A NAME="new-vim-script-8"></A><B>new-vim-script-8</B>*

In Vim <A HREF="usr_41.html#script">script</A> the following types have been added:

	|<A HREF="eval.html#Special">Special</A>|	|<A HREF="eval.html#v:false">v:false</A>|, |<A HREF="eval.html#v:true">v:true</A>|, |<A HREF="eval.html#v:none">v:none</A>| and |<A HREF="eval.html#v:null">v:null</A>|
	|<A HREF="eval.html#Channel">Channel</A>|	connection to another process for asynchronous I/O
	|<A HREF="eval.html#Job">Job</A>|		process <A HREF="intro.html#control">control</A>

Many <A HREF="eval.html#functions">functions</A> and commands have been added to support the new types.

On some systems the numbers used in Vim <A HREF="usr_41.html#script">script</A> are now 64 bit.  This can be
checked with the |<A HREF="various.html#+num64">+num64</A>| feature.

Many items were added to support |<A HREF="testing.html#new-style-testing">new-style-testing</A>|.

<A HREF="builtin.html#printf()">printf()</A> now accepts any type of argument for &#37;s.  It is converted to a <A HREF="eval.html#string">string</A>
like with <A HREF="builtin.html#string()">string()</A>.



Various new items					*<A NAME="new-items-8"></A><B>new-items-8</B>*

<B><FONT COLOR="PURPLE">Visual mode commands: </FONT></B>

|<A HREF="change.html#v_CTRL-A">v_CTRL-A</A>|	CTRL-A		add N to number in highlighted text
|<A HREF="change.html#v_CTRL-X">v_CTRL-X</A>|	CTRL-X		subtract N from number in highlighted text
|<A HREF="change.html#v_g_CTRL-A">v_g_CTRL-A</A>|	g CTRL-A	add N to number in highlighted text
|<A HREF="change.html#v_g_CTRL-X">v_g_CTRL-X</A>|	g CTRL-X	subtract N from number in highlighted text


<B><FONT COLOR="PURPLE">Insert mode commands: </FONT></B>

|<A HREF="insert.html#i_CTRL-G_U">i_CTRL-G_U</A>|	CTRL-G U	don't break <A HREF="undo.html#undo">undo</A> with next cursor <A HREF="intro.html#movement">movement</A>


<B><FONT COLOR="PURPLE">Cmdline mode commands: </FONT></B>

|<A HREF="cmdline.html#/_CTRL-G">/_CTRL-G</A>|	CTRL-G		move to the next match in <A HREF="options.html#'incsearch'">'incsearch'</A> mode
|<A HREF="cmdline.html#/_CTRL-T">/_CTRL-T</A>|	CTRL-T		move to the previous match in <A HREF="options.html#'incsearch'">'incsearch'</A> mode


<B><FONT COLOR="PURPLE">Options: </FONT></B>

<A HREF="options.html#'belloff'">'belloff'</A>		<A HREF="diff.html#do">do</A> not ring the bell for these reasons
<A HREF="options.html#'breakindent'">'breakindent'</A>		wrapped line repeats indent
<A HREF="options.html#'breakindentopt'">'breakindentopt'</A>	settings for <A HREF="options.html#'breakindent'">'breakindent'</A>.
<A HREF="options.html#'emoji'">'emoji'</A>			emoji characters are considered full width
<A HREF="options.html#'fixendofline'">'fixendofline'</A>		make sure last line in file has <A HREF="intro.html#&lt;EOL&gt;">&lt;EOL&gt;</A>
<A HREF="options.html#'langremap'">'langremap'</A>		<A HREF="diff.html#do">do</A> apply <A HREF="options.html#'langmap'">'langmap'</A> to mapped characters
<A HREF="options.html#'luadll'">'luadll'</A>		name of the <A HREF="if_lua.html#Lua">Lua</A> dynamic library
<A HREF="options.html#'packpath'">'packpath'</A>		<A HREF="eval.html#list">list</A> of directories used for <A HREF="repeat.html#packages">packages</A>
<A HREF="options.html#'perldll'">'perldll'</A>		name of the <A HREF="if_perl.html#Perl">Perl</A> dynamic library
<A HREF="options.html#'pythondll'">'pythondll'</A>		name of the <A HREF="if_pyth.html#Python">Python</A> 2 dynamic library
<A HREF="options.html#'pythonthreedll'">'pythonthreedll'</A>	name of the <A HREF="if_pyth.html#Python">Python</A> 3 dynamic library
<A HREF="options.html#'renderoptions'">'renderoptions'</A>		<A HREF="options.html#options">options</A> for text rendering on Windows
<A HREF="options.html#'rubydll'">'rubydll'</A>		name of the <A HREF="if_ruby.html#Ruby">Ruby</A> dynamic library
<A HREF="options.html#'signcolumn'">'signcolumn'</A>		when to display the sign column
<A HREF="options.html#'tagcase'">'tagcase'</A>		how to handle <A HREF="change.html#case">case</A> when searching in <A HREF="tagsrch.html#tags">tags</A> files
<A HREF="options.html#'tcldll'">'tcldll'</A>		name of the <A HREF="if_tcl.html#Tcl">Tcl</A> dynamic library
<A HREF="options.html#'termguicolors'">'termguicolors'</A>		use <A HREF="gui.html#GUI">GUI</A> colors for the <A HREF="terminal.html#terminal">terminal</A>


<B><FONT COLOR="PURPLE">Ex commands: </FONT></B>

|<A HREF="quickfix.html#:cbottom">:cbottom</A>|		scroll to the bottom of the <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="windows.html#window">window</A>
|<A HREF="quickfix.html#:cdo">:cdo</A>|			execute command in each valid error <A HREF="eval.html#list">list</A> entry
|<A HREF="quickfix.html#:cfdo">:cfdo</A>|			execute command in each file in error <A HREF="eval.html#list">list</A>
|<A HREF="quickfix.html#:chistory">:chistory</A>|		display <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A> stack
|<A HREF="motion.html#:clearjumps">:clearjumps</A>|		clear the jump <A HREF="eval.html#list">list</A>
|<A HREF="various.html#:filter">:filter</A>|		only output lines that (do not) match a <A HREF="pattern.html#pattern">pattern</A>
|<A HREF="helphelp.html#:helpclose">:helpclose</A>|		close one help <A HREF="windows.html#window">window</A>
|<A HREF="quickfix.html#:lbottom">:lbottom</A>|		scroll to the bottom of the location <A HREF="windows.html#window">window</A>
|<A HREF="quickfix.html#:ldo">:ldo</A>|			execute command in valid location <A HREF="eval.html#list">list</A> entries
|<A HREF="quickfix.html#:lfdo">:lfdo</A>|			execute command in each file in location <A HREF="eval.html#list">list</A>
|<A HREF="quickfix.html#:lhistory">:lhistory</A>|		display location <A HREF="eval.html#list">list</A> stack
|<A HREF="recover.html#:noswapfile">:noswapfile</A>|		following commands don't create a swap file
|<A HREF="repeat.html#:packadd">:packadd</A>|		add a <A HREF="usr_05.html#plugin">plugin</A> from <A HREF="options.html#'packpath'">'packpath'</A>
|<A HREF="repeat.html#:packloadall">:packloadall</A>|		load all <A HREF="repeat.html#packages">packages</A> under <A HREF="options.html#'packpath'">'packpath'</A>
|<A HREF="index.html#:smile">:smile</A>|		make the user happy


<B><FONT COLOR="PURPLE">Ex command modifiers: </FONT></B>

|<A HREF="cmdline.html#:keeppatterns">:keeppatterns</A>|		following command keeps search pattern <A HREF="cmdline.html#history">history</A>
|<A HREF="map.html#&lt;mods&gt;">&lt;mods&gt;</A>|		supply command modifiers to user defined commands


<B><FONT COLOR="PURPLE">New and extended functions: </FONT></B>

|<A HREF="builtin.html#arglistid()">arglistid()</A>|		get id of the argument list
|<A HREF="testing.html#assert_equal()">assert_equal()</A>|	assert that two expressions values are equal
|<A HREF="testing.html#assert_exception()">assert_exception()</A>|	assert that a command throws an exception
|<A HREF="testing.html#assert_fails()">assert_fails()</A>|	assert that a function call fails
|<A HREF="testing.html#assert_false()">assert_false()</A>|	assert that an <A HREF="eval.html#expression">expression</A> is false
|<A HREF="testing.html#assert_inrange()">assert_inrange()</A>|	assert that an <A HREF="eval.html#expression">expression</A> is inside a range
|<A HREF="testing.html#assert_match()">assert_match()</A>|	assert that a <A HREF="pattern.html#pattern">pattern</A> matches the value
|<A HREF="testing.html#assert_notequal()">assert_notequal()</A>|	assert that two expressions values are not equal
|<A HREF="testing.html#assert_notmatch()">assert_notmatch()</A>|	assert that a <A HREF="pattern.html#pattern">pattern</A> does not match the value
|<A HREF="testing.html#assert_true()">assert_true()</A>|		assert that an <A HREF="eval.html#expression">expression</A> is true
|<A HREF="builtin.html#bufwinid()">bufwinid()</A>|		get the <A HREF="windows.html#window">window</A> ID of a specific buffer
|<A HREF="builtin.html#byteidxcomp()">byteidxcomp()</A>|		like <A HREF="builtin.html#byteidx()">byteidx()</A> but <A HREF="intro.html#count">count</A> composing characters
|<A HREF="channel.html#ch_close()">ch_close()</A>|		close a <A HREF="channel.html#channel">channel</A>
|<A HREF="channel.html#ch_close_in()">ch_close_in()</A>|		close the in part of a <A HREF="channel.html#channel">channel</A>
|<A HREF="channel.html#ch_evalexpr()">ch_evalexpr()</A>|		evaluates an <A HREF="eval.html#expression">expression</A> over <A HREF="channel.html#channel">channel</A>
|<A HREF="channel.html#ch_evalraw()">ch_evalraw()</A>|		evaluates a raw <A HREF="eval.html#string">string</A> over <A HREF="channel.html#channel">channel</A>
|<A HREF="channel.html#ch_getbufnr()">ch_getbufnr()</A>|		get the buffer number of a <A HREF="channel.html#channel">channel</A>
|<A HREF="channel.html#ch_getjob()">ch_getjob()</A>|		get the job associated with a <A HREF="channel.html#channel">channel</A>
|<A HREF="channel.html#ch_info()">ch_info()</A>|		get <A HREF="channel.html#channel">channel</A> information
|<A HREF="channel.html#ch_log()">ch_log()</A>|		write a message in the <A HREF="channel.html#channel">channel</A> log file
|<A HREF="channel.html#ch_logfile()">ch_logfile()</A>|		set the <A HREF="channel.html#channel">channel</A> log file
|<A HREF="channel.html#ch_open()">ch_open()</A>|		open a <A HREF="channel.html#channel">channel</A>
|<A HREF="channel.html#ch_read()">ch_read()</A>|		read a message from a <A HREF="channel.html#channel">channel</A>
|<A HREF="channel.html#ch_readraw()">ch_readraw()</A>|		read a raw message from a <A HREF="channel.html#channel">channel</A>
|<A HREF="channel.html#ch_sendexpr()">ch_sendexpr()</A>|		send a JSON message over a <A HREF="channel.html#channel">channel</A>
|<A HREF="channel.html#ch_sendraw()">ch_sendraw()</A>|		send a raw message over a <A HREF="channel.html#channel">channel</A>
|<A HREF="channel.html#ch_setoptions()">ch_setoptions()</A>|	set the options for a <A HREF="channel.html#channel">channel</A>
|<A HREF="channel.html#ch_status()">ch_status()</A>|		get status of a <A HREF="channel.html#channel">channel</A>
|<A HREF="builtin.html#execute()">execute()</A>|		execute an <A HREF="intro.html#Ex">Ex</A> command and get the output
|<A HREF="builtin.html#exepath()">exepath()</A>|		full path of an executable program
|<A HREF="builtin.html#funcref()">funcref()</A>|		return a reference to function {name}
|<A HREF="builtin.html#getbufinfo()">getbufinfo()</A>|		get a <A HREF="eval.html#list">list</A> with buffer information
|<A HREF="builtin.html#getcharsearch()">getcharsearch()</A>|	return character search information
|<A HREF="builtin.html#getcmdwintype()">getcmdwintype()</A>|	return the current command-line <A HREF="windows.html#window">window</A> type
|<A HREF="builtin.html#getcompletion()">getcompletion()</A>|	return a <A HREF="eval.html#list">list</A> of command-line completion matches
|<A HREF="builtin.html#getcurpos()">getcurpos()</A>|		get position of the cursor
|<A HREF="builtin.html#gettabinfo()">gettabinfo()</A>|		get a <A HREF="eval.html#list">list</A> with tab page information
|<A HREF="builtin.html#getwininfo()">getwininfo()</A>|		get a <A HREF="eval.html#list">list</A> with <A HREF="windows.html#window">window</A> information
|<A HREF="builtin.html#glob2regpat()">glob2regpat()</A>|		convert a glob <A HREF="pattern.html#pattern">pattern</A> into a search <A HREF="pattern.html#pattern">pattern</A>
|<A HREF="builtin.html#isnan()">isnan()</A>|		check for not a number
|<A HREF="channel.html#job_getchannel()">job_getchannel()</A>|	get the channel used by a job
|<A HREF="channel.html#job_info()">job_info()</A>|		get information about a job
|<A HREF="channel.html#job_setoptions()">job_setoptions()</A>|	set options for a job
|<A HREF="channel.html#job_start()">job_start()</A>|		start a job
|<A HREF="channel.html#job_status()">job_status()</A>|		get the status of a job
|<A HREF="channel.html#job_stop()">job_stop()</A>|		stop a job
|<A HREF="builtin.html#js_decode()">js_decode()</A>|		decode a JSON <A HREF="eval.html#string">string</A> to Vim types
|<A HREF="builtin.html#js_encode()">js_encode()</A>|		encode an <A HREF="eval.html#expression">expression</A> to a JSON <A HREF="eval.html#string">string</A>
|<A HREF="builtin.html#json_decode()">json_decode()</A>|		decode a JSON <A HREF="eval.html#string">string</A> to Vim types
|<A HREF="builtin.html#json_encode()">json_encode()</A>|		encode an <A HREF="eval.html#expression">expression</A> to a JSON <A HREF="eval.html#string">string</A>
|<A HREF="builtin.html#matchaddpos()">matchaddpos()</A>|		define a <A HREF="eval.html#list">list</A> of positions to highlight
|<A HREF="builtin.html#matchstrpos()">matchstrpos()</A>|		match and positions of a <A HREF="pattern.html#pattern">pattern</A> in a <A HREF="eval.html#string">string</A>
|<A HREF="builtin.html#perleval()">perleval()</A>|		evaluate <A HREF="if_perl.html#Perl">Perl</A> <A HREF="eval.html#expression">expression</A>
|<A HREF="builtin.html#reltimefloat()">reltimefloat()</A>|	convert <A HREF="builtin.html#reltime()">reltime()</A> result to a <A HREF="eval.html#Float">Float</A>
|<A HREF="builtin.html#setcharsearch()">setcharsearch()</A>|	set character search information
|<A HREF="builtin.html#setfperm()">setfperm()</A>|		set the permissions of a file
|<A HREF="builtin.html#strcharpart()">strcharpart()</A>|		get part of a <A HREF="eval.html#string">string</A> using char index
|<A HREF="builtin.html#strgetchar()">strgetchar()</A>|		get character from a <A HREF="eval.html#string">string</A> using char index
|<A HREF="builtin.html#systemlist()">systemlist()</A>|		get the result of a shell command <A HREF="motion.html#as">as</A> a list
|<A HREF="testing.html#test_alloc_fail()">test_alloc_fail()</A>|	make memory allocation fail
|<A HREF="testing.html#test_autochdir()">test_autochdir()</A>|	test <A HREF="options.html#'autochdir'">'autochdir'</A> functionality
|<A HREF="testing.html#test_garbagecollect_now()">test_garbagecollect_now()</A>| free memory right now
|<A HREF="testing.html#test_null_channel()">test_null_channel()</A>|	return a null <A HREF="eval.html#Channel">Channel</A>
|<A HREF="testing.html#test_null_dict()">test_null_dict()</A>|	return a null <A HREF="eval.html#Dict">Dict</A>
|<A HREF="testing.html#test_null_job()">test_null_job()</A>|	return a null <A HREF="eval.html#Job">Job</A>
|<A HREF="testing.html#test_null_list()">test_null_list()</A>|	return a null <A HREF="eval.html#List">List</A>
|<A HREF="testing.html#test_null_partial()">test_null_partial()</A>|	return a null <A HREF="eval.html#Partial">Partial</A> function
|<A HREF="testing.html#test_null_string()">test_null_string()</A>|	return a null <A HREF="eval.html#String">String</A>
|<A HREF="testing.html#test_settime()">test_settime()</A>|	set the time Vim uses internally
|<A HREF="builtin.html#timer_info()">timer_info()</A>|		get information about <A HREF="builtin.html#timers">timers</A>
|<A HREF="builtin.html#timer_pause()">timer_pause()</A>|		pause or unpause a timer
|<A HREF="builtin.html#timer_start()">timer_start()</A>|		create a timer
|<A HREF="builtin.html#timer_stop()">timer_stop()</A>|		stop a timer
|<A HREF="builtin.html#timer_stopall()">timer_stopall()</A>|	stop all <A HREF="builtin.html#timers">timers</A>
|<A HREF="builtin.html#uniq()">uniq()</A>|		remove copies of repeated adjacent items
|<A HREF="builtin.html#win_findbuf()">win_findbuf()</A>|		find <A HREF="windows.html#windows">windows</A> containing a buffer
|<A HREF="builtin.html#win_getid()">win_getid()</A>|		get <A HREF="windows.html#window">window</A> ID of a <A HREF="windows.html#window">window</A>
|<A HREF="builtin.html#win_gotoid()">win_gotoid()</A>|		go to <A HREF="windows.html#window">window</A> with ID
|<A HREF="builtin.html#win_id2tabwin()">win_id2tabwin()</A>|	get tab and <A HREF="windows.html#window">window</A> nr from <A HREF="windows.html#window">window</A> ID
|<A HREF="builtin.html#win_id2win()">win_id2win()</A>|		get <A HREF="windows.html#window">window</A> nr from <A HREF="windows.html#window">window</A> ID
|<A HREF="builtin.html#wordcount()">wordcount()</A>|		get byte/word/char count of buffer


<B><FONT COLOR="PURPLE">New Vim variables: </FONT></B>

|<A HREF="eval.html#v:beval_winid">v:beval_winid</A>|		Window ID of the <A HREF="windows.html#window">window</A> where the mouse pointer is
|<A HREF="eval.html#v:completed_item">v:completed_item</A>|	complete items for the most recently completed <A HREF="motion.html#word">word</A>
|<A HREF="eval.html#v:errors">v:errors</A>|		errors found by assert <A HREF="eval.html#functions">functions</A>
|<A HREF="eval.html#v:false">v:false</A>|		a <A HREF="eval.html#Number">Number</A> with value zero
|<A HREF="eval.html#v:hlsearch">v:hlsearch</A>|		indicates whether search highlighting is on
|<A HREF="eval.html#v:mouse_winid">v:mouse_winid</A>|		Window ID for a mouse click obtained with |<A HREF="builtin.html#getchar()">getchar()</A>|
|<A HREF="eval.html#v:none">v:none</A>|		an empty <A HREF="eval.html#String">String</A>, used for JSON
|<A HREF="eval.html#v:null">v:null</A>|		an empty <A HREF="eval.html#String">String</A>, used for JSON
|<A HREF="eval.html#v:option_new">v:option_new</A>|    	new value of the option, used by |<A HREF="autocmd.html#OptionSet">OptionSet</A>|
|<A HREF="eval.html#v:option_old">v:option_old</A>|    	old value of the option, used by |<A HREF="autocmd.html#OptionSet">OptionSet</A>|
|<A HREF="eval.html#v:option_oldlocal">v:option_oldlocal</A>|	old local value of the option, used by |<A HREF="autocmd.html#OptionSet">OptionSet</A>|
|<A HREF="eval.html#v:option_oldglobal">v:option_oldglobal</A>|	old global value of the option, used by |<A HREF="autocmd.html#OptionSet">OptionSet</A>|
|<A HREF="eval.html#v:option_type">v:option_type</A>|   	scope of the set command, used by |<A HREF="autocmd.html#OptionSet">OptionSet</A>|
|<A HREF="eval.html#v:option_command">v:option_command</A>|	command used to set the option, used by |<A HREF="autocmd.html#OptionSet">OptionSet</A>|
|<A HREF="eval.html#v:progpath">v:progpath</A>|		the command with which Vim was invoked
|<A HREF="eval.html#v:t_bool">v:t_bool</A>|		value of <A HREF="eval.html#Boolean">Boolean</A> type
|<A HREF="eval.html#v:t_channel">v:t_channel</A>|		value of <A HREF="eval.html#Channel">Channel</A> type
|<A HREF="eval.html#v:t_dict">v:t_dict</A>|		value of <A HREF="eval.html#Dictionary">Dictionary</A> type
|<A HREF="eval.html#v:t_float">v:t_float</A>|		value of <A HREF="eval.html#Float">Float</A> type
|<A HREF="eval.html#v:t_func">v:t_func</A>|		value of <A HREF="eval.html#Funcref">Funcref</A> type
|<A HREF="eval.html#v:t_job">v:t_job</A>|		value of <A HREF="eval.html#Job">Job</A> type
|<A HREF="eval.html#v:t_list">v:t_list</A>|		value of <A HREF="eval.html#List">List</A> type
|<A HREF="eval.html#v:t_none">v:t_none</A>|		value of <A HREF="eval.html#None">None</A> type
|<A HREF="eval.html#v:t_number">v:t_number</A>|		value of <A HREF="eval.html#Number">Number</A> type
|<A HREF="eval.html#v:t_string">v:t_string</A>|		value of <A HREF="eval.html#String">String</A> type
|<A HREF="eval.html#v:testing">v:testing</A>|		must be set before using `test_garbagecollect_now()`
|<A HREF="eval.html#v:true">v:true</A>|		a <A HREF="eval.html#Number">Number</A> with value one
|<A HREF="eval.html#v:vim_did_enter">v:vim_did_enter</A>|	set just before <A HREF="autocmd.html#VimEnter">VimEnter</A> <A HREF="autocmd.html#autocommands">autocommands</A> are triggered


<B><FONT COLOR="PURPLE">New autocommand events: </FONT></B>

|<A HREF="autocmd.html#CmdUndefined">CmdUndefined</A>|		a user command is used but <A HREF="motion.html#it">it</A> isn't defined
|<A HREF="autocmd.html#OptionSet">OptionSet</A>|		after setting any option
|<A HREF="autocmd.html#TabClosed">TabClosed</A>|		after closing a <A HREF="intro.html#tab">tab</A> page
|<A HREF="autocmd.html#TabNew">TabNew</A>|		after creating a new <A HREF="intro.html#tab">tab</A> page
|<A HREF="autocmd.html#TextChanged">TextChanged</A>|		after a change was made to the text in <A HREF="intro.html#Normal">Normal</A> mode
|<A HREF="autocmd.html#TextChangedI">TextChangedI</A>|		after a change was made to the text in <A HREF="insert.html#Insert">Insert</A> mode
|<A HREF="autocmd.html#WinNew">WinNew</A>|		after creating a new <A HREF="windows.html#window">window</A>


<B><FONT COLOR="PURPLE">New highlight groups: </FONT></B>

EndOfBuffer		filler lines (~) after the last line in the buffer.
			|<A HREF="syntax.html#hl-EndOfBuffer">hl-EndOfBuffer</A>|


<B><FONT COLOR="PURPLE">New items in search patterns: </FONT></B>

|<A HREF="pattern.html#/\&#37;C">/\&#37;C</A>|	\&#37;C		match any composing characters


<B><FONT COLOR="PURPLE">New Syntax/Indent/FTplugin files: </FONT></B>

AVR Assembler (Avra) <A HREF="syntax.html#syntax">syntax</A>
Arduino <A HREF="syntax.html#syntax">syntax</A>
Bazel <A HREF="syntax.html#syntax">syntax</A> and indent and <A HREF="usr_51.html#ftplugin">ftplugin</A>
Dockerfile <A HREF="syntax.html#syntax">syntax</A> and <A HREF="usr_51.html#ftplugin">ftplugin</A>
Eiffel <A HREF="usr_51.html#ftplugin">ftplugin</A>
Euphoria 3 and 4 <A HREF="syntax.html#syntax">syntax</A>
Go <A HREF="syntax.html#syntax">syntax</A> and indent and <A HREF="usr_51.html#ftplugin">ftplugin</A>
Godoc <A HREF="syntax.html#syntax">syntax</A>
Groovy <A HREF="usr_51.html#ftplugin">ftplugin</A>
HGcommit <A HREF="usr_51.html#ftplugin">ftplugin</A>
Hog indent and <A HREF="usr_51.html#ftplugin">ftplugin</A>
Innovation Data Processing upstream.pt <A HREF="syntax.html#syntax">syntax</A>
<A HREF="change.html#J">J</A> <A HREF="syntax.html#syntax">syntax</A> and indent and <A HREF="usr_51.html#ftplugin">ftplugin</A>
Jproperties <A HREF="usr_51.html#ftplugin">ftplugin</A>
Json <A HREF="syntax.html#syntax">syntax</A> and indent and <A HREF="usr_51.html#ftplugin">ftplugin</A>
Kivy <A HREF="syntax.html#syntax">syntax</A>
Less <A HREF="syntax.html#syntax">syntax</A> and indent
Mix <A HREF="syntax.html#syntax">syntax</A>
Motorola S-Record <A HREF="syntax.html#syntax">syntax</A>
<A HREF="change.html#R">R</A> <A HREF="usr_51.html#ftplugin">ftplugin</A>
ReStructuredText <A HREF="syntax.html#syntax">syntax</A> and indent and <A HREF="usr_51.html#ftplugin">ftplugin</A>
Registry <A HREF="usr_51.html#ftplugin">ftplugin</A>
Rhelp indent and <A HREF="usr_51.html#ftplugin">ftplugin</A>
Rmd (markdown with <A HREF="change.html#R">R</A> code chunks) <A HREF="syntax.html#syntax">syntax</A> and indent
Rmd <A HREF="usr_51.html#ftplugin">ftplugin</A>
Rnoweb <A HREF="usr_51.html#ftplugin">ftplugin</A>
Rnoweb indent
Scala <A HREF="syntax.html#syntax">syntax</A> and indent and <A HREF="usr_51.html#ftplugin">ftplugin</A>
SystemVerilog <A HREF="syntax.html#syntax">syntax</A> and indent and <A HREF="usr_51.html#ftplugin">ftplugin</A>
Systemd <A HREF="syntax.html#syntax">syntax</A> and indent and <A HREF="usr_51.html#ftplugin">ftplugin</A>
Teraterm (TTL) <A HREF="syntax.html#syntax">syntax</A> and indent
Text <A HREF="usr_51.html#ftplugin">ftplugin</A>
Vroom <A HREF="syntax.html#syntax">syntax</A> and indent and <A HREF="usr_51.html#ftplugin">ftplugin</A>


<B><FONT COLOR="PURPLE">New Keymaps: </FONT></B>

Armenian eastern and western
<A HREF="russian.html#Russian">Russian</A> jcukenwintype
Vietnamese telex and vni

==============================================================================

INCOMPATIBLE CHANGES				*<A NAME="incompatible-8"></A><B>incompatible-8</B>*

These changes are incompatible with previous releases.  Check this <A HREF="eval.html#list">list</A> if you
run into a problem when upgrading from Vim 7.4 to 8.0.


<B><FONT COLOR="PURPLE">Better defaults without a vimrc </FONT></B>

When no <A HREF="starting.html#vimrc">vimrc</A> file is found, the |<A HREF="defaults.html">defaults.vim</A>| <A HREF="usr_41.html#script">script</A> is loaded to set more
useful default values for new users.  That includes setting <A HREF="options.html#'nocompatible'">'nocompatible'</A>.
Thus Vim no longer starts up in <A HREF="intro.html#Vi">Vi</A> compatible mode.  If you <A HREF="diff.html#do">do</A> want that,
either create a <A HREF="starting.html#.vimrc">.vimrc</A> file that does &quot;set compatible&quot; or start Vim with
&quot;vim -C&quot;.


<B><FONT COLOR="PURPLE">Support removed </FONT></B>

The support for <A HREF="os_msdos.html#MS-DOS">MS-DOS</A> has been removed.  It hasn't been working for a while
(Vim doesn't fit in memory) and removing <A HREF="motion.html#it">it</A> cleans up the code quite a bit.

The support for Windows 16 bit (Windows 95 and older) has been removed.

The support for <A HREF="os_os2.html#OS/2">OS/2</A> has been removed.  It probably hasn't been working for a
while since nobody uses <A HREF="motion.html#it">it</A>.

The SNiFF+ support has been removed.


<B><FONT COLOR="PURPLE">Minor incompatibilities: </FONT></B>

Probably...

==============================================================================

IMPROVEMENTS						*<A NAME="improvements-8"></A><B>improvements-8</B>*

The existing <A HREF="options.html#blowfish">blowfish</A> <A HREF="editing.html#encryption">encryption</A> turned out to be much weaker than <A HREF="motion.html#it">it</A> was
supposed to be.  The <A HREF="options.html#blowfish2">blowfish2</A> <A HREF="eval.html#method">method</A> has been added to fix that.  Note that
this still isn't a state-of-the-art <A HREF="editing.html#encryption">encryption</A>, but good enough for most
usage.  See <A HREF="options.html#'cryptmethod'">'cryptmethod'</A>.


==============================================================================

COMPILE TIME CHANGES					*<A NAME="compile-changes-8"></A><B>compile-changes-8</B>*

The Vim repository was moved from Google code to github, since Google code
was shut down.  It can now be found at https://github.com/vim/vim.

Functions now use <A HREF="develop.html#ANSI-C">ANSI-C</A> declarations.  At least a C-89 compatible compiler is
required.

The <A HREF="various.html#+visual">+visual</A> feature is now always included.

==============================================================================

PATCHES						*<A NAME="patches-8"></A><B>patches-8</B>* *<A NAME="bug-fixes-8"></A><B>bug-fixes-8</B>*

The <A HREF="eval.html#list">list</A> of patches that got included since 7.4.0.  This includes all the new
features, but does not include runtime file changes (syntax, indent, help,
etc.)

Patch 7.4.001
Problem:    Character classes such <A HREF="motion.html#as">as</A> [a-z] <A HREF="diff.html#do">do</A> not react to <A HREF="options.html#'ignorecase'">'ignorecase'</A>.
	    Breaks man page highlighting. (Mario Grgic)
Solution:   Add separate items for classes that react to <A HREF="options.html#'ignorecase'">'ignorecase'</A>.  Clean
	    up logic handling character classes.  Add more tests.
Files:	    src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.4.002
Problem:    <A HREF="pattern.html#Pattern">Pattern</A> with two alternative look-behind matches does not match.
	    (Amadeus Demarzi)
Solution:   When comparing PIMs also compare their state ID to see if they are
	    different.
Files:	    src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.4.003
Problem:    Memory access error in <A HREF="if_ruby.html#Ruby">Ruby</A> <A HREF="syntax.html#syntax">syntax</A> highlighting. (Christopher Chow)
Solution:   Refresh stale pointer. (James McCoy)
Files:	    src/regexp_nfa.c

Patch 7.4.004
Problem:    When closing a <A HREF="windows.html#window">window</A> fails &quot;<A HREF="windows.html#:bwipe">:bwipe</A>&quot; may hang.
Solution:   Let win_close() return FAIL and break out of the loop.
Files:	    src/window.c, src/proto/window.pro, src/buffer.c

Patch 7.4.005
Problem:    Using &quot;vaB&quot; while <A HREF="options.html#'virtualedit'">'virtualedit'</A> is set selects the wrong area.
	    (Dimitar Dimitrov)
Solution:   Reset coladd when finding a match.
Files:	    src/search.c

Patch 7.4.006
Problem:    mkdir(&quot;foo/bar/&quot;, &quot;<A HREF="change.html#p">p</A>&quot;) gives an error message. (David Barnett)
Solution:   Remove the trailing slash. (lcd)
Files:	    src/eval.c

Patch 7.4.007
Problem:    Creating a preview <A HREF="windows.html#window">window</A> on <A HREF="starting.html#startup">startup</A> leaves the screen layout in a
	    messed up state. (Marius Gedminas)
Solution:   Don't change firstwin. (Christian Brabandt)
Files:	    src/main.c

Patch 7.4.008
Problem:    New <A HREF="pattern.html#regexp">regexp</A> engine can't be interrupted.
Solution:   Check for <A HREF="pattern.html#CTRL-C">CTRL-C</A> pressed. (Yasuhiro Matsumoto)
Files:	    src/regexp_nfa.c, src/regexp.c

Patch 7.4.009
Problem:    When a file was not decrypted (yet), <A HREF="editing.html#writing">writing</A> <A HREF="motion.html#it">it</A> may destroy the
	    contents.
Solution:   <A HREF="motion.html#Mark">Mark</A> the file <A HREF="motion.html#as">as</A> readonly until decryption was done. (Christian
	    Brabandt)
Files:	    src/fileio.c

Patch 7.4.010 (after 7.4.006)
Problem:    Crash with invalid argument to <A HREF="builtin.html#mkdir()">mkdir()</A>.
Solution:   Check for empty <A HREF="eval.html#string">string</A>. (lcd47)
Files:	    src/eval.c

Patch 7.4.011
Problem:    Cannot find out if &quot;acl&quot; and &quot;xpm&quot; features are supported.
Solution:   Add &quot;acl&quot; and &quot;xpm&quot; to the <A HREF="eval.html#list">list</A> of features. (Ken Takata)
Files:	    src/eval.c, src/version.c

Patch 7.4.012
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: resolving shortcut does not work properly with
	    <A HREF="mbyte.html#multibyte">multibyte</A> characters.
Solution:   Use wide system <A HREF="eval.html#functions">functions</A>. (Ken Takata)
Files:	    src/os_mswin.c

Patch 7.4.013
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: File name buffer too small for <A HREF="mbyte.html#utf-8">utf-8</A>.
Solution:   Use character <A HREF="intro.html#count">count</A> instead of byte <A HREF="intro.html#count">count</A>. (Ken Takata)
Files:	    src/os_mswin.c

Patch 7.4.014
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: check for <A HREF="editing.html#writing">writing</A> to device does not work.
Solution:   Fix #ifdefs. (Ken Takata)
Files:	    src/fileio.c

Patch 7.4.015
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: Detecting node type does not work for <A HREF="mbyte.html#multibyte">multibyte</A>
	    characters.
Solution:   Use wide character function when needed. (Ken Takata)
Files:	    src/os_win32.c

Patch 7.4.016
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: File name <A HREF="change.html#case">case</A> can be wrong.
Solution:   Add fname_casew(). (Ken Takata)
Files:	    src/os_win32.c

Patch 7.4.017
Problem:    &quot;<A HREF="helphelp.html#:help">:help</A> !!&quot; does not find the &quot;<A HREF="change.html#!!">!!</A>&quot; <A HREF="tagsrch.html#tag">tag</A> in the help file. (Ben
	    Fritz)
Solution:   When reading the start of the <A HREF="tagsrch.html#tags">tags</A> file <A HREF="diff.html#do">do</A> parse lines that are
	    not header lines.
Files:	    src/tag.c

Patch 7.4.018
Problem:    When completing item becomes unselected. (Shougo Matsu)
Solution:   Revert patch 7.3.1269.
Files:	    src/edit.c

Patch 7.4.019
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: File name completion doesn't work properly with
	    <A HREF="mbyte.html#Chinese">Chinese</A> characters. (Yue Wu)
Solution:   Take care of <A HREF="mbyte.html#multibyte">multibyte</A> characters when looking for the start of
	    the file name. (Ken Takata)
Files:	    src/edit.c

Patch 7.4.020
Problem:    <A HREF="pattern.html#NFA">NFA</A> engine matches too much with \@&gt;. (John McGowan)
Solution:   When a whole <A HREF="pattern.html#pattern">pattern</A> match is found stop searching.
Files:	    src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.4.021
Problem:    <A HREF="pattern.html#NFA">NFA</A> <A HREF="pattern.html#regexp">regexp</A>: Using \ze in one branch which doesn't match may cause
	    end of another branch to be wrong. (William Fugh)
Solution:   Set end position if <A HREF="motion.html#it">it</A> wasn't set yet.
Files:	    src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.4.022
Problem:    Deadlock while <A HREF="starting.html#exiting">exiting</A>, because of allocating memory.
Solution:   Do not use <A HREF="builtin.html#gettext()">gettext()</A> in deathtrap(). (James McCoy)
Files:	    src/os_unix.c, src/misc1.c

Patch 7.4.023
Problem:    Compiler warning on 64 bit <A HREF="windows.html#windows">windows</A>.
Solution:   Add type cast. (Mike Williams)
Files:	    src/edit.c

Patch 7.4.024
Problem:    When root edits a file the <A HREF="undo.html#undo">undo</A> file is owned by root while the
	    edited file may be owned by another user, which is not allowed.
	    (cac2s)
Solution:   Accept an <A HREF="undo.html#undo">undo</A> file owned by the current user.
Files:	    src/undo.c

Patch 7.4.025 (after 7.4.019)
Problem:    Reading before start of a <A HREF="eval.html#string">string</A>.
Solution:   Do not call mb_ptr_back() at start of a <A HREF="eval.html#string">string</A>. (Dominique Pelle)
Files:	    src/edit.c

Patch 7.4.026
Problem:    Clang warning for int <A HREF="intro.html#shift">shift</A> overflow.
Solution:   Use unsigned and cast back to int. (Dominique Pelle)
Files:	    src/misc2.c

Patch 7.4.027 (after 7.4.025)
Problem:    Another <A HREF="debug.html#valgrind">valgrind</A> error when using <A HREF="change.html#CTRL-X">CTRL-X</A> <A HREF="scroll.html#CTRL-F">CTRL-F</A> at the start of
	    the line. (Dominique Pelle)
Solution:   Don't call mb_ptr_back() at the start of the line.  Add a test.
Files:	    src/edit.c, src/testdir/test32.in

Patch 7.4.028
Problem:    Equivalence classes are not working for <A HREF="mbyte.html#multibyte">multibyte</A> characters.
Solution:   Copy the rules from the old to the new <A HREF="pattern.html#regexp">regexp</A> engine. Add a test
	    to check both engines.
Files:	    src/regexp_nfa.c, src/testdir/test44.in, src/testdir/test99.in,
	    src/testdir/test99.ok, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
	    src/testdir/Makefile

Patch 7.4.029
Problem:    An error in a <A HREF="pattern.html#pattern">pattern</A> is reported <A HREF="if_cscop.html#twice">twice</A>.
Solution:   Remove the retry with the backtracking engine, <A HREF="motion.html#it">it</A> won't work.
Files:	    src/regexp.c

Patch 7.4.030
Problem:    The -mno-cygwin argument is no longer supported by Cygwin.
Solution:   Remove the arguments. (Steve Hall)
Files:	    src/GvimExt/Make_cyg.mak, src/Make_cyg.mak, src/xxd/Make_cyg.mak

Patch 7.4.031
Problem:    &quot;:diffoff!&quot; resets <A HREF="options.html#options">options</A> even when <A HREF="options.html#'diff'">'diff'</A> is not set. (Charles
	    Cooper)
Solution:   Only resets related <A HREF="options.html#options">options</A> in a <A HREF="windows.html#window">window</A> where <A HREF="options.html#'diff'">'diff'</A> is set.
Files:	    src/diff.c

Patch 7.4.032
Problem:    <A HREF="pattern.html#NFA">NFA</A> engine does not match the NUL character. (Jonathon Merz)
Solution:   Use 0x0a instead of NUL. (Christian Brabandt)
Files:	    src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.4.033
Problem:    When the <A HREF="terminal.html#terminal">terminal</A> has only 20 lines test 92 and 93 overwrite the
	    input file.
Solution:   Explicitly write test.out. Check that the <A HREF="terminal.html#terminal">terminal</A> is large enough
	    to run the tests.  (Hirohito Higashi)
Files:	    src/testdir/test92.in, src/testdir/test93.in,
	    src/testdir/test1.in, src/testdir/Makefile

Patch 7.4.034
Problem:    Using &quot;<A HREF="change.html#p">p</A>&quot; in <A HREF="visual.html#Visual">Visual</A> block mode only changes the first line.
Solution:   Repeat the put in all text in the block. (Christian Brabandt)
Files:	    runtime/doc/change.txt, src/ops.c, src/normal.c,
	    src/testdir/test20.in, src/testdir/test20.ok

Patch 7.4.035
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: The mouse pointer flickers when going from command
	    line mode to <A HREF="intro.html#Normal">Normal</A> mode.
Solution:   Check for WM_NCMOUSEMOVE. (Ken Takata)
Files:	    src/gui_w48.c

Patch 7.4.036
Problem:    <A HREF="pattern.html#NFA">NFA</A> engine does not capture group correctly when using \@&gt;. (ZyX)
Solution:   Copy submatches before doing the recursive match.
Files:	    src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.4.037
Problem:    Using &quot;\ze&quot; in a sub-pattern does not result in the end of the
	    match to be set. (Axel Bender)
Solution:   Copy the end of match position when a recursive match was
	    successful.
Files:	    src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.4.038
Problem:    Using &quot;<A HREF="spell.html#zw">zw</A>&quot; and &quot;<A HREF="spell.html#zg">zg</A>&quot; when <A HREF="options.html#'spell'">'spell'</A> is off give a confusing error
	    message. (Gary Johnson)
Solution:   Ignore the error when locating the <A HREF="motion.html#word">word</A>.  Explicitly mention what
	    <A HREF="motion.html#word">word</A> was added. (Christian Brabandt)
Files:	    src/normal.c, src/spell.c

Patch 7.4.039
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: MSVC10 and earlier can't handle symlinks to a
	    directory properly.
Solution:   Add stat_symlink_aware() and wstat_symlink_aware(). (Ken Takata)
Files:	    src/os_mswin.c, src/os_win32.c, src/os_win32.h

Patch 7.4.040
Problem:    Valgrind error on exit when a <A HREF="map.html#script-local">script-local</A> variable holds a
	    reference to the scope of another <A HREF="usr_41.html#script">script</A>.
Solution:   First clear all <A HREF="eval.html#variables">variables</A>, then free the scopes. (ZyX)
Files:	    src/eval.c

Patch 7.4.041 (after 7.4.034)
Problem:    <A HREF="visual.html#Visual">Visual</A> selection does not remain after being copied over. (Axel
	    Bender)
Solution:   Move when VIsual_active is reset. (Christian Brabandt)
Files:	    src/ops.c

Patch 7.4.042
Problem:    When using &quot;<A HREF="options.html#:setlocal">:setlocal</A>&quot; for <A HREF="options.html#'spell'">'spell'</A> and <A HREF="options.html#'spelllang'">'spelllang'</A> then <A HREF="spell.html#:spelldump">:spelldump</A>
	    doesn't work. (Dimitar Dimitrov)
Solution:   Copy the option <A HREF="eval.html#variables">variables</A> to the new <A HREF="windows.html#window">window</A> used to show the dump.
	    (Christian Brabandt)
Files:	    src/spell.c

Patch 7.4.043
Problem:    <A HREF="os_vms.html#VMS">VMS</A> can't handle long function names.
Solution:   Shorten may_req_ambiguous_character_width. (Samuel Ferencik)
Files:	    src/main.c, src/term.c, src/proto/term.pro


Patch 7.4.044 (after 7.4.039)
Problem:    Can't build with old MSVC. (Wang Shoulin)
Solution:   Define OPEN_OH_ARGTYPE instead of using intptr_t directly.
Files:	    src/os_mswin.c

Patch 7.4.045
Problem:    <A HREF="builtin.html#substitute()">substitute()</A> does not work properly when the <A HREF="pattern.html#pattern">pattern</A> starts with
	    &quot;\ze&quot;.
Solution:   Detect an empty match. (Christian Brabandt)
Files:	    src/eval.c, src/testdir/test80.in, src/testdir/test80.ok

Patch 7.4.046
Problem:    Can't use <A HREF="if_tcl.html#Tcl">Tcl</A> 8.6.
Solution:   Change how Tcl_FindExecutable is called. (Jan Nijtmans)
Files:	    src/if_tcl.c

Patch 7.4.047
Problem:    When using <A HREF="builtin.html#input()">input()</A> in a function invoked by a <A HREF="map.html#mapping">mapping</A> <A HREF="motion.html#it">it</A> doesn't
	    work.
Solution:   Temporarily reset ex_normal_busy. (Yasuhiro Matsumoto)
Files:	    src/eval.c

Patch 7.4.048
Problem:    Recent clang version complains about -fno-strength-reduce.
Solution:   Add a configure check for the clang version. (Kazunobu Kuriyama)
Files:	    src/configure.in, src/auto/configure

Patch 7.4.049
Problem:    In <A HREF="intro.html#Ex">Ex</A> mode, when line numbers are enabled the substitute prompt is
	    wrong.
Solution:   Adjust for the line number size. (Benoit Pierre)
Files:	    src/ex_cmds.c

Patch 7.4.050
Problem:    &quot;<A HREF="visual.html#gn">gn</A>&quot; selects too much for the <A HREF="pattern.html#pattern">pattern</A> &quot;\d&quot; when there are two
	    lines with a single digit. (Ryan Carney)
Solution:   Adjust the logic of is_one_char(). (Christian Brabandt)
Files:	    src/search.c, src/testdir/test53.in, src/testdir/test53.ok

Patch 7.4.051
Problem:    <A HREF="autocmd.html#Syntax">Syntax</A> highlighting a Yaml file causes a crash. (Blake Preston)
Solution:   Copy the pim structure before calling addstate() to avoid <A HREF="motion.html#it">it</A>
	    becoming invalid when the state <A HREF="eval.html#list">list</A> is reallocated.
Files:	    src/regexp_nfa.c

Patch 7.4.052
Problem:    With <A HREF="options.html#'fo'">'fo'</A> set to &quot;a2&quot; <A HREF="insert.html#inserting">inserting</A> a space in the first column may
	    cause the cursor to jump to the previous line.
Solution:   Handle the <A HREF="change.html#case">case</A> when there is no comment leader properly. (Tor
	    Perkins)  Also fix that cursor is in the wrong place when spaces
	    get replaced with a <A HREF="intro.html#Tab">Tab</A>.
Files:	    src/misc1.c, src/ops.c, src/testdir/test68.in,
	    src/testdir/test68.ok

Patch 7.4.053
Problem:    Test75 has a wrong header. (ZyX)
Solution:   Fix the text and remove leading &quot;.
Files:	    src/testdir/test75.in

Patch 7.4.054
Problem:    Reading past end of the <A HREF="options.html#'stl'">'stl'</A> <A HREF="eval.html#string">string</A>.
Solution:   Don't increment pointer when already at the NUL. (Christian
	    Brabandt)
Files:	    src/buffer.c

Patch 7.4.055
Problem:    <A HREF="os_mac.html#Mac">Mac</A>: Where availability macros are defined depends on the system.
Solution:   Add a configure check. (Felix Bnemann)
Files:	    src/config.h.in, src/configure.in, src/auto/configure,
	    src/os_mac.h

Patch 7.4.056
Problem:    <A HREF="os_mac.html#Mac">Mac</A>: Compilation problem with OS X <A HREF="usr_10.html#10.9">10.9</A> Mavericks.
Solution:   Include AvailabilityMacros.h when available. (Kazunobu Kuriyama)
Files:	    src/os_unix.c

Patch 7.4.057
Problem:    <A HREF="builtin.html#byteidx()">byteidx()</A> does not work for composing characters.
Solution:   Add <A HREF="builtin.html#byteidxcomp()">byteidxcomp()</A>.
Files:	    src/eval.c, src/testdir/test69.in, src/testdir/test69.ok,
	    runtime/doc/eval.txt

Patch 7.4.058
Problem:    Warnings on 64 bit Windows.
Solution:   Add type casts. (Mike Williams)
Files:	    src/ops.c

Patch 7.4.059
Problem:    set_last_cursor() may encounter w_buffer being NULL.  (Matt
	    Mkaniaris)
Solution:   Check for NULL.
Files:	    src/mark.c

Patch 7.4.060
Problem:    Declaration has wrong return type for PyObject_SetAttrString().
Solution:   Use int instead of PyObject. (Andreas Schwab)
Files:	    src/if_python.c, src/if_python3.c

Patch 7.4.061 (after 7.4.055 and 7.4.056)
Problem:    Availability macros configure check in wrong place.
Solution:   Also check when not using Darwin. Remove version check.
Files:	    src/configure.in, src/auto/configure, src/os_unix.c

Patch 7.4.062 (after 7.4.061)
Problem:    Configure check for AvailabilityMacros.h is wrong.
Solution:   Use AC_CHECK_HEADERS().
Files:	    src/configure.in, src/auto/configure

Patch 7.4.063
Problem:    Crash when using invalid key in <A HREF="if_pyth.html#Python">Python</A> dictionary.
Solution:   Check for object to be NULL.  Add tests. (ZyX)
Files:	    src/if_py_both.h, src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.4.064
Problem:    When <A HREF="change.html#replacing">replacing</A> a character in <A HREF="visual.html#Visual">Visual</A> block mode, entering a CR
	    does not cause a repeated line break.
Solution:   Recognize the situation and repeat the line break. (Christian
	    Brabandt)
Files:	    src/normal.c, src/ops.c, src/testdir/test39.in,
	    src/testdir/test39.ok

Patch 7.4.065
Problem:    When <A HREF="repeat.html#recording">recording</A>, the character typed at the <A HREF="message.html#hit-enter">hit-enter</A> prompt is
	    recorded <A HREF="if_cscop.html#twice">twice</A>. (Urtica Dioica)
Solution:   Avoid <A HREF="repeat.html#recording">recording</A> the character <A HREF="if_cscop.html#twice">twice</A>. (Christian Brabandt)
Files:	    src/message.c

Patch 7.4.066
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: When there is a colon in the file name (sub-stream
	    feature) the swap file name is wrong.
Solution:   Change the colon to &quot;<A HREF="motion.html#&#37;">&#37;</A>&quot;. (Yasuhiro Matsumoto)
Files:	    src/fileio.c, src/memline.c, src/misc1.c, src/proto/misc1.pro

Patch 7.4.067
Problem:    After <A HREF="insert.html#inserting">inserting</A> comment leader, CTRL-\ <A HREF="motion.html#CTRL-O">CTRL-O</A> does move the
	    cursor. (Wiktor Ruben)
Solution:   Avoid moving the cursor. (Christian Brabandt)
Files:	    src/edit.c

Patch 7.4.068
Problem:    Cannot build Vim on <A HREF="os_mac.html#Mac">Mac</A> with non-Apple compilers.
Solution:   Remove the -no-cpp-precomp flag. (Misty De Meo)
Files:	    src/configure.in, src/auto/configure, src/osdef.sh

Patch 7.4.069
Problem:    Cannot right <A HREF="intro.html#shift">shift</A> lines starting with #.
Solution:   Allow the right <A HREF="intro.html#shift">shift</A> when <A HREF="options.html#'cino'">'cino'</A> contains #N with N <A HREF="change.html#&gt;">&gt;</A> 0.
	    (Christian Brabandt)
	    Refactor parsing <A HREF="options.html#'cino'">'cino'</A>, store the values in the buffer.
Files:	    runtime/doc/indent.txt, src/buffer.c, src/edit.c, src/eval.c,
	    src/ex_getln.c, src/fold.c, src/misc1.c, src/ops.c,
	    src/proto/misc1.pro, src/proto/option.pro, src/structs.h,
	    src/option.c

Patch 7.4.070 (after 7.4.069)
Problem:    Can't compile with tiny features. (Tony Mechelynck)
Solution:   Add #ifdef.
Files:	    src/buffer.c

Patch 7.4.071 (after 7.4.069)
Problem:    Passing <A HREF="vi_diff.html#limits">limits</A> around too often.
Solution:   Use <A HREF="vi_diff.html#limits">limits</A> from buffer.
Files:	    src/edit.c, src/misc1.c, src/proto/misc1.pro

Patch 7.4.072
Problem:    Crash when using <A HREF="insert.html#Insert">Insert</A> mode completion.
Solution:   Avoid going past the end of pum_array. (idea by Francisco Lopes)
Files:	    src/popupmnu.c

Patch 7.4.073
Problem:    Setting undolevels for one buffer changes <A HREF="undo.html#undo">undo</A> in another.
Solution:   Make <A HREF="options.html#'undolevels'">'undolevels'</A> a <A HREF="options.html#global-local">global-local</A> option. (Christian Brabandt)
Files:	    runtime/doc/options.txt, src/buffer.c, src/option.c, src/option.h
	    src/structs.h, src/undo.c

Patch 7.4.074
Problem:    When undo'ing all changes and creating a new change the <A HREF="undo.html#undo">undo</A>
	    structure is incorrect. (Christian Brabandt)
Solution:   When <A HREF="change.html#deleting">deleting</A> the branch starting at the old header, delete the
	    whole branch, not just the first entry.
Files:	    src/undo.c

Patch 7.4.075
Problem:    Locally setting <A HREF="options.html#'undolevels'">'undolevels'</A> is not tested.
Solution:   Add a test. (Christian Brabandt)
Files:	    src/testdir/test100.in, src/testdir/test100.ok,
	    src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile, src/Makefile

Patch 7.4.076
Problem:    &quot;cgn&quot; does not wrap around the end of the file. (Dimitar Dimitrov)
Solution:   Restore <A HREF="options.html#'wrapscan'">'wrapscan'</A> earlier. (Christian Brabandt)
Files:	    src/search.c

Patch 7.4.077
Problem:    <A HREF="os_dos.html#DOS">DOS</A> installer creates shortcut without a path, resulting in the
	    current directory to be C:\Windows\system32.
Solution:   Use environment <A HREF="eval.html#variables">variables</A>.
Files:	    src/dosinst.c

Patch 7.4.078
Problem:    MSVC 2013 is not supported.
Solution:   Recognize and support MSVC 2013. (Ed Brown)
Files:	    src/Make_mvc.mak

Patch 7.4.079
Problem:    A <A HREF="usr_41.html#script">script</A> cannot detect whether <A HREF="options.html#'hlsearch'">'hlsearch'</A> highlighting is actually
	    displayed.
Solution:   Add the &quot;<A HREF="eval.html#v:hlsearch">v:hlsearch</A>&quot; variable. (ZyX)
Files:	    src/eval.c, src/ex_docmd.c,
	    src/option.c, src/screen.c, src/search.c, src/tag.c, src/vim.h,
	    src/testdir/test101.in, src/testdir/test101.ok,
	    src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile

Patch 7.4.080 (after 7.4.079)
Problem:    Missing documentation for <A HREF="eval.html#v:hlsearch">v:hlsearch</A>.
Solution:   Include the right file in the patch.
Files:	    runtime/doc/eval.txt

Patch 7.4.081 (after 7.4.078)
Problem:    Wrong logic when ANALYZE is &quot;yes&quot;.
Solution:   Use or instead of and. (KF Leong)
Files:	    src/Make_mvc.mak

Patch 7.4.082
Problem:    Using &quot;<A HREF="editing.html#gf">gf</A>&quot; in a changed buffer suggests adding &quot;<A HREF="change.html#!">!</A>&quot;, which is not
	    possible. (Tim Chase)
Solution:   Pass a flag to check_changed() whether adding ! make sense.
Files:	    src/vim.h, src/ex_cmds2.c, src/proto/ex_cmds2.pro, src/globals.h,
	    src/ex_cmds.c, src/ex_docmd.c

Patch 7.4.083
Problem:    It's hard to avoid adding a used <A HREF="pattern.html#pattern">pattern</A> to the search <A HREF="cmdline.html#history">history</A>.
Solution:   Add the &quot;<A HREF="cmdline.html#:keeppatterns">:keeppatterns</A>&quot; modifier. (Christian Brabandt)
Files:	    runtime/doc/cmdline.txt, src/ex_cmds.h, src/ex_docmd.c,
	    src/ex_getln.c, src/structs.h

Patch 7.4.084
Problem:    <A HREF="if_pyth.html#Python">Python</A>: interrupt not being properly discarded. (Yggdroot Chen)
Solution:   Discard interrupt in VimTryEnd. (ZyX)
Files:	    src/if_py_both.h, src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.4.085
Problem:    When <A HREF="insert.html#inserting">inserting</A> text in <A HREF="visual.html#Visual">Visual</A> block mode and moving the cursor the
	    wrong text gets repeated in other lines.
Solution:   Use the <A HREF="motion.html#'[">'[</A> <A HREF="motion.html#mark">mark</A> to find the start of the actually inserted text.
	    (Christian Brabandt)
Files:	    src/ops.c, src/testdir/test39.in, src/testdir/test39.ok

Patch 7.4.086
Problem:    Skipping over an <A HREF="eval.html#expression">expression</A> when not evaluating <A HREF="motion.html#it">it</A> does not work
	    properly for <A HREF="eval.html#dict">dict</A> members.
Solution:   Skip over unrecognized <A HREF="eval.html#expression">expression</A>. (ZyX)
Files:	    src/eval.c, src/testdir/test34.in, src/testdir/test34.ok

Patch 7.4.087
Problem:    Compiler warning on 64 bit Windows systems.
Solution:   Fix type cast. (Mike Williams)
Files:	    src/ops.c

Patch 7.4.088
Problem:    When <A HREF="spell.html#spell">spell</A> checking is enabled Asian characters are always marked
	    <A HREF="motion.html#as">as</A> error.
Solution:   When <A HREF="options.html#'spelllang'">'spelllang'</A> contains &quot;cjk&quot; <A HREF="diff.html#do">do</A> not <A HREF="motion.html#mark">mark</A> Asian characters <A HREF="motion.html#as">as</A>
	    error. (Ken Takata)
Files:	    runtime/doc/options.txt, runtime/doc/spell.txt, src/mbyte.c,
	    src/option.c, src/spell.c, src/structs.h

Patch 7.4.089
Problem:    When editing a file in a directory mounted through sshfs Vim
	    doesn't set the security context on a renamed file.
Solution:   Add mch_copy_sec() to vim_rename(). (Peter Backes)
Files:	    src/fileio.c

Patch 7.4.090
Problem:    <A HREF="os_win32.html#Win32">Win32</A>: When a directory name contains an exclamation <A HREF="motion.html#mark">mark</A>,
	    completion doesn't complete the contents of the directory.
Solution:   Escape the exclamation <A HREF="motion.html#mark">mark</A>. (Jan Stocker)
Files:	    src/ex_getln.c, src/testdir/test102.in, src/testdir/test102.ok,
	    src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile

Patch 7.4.091 (after 7.4.089)
Problem:    Missing semicolon.
Solution:   Add the semicolon.
Files:	    src/fileio.c

Patch 7.4.092 (after 7.4.088)
Problem:    Can't build small version.
Solution:   Add #ifdef where the b_cjk flag is used. (Ken Takata)
Files:	    src/spell.c

Patch 7.4.093
Problem:    Configure can't use LuaJIT on ubuntu 12.04.
Solution:   Adjust the configure <A HREF="pattern.html#regexp">regexp</A> that locates the version number.
	    (Charles Strahan)
Files:	    src/configure.in, src/auto/configure

Patch 7.4.094
Problem:    Configure may not find that -lint is needed for <A HREF="builtin.html#gettext()">gettext()</A>.
Solution:   Check for <A HREF="builtin.html#gettext()">gettext()</A> with empty $LIBS.  (Thomas De Schampheleire)
Files:	    src/configure.in, src/auto/configure

Patch 7.4.095 (after 7.4.093)
Problem:    Regexp for LuaJIT version doesn't work on BSD.
Solution:   Use &quot;*&quot; instead of &quot;\+&quot; and &quot;\?&quot;. (Ozaki Kiichi)
Files:	    src/configure.in, src/auto/configure

Patch 7.4.096
Problem:    Can't change directory to an UNC path.
Solution:   Use win32_getattrs() in mch_getperm(). (Christian Brabandt)
Files:	    src/os_win32.c

Patch 7.4.097 (after 7.4.034)
Problem:    Unexpected behavior change related to <A HREF="options.html#'virtualedit'">'virtualedit'</A>. (Ingo Karkat)
Solution:   Update the valid cursor position. (Christian Brabandt)
Files:	    src/ops.c

Patch 7.4.098
Problem:    When using &quot;:'&lt;,'&gt;del&quot; <A HREF="message.html#errors">errors</A> may be given for the visual line
	    numbers being out of range.
Solution:   Reset <A HREF="visual.html#Visual">Visual</A> mode in &quot;<A HREF="change.html#:del">:del</A>&quot;. (Lech Lorens)
Files:	    src/ex_docmd.c, src/testdir/test103.in, src/testdir/test103.ok,
	    src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile

Patch 7.4.099
Problem:    Append in blockwise <A HREF="visual.html#Visual">Visual</A> mode with &quot;<A HREF="motion.html#$">$</A>&quot; is wrong.
Solution:   After &quot;<A HREF="motion.html#$">$</A>&quot; don't use the code that checks if the cursor was moved.
	    (Hirohito Higashi, Ken Takata)
Files:	    src/ops.c, src/testdir/test39.in, src/testdir/test39.ok

Patch 7.4.100
Problem:    <A HREF="pattern.html#NFA">NFA</A> <A HREF="pattern.html#regexp">regexp</A> doesn't handle backreference correctly. (Ryuichi
	    Hayashida, Urtica Dioica)
Solution:   Always add NFA_SKIP, also when <A HREF="motion.html#it">it</A> already exists at the start
	    position.
Files:	    src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.4.101
Problem:    Using \1 in <A HREF="pattern.html#pattern">pattern</A> goes one line too far. (Bohr Shaw, John Little)
Solution:   Only advance the match end for the matched characters in the last
	    line.
Files:	    src/regexp.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.4.102
Problem:    Crash when interrupting &quot;<A HREF="spell.html#z=">z=</A>&quot;.
Solution:   Add safety check for <A HREF="motion.html#word">word</A> length. (Christian Brabandt, Dominique
	    Pelle)
Files:	    src/spell.c

Patch 7.4.103
Problem:    Dos installer uses an old way to <A HREF="intro.html#escape">escape</A> spaces in the <A HREF="diff.html#diff">diff</A>
	    command.
Solution:   Adjust the quoting to the new default shellxquote. (Ben Fritz)
Files:	    src/dosinst.c

Patch 7.4.104
Problem:    &quot;<A HREF="helphelp.html#:help">:help</A> s/\_&quot; reports an internal error. (John Beckett)
Solution:   Check for NUL and invalid character classes.
Files:	    src/regexp_nfa.c

Patch 7.4.105
Problem:    Completing a <A HREF="tagsrch.html#tag">tag</A> <A HREF="pattern.html#pattern">pattern</A> may give an error for invalid <A HREF="pattern.html#pattern">pattern</A>.
Solution:   Suppress the error, just return no matches.
Files:	    src/tag.c

Patch 7.4.106
Problem:    Can't build with <A HREF="if_ruby.html#Ruby">Ruby</A> using Cygwin.
Solution:   Fix library name in makefile. (Steve Hall)
Files:	    src/Make_cyg.mak

Patch 7.4.107
Problem:    <A HREF="if_pyth.html#Python">Python</A>: When vim.eval() encounters a Vim error, a try/catch in the
	    <A HREF="if_pyth.html#Python">Python</A> code doesn't catch <A HREF="motion.html#it">it</A>. (Yggdroot Chen)
Solution:   Throw exceptions on <A HREF="message.html#errors">errors</A> in vim.eval(). (ZyX)
Files:	    src/ex_eval.c, src/if_py_both.h, src/proto/ex_eval.pro,
	    src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.4.108
Problem:    &quot;<A HREF="spell.html#zG">zG</A>&quot; and &quot;<A HREF="spell.html#zW">zW</A>&quot; leave temp files around on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Delete the temp files when <A HREF="starting.html#exiting">exiting</A>. (Ken Takata)
Files:	    src/memline.c, src/proto/spell.pro, src/spell.c

Patch 7.4.109
Problem:    <A HREF="autocmd.html#ColorScheme">ColorScheme</A> <A HREF="autocmd.html#autocommand">autocommand</A> matches with the current buffer name.
Solution:   Match with the colorscheme name. (Christian Brabandt)
Files:	    runtime/doc/autocmd.txt, src/fileio.c, src/syntax.c

Patch 7.4.110
Problem:    &quot;gUgn&quot; cannot be repeated. (Dimitar Dimitrov)
Solution:   Don't put &quot;<A HREF="visual.html#gn">gn</A>&quot; in a different order in the <A HREF="undo.html#redo">redo</A> buffer.  Restore
	    <A HREF="options.html#'wrapscan'">'wrapscan'</A> when the <A HREF="pattern.html#pattern">pattern</A> isn't found. (Christian Wellenbrock)
Files:	    src/normal.c, src/search.c, src/test53.in, src/test53.ok

Patch 7.4.111
Problem:    Memory leak in <A HREF="if_pyth.html#Python">Python</A> OptionsAssItem. (Ken Takata)
Solution:   Call Py_XDECREF() where needed. (ZyX)
Files:	    src/if_py_both.h

Patch 7.4.112
Problem:    The defaults for <A HREF="options.html#'directory'">'directory'</A> and <A HREF="options.html#'backupdir'">'backupdir'</A> on <A HREF="os_win32.html#MS-Windows">MS-Windows</A> <A HREF="diff.html#do">do</A> not
	    include a directory that exists.
Solution:   Use $TEMP.
Files:	    src/os_dos.h

Patch 7.4.113
Problem:    MSVC static analysis gives warnings.
Solution:   Avoid the warnings and avoid possible bugs. (Ken Takata)
Files:	    src/os_win32.c

Patch 7.4.114
Problem:    New GNU make outputs <A HREF="message.html#messages">messages</A> about <A HREF="change.html#changing">changing</A> directory in another
	    format.
Solution:   Recognize the new format.
Files:	    src/option.h

Patch 7.4.115
Problem:    When using Zsh expanding ~abc doesn't work when the result
	    contains a space.
Solution:   Off-by-one error in detecting the NUL. (Pavol Juhas)
Files:	    src/os_unix.c

Patch 7.4.116
Problem:    When a <A HREF="map.html#mapping">mapping</A> starts with a space, the typed space does not show
	    up for <A HREF="options.html#'showcmd'">'showcmd'</A>.
Solution:   Show &quot;&lt;20&gt;&quot;. (Brook Hong)
Files:	    src/normal.c

Patch 7.4.117
Problem:    Can't build with Cygwin/MingW and <A HREF="if_perl.html#Perl">Perl</A> 5.18.
Solution:   Add a linker argument for the <A HREF="if_perl.html#Perl">Perl</A> library. (Cesar Romani)
	    Adjust CFLAGS and LIB. (Cesar Romani)
	    Move including inline.h further down. (Ken Takata)
Files:	    src/Make_cyg.mak, src/Make_ming.mak, src/if_perl.xs

Patch 7.4.118
Problem:    It's possible that redrawing the status lines causes
	    win_redr_custom() to be called recursively.
Solution:   Protect against recursiveness. (Yasuhiro Matsumoto)
Files:	    src/screen.c

Patch 7.4.119
Problem:    Vim doesn't work well on OpenVMS.
Solution:   Fix various problems. (Samuel Ferencik)
Files:	    src/os_unix.c, src/os_unix.h, src/os_vms.c

Patch 7.4.120 (after 7.4.117)
Problem:    Can't build with <A HREF="if_perl.html#Perl">Perl</A> 5.18 on Linux. (Lcd 47)
Solution:   Add #ifdef. (Ken Takata)
Files:	    src/if_perl.xs

Patch 7.4.121
Problem:    Completion doesn't work for &quot;:py3d&quot; and &quot;:py3f&quot;. (Bohr Shaw)
Solution:   Skip over letters after &quot;<A HREF="if_pyth.html#:py3">:py3</A>&quot;.
Files:	    src/ex_docmd.c

Patch 7.4.122
Problem:    <A HREF="os_win32.html#Win32">Win32</A>: When <A HREF="options.html#'encoding'">'encoding'</A> is set to &quot;<A HREF="mbyte.html#utf-8">utf-8</A>&quot; and the active codepage
	    is cp932 then &quot;<A HREF="quickfix.html#:grep">:grep</A>&quot; and other commands don't work for <A HREF="mbyte.html#multibyte">multibyte</A>
	    characters.
Solution:   (Yasuhiro Matsumoto)
Files:	    src/os_win32.c

Patch 7.4.123
Problem:    <A HREF="os_win32.html#Win32">Win32</A>: Getting user name does not use wide function.
Solution:   Use GetUserNameW() if possible. (Ken Takata)
Files:	    src/os_win32.c

Patch 7.4.124
Problem:    <A HREF="os_win32.html#Win32">Win32</A>: Getting host name does not use wide function.
Solution:   Use GetComputerNameW() if possible. (Ken Takata)
Files:	    src/os_win32.c

Patch 7.4.125
Problem:    <A HREF="os_win32.html#Win32">Win32</A>: Dealing with <A HREF="message.html#messages">messages</A> may not work for <A HREF="mbyte.html#multibyte">multibyte</A> chars.
Solution:   Use pDispatchMessage(). (Ken Takata)
Files:	    src/os_win32.c

Patch 7.4.126
Problem:    Compiler warnings for &quot;const&quot; and incompatible types.
Solution:   Remove &quot;const&quot;, add type cast. (Ken Takata)
Files:	    src/os_win32.c

Patch 7.4.127
Problem:    <A HREF="if_perl.html#Perl">Perl</A> 5.18 on <A HREF="os_unix.html#Unix">Unix</A> doesn't work.
Solution:   Move workaround to after including vim.h. (Ken Takata)
Files:	    src/if_perl.xs

Patch 7.4.128
Problem:    <A HREF="if_perl.html#Perl">Perl</A> 5.18 for MSVC doesn't work.
Solution:   Add check in makefile and define __inline. (Ken Takata)
Files:	    src/Make_mvc.mak, src/if_perl.xs

Patch 7.4.129
Problem:    getline(-1) returns zero. (mvxxc)
Solution:   Return an empty <A HREF="eval.html#string">string</A>.
Files:	    src/eval.c

Patch 7.4.130
Problem:    Relative line numbers mix up <A HREF="windows.html#windows">windows</A> when using <A HREF="fold.html#folds">folds</A>.
Solution:   Use hasFoldingWin() instead of hasFolding(). (Lech Lorens)
Files:	    src/misc2.c

Patch 7.4.131
Problem:    Syncbind causes <A HREF="message.html#E315">E315</A> <A HREF="message.html#errors">errors</A> in some situations. (Liang Li)
Solution:   Set and restore curbuf in ex_syncbind(). (Christian Brabandt)
Files:	    src/ex_docmd.c, src/testdir/test37.ok

Patch 7.4.132 (after 7.4.122)
Problem:    <A HREF="os_win32.html#Win32">Win32</A>: flags and inherit_handles arguments mixed up.
Solution:   Swap the argument. (cs86661)
Files:	    src/os_win32.c

Patch 7.4.133
Problem:    Clang warns for using NUL.
Solution:   Change NUL to NULL. (Dominique Pelle)
Files:	    src/eval.c, src/misc2.c

Patch 7.4.134
Problem:    Spurious space in MingW Makefile.
Solution:   Remove the space. (Michael Soyka)
Files:	    src/Make_ming.mak

Patch 7.4.135
Problem:    Missing dot in MingW test Makefile.
Solution:   Add the dot. (Michael Soyka)
Files:	    src/testdir/Make_ming.mak

Patch 7.4.136 (after 7.4.096)
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: When saving a file with a UNC path the file becomes
	    read-only.
Solution:   Don't mix up <A HREF="os_win32.html#Win32">Win32</A> attributes and <A HREF="os_unix.html#Unix">Unix</A> attributes. (Ken Takata)
Files:	    src/os_mswin.c, src/os_win32.c

Patch 7.4.137
Problem:    Cannot use <A HREF="mbyte.html#IME">IME</A> with Windows 8 console.
Solution:   Change the user of ReadConsoleInput() and PeekConsoleInput().
	    (Nobuhiro Takasaki)
Files:	    src/os_win32.c

Patch 7.4.138 (after 7.4.114)
Problem:    Directory change <A HREF="message.html#messages">messages</A> are not recognized.
Solution:   Fix using a character range literally. (Lech Lorens)
Files:	    src/option.h

Patch 7.4.139
Problem:    Crash when using <A HREF="editing.html#:cd">:cd</A> in <A HREF="autocmd.html#autocommand">autocommand</A>. (Franois Ingelrest)
Solution:   Set w_localdir to NULL after freeing <A HREF="motion.html#it">it</A>. (Dominique Pelle)
Files:	    src/ex_docmd.c, src/window.c

Patch 7.4.140
Problem:    Crash when wiping out buffer triggers <A HREF="autocmd.html#autocommand">autocommand</A> that wipes out
	    only other buffer.
Solution:   Do not delete the last buffer, make <A HREF="motion.html#it">it</A> empty. (Hirohito Higashi)
Files:	    src/buffer.c

Patch 7.4.141
Problem:    Problems when building with Borland: st_mode is signed short;
	    can't build with <A HREF="if_pyth.html#Python">Python</A>; temp files not ignored by Mercurial;
	    building with DEBUG doesn't define _DEBUG.
Solution:   Fix the problems. (Ken Takata)
Files:	    src/Make_bc5.mak, src/if_py_both.h, src/os_win32.c

Patch 7.4.142 (after 7.4.137)
Problem:    On <A HREF="os_win32.html#MS-Windows">MS-Windows</A> 8 <A HREF="mbyte.html#IME">IME</A> input doesn't work correctly.
Solution:   Work around the problem. (Nobuhiro Takasaki)
Files:	    src/os_win32.c

Patch 7.4.143
Problem:    <A HREF="autocmd.html#TextChangedI">TextChangedI</A> is not triggered.
Solution:   Reverse check for &quot;ready&quot;. (lilydjwg)
Files:	    src/edit.c

Patch 7.4.144
Problem:    MingW also supports intptr_t for OPEN_OH_ARGTYPE.
Solution:   Adjust #ifdef. (Ken Takata)
Files:	    src/os_mswin.c

Patch 7.4.145
Problem:    <A HREF="builtin.html#getregtype()">getregtype()</A> does not return zero for unknown <A HREF="sponsor.html#register">register</A>.
Solution:   Adjust documentation: return empty <A HREF="eval.html#string">string</A> for unknown <A HREF="sponsor.html#register">register</A>.
	    Check the <A HREF="sponsor.html#register">register</A> name to be valid. (Yukihiro Nakadaira)
Files:	    runtime/doc/eval.txt, src/ops.c

Patch 7.4.146
Problem:    When starting Vim with &quot;<A HREF="starting.html#-u">-u</A> NONE&quot; <A HREF="eval.html#v:oldfiles">v:oldfiles</A> is NULL.
Solution:   Set <A HREF="eval.html#v:oldfiles">v:oldfiles</A> to an empty <A HREF="eval.html#list">list</A>. (Yasuhiro Matsumoto)
Files:	    src/main.c

Patch 7.4.147
Problem:    Cursor moves to wrong position when using &quot;<A HREF="motion.html#gj">gj</A>&quot; after &quot;<A HREF="motion.html#$">$</A>&quot; and
	    virtual editing is active.
Solution:   Make &quot;<A HREF="motion.html#gj">gj</A>&quot; behave differently when virtual editing is active.
	    (Hirohito Higashi)
Files:	    src/normal.c, src/testdir/test39.in, src/testdir/test39.ok

Patch 7.4.148
Problem:    Cannot build with Cygwin and <A HREF="options.html#X11">X11</A>.
Solution:   Include Xwindows.h instead of windows.h. (Lech Lorens)
Files:	    src/mbyte.c

Patch 7.4.149
Problem:    Get <A HREF="message.html#E685">E685</A> error when assigning a function to an <A HREF="eval.html#autoload">autoload</A> variable.
	    (Yukihiro Nakadaira)
Solution:   Instead of having a global no_autoload variable, pass an <A HREF="eval.html#autoload">autoload</A>
	    flag down to where <A HREF="motion.html#it">it</A> is used. (ZyX)
Files:	    src/eval.c, src/testdir/test55.in, src/testdir/test55.ok,
	    src/testdir/test60.in, src/testdir/test60.ok,
	    src/testdir/sautest/autoload/footest.vim

Patch 7.4.150
Problem:    <A HREF="cmdline.html#:keeppatterns">:keeppatterns</A> is not respected for <A HREF="change.html#:s">:s</A>.
Solution:   Check the keeppatterns flag. (Yasuhiro Matsumoto)
Files:	    src/search.c, src/testdir/test14.in, src/testdir/test14.ok

Patch 7.4.151
Problem:    <A HREF="if_pyth.html#Python">Python</A>: slices with steps are not supported.
Solution:   Support slices in <A HREF="if_pyth.html#Python">Python</A> vim.List. (ZyX)
Files:	    src/eval.c, src/if_py_both.h, src/if_python3.c, src/if_python.c,
	    src/proto/eval.pro, src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.4.152
Problem:    <A HREF="if_pyth.html#Python">Python</A>: Cannot iterate over <A HREF="options.html#options">options</A>.
Solution:   Add <A HREF="options.html#options">options</A> iterator. (ZyX)
Files:	    src/if_py_both.h, src/option.c, src/proto/option.pro,
	    src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok, src/vim.h

Patch 7.4.153
Problem:    Compiler warning for pointer type.
Solution:   Add type cast.
Files:	    src/if_py_both.h, src/if_python.c, src/if_python3.c

Patch 7.4.154 (after 7.4.149)
Problem:    Still a problem with auto-loading.
Solution:   Pass no_autoload to deref_func_name(). (Yukihiro Nakadaira)
Files:	    src/eval.c

Patch 7.4.155
Problem:    &quot;<A HREF="cmdline.html#:keeppatterns">:keeppatterns</A> /pat&quot; does not keep search <A HREF="pattern.html#pattern">pattern</A> offset.
Solution:   Restore the offset after doing the search.
Files:	    src/search.c, src/testdir/test14.in, src/testdir/test14.ok

Patch 7.4.156
Problem:    Test file missing from <A HREF="intro.html#distribution">distribution</A>.
Solution:   Add new directory to file <A HREF="eval.html#list">list</A>.
Files:	    Filelist

Patch 7.4.157
Problem:    Error number used <A HREF="if_cscop.html#twice">twice</A>. (Yukihiro Nakadaira)
Solution:   Change the one not referred in the docs.
Files:	    src/undo.c

Patch 7.4.158 (after 7.4.045)
Problem:    <A HREF="pattern.html#Pattern">Pattern</A> containing \zs is not handled correctly by <A HREF="builtin.html#substitute()">substitute()</A>.
Solution:   Change how an empty match is skipped. (Yukihiro Nakadaira)
Files:	    src/eval.c, src/testdir/test80.in, src/testdir/test80.ok

Patch 7.4.159
Problem:    Completion hangs when scanning the current buffer after doing
	    keywords. (Christian Brabandt)
Solution:   Set the first match position when starting to scan the current
	    buffer.
Files:	    src/edit.c

Patch 7.4.160
Problem:    <A HREF="os_win32.html#Win32">Win32</A>: Crash when executing external command.
Solution:   Only close the handle when <A HREF="motion.html#it">it</A> was created. (Yasuhiro Matsumoto)
Files:	    src/os_win32.c

Patch 7.4.161
Problem:    Crash in <A HREF="if_pyth.html#Python">Python</A> exception handling.
Solution:   Only use exception <A HREF="eval.html#variables">variables</A> if did_throw is set. (ZyX)
Files:	    src/if_py_both.h

Patch 7.4.162
Problem:    Running tests in shadow dir doesn't work.
Solution:   Add testdir/sautest to the shadow target. (James McCoy)
Files:	    src/Makefile

Patch 7.4.163 (after 7.4.142)
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> input doesn't work properly on Windows 7 and earlier.
Solution:   Add a check for Windows 8. (Yasuhiro Matsumoto)
Files:	    src/os_win32.c

Patch 7.4.164 (after 7.4.163)
Problem:    Problem with event handling on Windows 8.
Solution:   Ignore duplicate WINDOW_BUFFER_SIZE_EVENTs. (Nobuhiro Takasaki)
Files:	    src/os_win32.c

Patch 7.4.165
Problem:    By default, after closing a buffer changes can't be undone.
Solution:   In the example <A HREF="starting.html#vimrc">vimrc</A> file set <A HREF="options.html#'undofile'">'undofile'</A>.
Files:	    runtime/vimrc_example.vim

Patch 7.4.166
Problem:    Auto-loading a function for code that won't be executed.
Solution:   Do not auto-load when evaluation is off. (Yasuhiro Matsumoto)
Files:	    src/eval.c

Patch 7.4.167 (after 7.4.149)
Problem:    Fixes are not tested.
Solution:   Add a test for not autoloading on assignment. (Yukihiro Nakadaira)
Files:	    src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile,
	    src/testdir/sautest/autoload/Test104.vim, src/testdir/test104.in,
	    src/testdir/test104.ok

Patch 7.4.168
Problem:    Can't compile with <A HREF="if_ruby.html#Ruby">Ruby</A> 2.1.0.
Solution:   Add support for new GC. (Kohei Suzuki)
Files:	    src/if_ruby.c

Patch 7.4.169
Problem:    &quot;<A HREF="various.html#:sleep">:sleep</A>&quot; puts cursor in the wrong column. (Liang Li)
Solution:   Add the <A HREF="windows.html#window">window</A> offset. (Christian Brabandt)
Files:	    src/ex_docmd.c

Patch 7.4.170
Problem:    Some help <A HREF="tagsrch.html#tags">tags</A> don't work with &quot;<A HREF="helphelp.html#:help">:help</A>&quot;. (Tim Chase)
Solution:   Add exceptions.
Files:	    src/ex_cmds.c

Patch 7.4.171
Problem:    Redo does not set <A HREF="eval.html#v:count">v:count</A> and <A HREF="eval.html#v:count1">v:count1</A>.
Solution:   Use a separate buffer for <A HREF="undo.html#redo">redo</A>, so that we can set the counts when
	    performing <A HREF="undo.html#redo">redo</A>.
Files:	    src/getchar.c, src/globals.h, src/normal.c, src/proto/getchar.pro,
	    src/structs.h

Patch 7.4.172
Problem:    The <A HREF="options.html#blowfish">blowfish</A> code mentions output feedback, but the code is
	    actually doing cipher feedback.
Solution:   Adjust names and comments.
Files:	    src/blowfish.c, src/fileio.c, src/proto/blowfish.pro,
	    src/memline.c

Patch 7.4.173
Problem:    When using scrollbind the cursor can end up below the last line.
	    (mvxxc)
Solution:   Reset w_botfill when <A HREF="scroll.html#scrolling">scrolling</A> up. (Christian Brabandt)
Files:	    src/move.c

Patch 7.4.174
Problem:    Compiler warnings for <A HREF="if_pyth.html#Python">Python</A> interface. (Tony Mechelynck)
Solution:   Add type casts, initialize variable.
Files:	    src/if_py_both.h

Patch 7.4.175
Problem:    When a wide library function fails, falling back to the non-wide
	    function may <A HREF="diff.html#do">do</A> the wrong thing.
Solution:   Check the platform, when the wide function is supported don't fall
	    back to the non-wide function. (Ken Takata)
Files:	    src/os_mswin.c, src/os_win32.c

Patch 7.4.176
Problem:    Dictionary.update() throws an error when used without arguments.
	    <A HREF="if_pyth.html#Python">Python</A> programmers don't expect that.
Solution:   Make Dictionary.update() without arguments <A HREF="diff.html#do">do</A> nothing. (ZyX)
Files:	    src/if_py_both.h, src/testdir/test86.in, src/testdir/test87.in

Patch 7.4.177
Problem:    Compiler warning for unused variable. (Tony Mechelynck)
Solution:   Add #ifdef.
Files:	    src/move.c

Patch 7.4.178
Problem:    The <A HREF="change.html#J">J</A> command does not update <A HREF="motion.html#'[">'[</A> and <A HREF="motion.html#']">']</A> marks. (William Gardner)
Solution:   Set the marks. (Christian Brabandt)
Files:	    src/ops.c

Patch 7.4.179
Problem:    Warning for type-punned pointer. (Tony Mechelynck)
Solution:   Use intermediate variable.
Files:	    src/if_py_both.h

Patch 7.4.180 (after 7.4.174)
Problem:    Older <A HREF="if_pyth.html#Python">Python</A> versions don't support &#37;ld.
Solution:   Use &#37;d instead. (ZyX)
Files:	    src/if_py_both.h

Patch 7.4.181
Problem:    When using <A HREF="options.html#'pastetoggle'">'pastetoggle'</A> the status lines are not updated. (Samuel
	    Ferencik, Jan Christoph Ebersbach)
Solution:   Update the status lines. (Nobuhiro Takasaki)
Files:	    src/getchar.c

Patch 7.4.182
Problem:    Building with <A HREF="if_mzsch.html#mzscheme">mzscheme</A> and racket does not work. (David Chimay)
Solution:   Adjust autoconf. (Sergey Khorev)
Files:	    src/configure.in, src/auto/configure

Patch 7.4.183
Problem:    MSVC <A HREF="visual.html#Visual">Visual</A> Studio update not supported.
Solution:   Add version number. (Mike Williams)
Files:	    src/Make_mvc.mak

Patch 7.4.184
Problem:    <A HREF="builtin.html#match()">match()</A> does not work properly with a {count} argument.
Solution:   Compute the length once and update <A HREF="motion.html#it">it</A>.  Quit the loop when at the
	    end. (Hirohito Higashi)
Files:	    src/eval.c, src/testdir/test53.in, src/testdir/test53.ok

Patch 7.4.185
Problem:    Clang gives warnings.
Solution:   Adjust how bigness is set. (Dominique Pelle)
Files:	    src/ex_cmds.c

Patch 7.4.186 (after 7.4.085)
Problem:    <A HREF="insert.html#Insert">Insert</A> in <A HREF="visual.html#Visual">Visual</A> mode sometimes gives incorrect results.
	    (Dominique Pelle)
Solution:   Remember the original insert start position. (Christian Brabandt,
	    Dominique Pelle)
Files:	    src/edit.c, src/globals.h, src/ops.c, src/structs.h

Patch 7.4.187
Problem:    Delete that crosses line break splits <A HREF="mbyte.html#multibyte">multibyte</A> character.
Solution:   Advance a character instead of a byte. (Cade Foster)
Files:	    src/normal.c, src/testdir/test69.in, src/testdir/test69.ok

Patch 7.4.188
Problem:    SIZEOF_LONG clashes with similar defines in header files.
Solution:   Rename to a name starting with VIM_.  Also for SIZEOF_INT.
Files:	    src/if_ruby.c, src/vim.h, src/configure.in, src/auto/configure,
	    src/config.h.in, src/fileio.c, src/if_python.c, src/message.c,
	    src/spell.c, src/feature.h, src/os_os2_cfg.h, src/os_vms_conf.h,
	    src/os_win16.h, src/structs.h

Patch 7.4.189
Problem:    Compiler warning for unused argument.
Solution:   Add UNUSED.
Files:	    src/eval.c

Patch 7.4.190
Problem:    Compiler warning for using &#37;lld for off_t.
Solution:   Add type cast.
Files:	    src/fileio.c

Patch 7.4.191
Problem:    Escaping a file name for shell commands can't be done without a
	    function.
Solution:   Add the :S file name modifier.
Files:	    src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile,
	    src/testdir/test105.in, src/testdir/test105.ok,
	    runtime/doc/cmdline.txt, runtime/doc/eval.txt,
	    runtime/doc/map.txt, runtime/doc/options.txt,
	    runtime/doc/quickfix.txt, runtime/doc/usr_30.txt,
	    runtime/doc/usr_40.txt, runtime/doc/usr_42.txt,
	    runtime/doc/vi_diff.txt, src/eval.c, src/misc2.c, src/normal.c,
	    src/proto/misc2.pro

Patch 7.4.192
Problem:    Memory leak when giving <A HREF="eval.html#E853">E853</A>.
Solution:   Free the argument. (Dominique Pelle)
Files:	    src/eval.c

Patch 7.4.193
Problem:    Typos in <A HREF="message.html#messages">messages</A>.
Solution:   &quot;then&quot; <A HREF="eval.html#-&gt;">-&gt;</A> &quot;than&quot;. (Dominique Pelle)
Files:	    src/if_py_both.h, src/spell.c

Patch 7.4.194
Problem:    Can't build for Android.
Solution:   Add #if condition. (Fredrik Fornwall)
Files:	    src/mbyte.c

Patch 7.4.195 (after 7.4.193)
Problem:    <A HREF="if_pyth.html#Python">Python</A> tests fail.
Solution:   Change &quot;then&quot; to &quot;than&quot; in more places. (Dominique Pelle, Taro
	    Muraoka)
Files:	    src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.4.196
Problem:    Tests fail on Solaris 9 and 10.
Solution:   Use &quot;test -f&quot; instead of &quot;test -e&quot;.  (Laurent Blume)
Files:	    src/testdir/Makefile

Patch 7.4.197
Problem:    Various problems on <A HREF="os_vms.html#VMS">VMS</A>.
Solution:   Fix several <A HREF="os_vms.html#VMS">VMS</A> problems. (Zoltan Arpadffy)
Files:	    runtime/doc/os_vms.txt, src/Make_vms.mms, src/fileio.c,
	    src/os_unix.c, src/os_unix.h, src/os_vms.c, src/os_vms_conf.h,
	    src/proto/os_vms.pro, src/testdir/Make_vms.mms,
	    src/testdir/test72.in, src/testdir/test77a.com,
	    src/testdir/test77a.in, src/testdir/test77a.ok src/undo.c

Patch 7.4.198
Problem:    Can't build Vim with <A HREF="if_perl.html#Perl">Perl</A> when -Dusethreads is not specified for
	    building <A HREF="if_perl.html#Perl">Perl</A>, and building Vim with --enable-perlinterp=dynamic.
Solution:   Adjust #ifdefs. (Yasuhiro Matsumoto)
Files:	    src/if_perl.xs

Patch 7.4.199
Problem:    (issue 197) <A HREF="change.html#]P">]P</A> doesn't paste over <A HREF="visual.html#Visual">Visual</A> selection.
Solution:   Handle <A HREF="visual.html#Visual">Visual</A> mode specifically. (Christian Brabandt)
Files:	    src/normal.c

Patch 7.4.200
Problem:    Too many #ifdefs in the code.
Solution:   Enable FEAT_VISUAL always, await any complaints
Files:	    src/feature.h

Patch 7.4.201
Problem:    <A HREF="options.html#'lispwords'">'lispwords'</A> is a global option.
Solution:   Make <A HREF="options.html#'lispwords'">'lispwords'</A> <A HREF="options.html#global-local">global-local</A>. (Sung Pae)
Files:	    runtime/doc/options.txt, runtime/optwin.vim, src/buffer.c,
	    src/misc1.c, src/option.c, src/option.h, src/structs.h,
	    src/testdir/test100.in, src/testdir/test100.ok

Patch 7.4.202
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: non-ASCII font names don't work.
Solution:   Convert between the current code page and <A HREF="options.html#'encoding'">'encoding'</A>. (Ken Takata)
Files:	    src/gui_w48.c, src/os_mswin.c, src/proto/winclip.pro,
	    src/winclip.c

Patch 7.4.203
Problem:    Parsing <A HREF="options.html#'errorformat'">'errorformat'</A> is not correct.
Solution:   Reset &quot;multiignore&quot; at the start of a multi-line message. (Lcd)
Files:	    src/quickfix.c, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
	    src/testdir/Makefile, src/testdir/test106.in,
	    src/testdir/test106.ok

Patch 7.4.204
Problem:    A <A HREF="map.html#mapping">mapping</A> where the second byte is 0x80 doesn't work.
Solution:   Unescape before checking for incomplete <A HREF="mbyte.html#multibyte">multibyte</A> char. (Nobuhiro
	    Takasaki)
Files:	    src/getchar.c, src/testdir/test75.in, src/testdir/test75.ok

Patch 7.4.205
Problem:    &quot;<A HREF="starting.html#:mksession">:mksession</A>&quot; writes command to move to second argument while <A HREF="motion.html#it">it</A>
	    does not exist.  When <A HREF="motion.html#it">it</A> does exist the order might be wrong.
Solution:   Use &quot;<A HREF="editing.html#:argadd">:argadd</A>&quot; for each argument instead of using &quot;<A HREF="editing.html#:args">:args</A>&quot; with a
	    <A HREF="eval.html#list">list</A> of names. (Nobuhiro Takasaki)
Files:	    src/ex_docmd.c

Patch 7.4.206
Problem:    Compiler warnings on 64 bit Windows.
Solution:   Add type casts. (Mike Williams)
Files:	    src/gui_w48.c, src/os_mswin.c

Patch 7.4.207
Problem:    The cursor report sequence is sometimes not recognized and results
	    in entering replace mode.
Solution:   Also check for the cursor report when not asked for.
Files:	    src/term.c

Patch 7.4.208
Problem:    Mercurial picks up some files that are not distributed.
Solution:   Add patterns to the ignore <A HREF="eval.html#list">list</A>. (Cade Forester)
Files:	    .hgignore

Patch 7.4.209
Problem:    When <A HREF="repeat.html#repeating">repeating</A> a <A HREF="change.html#filter">filter</A> command &quot;<A HREF="motion.html#&#37;">&#37;</A>&quot; and &quot;<A HREF="pattern.html##">#</A>&quot; are expanded.
Solution:   Escape the command when storing for <A HREF="undo.html#redo">redo</A>. (Christian Brabandt)
Files:	    src/ex_cmds.c

Patch 7.4.210
Problem:    <A HREF="visual.html#Visual">Visual</A> block mode plus virtual edit doesn't work well with tabs.
	    (Liang Li)
Solution:   Take coladd into account. (Christian Brabandt)
Files:	    src/ops.c, src/testdir/test39.in, src/testdir/test39.ok

Patch 7.4.211
Problem:    &quot;<A HREF="map.html#:lu">:lu</A>&quot; is an abbreviation for &quot;<A HREF="if_lua.html#:lua">:lua</A>&quot;, but <A HREF="motion.html#it">it</A> should be &quot;<A HREF="map.html#:lunmap">:lunmap</A>&quot;.
	    (ZyX)
Solution:   Move &quot;lunmap&quot; to above &quot;<A HREF="if_lua.html#lua">lua</A>&quot;.
Files:	    src/ex_cmds.h

Patch 7.4.212 (after 7.4.200)
Problem:    Now that the <A HREF="various.html#+visual">+visual</A> feature is always enabled the #ifdefs for <A HREF="motion.html#it">it</A>
	    are not useful.
Solution:   Remove the checks for FEAT_VISUAL.
Files:	    src/buffer.c, src/charset.c, src/edit.c, src/eval.c,
	    src/ex_cmds.c, src/ex_docmd.c, src/fold.c, src/getchar.c,
	    src/gui.c, src/gui_mac.c, src/gui_w48.c, src/main.c, src/mark.c,
	    src/menu.c, src/misc2.c, src/move.c, src/netbeans.c, src/normal.c,
	    src/ops.c, src/option.c, src/os_msdos.c, src/os_qnx.c,
	    src/quickfix.c, src/regexp.c, src/regexp_nfa.c, src/screen.c,
	    src/search.c, src/spell.c, src/syntax.c, src/term.c, src/ui.c,
	    src/undo.c, src/version.c, src/window.c, src/feature.h,
	    src/globals.h, src/option.h, src/os_win32.h, src/structs.h

Patch 7.4.213
Problem:    It's not possible to open a new buffer without creating a swap
	    file.
Solution:   Add the &quot;<A HREF="recover.html#:noswapfile">:noswapfile</A>&quot; modifier. (Christian Brabandt)
Files:	    runtime/doc/recover.txt, src/ex_cmds.h, src/ex_docmd.c,
	    src/memline.c, src/structs.h

Patch 7.4.214
Problem:    Compilation problems on HP_nonStop (Tandem).
Solution:   Add #defines. (Joachim Schmitz)
Files:	    src/vim.h

Patch 7.4.215
Problem:    Inconsistency: &quot;<A HREF="windows.html#:sp">:sp</A> foo&quot; does not <A HREF="editing.html#reload">reload</A> &quot;foo&quot;, unless &quot;foo&quot; is
	    the current buffer. (Liang Li)
Solution:   Do not <A HREF="editing.html#reload">reload</A> the current buffer on a split command.
Files:	    runtime/doc/windows.txt, src/ex_docmd.c

Patch 7.4.216
Problem:    Compiler warnings. (Tony Mechelynck)
Solution:   Initialize <A HREF="eval.html#variables">variables</A>, add #ifdef.
Files:	    src/term.c, src/os_unix.h

Patch 7.4.217
Problem:    When src/auto/configure was updated, &quot;make clean&quot; would run
	    configure pointlessly.
Solution:   Do not run configure for &quot;make clean&quot; and &quot;make distclean&quot; when
	    the make program supports $MAKECMDGOALS. (Ken Takata)
Files:	    src/Makefile

Patch 7.4.218
Problem:    It's not <A HREF="starting.html#easy">easy</A> to remove duplicates from a <A HREF="eval.html#list">list</A>.
Solution:   Add the <A HREF="builtin.html#uniq()">uniq()</A> function. (Lcd)
Files:	    runtime/doc/change.txt, runtime/doc/eval.txt,
	    runtime/doc/usr_41.txt, runtime/doc/version7.txt, src/eval.c,
	    src/testdir/test55.in, src/testdir/test55.ok

Patch 7.4.219
Problem:    When <A HREF="options.html#'relativenumber'">'relativenumber'</A> or <A HREF="options.html#'cursorline'">'cursorline'</A> are set the <A HREF="windows.html#window">window</A> is
	    redrawn much too often. (Patrick Hemmer, Dominique Pelle)
Solution:   Check the VALID_CROW flag instead of VALID_WROW.
Files:	    src/move.c

Patch 7.4.220
Problem:    Test 105 does not work in a shadow dir. (James McCoy)
Solution:   Omit &quot;src/&quot; from the checked path.
Files:	    src/testdir/test105.in, src/testdir/test105.ok

Patch 7.4.221
Problem:    <A HREF="quickfix.html#Quickfix">Quickfix</A> doesn't resize on &quot;<A HREF="quickfix.html#:copen">:copen</A> 20&quot;. (issue 199)
Solution:   Resize the <A HREF="windows.html#window">window</A> when requested. (Christian Brabandt)
Files:	    src/quickfix.c

Patch 7.4.222
Problem:    The <A HREF="if_ruby.html#Ruby">Ruby</A> directory is constructed from parts.
Solution:   Use 'rubyarchhdrdir' if <A HREF="motion.html#it">it</A> exists. (James McCoy)
Files:	    src/configure.in, src/auto/configure

Patch 7.4.223
Problem:    Still using an older autoconf version.
Solution:   Switch to autoconf 2.69.
Files:	    src/Makefile, src/configure.in, src/auto/configure

Patch 7.4.224
Problem:    /usr/bin/grep on Solaris does not support <A HREF="starting.html#-F">-F</A>.
Solution:   Add configure check to find a good <A HREF="quickfix.html#grep">grep</A>. (Danek Duvall)
Files:	    src/configure.in, src/auto/configure

Patch 7.4.225
Problem:    Dynamic <A HREF="if_ruby.html#Ruby">Ruby</A> doesn't work on Solaris.
Solution:   Always use the stubs. (Danek Duvall, Yukihiro Nakadaira)
Files:	    src/if_ruby.c

Patch 7.4.226 (after 7.4.219)
Problem:    Cursorline highlighting not redrawn when <A HREF="scroll.html#scrolling">scrolling</A>. (John
	    Marriott)
Solution:   Check for required redraw in two places.
Files:	    src/move.c

Patch 7.4.227 (after 7.4.225)
Problem:    Can't build with <A HREF="if_ruby.html#Ruby">Ruby</A> 1.8.
Solution:   Do include a check for the <A HREF="if_ruby.html#Ruby">Ruby</A> version. (Ken Takata)
Files:	    src/if_ruby.c

Patch 7.4.228
Problem:    Compiler warnings when building with <A HREF="if_pyth.html#Python">Python</A> 3.2.
Solution:   Make type cast depend on <A HREF="if_pyth.html#Python">Python</A> version. (Ken Takata)
Files:	    src/if_py_both.h, src/if_python.c, src/if_python3.c

Patch 7.4.229
Problem:    Using &quot;<A HREF="eval.html#:let">:let</A>&quot; for listing <A HREF="eval.html#variables">variables</A> and the second one is a curly
	    braces <A HREF="eval.html#expression">expression</A> may fail.
Solution:   Check for an &quot;<A HREF="change.html#=">=</A>&quot; in a better way. (ZyX)
Files:	    src/eval.c, src/testdir/test104.in, src/testdir/test104.ok

Patch 7.4.230
Problem:    Error when using &quot;<A HREF="options.html#:options">:options</A>&quot;.
Solution:   Fix the entry for <A HREF="options.html#'lispwords'">'lispwords'</A>. (Kenichi Ito)
Files:	    runtime/optwin.vim

Patch 7.4.231
Problem:    An error in &quot;<A HREF="options.html#:options">:options</A>&quot; is not caught by the tests.
Solution:   Add a test for &quot;<A HREF="options.html#:options">:options</A>&quot;.  Set <A HREF="starting.html#$VIMRUNTIME">$VIMRUNTIME</A> for the tests so that
	    <A HREF="motion.html#it">it</A> uses the current runtime files instead of the installed ones.
Files:	    src/Makefile, src/testdir/Makefile, src/testdir/test_options.in,
	    src/testdir/test_options.ok, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms

Patch 7.4.232
Problem:    &quot;:&#37;s/\n//&quot; uses a lot of memory. (Aidan Marlin)
Solution:   Turn this into a join command. (Christian Brabandt)
Files:	    src/ex_cmds.c, src/ex_docmd.c, src/proto/ex_docmd.pro

Patch 7.4.233
Problem:    Escaping special characters for using &quot;<A HREF="motion.html#&#37;">&#37;</A>&quot; with a shell command is
	    inconsistent, parentheses are escaped but spaces are not.
Solution:   Only <A HREF="intro.html#escape">escape</A> &quot;<A HREF="change.html#!">!</A>&quot;. (Gary Johnson)
Files:	    src/ex_docmd.c

Patch 7.4.234
Problem:    Can't get the command that was used to start Vim.
Solution:   Add <A HREF="eval.html#v:progpath">v:progpath</A>. (Viktor Kojouharov)
Files:	    runtime/doc/eval.txt, src/eval.c, src/main.c, src/vim.h

Patch 7.4.235
Problem:    It is not <A HREF="starting.html#easy">easy</A> to get the full path of a command.
Solution:   Add the <A HREF="builtin.html#exepath()">exepath()</A> function.
Files:	    src/eval.c, src/misc1.c, src/os_amiga.c, src/os_msdos.c,
	    src/os_unix.c, src/os_vms.c, src/os_win32.c,
	    src/proto/os_amiga.pro, src/proto/os_msdos.pro,
	    src/proto/os_unix.pro, src/proto/os_win32.pro,
	    runtime/doc/eval.txt

Patch 7.4.236
Problem:    It's not that <A HREF="starting.html#easy">easy</A> to check the Vim patch version.
Solution:   Make has(&quot;patch-7.4.123&quot;) work. (partly by Marc Weber)
Files:	    runtime/doc/eval.txt, src/eval.c, src/testdir/test60.in,
	    src/testdir/test60.ok

Patch 7.4.237 (after 7.4.236)
Problem:    When some patches were not included has(&quot;patch-7.4.123&quot;) may return
	    <A HREF="vim9.html#true">true</A> falsely.
Solution:   Check for the specific patch number.
Files:	    runtime/doc/eval.txt, src/eval.c

Patch 7.4.238
Problem:    Vim does not support the smack library.
Solution:   Add smack support (Jose Bollo)
Files:	    src/config.h.in, src/configure.in, src/fileio.c, src/memfile.c,
	    src/os_unix.c, src/undo.c, src/auto/configure

Patch 7.4.239
Problem:    &quot;<A HREF="editing.html#:e">:e</A> +&quot; does not position cursor at end of the file.
Solution:   Check for &quot;<A HREF="motion.html#+">+</A>&quot; being the last character (ZyX)
Files:	    src/ex_docmd.c

Patch 7.4.240
Problem:    &quot;<A HREF="tagsrch.html#:tjump">:tjump</A>&quot; shows &quot;\n&quot; <A HREF="motion.html#as">as</A> &quot;\\n&quot;.
Solution:   Skip over &quot;\&quot; that escapes a <A HREF="intro.html#backslash">backslash</A>. (Gary Johnson)
Files:	    src/tag.c

Patch 7.4.241
Problem:    The <A HREF="eval.html#string">string</A> returned by <A HREF="builtin.html#submatch()">submatch()</A> does not distinguish between a
	    NL from a line break and a NL that stands for a NUL character.
Solution:   Add a second argument to return a <A HREF="eval.html#list">list</A>. (ZyX)
Files:	    runtime/doc/eval.txt, src/eval.c, src/proto/regexp.pro,
	    src/regexp.c, src/testdir/test79.in, src/testdir/test79.ok,
	    src/testdir/test80.in, src/testdir/test80.ok

Patch 7.4.242
Problem:    <A HREF="builtin.html#getreg()">getreg()</A> does not distinguish between a NL used for a line break
	    and a NL used for a NUL character.
Solution:   Add another argument to return a <A HREF="eval.html#list">list</A>. (ZyX)
Files:	    runtime/doc/eval.txt, src/eval.c src/ops.c, src/proto/ops.pro,
	    src/vim.h, src/Makefile, src/testdir/test_eval.in,
	    src/testdir/test_eval.ok, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms

Patch 7.4.243
Problem:    Cannot use <A HREF="builtin.html#setreg()">setreg()</A> to add text that includes a NUL.
Solution:   Make <A HREF="builtin.html#setreg()">setreg()</A> accept a <A HREF="eval.html#list">list</A>.
Files:	    runtime/doc/eval.txt, src/eval.c, src/ops.c, src/proto/ops.pro,
	    src/testdir/test_eval.in, src/testdir/test_eval.ok

Patch 7.4.244 (after 7.4.238)
Problem:    The smack feature causes stray error <A HREF="message.html#messages">messages</A>.
Solution:   Remove the error <A HREF="message.html#messages">messages</A>.
Files:	    src/os_unix.c

Patch 7.4.245
Problem:    Crash for &quot;vim <A HREF="starting.html#-u">-u</A> NONE <A HREF="starting.html#-N">-N</A>  <A HREF="starting.html#-c">-c</A> '&amp;&amp;&#39;&#34;'.
Solution:   Check for the <A HREF="pattern.html#pattern">pattern</A> to be NULL. (Dominique Pelle)
Files:	    src/ex_cmds.c

Patch 7.4.246
Problem:    Configure message for detecting smack are out of sequence.
Solution:   Put the <A HREF="message.html#messages">messages</A> in the right place. (Kazunobu Kuriyama)
Files:	    src/configure.in, src/auto/configure

Patch 7.4.247
Problem:    When passing input to <A HREF="builtin.html#system()">system()</A> there is no way to keep NUL and
	    NL characters separate.
Solution:   Optionally use a <A HREF="eval.html#list">list</A> for the <A HREF="builtin.html#system()">system()</A> input. (ZyX)
Files:	    runtime/doc/eval.txt, src/eval.c

Patch 7.4.248
Problem:    Cannot distinguish between NL and NUL in output of <A HREF="builtin.html#system()">system()</A>.
Solution:   Add <A HREF="builtin.html#systemlist()">systemlist()</A>. (ZyX)
Files:	    runtime/doc/eval.txt, src/eval.c, src/ex_cmds2.c, src/misc1.c,
	    src/proto/misc1.pro

Patch 7.4.249
Problem:    Using <A HREF="builtin.html#setreg()">setreg()</A> with a <A HREF="eval.html#list">list</A> of numbers does not work.
Solution:   Use a separate buffer for numbers. (ZyX)
Files:	    src/eval.c, src/testdir/test_eval.in, src/testdir/test_eval.ok

Patch 7.4.250
Problem:    Some test files missing from <A HREF="intro.html#distribution">distribution</A>.
Solution:   Add <A HREF="pattern.html#pattern">pattern</A> for newly added tests.
Files:	    Filelist

Patch 7.4.251
Problem:    Crash when <A HREF="autocmd.html#BufAdd">BufAdd</A> <A HREF="autocmd.html#autocommand">autocommand</A> wipes out the buffer.
Solution:   Check for buffer to still be valid. Postpone freeing the buffer
	    structure. (Hirohito Higashi)
Files:	    src/buffer.c, src/ex_cmds.c, src/fileio.c, src/globals.h

Patch 7.4.252
Problem:    Critical error in <A HREF="gui_x11.html#GTK">GTK</A>, removing <A HREF="builtin.html#timer">timer</A> <A HREF="if_cscop.html#twice">twice</A>.
Solution:   Clear the <A HREF="builtin.html#timer">timer</A> after removing <A HREF="motion.html#it">it</A>. (James McCoy)
Files:	    src/gui_gtk_x11.c

Patch 7.4.253
Problem:    Crash when using cpp <A HREF="syntax.html#syntax">syntax</A> file with <A HREF="pattern.html#pattern">pattern</A> using external
	    match. (Havard Garnes)
Solution:   Discard match when end column is before start column.
Files:	    src/regexp.c, src/regexp_nfa.c

Patch 7.4.254
Problem:    Smack support detection is incomplete.
Solution:   Check for attr/xattr.h and specific <A HREF="map.html#macro">macro</A>.
Files:	    src/configure.in, src/auto/configure

Patch 7.4.255
Problem:    Configure check for smack doesn't work with all shells. (David
	    Larson)
Solution:   Remove spaces in set command.
Files:	    src/configure.in, src/auto/configure

Patch 7.4.256 (after 7.4.248)
Problem:    Using <A HREF="builtin.html#systemlist()">systemlist()</A> may cause a crash and does not handle NUL
	    characters properly.
Solution:   Increase the reference <A HREF="intro.html#count">count</A>, allocate memory by length. (Yasuhiro
	    Matsumoto)
Files:	    src/eval.c

Patch 7.4.257
Problem:    Compiler warning, possibly for mismatch in parameter name.
Solution:   Rename the parameter in the declaration.
Files:	    src/ops.c

Patch 7.4.258
Problem:    Configure fails if $CC contains <A HREF="options.html#options">options</A>.
Solution:   Remove <A HREF="quotes.html#quotes">quotes</A> around $CC. (Paul Barker)
Files:	    src/configure.in, src/auto/configure

Patch 7.4.259
Problem:    Warning for misplaced &quot;const&quot;.
Solution:   Move the &quot;const&quot;. (Yukihiro Nakadaira)
Files:	    src/os_unix.c

Patch 7.4.260
Problem:    It is possible to define a function with a colon in the name.  It
	    is possible to define a function with a lower <A HREF="change.html#case">case</A> character if a
	    &quot;<A HREF="pattern.html##">#</A>&quot; appears after the name.
Solution:   Disallow using a colon other than with &quot;s:&quot;.  Ignore &quot;<A HREF="pattern.html##">#</A>&quot; after the
	    name.
Files:	    runtime/doc/eval.txt, src/eval.c, src/testdir/test_eval.in,
	    src/testdir/test_eval.ok

Patch 7.4.261
Problem:    When updating the <A HREF="windows.html#window">window</A> involves a <A HREF="pattern.html#regexp">regexp</A> <A HREF="pattern.html#pattern">pattern</A>, an interactive
	    substitute to replace a &quot;\n&quot; with a line break fails. (Ingo
	    Karkat)
Solution:   Set reg_line_lbr in vim_regsub() and vim_regsub_multi().
Files:	    src/regexp.c, src/testdir/test79.in, src/testdir/test79.ok

Patch 7.4.262
Problem:    Duplicate code in regexec().
Solution:   Add line_lbr flag to regexec_nl().
Files:	    src/regexp.c, src/regexp_nfa.c, src/regexp.h

Patch 7.4.263
Problem:    GCC 4.8 compiler warning for hiding a declaration (Franois Gannaz)
Solution:   Remove the second declaration.
Files:	    src/eval.c

Patch 7.4.264 (after 7.4.260)
Problem:    Can't define a function starting with &quot;<A HREF="eval.html#g:">g:</A>&quot;.  Can't assign a
	    funcref to a buffer-local variable.
Solution:   Skip &quot;<A HREF="eval.html#g:">g:</A>&quot; at the start of a function name.  Don't check for colons
	    when assigning to a variable.
Files:	    src/eval.c, src/testdir/test_eval.in, src/testdir/test_eval.ok

Patch 7.4.265 (after 7.4.260)
Problem:    Can't call a global function with &quot;<A HREF="eval.html#g:">g:</A>&quot; in an <A HREF="eval.html#expression">expression</A>.
Solution:   Skip the &quot;<A HREF="eval.html#g:">g:</A>&quot; when looking up the function.
Files:	    src/eval.c, src/testdir/test_eval.in, src/testdir/test_eval.ok

Patch 7.4.266
Problem:    Test 62 fails.
Solution:   Set the language to C. (Christian Brabandt)
Files:	    src/testdir/test62.in

Patch 7.4.267 (after 7.4.178)
Problem:    The <A HREF="motion.html#'[">'[</A> <A HREF="motion.html#mark">mark</A> is in the wrong position after &quot;<A HREF="change.html#gq">gq</A>&quot;. (Ingo Karkat)
Solution:   Add the setmark argument to do_join(). (Christian Brabandt)
Files:	    src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile,
	    src/testdir/test_autoformat_join.in,
	    src/testdir/test_autoformat_join.ok, src/Makefile, src/edit.c,
	    src/ex_cmds.c, src/ex_docmd.c, src/normal.c, src/ops.c,
	    src/proto/ops.pro

Patch 7.4.268
Problem:    Using <A HREF="builtin.html#exists()">exists()</A> on a funcref for a <A HREF="map.html#script-local">script-local</A> function does not
	    work.
Solution:   Translate <A HREF="map.html#&lt;SNR&gt;">&lt;SNR&gt;</A> to the special byte sequence.  Add a test.
Files:	    src/eval.c, src/testdir/test_eval.in, src/testdir/test_eval.ok,
	    src/testdir/test_eval_func.vim, Filelist

Patch 7.4.269
Problem:    <A HREF="scroll.html#CTRL-U">CTRL-U</A> in <A HREF="insert.html#Insert">Insert</A> mode does not work after using a cursor key.
	    (Pine Wu)
Solution:   Use the original insert start position. (Christian Brabandt)
Files:	    src/edit.c, src/testdir/test29.in, src/testdir/test29.ok

Patch 7.4.270
Problem:    Comparing pointers instead of the <A HREF="eval.html#string">string</A> they point to.
Solution:   Use strcmp(). (Ken Takata)
Files:	    src/gui_gtk_x11.c

Patch 7.4.271
Problem:    Compiler warning on 64 bit <A HREF="windows.html#windows">windows</A>.
Solution:   Add type cast. (Mike Williams)
Files:	    src/ops.c

Patch 7.4.272
Problem:    Using just &quot;<A HREF="motion.html#$">$</A>&quot; does not cause an error message.
Solution:   Check for empty environment variable name. (Christian Brabandt)
Files:	    src/eval.c, src/testdir/test_eval.in, src/testdir/test_eval.ok

Patch 7.4.273
Problem:    &quot;make autoconf&quot; and &quot;make reconfig&quot; may first run configure and
	    then remove the output.
Solution:   Add these targets to the exceptions. (Ken Takata)
Files:	    src/Makefile

Patch 7.4.274
Problem:    When doing &quot;<A HREF="editing.html#:update">:update</A>&quot; just before running an external command that
	    changes the file, the <A HREF="editing.html#timestamp">timestamp</A> may be unchanged and the file
	    is not reloaded.
Solution:   Also check the file size.
Files:	    src/fileio.c

Patch 7.4.275
Problem:    When <A HREF="change.html#changing">changing</A> the type of a sign that hasn't been placed there is
	    no error message.
Solution:   Add an error message. (Christian Brabandt)
Files:	    src/ex_cmds.c

Patch 7.4.276
Problem:    The fish shell is not supported.
Solution:   Use begin/end instead of () for fish. (Andy Russell)
Files:	    src/ex_cmds.c, src/misc1.c, src/option.c, src/proto/misc1.pro

Patch 7.4.277
Problem:    Using &quot;<A HREF="sign.html#:sign">:sign</A> unplace *&quot; may leave the cursor in the wrong position
	    (Christian Brabandt)
Solution:   Update the cursor position when removing all <A HREF="sign.html#signs">signs</A>.
Files:	    src/buffer.c

Patch 7.4.278
Problem:    list_remove() conflicts with function defined in Sun header file.
Solution:   Rename the function. (Richard Palo)
Files:	    src/eval.c, src/if_lua.c, src/if_py_both.h, src/proto/eval.pro

Patch 7.4.279
Problem:    <A HREF="builtin.html#globpath()">globpath()</A> returns a <A HREF="eval.html#string">string</A>, making <A HREF="motion.html#it">it</A> difficult to get a <A HREF="eval.html#list">list</A> of
	    matches. (Greg Novack)
Solution:   Add an optional argument like with <A HREF="builtin.html#glob()">glob()</A>. (Adnan Zafar)
Files:	    runtime/doc/eval.txt, src/eval.c, src/ex_getln.c, src/misc1.c,
	    src/misc2.c, src/proto/ex_getln.pro, src/proto/misc2.pro,
	    src/testdir/test97.in, src/testdir/test97.ok

Patch 7.4.280
Problem:    When using a session file the relative position of the cursor is
	    not restored if there is another <A HREF="intro.html#tab">tab</A>. (Nobuhiro Takasaki)
Solution:   Update w_wrow before calculating the fraction.
Files:	    src/window.c

Patch 7.4.281
Problem:    When a session file has more than one <A HREF="tabpage.html#tabpage">tabpage</A> and <A HREF="options.html#'showtabline'">'showtabline'</A> is
	    one the positions may be slightly off.
Solution:   Set <A HREF="options.html#'showtabline'">'showtabline'</A> to two while positioning <A HREF="windows.html#windows">windows</A>.
Files:	    src/ex_docmd.c

Patch 7.4.282 (after 7.4.279)
Problem:    Test 97 fails on <A HREF="os_mac.html#Mac">Mac</A>.
Solution:   Do not ignore <A HREF="change.html#case">case</A> in file names. (Jun Takimoto)
Files:	    src/testdir/test97.in

Patch 7.4.283 (after 7.4.276)
Problem:    Compiler warning about unused variable. (Charles Cooper)
Solution:   Move the variable inside the #if block.
Files:	    src/ex_cmds.c

Patch 7.4.284
Problem:    Setting <A HREF="options.html#'langmap'">'langmap'</A> in the <A HREF="options.html#modeline">modeline</A> can cause trouble.  E.g. <A HREF="map.html#mapping">mapping</A>
	    &quot;<A HREF="cmdline.html#:">:</A>&quot; breaks many commands. (Jens-Wolfhard Schicke-Uffmann)
Solution:   Disallow setting <A HREF="options.html#'langmap'">'langmap'</A> from the <A HREF="options.html#modeline">modeline</A>.
Files:	    src/option.c

Patch 7.4.285
Problem:    When <A HREF="options.html#'relativenumber'">'relativenumber'</A> is set and <A HREF="change.html#deleting">deleting</A> lines or undoing that,
	    line numbers are not always updated. (Robert Arkwright)
Solution:   (Christian Brabandt)
Files:	    src/misc1.c

Patch 7.4.286
Problem:    Error <A HREF="message.html#messages">messages</A> are inconsistent. (ZyX)
Solution:   Change &quot;<A HREF="eval.html#Lists">Lists</A>&quot; to &quot;<A HREF="eval.html#list">list</A>&quot;.
Files:	    src/eval.c

Patch 7.4.287
Problem:    Patches for .hgignore don't work, since the file is not in the
	    <A HREF="intro.html#distribution">distribution</A>.
Solution:   Add .hgignore to the <A HREF="intro.html#distribution">distribution</A>.  Will be effective with the
	    next version.
Files:	    Filelist

Patch 7.4.288
Problem:    When <A HREF="options.html#'spellfile'">'spellfile'</A> is set the screen is not redrawn.
Solution:   Redraw when updating the spelling info. (Christian Brabandt)
Files:	    src/spell.c

Patch 7.4.289
Problem:    <A HREF="pattern.html#Pattern">Pattern</A> with repeated backreference does not match with new <A HREF="pattern.html#regexp">regexp</A>
	    engine. (Urtica Dioica)
Solution:   Also check the end of a submatch when deciding to put a state in
	    the state <A HREF="eval.html#list">list</A>.
Files:	    src/testdir/test64.in, src/testdir/test64.ok, src/regexp_nfa.c

Patch 7.4.290
Problem:    A <A HREF="pattern.html#non-greedy">non-greedy</A> match followed by a branch is too greedy. (Ingo
	    Karkat)
Solution:   Add NFA_MATCH when <A HREF="motion.html#it">it</A> is already in the state <A HREF="eval.html#list">list</A> if the position
	    differs.
Files:	    src/testdir/test64.in, src/testdir/test64.ok, src/regexp_nfa.c

Patch 7.4.291
Problem:    Compiler warning for int to pointer of different size when DEBUG
	    is defined.
Solution:   use smsg() instead of EMSG3().
Files:	    src/regexp.c

Patch 7.4.292
Problem:    Searching for &quot;<A HREF="insert.html#a">a</A>&quot; does not match accented &quot;<A HREF="insert.html#a">a</A>&quot; with new <A HREF="pattern.html#regexp">regexp</A>
	    engine, does match with old engine. (David Brgin)
	    &quot;ca&quot; does not match &quot;ca&quot; with accented &quot;<A HREF="insert.html#a">a</A>&quot; with either engine.
Solution:   Change the old engine, check for following composing character
	    also for single-byte patterns.
Files:	    src/regexp.c, src/testdir/test95.in, src/testdir/test95.ok

Patch 7.4.293
Problem:    It is not possible to ignore composing characters at a specific
	    point in a <A HREF="pattern.html#pattern">pattern</A>.
Solution:   Add the &#37;C item.
Files:	    src/regexp.c, src/regexp_nfa.c, src/testdir/test95.in,
	    src/testdir/test95.ok, runtime/doc/pattern.txt

Patch 7.4.294 (7.4.293)
Problem:    Test files missing from patch.
Solution:   Patch the test files.
Files:	    src/testdir/test95.in, src/testdir/test95.ok

Patch 7.4.295
Problem:    Various typos, bad white space and unclear comments.
Solution:   Fix typos.  Improve white space. Update comments.
Files:	    src/testdir/test49.in, src/macros.h, src/screen.c, src/structs.h,
	    src/gui_gtk_x11.c, src/os_unix.c

Patch 7.4.296
Problem:    Can't run tests on Solaris.
Solution:   Change the way VIMRUNTIME is set. (Laurent Blume)
Files:	    src/testdir/Makefile

Patch 7.4.297
Problem:    Memory leak from result of get_isolated_shell_name().
Solution:   Free the memory. (Dominique Pelle)
Files:	    src/ex_cmds.c, src/misc1.c

Patch 7.4.298
Problem:    Can't have a funcref start with &quot;<A HREF="eval.html#t:">t:</A>&quot;.
Solution:   Add &quot;<A HREF="motion.html#t">t</A>&quot; to the <A HREF="eval.html#list">list</A> of accepted names. (Yukihiro Nakadaira)
Files:	    src/eval.c

Patch 7.4.299
Problem:    When running configure <A HREF="if_cscop.html#twice">twice</A> DYNAMIC_PYTHON_DLL may become empty.
Solution:   Use AC_CACHE_VAL. (Ken Takata)
Files:	    src/configure.in, src/auto/configure

Patch 7.4.300
Problem:    The way config.cache is removed doesn't always work.
Solution:   Always remove config.cache. (Ken Takata)
Files:	    src/Makefile

Patch 7.4.301 (after 7.4.280)
Problem:    Still a <A HREF="scroll.html#scrolling">scrolling</A> problem when loading a session file.
Solution:   Fix off-by-one mistake. (Nobuhiro Takasaki)
Files:	    src/window.c

Patch 7.4.302
Problem:    Signs placed with <A HREF="options.html#'foldcolumn'">'foldcolumn'</A> set don't show up after filler
	    lines.
Solution:   Take filler lines into account. (Olaf Dabrunz)
Files:	    src/screen.c

Patch 7.4.303
Problem:    When using double-width characters the text displayed on the
	    command line is sometimes truncated.
Solution:   Reset the <A HREF="eval.html#string">string</A> length. (Nobuhiro Takasaki)
Files:	    src/screen.c

Patch 7.4.304
Problem:    Cannot always use <A HREF="if_pyth.html#Python">Python</A> with Vim.
Solution:   Add the manifest to the executable. (Jacques Germishuys)
Files:	    src/Make_mvc.mak

Patch 7.4.305
Problem:    Making <A HREF="options.html#'ttymouse'">'ttymouse'</A> empty after the xterm version was requested
	    causes problems. (Elijah Griffin)
Solution:   Do not check for DEC mouse sequences when the xterm version was
	    requested.  Also don't request the xterm version when DEC mouse
	    was enabled.
Files:	    src/term.c, src/os_unix.c, src/proto/term.pro, src/globals.h

Patch 7.4.306
Problem:    getchar(0) does not return Esc.
Solution:   Do not wait for an Esc sequence to be complete.  (Yasuhiro
	    Matsumoto)
Files:	    src/eval.c, src/getchar.c

Patch 7.4.307 (after 7.4.305)
Problem:    Can't build without the <A HREF="various.html#+termresponse">+termresponse</A> feature.
Solution:   Add proper #ifdefs.
Files:	    src/os_unix.c, src/term.c

Patch 7.4.308
Problem:    When using &quot;<A HREF="diff.html#:diffsplit">:diffsplit</A>&quot; on an empty file the cursor is displayed
	    on the command line.
Solution:   Limit the value of w_topfill.
Files:	    src/diff.c

Patch 7.4.309
Problem:    When increasing the size of the lower <A HREF="windows.html#window">window</A>, the upper <A HREF="windows.html#window">window</A>
	    jumps back to the top. (Ron Aaron)
Solution:   Change setting the topline. (Nobuhiro Takasaki)
Files:	    src/window.c

Patch 7.4.310
Problem:    getpos()/setpos() don't include curswant.
Solution:   Add a fifth number when getting/setting the cursor.
Files:	    src/eval.c, src/testdir/test_eval.in, src/testdir/test_eval.ok,
	    runtime/doc/eval.txt

Patch 7.4.311
Problem:    Can't use winrestview to only restore part of the <A HREF="starting.html#view">view</A>.
Solution:   Handle missing items in the <A HREF="eval.html#dict">dict</A>. (Christian Brabandt)
Files:	    src/eval.c, runtime/doc/eval.txt

Patch 7.4.312
Problem:    Cannot figure out what argument <A HREF="eval.html#list">list</A> is being used for a <A HREF="windows.html#window">window</A>.
Solution:   Add the <A HREF="builtin.html#arglistid()">arglistid()</A> function. (Marcin Szamotulski)
Files:	    runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/eval.c,
	    src/ex_docmd.c, src/globals.h, src/structs.h, src/main.c

Patch 7.4.313 (after 7.4.310)
Problem:    Changing the return value of <A HREF="builtin.html#getpos()">getpos()</A> causes an error. (Jie Zhu)
Solution:   Revert <A HREF="builtin.html#getpos()">getpos()</A> and add <A HREF="builtin.html#getcurpos()">getcurpos()</A>.
Files:	    src/eval.c, src/testdir/test_eval.in, src/testdir/test_eval.ok,
	    runtime/doc/eval.txt

Patch 7.4.314
Problem:    Completion <A HREF="message.html#messages">messages</A> can get in the way of a <A HREF="usr_05.html#plugin">plugin</A>.
Solution:   Add '<A HREF="change.html#c">c</A>' flag to <A HREF="options.html#'shortmess'">'shortmess'</A> option. (Shougo Matsu)
Files:	    runtime/doc/options.txt, src/edit.c, src/option.h, src/screen.c

Patch 7.4.315 (after 7.4.309)
Problem:    Fixes for computation of topline not tested.
Solution:   Add test. (Hirohito Higashi)
Files:	    src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile,
	    src/testdir/test107.in, src/testdir/test107.ok

Patch 7.4.316
Problem:    Warning from 64-bit compiler.
Solution:   Add type cast. (Mike Williams)
Files:	    src/ex_getln.c

Patch 7.4.317
Problem:    Crash when starting <A HREF="starting.html#gvim">gvim</A>.  Issue 230.
Solution:   Check for a pointer to be NULL. (Christian Brabandt)
Files:	    src/window.c

Patch 7.4.318
Problem:    Check for whether a highlight group has settings ignores fg and bg
	    color settings.
Solution:   Also check cterm and <A HREF="gui.html#GUI">GUI</A> color settings. (Christian Brabandt)
Files:	    src/syntax.c

Patch 7.4.319
Problem:    Crash when putting zero bytes on the <A HREF="gui.html#clipboard">clipboard</A>.
Solution:   Do not support the utf8_atom target when not using a <A HREF="mbyte.html#Unicode">Unicode</A>
	    encoding. (Naofumi Honda)
Files:	    src/ui.c

Patch 7.4.320
Problem:    Possible crash when an <A HREF="autocmd.html#BufLeave">BufLeave</A> <A HREF="autocmd.html#autocommand">autocommand</A> deletes the buffer.
Solution:   Check for the <A HREF="windows.html#window">window</A> pointer being valid.  Postpone freeing the
	    <A HREF="windows.html#window">window</A> until <A HREF="autocmd.html#autocommands">autocommands</A> are done. (Yasuhiro Matsumoto)
Files:	    src/buffer.c, src/fileio.c, src/globals.h, src/window.c

Patch 7.4.321
Problem:    Can't build with strawberry <A HREF="if_perl.html#perl">perl</A> 5.20 + mingw-w64-4.9.0.
Solution:   Define save_strlen. (Ken Takata)
Files:	    src/if_perl.xs

Patch 7.4.322
Problem:    Using &quot;msgfmt&quot; is hard coded, cannot use &quot;gmsgfmt&quot;.
Solution:   Use the msgfmt command found by configure. (Danek Duvall)
Files:	    src/config.mk.in, src/po/Makefile

Patch 7.4.323
Problem:    <A HREF="builtin.html#substitute()">substitute()</A> with zero width <A HREF="pattern.html#pattern">pattern</A> breaks <A HREF="mbyte.html#multibyte">multibyte</A> character.
Solution:   Take <A HREF="mbyte.html#multibyte">multibyte</A> character size into account. (Yukihiro Nakadaira)
Files:	    src/eval.c src/testdir/test69.in, src/testdir/test69.ok

Patch 7.4.324
Problem:    In <A HREF="intro.html#Ex">Ex</A> mode, cyrillic characters are not handled. (Stas Malavin)
Solution:   Support <A HREF="mbyte.html#multibyte">multibyte</A> characters in <A HREF="intro.html#Ex">Ex</A> mode. (Yukihiro Nakadaira)
Files:	    src/ex_getln.c

Patch 7.4.325
Problem:    When starting the <A HREF="gui.html#gui">gui</A> and <A HREF="change.html#changing">changing</A> the <A HREF="windows.html#window">window</A> size the status line
	    may not be drawn correctly.
Solution:   Catch new_win_height() being called recursively. (Christian
	    Brabandt)
Files:	    src/window.c

Patch 7.4.326
Problem:    Can't build Tiny version. (Elimar Riesebieter)
Solution:   Add #ifdef.
Files:	    src/window.c

Patch 7.4.327
Problem:    When <A HREF="options.html#'verbose'">'verbose'</A> is set to display the return value of a function,
	    may get <A HREF="builtin.html#E724">E724</A> repeatedly.
Solution:   Do not give an error for <A HREF="starting.html#verbose">verbose</A> <A HREF="message.html#messages">messages</A>. Abort conversion to
	    <A HREF="eval.html#string">string</A> after an error.
Files:	    src/eval.c

Patch 7.4.328
Problem:    Selection of inner block is inconsistent.
Solution:   Skip indent not only for '<A HREF="motion.html#}">}</A>' but all parens. (Tom McDonald)
Files:	    src/search.c

Patch 7.4.329
Problem:    When moving the cursor and then switching to another <A HREF="windows.html#window">window</A> the
	    previous <A HREF="windows.html#window">window</A> isn't scrolled. (Yukihiro Nakadaira)
Solution:   Call update_topline() before leaving the <A HREF="windows.html#window">window</A>. (Christian
	    Brabandt)
Files:	    src/window.c

Patch 7.4.330
Problem:    Using a <A HREF="pattern.html#regexp">regexp</A> <A HREF="pattern.html#pattern">pattern</A> to highlight a specific position can be
	    slow.
Solution:   Add <A HREF="builtin.html#matchaddpos()">matchaddpos()</A> to highlight specific positions efficiently.
	    (Alexey Radkov)
Files:	    runtime/doc/eval.txt, runtime/doc/usr_41.txt,
	    runtime/plugin/matchparen.vim, src/eval.c, src/ex_docmd.c,
	    src/proto/window.pro, src/screen.c, src/structs.h,
	    src/testdir/test63.in, src/testdir/test63.ok, src/window.c

Patch 7.4.331
Problem:    Relative numbering not updated after a <A HREF="motion.html#linewise">linewise</A> <A HREF="change.html#yank">yank</A>.  Issue 235.
Solution:   Redraw after the <A HREF="change.html#yank">yank</A>. (Christian Brabandt)
Files:	    src/ops.c

Patch 7.4.332
Problem:    <A HREF="gui_x11.html#GTK">GTK</A>: When a sign icon doesn't fit exactly there can be ugly gaps.
Solution:   Scale the sign to fit when the aspect ratio is not too far off.
	    (Christian Brabandt)
Files:	    src/gui_gtk_x11.c

Patch 7.4.333
Problem:    Compiler warning for unused function.
Solution:   Put the function inside the #ifdef.
Files:	    src/screen.c

Patch 7.4.334 (after 7.4.330)
Problem:    Uninitialized <A HREF="eval.html#variables">variables</A>, causing some problems.
Solution:   Initialize the <A HREF="eval.html#variables">variables</A>. (Dominique Pelle)
Files:	    src/screen.c, src/window.c

Patch 7.4.335
Problem:    No <A HREF="digraph.html#digraph">digraph</A> for the new rouble sign.
Solution:   Add the <A HREF="digraph.html#digraphs">digraphs</A> =R and =P.
Files:	    src/digraph.c, runtime/doc/digraph.txt

Patch 7.4.336
Problem:    Setting <A HREF="options.html#'history'">'history'</A> to a big value causes out-of-memory <A HREF="message.html#errors">errors</A>.
Solution:   Limit the value to 10000. (Hirohito Higashi)
Files:	    runtime/doc/options.txt, src/option.c

Patch 7.4.337
Problem:    When there is an error preparing to edit the command line, the
	    command won't be executed. (Hirohito Higashi)
Solution:   Reset did_emsg before editing.
Files:	    src/ex_getln.c

Patch 7.4.338
Problem:    Cannot wrap lines taking indent into account.
Solution:   Add the <A HREF="options.html#'breakindent'">'breakindent'</A> option. (many authors, final improvements by
	    Christian Brabandt)
Files:	    runtime/doc/eval.txt, runtime/doc/options.txt, runtime/optwin.vim,
	    src/buffer.c, src/charset.c, src/edit.c, src/ex_getln.c,
	    src/getchar.c, src/misc1.c, src/misc2.c, src/ops.c, src/option.c,
	    src/option.h, src/proto/charset.pro, src/proto/misc1.pro,
	    src/proto/option.pro, src/screen.c, src/structs.h,
	    src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile,
	    src/testdir/test_breakindent.in, src/testdir/test_breakindent.ok,
	    src/ui.c, src/version.c

Patch 7.4.339
Problem:    Local function is available globally.
Solution:   Add &quot;static&quot;.
Files:	    src/option.c, src/proto/option.pro

Patch 7.4.340
Problem:    Error from sed about illegal bytes when installing Vim.
Solution:   Prepend LC_ALL=C. (Itchyny)
Files:	    src/installman.sh

Patch 7.4.341
Problem:    <A HREF="builtin.html#sort()">sort()</A> doesn't handle numbers well.
Solution:   Add an argument to specify <A HREF="change.html#sorting">sorting</A> on numbers. (Christian Brabandt)
Files:	    runtime/doc/eval.txt, src/eval.c, src/testdir/test55.in,
	    src/testdir/test55.ok

Patch 7.4.342
Problem:    Clang gives warnings.
Solution:   Add an else block. (Dominique Pelle)
Files:	    src/gui_beval.c

Patch 7.4.343
Problem:    <A HREF="builtin.html#matchdelete()">matchdelete()</A> does not always update the right lines.
Solution:   Fix off-by-one error.  (Ozaki Kiichi)
Files:	    src/window.c

Patch 7.4.344
Problem:    Unnecessary initializations and other things related to
	    <A HREF="builtin.html#matchaddpos()">matchaddpos()</A>.
Solution:   Code cleanup. (Alexey Radkov)
Files:	    runtime/doc/eval.txt, src/screen.c, src/window.c

Patch 7.4.345 (after 7.4.338)
Problem:    Indent is not updated when <A HREF="change.html#deleting">deleting</A> indent.
Solution:   Remember changedtick.
Files:	    src/misc1.c

Patch 7.4.346 (after 7.4.338)
Problem:    Indent is not updated when <A HREF="change.html#changing">changing</A> <A HREF="options.html#'breakindentopt'">'breakindentopt'</A>. (itchyny)
Solution:   Do not cache &quot;brishift&quot;. (Christian Brabandt)
Files:	    src/misc1.c

Patch 7.4.347
Problem:    test55 fails on some systems.
Solution:   Remove the elements that all result in zero and can end up in an
	    arbitrary position.
Files:	    src/testdir/test55.in, src/testdir/test55.ok

Patch 7.4.348
Problem:    When using &quot;J1&quot; in <A HREF="options.html#'cinoptions'">'cinoptions'</A> a line below a continuation line
	    gets too much indent.
Solution:   Fix parentheses in condition.
Files:	    src/misc1.c

Patch 7.4.349
Problem:    When there are matches to highlight the whole <A HREF="windows.html#window">window</A> is redrawn,
	    which is slow.
Solution:   Only redraw everything when lines were inserted or deleted.
	    Reset b_mod_xlines when needed.  (Alexey Radkov)
Files:	    src/screen.c, src/window.c

Patch 7.4.350
Problem:    Using C indenting for Javascript does not work well for a <A HREF="intro.html#{}">{}</A> block
	    inside parentheses.
Solution:   When looking for a matching paren ignore one that is before the
	    start of a <A HREF="intro.html#{}">{}</A> block.
Files:	    src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 7.4.351
Problem:    <A HREF="builtin.html#sort()">sort()</A> is not stable.
Solution:   When the items are identical, compare the pointers.
Files:	    src/eval.c, src/testdir/test55.in, src/testdir/test55.ok

Patch 7.4.352
Problem:    With <A HREF="options.html#'linebreak'">'linebreak'</A> a <A HREF="intro.html#tab">tab</A> causes a missing line break.
Solution:   Count a <A HREF="intro.html#tab">tab</A> for what it's worth also for shorter lines.
	    (Christian Brabandt)
Files:	    src/charset.c

Patch 7.4.353
Problem:    <A HREF="options.html#'linebreak'">'linebreak'</A> doesn't work with the <A HREF="options.html#'list'">'list'</A> option.
Solution:   Make <A HREF="motion.html#it">it</A> work. (Christian Brabandt)
Files:	    runtime/doc/options.txt, src/charset.c, src/screen.c,
	    src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile,
	    src/testdir/test_listlbr.in, src/testdir/test_listlbr.ok

Patch 7.4.354
Problem:    Compiler warning.
Solution:   Change NUL to NULL. (Ken Takata)
Files:	    src/screen.c

Patch 7.4.355
Problem:    Several problems with Javascript indenting.
Solution:   Improve Javascript indenting.
Files:	    src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 7.4.356
Problem:    Mercurial does not ignore memfile_test. (Daniel Hahler)
Solution:   Add memfile_test to ignored files, remove trailing spaces.
Files:	    .hgignore

Patch 7.4.357
Problem:    After completion some characters are not redrawn.
Solution:   Clear the command line unconditionally. (Jacob Niehus)
Files:	    src/edit.c

Patch 7.4.358 (after 7.4.351)
Problem:    Sort is not always stable.
Solution:   Add an index instead of relying on the pointer to remain the same.
	    Idea by Jun Takimoto.
Files:	    src/eval.c

Patch 7.4.359
Problem:    When <A HREF="options.html#'ttymouse'">'ttymouse'</A> is set to 'uxterm' the xterm version is not
	    requested. (Tomas Janousek)
Solution:   Do not <A HREF="motion.html#mark">mark</A> uxterm <A HREF="motion.html#as">as</A> a conflict mouse and add
	    resume_get_esc_sequence().
Files:	    src/term.c, src/os_unix.c, src/proto/term.pro

Patch 7.4.360
Problem:    In a <A HREF="pattern.html#regexp">regexp</A> <A HREF="pattern.html#pattern">pattern</A> a &quot;<A HREF="motion.html#$">$</A>&quot; followed by \v or \V is not seen <A HREF="motion.html#as">as</A> the
	    end-of-line.
Solution:   Handle the situation. (Ozaki Kiichi)
Files:	    src/regexp.c

Patch 7.4.361
Problem:    Lots of flickering when filling the preview <A HREF="windows.html#window">window</A> for <A HREF="options.html#'omnifunc'">'omnifunc'</A>.
Solution:   Disable redrawing. (Hirohito Higashi)
Files:	    src/popupmnu.c

Patch 7.4.362
Problem:    When <A HREF="builtin.html#matchaddpos()">matchaddpos()</A> uses a length smaller than the number of bytes
	    in the (last) character the highlight continues until the end of
	    the line.
Solution:   Change condition from equal to larger-or-equal.
Files:	    src/screen.c

Patch 7.4.363
Problem:    In Windows console typing 0xCE does not work.
Solution:   Convert 0xCE to K_NUL 3. (Nobuhiro Takasaki et al.)
Files:	    src/os_win32.c, src/term.c

Patch 7.4.364
Problem:    When the <A HREF="starting.html#viminfo">viminfo</A> file can't be renamed there is no error message.
	    (Vladimir Berezhnoy)
Solution:   Check for the rename to fail.
Files:	    src/ex_cmds.c

Patch 7.4.365
Problem:    Crash when using &quot;<A HREF="windows.html#:botright">:botright</A> split&quot; when there isn't much space.
Solution:   Add a check for the minimum width/height. (Yukihiro Nakadaira)
Files:	    src/window.c

Patch 7.4.366
Problem:    Can't run the linebreak test on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Fix the output file name. (Taro Muraoka)
Files:	    src/testdir/Make_dos.mak

Patch 7.4.367 (after 7.4.357)
Problem:    Other solution for redrawing after completion.
Solution:   Schedule a <A HREF="windows.html#window">window</A> redraw instead of just clearing the command
	    line. (Jacob Niehus)
Files:	    src/edit.c

Patch 7.4.368
Problem:    Restoring the <A HREF="windows.html#window">window</A> sizes after closing the command line <A HREF="windows.html#window">window</A>
	    doesn't work properly if there are nested splits.
Solution:   Restore the sizes <A HREF="if_cscop.html#twice">twice</A>. (Hirohito Higashi)
Files:	    src/window.c

Patch 7.4.369
Problem:    Using freed memory when <A HREF="starting.html#exiting">exiting</A> while compiled with EXITFREE.
Solution:   Set curwin to NULL and check for that. (Dominique Pelle)
Files:	    src/buffer.c, src/window.c

Patch 7.4.370
Problem:    Linebreak test fails when encoding is not <A HREF="mbyte.html#utf-8">utf-8</A>. (Danek Duvall)
Solution:   Split the test in a single byte one and a <A HREF="mbyte.html#utf-8">utf-8</A> one. (Christian
	    Brabandt)
Files:	    src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile,
	    src/testdir/test_listlbr.in, src/testdir/test_listlbr.ok,
	    src/testdir/test_listlbr_utf8.in, src/testdir/test_listlbr_utf8.ok

Patch 7.4.371
Problem:    When <A HREF="options.html#'linebreak'">'linebreak'</A> is set <A HREF="intro.html#control">control</A> characters are not correctly
	    displayed. (Kimmy Lindvall)
Solution:   Set n_extra. (Christian Brabandt)
Files:	    src/screen.c

Patch 7.4.372
Problem:    When <A HREF="options.html#'winminheight'">'winminheight'</A> is zero there might not be one line for the
	    current <A HREF="windows.html#window">window</A>.
Solution:   Change the size computations. (Yukihiro Nakadaira)
Files:	    src/window.c

Patch 7.4.373
Problem:    Compiler warning for unused argument and unused variable.
Solution:   Add UNUSED.  Move variable inside #ifdef.
Files:	    src/charset.c, src/window.c

Patch 7.4.374
Problem:    Character after &quot;fb&quot; command not mapped if <A HREF="motion.html#it">it</A> might be a composing
	    character.
Solution:   Don't disable <A HREF="map.html#mapping">mapping</A> when looking for a composing character.
	    (Jacob Niehus)
Files:	    src/normal.c

Patch 7.4.375
Problem:    Test 63 fails when run with GUI-only Vim.
Solution:   Add guibg attributes. (suggested by Mike Soyka)
Files:	    src/testdir/test63.in

Patch 7.4.376 (after 7.4.367)
Problem:    Popup menu flickers too much.
Solution:   Remove the forced redraw. (Hirohito Higashi)
Files:	    src/edit.c

Patch 7.4.377
Problem:    When <A HREF="options.html#'equalalways'">'equalalways'</A> is set a split may report &quot;no room&quot; even though
	    there is plenty of room.
Solution:   Compute the available room properly. (Yukihiro Nakadaira)
Files:	    src/window.c

Patch 7.4.378
Problem:    Title of <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A> is not kept for setqflist(list, 'r').
Solution:   Keep the title.  Add a test. (Lcd)
Files:	    src/quickfix.c, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
	    src/testdir/Makefile, src/testdir/test_qf_title.in,
	    src/testdir/test_qf_title.ok

Patch 7.4.379
Problem:    Accessing freed memory after using setqflist(list, 'r'). (Lcd)
Solution:   Reset qf_index.
Files:	    src/quickfix.c

Patch 7.4.380
Problem:    Loading <A HREF="if_pyth.html#python">python</A> may cause Vim to exit.
Solution:   Avoid loading the &quot;site&quot; module. (Taro Muraoka)
Files:	    src/if_python.c

Patch 7.4.381
Problem:    Get u_undo error when backspacing in <A HREF="insert.html#Insert">Insert</A> mode deletes more than
	    one line break. (Ayberk Ozgur)
Solution:   Also decrement Insstart.lnum.
Files:	    src/edit.c

Patch 7.4.382
Problem:    Mapping characters may not work after typing Esc in <A HREF="insert.html#Insert">Insert</A> mode.
Solution:   Fix the noremap flags for inserted characters. (Jacob Niehus)
Files:	    src/getchar.c

Patch 7.4.383
Problem:    Bad interaction between preview <A HREF="windows.html#window">window</A> and omnifunc.
Solution:   Avoid redrawing the status line. (Hirohito Higashi)
Files:	    src/popupmnu.c

Patch 7.4.384
Problem:    Test 102 fails when compiled with small features.
Solution:   Source small.vim. (Jacob Niehus)
Files:	    src/testdir/test102.in

Patch 7.4.385
Problem:    When building with tiny or small features building the .mo files
	    fails.
Solution:   In autoconf <A HREF="diff.html#do">do</A> not setup for building the .mo files when <A HREF="motion.html#it">it</A> would
	    fail.
Files:	    src/configure.in, src/auto/configure

Patch 7.4.386
Problem:    When splitting a <A HREF="windows.html#window">window</A> the <A HREF="motion.html#changelist">changelist</A> position is wrong.
Solution:   Copy the <A HREF="motion.html#changelist">changelist</A> position. (Jacob Niehus)
Files:	    src/window.c, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
	    src/testdir/Makefile, src/testdir/test_changelist.in,
	    src/testdir/test_changelist.ok

Patch 7.4.387
Problem:    &quot;4gro&quot; replaces one character then executes &quot;ooo&quot;. (Urtica Dioica)
Solution:   Write the ESC in the second stuff buffer.
Files:	    src/getchar.c, src/proto/getchar.pro, src/edit.c,
	    src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile,
	    src/testdir/test_insertcount.in, src/testdir/test_insertcount.ok

Patch 7.4.388
Problem:    With <A HREF="options.html#'linebreak'">'linebreak'</A> set and <A HREF="options.html#'list'">'list'</A> unset a <A HREF="intro.html#Tab">Tab</A> is not counted
	    properly. (Kent Sibilev)
Solution:   Check the <A HREF="options.html#'list'">'list'</A> option. (Christian Brabandt)
Files:	    src/screen.c, src/testdir/test_listlbr_utf8.in,
	    src/testdir/test_listlbr_utf8.ok

Patch 7.4.389
Problem:    Still sometimes Vim enters <A HREF="insert.html#Replace">Replace</A> mode when starting up.
Solution:   Use a different solution in detecting the termresponse and
	    location response. (Hayaki Saito)
Files:	    src/globals.h, src/os_unix.c, src/term.c, src/proto/term.pro

Patch 7.4.390
Problem:    Advancing pointer over end of a <A HREF="eval.html#string">string</A>.
Solution:   Init <A HREF="change.html#quote">quote</A> character to -1 instead of zero. (Dominique Pelle)
Files:	    src/misc1.c

Patch 7.4.391
Problem:    No <A HREF="options.html#'cursorline'">'cursorline'</A> highlighting when the cursor is on a line with
	    <A HREF="diff.html#diff">diff</A> highlighting. (Benjamin Fritz)
Solution:   Combine the highlight attributes. (Christian Brabandt)
Files:	    src/screen.c

Patch 7.4.392
Problem:    Not <A HREF="starting.html#easy">easy</A> to detect type of command line <A HREF="windows.html#window">window</A>.
Solution:   Add the <A HREF="builtin.html#getcmdwintype()">getcmdwintype()</A> function. (Jacob Niehus)
Files:	    src/eval.c

Patch 7.4.393
Problem:    Text drawing on newer <A HREF="os_win32.html#MS-Windows">MS-Windows</A> systems is suboptimal.  Some
	    <A HREF="mbyte.html#multibyte">multibyte</A> characters are not displayed, even though the same font
	    in Notepad can display them. (Srinath Avadhanula)
Solution:   Add the <A HREF="options.html#'renderoptions'">'renderoptions'</A> option to enable DirectX drawing. (Taro
	    Muraoka)
Files:	    runtime/doc/eval.txt, runtime/doc/options.txt,
	    runtime/doc/various.txt, src/Make_cyg.mak, src/Make_ming.mak,
	    src/Make_mvc.mak, src/eval.c, src/gui_dwrite.cpp,
	    src/gui_dwrite.h, src/gui_w32.c, src/gui_w48.c, src/option.c,
	    src/option.h, src/version.c, src/vim.h, src/proto/gui_w32.pro

Patch 7.4.394 (after 7.4.393)
Problem:    When using DirectX last <A HREF="syntax.html#italic">italic</A> character is incomplete.
Solution:   Add one to the number of cells. (Ken Takata)
Files:	    src/gui_w32.c

Patch 7.4.395 (after 7.4.355)
Problem:    C indent is wrong below an if with wrapped condition followed by
	    curly braces. (Trevor Powell)
Solution:   Make a copy of tryposBrace.
Files:	    src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 7.4.396
Problem:    When <A HREF="options.html#'clipboard'">'clipboard'</A> is &quot;unnamed&quot;, :g/pat/d is very slow. (Praful)
Solution:   Only set the <A HREF="gui.html#clipboard">clipboard</A> after the last delete. (Christian Brabandt)
Files:	    src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c, src/globals.h,
	    src/ops.c, src/proto/ui.pro, src/ui.c

Patch 7.4.397
Problem:    Matchparen only uses the topmost <A HREF="syntax.html#syntax">syntax</A> item.
Solution:   Go through the <A HREF="syntax.html#syntax">syntax</A> stack to find items. (James McCoy)
	    Also use <A HREF="builtin.html#getcurpos()">getcurpos()</A> when possible.
Files:	    runtime/plugin/matchparen.vim

Patch 7.4.398 (after 7.4.393)
Problem:    Gcc error for the argument of InterlockedIncrement() and
	    InterlockedDecrement(). (Axel Bender)
Solution:   Remove &quot;unsigned&quot; from the cRefCount_ declaration.
Files:	    src/gui_dwrite.cpp

Patch 7.4.399
Problem:    Encryption implementation is messy.  Blowfish <A HREF="editing.html#encryption">encryption</A> has a
	    weakness.
Solution:   Refactor the <A HREF="editing.html#encryption">encryption</A>, store the state in an allocated struct
	    instead of using a save/restore mechanism.  Introduce the
	    &quot;<A HREF="options.html#blowfish2">blowfish2</A>&quot; <A HREF="eval.html#method">method</A>, which does not have the weakness and encrypts
	    the whole <A HREF="undo.html#undo">undo</A> file. (largely by David Leadbeater)
Files:	    runtime/doc/editing.txt, runtime/doc/options.txt, src/Makefile,
	    src/blowfish.c, src/crypt.c, src/crypt_zip.c, src/ex_docmd.c,
	    src/fileio.c, src/globals.h, src/main.c, src/memline.c,
	    src/misc2.c, src/option.c, src/proto.h, src/proto/blowfish.pro,
	    src/proto/crypt.pro, src/proto/crypt_zip.pro,
	    src/proto/fileio.pro, src/proto/misc2.pro, src/structs.h,
	    src/undo.c, src/testdir/test71.in, src/testdir/test71.ok,
	    src/testdir/test71a.in, src/testdir/test72.in,
	    src/testdir/test72.ok

Patch 7.4.400
Problem:    <A HREF="eval.html#List">List</A> of distributed files is incomplete.
Solution:   Add recently added files.
Files:	    Filelist

Patch 7.4.401 (after 7.4.399)
Problem:    Can't build on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Include the new files in all the Makefiles.
Files:	    src/Make_bc3.mak, src/Make_bc5.mak, src/Make_cyg.mak,
	    src/Make_dice.mak, src/Make_djg.mak, src/Make_ivc.mak,
	    src/Make_manx.mak, src/Make_ming.mak, src/Make_morph.mak,
	    src/Make_mvc.mak, src/Make_os2.mak, src/Make_sas.mak,
	    Make_vms.mms

Patch 7.4.402
Problem:    Test 72 crashes under certain conditions. (Kazunobu Kuriyama)
Solution:   Clear the whole bufinfo_T early.
Files:	    src/undo.c

Patch 7.4.403
Problem:    Valgrind reports <A HREF="message.html#errors">errors</A> when running test 72. (Dominique Pelle)
Solution:   Reset the local <A HREF="options.html#'cryptmethod'">'cryptmethod'</A> option before storing the seed.
	    Set the seed in the memfile even when there is no block0 yet.
Files:	    src/fileio.c, src/option.c, src/memline.c

Patch 7.4.404
Problem:    Windows 64 bit compiler warnings.
Solution:   Add type casts. (Mike Williams)
Files:	    src/crypt.c, src/undo.c

Patch 7.4.405
Problem:    Screen updating is slow when using matches.
Solution:   Do not use the &quot;&gt;=&quot; <A HREF="motion.html#as">as</A> in patch 7.4.362, check the lnum.
Files:	    src/screen.c, src/testdir/test63.in, src/testdir/test63.ok

Patch 7.4.406
Problem:    Test 72 and 100 fail on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Set fileformat to <A HREF="os_unix.html#unix">unix</A> in the tests. (Taro Muraoka)
Files:	    src/testdir/test72.in, src/testdir/test100.in

Patch 7.4.407
Problem:    Inserting text for <A HREF="visual.html#Visual">Visual</A> block mode, with cursor <A HREF="intro.html#movement">movement</A>,
	    repeats the wrong text. (Aleksandar Ivanov)
Solution:   Reset the update_Insstart_orig flag. (Christian Brabandt)
Files:	    src/edit.c, src/testdir/test39.in, src/testdir/test39.ok

Patch 7.4.408
Problem:    <A HREF="visual.html#Visual">Visual</A> block insert breaks a <A HREF="mbyte.html#multibyte">multibyte</A> character.
Solution:   Calculate the position properly. (Yasuhiro Matsumoto)
Files:	    src/ops.c, src/testdir/test_utf8.in, src/testdir/test_utf8.ok,
	    src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile

Patch 7.4.409
Problem:    Can't build with <A HREF="if_perl.html#Perl">Perl</A> on Fedora 20.
Solution:   Find xsubpp in another directory. (Michael Henry)
Files:	    src/Makefile, src/config.mk.in, src/configure.in,
	    src/auto/configure

Patch 7.4.410
Problem:    Fold does not open after search when there is a <A HREF="autocmd.html#CmdwinLeave">CmdwinLeave</A>
	    <A HREF="autocmd.html#autocommand">autocommand</A>.
Solution:   Restore KeyTyped. (Jacob Niehus)
Files:	    src/ex_getln.c

Patch 7.4.411
Problem:    &quot;foo bar&quot; sorts before &quot;foo&quot; with <A HREF="builtin.html#sort()">sort()</A>. (John Little)
Solution:   Avoid putting <A HREF="quotes.html#quotes">quotes</A> around strings before comparing them.
Files:	    src/eval.c

Patch 7.4.412
Problem:    Can't build on Windows XP with MSVC.
Solution:   Add SUBSYSTEM_VER to the Makefile. (Yongwei Wu)
Files:	    src/Make_mvc.mak, src/INSTALLpc.txt

Patch 7.4.413
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: Using US international keyboard layout, <A HREF="insert.html#inserting">inserting</A> dead
	    key by pressing space does not always work.  Issue 250.
Solution:   Let <A HREF="os_win32.html#MS-Windows">MS-Windows</A> translate the message. (John Wellesz)
Files:	    src/gui_w48.c

Patch 7.4.414
Problem:    Cannot define a command only when it's used.
Solution:   Add the <A HREF="autocmd.html#CmdUndefined">CmdUndefined</A> <A HREF="autocmd.html#autocommand">autocommand</A> event. (partly by Yasuhiro
	    Matsumoto)
Files:	    runtime/doc/autocmd.txt, src/ex_docmd.c, src/fileio.c,
	    src/proto/fileio.pro

Patch 7.4.415 (after 7.4.414)
Problem:    Cannot build.  Warning for shadowed variable. (John Little)
Solution:   Add missing change.  Remove declaration.
Files:	    src/vim.h, src/ex_docmd.c

Patch 7.4.416
Problem:    Problem with breakindent/showbreak and tabs.
Solution:   Handle tabs differently. (Christian Brabandt)
Files:	    src/testdir/test_breakindent.in, src/testdir/test_breakindent.ok,
	    src/charset.c

Patch 7.4.417
Problem:    After splitting a <A HREF="windows.html#window">window</A> and setting <A HREF="options.html#'breakindent'">'breakindent'</A> the default
	    minimum with is not respected.
Solution:   Call briopt_check() when <A HREF="uganda.html#copying">copying</A> <A HREF="options.html#options">options</A> to a new <A HREF="windows.html#window">window</A>.
Files:	    src/option.c, src/proto/option.pro,
	    src/testdir/test_breakindent.in

Patch 7.4.418
Problem:    When leaving &quot;<A HREF="insert.html#:append">:append</A>&quot; the cursor shape is like in <A HREF="insert.html#Insert">Insert</A> mode.
	    (Jacob Niehus)
Solution:   Do not have State set to INSERT when calling <A HREF="builtin.html#getline()">getline()</A>.
Files:	    src/ex_cmds.c

Patch 7.4.419
Problem:    When part of a <A HREF="eval.html#list">list</A> is locked it's possible to make changes.
Solution:   Check if any of the <A HREF="eval.html#list">list</A> items is locked before make a change.
	    (ZyX)
Files:	    src/eval.c, src/testdir/test55.in, src/testdir/test55.ok

Patch 7.4.420
Problem:    It's not obvious how to add a new test.
Solution:   Add a README file. (Christian Brabandt)
Files:	    src/testdir/README.txt

Patch 7.4.421
Problem:    Crash when searching for &quot;\ze*&quot;. (Urtica Dioica)
Solution:   Disallow a multi after \ze and \zs.
Files:	    src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.4.422
Problem:    When using <A HREF="syntax.html#conceal">conceal</A> with linebreak some text is not displayed
	    correctly. (Grner Gimpel)
Solution:   Check for <A HREF="syntax.html#conceal">conceal</A> mode when using linebreak. (Christian Brabandt)
Files:	    src/screen.c, src/testdir/test_listlbr.in,
	    src/testdir/test_listlbr.ok

Patch 7.4.423
Problem:    expand(&quot;$shell&quot;) does not work <A HREF="motion.html#as">as</A> documented.
Solution:   Do not <A HREF="intro.html#escape">escape</A> the $ when expanding environment <A HREF="eval.html#variables">variables</A>.
Files:	    src/os_unix.c, src/misc1.c, src/vim.h

Patch 7.4.424
Problem:    Get ml_get error when using <A HREF="if_pyth.html#Python">Python</A> to delete lines in a buffer
	    that is not in a <A HREF="windows.html#window">window</A>.  issue 248.
Solution:   Do not try adjusting the cursor for a different buffer.
Files:	    src/if_py_both.h

Patch 7.4.425
Problem:    When <A HREF="options.html#'showbreak'">'showbreak'</A> is used &quot;<A HREF="motion.html#gj">gj</A>&quot; may move to the wrong position.
	    (Nazri Ramliy)
Solution:   Adjust virtcol when <A HREF="options.html#'showbreak'">'showbreak'</A> is set. (Christian Brabandt)
Files:	    src/normal.c

Patch 7.4.426
Problem:    README File missing from <A HREF="eval.html#list">list</A> of files.
Solution:   Update the <A HREF="eval.html#list">list</A> of files.
Files:	    Filelist

Patch 7.4.427
Problem:    When an <A HREF="autocmd.html#InsertCharPre">InsertCharPre</A> <A HREF="autocmd.html#autocommand">autocommand</A> executes <A HREF="builtin.html#system()">system()</A> typeahead may
	    be echoed and messes up the display. (Jacob Niehus)
Solution:   Do not set cooked mode when invoked from &quot;<A HREF="various.html#:silent">:silent</A>&quot;.
Files:	    src/eval.c, runtime/doc/eval.txt

Patch 7.4.428
Problem:    <A HREF="builtin.html#executable()">executable()</A> may return a wrong result on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Change the way SearchPath() is called. (Yasuhiro Matsumoto, Ken
	    Takata)
Files:	    src/os_win32.c

Patch 7.4.429
Problem:    Build fails with fewer features. (Elimar Riesebieter)
Solution:   Add #ifdef.
Files:	    src/normal.c

Patch 7.4.430
Problem:    test_listlbr fails when compiled with normal features.
Solution:   Check for the <A HREF="various.html#+conceal">+conceal</A> feature.
Files:	    src/testdir/test_listlbr.in

Patch 7.4.431
Problem:    Compiler warning.
Solution:   Add type cast. (Mike Williams)
Files:	    src/ex_docmd.c

Patch 7.4.432
Problem:    When the <A HREF="starting.html#startup">startup</A> code expands command line arguments, setting
	    <A HREF="options.html#'encoding'">'encoding'</A> will not properly convert the arguments.
Solution:   Call get_cmd_argsW() early in main(). (Yasuhiro Matsumoto)
Files:	    src/os_win32.c, src/main.c, src/os_mswin.c

Patch 7.4.433
Problem:    Test 75 fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Use &quot;<A HREF="various.html#:normal">:normal</A>&quot; instead of <A HREF="builtin.html#feedkeys()">feedkeys()</A>. (Michael Soyka)
Files:	    src/testdir/test75.in

Patch 7.4.434
Problem:    <A HREF="builtin.html#gettabvar()">gettabvar()</A> is not consistent with <A HREF="builtin.html#getwinvar()">getwinvar()</A> and <A HREF="builtin.html#getbufvar()">getbufvar()</A>.
Solution:   Return a <A HREF="eval.html#dict">dict</A> with all <A HREF="eval.html#variables">variables</A> when the varname is empty.
	    (Yasuhiro Matsumoto)
Files:	    src/eval.c, runtime/doc/eval.txt, src/testdir/test91.in,
	    src/testdir/test91.ok

Patch 7.4.435
Problem:    Line <A HREF="change.html#formatting">formatting</A> behaves differently when <A HREF="options.html#'linebreak'">'linebreak'</A> is set.
	    (mvxxc)
Solution:   Disable <A HREF="options.html#'linebreak'">'linebreak'</A> temporarily. (Christian Brabandt)
Files:	    src/edit.c

Patch 7.4.436
Problem:    ml_get error for <A HREF="autocmd.html#autocommand">autocommand</A> that moves the cursor of the current
	    <A HREF="windows.html#window">window</A>.
Solution:   Check the cursor position after switching back to the current
	    buffer.  (Christian Brabandt)
Files:	    src/fileio.c

Patch 7.4.437
Problem:    New and old <A HREF="pattern.html#regexp">regexp</A> engine are not consistent.
Solution:   Also give an error for &quot;\ze*&quot; for the old <A HREF="pattern.html#regexp">regexp</A> engine.
Files:	    src/regexp.c, src/regexp_nfa.c

Patch 7.4.438
Problem:    Cached values for <A HREF="options.html#'cino'">'cino'</A> not reset for &quot;<A HREF="options.html#:set">:set</A> all&amp;&quot;.
Solution:   Call parse_cino(). (Yukihiro Nakadaira)
Files:	    src/option.c

Patch 7.4.439
Problem:    Duplicate message in message <A HREF="cmdline.html#history">history</A>.  Some <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="message.html#messages">messages</A>
	    appear <A HREF="if_cscop.html#twice">twice</A>. (Gary Johnson)
Solution:   Do not reset keep_msg too early. (Hirohito Higashi)
Files:	    src/main.c

Patch 7.4.440
Problem:    Omni complete <A HREF="popup.html#popup">popup</A> drawn incorrectly.
Solution:   Call validate_cursor() instead of check_cursor(). (Hirohito
	    Higashi)
Files:	    src/edit.c

Patch 7.4.441
Problem:    Endless loop and other problems when <A HREF="options.html#'cedit'">'cedit'</A> is set to <A HREF="pattern.html#CTRL-C">CTRL-C</A>.
Solution:   Do not call ex_window() when ex_normal_busy or got_int was set.
	    (Yasuhiro Matsumoto)
Files:	    src/ex_getln.c

Patch 7.4.442 (after 7.4.434)
Problem:    Using uninitialized variable.
Solution:   Pass the first <A HREF="windows.html#window">window</A> of the <A HREF="tabpage.html#tabpage">tabpage</A>.
Files:	    src/eval.c

Patch 7.4.443
Problem:    Error reported by ubsan when running test 72.
Solution:   Add type cast to unsigned. (Dominique Pelle)
Files:	    src/undo.c

Patch 7.4.444
Problem:    Reversed question <A HREF="motion.html#mark">mark</A> not recognized <A HREF="motion.html#as">as</A> punctuation. (Issue 258)
Solution:   Add the Supplemental Punctuation range.
Files:	    src/mbyte.c

Patch 7.4.445
Problem:    Clipboard may be cleared on <A HREF="starting.html#startup">startup</A>.
Solution:   Set clip_did_set_selection to -1 during <A HREF="starting.html#startup">startup</A>. (Christian
	    Brabandt)
Files:	    src/main.c, src/ui.c

Patch 7.4.446
Problem:    In some situations, when setting up an environment to trigger an
	    <A HREF="autocmd.html#autocommand">autocommand</A>, the environment is not properly restored.
Solution:   Check the return value of switch_win() and call restore_win()
	    always.  (Daniel Hahler)
Files:	    src/eval.c, src/misc2.c, src/window.c

Patch 7.4.447
Problem:    Spell files from Hunspell may generate a lot of <A HREF="message.html#errors">errors</A>.
Solution:   Add the IGNOREEXTRA flag.
Files:	    src/spell.c, runtime/doc/spell.txt

Patch 7.4.448
Problem:    Using ETO_IGNORELANGUAGE causes problems.
Solution:   Remove this flag. (Paul Moore)
Files:	    src/gui_w32.c

Patch 7.4.449
Problem:    Can't easily close the help <A HREF="windows.html#window">window</A>. (Chris Gaal)
Solution:   Add &quot;<A HREF="helphelp.html#:helpclose">:helpclose</A>&quot;. (Christian Brabandt)
Files:	    runtime/doc/helphelp.txt, runtime/doc/index.txt, src/ex_cmds.c,
	    src/ex_cmds.h, src/proto/ex_cmds.pro

Patch 7.4.450
Problem:    Not all commands that edit another buffer support the <A HREF="editing.html#+cmd">+cmd</A>
	    argument.
Solution:   Add the <A HREF="editing.html#+cmd">+cmd</A> argument to relevant commands. (Marcin Szamotulski)
Files:	    runtime/doc/windows.txt, src/ex_cmds.h, src/ex_docmd.c

Patch 7.4.451
Problem:    Calling <A HREF="builtin.html#system()">system()</A> with empty input gives an error for <A HREF="editing.html#writing">writing</A> the
	    temp file.
Solution:   Do not try <A HREF="editing.html#writing">writing</A> if the <A HREF="eval.html#string">string</A> length is zero. (Olaf Dabrunz)
Files:	    src/eval.c

Patch 7.4.452
Problem:    Can't build with tiny features. (Tony Mechelynck)
Solution:   Use &quot;return&quot; instead of &quot;break&quot;.
Files:	    src/ex_cmds.c

Patch 7.4.453
Problem:    Still can't build with tiny features.
Solution:   Add #ifdef.
Files:	    src/ex_cmds.c

Patch 7.4.454
Problem:    When using a <A HREF="visual.html#Visual">Visual</A> selection of multiple words and doing <A HREF="windows.html#CTRL-W_]">CTRL-W_]</A>
	    <A HREF="motion.html#it">it</A> jumps to the <A HREF="tagsrch.html#tag">tag</A> matching the <A HREF="motion.html#word">word</A> under the cursor, not the
	    selected text.  (Patrick hemmer)
Solution:   Do not reset <A HREF="visual.html#Visual">Visual</A> mode. (idea by Christian Brabandt)
Files:	    src/window.c

Patch 7.4.455
Problem:    Completion for <A HREF="windows.html#:buf">:buf</A> does not use <A HREF="options.html#'wildignorecase'">'wildignorecase'</A>. (Akshay <A HREF="motion.html#H">H</A>)
Solution:   Pass the <A HREF="options.html#'wildignorecase'">'wildignorecase'</A> flag around.
Files:	    src/buffer.c

Patch 7.4.456
Problem:    <A HREF="options.html#'backupcopy'">'backupcopy'</A> is global, cannot write only some files in a
	    different way.
Solution:   Make <A HREF="options.html#'backupcopy'">'backupcopy'</A> <A HREF="options.html#global-local">global-local</A>. (Christian Brabandt)
Files:	    runtime/doc/options.txt, src/buffer.c, src/fileio.c, src/option.c,
	    src/option.h, src/proto/option.pro, src/structs.h

Patch 7.4.457
Problem:    Using <A HREF="builtin.html#getchar()">getchar()</A> in an <A HREF="eval.html#expression">expression</A> <A HREF="map.html#mapping">mapping</A> may result in
	    K_CURSORHOLD, which can't be recognized.
Solution:   Add the <A HREF="autocmd.html#&lt;CursorHold&gt;">&lt;CursorHold&gt;</A> key.  (Hirohito Higashi)
Files:	    src/misc2.c

Patch 7.4.458
Problem:    Issue 252: Cursor moves in a zero-height <A HREF="windows.html#window">window</A>.
Solution:   Check for zero height. (idea by Christian Brabandt)
Files:	    src/move.c

Patch 7.4.459
Problem:    Can't change the icon after building Vim.
Solution:   Load the icon from a file on <A HREF="starting.html#startup">startup</A>. (Yasuhiro Matsumoto)
Files:	    src/gui_w32.c, src/os_mswin.c, src/os_win32.c,
	    src/proto/os_mswin.pro

Patch 7.4.460 (after 7.4.454)
Problem:    Can't build without the <A HREF="quickfix.html#quickfix">quickfix</A> feature. (Erik Falor)
Solution:   Add a #ifdef.
Files:	    src/window.c

Patch 7.4.461
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: When collate is on the number of copies is too high.
Solution:   Only set the collated/uncollated <A HREF="intro.html#count">count</A> when collate is on.
	    (Yasuhiro Matsumoto)
Files:	    src/os_mswin.c

Patch 7.4.462
Problem:    Setting the local value of <A HREF="options.html#'backupcopy'">'backupcopy'</A> empty gives an error.
	    (Peter Mattern)
Solution:   When using an empty value set the flags to zero. (Hirohito
	    Higashi)
Files:	    src/option.c

Patch 7.4.463
Problem:    Test 86 and 87 may hang on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Call <A HREF="builtin.html#inputrestore()">inputrestore()</A> after <A HREF="builtin.html#inputsave()">inputsave()</A>. (Ken Takata)
Files:	    src/testdir/test86.in, src/testdir/test87.in

Patch 7.4.464 (after 7.4.459)
Problem:    Compiler warning.
Solution:   Add type cast. (Ken Takata)
Files:	    src/gui_w32.c

Patch 7.4.465 (after 7.4.016)
Problem:    Crash when expanding a very long <A HREF="eval.html#string">string</A>.
Solution:   Use wcsncpy() instead of wcscpy(). (Ken Takata)
Files:	    src/os_win32.c

Patch 7.4.466 (after 7.4.460)
Problem:    <A HREF="index.html#CTRL-W">CTRL-W</A> } does not open preview <A HREF="windows.html#window">window</A>. (Erik Falor)
Solution:   Don't set g_do_tagpreview for <A HREF="index.html#CTRL-W">CTRL-W</A> }.
Files:	    src/window.c

Patch 7.4.467
Problem:    <A HREF="options.html#'linebreak'">'linebreak'</A> does not work well together with <A HREF="visual.html#Visual">Visual</A> mode.
Solution:   Disable <A HREF="options.html#'linebreak'">'linebreak'</A> while applying an <A HREF="motion.html#operator">operator</A>.  Fix the test.
	    (Christian Brabandt)
Files:	    src/normal.c, src/screen.c, src/testdir/test_listlbr.in,
	    src/testdir/test_listlbr.ok

Patch 7.4.468
Problem:    Issue 26: <A HREF="pattern.html#CTRL-C">CTRL-C</A> does not interrupt after <A HREF="motion.html#it">it</A> was mapped and then
	    unmapped.
Solution:   Reset mapped_ctrl_c. (Christian Brabandt)
Files:	    src/getchar.c

Patch 7.4.469 (after 7.4.467)
Problem:    Can't build with MSVC. (Ken Takata)
Solution:   Move the assignment after the declarations.
Files:	    src/normal.c

Patch 7.4.470
Problem:    Test 11 and 100 <A HREF="diff.html#do">do</A> not work properly on Windows.
Solution:   Avoid using <A HREF="builtin.html#feedkeys()">feedkeys()</A>. (Ken Takata)
Files:	    src/testdir/Make_dos.mak, src/testdir/test11.in,
	    src/testdir/test100.in

Patch 7.4.471
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: When printer name contains <A HREF="mbyte.html#multibyte">multibyte</A>, the name is
	    displayed <A HREF="motion.html#as">as</A> ???.
Solution:   Convert the printer name from the active codepage to <A HREF="options.html#'encoding'">'encoding'</A>.
	    (Yasuhiro Matsumoto)
Files:	    src/os_mswin.c

Patch 7.4.472
Problem:    The &quot;precedes&quot; entry in <A HREF="options.html#'listchars'">'listchars'</A> will be drawn when <A HREF="options.html#'showbreak'">'showbreak'</A>
	    is set and <A HREF="options.html#'list'">'list'</A> is not.
Solution:   Only draw this character when <A HREF="options.html#'list'">'list'</A> is on. (Christian Brabandt)
Files:	    src/screen.c

Patch 7.4.473
Problem:    Cursor <A HREF="intro.html#movement">movement</A> is incorrect when there is a number/sign/fold
	    column and <A HREF="options.html#'sbr'">'sbr'</A> is displayed.
Solution:   Adjust the column for <A HREF="options.html#'sbr'">'sbr'</A>. (Christian Brabandt)
Files:	    src/charset.c

Patch 7.4.474
Problem:    AIX compiler can't handle <A HREF="version7.html#//">//</A> comment.  Issue 265.
Solution:   Remove that line.
Files:	    src/regexp_nfa.c

Patch 7.4.475
Problem:    Can't compile on a system where Xutf8SetWMProperties() is not in
	    the <A HREF="options.html#X11">X11</A> library.  Issue 265.
Solution:   Add a configure check.
Files:	    src/configure.in, src/auto/configure, src/config.h.in,
	    src/os_unix.c

Patch 7.4.476
Problem:    MingW: compiling with &quot;XPM=no&quot; doesn't work.
Solution:   Check for the &quot;no&quot; value. (KF Leong)  Also for Cygwin. (Ken
	    Takata)
Files:	    src/Make_ming.mak, src/Make_cyg.mak

Patch 7.4.477
Problem:    When using &quot;:&#37;diffput&quot; and the other file is empty an extra empty
	    line remains.
Solution:   Set the buf_empty flag.
Files:	    src/diff.c

Patch 7.4.478
Problem:    Using byte length instead of character length for <A HREF="options.html#'showbreak'">'showbreak'</A>.
Solution:   Compute the character length. (Marco Hinz)
Files:	    src/charset.c

Patch 7.4.479
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: The console title can be wrong.
Solution:   Take the encoding into account. When restoring the title use the
	    right function. (Yasuhiro Matsumoto)
Files:	    src/os_mswin.c, src/os_win32.c

Patch 7.4.480 (after 7.4.479)
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: Can't build.
Solution:   Remove goto, use a flag instead.
Files:	    src/os_win32.c

Patch 7.4.481 (after 7.4.471)
Problem:    Compiler warning on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Add type casts. (Ken Takata)
Files:	    src/os_mswin.c

Patch 7.4.482
Problem:    When <A HREF="options.html#'balloonexpr'">'balloonexpr'</A> results in a <A HREF="eval.html#list">list</A>, the text has a trailing
	    newline. (Lcd)
Solution:   Remove one trailing newline.
Files:	    src/gui_beval.c

Patch 7.4.483
Problem:    A 0x80 byte is not handled correctly in <A HREF="map.html#abbreviations">abbreviations</A>.
Solution:   Unescape special characters. Add a test. (Christian Brabandt)
Files:	    src/getchar.c, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
	    src/testdir/Makefile, src/testdir/test_mapping.in,
	    src/testdir/test_mapping.ok

Patch 7.4.484 (after 7.4.483)
Problem:    Compiler warning on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>. (Ken Takata)
Solution:   Add type cast.
Files:	    src/getchar.c

Patch 7.4.485 (after 7.4.484)
Problem:    <A HREF="map.html#Abbreviations">Abbreviations</A> don't work. (Toothpik)
Solution:   Move the length computation inside the for loop.  Compare against
	    the unescaped key.
Files:	    src/getchar.c

Patch 7.4.486
Problem:    Check for <A HREF="editing.html#writing">writing</A> to a <A HREF="change.html#yank">yank</A> <A HREF="sponsor.html#register">register</A> is wrong.
Solution:   Negate the check. (Zyx).  Also clean up the #ifdefs.
Files:	    src/ex_docmd.c, src/ex_cmds.h

Patch 7.4.487
Problem:    &quot;<A HREF="sign.html#:sign">:sign</A> jump&quot; may use another <A HREF="windows.html#window">window</A> even though the file is
	    already edited in the current <A HREF="windows.html#window">window</A>.
Solution:   First check if the file is in the current <A HREF="windows.html#window">window</A>. (James McCoy)
Files:	    src/window.c, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
	    src/testdir/Makefile, src/testdir/test_signs.in,
	    src/testdir/test_signs.ok

Patch 7.4.488
Problem:    test_mapping fails for some people.
Solution:   Set the <A HREF="options.html#'encoding'">'encoding'</A> option. (Ken Takata)
Files:	    src/testdir/test_mapping.in

Patch 7.4.489
Problem:    Cursor <A HREF="intro.html#movement">movement</A> still wrong when <A HREF="options.html#'lbr'">'lbr'</A> is set and there is a
	    number column. (Hirohito Higashi)
Solution:   Add correction for number column. (Hiroyuki Takagi)
Files:	    src/charset.c

Patch 7.4.490
Problem:    Cannot specify the buffer to use for &quot;<A HREF="diff.html#do">do</A>&quot; and &quot;<A HREF="diff.html#dp">dp</A>&quot;, making them
	    useless for three-way <A HREF="diff.html#diff">diff</A>.
Solution:   Use the <A HREF="intro.html#count">count</A> <A HREF="motion.html#as">as</A> the buffer number. (James McCoy)
Files:	    runtime/doc/diff.txt, src/diff.c, src/normal.c, src/proto/diff.pro

Patch 7.4.491
Problem:    When <A HREF="builtin.html#winrestview()">winrestview()</A> has a negative &quot;topline&quot; value there are
	    display <A HREF="message.html#errors">errors</A>.
Solution:   Correct a negative value to 1. (Hirohito Higashi)
Files:	    src/eval.c

Patch 7.4.492
Problem:    In <A HREF="insert.html#Insert">Insert</A> mode, after <A HREF="insert.html#inserting">inserting</A> a newline that inserts a comment
	    leader, <A HREF="motion.html#CTRL-O">CTRL-O</A> moves to the right. (ZyX) Issue 57.
Solution:   Correct the condition for moving the cursor back to the NUL.
	    (Christian Brabandt)
Files:	    src/edit.c, src/testdir/test4.in, src/testdir/test4.ok

Patch 7.4.493
Problem:    A <A HREF="autocmd.html#TextChanged">TextChanged</A> <A HREF="autocmd.html#autocommand">autocommand</A> is triggered when saving a file.
	    (William Gardner)
Solution:   Update last_changedtick after calling unchanged(). (Christian
	    Brabandt)
Files:	    src/fileio.c

Patch 7.4.494
Problem:    Cursor shape is wrong after a <A HREF="autocmd.html#CompleteDone">CompleteDone</A> <A HREF="autocmd.html#autocommand">autocommand</A>.
Solution:   Update the cursor and mouse shape after &quot;<A HREF="various.html#:normal">:normal</A>&quot; restores the
	    state. (Jacob Niehus)
Files:	    src/ex_docmd.c

Patch 7.4.495
Problem:    XPM isn't used correctly in the Cygwin Makefile.
Solution:   Include the rules like in Make_ming.mak. (Ken Takata)
Files:	    src/Make_cyg.mak

Patch 7.4.496
Problem:    Many lines are both in Make_cyg.mak and Make_ming.mak
Solution:   Move the common parts to one file. (Ken Takata)
Files:	    src/INSTALLpc.txt, src/Make_cyg.mak, src/Make_cyg_ming.mak,
	    src/Make_ming.mak, src/Make_mvc.mak, Filelist

Patch 7.4.497
Problem:    With some <A HREF="pattern.html#regexp">regexp</A> patterns the <A HREF="pattern.html#NFA">NFA</A> engine uses many states and
	    becomes very slow.  To the user <A HREF="motion.html#it">it</A> looks like Vim freezes.
Solution:   When the number of states reaches a limit fall back to the old
	    engine. (Christian Brabandt)
Files:	    runtime/doc/options.txt, src/Makefile, src/regexp.c, src/regexp.h,
	    src/regexp_nfa.c, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Makefile, src/testdir/samples/re.freeze.txt,
	    src/testdir/bench_re_freeze.in, src/testdir/bench_re_freeze.vim,
	    Filelist

Patch 7.4.498 (after 7.4.497)
Problem:    Typo in <A HREF="os_dos.html#DOS">DOS</A> makefile.
Solution:   Change exists to exist. (Ken Takata)
Files:	    src/testdir/Make_dos.mak

Patch 7.4.499
Problem:    <A HREF="builtin.html#substitute()">substitute()</A> can be slow with long strings.
Solution:   Store a pointer to the end, instead of calling <A HREF="builtin.html#strlen()">strlen()</A> every
	    time. (Ozaki Kiichi)
Files:	    src/eval.c

Patch 7.4.500
Problem:    Test 72 still fails once in a while.
Solution:   Don't set <A HREF="options.html#'fileformat'">'fileformat'</A> to <A HREF="os_unix.html#unix">unix</A>, reset <A HREF="motion.html#it">it</A>. (Ken Takata)
Files:	    src/testdir/test72.in

Patch 7.4.501 (after 7.4.497)
Problem:    Typo in file <A HREF="pattern.html#pattern">pattern</A>.
Solution:   <A HREF="insert.html#Insert">Insert</A> a slash and remove a dot.
Files:	    Filelist

Patch 7.4.502
Problem:    Language <A HREF="map.html#mapping">mapping</A> also applies to mapped characters.
Solution:   Add the <A HREF="options.html#'langnoremap'">'langnoremap'</A> option, when on <A HREF="options.html#'langmap'">'langmap'</A> does not apply to
	    mapped characters. (Christian Brabandt)
Files:	    runtime/doc/options.txt, runtime/vimrc_example.vim, src/macros.h,
	    src/option.c, src/option.h

Patch 7.4.503
Problem:    Cannot append a <A HREF="eval.html#list">list</A> of lines to a file.
Solution:   Add the append option to <A HREF="builtin.html#writefile()">writefile()</A>. (Yasuhiro Matsumoto)
Files:	    runtime/doc/eval.txt, src/Makefile, src/eval.c,
	    src/testdir/test_writefile.in, src/testdir/test_writefile.ok

Patch 7.4.504
Problem:    Restriction of the <A HREF="os_win32.html#MS-Windows">MS-Windows</A> installer that the path must end in
	    &quot;Vim&quot; prevents installing more than one version.
Solution:   Remove the restriction. (Tim Lebedkov)
Files:	    nsis/gvim.nsi

Patch 7.4.505
Problem:    On <A HREF="os_win32.html#MS-Windows">MS-Windows</A> when <A HREF="options.html#'encoding'">'encoding'</A> is a double-byte encoding a file
	    name longer than MAX_PATH bytes but shorter than that in
	    characters causes problems.
Solution:   Fail on file names longer than MAX_PATH bytes. (Ken Takata)
Files:	    src/os_win32.c

Patch 7.4.506
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: Cannot open a file with 259 characters.
Solution:   Fix off-by-one error. (Ken Takata)
Files:	    src/os_mswin.c

Patch 7.4.507 (after 7.4.496)
Problem:    Building with MingW and <A HREF="if_perl.html#Perl">Perl</A>.
Solution:   Remove <A HREF="quotes.html#quotes">quotes</A>. (Ken Takata)
Files:	    src/Make_cyg_ming.mak

Patch 7.4.508
Problem:    When generating ja.sjis.po the header is not correctly adjusted.
Solution:   Check for the right header <A HREF="eval.html#string">string</A>. (Ken Takata)
Files:	    src/po/sjiscorr.c

Patch 7.4.509
Problem:    Users are not aware their <A HREF="editing.html#encryption">encryption</A> is weak.
Solution:   Give a warning when prompting for the key.
Files:	    src/crypt.c, src/ex_docmd.c, src/fileio.c, src/main.c,
	    src/proto/crypt.pro

Patch 7.4.510
Problem:    &quot;-fwrapv&quot; argument breaks use of cproto.
Solution:   Remove the alphabetic arguments in a drastic way.
Files:	    src/Makefile

Patch 7.4.511
Problem:    Generating proto for if_ruby.c uses type not defined elsewhere.
Solution:   Do not generate a prototype for
	    rb_gc_writebarrier_unprotect_promoted()
Files:	    src/if_ruby.c

Patch 7.4.512
Problem:    Cannot generate prototypes for <A HREF="os_win32.html#Win32">Win32</A> files and <A HREF="os_vms.html#VMS">VMS</A>.
Solution:   Add typedefs and #ifdef
Files:	    src/os_win32.c, src/gui_w32.c, src/os_vms.c

Patch 7.4.513
Problem:    Crash because reference <A HREF="intro.html#count">count</A> is wrong for <A HREF="eval.html#list">list</A> returned by
	    <A HREF="builtin.html#getreg()">getreg()</A>.
Solution:   Increment the reference <A HREF="intro.html#count">count</A>. (Kimmy Lindvall)
Files:	    src/eval.c

Patch 7.4.514 (after 7.4.492)
Problem:    Memory access error. (Dominique Pelle)
Solution:   Update tpos. (Christian Brabandt)
Files:	    src/edit.c

Patch 7.4.515
Problem:    In a help buffer the global <A HREF="options.html#'foldmethod'">'foldmethod'</A> is used.  (Paul Marshall)
Solution:   Reset <A HREF="options.html#'foldmethod'">'foldmethod'</A> when starting to edit a help file.  Move the
	    code to a separate function.
Files:	    src/ex_cmds.c

Patch 7.4.516
Problem:    Completing a function name containing a # does not work.  Issue
	    253.
Solution:   Recognize the # character. (Christian Brabandt)
Files:	    src/eval.c

Patch 7.4.517
Problem:    With a wrapping line the cursor may not end up in the right place.
	    (Nazri Ramliy)
Solution:   Adjust n_extra for a <A HREF="intro.html#Tab">Tab</A> that wraps. (Christian Brabandt)
Files:	    src/screen.c

Patch 7.4.518
Problem:    Using status line height in width computations.
Solution:   Use one instead. (Hirohito Higashi)
Files:	    src/window.c

Patch 7.4.519 (after 7.4.497)
Problem:    Crash when using <A HREF="syntax.html#syntax">syntax</A> highlighting.
Solution:   When regprog is freed and replaced, store the result.
Files:	    src/buffer.c, src/regexp.c, src/syntax.c, src/spell.c,
	    src/ex_cmds2.c, src/fileio.c, src/proto/fileio.pro,
	    src/proto/regexp.pro, src/os_unix.c

Patch 7.4.520
Problem:    Sun PCK <A HREF="mbyte.html#locale">locale</A> is not recognized.
Solution:   Add PCK in the table. (Keiichi Oono)
Files:	    src/mbyte.c

Patch 7.4.521
Problem:    When using &quot;vep&quot; a <A HREF="motion.html#mark">mark</A> is moved to the next line. (Maxi Padulo,
	    Issue 283)
Solution:   Decrement the line number. (Christian Brabandt)
Files:	    src/ops.c

Patch 7.4.522
Problem:    Specifying wrong buffer size for GetLongPathName().
Solution:   Use the actual size. (Ken Takata)
Files:	    src/eval.c

Patch 7.4.523
Problem:    When the <A HREF="options.html#X11">X11</A> server is stopped and restarted, while Vim is kept in
	    the background, copy/paste no longer works. (Issue 203)
Solution:   Setup the <A HREF="gui.html#clipboard">clipboard</A> again. (Christian Brabandt)
Files:	    src/os_unix.c

Patch 7.4.524
Problem:    When using &quot;<A HREF="syntax.html#:ownsyntax">:ownsyntax</A>&quot; <A HREF="spell.html#spell">spell</A> checking is messed up. (Issue 78)
Solution:   Use the window-local option values. (Christian Brabandt)
Files:	    src/option.c, src/syntax.c

Patch 7.4.525
Problem:    <A HREF="builtin.html#map()">map()</A> leaks memory when there is an error in the <A HREF="eval.html#expression">expression</A>.
Solution:   Call clear_tv(). (Christian Brabandt)
Files:	    src/eval.c

Patch 7.4.526
Problem:    <A HREF="builtin.html#matchstr()">matchstr()</A> fails on long text. (Daniel Hahler)
Solution:   Return NFA_TOO_EXPENSIVE from regexec_nl(). (Christian Brabandt)
Files:	    src/regexp.c

Patch 7.4.527
Problem:    Still confusing <A HREF="pattern.html#regexp">regexp</A> failure and NFA_TOO_EXPENSIVE.
Solution:   <A HREF="pattern.html#NFA">NFA</A> changes equivalent of 7.4.526.
Files:	    src/regexp_nfa.c

Patch 7.4.528
Problem:    Crash when using <A HREF="builtin.html#matchadd()">matchadd()</A> (Yasuhiro Matsumoto)
Solution:   Copy the match regprog.
Files:	    src/screen.c

Patch 7.4.529
Problem:    No test for what 7.4.517 fixes.
Solution:   Adjust the tests for breakindent. (Christian Brabandt)
Files:	    src/testdir/test_breakindent.in, src/testdir/test_breakindent.ok

Patch 7.4.530
Problem:    Many commands take a <A HREF="intro.html#count">count</A> or range that is not using line
	    numbers.
Solution:   For each command specify what kind of <A HREF="intro.html#count">count</A> <A HREF="motion.html#it">it</A> uses.  For <A HREF="windows.html#windows">windows</A>,
	    <A HREF="windows.html#buffers">buffers</A> and arguments have &quot;<A HREF="motion.html#$">$</A>&quot; and &quot;<A HREF="repeat.html#.">.</A>&quot; have a relevant meaning.
	    (Marcin Szamotulski)
Files:	    runtime/doc/editing.txt, runtime/doc/tabpage.txt,
	    runtime/doc/windows.txt, src/Makefile, src/ex_cmds.h,
	    src/ex_docmd.c, src/testdir/Make_amiga.mak
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
	    src/testdir/Makefile, src/testdir/test_argument_count.in,
	    src/testdir/test_argument_count.ok,
	    src/testdir/test_close_count.in, src/testdir/test_close_count.ok,
	    src/window.c

Patch 7.4.531
Problem:    Comments about parsing an <A HREF="intro.html#Ex">Ex</A> command are wrong.
Solution:   Correct the step numbers.
Files:	    src/ex_docmd.c

Patch 7.4.532
Problem:    When using <A HREF="options.html#'incsearch'">'incsearch'</A> &quot;2/pattern/e&quot; highlights the first match.
Solution:   Move the code to set extra_col inside the loop for <A HREF="intro.html#count">count</A>.  (Ozaki
	    Kiichi)
Files:	    src/search.c

Patch 7.4.533
Problem:    &quot;<A HREF="print.html#:hardcopy">:hardcopy</A>&quot; leaks memory in <A HREF="change.html#case">case</A> of <A HREF="message.html#errors">errors</A>.
Solution:   Free memory in all code paths. (Christian Brabandt)
Files:	    src/hardcopy.c

Patch 7.4.534
Problem:    Warnings when compiling if_ruby.c.
Solution:   Avoid the warnings. (Ken Takata)
Files:	    src/if_ruby.c

Patch 7.4.535 (after 7.4.530)
Problem:    Can't build with tiny features.
Solution:   Add #ifdefs and skip a test.
Files:	    src/ex_docmd.c, src/testdir/test_argument_count.in

Patch 7.4.536
Problem:    Test 63 fails when using a black&amp;white <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Add attributes for a non-color <A HREF="terminal.html#terminal">terminal</A>. (Christian Brabandt)
Files:	    src/testdir/test63.in

Patch 7.4.537
Problem:    Value of <A HREF="eval.html#v:hlsearch">v:hlsearch</A> reflects an internal variable.
Solution:   Make the value reflect whether search highlighting is actually
	    displayed. (Christian Brabandt)
Files:	    runtime/doc/eval.txt, src/testdir/test101.in,
	    src/testdir/test101.ok, src/vim.h

Patch 7.4.538
Problem:    Tests fail with small features plus <A HREF="if_pyth.html#Python">Python</A>.
Solution:   Disallow weird combination of <A HREF="options.html#options">options</A>.  Do not set &quot;fdm&quot; when
	    <A HREF="fold.html#folding">folding</A> is disabled.
Files:	    src/option.c, src/ex_cmds.c, src/configure.in, src/auto/configure,
	    src/feature.h

Patch 7.4.539 (after 7.4.530)
Problem:    Crash when computing buffer <A HREF="intro.html#count">count</A>.  Problem with range for user
	    commands.  Line range wrong in <A HREF="visual.html#Visual">Visual</A> area.
Solution:   Avoid segfault in compute_buffer_local_count().  Check for
	    CMD_USER when checking type of range. (Marcin Szamotulski)
Files:	    runtime/doc/windows.txt, src/ex_docmd.c

Patch 7.4.540 (after 7.4.539)
Problem:    Cannot build with tiny and small features. (Taro Muraoka)
Solution:   Add #ifdef around CMD_USER.
Files:	    src/ex_docmd.c

Patch 7.4.541
Problem:    Crash when doing a range assign.
Solution:   Check for NULL pointer. (Yukihiro Nakadaira)
Files:	    src/eval.c, src/testdir/test55.in, src/testdir/test55.ok

Patch 7.4.542
Problem:    Using a range for <A HREF="windows.html#window">window</A> and buffer commands has a few problems.
	    Cannot specify the type of range for a user command.
Solution:   Add the -addr argument for user commands.  Fix problems. (Marcin
	    Szamotulski)
Files:	    src/testdir/test_command_count.in,
	    src/testdir/test_command_count.ok src/testdir/Make_amiga.mak
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
	    src/testdir/Makefile, runtime/doc/map.txt, src/Makefile,
	    src/ex_cmds.h, src/ex_docmd.c, src/ex_getln.c,
	    src/proto/ex_docmd.pro, src/vim.h,

Patch 7.4.543
Problem:    Since patch 7.4.232 &quot;1,3s/\n//&quot; joins two lines instead of three.
	    (Eliseo Martnez)  Issue 287
Solution:   Correct the line <A HREF="intro.html#count">count</A>. (Christian Brabandt)
	    Also set the last used search <A HREF="pattern.html#pattern">pattern</A>.
Files:	    src/ex_cmds.c, src/search.c, src/proto/search.pro

Patch 7.4.544
Problem:    Warnings for unused arguments when compiling with a combination of
	    features.
Solution:   Add &quot;UNUSED&quot;.
Files:	    src/if_cscope.c

Patch 7.4.545
Problem:    Highlighting for multi-line matches is not correct.
Solution:   Stop highlight at the end of the match. (Hirohito Higashi)
Files:	    src/screen.c

Patch 7.4.546
Problem:    Repeated use of vim_snprintf() with a number.
Solution:   Move these vim_snprintf() calls into a function.
Files:	    src/window.c

Patch 7.4.547
Problem:    Using &quot;vit&quot; does not select a <A HREF="mbyte.html#multibyte">multibyte</A> character at the end
	    correctly.
Solution:   Advance the cursor over the <A HREF="mbyte.html#multibyte">multibyte</A> character. (Christian
	    Brabandt)
Files:	    src/search.c

Patch 7.4.548
Problem:    Compilation fails with native version of MinGW-w64, because
	    <A HREF="motion.html#it">it</A> doesn't have x86_64-w64-mingw32-windres.exe.
Solution:   Use windres instead. (Ken Takata)
Files:	    src/Make_cyg_ming.mak

Patch 7.4.549
Problem:    Function name not recognized correctly when inside a function.
Solution:   Don't check for an alpha character. (Ozaki Kiichi)
Files:	    src/eval.c, src/testdir/test_nested_function.in,
	    src/testdir/test_nested_function.ok, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
	    src/testdir/Makefile

Patch 7.4.550
Problem:    curs_rows() function is always called with the second argument
	    <A HREF="vim9.html#false">false</A>.
Solution:   Remove the argument. (Christian Brabandt)
	    validate_botline_win() can then also be removed.
Files:	    src/move.c

Patch 7.4.551
Problem:    &quot;ygn&quot; may <A HREF="change.html#yank">yank</A> too much. (Fritzophrenic)  Issue 295.
Solution:   Check the width of the next match. (Christian Brabandt)
Files:	    src/search.c, src/testdir/test53.in, src/testdir/test53.ok

Patch 7.4.552
Problem:    Langmap applies to <A HREF="insert.html#Insert">Insert</A> mode <A HREF="eval.html#expression">expression</A> mappings.
Solution:   Check for <A HREF="insert.html#Insert">Insert</A> mode. (Daniel Hahler)
Files:	    src/getchar.c, src/testdir/test_mapping.in,
	    src/testdir/test_mapping.ok

Patch 7.4.553
Problem:    Various small issues.
Solution:   Fix those issues.
Files:	    src/ex_cmds.h, src/gui.h, src/message.c, src/testdir/test39.in,
	    src/proto/eval.pro, src/proto/misc1.pro, src/proto/ops.pro,
	    src/proto/screen.pro, src/proto/window.pro. src/os_unix.c,
	    src/Make_vms.mms, src/proto/os_vms.pro, src/INSTALL

Patch 7.4.554
Problem:    Missing part of patch 7.4.519.
Solution:   Copy back regprog after calling vim_regexec.
Files:	    src/quickfix.c

Patch 7.4.555
Problem:    test_close_count may fail for some combination of features.
Solution:   Require normal features.
Files:	    src/testdir/test_close_count.in

Patch 7.4.556
Problem:    Failed commands in <A HREF="if_pyth.html#Python">Python</A> interface not handled correctly.
Solution:   Restore <A HREF="windows.html#window">window</A> and buffer on failure.
Files:	    src/if_py_both.h

Patch 7.4.557
Problem:    One more small issue.
Solution:   Update function proto.
Files:	    src/proto/window.pro

Patch 7.4.558
Problem:    When the X server restarts Vim may get stuck.
Solution:   Destroy the application context and create <A HREF="motion.html#it">it</A> again.  (Issue 203)
Files:	    src/os_unix.c

Patch 7.4.559
Problem:    Appending a block in the middle of a <A HREF="intro.html#tab">tab</A> does not work correctly
	    when virtualedit is set.
Solution:   Decrement spaces and <A HREF="intro.html#count">count</A>, don't reset them. (James McCoy)
Files:	    src/ops.c, src/testdir/test39.in, src/testdir/test39.ok

Patch 7.4.560
Problem:    Memory leak using <A HREF="starting.html#:wviminfo">:wviminfo</A>. Issue 296.
Solution:   Free memory when needed. (idea by Christian Brabandt)
Files:	    src/ops.c

Patch 7.4.561
Problem:    <A HREF="intro.html#Ex">Ex</A> range handling is wrong for buffer-local user commands.
Solution:   Check for CMD_USER_BUF. (Marcin Szamotulski)
Files:	    src/ex_docmd.c, src/testdir/test_command_count.in,
	    src/testdir/test_command_count.ok

Patch 7.4.562
Problem:    Segfault with wide screen and error in <A HREF="options.html#'rulerformat'">'rulerformat'</A>. (Ingo Karkat)
Solution:   Check there is enough space. (Christian Brabandt)
Files:	    src/buffer.c, src/screen.c

Patch 7.4.563
Problem:    No test for <A HREF="change.html#replacing">replacing</A> on a <A HREF="intro.html#tab">tab</A> in Virtual replace mode.
Solution:   Add a test. (Elias Diem)
Files:	    src/testdir/test48.in, src/testdir/test48.ok

Patch 7.4.564
Problem:    FEAT_OSFILETYPE is used even though it's never defined.
Solution:   Remove the code. (Christian Brabandt)
Files:	    src/fileio.c

Patch 7.4.565
Problem:    Ranges for arguments, <A HREF="windows.html#buffers">buffers</A>, tabs, etc. are not checked to be
	    valid but limited to the maximum.  This can cause the wrong thing
	    to happen.
Solution:   Give an error for an invalid value. (Marcin Szamotulski)
	    Use <A HREF="windows.html#windows">windows</A> range for &quot;<A HREF="windows.html#:wincmd">:wincmd</A>&quot;.
Files:	    src/ex_docmd.c, src/ex_cmds.h, src/testdir/test62.in,
	    src/testdir/test_argument_count.in,
	    src/testdir/test_argument_count.ok,
	    src/testdir/test_close_count.in,
	    src/testdir/test_command_count.in,
	    src/testdir/test_command_count.ok

Patch 7.4.566
Problem:    <A HREF="editing.html#:argdo">:argdo</A>, <A HREF="windows.html#:bufdo">:bufdo</A>, <A HREF="windows.html#:windo">:windo</A> and <A HREF="tabpage.html#:tabdo">:tabdo</A> don't take a range.
Solution:   Support the range. (Marcin Szamotulski)
Files:	    runtime/doc/editing.txt, runtime/doc/tabpage.txt,
	    runtime/doc/windows.txt, src/ex_cmds.h, src/ex_cmds2.c,
	    src/testdir/test_command_count.in,
	    src/testdir/test_command_count.ok

Patch 7.4.567
Problem:    Non-ascii vertical separator characters are always redrawn.
Solution:   Compare only the one byte that's stored. (Thiago Padilha)
Files:	    src/screen.c

Patch 7.4.568
Problem:    Giving an error for &quot;:0wincmd w&quot; is a problem for some plugins.
Solution:   Allow the zero in the range. (Marcin Szamotulski)
Files:	    src/ex_docmd.c, src/testdir/test_command_count.ok

Patch 7.4.569 (after 7.4.468)
Problem:    Having <A HREF="pattern.html#CTRL-C">CTRL-C</A> interrupt or not does not check the mode of the
	    <A HREF="map.html#mapping">mapping</A>. (Ingo Karkat)
Solution:   Use a bitmask with the map mode. (Christian Brabandt)
Files:	    src/getchar.c, src/structs.h, src/testdir/test_mapping.in,
	    src/testdir/test_mapping.ok, src/ui.c, src/globals.h

Patch 7.4.570
Problem:    Building with dynamic library does not work for <A HREF="if_ruby.html#Ruby">Ruby</A> 2.2.0
Solution:   Change #ifdefs and #defines. (Ken Takata)
Files:	    src/if_ruby.c

Patch 7.4.571 (after 7.4.569)
Problem:    Can't build with tiny features. (Ike Devolder)
Solution:   Add #ifdef.
Files:	    src/getchar.c

Patch 7.4.572
Problem:    Address type of <A HREF="windows.html#:wincmd">:wincmd</A> depends on the argument.
Solution:   Check the argument.
Files:	    src/ex_docmd.c, src/window.c, src/proto/window.pro

Patch 7.4.573 (after 7.4.569)
Problem:    Mapping <A HREF="pattern.html#CTRL-C">CTRL-C</A> in <A HREF="visual.html#Visual">Visual</A> mode doesn't work. (Ingo Karkat)
Solution:   Call get_real_state() instead of using State directly.
Files:	    src/ui.c, src/testdir/test_mapping.in, src/testdir/test_mapping.ok

Patch 7.4.574
Problem:    No error for eval('$').
Solution:   Check for empty name. (Yasuhiro Matsumoto)
Files:	    src/eval.c

Patch 7.4.575
Problem:    <A HREF="mbyte.html#Unicode">Unicode</A> character properties are outdated.
Solution:   Update the tables with the latest version.
Files:	    src/mbyte.c

Patch 7.4.576
Problem:    Redrawing problem with <A HREF="options.html#'relativenumber'">'relativenumber'</A> and <A HREF="options.html#'linebreak'">'linebreak'</A>.
Solution:   Temporarily reset <A HREF="options.html#'linebreak'">'linebreak'</A> and restore <A HREF="motion.html#it">it</A> in more places.
	    (Christian Brabandt)
Files:	    src/normal.c

Patch 7.4.577
Problem:    Matching with a virtual column has a lot of overhead on very long
	    lines. (Issue 310)
Solution:   Bail out early if there can't be a match. (Christian Brabandt)
	    Also check for <A HREF="pattern.html#CTRL-C">CTRL-C</A> at every position.
Files:	    src/regexp_nfa.c

Patch 7.4.578
Problem:    Using <A HREF="builtin.html#getcurpos()">getcurpos()</A> after &quot;<A HREF="motion.html#$">$</A>&quot; in an empty line returns a negative
	    number.
Solution:   Don't add one when this would overflow. (Hirohito Higashi)
Files:	    src/eval.c

Patch 7.4.579
Problem:    Wrong cursor positioning when <A HREF="options.html#'linebreak'">'linebreak'</A> is set and lines wrap.
Solution:   Fix <A HREF="motion.html#it">it</A>. (Christian Brabandt)
Files:	    src/charset.c, src/screen.c

Patch 7.4.580
Problem:    &quot;:52wincmd v&quot; still gives an invalid range error. (Charles
	    Campbell)
Solution:   Skip over white space.
Files:	    src/ex_docmd.c

Patch 7.4.581
Problem:    Compiler warnings for uninitialized <A HREF="eval.html#variables">variables</A>. (John Little)
Solution:   Initialize the <A HREF="eval.html#variables">variables</A>.
Files:	    src/ops.c

Patch 7.4.582 (after 7.4.577)
Problem:    Can't match &quot;&#37;&gt;80v&quot; properly. (Axel Bender)
Solution:   Correctly handle &quot;<A HREF="change.html#&gt;">&gt;</A>&quot;. (Christian Brabandt)
Files:	    src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.4.583
Problem:    With tiny features test 16 may fail.
Solution:   Source small.vim. (Christian Brabandt)
Files:	    src/testdir/test16.in

Patch 7.4.584
Problem:    With tiny features test_command_count may fail.
Solution:   Source small.vim. (Christian Brabandt)
Files:	    src/testdir/test_command_count.in

Patch 7.4.585
Problem:    Range for <A HREF="windows.html#:bdelete">:bdelete</A> does not work. (Ronald Schild)
Solution:   Also allow unloaded <A HREF="windows.html#buffers">buffers</A>.
Files:	    src/ex_cmds.h, src/testdir/test_command_count.in,
	    src/testdir/test_command_count.ok

Patch 7.4.586
Problem:    Parallel building of the documentation html files is not reliable.
Solution:   Remove a cyclic dependency. (Reiner Herrmann)
Files:	    runtime/doc/Makefile

Patch 7.4.587
Problem:    Conceal does not work properly with <A HREF="options.html#'linebreak'">'linebreak'</A>. (cs86661)
Solution:   Save and restore boguscols. (Christian Brabandt)
Files:	    src/screen.c, src/testdir/test_listlbr_utf8.in,
	    src/testdir/test_listlbr_utf8.ok

Patch 7.4.588
Problem:    &quot;:0argedit foo&quot; puts the new argument in the second place instead
	    of the first.
Solution:   Adjust the range type. (Ingo Karkat)
Files:	    src/ex_cmds.h, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
	    src/testdir/Makefile, src/testdir/test_argument_0count.in,
	    src/testdir/test_argument_0count.ok

Patch 7.4.589
Problem:    In the <A HREF="os_win32.html#MS-Windows">MS-Windows</A> console Vim can't handle <A HREF="options.html#greek">greek</A> characters when
	    encoding is <A HREF="mbyte.html#utf-8">utf-8</A>.
Solution:   Escape K_NUL. (Yasuhiro Matsumoto)
Files:	    src/os_win32.c

Patch 7.4.590
Problem:    Using ctrl_x_mode <A HREF="motion.html#as">as</A> if <A HREF="motion.html#it">it</A> contains flags.
Solution:   Don't use AND with CTRL_X_OMNI. (Hirohito Higashi)
Files:	    src/edit.c

Patch 7.4.591 (after 7.4.587)
Problem:    test_listlbr_utf8 fails when the <A HREF="syntax.html#conceal">conceal</A> feature is not available.
Solution:   Check for the <A HREF="syntax.html#conceal">conceal</A> feature. (Kazunobu Kuriyama)
Files:	    src/testdir/test_listlbr_utf8.in

Patch 7.4.592
Problem:    When doing &quot;<A HREF="editing.html#:e">:e</A> foobar&quot; when already editing &quot;foobar&quot; and <A HREF="options.html#'buftype'">'buftype'</A>
	    is &quot;nofile&quot; the buffer is cleared. (Xavier de Gaye)
Solution:   Do no clear the buffer.
Files:	    src/ex_cmds.c

Patch 7.4.593
Problem:    Crash when searching for &quot;x\{0,90000}&quot;. (Dominique Pelle)
Solution:   Bail out from the <A HREF="pattern.html#NFA">NFA</A> engine when the max limit is much higher
	    than the min limit.
Files:	    src/regexp_nfa.c, src/regexp.c, src/vim.h

Patch 7.4.594
Problem:    Using a block delete while <A HREF="options.html#'breakindent'">'breakindent'</A> is set does not work
	    properly.
Solution:   Use &quot;line&quot; instead of &quot;prev_pend&quot; <A HREF="motion.html#as">as</A> the first argument to
	    lbr_chartabsize_adv().  (Hirohito Higashi)
Files:	    src/ops.c, src/testdir/test_breakindent.in,
	    src/testdir/test_breakindent.ok

Patch 7.4.595
Problem:    The test_command_count test fails when using <A HREF="mbyte.html#Japanese">Japanese</A>.
Solution:   Force the language to C. (Hirohito Higashi)
Files:	    src/testdir/test_command_count.in

Patch 7.4.596 (after 7.4.592)
Problem:    Tiny build doesn't compile.  (Ike Devolder)
Solution:   Add #ifdef.
Files:	    src/ex_cmds.c

Patch 7.4.597
Problem:    Cannot change the result of <A HREF="builtin.html#systemlist()">systemlist()</A>.
Solution:   Initialize v_lock. (Yukihiro Nakadaira)
Files:	    src/eval.c

Patch 7.4.598
Problem:    &quot;<A HREF="tabpage.html#:tabdo">:tabdo</A> windo echo 'hi&#39;&#34;' causes &quot;* <A HREF="sponsor.html#register">register</A> not to be changed.
	    (Salman Halim)
Solution:   Change how clip_did_set_selection is used and add
	    clipboard_needs_update and global_change_count.  (Christian
	    Brabandt)
Files:	    src/main.c, src/ui.c, src/testdir/test_eval.in,
	    src/testdir/test_eval.ok

Patch 7.4.599
Problem:    Out-of-memory error.
Solution:   Avoid trying to allocate a negative amount of memory, use size_t
	    instead of int. (Dominique Pelle)
Files:	    src/regexp_nfa.c

Patch 7.4.600
Problem:    Memory wasted in struct because of aligning.
Solution:   Split pos in lnum and col. (Dominique Pelle)
Files:	    src/regexp_nfa.c

Patch 7.4.601
Problem:    It is not possible to have <A HREF="builtin.html#feedkeys()">feedkeys()</A> insert characters.
Solution:   Add the '<A HREF="insert.html#i">i</A>' flag.
Files:	    src/eval.c, runtime/doc/eval.txt

Patch 7.4.602
Problem:    &quot;<A HREF="options.html#:set">:set</A>&quot; does not accept hex numbers <A HREF="motion.html#as">as</A> documented.
Solution:   Use vim_str2nr(). (ZyX)
Files:	    src/option.c, runtime/doc/options.txt

Patch 7.4.603
Problem:    <A HREF="options.html#'foldcolumn'">'foldcolumn'</A> may be set such that <A HREF="motion.html#it">it</A> fills the whole <A HREF="windows.html#window">window</A>, not
	    leaving space for text.
Solution:   Reduce the foldcolumn width when there is not sufficient room.
	    (idea by Christian Brabandt)
Files:	    src/screen.c

Patch 7.4.604
Problem:    Running tests changes <A HREF="starting.html#viminfo">viminfo</A>.
Solution:   Disable <A HREF="starting.html#viminfo">viminfo</A>.
Files:	    src/testdir/test_breakindent.in

Patch 7.4.605
Problem:    The # <A HREF="sponsor.html#register">register</A> is not writable, <A HREF="motion.html#it">it</A> cannot be restored after
	    jumping around.
Solution:   Make the # <A HREF="sponsor.html#register">register</A> writable. (Marcin Szamotulski)
Files:	    runtime/doc/change.txt, src/ops.c, src/buffer.c, src/globals.h

Patch 7.4.606
Problem:    May crash when using a small <A HREF="windows.html#window">window</A>.
Solution:   Avoid dividing by zero. (Christian Brabandt)
Files:	    src/normal.c

Patch 7.4.607 (after 7.4.598)
Problem:    Compiler warnings for unused <A HREF="eval.html#variables">variables</A>.
Solution:   Move them inside #ifdef. (Kazunobu Kuriyama)
Files:	    src/ui.c

Patch 7.4.608 (after 7.4.598)
Problem:    test_eval fails when the <A HREF="gui.html#clipboard">clipboard</A> feature is missing.
Solution:   Skip part of the test. Reduce the text used.
Files:	    src/testdir/test_eval.in, src/testdir/test_eval.ok

Patch 7.4.609
Problem:    For complicated <A HREF="eval.html#list">list</A> and <A HREF="eval.html#dict">dict</A> use the garbage collector can run
	    out of stack space.
Solution:   Use a stack of dicts and lists to be marked, thus making <A HREF="motion.html#it">it</A>
	    iterative instead of recursive. (Ben Fritz)
Files:	    src/eval.c, src/if_lua.c, src/if_py_both.h, src/if_python.c,
	    src/if_python3.c, src/proto/eval.pro, src/proto/if_lua.pro,
	    src/proto/if_python.pro, src/proto/if_python3.pro, src/structs.h

Patch 7.4.610
Problem:    Some function headers may be missing from generated .pro files.
Solution:   Add PROTO to the #ifdef.
Files:	    src/option.c, src/syntax.c

Patch 7.4.611 (after 7.4.609)
Problem:    <A HREF="autocmd.html#Syntax">Syntax</A> error.
Solution:   Change statement to return.
Files:	    src/if_python3.c

Patch 7.4.612
Problem:    test_eval fails on <A HREF="os_mac.html#Mac">Mac</A>.
Solution:   Use the &#42; <A HREF="sponsor.html#register">register</A> instead of the + <A HREF="sponsor.html#register">register</A>. (Jun Takimoto)
Files:	    src/testdir/test_eval.in, src/testdir/test_eval.ok

Patch 7.4.613
Problem:    The <A HREF="pattern.html#NFA">NFA</A> engine does not implement the <A HREF="options.html#'redrawtime'">'redrawtime'</A> time limit.
Solution:   Implement the time limit.
Files:	    src/regexp_nfa.c

Patch 7.4.614
Problem:    There is no test for what patch 7.4.601 fixes.
Solution:   Add a test. (Christian Brabandt)
Files:	    src/testdir/test_mapping.in, src/testdir/test_mapping.ok

Patch 7.4.615
Problem:    Vim hangs when freeing a lot of <A HREF="index.html#objects">objects</A>.
Solution:   Do not go back to the start of the <A HREF="eval.html#list">list</A> every time.  (Yasuhiro
	    Matsumoto and Ariya Mizutani)
Files:	    src/eval.c

Patch 7.4.616
Problem:    Cannot insert a <A HREF="intro.html#tab">tab</A> in front of a block.
Solution:   Correctly compute aop-&gt;start. (Christian Brabandt)
Files:	    src/ops.c, src/testdir/test39.in, src/testdir/test39.ok

Patch 7.4.617
Problem:    Wrong &quot;<A HREF="editing.html#:argdo">:argdo</A>&quot; range does not cause an error.
Solution:   Reset &quot;cmd&quot; to NULL. (Marcin Szamotulski, Ingo Karkat)
Files:	    src/ex_docmd.c

Patch 7.4.618 (after 7.4.609)
Problem:    luaV_setref() is missing a return statement. (Ozaki Kiichi)
Solution:   Put the return statement back.
Files:	    src/if_lua.c

Patch 7.4.619 (after 7.4.618)
Problem:    luaV_setref() not returning the correct value.
Solution:   Return one.
Files:	    src/if_lua.c

Patch 7.4.620
Problem:    Compiler warning for uninitialized variable. (Tony Mechelynck)
Solution:   Initialize &quot;did_free&quot;. (Ben Fritz)
Files:	    src/eval.c

Patch 7.4.621 (after 7.4.619)
Problem:    Returning 1 in the wrong function. (Raymond Ko)
Solution:   Return 1 in the right function (hopefully).
Files:	    src/if_lua.c

Patch 7.4.622
Problem:    Compiler warning for unused argument.
Solution:   Add UNUSED.
Files:	    src/regexp_nfa.c

Patch 7.4.623
Problem:    Crash with <A HREF="pattern.html#pattern">pattern</A>: \(\)\{80000}  (Dominique Pelle)
Solution:   When the max limit is large fall back to the old engine.
Files:	    src/regexp_nfa.c

Patch 7.4.624
Problem:    May leak memory or crash when vim_realloc() returns NULL.
Solution:   Handle a NULL value properly. (Mike Williams)
Files:	    src/if_cscope.c, src/memline.c, src/misc1.c, src/netbeans.c

Patch 7.4.625
Problem:    Possible NULL pointer dereference.
Solution:   Check for NULL before using <A HREF="motion.html#it">it</A>. (Mike Williams)
Files:	    src/if_py_both.h

Patch 7.4.626
Problem:    MSVC with W4 gives useless warnings.
Solution:   Disable more warnings. (Mike Williams)
Files:	    src/vim.h

Patch 7.4.627
Problem:    The last screen cell is not updated.
Solution:   Respect the &quot;tn&quot; <A HREF="term.html#termcap">termcap</A> feature. (Hayaki Saito)
Files:	    runtime/doc/term.txt, src/option.c, src/screen.c, src/term.c,
	    src/term.h

Patch 7.4.628
Problem:    Compiler warning for variable might be clobbered by longjmp.
Solution:   Add volatile. (Michael Jarvis)
Files:	    src/main.c

Patch 7.4.629
Problem:    Coverity warning for Out-of-bounds read.
Solution:   Increase MAXWLEN to 254. (Eliseo Martnez)
Files:	    src/spell.c

Patch 7.4.630
Problem:    When using <A HREF="insert.html#Insert">Insert</A> mode completion combined with <A HREF="autocmd.html#autocommands">autocommands</A> the
	    <A HREF="undo.html#redo">redo</A> command may not work.
Solution:   Do not save the <A HREF="undo.html#redo">redo</A> buffer when executing <A HREF="autocmd.html#autocommands">autocommands</A>. (Yasuhiro
	    Matsumoto)
Files:	    src/fileio.c

Patch 7.4.631
Problem:    The default <A HREF="syntax.html#conceal">conceal</A> character is documented to be a space but it's
	    initially a dash. (Christian Brabandt)
Solution:   Make the initial value a space.
Files:	    src/globals.h

Patch 7.4.632 (after 7.4.592)
Problem:    7.4.592 breaks the <A HREF="pi_netrw.html#netrw">netrw</A> <A HREF="usr_05.html#plugin">plugin</A>, because the <A HREF="autocmd.html#autocommands">autocommands</A> are
	    skipped.
Solution:   Roll back the change.
Files:	    src/ex_cmds.c

Patch 7.4.633
Problem:    After 7.4.630 the problem persists.
Solution:   Also skip <A HREF="undo.html#redo">redo</A> when calling a user function.
Files:	    src/eval.c

Patch 7.4.634
Problem:    Marks are not restored after <A HREF="undo.html#redo">redo</A> + <A HREF="undo.html#undo">undo</A>.
Solution:   Fix the way marks are restored. (Olaf Dabrunz)
Files:	    src/undo.c, src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile,
	    src/testdir/test_marks.in, src/testdir/test_marks.ok

Patch 7.4.635
Problem:    If no NL or CR is found in the first block of a file then the
	    <A HREF="options.html#'fileformat'">'fileformat'</A> may be set to &quot;<A HREF="os_mac.html#mac">mac</A>&quot;. (Issue 77)
Solution:   Check if a CR was found. (eswald)
Files:	    src/fileio.c

Patch 7.4.636
Problem:    A search with end offset gets stuck at end of file. (Gary Johnson)
Solution:   When a search doesn't move the cursor repeat <A HREF="motion.html#it">it</A> with a higher
	    <A HREF="intro.html#count">count</A>. (Christian Brabandt)
Files:	    src/normal.c, src/testdir/test44.in, src/testdir/test44.ok

Patch 7.4.637
Problem:    Incorrectly read the number of buffer for which an <A HREF="autocmd.html#autocommand">autocommand</A>
	    should be registered.
Solution:   Reverse check for &quot;<A HREF="autocmd.html#&lt;buffer=abuf&gt;">&lt;buffer=abuf&gt;</A>&quot;. (Lech Lorens)
Files:	    src/fileio.c

Patch 7.4.638
Problem:    Can't build with <A HREF="if_lua.html#Lua">Lua</A> 5.3 on Windows.
Solution:   use luaL_optinteger() instead of LuaL_optlong(). (Ken Takata)
Files:	    src/if_lua.c

Patch 7.4.639
Problem:    Combination of linebreak and <A HREF="syntax.html#conceal">conceal</A> doesn't work well.
Solution:   Fix the display problems. (Christian Brabandt)
Files:	    src/screen.c, src/testdir/test88.in, src/testdir/test88.ok,
	    src/testdir/test_listlbr_utf8.in, src/testdir/test_listlbr_utf8.ok

Patch 7.4.640
Problem:    After <A HREF="change.html#deleting">deleting</A> characters in <A HREF="insert.html#Insert">Insert</A> mode such that lines are
	    joined <A HREF="undo.html#undo">undo</A> does not work properly. (issue 324)
Solution:   Use Insstart instead of Insstart_orig. (Christian Brabandt)
Files:	    src/edit.c

Patch 7.4.641
Problem:    The tabline menu was using &quot;:999tabnew&quot; which is now invalid.
Solution:   Use &quot;:$tabnew&quot; instead. (Florian Degner)
Files:	    src/normal.c

Patch 7.4.642
Problem:    When using &quot;<A HREF="editing.html#gf">gf</A>&quot; escaped spaces are not handled.
Solution:   Recognize escaped spaces.
Files:	    src/vim.h, src/window.c, src/misc2.c

Patch 7.4.643
Problem:    Using the default file format for <A HREF="os_mac.html#Mac">Mac</A> files. (Issue 77)
Solution:   Reset the try_mac counter in the right place. (Oswald)
Files:	    src/fileio.c, src/testdir/test30.in, src/testdir/test30.ok

Patch 7.4.644
Problem:    Stratus VOS doesn't have sync().
Solution:   Use fflush(). (Karli Aurelia)
Files:	    src/memfile.c

Patch 7.4.645
Problem:    When splitting the <A HREF="windows.html#window">window</A> in a <A HREF="autocmd.html#BufAdd">BufAdd</A> <A HREF="autocmd.html#autocommand">autocommand</A> while still in
	    the first, empty buffer the <A HREF="windows.html#window">window</A> <A HREF="intro.html#count">count</A> is wrong.
Solution:   Do not reset b_nwindows to zero and don't increment <A HREF="motion.html#it">it</A>.
Files:	    src/buffer.c, src/ex_cmds.c

Patch 7.4.646
Problem:    &quot;<A HREF="windows.html#:bufdo">:bufdo</A>&quot; may start at a deleted buffer.
Solution:   Find the first not deleted buffer. (Shane Harper)
Files:	    src/ex_cmds2.c, src/testdir/test_command_count.in,
	    src/testdir/test_command_count.ok

Patch 7.4.647
Problem:    After running the tests on <A HREF="os_win32.html#MS-Windows">MS-Windows</A> many files differ from their
	    originals <A HREF="motion.html#as">as</A> they were checked out.
Solution:   Use a temp directory for executing the tests. (Ken Takata, Taro
	    Muraoka)
Files:	    src/testdir/Make_dos.mak

Patch 7.4.648 (after 7.4.647)
Problem:    Tests broken on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Delete wrong copy line. (Ken Takata)
Files:	    src/testdir/Make_dos.mak

Patch 7.4.649
Problem:    Compiler complains about ignoring return value of fwrite().
	    (Michael Jarvis)
Solution:   Add (void).
Files:	    src/misc2.c

Patch 7.4.650
Problem:    Configure check may fail because the <A HREF="change.html#dl">dl</A> library is not used.
Solution:   Put &quot;-ldl&quot; in LIBS rather than LDFLAGS. (Ozaki Kiichi)
Files:	    src/configure.in, src/auto/configure

Patch 7.4.651 (after 7.4.582)
Problem:    Can't match &quot;&#37;&gt;80v&quot; properly for <A HREF="mbyte.html#multibyte">multibyte</A> characters.
Solution:   Multiply the character number by the maximum number of bytes in a
	    character. (Yasuhiro Matsumoto)
Files:	    src/regexp_nfa.c

Patch 7.4.652
Problem:    Xxd lacks a few features.
Solution:   Use 8 characters for the file position.  Add the <A HREF="starting.html#-e">-e</A> and <A HREF="starting.html#-o">-o</A>
	    arguments. (Vadim Vygonets)
Files:	    src/xxd/xxd.c, runtime/doc/xxd.1

Patch 7.4.653
Problem:    <A HREF="insert.html#Insert">Insert</A> mode completion with <A HREF="builtin.html#complete()">complete()</A> may have <A HREF="various.html#CTRL-L">CTRL-L</A> work like
	    <A HREF="motion.html#CTRL-P">CTRL-P</A>.
Solution:   Handle completion with <A HREF="builtin.html#complete()">complete()</A> differently. (Yasuhiro
	    Matsumoto, Christian Brabandt, Hirohito Higashi)
Files:	    src/edit.c

Patch 7.4.654
Problem:    <A HREF="builtin.html#glob()">glob()</A> and <A HREF="builtin.html#globpath()">globpath()</A> cannot include links to non-existing files.
	    (Charles Campbell)
Solution:   Add an argument to include all links with <A HREF="builtin.html#glob()">glob()</A>. (James McCoy)
	    Also for <A HREF="builtin.html#globpath()">globpath()</A>.
Files:	    src/vim.h, src/eval.c, src/ex_getln.c

Patch 7.4.655
Problem:    Text deleted by &quot;dit&quot; depends on indent of closing <A HREF="tagsrch.html#tag">tag</A>.
	    (Jan Parthey)
Solution:   Do not adjust oap-&gt;end in do_pending_operator(). (Christian
	    Brabandt)
Files:	    src/normal.c, src/search.c, src/testdir/test53.in,
	    src/testdir/test53.ok

Patch 7.4.656 (after 7.4.654)
Problem:    Missing changes for <A HREF="builtin.html#glob()">glob()</A> in one file.
Solution:   Add the missing changes.
Files:	    src/misc1.c

Patch 7.4.657 (after 7.4.656)
Problem:    Compiler warnings for pointer mismatch.
Solution:   Add a typecast. (John Marriott)
Files:	    src/misc1.c

Patch 7.4.658
Problem:    <A HREF="options.html#'formatexpr'">'formatexpr'</A> is evaluated too often.
Solution:   Only invoke <A HREF="motion.html#it">it</A> when beyond the <A HREF="options.html#'textwidth'">'textwidth'</A> column, <A HREF="motion.html#as">as</A> <A HREF="motion.html#it">it</A> is
	    documented. (James McCoy)
Files:	    src/edit.c

Patch 7.4.659
Problem:    When <A HREF="options.html#'ruler'">'ruler'</A> is set the preferred column is reset. (Issue 339)
Solution:   Don't set curswant when redrawing the status lines.
Files:	    src/option.c

Patch 7.4.660
Problem:    Using freed memory when <A HREF="options.html#g:colors_name">g:colors_name</A> is changed in the colors
	    <A HREF="usr_41.html#script">script</A>. (oni-link)
Solution:   Make a copy of the variable value.
Files:	    src/syntax.c

Patch 7.4.661
Problem:    Using &quot;<A HREF="motion.html#0">0</A> CTRL-D&quot; in <A HREF="insert.html#Insert">Insert</A> mode may have <A HREF="autocmd.html#CursorHoldI">CursorHoldI</A> interfere.
	    (Gary Johnson)
Solution:   Don't store K_CURSORHOLD <A HREF="motion.html#as">as</A> the last character. (Christian
	    Brabandt)
Files:	    src/edit.c

Patch 7.4.662
Problem:    When '<A HREF="motion.html#M">M</A>' is in the <A HREF="options.html#'cpo'">'cpo'</A> option then selecting a text object in
	    parentheses does not work correctly.
Solution:   Keep '<A HREF="motion.html#M">M</A>' in <A HREF="options.html#'cpo'">'cpo'</A> when finding a match. (Hirohito Higashi)
Files:	    src/search.c, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
	    src/testdir/Makefile, src/testdir/test_textobjects.in,
	    src/testdir/test_textobjects.ok

Patch 7.4.663
Problem:    When using <A HREF="netbeans.html#netbeans">netbeans</A> a buffer is not found in another <A HREF="intro.html#tab">tab</A>.
Solution:   When <A HREF="options.html#'switchbuf'">'switchbuf'</A> is set to &quot;usetab&quot; then switch to another <A HREF="intro.html#tab">tab</A>
	    when possible. (Xavier de Gaye)
Files:	    src/netbeans.c

Patch 7.4.664
Problem:    When <A HREF="options.html#'compatible'">'compatible'</A> is reset <A HREF="options.html#'numberwidth'">'numberwidth'</A> is set to 4, but the
	    effect doesn't show until a change is made.
Solution:   Check if <A HREF="options.html#'numberwidth'">'numberwidth'</A> changed. (Christian Brabandt)
Files:	    src/screen.c, src/structs.h

Patch 7.4.665
Problem:    <A HREF="options.html#'linebreak'">'linebreak'</A> does not work properly with <A HREF="mbyte.html#multibyte">multibyte</A> characters.
Solution:   Compute the pointer offset with mb_head_off().  (Yasuhiro
	    Matsumoto)
Files:	    src/screen.c

Patch 7.4.666
Problem:    There is a chance that Vim may lock up.
Solution:   Handle <A HREF="builtin.html#timer">timer</A> events differently. (Aaron Burrow)
Files:	    src/os_unix.c

Patch 7.4.667
Problem:    <A HREF="options.html#'colorcolumn'">'colorcolumn'</A> isn't drawn in a closed fold while <A HREF="options.html#'cursorcolumn'">'cursorcolumn'</A>
	    is. (Carlos Pita)
Solution:   Make <A HREF="motion.html#it">it</A> consistent. (Christian Brabandt)
Files:	    src/screen.c

Patch 7.4.668
Problem:    Can't use a glob <A HREF="pattern.html#pattern">pattern</A> <A HREF="motion.html#as">as</A> a <A HREF="pattern.html#regexp">regexp</A> <A HREF="pattern.html#pattern">pattern</A>.
Solution:   Add <A HREF="builtin.html#glob2regpat()">glob2regpat()</A>. (Christian Brabandt)
Files:	    src/eval.c, runtime/doc/eval.txt

Patch 7.4.669
Problem:    When <A HREF="netbeans.html#netbeans">netbeans</A> is active the sign column always shows up.
Solution:   Only show the sign column once a sign has been added. (Xavier de
	    Gaye)
Files:	    src/buffer.c, src/edit.c, src/move.c, src/netbeans.c,
	    src/screen.c, src/structs.h

Patch 7.4.670
Problem:    Using <A HREF="options.html#'cindent'">'cindent'</A> for Javascript is <A HREF="various.html#less">less</A> than perfect.
Solution:   Improve indenting of continuation lines. (Hirohito Higashi)
Files:	    src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 7.4.671 (after 7.4.665)
Problem:    Warning for shadowing a variable.
Solution:   Rename off to mb_off. (Kazunobu Kuriyama)
Files:	    src/screen.c

Patch 7.4.672
Problem:    When completing a shell command, directories in the current
	    directory are not listed.
Solution:   When &quot;<A HREF="repeat.html#.">.</A>&quot; is not in $PATH also look in the current directory for
	    directories.
Files:	    src/ex_getln.c, src/vim.h, src/misc1.c, src/eval.c,
	    src/os_amiga.c, src/os_msdos.c, src/os_unix.c, src/os_vms.c,
	    src/proto/os_amiga.pro, src/proto/os_msdos.pro,
	    src/proto/os_unix.pro, src/proto/os_win32.pro

Patch 7.4.673
Problem:    The first <A HREF="syntax.html#syntax">syntax</A> entry gets sequence number zero, which doesn't
	    work. (Clinton McKay)
Solution:   Start at number one. (Bjorn Linse)
Files:	    src/syntax.c

Patch 7.4.674 (after 7.4.672)
Problem:    Missing changes in one file.
Solution:   Also change the <A HREF="os_win32.html#win32">win32</A> file.
Files:	    src/os_win32.c

Patch 7.4.675
Problem:    When a <A HREF="autocmd.html#FileReadPost">FileReadPost</A> <A HREF="autocmd.html#autocommand">autocommand</A> moves the cursor inside a line <A HREF="motion.html#it">it</A>
	    gets moved back.
Solution:   When checking whether an <A HREF="autocmd.html#autocommand">autocommand</A> moved the cursor store the
	    column <A HREF="motion.html#as">as</A> well. (Christian Brabandt)
Files:	    src/ex_cmds.c

Patch 7.4.676
Problem:    On <A HREF="os_mac.html#Mac">Mac</A>, when not using the default <A HREF="if_pyth.html#Python">Python</A> framework configure
	    doesn't <A HREF="diff.html#do">do</A> the right thing.
Solution:   Use a linker search path. (Kazunobu Kuriyama)
Files:	    src/configure.in, src/auto/configure

Patch 7.4.677 (after 7.4.676)
Problem:    Configure fails when specifying a python-config-dir. (Lcd)
Solution:   Check if PYTHONFRAMEWORKPREFIX is set.
Files:	    src/configure.in, src/auto/configure

Patch 7.4.678
Problem:    When using <A HREF="remote.html#--remote">--remote</A> the directory may end up being wrong.
Solution:   Use localdir() to find out what to <A HREF="diff.html#do">do</A>. (Xaizek)
Files:	    src/main.c

Patch 7.4.679
Problem:    Color values greater than 255 cause problems on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Truncate to 255 colors. (Yasuhiro Matsumoto)
Files:	    src/os_win32.c

Patch 7.4.680
Problem:    <A HREF="index.html#CTRL-W">CTRL-W</A> in <A HREF="insert.html#Insert">Insert</A> mode does not work well for <A HREF="mbyte.html#multibyte">multibyte</A>
	    characters.
Solution:   Use mb_get_class(). (Yasuhiro Matsumoto)
Files:	    src/edit.c, src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile,
	    src/testdir/test_erasebackword.in,
	    src/testdir/test_erasebackword.ok,

Patch 7.4.681
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: When Vim is minimized the <A HREF="windows.html#window">window</A> height is computed
	    incorrectly.
Solution:   When minimized use the previously computed size. (Ingo Karkat)
Files:	    src/gui_w32.c

Patch 7.4.682
Problem:    The search highlighting and match highlighting replaces the
	    cursorline highlighting, this doesn't look good.
Solution:   Combine the highlighting. (Yasuhiro Matsumoto)
Files:	    src/screen.c

Patch 7.4.683
Problem:    Typo in the <A HREF="usr_01.html#vimtutor">vimtutor</A> command.
Solution:   Fix the typo. (Corey Farwell, github pull 349)
Files:	    vimtutor.com

Patch 7.4.684
Problem:    When starting several Vim instances in <A HREF="diff.html#diff">diff</A> mode, the temp files
	    used may not be unique. (Issue 353)
Solution:   Add an argument to vim_tempname() to keep the file.
Files:	    src/diff.c, src/eval.c, src/ex_cmds.c, src/fileio.c,
	    src/hardcopy.c, src/proto/fileio.pro, src/if_cscope.c,
	    src/memline.c, src/misc1.c, src/os_unix.c, src/quickfix.c,
	    src/spell.c

Patch 7.4.685
Problem:    When there are illegal <A HREF="mbyte.html#utf-8">utf-8</A> characters the old <A HREF="pattern.html#regexp">regexp</A> engine may
	    go past the end of a <A HREF="eval.html#string">string</A>.
Solution:   Only advance to the end of the <A HREF="eval.html#string">string</A>. (Dominique Pelle)
Files:	    src/regexp.c

Patch 7.4.686
Problem:    &quot;<A HREF="fold.html#zr">zr</A>&quot; and &quot;<A HREF="fold.html#zm">zm</A>&quot; <A HREF="diff.html#do">do</A> not take a <A HREF="intro.html#count">count</A>.
Solution:   Implement the <A HREF="intro.html#count">count</A>, restrict the fold level to the maximum
	    nesting depth.  (Marcin Szamotulski)
Files:	    runtime/doc/fold.txt, src/normal.c

Patch 7.4.687
Problem:    There is no way to use a different in <A HREF="insert.html#Replace">Replace</A> mode for a <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Add <A HREF="term.html#t_SR">t_SR</A>. (Omar Sandoval)
Files:	    runtime/doc/options.txt, runtime/doc/term.txt,
	    runtime/syntax/vim.vim, src/option.c, src/term.c, src/term.h

Patch 7.4.688
Problem:    When &quot;<A HREF="motion.html#$">$</A>&quot; is in <A HREF="options.html#'cpo'">'cpo'</A> the <A HREF="popup.html#popup">popup</A> menu isn't undrawn correctly.
	    (Issue 166)
Solution:   When using the <A HREF="popup.html#popup">popup</A> menu remove the &quot;<A HREF="motion.html#$">$</A>&quot;.
Files:	    src/edit.c

Patch 7.4.689
Problem:    On <A HREF="os_win32.html#MS-Windows">MS-Windows</A>, when <A HREF="options.html#'autochdir'">'autochdir'</A> is set, <A HREF="diff.html#diff">diff</A> mode with files in
	    different directories does not work. (Axel Bender)
Solution:   Remember the current directory and use <A HREF="motion.html#it">it</A> where needed. (Christian
	    Brabandt)
Files:	    src/main.c

Patch 7.4.690
Problem:    Memory access <A HREF="message.html#errors">errors</A> when <A HREF="change.html#changing">changing</A> indent in <A HREF="intro.html#Ex">Ex</A> mode. Also missing
	    redraw when using <A HREF="scroll.html#CTRL-U">CTRL-U</A>. (Knil Ino)
Solution:   Update pointers after calling ga_grow().
Files:	    src/ex_getln.c

Patch 7.4.691 (after 7.4.689)
Problem:    Can't build with <A HREF="if_mzsch.html#MzScheme">MzScheme</A>.
Solution:   Change &quot;cwd&quot; into the global variable &quot;start_dir&quot;.
Files:	    src/main.c

Patch 7.4.692
Problem:    Defining SOLARIS for no good reason. (Danek Duvall)
Solution:   Remove <A HREF="motion.html#it">it</A>.
Files:	    src/os_unix.h

Patch 7.4.693
Problem:    <A HREF="starting.html#Session">Session</A> file is not correct when there are multiple <A HREF="intro.html#tab">tab</A> pages.
Solution:   Reset the current <A HREF="windows.html#window">window</A> number for each <A HREF="intro.html#tab">tab</A> page. (Jacob Niehus)
Files:      src/ex_docmd.c

Patch 7.4.694
Problem:    Running tests changes the .viminfo file.
Solution:   Disable <A HREF="starting.html#viminfo">viminfo</A> in the text <A HREF="index.html#objects">objects</A> test.
Files:      src/testdir/test_textobjects.in

Patch 7.4.695
Problem:    Out-of-bounds read, detected by Coverity.
Solution:   Remember the value of cmap for the first matching encoding.  Reset
            cmap to that value if first matching encoding is going to be used.
            (Eliseo Martnez)
Files:      src/hardcopy.c

Patch 7.4.696
Problem:    Not freeing memory when encountering an error.
Solution:   Free the stack before returning. (Eliseo Martnez)
Files:      src/regexp_nfa.c

Patch 7.4.697
Problem:    The filename used for &quot;<A HREF="repeat.html#:profile">:profile</A>&quot; must be given literally.
Solution:   Expand &quot;<A HREF="change.html#~">~</A>&quot; and environment <A HREF="eval.html#variables">variables</A>. (Marco Hinz)
Files:      src/ex_cmds2.c

Patch 7.4.698
Problem:    Various problems with locked and fixed lists and dictionaries.
Solution:   Disallow <A HREF="change.html#changing">changing</A> locked items, fix a crash, add tests. (Olaf
            Dabrunz)
Files:      src/structs.h, src/eval.c, src/testdir/test55.in,
            src/testdir/test55.ok

Patch 7.4.699
Problem:    <A HREF="message.html#E315">E315</A> when trying to delete a fold. (Yutao Yuan)
Solution:   Make sure the fold doesn't go beyond the last buffer line.
            (Christian Brabandt)
Files:      src/fold.c

Patch 7.4.700
Problem:    Fold can't be opened after &quot;<A HREF="change.html#:move">:move</A>&quot;. (Ein Brown)
Solution:   Delete the <A HREF="fold.html#folding">folding</A> information and update <A HREF="motion.html#it">it</A> afterwards.
            (Christian Brabandt)
Files:      src/ex_cmds.c, src/fold.c, src/testdir/test45.in,
            src/testdir/test45.ok

Patch 7.4.701
Problem:    Compiler warning for using uninitialized variable. (Yasuhiro
            Matsumoto)
Solution:   Initialize <A HREF="motion.html#it">it</A>.
Files:      src/hardcopy.c

Patch 7.4.702
Problem:    Joining an empty <A HREF="eval.html#list">list</A> does unnecessary work.
Solution:   Let <A HREF="builtin.html#join()">join()</A> return early. (Marco Hinz)
Files:      src/eval.c

Patch 7.4.703
Problem:    Compiler warning for start_dir unused when building unittests.
Solution:   Move start_dir inside the #ifdef.
Files:      src/main.c

Patch 7.4.704
Problem:    Searching for a character matches an illegal byte and causes
            invalid memory access. (Dominique Pelle)
Solution:   Do not match an invalid byte when search for a character in a
            <A HREF="eval.html#string">string</A>.  Fix equivalence classes using negative numbers, which
            result in illegal bytes.
Files:      src/misc2.c, src/regexp.c, src/testdir/test44.in

Patch 7.4.705
Problem:    Can't build with <A HREF="if_ruby.html#Ruby">Ruby</A> 2.2.
Solution:   Add #ifdefs to handle the incompatible change. (Andrei Olsen)
Files:      src/if_ruby.c

Patch 7.4.706
Problem:    Window drawn wrong when <A HREF="options.html#'laststatus'">'laststatus'</A> is zero and there is a
            command-line <A HREF="windows.html#window">window</A>. (Yclept Nemo)
Solution:   Set the status height a bit later. (Christian Brabandt)
Files:      src/window.c

Patch 7.4.707
Problem:    Undo files can have their executable bit set.
Solution:   Strip of the executable bit. (Mikael Berthe)
Files:      src/undo.c

Patch 7.4.708
Problem:    <A HREF="builtin.html#gettext()">gettext()</A> is called too often.
Solution:   Do not call <A HREF="builtin.html#gettext()">gettext()</A> for <A HREF="message.html#messages">messages</A> until they are actually used.
            (idea by Yasuhiro Matsumoto)
Files:      src/eval.c

Patch 7.4.709
Problem:    &quot;<A HREF="tabpage.html#:tabmove">:tabmove</A>&quot; does not work <A HREF="motion.html#as">as</A> documented.
Solution:   Make <A HREF="motion.html#it">it</A> work consistently.  Update documentation and add tests.
            (Hirohito Higashi)
Files:      src/window.c, runtime/doc/tabpage.txt, src/ex_docmd.c,
            src/testdir/test62.in, src/testdir/test62.ok

Patch 7.4.710
Problem:    It is not possible to make spaces visible in <A HREF="eval.html#list">list</A> mode.
Solution:   Add the &quot;space&quot; item to <A HREF="options.html#'listchars'">'listchars'</A>. (David Brgin, issue 350)
Files:      runtime/doc/options.txt, src/globals.h, src/message.h,
            src/screen.c, src/testdir/test_listchars.in,
            src/testdir/test_listchars.ok, src/testdir/Make_amiga.mak,
            src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
            src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
            src/testdir/Makefile

Patch 7.4.711 (after 7.4.710)
Problem:    Missing change in one file.
Solution:   Also change option.c
Files:      src/option.c

Patch 7.4.712 (after 7.4.710)
Problem:    Missing change in another file.
Solution:   Also change message.c
Files:      src/message.c

Patch 7.4.713
Problem:    Wrong condition for #ifdef.
Solution:   Change USR_EXRC_FILE2 to USR_VIMRC_FILE2. (Mikael Fourrier)
Files:      src/os_unix.h

Patch 7.4.714
Problem:    Illegal memory access when there are illegal bytes.
Solution:   Check the byte length of the character. (Dominique Pelle)
Files:      src/regexp.c

Patch 7.4.715
Problem:    Invalid memory access when there are illegal bytes.
Solution:   Get the length from the text, not from the character. (Dominique
            Pelle)
Files:      src/regexp_nfa.c

Patch 7.4.716
Problem:    When using the '<A HREF="change.html#c">c</A>' flag of &quot;<A HREF="change.html#:substitute">:substitute</A>&quot; and selecting &quot;<A HREF="insert.html#a">a</A>&quot; or &quot;<A HREF="motion.html#l">l</A>&quot;
            at the prompt the flags are not remembered for &quot;<A HREF="change.html#:&amp;&amp;">:&amp;&amp;</A>&quot;. (Ingo
            Karkat)
Solution:   Save the flag values and restore them. (Hirohito Higashi)
Files:      src/ex_cmds.c

Patch 7.4.717
Problem:    &quot;<A HREF="eval.html#:let">:let</A> <A HREF="eval.html#list">list</A> += list&quot; can change a locked <A HREF="eval.html#list">list</A>.
Solution:   Check for the lock earlier. (Olaf Dabrunz)
Files:      src/eval.c, src/testdir/test55.in, src/testdir/test55.ok

Patch 7.4.718
Problem:    Autocommands triggered by <A HREF="quickfix.html#quickfix">quickfix</A> cannot get the current title
            value.
Solution:   Set <A HREF="quickfix.html#w:quickfix_title">w:quickfix_title</A> earlier. (Yannick)
            Also move the check for a title into the function.
Files:      src/quickfix.c

Patch 7.4.719
Problem:    Overflow when adding MAXCOL to a pointer.
Solution:   Subtract pointers instead. (James McCoy)
Files:      src/screen.c

Patch 7.4.720
Problem:    Can't build with <A HREF="visual.html#Visual">Visual</A> Studio 2015.
Solution:   Recognize the &quot;version 14&quot; numbers and omit /nodefaultlib when
            appropriate. (Paul Moore)
Files:      src/Make_mvc.mak

Patch 7.4.721
Problem:    When <A HREF="options.html#'list'">'list'</A> is set <A HREF="visual.html#Visual">Visual</A> mode does not highlight anything in
            empty lines. (mgaleski)
Solution:   Check the value of lcs_eol in another place. (Christian Brabandt)
Files:      src/screen.c

Patch 7.4.722
Problem:    0x202f is not recognized <A HREF="motion.html#as">as</A> a non-breaking space character.
Solution:   Add 0x202f to the <A HREF="eval.html#list">list</A>. (Christian Brabandt)
Files:      runtime/doc/options.txt, src/message.c, src/screen.c

Patch 7.4.723
Problem:    For indenting, finding the C++ baseclass can be slow.
Solution:   Cache the result. (Hirohito Higashi)
Files:      src/misc1.c

Patch 7.4.724
Problem:    Vim icon does not show in Windows context menu. (issue 249)
Solution:   Load the icon in GvimExt.
Files:      src/GvimExt/gvimext.cpp, src/GvimExt/gvimext.h

Patch 7.4.725
Problem:    &quot;<A HREF="eval.html#:call">:call</A> setreg(&#39;&#34;'', [])&quot; reports an internal error.
Solution:   Make the <A HREF="sponsor.html#register">register</A> empty. (Yasuhiro Matsumoto)
Files:      src/ops.c

Patch 7.4.726 (after 7.4.724)
Problem:    Cannot build GvimExt.
Solution:   Set APPVER to 5.0.  (KF Leong)
Files:      src/GvimExt/Makefile

Patch 7.4.727 (after 7.4.724)
Problem:    Cannot build GvimExt with MingW.
Solution:   Add -lgdi32.  (KF Leong)
Files:      src/GvimExt/Make_ming.mak

Patch 7.4.728
Problem:    Can't build with some version of <A HREF="visual.html#Visual">Visual</A> Studio 2015.
Solution:   Recognize another version 14 number. (Sinan)
Files:      src/Make_mvc.mak

Patch 7.4.729 (after 7.4.721)
Problem:    Occasional crash with <A HREF="options.html#'list'">'list'</A> set.
Solution:   Fix off-by-one error. (Christian Brabandt)
Files:      src/screen.c

Patch 7.4.730
Problem:    When setting the crypt key and using a swap file, text may be
            encrypted <A HREF="if_cscop.html#twice">twice</A> or unencrypted text remains in the swap file.
            (Issue 369)
Solution:   Call ml_preserve() before re-encrypting.  Set correct index for
            next pointer block.
Files:      src/memfile.c, src/memline.c, src/proto/memline.pro, src/option.c

Patch 7.4.731
Problem:    The <A HREF="intro.html#tab">tab</A> menu shows &quot;Close tab&quot; even when <A HREF="motion.html#it">it</A> doesn't work.
Solution:   Don't show &quot;Close tab&quot; for the last <A HREF="intro.html#tab">tab</A>. (John Marriott)
Files:      src/gui_w48.c, src/gui_gtk_x11.c, src/gui_mac.c, src/gui_motif.c

Patch 7.4.732
Problem:    The cursor line is not always updated for the &quot;<A HREF="insert.html#O">O</A>&quot; command.
Solution:   Reset the VALID_CROW flag. (Christian Brabandt)
Files:      src/normal.c

Patch 7.4.733
Problem:    test_listchars breaks on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>. (Kenichi Ito)
Solution:   Set fileformat to &quot;<A HREF="os_unix.html#unix">unix</A>&quot;. (Christian Brabandt)
Files:      src/testdir/test_listchars.in

Patch 7.4.734
Problem:    ml_get error when using &quot;<A HREF="change.html#p">p</A>&quot; in a <A HREF="visual.html#Visual">Visual</A> selection in the last
            line.
Solution:   Change the behavior at the last line. (Yukihiro Nakadaira)
Files:      src/normal.c, src/ops.c, src/testdir/test94.in,
            src/testdir/test94.ok

Patch 7.4.735
Problem:    Wrong argument for sizeof().
Solution:   Use a pointer argument. (Chris Hall)
Files:      src/eval.c

Patch 7.4.736
Problem:    Invalid memory access.
Solution:   Avoid going over the end of a NUL terminated <A HREF="eval.html#string">string</A>. (Dominique
            Pelle)
Files:      src/regexp.c

Patch 7.4.737
Problem:    On <A HREF="os_win32.html#MS-Windows">MS-Windows</A> vimgrep over <A HREF="editing.html#arglist">arglist</A> doesn't work (Issue 361)
Solution:   Only <A HREF="intro.html#escape">escape</A> backslashes in ## expansion when <A HREF="motion.html#it">it</A> is not used <A HREF="motion.html#as">as</A> the
            path separator. (James McCoy)
Files:      src/ex_docmd.c

Patch 7.4.738 (after 7.4.732)
Problem:    Can't compile without the <A HREF="syntax.html#syntax">syntax</A> highlighting feature.
Solution:   Add #ifdef around use of w_p_cul. (Hirohito Higashi)
Files:      src/normal.c, src/screen.c

Patch 7.4.739
Problem:    In a <A HREF="eval.html#string">string</A> &quot;\U&quot; only takes 4 digits, while after <A HREF="visual.html#CTRL-V">CTRL-V</A> <A HREF="undo.html#U">U</A> eight
            digits can be used.
Solution:   Make &quot;\U&quot; also take eight digits. (Christian Brabandt)
Files:      src/eval.c

Patch 7.4.740
Problem:    &quot;:1quit&quot; works like &quot;:.quit&quot;. (Bohr Shaw)
Solution:   Don't exit Vim when a range is specified. (Christian Brabandt)
Files:      src/ex_docmd.c, src/testdir/test13.in, src/testdir/test13.ok

Patch 7.4.741
Problem:    When using += with &quot;<A HREF="options.html#:set">:set</A>&quot; a trailing comma is not recognized.
            (Issue 365)
Solution:   Don't add a second comma. Add a test. (partly by Christian
            Brabandt)
Files:      src/option.c, src/testdir/test_set.in, src/testdir/test_set.ok,
            src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
            src/testdir/Make_vms.mms, src/testdir/Makefile

Patch 7.4.742
Problem:    Cannot specify a vertical split when loading a buffer for a
            <A HREF="quickfix.html#quickfix">quickfix</A> command.
Solution:   Add the &quot;vsplit&quot; value to <A HREF="options.html#'switchbuf'">'switchbuf'</A>. (Brook Hong)
Files:      runtime/doc/options.txt, src/buffer.c, src/option.h

Patch 7.4.743
Problem:    &quot;<A HREF="change.html#p">p</A>&quot; in <A HREF="visual.html#Visual">Visual</A> mode causes an unexpected line split.
Solution:   Advance the cursor first. (Yukihiro Nakadaira)
Files:      src/ops.c, src/testdir/test94.in, src/testdir/test94.ok

Patch 7.4.744
Problem:    No tests for <A HREF="if_ruby.html#Ruby">Ruby</A> and <A HREF="if_perl.html#Perl">Perl</A>.
Solution:   Add minimal tests. (Ken Takata)
Files:      src/testdir/test_perl.in, src/testdir/test_perl.ok,
            src/testdir/test_ruby.in, src/testdir/test_ruby.ok,
            src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
            src/testdir/Make_vms.mms, src/testdir/Makefile

Patch 7.4.745
Problem:    The entries added by <A HREF="builtin.html#matchaddpos()">matchaddpos()</A> are returned by <A HREF="builtin.html#getmatches()">getmatches()</A>
            but can't be set with <A HREF="builtin.html#setmatches()">setmatches()</A>. (Lcd)
Solution:   Fix <A HREF="builtin.html#setmatches()">setmatches()</A>. (Christian Brabandt)
Files:      src/eval.c, src/testdir/test63.in, src/testdir/test63.ok

Patch 7.4.746
Problem:    &quot;:[count]tag&quot; is not always working. (cs86661)
Solution:   Set cur_match a bit later. (Hirohito Higashi)
Files:      src/tag.c,

Patch 7.4.747
Problem:    &quot;<A HREF="quickfix.html#:cnext">:cnext</A>&quot; may jump to the wrong column when setting
            'virtualedit=all' (cs86661)
Solution:   Reset the coladd field. (Hirohito Higashi)
Files:      src/quickfix.c

Patch 7.4.748 (after 7.4.745)
Problem:    Buffer overflow.
Solution:   Make the buffer larger. (Kazunobu Kuriyama)
Files:      src/eval.c

Patch 7.4.749 (after 7.4.741)
Problem:    For some <A HREF="options.html#options">options</A> two consecutive commas are OK. (Nikolai Pavlov)
Solution:   Add the P_ONECOMMA flag.
Files:      src/option.c

Patch 7.4.750
Problem:    Cannot build with clang 3.5 on Cygwin with <A HREF="if_perl.html#perl">perl</A> enabled.
Solution:   Strip &quot;-fdebug-prefix-map&quot; in configure. (Ken Takata)
Files:      src/configure.in, src/auto/configure

Patch 7.4.751
Problem:    It is not obvious how to enable the address sanitizer.
Solution:   Add commented-out flags in the Makefile. (Dominique Pelle)
            Also add missing test targets.
Files:      src/Makefile

Patch 7.4.752
Problem:    <A HREF="mbyte.html#Unicode">Unicode</A> 8.0 not supported.
Solution:   Update tables for <A HREF="mbyte.html#Unicode">Unicode</A> 8.0.  Avoid <A HREF="windows.html#E36">E36</A> when running the <A HREF="usr_41.html#script">script</A>.
            (James McCoy)
Files:      runtime/tools/unicode.vim, src/mbyte.c

Patch 7.4.753
Problem:    Appending in <A HREF="visual.html#Visual">Visual</A> mode with <A HREF="options.html#'linebreak'">'linebreak'</A> set does not work
            properly.  Also when <A HREF="options.html#'selection'">'selection'</A> is &quot;<A HREF="motion.html#exclusive">exclusive</A>&quot;. (Ingo Karkat)
Solution:   Recalculate virtual columns. (Christian Brabandt)
Files:      src/normal.c, src/testdir/test_listlbr.in,
            src/testdir/test_listlbr.ok, src/testdir/test_listlbr_utf8.in,
            src/testdir/test_listlbr_utf8.ok

Patch 7.4.754
Problem:    Using <A HREF="change.html#CTRL-A">CTRL-A</A> in <A HREF="visual.html#Visual">Visual</A> mode does not work well. (Gary Johnson)
Solution:   Make <A HREF="motion.html#it">it</A> increment all numbers in the <A HREF="visual.html#Visual">Visual</A> area. (Christian
            Brabandt)
Files:      runtime/doc/change.txt, src/normal.c, src/ops.c,
            src/proto/ops.pro, src/testdir/Make_amiga.mak,
            src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
            src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
            src/testdir/Makefile, src/testdir/test_increment.in,
            src/testdir/test_increment.ok

Patch 7.4.755
Problem:    It is not <A HREF="starting.html#easy">easy</A> to <A HREF="intro.html#count">count</A> the number of characters.
Solution:   Add the skipcc argument to <A HREF="builtin.html#strchars()">strchars()</A>. (Hirohito Higashi, Ken
            Takata)
Files:      runtime/doc/eval.txt, src/eval.c, src/testdir/test_utf8.in,
            src/testdir/test_utf8.ok

Patch 7.4.756
Problem:    Can't use strawberry <A HREF="if_perl.html#Perl">Perl</A> 5.22 x64 on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Add new defines and #if. (Ken Takata)
Files:      src/Make_cyg_ming.mak, src/Make_mvc.mak, src/if_perl.xs

Patch 7.4.757
Problem:    Cannot detect the background color of a <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Add T_RBG to request the background color if possible. (Lubomir
            Rintel)
Files:      src/main.c, src/term.c, src/term.h, src/proto/term.pro

Patch 7.4.758
Problem:    When <A HREF="options.html#'conceallevel'">'conceallevel'</A> is 1 and quitting the command-line <A HREF="windows.html#window">window</A> with
            <A HREF="pattern.html#CTRL-C">CTRL-C</A> the first character '<A HREF="cmdline.html#:">:</A>' is erased.
Solution:   Reset <A HREF="options.html#'conceallevel'">'conceallevel'</A> in the command-line <A HREF="windows.html#window">window</A>. (Hirohito
            Higashi)
Files:      src/ex_getln.c

Patch 7.4.759
Problem:    Building with <A HREF="if_lua.html#Lua">Lua</A> 5.3 doesn't work, symbols have changed.
Solution:   Use the new names for the new version. (Felix Schnizlein)
Files:      src/if_lua.c

Patch 7.4.760
Problem:    Spelling mistakes are not displayed after &quot;<A HREF="syntax.html#:syn">:syn</A> spell&quot;.
Solution:   Force a redraw after &quot;<A HREF="syntax.html#:syn">:syn</A> spell&quot; command. (Christian Brabandt)
Files:      src/syntax.c

Patch 7.4.761 (after 7.4.757)
Problem:    The request-background termcode implementation is incomplete.
Solution:   Add the missing pieces.
Files:      src/option.c, src/term.c

Patch 7.4.762 (after 7.4.757)
Problem:    Comment for may_req_bg_color() is wrong. (Christ van Willegen)
Solution:   Rewrite the comment.
Files:      src/term.c

Patch 7.4.763 (after 7.4.759)
Problem:    Building with <A HREF="if_lua.html#Lua">Lua</A> 5.1 doesn't work.
Solution:   Define lua_replace and lua_remove. (KF Leong)
Files:      src/if_lua.c

Patch 7.4.764 (after 7.4.754)
Problem:    test_increment fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>. (Ken Takata)
Solution:   Clear <A HREF="visual.html#Visual">Visual</A> mappings. (Taro Muraoka)
Files:      src/testdir/test_increment.in

Patch 7.4.765 (after 7.4.754)
Problem:    <A HREF="change.html#CTRL-A">CTRL-A</A> and <A HREF="change.html#CTRL-X">CTRL-X</A> in <A HREF="visual.html#Visual">Visual</A> mode <A HREF="diff.html#do">do</A> not always work well.
Solution:   Improvements for increment and decrement. (Christian Brabandt)
Files:      src/normal.c, src/ops.c, src/testdir/test_increment.in,
            src/testdir/test_increment.ok

Patch 7.4.766 (after 7.4.757)
Problem:    Background color check does not work on Tera Term.
Solution:   Also recognize ST <A HREF="motion.html#as">as</A> a termination character. (Hirohito Higashi)
Files:      src/term.c

Patch 7.4.767
Problem:    <A HREF="remote.html#--remote-tab-silent">--remote-tab-silent</A> can fail on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Use single <A HREF="quotes.html#quotes">quotes</A> to avoid problems with backslashes. (Idea by
            Weiyong Mao)
Files:      src/main.c

Patch 7.4.768
Problem:    <A HREF="diff.html#:diffoff">:diffoff</A> only works properly once.
Solution:   Also make <A HREF="diff.html#:diffoff">:diffoff</A> work when used a second time. (Olaf Dabrunz)
Files:      src/diff.c

Patch 7.4.769 (after 7.4 768)
Problem:    Behavior of <A HREF="diff.html#:diffoff">:diffoff</A> is not tested.
Solution:   Add a bit of <A HREF="testing.html#testing">testing</A>. (Olaf Dabrunz)
Files:      src/testdir/test47.in, src/testdir/test47.ok

Patch 7.4.770 (after 7.4.766)
Problem:    Background color response with transparency is not ignored.
Solution:   Change the way <A HREF="intro.html#escape">escape</A> sequences are recognized. (partly by
            Hirohito Higashi)
Files:      src/ascii.h, src/term.c

Patch 7.4.771
Problem:    Search does not handle <A HREF="mbyte.html#multibyte">multibyte</A> character at the start position
            correctly.
Solution:   Take byte size of character into account. (Yukihiro Nakadaira)
Files:      src/search.c, src/testdir/Make_amiga.mak,
            src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
            src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
            src/testdir/Makefile, src/testdir/test_search_mbyte.in,
            src/testdir/test_search_mbyte.ok

Patch 7.4.772
Problem:    Racket 6.2 is not supported on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Check for the &quot;racket&quot; subdirectory. (Weiyong Mao)
Files:      src/Make_mvc.mak, src/if_mzsch.c

Patch 7.4.773
Problem:    <A HREF="options.html#'langmap'">'langmap'</A> is used in command-line mode when checking for mappings.
            Issue 376.
Solution:   Do not use <A HREF="options.html#'langmap'">'langmap'</A> in command-line mode. (Larry Velazquez)
Files:      src/getchar.c, src/testdir/test_mapping.in,
            src/testdir/test_mapping.ok

Patch 7.4.774
Problem:    When using the <A HREF="autocmd.html#CompleteDone">CompleteDone</A> <A HREF="autocmd.html#autocommand">autocommand</A> event it's difficult to
            get to the completed items.
Solution:   Add the v:completed_items variable. (Shougo Matsu)
Files:      runtime/doc/autocmd.txt, runtime/doc/eval.txt, src/edit.c,
            src/eval.c, src/macros.h, src/proto/eval.pro, src/vim.h

Patch 7.4.775
Problem:    It is not possible to avoid using the first item of completion.
Solution:   Add the &quot;noinsert&quot; and &quot;noselect&quot; values to <A HREF="options.html#'completeopt'">'completeopt'</A>. (Shougo
            Matsu)
Files:      runtime/doc/options.txt, src/edit.c, src/option.c

Patch 7.4.776
Problem:    Equivalence class for '<A HREF="change.html#d">d</A>' does not work correctly.
Solution:   Fix 0x1e0f and 0x1d0b. (Dominique Pelle)
Files:      src/regexp.c, src/regexp_nfa.c

Patch 7.4.777
Problem:    The README file doesn't look nice on github.
Solution:   Add a markdown version of the README file.
Files:      Filelist, README.md

Patch 7.4.778
Problem:    Coverity warns for uninitialized variable.
Solution:   Change condition of assignment.
Files:      src/ops.c

Patch 7.4.779
Problem:    Using <A HREF="change.html#CTRL-A">CTRL-A</A> in a line without a number moves the cursor. May
            cause a crash when at the start of the line. (Urtica Dioica)
Solution:   Do not move the cursor if no number was changed.
Files:      src/ops.c

Patch 7.4.780
Problem:    Compiler complains about uninitialized variable and clobbered
            <A HREF="eval.html#variables">variables</A>.
Solution:   Add Initialization.  Make <A HREF="eval.html#variables">variables</A> static.
Files:      src/ops.c, src/main.c

Patch 7.4.781
Problem:    <A HREF="builtin.html#line2byte()">line2byte()</A> returns one <A HREF="various.html#less">less</A> when <A HREF="options.html#'bin'">'bin'</A> and <A HREF="options.html#'noeol'">'noeol'</A> are set.
Solution:   Only adjust the size for the last line. (Rob Wu)
Files:      src/memline.c

Patch 7.4.782
Problem:    Still a few problems with <A HREF="change.html#CTRL-A">CTRL-A</A> and <A HREF="change.html#CTRL-X">CTRL-X</A> in <A HREF="visual.html#Visual">Visual</A> mode.
Solution:   Fix the reported problems. (Christian Brabandt)
Files:      src/charset.c, src/eval.c, src/ex_cmds.c, src/ex_getln.c,
            src/misc2.c, src/normal.c, src/ops.c, src/option.c,
            src/proto/charset.pro, src/testdir/test_increment.in,
            src/testdir/test_increment.ok

Patch 7.4.783
Problem:    copy_chars() and copy_spaces() are inefficient.
Solution:   Use memset() instead. (Dominique Pelle)
Files:      src/ex_getln.c, src/misc2.c, src/ops.c, src/proto/misc2.pro,
            src/screen.c

Patch 7.4.784
Problem:    Using both &quot;noinsert&quot; and &quot;noselect&quot; in <A HREF="options.html#'completeopt'">'completeopt'</A> does not
            work properly.
Solution:   Change the ins_complete() calls. (Ozaki Kiichi)
Files:      src/edit.c

Patch 7.4.785
Problem:    On some systems automatically adding the missing EOL causes
            problems. Setting <A HREF="options.html#'binary'">'binary'</A> has too many side effects.
Solution:   Add the <A HREF="options.html#'fixeol'">'fixeol'</A> option, default on. (Pavel Samarkin)
Files:      src/buffer.c, src/fileio.c, src/memline.c, src/netbeans.c,
            src/ops.c, src/option.c, src/option.h, src/os_unix.c,
            src/os_win32.c, src/structs.h, src/testdir/Make_amiga.mak,
            src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
            src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
            src/testdir/Makefile, src/testdir/test_fixeol.in,
            src/testdir/test_fixeol.ok, runtime/doc/options.txt,
            runtime/optwin.vim

Patch 7.4.786
Problem:    It is not possible for a <A HREF="usr_05.html#plugin">plugin</A> to adjust to a changed setting.
Solution:   Add the <A HREF="autocmd.html#OptionSet">OptionSet</A> <A HREF="autocmd.html#autocommand">autocommand</A> event. (Christian Brabandt)
Files:      runtime/doc/autocmd.txt, runtime/doc/eval.txt, src/eval.c,
            src/fileio.c, src/option.c, src/proto/eval.pro,
            src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
            src/testdir/Make_vms.mms, src/testdir/Makefile,
            src/testdir/test_autocmd_option.in,
            src/testdir/test_autocmd_option.ok, src/vim.h

Patch 7.4.787 (after 7.4.786)
Problem:    snprintf() isn't available everywhere.
Solution:   Use vim_snprintf(). (Ken Takata)
Files:      src/option.c

Patch 7.4.788 (after 7.4.787)
Problem:    Can't build without the crypt feature. (John Marriott)
Solution:   Add #ifdef's.
Files:      src/option.c

Patch 7.4.789 (after 7.4.788)
Problem:    Using freed memory and crash. (Dominique Pelle)
Solution:   Correct use of pointers. (Hirohito Higashi)
Files:      src/option.c

Patch 7.4.790 (after 7.4.786)
Problem:    Test fails when the autochdir feature is not available.  Test
            output contains the test <A HREF="usr_41.html#script">script</A>.
Solution:   Check for the autochdir feature. (Kazunobu Kuriyama)  Only write
            the relevant test output.
Files:      src/testdir/test_autocmd_option.in,
            src/testdir/test_autocmd_option.ok

Patch 7.4.791
Problem:    The buffer <A HREF="eval.html#list">list</A> can be very long.
Solution:   Add an argument to &quot;<A HREF="windows.html#:ls">:ls</A>&quot; to specify the type of buffer to <A HREF="eval.html#list">list</A>.
            (Marcin Szamotulski)
Files:      runtime/doc/windows.txt, src/buffer.c, src/ex_cmds.h

Patch 7.4.792
Problem:    Can only <A HREF="syntax.html#conceal">conceal</A> text by defining <A HREF="syntax.html#syntax">syntax</A> items.
Solution:   Use <A HREF="builtin.html#matchadd()">matchadd()</A> to define concealing. (Christian Brabandt)
Files:      runtime/doc/eval.txt, src/eval.c, src/ex_docmd.c,
            src/proto/window.pro, src/screen.c, src/structs.h,
            src/testdir/Make_amiga.mak,
            src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
            src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
            src/testdir/Makefile, src/testdir/test_match_conceal.in,
            src/testdir/test_match_conceal.ok, src/window.c

Patch 7.4.793
Problem:    Can't specify when not to ring the bell.
Solution:   Add the <A HREF="options.html#'belloff'">'belloff'</A> option. (Christian Brabandt)
Files:      runtime/doc/options.txt, src/edit.c, src/ex_getln.c,
            src/hangulin.c, src/if_lua.c, src/if_mzsch.c, src/if_tcl.c,
            src/message.c, src/misc1.c, src/normal.c, src/option.c,
            src/option.h, src/proto/misc1.pro, src/search.c, src/spell.c

Patch 7.4.794
Problem:    <A HREF="visual.html#Visual">Visual</A> Studio 2015 is not recognized.
Solution:   Add the version numbers to the makefile. (Taro Muraoka)
Files:      src/Make_mvc.mak

Patch 7.4.795
Problem:    The <A HREF="options.html#'fixeol'">'fixeol'</A> option is not copied to a new <A HREF="windows.html#window">window</A>.
Solution:   Copy the option value. (Yasuhiro Matsumoto)
Files:      src/option.c

Patch 7.4.796
Problem:    Warning from 64 bit compiler.
Solution:   Add type cast. (Mike Williams)
Files:      src/ops.c

Patch 7.4.797
Problem:    Crash when using more lines for the command line than
            <A HREF="options.html#'maxcombine'">'maxcombine'</A>.
Solution:   Use the correct array index.  Also, <A HREF="diff.html#do">do</A> not try redrawing when
            <A HREF="starting.html#exiting">exiting</A>.  And use screen_Columns instead of Columns.
Files:      src/screen.c

Patch 7.4.798 (after 7.4.753)
Problem:    Repeating a change in <A HREF="visual.html#Visual">Visual</A> mode does not work <A HREF="motion.html#as">as</A> expected.
            (Urtica Dioica)
Solution:   Make <A HREF="undo.html#redo">redo</A> in <A HREF="visual.html#Visual">Visual</A> mode work better. (Christian Brabandt)
Files:      src/normal.c, src/testdir/test_listlbr.in,
            src/testdir/test_listlbr.ok

Patch 7.4.799
Problem:    Accessing memory before an allocated block.
Solution:   Check for not going before the start of a <A HREF="pattern.html#pattern">pattern</A>. (Dominique
            Pelle)
Files:      src/fileio.c

Patch 7.4.800
Problem:    Using freed memory when triggering <A HREF="autocmd.html#CmdUndefined">CmdUndefined</A> <A HREF="autocmd.html#autocommands">autocommands</A>.
Solution:   Set pointer to NULL. (Dominique Pelle)
Files:      src/ex_docmd.c

Patch 7.4.801 (after 7.4.769)
Problem:    Test for &quot;<A HREF="diff.html#:diffoff">:diffoff</A>&quot; doesn't catch all potential problems.
Solution:   Add a <A HREF="diff.html#:diffthis">:diffthis</A> and a <A HREF="diff.html#:diffoff">:diffoff</A> command. (Olaf Dabrunz)
Files:      src/testdir/test47.in

Patch 7.4.802
Problem:    Using &quot;<A HREF="insert.html#A">A</A>&quot; in <A HREF="visual.html#Visual">Visual</A> mode while <A HREF="options.html#'linebreak'">'linebreak'</A> is set is not tested.
Solution:   Add a test for this, verifies the problem is fixed. (Ingo Karkat)
Files:      src/testdir/test39.in, src/testdir/test39.ok

Patch 7.4.803
Problem:    C indent does not support C11 raw strings. (Mark Lodato)
Solution:   Do not change indent inside the raw <A HREF="eval.html#string">string</A>.
Files:      src/search.c, src/misc1.c, src/edit.c, src/ops.c,
            src/testdir/test3.in, src/testdir/test3.ok

Patch 7.4.804
Problem:    Xxd doesn't have a <A HREF="uganda.html#license">license</A> notice.
Solution:   Add <A HREF="uganda.html#license">license</A> <A HREF="motion.html#as">as</A> indicated by Juergen.
Files:      src/xxd/xxd.c

Patch 7.4.805
Problem:    The ruler shows &quot;Bot&quot; even when there are only filler lines
            missing. (Gary Johnson)
Solution:   Use &quot;All&quot; when the first line and one filler line are visible.
Files:      src/buffer.c

Patch 7.4.806
Problem:    <A HREF="change.html#CTRL-A">CTRL-A</A> in <A HREF="visual.html#Visual">Visual</A> mode doesn't work properly with &quot;alpha&quot; in
            <A HREF="options.html#'nrformats'">'nrformats'</A>.
Solution:   Make <A HREF="motion.html#it">it</A> work. (Christian Brabandt)
Files:      src/ops.c, src/testdir/test_increment.in,
            src/testdir/test_increment.ok

Patch 7.4.807 (after 7.4.798)
Problem:    After <A HREF="visual.html#CTRL-V">CTRL-V</A> <A HREF="change.html#CTRL-A">CTRL-A</A> mode isn't updated. (Hirohito Higashi)
Solution:   Clear the command line or update the displayed command.
Files:      src/normal.c

Patch 7.4.808
Problem:    On <A HREF="os_win32.html#MS-Windows">MS-Windows</A> 8 <A HREF="mbyte.html#IME">IME</A> input doesn't work correctly.
Solution:   Read console input before calling MsgWaitForMultipleObjects().
            (vim-jp, Nobuhiro Takasaki)
Files:      src/os_win32.c

Patch 7.4.809 (after 7.4.802)
Problem:    Test is duplicated.
Solution:   Roll back 7.4.802.
Files:      src/testdir/test39.in, src/testdir/test39.ok

Patch 7.4.810
Problem:    With a sequence of commands using <A HREF="windows.html#buffers">buffers</A> in <A HREF="diff.html#diff">diff</A> mode <A HREF="various.html#E749">E749</A> is
            given. (itchyny)
Solution:   Skip unloaded buffer. (Hirohito Higashi)
Files:      src/diff.c

Patch 7.4.811
Problem:    Invalid memory access when using &quot;exe 'sc&#39;&#34;'.
Solution:   Avoid going over the end of the <A HREF="eval.html#string">string</A>. (Dominique Pelle)
Files:      src/ex_docmd.c

Patch 7.4.812
Problem:    Gcc sanitizer complains about using a NULL pointer to memmove().
Solution:   Only call memmove when there is something to move. (Vittorio
            Zecca)
Files:      src/memline.c

Patch 7.4.813
Problem:    It is not possible to save and restore character search state.
Solution:   Add <A HREF="builtin.html#getcharsearch()">getcharsearch()</A> and <A HREF="builtin.html#setcharsearch()">setcharsearch()</A>.  (James McCoy)
Files:      runtime/doc/eval.txt, src/eval.c, src/proto/search.pro,
            src/search.c, src/testdir/test_charsearch.in,
            src/testdir/test_charsearch.ok, src/testdir/Makefile,
            src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
            src/testdir/Make_vms.mms

Patch 7.4.814
Problem:    Illegal memory access with &quot;sy match a fold&quot;.
Solution:   Check for empty <A HREF="eval.html#string">string</A>. (Dominique Pelle)
Files:      src/syntax.c

Patch 7.4.815
Problem:    Invalid memory access when doing &quot;<A HREF="eval.html#:call">:call</A> g:&quot;.
Solution:   Check for an empty name. (Dominique Pelle)
Files:      src/eval.c

Patch 7.4.816
Problem:    Invalid memory access when doing &quot;:fun X(&quot;.
Solution:   Check for missing '<A HREF="motion.html#)">)</A>'. (Dominique Pelle)
Files:      src/eval.c

Patch 7.4.817
Problem:    Invalid memory access in file_pat_to_reg_pat().
Solution:   Use vim_isspace() instead of checking for a space only. (Dominique
            Pelle)
Files:      src/fileio.c

Patch 7.4.818
Problem:    <A HREF="options.html#'linebreak'">'linebreak'</A> breaks c&#37; if the last <A HREF="visual.html#Visual">Visual</A> selection was block.
            (Chris Morganiser, Issue 389)
Solution:   Handle <A HREF="visual.html#Visual">Visual</A> block mode differently. (Christian Brabandt)
Files:      src/normal.c, src/testdir/test_listlbr.in,
            src/testdir/test_listlbr.ok

Patch 7.4.819
Problem:    Beeping when running the tests.
Solution:   Fix 41 beeps. (Roland Eggner)
Files:      src/testdir/test17.in, src/testdir/test29.in,
            src/testdir/test4.in, src/testdir/test61.in,
            src/testdir/test82.in, src/testdir/test83.in,
            src/testdir/test90.in, src/testdir/test95.in,
            src/testdir/test_autoformat_join.in

Patch 7.4.820
Problem:    Invalid memory access in file_pat_to_reg_pat.
Solution:   Avoid looking before the start of a <A HREF="eval.html#string">string</A>. (Dominique Pelle)
Files:      src/fileio.c

Patch 7.4.821
Problem:    Coverity reports a few problems.
Solution:   Avoid the warnings. (Christian Brabandt)
Files:      src/ex_docmd.c, src/option.c, src/screen.c

Patch 7.4.822
Problem:    More problems reported by coverity.
Solution:   Avoid the warnings. (Christian Brabandt)
Files:      src/os_unix.c, src/eval.c, src/ex_cmds.c, src/ex_cmds2.c,
            src/ex_getln.c, src/fold.c, src/gui.c, src/gui_w16.c,
            src/gui_w32.c, src/if_cscope.c, src/if_xcmdsrv.c, src/move.c,
            src/normal.c, src/regexp.c, src/syntax.c, src/ui.c, src/window.c

Patch 7.4.823
Problem:    Cursor moves after <A HREF="change.html#CTRL-A">CTRL-A</A> on alphabetic character.
Solution:   (Hirohito Higashi, test by Christian Brabandt)
Files:      src/testdir/test_increment.in, src/testdir/test_increment.ok,
            src/ops.c

Patch 7.4.824 (after 7.4.813)
Problem:    Can't compile without the <A HREF="mbyte.html#multibyte">multibyte</A> feature. (John Marriott)
Solution:   Add #ifdef.
Files:      src/eval.c

Patch 7.4.825
Problem:    Invalid memory access for &quot;<A HREF="syntax.html#:syn">:syn</A> keyword <A HREF="change.html#x">x</A> a[&quot;.
Solution:   Do not skip over the NUL. (Dominique Pelle)
Files:      src/syntax.c

Patch 7.4.826
Problem:    Compiler warnings and <A HREF="message.html#errors">errors</A>.
Solution:   Make <A HREF="motion.html#it">it</A> build properly without the <A HREF="mbyte.html#multibyte">multibyte</A> feature.
Files:      src/eval.c, src/search.c

Patch 7.4.827
Problem:    Not all test targets are in the Makefile.
Solution:   Add the missing targets.
Files:      src/Makefile

Patch 7.4.828
Problem:    Crash when using &quot;syn keyword <A HREF="change.html#x">x</A> c&quot;. (Dominique Pelle)
Solution:   Initialize the keyword table. (Raymond Ko, PR 397)
Files:      src/syntax.c

Patch 7.4.829
Problem:    Crash when clicking in beval balloon. (Travis Lebsock)
Solution:   Use PostMessage() instead of DestroyWindow(). (Raymond Ko, PR 298)
Files:      src/gui_w32.c

Patch 7.4.830
Problem:    Resetting <A HREF="options.html#'encoding'">'encoding'</A> when doing &quot;<A HREF="options.html#:set">:set</A> all&amp;&quot; causes problems.
            (Bjorn Linse) Display is not updated.
Solution:   Do not reset <A HREF="options.html#'encoding'">'encoding'</A>. Do a full redraw.
Files:      src/option.c

Patch 7.4.831
Problem:    When expanding `=expr` on the command line and encountering an
            error, the command is executed anyway.
Solution:   Bail out when an error is detected.
Files:      src/misc1.c

Patch 7.4.832
Problem:    <A HREF="options.html#$HOME">$HOME</A> in `=$HOME . '/.vimrc'` is expanded too early.
Solution:   Skip over `=expr` when expanding environment names.
Files:      src/misc1.c

Patch 7.4.833
Problem:    More side effects of &quot;<A HREF="options.html#:set">:set</A> all&amp;&quot; are missing. (Bjrn Linse)
Solution:   Call didset_options() and add didset_options2() to collect more
            side effects to take care of.  Still not everything...
Files:      src/option.c

Patch 7.4.834
Problem:    <A HREF="builtin.html#gettabvar()">gettabvar()</A> doesn't work after Vim start. (Szymon Wrozynski)
Solution:   Handle first <A HREF="windows.html#window">window</A> in <A HREF="intro.html#tab">tab</A> still being NULL. (Christian Brabandt)
Files:      src/eval.c, src/testdir/test91.in, src/testdir/test91.ok

Patch 7.4.835
Problem:    Comparing <A HREF="mbyte.html#utf-8">utf-8</A> sequences does not handle different byte sizes
            correctly.
Solution:   Get the byte size of each character. (Dominique Pelle)
Files:      src/misc2.c

Patch 7.4.836
Problem:    Accessing uninitialized memory.
Solution:   Add missing calls to init_tv(). (Dominique Pelle)
Files:      src/eval.c

Patch 7.4.837
Problem:    Compiler warning with MSVC compiler when using +sniff.
Solution:   Use Sleep() instead of _sleep(). (Tux)
Files:      src/if_sniff.c

Patch 7.4.838 (after 7.4.833)
Problem:    Can't compile without the crypt feature. (John Marriott)
Solution:   Add #ifdef.
Files:      src/option.c

Patch 7.4.839
Problem:    Compiler warning on 64-bit system.
Solution:   Add cast to int. (Mike Williams)
Files:      src/search.c

Patch 7.4.840 (after 7.4.829)
Problem:    Tooltip <A HREF="windows.html#window">window</A> stays open.
Solution:   Send a WM_CLOSE message. (Jurgen Kramer)
Files:      src/gui_w32.c

Patch 7.4.841
Problem:    Can't compile without the <A HREF="mbyte.html#multibyte">multibyte</A> feature. (John Marriott)
Solution:   Add more #ifdef's.
Files:      src/option.c

Patch 7.4.842 (after 7.4.840)
Problem:    Sending too many <A HREF="message.html#messages">messages</A> to close the balloon.
Solution:   Only send a WM_CLOSE message. (Jurgen Kramer)
Files:      src/gui_w32.c

Patch 7.4.843 (after 7.4.835)
Problem:    Still possible to go beyond the end of a <A HREF="eval.html#string">string</A>.
Solution:   Check for NUL also in second <A HREF="eval.html#string">string</A>. (Dominique Pelle)
Files:      src/misc2.c

Patch 7.4.844
Problem:    When '<A HREF="pattern.html##">#</A>' is in <A HREF="options.html#'isident'">'isident'</A> the is# comparator doesn't work.
Solution:   Don't use vim_isIDc(). (Yasuhiro Matsumoto)
Files:      src/eval.c, src/testdir/test_comparators.in,
            src/testdir/test_comparators.ok, src/testdir/Makefile,
            src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
            src/testdir/Make_vms.mms

Patch 7.4.845
Problem:    Compiler warning for possible loss of data.
Solution:   Add a type cast. (Erich Ritz)
Files:      src/misc1.c

Patch 7.4.846
Problem:    Some GitHub users don't know how to use issues.
Solution:   Add a file that explains the basics of contributing.
Files:      Filelist, CONTRIBUTING.md

Patch 7.4.847
Problem:    &quot;vi)d&quot; may leave a character behind.
Solution:   Skip over <A HREF="mbyte.html#multibyte">multibyte</A> character. (Christian Brabandt)
Files:      src/search.c

Patch 7.4.848
Problem:    <A HREF="change.html#CTRL-A">CTRL-A</A> on hex number in <A HREF="visual.html#Visual">Visual</A> block mode is incorrect.
Solution:   Account for the &quot;<A HREF="eval.html#0x">0x</A>&quot;. (Hirohito Higashi)
Files:      src/charset.c, src/testdir/test_increment.in,
            src/testdir/test_increment.ok

Patch 7.4.849
Problem:    Moving the cursor in <A HREF="insert.html#Insert">Insert</A> mode starts new <A HREF="undo.html#undo">undo</A> sequence.
Solution:   Add <A HREF="editing.html#CTRL-G">CTRL-G</A> <A HREF="undo.html#U">U</A> to keep the <A HREF="undo.html#undo">undo</A> sequence for the following cursor
            <A HREF="intro.html#movement">movement</A> command. (Christian Brabandt)
Files:      runtime/doc/insert.txt, src/edit.c, src/testdir/test_mapping.in,
            src/testdir/test_mapping.ok

Patch 7.4.850 (after 7.4.846)
Problem:    <A HREF="intro.html#&lt;Esc&gt;">&lt;Esc&gt;</A> does not show up.
Solution:   Use &amp;gt; and &amp;lt;. (Kazunobu Kuriyama)
Files:      CONTRIBUTING.md

Patch 7.4.851
Problem:    Saving and restoring the console buffer does not work properly.
Solution:   Instead of ReadConsoleOutputA/WriteConsoleOutputA use
            CreateConsoleScreenBuffer and SetConsoleActiveScreenBuffer.
            (Ken Takata)
Files:      src/os_win32.c

Patch 7.4.852
Problem:    On <A HREF="os_win32.html#MS-Windows">MS-Windows</A> console Vim uses ANSI APIs for keyboard input and
            console output, <A HREF="motion.html#it">it</A> cannot input/output <A HREF="mbyte.html#Unicode">Unicode</A> characters.
Solution:   Use <A HREF="mbyte.html#Unicode">Unicode</A> APIs for console I/O. (Ken Takata, Yasuhiro Matsumoto)
Files:      src/os_win32.c, src/ui.c, runtime/doc/options.txt

Patch 7.4.853
Problem:    &quot;<A HREF="scroll.html#zt">zt</A>&quot; in <A HREF="diff.html#diff">diff</A> mode does not always work properly. (Gary Johnson)
Solution:   Don't <A HREF="intro.html#count">count</A> filler lines <A HREF="if_cscop.html#twice">twice</A>. (Christian Brabandt)
Files:      src/move.c

Patch 7.4.854 (after 7.4.850)
Problem:    Missing information about runtime files.
Solution:   Add section about runtime files. (Christian Brabandt)
Files:      CONTRIBUTING.md

Patch 7.4.855
Problem:    <A HREF="gui_x11.html#GTK">GTK</A>: font glitches for combining characters
Solution:   Use pango_shape_full() instead of pango_shape(). (luchr, PR #393)
Files:      src/gui_gtk_x11.c

Patch 7.4.856
Problem:    &quot;<A HREF="scroll.html#zt">zt</A>&quot; still doesn't work well with filler lines. (Gary Johnson)
Solution:   Check for filler lines above the cursor. (Christian Brabandt)
Files:      src/move.c

Patch 7.4.857
Problem:    Dragging the current <A HREF="intro.html#tab">tab</A> with the mouse doesn't work properly.
Solution:   Take the current <A HREF="tabpage.html#tabpage">tabpage</A> index into account. (Hirohito Higashi)
Files:      src/normal.c

Patch 7.4.858
Problem:    It's a bit clumsy to execute a command on a <A HREF="eval.html#list">list</A> of matches.
Solution:   Add the &quot;<A HREF="quickfix.html#:ldo">:ldo</A>&quot;, &quot;<A HREF="quickfix.html#:lfdo">:lfdo</A>&quot;, &quot;<A HREF="quickfix.html#:cdo">:cdo</A>&quot; and &quot;<A HREF="quickfix.html#:cfdo">:cfdo</A>&quot; commands. (Yegappan
            Lakshmanan)
Files:      runtime/doc/cmdline.txt, runtime/doc/editing.txt,
            runtime/doc/index.txt, runtime/doc/quickfix.txt,
            runtime/doc/tabpage.txt, runtime/doc/windows.txt, src/ex_cmds.h,
            src/ex_cmds2.c, src/ex_docmd.c, src/proto/quickfix.pro,
            src/quickfix.c, src/testdir/Make_amiga.mak,
            src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
            src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
            src/testdir/Makefile, src/testdir/test_cdo.in,
            src/testdir/test_cdo.ok

Patch 7.4.859
Problem:    Vim doesn't recognize all htmldjango files.
Solution:   Recognize a comment. (Daniel Hahler, PR #410)
Files:      runtime/filetype.vim

Patch 7.4.860
Problem:    Filetype detection is outdated.
Solution:   Include all recent and not-so-recent changes.
Files:      runtime/filetype.vim

Patch 7.4.861 (after 7.4.855)
Problem:    pango_shape_full() is not always available.
Solution:   Add a configure check.
Files:      src/configure.in, src/auto/configure, src/config.h.in,
            src/gui_gtk_x11.c

Patch 7.4.862 (after 7.4.861)
Problem:    Still problems with pango_shape_full() not available.
Solution:   Change AC_TRY_COMPILE to AC_TRY_LINK.
Files:      src/configure.in, src/auto/configure

Patch 7.4.863 (after 7.4.856)
Problem:    plines_nofill() used without the <A HREF="diff.html#diff">diff</A> feature.
Solution:   Define PLINES_NOFILL().
Files:      src/macros.h, src/move.c

Patch 7.4.864 (after 7.4.858)
Problem:    Tiny build fails.
Solution:   Put qf_ items inside #ifdef.
Files:      src/ex_docmd.c

Patch 7.4.865
Problem:    Compiler warning for uninitialized variable.
Solution:   Initialize.
Files:      src/ex_cmds2.c

Patch 7.4.866
Problem:    Crash when <A HREF="change.html#changing">changing</A> the <A HREF="options.html#'tags'">'tags'</A> option from a remote command.
            (Benjamin Fritz)
Solution:   Instead of executing <A HREF="message.html#messages">messages</A> immediately, use a queue, like for
            <A HREF="netbeans.html#netbeans">netbeans</A>. (James Kolb)
Files:      src/ex_docmd.c, src/getchar.c, src/gui_gtk_x11.c, src/gui_w48.c,
            src/gui_x11.c, src/if_xcmdsrv.c, src/misc2.c, src/os_unix.c,
            src/proto/if_xcmdsrv.pro, src/proto/misc2.pro, src/macros.h

Patch 7.4.867 (after 7.4.866)
Problem:    Can't build on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>. (Taro Muraoka)
Solution:   Adjust #ifdef.
Files:      src/misc2.c

Patch 7.4.868
Problem:    <A HREF="options.html#'smarttab'">'smarttab'</A> is also effective when <A HREF="options.html#'paste'">'paste'</A> is enabled. (Alexander
            Monakov)
Solution:   Disable <A HREF="options.html#'smarttab'">'smarttab'</A> when <A HREF="options.html#'paste'">'paste'</A> is set. (Christian Brabandt)
            Do the same for <A HREF="options.html#'expandtab'">'expandtab'</A>.
Files:      src/option.c, src/structs.h

Patch 7.4.869
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="scroll.html#scrolling">scrolling</A> may cause text to disappear when using an
            Intel GPU.
Solution:   Call GetPixel(). (Yohei Endo)
Files:      src/gui_w48.c

Patch 7.4.870
Problem:    May get into an invalid state when using <A HREF="builtin.html#getchar()">getchar()</A> in an
            <A HREF="eval.html#expression">expression</A> <A HREF="map.html#mapping">mapping</A>.
Solution:   Anticipate mod_mask to change. (idea by Yukihiro Nakadaira)
Files:      src/getchar.c

Patch 7.4.871
Problem:    Vim leaks memory, when <A HREF="options.html#'wildignore'">'wildignore'</A> filters out all matches.
Solution:   Free the files array when <A HREF="motion.html#it">it</A> becomes empty.
Files:      src/misc1.c

Patch 7.4.872
Problem:    Not using CI services available.
Solution:   Add configuration files for travis and appveyor. (Ken Takata,
            vim-jp, PR #401)
Files:      .travis.yml, appveyor.yml, Filelist

Patch 7.4.873 (after 7.4.866)
Problem:    Compiler warning for unused variable. (Tony Mechelynck)
Solution:   Remove the variable.  Also fix int vs long_u mixup.
Files:      src/if_xcmdsrv.c

Patch 7.4.874
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: When Vim runs inside another application, the size
            isn't right.
Solution:   When in child mode compute the size differently. (Agorgianitis
            Loukas)
Files:      src/gui_w48.c

Patch 7.4.875
Problem:    Not obvious how to contribute.
Solution:   Add a remark about CONTRIBUTING.md to README.md
Files:      README.md

Patch 7.4.876
Problem:    Windows7: when using vim.exe with msys or msys2, conhost.exe
            (console <A HREF="windows.html#window">window</A> provider on Windows7) will freeze or crash.
Solution:   Make original screen buffer active, before executing external
            program.  And when the program is finished, revert to vim's one.
            (Taro Muraoka)
Files:      src/os_win32.c

Patch 7.4.877 (after 7.4.843)
Problem:    &quot;<A HREF="editing.html#:find">:find</A>&quot; sometimes fails. (Excanoe)
Solution:   Compare current characters instead of previous ones.
Files:      src/misc2.c

Patch 7.4.878
Problem:    Coverity error for clearing only one byte of struct.
Solution:   Clear the whole struct. (Dominique Pelle)
Files:      src/ex_docmd.c

Patch 7.4.879
Problem:    Can't see line numbers in nested function calls.
Solution:   Add line number to the file name. (Alberto Fanjul)
Files:      src/eval.c

Patch 7.4.880
Problem:    No build and coverage status.
Solution:   Add links to the README file. (Christian Brabandt)
Files:      README.md

Patch 7.4.881 (after 7.4.879)
Problem:    Test 49 fails.
Solution:   Add line number to check of call stack.
Files:      src/testdir/test49.vim

Patch 7.4.882
Problem:    When leaving the command line <A HREF="windows.html#window">window</A> with <A HREF="pattern.html#CTRL-C">CTRL-C</A> while a
            completion menu is displayed the menu isn't removed.
Solution:   Force a screen update. (Hirohito Higashi)
Files:      src/edit.c

Patch 7.4.883 (after 7.4.818)
Problem:    Block-mode replace works <A HREF="motion.html#characterwise">characterwise</A> instead of blockwise after
            column 147. (Issue #422)
Solution:   Set <A HREF="visual.html#Visual">Visual</A> mode. (Christian Brabandt)
Files:      src/normal.c, src/testdir/test_listlbr.in,
            src/testdir/test_listlbr.ok

Patch 7.4.884
Problem:    Travis also builds on a <A HREF="tagsrch.html#tag">tag</A> push.
Solution:   Filter out <A HREF="tagsrch.html#tag">tag</A> pushes. (Kenichi Ito)
Files:      .travis.yml

Patch 7.4.885
Problem:    When doing an upwards search without <A HREF="editing.html#wildcards">wildcards</A> the search fails if
            the initial directory doesn't exist.
Solution:   Fix the non-wildcard <A HREF="change.html#case">case</A>. (Stefan Kempf)
Files:      src/misc2.c

Patch 7.4.886 (after 7.4.876)
Problem:    Windows7: Switching screen buffer causes flicker when using
            <A HREF="builtin.html#system()">system()</A>.
Solution:   Instead of actually switching screen buffer, duplicate the handle.
            (Yasuhiro Matsumoto)
Files:      src/os_win32.c

Patch 7.4.887
Problem:    Using uninitialized memory for <A HREF="pattern.html#regexp">regexp</A> with back reference.
            (Dominique Pelle)
Solution:   Initialize end_lnum.
Files:      src/regexp_nfa.c

Patch 7.4.888
Problem:    The <A HREF="autocmd.html#OptionSet">OptionSet</A> <A HREF="autocmd.html#autocommands">autocommands</A> are not triggered from <A HREF="builtin.html#setwinvar()">setwinvar()</A>.
Solution:   Do not use switch_win() when not needed. (Hirohito Higashi)
Files:      src/eval.c

Patch 7.4.889
Problem:    Triggering <A HREF="autocmd.html#OptionSet">OptionSet</A> from <A HREF="builtin.html#setwinvar()">setwinvar()</A> isn't tested.
Solution:   Add a test. (Christian Brabandt)
Files:      src/testdir/test_autocmd_option.in,
            src/testdir/test_autocmd_option.ok

Patch 7.4.890
Problem:    Build failure when using dynamic <A HREF="if_pyth.html#python">python</A> but not <A HREF="if_pyth.html#python3">python3</A>.
Solution:   Adjust the #if to also include DYNAMIC_PYTHON3 and UNIX.
Files:      src/if_python3.c

Patch 7.4.891
Problem:    Indentation of array initializer is wrong.
Solution:   Avoid that calling find_start_rawstring() changes the position
            returned by find_start_comment(), add a test. (Hirohito Higashi)
Files:      src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 7.4.892
Problem:    On <A HREF="os_win32.html#MS-Windows">MS-Windows</A> the iconv DLL may have a different name.
Solution:   Also try libiconv2.dll and libiconv-2.dll. (Yasuhiro Matsumoto)
Files:      src/mbyte.c

Patch 7.4.893
Problem:    C indenting is wrong below a &quot;<A HREF="change.html#case">case</A> (foo):&quot; because <A HREF="motion.html#it">it</A> is
            recognized <A HREF="motion.html#as">as</A> a C++ base class construct.  Issue #38.
Solution:   Check for the <A HREF="change.html#case">case</A> keyword.
Files:      src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 7.4.894
Problem:    vimrun.exe is picky about the number of spaces before <A HREF="starting.html#-s">-s</A>.
Solution:   Skip all spaces. (Cam Sinclair)
Files:      src/vimrun.c

Patch 7.4.895
Problem:    Custom command line completion does not work for a command
            containing digits.
Solution:   Skip over the digits. (suggested by Yasuhiro Matsumoto)
Files:      src/ex_docmd.c

Patch 7.4.896
Problem:    Editing a URL, which <A HREF="pi_netrw.html#netrw">netrw</A> should handle, doesn't work.
Solution:   Avoid <A HREF="change.html#changing">changing</A> slashes to backslashes. (Yasuhiro Matsumoto)
Files:      src/fileio.c, src/os_mswin.c

Patch 7.4.897
Problem:    Freeze and crash when there is a sleep in a remote command.
            (Karl Yngve Lervg)
Solution:   Remove a message from the queue before dealing with <A HREF="motion.html#it">it</A>. (James
            Kolb)
Files:      src/if_xcmdsrv.c

Patch 7.4.898
Problem:    The <A HREF="options.html#'fixendofline'">'fixendofline'</A> option is set on with &quot;<A HREF="editing.html#:edit">:edit</A>&quot;.
Solution:   Don't set the option when clearing a buffer. (Yasuhiro Matsumoto)
Files:      src/buffer.c

Patch 7.4.899
Problem:    README file is not optimal.
Solution:   Move buttons, update some text. (closes #460)
Files:      README.txt, README.md

Patch 7.4.900 (after 7.4.899)
Problem:    README file can still be improved
Solution:   Add a couple of links. (Christian Brabandt)
Files:      README.md

Patch 7.4.901
Problem:    When a <A HREF="autocmd.html#BufLeave">BufLeave</A> <A HREF="autocmd.html#autocommand">autocommand</A> changes <A HREF="fold.html#folding">folding</A> in a way <A HREF="motion.html#it">it</A> syncs
            <A HREF="undo.html#undo">undo</A>, <A HREF="undo.html#undo">undo</A> can be corrupted.
Solution:   Prevent <A HREF="undo.html#undo">undo</A> sync. (Jacob Niehus)
Files:      src/popupmnu.c

Patch 7.4.902
Problem:    Problems with using the <A HREF="os_win32.html#MS-Windows">MS-Windows</A> console.
Solution:   Revert patches 7.4.851, 7.4.876 and 7.4.886 until we find a better
            solution. (suggested by Ken Takata)
Files:      src/os_win32.c

Patch 7.4.903
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: When <A HREF="options.html#'encoding'">'encoding'</A> differs from the current code page,
            expanding <A HREF="editing.html#wildcards">wildcards</A> may cause illegal memory access.
Solution:   Allocate a longer buffer. (Ken Takata)
Files:      src/misc1.c

Patch 7.4.904
Problem:    Vim does not provide .desktop files.
Solution:   Include and <A HREF="usr_90.html#install">install</A> .desktop files. (James McCoy, closes #455)
Files:      Filelist, runtime/vim.desktop, runtime/gvim.desktop, src/Makefile

Patch 7.4.905
Problem:    <A HREF="if_pyth.html#Python">Python</A> interface can produce error &quot;vim.message' object has no
            attribute 'isatty&#39;&#34;'.
Solution:   Add dummy isatty(), readable(), etc. (closes #464)
Files:      src/if_py_both.h, src/testdir/test86.in, src/testdir/test86.ok,
            src/testdir/test87.in, src/testdir/test87.ok

Patch 7.4.906
Problem:    On <A HREF="os_win32.html#MS-Windows">MS-Windows</A> the <A HREF="starting.html#viminfo">viminfo</A> file is (always) given the hidden
            attribute. (raulnac)
Solution:   Check the hidden attribute in a different way. (Ken Takata)
Files:      src/ex_cmds.c, src/os_win32.c, src/os_win32.pro

Patch 7.4.907
Problem:    Libraries for dynamically loading interfaces can only be defined
            at compile time.
Solution:   Add <A HREF="options.html#options">options</A> to specify the dll names. (Kazuki Sakamoto,
            closes #452)
Files:      runtime/doc/if_lua.txt, runtime/doc/if_perl.txt,
            runtime/doc/if_pyth.txt, runtime/doc/if_ruby.txt,
            runtime/doc/options.txt, src/if_lua.c, src/if_perl.xs,
            src/if_python.c, src/if_python3.c, src/if_ruby.c, src/option.c,
            src/option.h

Patch 7.4.908 (after 7.4.907)
Problem:    Build error with MingW compiler. (Cesar Romani)
Solution:   Change #if into #ifdef.
Files:      src/if_perl.xs

Patch 7.4.909 (after 7.4.905)
Problem:    &quot;make install&quot; fails.
Solution:   Only try installing desktop files if the destination directory
            exists.
Files:      src/Makefile

Patch 7.4.910 (after 7.4.905)
Problem:    Compiler complains about type punned pointer.
Solution:   Use another way to increment the <A HREF="intro.html#ref">ref</A> <A HREF="intro.html#count">count</A>.
Files:      src/if_py_both.h

Patch 7.4.911
Problem:    <A HREF="term.html#t_Ce">t_Ce</A> and <A HREF="term.html#t_Cs">t_Cs</A> are documented but not supported. (Hirohito Higashi)
Solution:   Define the <A HREF="options.html#options">options</A>.
Files:      src/option.c

Patch 7.4.912
Problem:    Wrong indenting for C++ constructor.
Solution:   Recognize <A HREF="cmdline.html#::.">::.</A>  (Anhong)
Files:      src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 7.4.913
Problem:    No <A HREF="mbyte.html#utf-8">utf-8</A> support for the <A HREF="hangulin.html#hangul">hangul</A> input feature.
Solution:   Add <A HREF="mbyte.html#utf-8">utf-8</A> support. (Namsh)
Files:      src/gui.c, src/hangulin.c, src/proto/hangulin.pro, src/screen.c,
            src/ui.c, runtime/doc/hangulin.txt, src/feature.h

Patch 7.4.914
Problem:    New compiler warning: logical-not-parentheses
Solution:   Silence the warning.
Files:      src/term.c

Patch 7.4.915
Problem:    When removing from <A HREF="options.html#'path'">'path'</A> and then adding, a comma may go missing.
            (Malcolm Rowe)
Solution:   Fix the check for P_ONECOMMA. (closes #471)
Files:      src/option.c, src/testdir/test_options.in,
            src/testdir/test_options.ok

Patch 7.4.916
Problem:    When running out of memory while <A HREF="uganda.html#copying">copying</A> a <A HREF="eval.html#dict">dict</A> memory may be
            freed <A HREF="if_cscop.html#twice">twice</A>. (ZyX)
Solution:   Do not call the garbage collector when running out of memory.
Files:      src/misc2.c

Patch 7.4.917
Problem:    Compiler warning for comparing signed and unsigned.
Solution:   Add a type cast.
Files:      src/hangulin.c

Patch 7.4.918
Problem:    A digit in an option name has problems.
Solution:   Rename 'python3dll' to <A HREF="options.html#'pythonthreedll'">'pythonthreedll'</A>.
Files:      src/option.c, src/option.h, runtime/doc/options.txt

Patch 7.4.919
Problem:    The dll <A HREF="options.html#options">options</A> are not in the <A HREF="options.html#options">options</A> <A HREF="windows.html#window">window</A>.
Solution:   Add the dll <A HREF="options.html#options">options</A>.  And other fixes.
Files:	    runtime/optwin.vim

Patch 7.4.920
Problem:    The rubydll option is not in the <A HREF="options.html#options">options</A> <A HREF="windows.html#window">window</A>.
Solution:   Add the rubydll option.
Files:	    runtime/optwin.vim

Patch 7.4.921 (after 7.4.906)
Problem:    Missing proto file update. (Randall <A HREF="motion.html#W">W</A>. Morris)
Solution:   Add the missing line for mch_ishidden.
Files:      src/proto/os_win32.pro

Patch 7.4.922
Problem:    Leaking memory with &quot;<A HREF="helphelp.html#:helpt">:helpt</A> {dir-not-exists}&quot;.
Solution:   Free dirname. (Dominique Pelle)
Files:      src/ex_cmds.c

Patch 7.4.923
Problem:    Prototypes not always generated.
Solution:   Change #if to OR with PROTO.
Files:      src/window.c

Patch 7.4.924
Problem:    DEVELOPER_DIR gets reset by configure.
Solution:   Do not reset DEVELOPER_DIR when there is no --with-developer-dir
            argument. (Kazuki Sakamoto, closes #482)
Files:      src/configure.in, src/auto/configure

Patch 7.4.925
Problem:    <A HREF="autocmd.html#User">User</A> may <A HREF="change.html#yank">yank</A> or put using the <A HREF="sponsor.html#register">register</A> being recorded in.
Solution:   Add the <A HREF="repeat.html#recording">recording</A> <A HREF="sponsor.html#register">register</A> in the message. (Christian Brabandt,
            closes #470)
Files:      runtime/doc/options.txt, runtime/doc/repeat.txt, src/ops.c,
            src/option.h, src/screen.c

Patch 7.4.926
Problem:    Completing the longest match doesn't work properly with <A HREF="mbyte.html#multibyte">multibyte</A>
            characters.
Solution:   When using <A HREF="mbyte.html#multibyte">multibyte</A> characters use another way to find the
            longest match. (Hirohito Higashi)
Files:      src/ex_getln.c, src/testdir/test_utf8.in, src/testdir/test_utf8.ok

Patch 7.4.927
Problem:    <A HREF="if_ruby.html#Ruby">Ruby</A> crashes when there is a runtime error.
Solution:   Use ruby_options() instead of ruby_process_options(). (Damien)
Files:      src/if_ruby.c

Patch 7.4.928
Problem:    A <A HREF="remote.html#clientserver">clientserver</A> message interrupts handling keys of a <A HREF="map.html#mapping">mapping</A>.
Solution:   Have mch_inchar() send <A HREF="intro.html#control">control</A> back to WaitForChar when <A HREF="motion.html#it">it</A> is
            interrupted by server message. (James Kolb)
Files:      src/os_unix.c

Patch 7.4.929
Problem:    &quot;<A HREF="visual.html#gv">gv</A>&quot; after paste selects one character <A HREF="various.html#less">less</A> if <A HREF="options.html#'selection'">'selection'</A> is
            &quot;<A HREF="motion.html#exclusive">exclusive</A>&quot;.
Solution:   Increment the end position. (Christian Brabandt)
Files:      src/normal.c, src/testdir/test94.in, src/testdir/test94.ok

Patch 7.4.930
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: Most users appear not to like the <A HREF="windows.html#window">window</A> border.
Solution:   Remove WS_EX_CLIENTEDGE. (Ian Halliday)
Files:      src/gui_w32.c

Patch 7.4.931 (after 7.4.929)
Problem:    Test 94 fails on some systems.
Solution:   Set <A HREF="options.html#'encoding'">'encoding'</A> to <A HREF="mbyte.html#utf-8">utf-8</A>.
Files:      src/testdir/test94.in

Patch 7.4.932 (after 7.4.926)
Problem:    test_utf8 has confusing dummy command.
Solution:   Use a real command instead of a colon.
Files:      src/testdir/test_utf8.in

Patch 7.4.933 (after 7.4.926)
Problem:    Crash when using longest completion match.
Solution:   Fix array index.
Files:      src/ex_getln.c

Patch 7.4.934
Problem:    Appveyor also builds on a <A HREF="tagsrch.html#tag">tag</A> push.
Solution:   Add a skip_tags line. (Kenichi Ito, closes #489)
Files:      appveyor.yml

Patch 7.4.935 (after 7.4.932)
Problem:    test_utf8 fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A> when executed with <A HREF="starting.html#gvim">gvim</A>.
Solution:   Use the insert flag on <A HREF="builtin.html#feedkeys()">feedkeys()</A> to put the <A HREF="eval.html#string">string</A> before the
            &quot;<A HREF="cmdline.html#:">:</A>&quot; that was already read when checking for available chars.
Files:      src/testdir/test_utf8.in

Patch 7.4.936
Problem:    Crash when dragging with the mouse.
Solution:   Add safety check for NULL pointer. Check mouse position for valid
            value. (Hirohito Higashi)
Files:      src/window.c, src/term.c

Patch 7.4.937
Problem:    Segfault reading uninitialized memory.
Solution:   Do not read match \z0, <A HREF="motion.html#it">it</A> does not exist. (Marius Gedminas, closes
            #497)
Files:      src/regexp_nfa.c

Patch 7.4.938
Problem:    <A HREF="options.html#X11">X11</A> and <A HREF="gui_x11.html#GTK">GTK</A> have more mouse buttons than Vim supports.
Solution:   Recognize more mouse buttons. (Benoit Pierre, closes #498)
Files:      src/gui_gtk_x11.c, src/gui_x11.c

Patch 7.4.939
Problem:    Memory leak when encountering a <A HREF="syntax.html#syntax">syntax</A> error.
Solution:   Free the memory. (Dominique Pelle)
Files:      src/ex_docmd.c

Patch 7.4.940
Problem:    vt52 <A HREF="terminal.html#terminal">terminal</A> codes are not correct.
Solution:   Move entries outside of #if. (Random)  Adjustments based on
            documented codes.
Files:      src/term.c

Patch 7.4.941
Problem:    There is no way to ignore <A HREF="change.html#case">case</A> only for <A HREF="tagsrch.html#tag">tag</A> searches.
Solution:   Add the <A HREF="options.html#'tagcase'">'tagcase'</A> option. (Gary Johnson)
Files:      runtime/doc/options.txt, runtime/doc/quickref.txt,
            runtime/doc/tagsrch.txt, runtime/doc/usr_29.txt,
            runtime/optwin.vim, src/Makefile, src/buffer.c, src/option.c,
            src/option.h, src/structs.h, src/tag.c,
            src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
            src/testdir/Make_vms.mms, src/testdir/Makefile,
            src/testdir/test_tagcase.in, src/testdir/test_tagcase.ok

Patch 7.4.942 (after 7.4.941)
Problem:    test_tagcase breaks for small builds.
Solution:   Bail out of the test early. (Hirohito Higashi)
Files:      src/testdir/test_tagcase.in

Patch 7.4.943
Problem:    Tests are not run.
Solution:   Add test_writefile to makefiles. (Ken Takata)
Files:      src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
            src/testdir/Make_vms.mms, src/testdir/Makefile

Patch 7.4.944
Problem:    Writing tests for Vim <A HREF="usr_41.html#script">script</A> is hard.
Solution:   Add assertEqual(), assertFalse() and assertTrue() <A HREF="eval.html#functions">functions</A>.  Add
            the <A HREF="eval.html#v:errors">v:errors</A> variable.  Add the runtest <A HREF="usr_41.html#script">script</A>. Add a first new
            style test <A HREF="usr_41.html#script">script</A>.
Files:      src/eval.c, src/vim.h, src/misc2.c, src/testdir/Makefile,
            src/testdir/runtest.vim, src/testdir/test_assert.vim,
            runtime/doc/eval.txt

Patch 7.4.945 (after 7.4.944)
Problem:    New style <A HREF="testing.html#testing">testing</A> is incomplete.
Solution:   Add the runtest <A HREF="usr_41.html#script">script</A> to the <A HREF="eval.html#list">list</A> of distributed files.
            Add the new <A HREF="eval.html#functions">functions</A> to the function overview.
            Rename the <A HREF="eval.html#functions">functions</A> to match Vim function style.
            Move undolevels <A HREF="testing.html#testing">testing</A> into a new style test <A HREF="usr_41.html#script">script</A>.
Files:      Filelist, runtime/doc/usr_41.txt, runtime/doc/eval.txt,
            src/testdir/test_assert.vim, src/testdir/Makefile,
            src/testdir/test_undolevels.vim, src/testdir/test100.in,
            src/testdir/test100.ok

Patch 7.4.946 (after 7.4.945)
Problem:    Missing changes in source file.
Solution:   Include changes to the eval.c file.
Files:      src/eval.c

Patch 7.4.947
Problem:    Test_listchars fails with MingW. (Michael Soyka)
Solution:   Add the test to the ones that need the fileformat fixed.
            (Christian Brabandt)
Files:      src/testdir/Make_ming.mak

Patch 7.4.948
Problem:    Can't build when the <A HREF="insert.html#insert_expand">insert_expand</A> feature is disabled.
Solution:   Add #ifdefs. (Dan Pasanen, closes #499)
Files:      src/eval.c, src/fileio.c

Patch 7.4.949
Problem:    When using <A HREF="options.html#'colorcolumn'">'colorcolumn'</A> and there is a sign with a fullwidth
            character the highlighting is wrong. (Andrew Stewart)
Solution:   Only increment vcol when in the right state. (Christian Brabandt)
Files:      src/screen.c, src/testdir/test_listlbr_utf8.in,
            src/testdir/test_listlbr_utf8.ok

Patch 7.4.950
Problem:    <A HREF="eval.html#v:errors">v:errors</A> is not initialized.
Solution:   Initialize <A HREF="motion.html#it">it</A> to an empty <A HREF="eval.html#list">list</A>. (Thinca)
Files:      src/eval.c

Patch 7.4.951
Problem:    Sorting number strings does not work <A HREF="motion.html#as">as</A> expected. (Luc Hermitte)
Solution:   Add the &quot;<A HREF="pattern.html#N">N</A>&quot; argument to <A HREF="builtin.html#sort()">sort()</A>
Files:      src/eval.c, runtime/doc/eval.txt, src/testdir/test_alot.vim,
            src/testdir/test_sort.vim, src/testdir/Makefile

Patch 7.4.952
Problem:    <A HREF="options.html#'lispwords'">'lispwords'</A> is tested in the old way.
Solution:   Make a new style test for <A HREF="options.html#'lispwords'">'lispwords'</A>.
Files:      src/testdir/test_alot.vim, src/testdir/test_lispwords.vim,
            src/testdir/test100.in, src/testdir/test100.ok,
            src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
            src/testdir/Make_vms.mms, src/testdir/Makefile

Patch 7.4.953
Problem:    When a test <A HREF="usr_41.html#script">script</A> navigates to another buffer the .res file is
            created with the wrong name.
Solution:   Use the &quot;testname&quot; for the .res file. (Damien)
Files:      src/testdir/runtest.vim

Patch 7.4.954
Problem:    When using <A HREF="if_lua.html#Lua">Lua</A> there may be a crash. (issue #468)
Solution:   Avoid using an uninitialized tv. (Yukihiro Nakadaira)
Files:      src/if_lua.c

Patch 7.4.955
Problem:    Vim doesn't recognize .pl6 and .pod6 files.
Solution:   Recognize them <A HREF="motion.html#as">as</A> perl6 and pod6. (Mike Eve, closes #511)
Files:      runtime/filetype.vim

Patch 7.4.956
Problem:    A few more file name extensions not recognized.
Solution:   Add .asciidoc, .bzl, .gradle, etc.
Files:      runtime/filetype.vim

Patch 7.4.957
Problem:    Test_tagcase fails when using another language than English.
Solution:   Set the <A HREF="message.html#messages">messages</A> language to C. (Kenichi Ito)
Files:      src/testdir/test_tagcase.in

Patch 7.4.958
Problem:    Vim checks if the directory &quot;$TMPDIR&quot; exists.
Solution:   Do not check if the name starts with &quot;<A HREF="motion.html#$">$</A>&quot;.
Files:      src/fileio.c

Patch 7.4.959
Problem:    When setting <A HREF="options.html#'term'">'term'</A> the <A HREF="gui.html#clipboard">clipboard</A> ownership is lost.
Solution:   Do not call clip_init(). (James McCoy)
Files:      src/term.c

Patch 7.4.960
Problem:    Detecting every version of nmake is clumsy.
Solution:   Use a tiny C program to get the version of _MSC_VER. (Ken Takata)
Files:      src/Make_mvc.mak

Patch 7.4.961
Problem:    Test107 fails in some circumstances.
Solution:   When using &quot;<A HREF="scroll.html#zt">zt</A>&quot;, &quot;<A HREF="scroll.html#zb">zb</A>&quot; and &quot;<A HREF="spell.html#z=">z=</A>&quot; recompute the fraction.
Files:      src/normal.c, src/window.c, src/proto/window.pro

Patch 7.4.962
Problem:    Cannot run the tests with <A HREF="starting.html#gvim">gvim</A>.  Cannot run individual new tests.
Solution:   Add the <A HREF="starting.html#-f">-f</A> flag. Add new test targets in Makefile.
Files:      src/Makefile, src/testdir/Makefile

Patch 7.4.963
Problem:    test_listlbr_utf8 sometimes fails.
Solution:   Don't use a literal <A HREF="mbyte.html#multibyte">multibyte</A> character but &lt;C-V&gt;uXXXX. Do not
            dump the screen highlighting. (Christian Brabandt, closes #518)
Files:      src/testdir/test_listlbr_utf8.in, src/testdir/test_listlbr_utf8.ok

Patch 7.4.964
Problem:    Test 87 doesn't work in a shadow directory.
Solution:   Handle the extra subdirectory. (James McCoy, closes #515)
Files:      src/testdir/test87.in

Patch 7.4.965
Problem:    On FreeBSD /dev/fd/ files are special.
Solution:   Use is_dev_fd_file() also for FreeBSD. (Derek Schrock, closes #521)
Files:      src/fileio.c

Patch 7.4.966
Problem:    Configure doesn't work with a space in a path.
Solution:   Put paths in <A HREF="quotes.html#quotes">quotes</A>. (James McCoy, closes #525)
Files:      src/configure.in, src/auto/configure

Patch 7.4.967
Problem:    Cross compilation on MS-windows doesn't work well.
Solution:   Tidy up cross compilation across architectures with <A HREF="visual.html#Visual">Visual</A> Studio.
            (Mike Williams)
Files:      src/Make_mvc.mak

Patch 7.4.968
Problem:    test86 and test87 are flaky in Appveyor.
Solution:   Reduce the <A HREF="intro.html#count">count</A> from 8 to 7. (suggested by ZyX)
Files:      src/testdir/test86.in, src/testdir/test87.in

Patch 7.4.969
Problem:    Compiler warnings on Windows x64 build.
Solution:   Add type casts. (Mike Williams)
Files:      src/option.c

Patch 7.4.970
Problem:    Rare crash in getvcol(). (Timo Mihaljov)
Solution:   Check for the buffer being NULL in init_preedit_start_col.
            (Hirohito Higashi, Christian Brabandt)
Files:      src/mbyte.c

Patch 7.4.971
Problem:    The <A HREF="builtin.html#asin()">asin()</A> function can't be used.
Solution:   Sort the function table properly. (Watiko)
Files:      src/eval.c

Patch 7.4.972
Problem:    Memory leak when there is an error in setting an option.
Solution:   Free the saved value (Christian Brabandt)
Files:      src/option.c

Patch 7.4.973
Problem:    When pasting on the command line line breaks result in literal
            <A HREF="motion.html#&lt;CR&gt;">&lt;CR&gt;</A> characters. This makes pasting a long file name difficult.
Solution:   Skip the characters.
Files:      src/ex_getln.c, src/ops.c

Patch 7.4.974
Problem:    When using <A HREF="diff.html#:diffsplit">:diffsplit</A> the cursor jumps to the first line.
Solution:   Put the cursor on the line related to where the cursor was before
            the split.
Files:      src/diff.c

Patch 7.4.975
Problem:    Using &quot;<A HREF="change.html#:sort">:sort</A>&quot; on a very big file sometimes causes text to be
            corrupted. (John Beckett)
Solution:   Copy the line into a buffer before calling ml_append().
Files:      src/ex_cmds.c

Patch 7.4.976
Problem:    When compiling Vim for MSYS2 (linked with msys-2.0.dll), the <A HREF="os_win32.html#Win32">Win32</A>
            <A HREF="gui.html#clipboard">clipboard</A> is not enabled.
Solution:   Recognize MSYS like CYGWIN. (Ken Takata)
Files:      src/configure.in, src/auto/configure

Patch 7.4.977
Problem:    <A HREF="options.html#'linebreak'">'linebreak'</A> does not work properly when using &quot;space&quot; in
            <A HREF="options.html#'listchars'">'listchars'</A>.
Solution:   (Hirohito Higashi, Christian Brabandt)
Files:      src/screen.c, src/testdir/test_listlbr.in,
            src/testdir/test_listlbr.ok

Patch 7.4.978
Problem:    test_cdo fails when using another language than English.
Solution:   Set the language to C. (Dominique Pelle, Kenichi Ito)
Files:      src/testdir/test_cdo.in

Patch 7.4.979
Problem:    When <A HREF="change.html#changing">changing</A> the crypt key the blocks read from disk are not
            decrypted.
Solution:   Also call ml_decrypt_data() when mf_old_key is set. (Ken Takata)
Files:      src/memfile.c

Patch 7.4.980
Problem:    Tests for <A HREF="quickfix.html#:cdo">:cdo</A>, <A HREF="quickfix.html#:ldo">:ldo</A>, etc. are outdated.
Solution:   Add new style tests for these commands. (Yegappan Lakshmanan)
Files:      src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
            src/testdir/Make_vms.mms, src/testdir/Makefile,
            src/testdir/test_cdo.in, src/testdir/test_cdo.ok,
            src/testdir/test_cdo.vim

Patch 7.4.981
Problem:    An error in a test <A HREF="usr_41.html#script">script</A> goes unnoticed.
Solution:   Source the test <A HREF="usr_41.html#script">script</A> inside try/catch. (Hirohito Higashi)
Files:      src/testdir/runtest.vim

Patch 7.4.982
Problem:    Keeping the <A HREF="eval.html#list">list</A> of tests updated is a hassle.
Solution:   Move the <A HREF="eval.html#list">list</A> to a separate file, so that <A HREF="motion.html#it">it</A> only needs to be
            updated in one place.
Files:      src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
            src/testdir/Make_vms.mms, src/testdir/Makefile,
            src/testdir/Make_all.mak

Patch 7.4.983
Problem:    Executing one test after &quot;make testclean&quot; doesn't work.
Solution:   Add a dependency on test1.out.
Files:      src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
            src/testdir/Make_vms.mms, src/testdir/Makefile,
            src/testdir/Make_all.mak

Patch 7.4.984
Problem:    <A HREF="builtin.html#searchpos()">searchpos()</A> always starts searching in the first column, which is
            not what some people expect. (Brett Stahlman)
Solution:   Add the '<A HREF="index.html#z">z</A>' flag: start at the specified column.
Files:      src/vim.h, src/eval.c, src/search.c,
            src/testdir/test_searchpos.vim, src/testdir/test_alot.vim,
            runtime/doc/eval.txt

Patch 7.4.985
Problem:    Can't build with <A HREF="if_ruby.html#Ruby">Ruby</A> 2.3.0.
Solution:   Use the new TypedData_XXX <A HREF="map.html#macro">macro</A> family instead of Data_XXX. Use
            TypedData. (Ken Takata)
Files:      src/if_ruby.c

Patch 7.4.986
Problem:    Test49 doesn't work on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.  test70 is listed <A HREF="if_cscop.html#twice">twice</A>.
Solution:   Move test49 to the group not used on <A HREF="os_amiga.html#Amiga">Amiga</A> and <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
            Remove test70 from SCRIPTS_WIN32.
Files:      src/testdir/Make_all.mak, src/testdir/Make_dos.mak

Patch 7.4.987 (after 7.4.985)
Problem:    Can't build with <A HREF="if_ruby.html#Ruby">Ruby</A> 1.9.2.
Solution:   Require Rub 2.0 for defining USE_TYPEDDATA.
Files:      src/if_ruby.c

Patch 7.4.988 (after 7.4.982)
Problem:    Default test target is test49.out.
Solution:   Add a build rule before including Make_all.mak.
Files:      src/testdir/Make_dos.mak, src/testdir/Make_amiga.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
            src/testdir/Make_vms.mms, src/testdir/Makefile

Patch 7.4.989
Problem:    Leaking memory when hash_add() fails. Coverity error 99126.
Solution:   When hash_add() fails free the memory.
Files:      src/eval.c

Patch 7.4.990
Problem:    Test 86 fails on AppVeyor.
Solution:   Do some registry magic. (Ken Takata)
Files:      appveyor.yml

Patch 7.4.991
Problem:    When running new style tests the output is not visible.
Solution:   Add the testdir/messages file and show <A HREF="motion.html#it">it</A>.  Update the <A HREF="eval.html#list">list</A> of
            test names.
Files:      src/Makefile, src/testdir/Makefile, src/testdir/runtest.vim

Patch 7.4.992
Problem:    Makefiles for <A HREF="os_win32.html#MS-Windows">MS-Windows</A> in src/po are outdated.
Solution:   Make them work. (Ken Takata, Taro Muraoka)
Files:      src/po/Make_cyg.mak, src/po/Make_ming.mak, src/po/Make_mvc.mak,
            src/po/README_mingw.txt, src/po/README_mvc.txt

Patch 7.4.993
Problem:    Test 87 is flaky on AppVeyor.
Solution:   Reduce the minimum background thread <A HREF="intro.html#count">count</A>.
Files:      src/testdir/test86.in, src/testdir/test87.in

Patch 7.4.994
Problem:    New style tests are not run on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Add the new style tests.
Files:      src/testdir/Make_dos.mak

Patch 7.4.995
Problem:    gdk_pixbuf_new_from_inline() is deprecated.
Solution:   Generate auto/gui_gtk_gresources.c. (Kazunobu Kuriyama,
            closes #507)
Files:      src/Makefile, src/auto/configure, src/config.h.in,
            src/config.mk.in, src/configure.in, src/gui_gtk.c,
            src/gui_gtk_gresources.xml, src/gui_gtk_x11.c,
            src/proto/gui_gtk_gresources.pro,
            pixmaps/stock_vim_build_tags.png, pixmaps/stock_vim_find_help.png,
            pixmaps/stock_vim_save_all.png,
            pixmaps/stock_vim_session_load.png,
            pixmaps/stock_vim_session_new.png,
            pixmaps/stock_vim_session_save.png, pixmaps/stock_vim_shell.png,
            pixmaps/stock_vim_window_maximize.png,
            pixmaps/stock_vim_window_maximize_width.png,
            pixmaps/stock_vim_window_minimize.png,
            pixmaps/stock_vim_window_minimize_width.png,
            pixmaps/stock_vim_window_split.png,
            pixmaps/stock_vim_window_split_vertical.png

Patch 7.4.996
Problem:    New GDK files and testdir/Make_all.mak missing from <A HREF="intro.html#distribution">distribution</A>.
            PC build instructions are outdated.
Solution:   Add the file to the <A HREF="eval.html#list">list</A>.  Update PC build instructions.
Files:      Filelist, Makefile

Patch 7.4.997
Problem:    &quot;make shadow&quot; was sometimes broken.
Solution:   Add a test for <A HREF="motion.html#it">it</A>. (James McCoy, closes #520)
Files:      .travis.yml

Patch 7.4.998
Problem:    Running tests in shadow directory fails.  Test 49 fails.
Solution:   Link more files for the shadow directory. Make test 49 ends up in
            the right buffer.
Files:      src/Makefile, src/testdir/test49.in

Patch 7.4.999
Problem:    &quot;make shadow&quot; creates a broken link. (Tony Mechelynck)
Solution:   Remove vimrc.unix from the <A HREF="eval.html#list">list</A>.
Files:      src/Makefile

Patch 7.4.1000
Problem:    Test 49 is slow and doesn't work on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Start moving parts of test 49 to test_viml.
Files:      src/Makefile, src/testdir/runtest.vim, src/testdir/test_viml.vim,
            src/testdir/test49.vim, src/testdir/test49.ok

Patch 7.4.1001 (after 7.4.1000)
Problem:    test_viml isn't run.
Solution:   Include change in makefile.
Files:      src/testdir/Make_all.mak

Patch 7.4.1002
Problem:    Cannot run an individual test on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Move the rule to run test1 downwards. (Ken Takata)
Files:      src/testdir/Make_dos.mak

Patch 7.4.1003
Problem:    Travis could check a few more things.
Solution:   Run autoconf on one of the builds. (James McCoy, closes #510)
            Also build with normal features.
Files:      .travis.yml

Patch 7.4.1004
Problem:    Using Makefile when auto/config.mk does not exist results in
            warnings.
Solution:   Use default values for essential <A HREF="eval.html#variables">variables</A>.
Files:      src/Makefile

Patch 7.4.1005
Problem:    Vim users are not always happy.
Solution:   Make them happy.
Files:      src/ex_cmds.h, src/ex_cmds.c, src/proto/ex_cmds.pro

Patch 7.4.1006
Problem:    The fix in patch 7.3.192 is not tested.
Solution:   Add a test, one for each <A HREF="pattern.html#regexp">regexp</A> engine. (Elias Diem)
Files:      src/testdir/test44.in, src/testdir/test44.ok,
            src/testdir/test99.in, src/testdir/test99.ok

Patch 7.4.1007
Problem:    When a symbolic link points to a file in the root directory, the
            swapfile is not correct.
Solution:   Do not try getting the full name of a file in the root directory.
            (Milly, closes #501)
Files:      src/os_unix.c

Patch 7.4.1008
Problem:    The <A HREF="os_os2.html#OS/2">OS/2</A> code pollutes the source while nobody uses <A HREF="motion.html#it">it</A> these days.
Solution:   Drop the support for <A HREF="os_os2.html#OS/2">OS/2</A>.
Files:      src/feature.h, src/globals.h, src/macros.h, src/option.h,
            src/os_unix.c, src/os_unix.h, src/proto/os_unix.pro, src/vim.h,
            src/digraph.c, src/eval.c, src/ex_cmds.c, src/ex_docmd.c,
            src/ex_getln.c, src/fileio.c, src/getchar.c, src/memline.c,
            src/misc1.c, src/misc2.c, src/netbeans.c, src/option.c,
            src/term.c, src/ui.c, src/window.c, src/os_os2_cfg.h,
            src/Make_os2.mak, src/testdir/Make_os2.mak, src/testdir/os2.vim,
            src/INSTALL, runtime/doc/os_os2.txt

Patch 7.4.1009
Problem:    There are still #ifdefs for ARCHIE.
Solution:   Remove references to ARCHIE, the code was removed in Vim 5.
Files:      src/ex_cmds.c, src/ex_docmd.c, src/fileio.c, src/main.c,
            src/memline.c, src/option.c, src/term.c

Patch 7.4.1010
Problem:    Some developers are unhappy while running tests.
Solution:   Add a test and some color.
Files:      src/ex_cmds.c, src/testdir/test_assert.vim

Patch 7.4.1011
Problem:    Can't build with Strawberry <A HREF="if_perl.html#Perl">Perl</A>.
Solution:   Include stdbool.h. (Ken Takata, closes #328)
Files:      Filelist, src/Make_mvc.mak, src/if_perl_msvc/stdbool.h

Patch 7.4.1012
Problem:    Vim overwrites the value of $PYTHONHOME.
Solution:   Do not set $PYTHONHOME if <A HREF="motion.html#it">it</A> is already set. (Kazuki Sakamoto,
            closes #500)
Files:      src/if_python.c, src/if_python3.c

Patch 7.4.1013
Problem:    The local value of <A HREF="options.html#'errorformat'">'errorformat'</A> is not used for &quot;<A HREF="quickfix.html#:lexpr">:lexpr</A>&quot; and
            &quot;<A HREF="quickfix.html#:cexpr">:cexpr</A>&quot;.
Solution:   Use the local value if <A HREF="motion.html#it">it</A> exists. (Christian Brabandt) Adjust the
            help for this.
Files:      runtime/doc/quickfix.txt, src/quickfix.c

Patch 7.4.1014
Problem:    `fnamemodify('.', ':.')` returns an empty <A HREF="eval.html#string">string</A> in Cygwin.
Solution:   Use CCP_RELATIVE in the call to cygwin_conv_path. (Jacob Niehus,
            closes #505)
Files:      src/os_unix.c

Patch 7.4.1015
Problem:    The column is not restored properly when the <A HREF="pi_paren.html#matchparen">matchparen</A> <A HREF="usr_05.html#plugin">plugin</A> is
            used in <A HREF="insert.html#Insert">Insert</A> mode and the cursor is after the end of the line.
Solution:   Set the curswant flag. (Christian Brabandt).  Also fix
            highlighting the match of the character before the cursor.
Files:      src/eval.c, runtime/plugin/matchparen.vim

Patch 7.4.1016
Problem:    Still a few <A HREF="os_os2.html#OS/2">OS/2</A> pieces remain.
Solution:   Delete more.
Files:      Filelist, README_os2.txt, testdir/todos.vim, src/xxd/Make_os2.mak

Patch 7.4.1017
Problem:    When there is a <A HREF="intro.html#backslash">backslash</A> in an option &quot;<A HREF="options.html#:set">:set</A> -=&quot; doesn't work.
Solution:   Handle a <A HREF="intro.html#backslash">backslash</A> better. (Jacob Niehus)  Add a new test, <A HREF="diff.html#merge">merge</A>
            in old test.
Files:      src/testdir/test_cdo.vim, src/testdir/test_set.vim,
            src/testdir/test_alot.vim, src/option.c, src/testdir/test_set.in,
            src/testdir/test_set.ok, src/Makefile

Patch 7.4.1018 (after 7.4.1017)
Problem:    Failure running tests.
Solution:   Add missing change to <A HREF="eval.html#list">list</A> of old style tests.
Files:      src/testdir/Make_all.mak

Patch 7.4.1019
Problem:    Directory listing of &quot;src&quot; is too long.
Solution:   Rename the resources file to make <A HREF="motion.html#it">it</A> shorter.
Files:      src/gui_gtk_gresources.xml, src/gui_gtk_res.xml, src/Makefile,
            Filelist

Patch 7.4.1020
Problem:    On <A HREF="os_win32.html#MS-Windows">MS-Windows</A> there is no target to run tests with <A HREF="starting.html#gvim">gvim</A>.
Solution:   Add the testgvim target.
Files:      src/Make_mvc.mak

Patch 7.4.1021
Problem:    Some makefiles are outdated.
Solution:   Add a note to warn developers.
Files:      src/Make_manx.mak, src/Make_bc3.mak, src/Make_bc5.mak,
            src/Make_djg.mak, src/Make_w16.mak

Patch 7.4.1022
Problem:    The README file contains some outdated information.
Solution:   Update the information about supported systems.
Files:      README.txt, README.md

Patch 7.4.1023
Problem:    The <A HREF="intro.html#distribution">distribution</A> files for <A HREF="os_win32.html#MS-Windows">MS-Windows</A> use CR-LF, which is
            inconsistent with what one gets from github.
Solution:   Use LF in the <A HREF="intro.html#distribution">distribution</A> files.
Files:      Makefile

Patch 7.4.1024
Problem:    Interfaces for <A HREF="os_win32.html#MS-Windows">MS-Windows</A> are outdated.
Solution:   Use <A HREF="if_pyth.html#Python">Python</A> 2.7.10, <A HREF="if_pyth.html#Python">Python</A> 3.4.4, <A HREF="if_perl.html#Perl">Perl</A> 5.22, <A HREF="if_tcl.html#TCL">TCL</A> 8.6.
Files:      src/bigvim.bat

Patch 7.4.1025
Problem:    Version in installer needs to be updated manually.
Solution:   Generate a file with the version number. (Guopeng Wen)
Files:      Makefile, nsis/gvim.nsi, nsis/gvim_version.nsh

Patch 7.4.1026
Problem:    When using MingW the tests <A HREF="diff.html#do">do</A> not clean up all files.  E.g. test
            17 leaves Xdir1 behind. (Michael Soyka)
Solution:   Also delete directories, like Make_dos.mak.  Delete files after
            directories to reduce warnings.
Files:      src/testdir/Make_ming.mak, src/testdir/Make_dos.mak

Patch 7.4.1027
Problem:    No support for binary numbers.
Solution:   Add &quot;bin&quot; to <A HREF="options.html#'nrformats'">'nrformats'</A>. (Jason Schulz)
Files:      runtime/doc/change.txt, runtime/doc/eval.txt,
            runtime/doc/version7.txt, src/charset.c, src/eval.c,
            src/ex_cmds.c, src/ex_getln.c, src/misc2.c, src/ops.c,
            src/option.c, src/proto/charset.pro, src/spell.c,
            src/testdir/test57.in, src/testdir/test57.ok,
            src/testdir/test58.in, src/testdir/test58.ok,
            src/testdir/test_increment.in, src/testdir/test_increment.ok,
            src/vim.h

Patch 7.4.1028
Problem:    Nsis version file missing from the <A HREF="intro.html#distribution">distribution</A>.
Solution:   Add the file to the <A HREF="eval.html#list">list</A>.
Files:      Filelist

Patch 7.4.1029 (after 7.4.1027)
Problem:    test_increment fails on systems with 32 bit long.
Solution:   Only test with 32 bits.
Files:      src/testdir/test_increment.in, src/testdir/test_increment.ok

Patch 7.4.1030
Problem:    test49 is still slow.
Solution:   Move more tests from old to new style.
Files:      src/testdir/test_viml.vim, src/testdir/test49.vim,
            src/testdir/test49.ok, src/testdir/runtest.vim

Patch 7.4.1031
Problem:    Can't build with <A HREF="if_pyth.html#Python">Python</A> interface using MingW.
Solution:   Update the Makefile. (Yasuhiro Matsumoto)
Files:      src/INSTALLpc.txt, src/Make_cyg_ming.mak

Patch 7.4.1032
Problem:    message from <A HREF="testing.html#assert_false()">assert_false()</A> does not look nice.
Solution:   Handle missing sourcing_name. Use right number of spaces. (Watiko)
            Don't use line number if it's zero.
Files:      src/eval.c

Patch 7.4.1033
Problem:    Memory use on <A HREF="os_win32.html#MS-Windows">MS-Windows</A> is very conservative.
Solution:   Use the global memory status to estimate amount of memory.
            (Mike Williams)
Files:      src/os_win32.c, src/os_win32.h, src/proto/os_win32.pro

Patch 7.4.1034
Problem:    There is no test for the <A HREF="options.html#'backspace'">'backspace'</A> option behavior.
Solution:   Add a test. (Hirohito Higashi)
Files:      src/testdir/test_alot.vim, src/testdir/test_backspace_opt.vim

Patch 7.4.1035
Problem:    An <A HREF="intro.html#Ex">Ex</A> range gets adjusted for folded lines even when the range is
            not using line numbers.
Solution:   Only adjust line numbers for <A HREF="fold.html#folding">folding</A>. (Christian Brabandt)
Files:      runtime/doc/fold.txt, src/ex_docmd.c

Patch 7.4.1036
Problem:    Only terminals with up to 256 colors work properly.
Solution:   Use the 256 color behavior for all terminals with 256 or more
            colors. (Robert de Bath, closes #504)
Files:      src/syntax.c

Patch 7.4.1037
Problem:    Using &quot;q!&quot; when there is a modified hidden buffer does not unload
            the current buffer, resulting in the need to <A HREF="editing.html#abandon">abandon</A> <A HREF="motion.html#it">it</A> again.
Solution:   When using &quot;q!&quot; unload the current buffer when needed. (Yasuhiro
            Matsumoto, Hirohito Higashi)
Files:      src/testdir/test31.in, src/testdir/test31.ok,
            runtime/doc/editing.txt, src/ex_cmds2.c, src/ex_docmd.c,
            src/gui.c, src/gui_gtk_x11.c, src/os_unix.c,
            src/proto/ex_cmds2.pro

Patch 7.4.1038
Problem:    Still get a warning for a deprecated function with gdk-pixbuf
            2.31.
Solution:   Change minimum minor version from 32 to 31.
Files:      src/configure.in, src/auto/configure

Patch 7.4.1039 (after 7.4.1037)
Problem:    Test 31 fails with small build.
Solution:   Bail out for small build. (Hirohito Higashi)
Files:      src/testdir/test31.in

Patch 7.4.1040
Problem:    The tee command is not available on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Adjust tee.c for MSVC and add a makefile. (Yasuhiro Matsumoto)
Files:      src/tee/tee.c, src/tee/Make_mvc.mak, src/Make_mvc.mak

Patch 7.4.1041
Problem:    Various small things.
Solution:   Add file to <A HREF="eval.html#list">list</A> of distributed files.  Adjust README.  Fix typo.
Files:      Filelist, src/testdir/README.txt, src/testdir/test_charsearch.in,
            src/INSTALLmac.txt

Patch 7.4.1042
Problem:    g-CTRL-G shows the <A HREF="motion.html#word">word</A> <A HREF="intro.html#count">count</A>, but there is no way to get the <A HREF="motion.html#word">word</A>
            <A HREF="intro.html#count">count</A> in a <A HREF="usr_41.html#script">script</A>.
Solution:   Add the <A HREF="builtin.html#wordcount()">wordcount()</A> function. (Christian Brabandt)
Files:      runtime/doc/editing.txt, runtime/doc/eval.txt,
            runtime/doc/usr_41.txt, src/eval.c, src/normal.c, src/ops.c,
            src/proto/ops.pro, src/testdir/test_wordcount.in,
            src/testdir/test_wordcount.ok, src/testdir/Make_all.mak

Patch 7.4.1043
Problem:    Another small thing.
Solution:   Now really update the <A HREF="os_mac.html#Mac">Mac</A> <A HREF="usr_90.html#install">install</A> text.
Files:      src/INSTALLmac.txt

Patch 7.4.1044 (after 7.4.1042)
Problem:    Can't build without the <A HREF="various.html#+eval">+eval</A> feature.
Solution:   Add #ifdef.
Files:      src/ops.c

Patch 7.4.1045
Problem:    Having shadow and coverage on the same build results in the source
            files not being available in the coverage <A HREF="starting.html#view">view</A>.
Solution:   Move using shadow to the normal build.
Files:      .travis.yml

Patch 7.4.1046
Problem:    No test coverage for <A HREF="gui.html#menus">menus</A>.
Solution:   Load the standard <A HREF="gui.html#menus">menus</A> and check there is no error.
Files:      src/testdir/test_menu.vim, src/testdir/test_alot.vim

Patch 7.4.1047 (after patch 7.4.1042)
Problem:    Tests fail on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Set <A HREF="options.html#'selection'">'selection'</A> to <A HREF="motion.html#inclusive">inclusive</A>.
Files:      src/testdir/test_wordcount.in

Patch 7.4.1048 (after patch 7.4.1047)
Problem:    Wordcount test still fail on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Set <A HREF="options.html#'fileformat'">'fileformat'</A> to &quot;<A HREF="os_unix.html#unix">unix</A>&quot;.
Files:      src/testdir/test_wordcount.in

Patch 7.4.1049 (after patch 7.4.1048)
Problem:    Wordcount test still fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Set <A HREF="options.html#'fileformats'">'fileformats'</A> to &quot;<A HREF="os_unix.html#unix">unix</A>&quot;.
Files:      src/testdir/test_wordcount.in

Patch 7.4.1050
Problem:    Warning for unused var with tiny features. (Tony Mechelynck)
Solution:   Add #ifdef.  Use vim_snprintf().  Reduce number of statements.
Files:      src/ops.c

Patch 7.4.1051
Problem:    Segfault when unletting &quot;<A HREF="intro.html#count">count</A>&quot;.
Solution:   Check for readonly and locked first. (Dominique Pelle)
            Add a test.
Files:      src/eval.c, src/testdir/test_alot.vim, src/testdir/test_unlet.vim

Patch 7.4.1052
Problem:    Illegal memory access with weird <A HREF="syntax.html#syntax">syntax</A> command. (Dominique Pelle)
Solution:   Check for column past end of line.
Files:      src/syntax.c

Patch 7.4.1053
Problem:    Insufficient <A HREF="testing.html#testing">testing</A> for <A HREF="quickfix.html#quickfix">quickfix</A> commands.
Solution:   Add a new style <A HREF="quickfix.html#quickfix">quickfix</A> test. (Yegappan Lakshmanan)
Files:      src/testdir/Make_all.mak, src/testdir/test_quickfix.vim

Patch 7.4.1054
Problem:    Illegal memory access.
Solution:   Check for missing <A HREF="pattern.html#pattern">pattern</A>. (Dominique Pelle)
Files:      src/syntax.c

Patch 7.4.1055
Problem:    Running &quot;make newtests&quot; in src/testdir has no output.
Solution:   <A HREF="eval.html#List">List</A> the <A HREF="message.html#messages">messages</A> file when a test fails. (Christian Brabandt)
            Update the <A HREF="eval.html#list">list</A> of tests.
Files:      src/Makefile, src/testdir/Makefile

Patch 7.4.1056
Problem:    Don't know why finding <A HREF="spell.html#spell">spell</A> suggestions is slow.
Solution:   Add some code to gather <A HREF="repeat.html#profiling">profiling</A> information.
Files:      src/spell.c

Patch 7.4.1057
Problem:    Typos in the <A HREF="options.html#:options">:options</A> <A HREF="windows.html#window">window</A>.
Solution:   Fix the typos. (Dominique Pelle)
Files:      runtime/optwin.vim

Patch 7.4.1058
Problem:    It is not possible to test code that is only reached when memory
            allocation fails.
Solution:   Add the alloc_fail() function.  Try <A HREF="motion.html#it">it</A> out with <A HREF="quickfix.html#:vimgrep">:vimgrep</A>.
Files:      runtime/doc/eval.txt, src/globals.h, src/eval.c, src/quickfix.c,
            src/misc2.c, src/proto/misc2.pro, src/testdir/test_quickfix.vim

Patch 7.4.1059
Problem:    Code will never be executed.
Solution:   Remove the code.
Files:      src/quickfix.c

Patch 7.4.1060
Problem:    Instructions for <A HREF="editing.html#writing">writing</A> tests are outdated.
Solution:   Mention Make_all.mak.  Add steps for new style tests.
Files:      src/testdir/README.txt

Patch 7.4.1061
Problem:    Compiler warning for ignoring return value of fwrite().
Solution:   Do use the return value. (idea: Charles Campbell)
Files:      src/misc2.c, src/proto/misc2.pro

Patch 7.4.1062
Problem:    Building with <A HREF="if_ruby.html#Ruby">Ruby</A> on <A HREF="os_win32.html#MS-Windows">MS-Windows</A> requires a lot of arguments.
Solution:   Make <A HREF="motion.html#it">it</A> simpler. (Ken Takata)
Files:      src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 7.4.1063
Problem:    TCL_VER_LONG and DYNAMIC_TCL_VER are not set when building with
            Cygwin and MingW.
Solution:   Add TCL_VER_LONG and DYNAMIC_TCL_VER to the makefile. (Ken Takata)
Files:      src/Make_cyg_ming.mak

Patch 7.4.1064
Problem:    When a <A HREF="spell.html#spell">spell</A> file has single <A HREF="print.html#letter">letter</A> compounding creating
            suggestions takes an awful long time.
Solution:   Add the NOCOMPOUNDSUGS flag.
Files:      runtime/doc/spell.txt, src/spell.c

Patch 7.4.1065
Problem:    Cannot use the &quot;dll&quot; <A HREF="options.html#options">options</A> on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Support the <A HREF="options.html#options">options</A> on all platforms.  Use the built-in name <A HREF="motion.html#as">as</A>
            the default, so that it's clear what Vim is looking for.
Files:      src/if_python.c, src/if_python3.c, src/if_lua.c, src/if_perl.xs,
            src/if_ruby.c, src/option.c, runtime/doc/options.txt, src/Makefile

Patch 7.4.1066 (after 7.4.1065)
Problem:    Build fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Adjust the #ifdefs for &quot;dll&quot; <A HREF="options.html#options">options</A>.
Files:      src/option.h

Patch 7.4.1067 (after 7.4.1065)
Problem:    Can't build with MingW and <A HREF="if_pyth.html#Python">Python</A> on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Move the build flags to CFLAGS.
Files:      src/Make_cyg_ming.mak

Patch 7.4.1068
Problem:    Wrong way to check for unletting internal <A HREF="eval.html#variables">variables</A>.
Solution:   Use a better way. (Olaf Dabrunz)
Files:      src/testdir/test_unlet.c, src/eval.c

Patch 7.4.1069
Problem:    Compiler warning for unused argument.
Solution:   Add UNUSED.
Files:      src/misc2.c

Patch 7.4.1070
Problem:    The <A HREF="if_tcl.html#Tcl">Tcl</A> interface can't be loaded dynamically on <A HREF="os_unix.html#Unix">Unix</A>.
Solution:   Make <A HREF="motion.html#it">it</A> possible to load <A HREF="motion.html#it">it</A> dynamically. (Ken Takata)
Files:      runtime/doc/if_tcl.txt, runtime/doc/options.txt,
            runtime/doc/quickref.txt, runtime/optwin.vim, src/Makefile,
            src/config.h.in, src/configure.in, src/auto/configure,
            src/if_tcl.c, src/option.c, src/option.h

Patch 7.4.1071
Problem:    New style tests are executed in arbitrary order.
Solution:   Sort the test function names. (Hirohito Higashi)
            Fix the <A HREF="quickfix.html#quickfix">quickfix</A> test that depended on the order.
Files:      src/testdir/runtest.vim, src/testdir/test_quickfix.vim

Patch 7.4.1072
Problem:    Increment test is old style.
Solution:   Make the increment test a new style test. (Hirohito Higashi)
Files:      src/Makefile, src/testdir/Make_all.mak,
            src/testdir/test_increment.in, src/testdir/test_increment.ok,
            src/testdir/test_increment.vim

Patch 7.4.1073
Problem:    Alloc_id depends on numbers, may use the same one <A HREF="if_cscop.html#twice">twice</A>.  It's not
            clear from the number what it's for.
Solution:   Use an enum.  Add a function to lookup the enum value from the
            name.
Files:      src/misc2.c, src/vim.h, src/alloc.h, src/globals.h,
            src/testdir/runtest.vim, src/proto/misc2.pro,
            src/testdir/test_quickfix.vim

Patch 7.4.1074
Problem:    Warning from VC2015 compiler.
Solution:   Add a type cast. (Mike Williams)
Files:      src/gui_dwrite.cpp

Patch 7.4.1075
Problem:    Crash when using an invalid command.
Solution:   Fix generating the error message. (Dominique Pelle)
Files:      src/ex_docmd.c

Patch 7.4.1076
Problem:    <A HREF="change.html#CTRL-A">CTRL-A</A> does not work well in right-left mode.
Solution:   Remove reversing the line, add a test. (Hirohito Higashi)
Files:      src/ops.c, src/testdir/test_increment.vim

Patch 7.4.1077
Problem:    The build instructions for <A HREF="os_win32.html#MS-Windows">MS-Windows</A> are incomplete.
Solution:   Add explanations for how to build with various interfaces. (Ken
            Takata)
Files:      src/INSTALLpc.txt

Patch 7.4.1078
Problem:    MSVC: &quot;make clean&quot; doesn't cleanup in the tee directory.
Solution:   Add the commands to cleanup tee. (Erich Ritz)
Files:      src/Make_mvc.mak

Patch 7.4.1079 (after 7.4.1073)
Problem:    New include file missing from <A HREF="intro.html#distribution">distribution</A>.  Missing changes to
            <A HREF="quickfix.html#quickfix">quickfix</A> code.
Solution:   Add alloc.h to the <A HREF="eval.html#list">list</A> of distributed files. Use the enum in
            <A HREF="quickfix.html#quickfix">quickfix</A> code.
Files:      Filelist, src/quickfix.c

Patch 7.4.1080
Problem:    VS2015 has a function HandleToLong() that is shadowed by the <A HREF="map.html#macro">macro</A>
            that Vim defines.
Solution:   Do not define HandleToLong() for MSVC version 1400 and later.
            (Mike Williams)
Files:      src/gui_w32.c

Patch 7.4.1081
Problem:    No test for what previously caused a crash.
Solution:   Add test for unletting errmsg.
Files:      src/testdir/test_unlet.vim

Patch 7.4.1082
Problem:    The <A HREF="if_tcl.html#Tcl">Tcl</A> interface is always skipping memory free on exit.
Solution:   Only skip for dynamically loaded <A HREF="if_tcl.html#Tcl">Tcl</A>.
Files:      src/if_tcl.c

Patch 7.4.1083
Problem:    Building GvimExt with VS2015 may fail.
Solution:   Adjust the makefile. (Mike Williams)
Files:      src/GvimExt/Makefile

Patch 7.4.1084
Problem:    Using &quot;<A HREF="repeat.html#.">.</A>&quot; to repeat <A HREF="change.html#CTRL-A">CTRL-A</A> in <A HREF="visual.html#Visual">Visual</A> mode increments the wrong
            numbers.
Solution:   Append right size to the <A HREF="undo.html#redo">redo</A> buffer. (Ozaki Kiichi)
Files:      src/normal.c, src/testdir/test_increment.vim

Patch 7.4.1085
Problem:    The <A HREF="change.html#CTRL-A">CTRL-A</A> and <A HREF="change.html#CTRL-X">CTRL-X</A> commands <A HREF="diff.html#do">do</A> not update the <A HREF="motion.html#'[">'[</A> and <A HREF="motion.html#']">']</A> marks.
Solution:   (Yukihiro Nakadaira)
Files:      src/ops.c, src/testdir/test_marks.in, src/testdir/test_marks.ok

Patch 7.4.1086
Problem:    Crash with an extremely long buffer name.
Solution:   Limit the return value of vim_snprintf(). (Dominique Pelle)
Files:      src/buffer.c

Patch 7.4.1087
Problem:    <A HREF="change.html#CTRL-A">CTRL-A</A> and <A HREF="change.html#CTRL-X">CTRL-X</A> <A HREF="diff.html#do">do</A> not work properly with blockwise visual
            selection if there is a mix of <A HREF="intro.html#Tab">Tab</A> and spaces.
Solution:   Add OP_NR_ADD and OP_NR_SUB. (Hirohito Higashi)
Files:      src/testdir/test_increment.vim, src/normal.c, src/ops.c,
            src/proto/ops.pro, src/vim.h

Patch 7.4.1088
Problem:    Coverity warns for uninitialized <A HREF="eval.html#variables">variables</A>.  Only one is an actual
            problem.
Solution:   Move the conditions.  Don't use endpos if handling an error.
Files:      src/ops.c

Patch 7.4.1089
Problem:    Repeating <A HREF="change.html#CTRL-A">CTRL-A</A> doesn't work.
Solution:   Call prep_redo_cmd(). (Hirohito Higashi)
Files:      src/normal.c, src/testdir/test_increment.vim

Patch 7.4.1090
Problem:    No tests for <A HREF="print.html#:hardcopy">:hardcopy</A> and related <A HREF="options.html#options">options</A>.
Solution:   Add test_hardcopy.
Files:      src/testdir/test_hardcopy.vim, src/Makefile,
            src/testdir/Make_all.mak

Patch 7.4.1091
Problem:    When making a change while need_wait_return is set there is a two
            second delay.
Solution:   Do not assume the <A HREF="usr_11.html#ATTENTION">ATTENTION</A> prompt was given when need_wait_return
            was set already.
Files:      src/misc1.c

Patch 7.4.1092
Problem:    It is not simple to test for an exception and give a proper error
            message.
Solution:   Add <A HREF="testing.html#assert_exception()">assert_exception()</A>.
Files:      src/eval.c, runtime/doc/eval.txt

Patch 7.4.1093
Problem:    Typo in test goes unnoticed.
Solution:   Fix the typo. Give error for wrong arguments to <A HREF="builtin.html#cursor()">cursor()</A>.
            (partly by Hirohito Higashi) Add a test for <A HREF="builtin.html#cursor()">cursor()</A>.
Files:      src/testdir/test_searchpos.vim, src/testdir/test_cursor_func.vim,
            src/eval.c, src/testdir/test_alot.vim

Patch 7.4.1094
Problem:    Test for <A HREF="print.html#:hardcopy">:hardcopy</A> fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Check for the <A HREF="various.html#+postscript">+postscript</A> feature.
Files:      src/testdir/test_hardcopy.vim

Patch 7.4.1095
Problem:    Can't build GvimExt with SDK 7.1.
Solution:   Support using setenv.bat instead of vcvars32.bat. (Ken Takata)
Files:      src/Make_mvc.mak, src/GvimExt/Makefile

Patch 7.4.1096
Problem:    Need several lines to verify a command produces an error.
Solution:   Add <A HREF="testing.html#assert_fails()">assert_fails()</A>. (suggested by Nikolai Pavlov)
            Make the <A HREF="quickfix.html#quickfix">quickfix</A> alloc test actually work.
Files:      src/testdir/test_quickfix.vim, src/eval.c, runtime/doc/eval.txt,
            src/misc2.c, src/alloc.h

Patch 7.4.1097
Problem:    Looking up the alloc ID for tests fails.
Solution:   Fix the line computation.  Use <A HREF="testing.html#assert_fails()">assert_fails()</A> for unlet test.
Files:      src/testdir/runtest.vim, src/testdir/test_unlet.vim

Patch 7.4.1098
Problem:    Still using old style C function declarations.
Solution:   Always define __ARGS() to include types.  Turn a few <A HREF="eval.html#functions">functions</A>
            into ANSI style to find out if this causes problems for anyone.
Files:      src/vim.h, src/os_unix.h, src/eval.c, src/main.c

Patch 7.4.1099
Problem:    It's not <A HREF="starting.html#easy">easy</A> to know if Vim supports <A HREF="options.html#blowfish">blowfish</A>. (Smu Johnson)
Solution:   Add has('crypt-blowfish') and has('crypt-blowfish2').
Files:      src/eval.c

Patch 7.4.1100
Problem:    Cygwin makefiles are unused.
Solution:   Remove them.
Files:      src/GvimExt/Make_ming.mak, src/GvimExt/Make_cyg.mak,
            src/xxd/Make_ming.mak, src/xxd/Make_cyg.mak

Patch 7.4.1101
Problem:    With <A HREF="options.html#'rightleft'">'rightleft'</A> and concealing the cursor may move to the wrong
            position.
Solution:   Compute the column differently when <A HREF="options.html#'rightleft'">'rightleft'</A> is set. (Hirohito
            Higashi)
Files:      src/screen.c

Patch 7.4.1102
Problem:    Debugger has no stack backtrace support.
Solution:   Add &quot;backtrace&quot;, &quot;frame&quot;, &quot;up&quot; and &quot;down&quot; commands. (Alberto
            Fanjul, closes #433)
Files:      runtime/doc/repeat.txt, src/eval.c, src/ex_cmds2.c, src/globals.h,
            src/testdir/Make_all.mak, src/testdir/test108.in,
            src/testdir/test108.ok

Patch 7.4.1103 (after 7.4.1100)
Problem:    Removed file still in <A HREF="intro.html#distribution">distribution</A>.
Solution:   Remove Make_cyg.mak from the <A HREF="eval.html#list">list</A> of files.
Files:      Filelist

Patch 7.4.1104
Problem:    Various problems building with MzScheme/Racket.
Solution:   Make <A HREF="motion.html#it">it</A> work with new versions of Racket. (Yukihiro Nakadaira, Ken
            Takata)
Files:      runtime/doc/if_mzsch.txt, src/INSTALLpc.txt,
            src/Make_cyg_ming.mak, src/Make_mvc.mak, src/auto/configure,
            src/configure.in, src/if_mzsch.c

Patch 7.4.1105
Problem:    When using slices there is a mixup of variable name and namespace.
Solution:   Recognize <A HREF="eval.html#variables">variables</A> that can't be a namespace. (Hirohito Higashi)
Files:      src/eval.c, src/testdir/test_eval.in, src/testdir/test_eval.ok

Patch 7.4.1106
Problem:    The nsis <A HREF="usr_41.html#script">script</A> can't be used from the appveyor build.
Solution:   Add &quot;ifndef&quot; to allow for <A HREF="eval.html#variables">variables</A> to be set from the command
            line. Remove duplicate SetCompressor command. Support using other
            gettext binaries. (Ken Takata)  Update build instructions to use
            libintl-8.dll.
Files:      Makefile, nsis/gvim.nsi, src/os_win32.c, src/proto/os_win32.pro,
            src/main.c, os_w32exe.c

Patch 7.4.1107
Problem:    Vim can create a directory but not delete <A HREF="motion.html#it">it</A>.
Solution:   Add an argument to <A HREF="builtin.html#delete()">delete()</A> to make <A HREF="motion.html#it">it</A> possible to delete a
            directory, also recursively.
Files:      src/fileio.c, src/eval.c, src/proto/fileio.pro,
            src/testdir/test_delete.vim, src/testdir/test_alot.vim,
            runtime/doc/eval.txt

Patch 7.4.1108
Problem:    Expanding &quot;<A HREF="change.html#~">~</A>&quot; halfway a file name.
Solution:   Handle the file name <A HREF="motion.html#as">as</A> one name. (Marco Hinz)  Add a test.
            Closes #564.
Files:      src/testdir/test27.in, src/testdir/test27.ok,
            src/testdir/test_expand.vim, src/testdir/test_alot.vim,
            src/Makefile, src/misc2.c

Patch 7.4.1109 (after 7.4.1107)
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> doesn't have rmdir().
Solution:   Add mch_rmdir().
Files:      src/os_win32.c, src/proto/os_win32.pro

Patch 7.4.1110
Problem:    Test 108 fails when language is French.
Solution:   Force English <A HREF="message.html#messages">messages</A>. (Dominique Pelle)
Files:      src/testdir/test108.in

Patch 7.4.1111
Problem:    test_expand fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Always use forward slashes.  Remove references to test27.
Files:      src/testdir/runtest.vim, src/testdir/test_expand.vim,
            src/testdir/Make_dos.mak, src/testdir/Make_all.mak,
            src/testdir/Make_amiga.mak, src/testdir/Make_ming.mak

Patch 7.4.1112
Problem:    When using &quot;<A HREF="editing.html#:next">:next</A>&quot; with an illegal file name no error is reported.
Solution:   Give an error message.
Files:      src/ex_cmds2.c

Patch 7.4.1113 (after 7.4.1105)
Problem:    Using {ns} in variable name does not work. (lilydjwg)
Solution:   Fix recognizing colon.  Add a test.
Files:      src/eval.c, src/testdir/test_viml.vim

Patch 7.4.1114 (after 7.4.1107)
Problem:    <A HREF="builtin.html#delete()">delete()</A> does not work well with symbolic links.
Solution:   Recognize symbolic links.
Files:      src/eval.c, src/fileio.c, src/os_unix.c, src/proto/os_unix.pro,
            src/testdir/test_delete.vim, runtime/doc/eval.txt

Patch 7.4.1115
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: make clean in testdir doesn't clean everything.
Solution:   Add command to delete X* directories. (Ken Takata)
Files:      src/testdir/Make_dos.mak

Patch 7.4.1116
Problem:    delete(x, 'rf') does not delete files starting with a dot.
Solution:   Also delete files starting with a dot.
Files:      src/misc1.c, src/fileio.c, src/vim.h

Patch 7.4.1117 (after 7.4.1116)
Problem:    No longer get &quot;<A HREF="repeat.html#.">.</A>&quot; and &quot;..&quot; in directory <A HREF="eval.html#list">list</A>.
Solution:   Do not skip &quot;<A HREF="repeat.html#.">.</A>&quot; and &quot;..&quot; unless EW_DODOT is set.
Files:      src/misc1.c

Patch 7.4.1118
Problem:    Tests hang in 24 line <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Set the <A HREF="options.html#'more'">'more'</A> option off.
Files:      src/testdir/runtest.vim

Patch 7.4.1119
Problem:    <A HREF="builtin.html#argidx()">argidx()</A> has a wrong value after &quot;:&#37;argdelete&quot;. (Yegappan
            Lakshmanan)
Solution:   Correct the value of w_arg_idx.  Add a test.
Files:      src/ex_cmds2.c, src/testdir/test_arglist.vim,
            src/testdir/Make_all.mak

Patch 7.4.1120
Problem:    delete(x, 'rf') fails if a directory is empty. (Lcd)
Solution:   Ignore not finding matches in an empty directory.
Files:      src/fileio.c, src/misc1.c, src/vim.h, src/testdir/test_delete.vim

Patch 7.4.1121
Problem:    test_expand leaves files behind.
Solution:   Edit another file before <A HREF="change.html#deleting">deleting</A>, otherwise the swap file
            remains.
Files:      src/testdir/test_expand.vim

Patch 7.4.1122
Problem:    Test 92 and 93 fail when using <A HREF="starting.html#gvim">gvim</A> on a system with a non <A HREF="mbyte.html#utf-8">utf-8</A>
            <A HREF="mbyte.html#locale">locale</A>.
Solution:   Avoid using <A HREF="gui.html#.gvimrc">.gvimrc</A> by adding <A HREF="starting.html#-U">-U</A> NONE. (Yukihiro Nakadaira)
Files:      src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
            src/testdir/Make_vms.mms, src/testdir/Makefile

Patch 7.4.1123
Problem:    Using &quot;<A HREF="editing.html#:argadd">:argadd</A>&quot; when there are no arguments results in the second
            argument to be the current one. (Yegappan Lakshmanan)
Solution:   Correct the w_arg_idx value.
Files:      src/ex_cmds2.c, src/testdir/test_arglist.vim

Patch 7.4.1124
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: dead key behavior is not ideal.
Solution:   Handle dead keys differently when not in <A HREF="insert.html#Insert">Insert</A> or <A HREF="visual.html#Select">Select</A> mode.
            (John Wellesz, closes #399)
Files:      src/gui_w48.c

Patch 7.4.1125
Problem:    There is no <A HREF="builtin.html#perleval()">perleval()</A>.
Solution:   Add <A HREF="builtin.html#perleval()">perleval()</A>. (Damien)
Files:      runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/eval.c,
            src/if_perl.xs, src/proto/if_perl.pro, src/testdir/Make_all.mak,
            src/testdir/test_perl.vim

Patch 7.4.1126
Problem:    Can only get the directory of the current <A HREF="windows.html#window">window</A>.
Solution:   Add <A HREF="windows.html#window">window</A> and <A HREF="intro.html#tab">tab</A> arguments to <A HREF="builtin.html#getcwd()">getcwd()</A> and <A HREF="builtin.html#haslocaldir()">haslocaldir()</A>.
            (Thinca, Hirohito Higashi)
Files:      src/Makefile, src/testdir/Make_all.mak,
            src/testdir/test_getcwd.in, src/testdir/test_getcwd.ok,
            runtime/doc/eval.txt, patching file src/eval.c

Patch 7.4.1127
Problem:    Both old and new style tests for <A HREF="if_perl.html#Perl">Perl</A>.
Solution:   Merge the old tests with the new style tests.
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/test_perl.in,
            src/testdir/test_perl.ok, src/testdir/test_perl.vim

Patch 7.4.1128
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="builtin.html#delete()">delete()</A> does not recognize junctions.
Solution:   Add mch_isrealdir() for <A HREF="os_win32.html#MS-Windows">MS-Windows</A>. Update mch_is_symbolic_link().
            (Ken Takata)
Files:      src/fileio.c, src/os_win32.c, src/proto/os_win32.pro

Patch 7.4.1129
Problem:    <A HREF="if_pyth.html#Python">Python</A> <A HREF="eval.html#None">None</A> value can't be converted to a Vim value.
Solution:   Just use zero. (Damien)
Files:      src/if_py_both.h, src/testdir/test86.in, src/testdir/test86.ok,
            src/testdir/test87.in, src/testdir/test87.ok,

Patch 7.4.1130
Problem:    Memory leak in <A HREF="quickfix.html#:vimgrep">:vimgrep</A>.
Solution:   Call FreeWild(). (Yegappan Lakshmanan)
Files:      src/quickfix.c

Patch 7.4.1131
Problem:    New lines in the <A HREF="starting.html#viminfo">viminfo</A> file are dropped.
Solution:   Copy lines starting with &quot;|&quot;.  Fix that when using <A HREF="starting.html#:rviminfo">:rviminfo</A> in a
            function global <A HREF="eval.html#variables">variables</A> were restored <A HREF="motion.html#as">as</A> function-local
            <A HREF="eval.html#variables">variables</A>.
Files:      src/eval.c, src/structs.h, src/ex_cmds.c, src/misc2.c,
            src/proto/misc2.pro, src/testdir/test_viminfo.vim,
            src/testdir/Make_all.mak, src/testdir/test74.in,
            src/testdir/test74.ok

Patch 7.4.1132
Problem:    Old style tests for the argument <A HREF="eval.html#list">list</A>.
Solution:   Add more new style tests. (Yegappan Lakshmanan)
Files:      src/testdir/test_arglist.vim, src/testdir/test_argument_0count.in,
            src/testdir/test_argument_0count.ok,
            src/testdir/test_argument_count.in, src/Makefile,
            src/testdir/test_argument_count.ok, src/testdir/Make_all.mak

Patch 7.4.1133
Problem:    Generated function prototypes still have __ARGS().
Solution:   Generate function prototypes without __ARGS().
Files:      src/Makefile, src/if_ruby.c, src/os_win32.c,
            src/proto/blowfish.pro, src/proto/buffer.pro,
            src/proto/charset.pro, src/proto/crypt.pro,
            src/proto/crypt_zip.pro, src/proto/diff.pro,
            src/proto/digraph.pro, src/proto/edit.pro, src/proto/eval.pro,
            src/proto/ex_cmds2.pro, src/proto/ex_cmds.pro,
            src/proto/ex_docmd.pro, src/proto/ex_eval.pro,
            src/proto/ex_getln.pro, src/proto/fileio.pro, src/proto/fold.pro,
            src/proto/getchar.pro, src/proto/gui_athena.pro,
            src/proto/gui_beval.pro, src/proto/gui_gtk_gresources.pro,
            src/proto/gui_gtk.pro, src/proto/gui_gtk_x11.pro,
            src/proto/gui_mac.pro, src/proto/gui_motif.pro,
            src/proto/gui_photon.pro, src/proto/gui.pro,
            src/proto/gui_w16.pro, src/proto/gui_w32.pro,
            src/proto/gui_x11.pro, src/proto/gui_xmdlg.pro,
            src/proto/hangulin.pro, src/proto/hardcopy.pro,
            src/proto/hashtab.pro, src/proto/if_cscope.pro,
            src/proto/if_lua.pro, src/proto/if_mzsch.pro,
            src/proto/if_ole.pro, src/proto/if_perl.pro,
            src/proto/if_perlsfio.pro, src/proto/if_python3.pro,
            src/proto/if_python.pro, src/proto/if_ruby.pro,
            src/proto/if_tcl.pro, src/proto/if_xcmdsrv.pro,
            src/proto/main.pro, src/proto/mark.pro, src/proto/mbyte.pro,
            src/proto/memfile.pro, src/proto/memline.pro, src/proto/menu.pro,
            src/proto/message.pro, src/proto/misc1.pro, src/proto/misc2.pro,
            src/proto/move.pro, src/proto/netbeans.pro, src/proto/normal.pro,
            src/proto/ops.pro, src/proto/option.pro, src/proto/os_amiga.pro,
            src/proto/os_beos.pro, src/proto/os_mac_conv.pro,
            src/proto/os_msdos.pro, src/proto/os_mswin.pro,
            src/proto/os_qnx.pro, src/proto/os_unix.pro, src/proto/os_vms.pro,
            src/proto/os_win16.pro, src/proto/os_win32.pro,
            src/proto/popupmnu.pro, src/proto/pty.pro, src/proto/quickfix.pro,
            src/proto/regexp.pro, src/proto/screen.pro, src/proto/search.pro,
            src/proto/sha256.pro, src/proto/spell.pro, src/proto/syntax.pro,
            src/proto/tag.pro, src/proto/termlib.pro, src/proto/term.pro,
            src/proto/ui.pro, src/proto/undo.pro, src/proto/version.pro,
            src/proto/winclip.pro, src/proto/window.pro,
            src/proto/workshop.pro

Patch 7.4.1134
Problem:    The <A HREF="editing.html#arglist">arglist</A> test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Only check for failure of argedit on <A HREF="os_unix.html#Unix">Unix</A>.
Files:      src/testdir/test_arglist.vim

Patch 7.4.1135
Problem:    One more <A HREF="editing.html#arglist">arglist</A> test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Don't edit &quot;<A HREF="change.html#Y">Y</A>&quot; after editing &quot;<A HREF="change.html#y">y</A>&quot;.
Files:      src/testdir/test_arglist.vim

Patch 7.4.1136
Problem:    Wrong argument to <A HREF="testing.html#assert_exception()">assert_exception()</A> causes a crash. (reported by
            Coverity)
Solution:   Check for NULL pointer.  Add a test.
Files:      src/eval.c, src/testdir/test_assert.vim

Patch 7.4.1137
Problem:    Illegal memory access when using <A HREF="quickfix.html#:copen">:copen</A> and <A HREF="quickfix.html#:cclose">:cclose</A>.
Solution:   Avoid that curbuf is invalid. (suggestion by Justin <A HREF="motion.html#M">M</A>. Keyes)
            Add a test.
Files:      src/window.c, src/testdir/test_quickfix.vim

Patch 7.4.1138
Problem:    When running <A HREF="starting.html#gvim">gvim</A> in the foreground some icons are missing.
            (Taylor Venable)
Solution:   Move the call to gui_gtk_register_resource(). (Kazunobu Kuriyama)
Files:      src/gui_gtk_x11.c

Patch 7.4.1139
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="builtin.html#getftype()">getftype()</A> returns &quot;file&quot; for symlink to directory.
Solution:   Make <A HREF="motion.html#it">it</A> return &quot;dir&quot;. (Ken Takata)
Files:      src/os_mswin.c

Patch 7.4.1140
Problem:    Recognizing &lt;sid&gt; does not work when the language is Turkish.
            (Christian Brabandt)
Solution:   Use MB_STNICMP() instead of STNICMP().
Files:      src/eval.c

Patch 7.4.1141
Problem:    Using <A HREF="builtin.html#searchpair()">searchpair()</A> with a skip <A HREF="eval.html#expression">expression</A> that uses <A HREF="syntax.html#syntax">syntax</A>
            highlighting sometimes doesn't work. (David Fishburn)
Solution:   Reset next_match_idx. (Christian Brabandt)
Files:      src/syntax.c

Patch 7.4.1142
Problem:    Cannot define keyword characters for a <A HREF="syntax.html#syntax">syntax</A> file.
Solution:   Add the &quot;<A HREF="syntax.html#:syn">:syn</A> iskeyword&quot; command. (Christian Brabandt)
Files:      runtime/doc/options.txt, runtime/doc/syntax.txt, src/buffer.c,
            src/option.c, src/structs.h, src/syntax.c,
            src/testdir/Make_all.mak, src/testdir/test_syntax.vim

Patch 7.4.1143
Problem:    Can't sort on floating point numbers.
Solution:   Add the &quot;<A HREF="motion.html#f">f</A>&quot; flag to &quot;<A HREF="change.html#:sort">:sort</A>&quot;.  (Alex Jakushev)  Also add the &quot;<A HREF="motion.html#f">f</A>&quot;
            flag to <A HREF="builtin.html#sort()">sort()</A>.
Files:      runtime/doc/change.txt, src/ex_cmds.c, src/testdir/test_sort.vim,
            src/testdir/test57.in, src/testdir/test57.ok, src/eval.c

Patch 7.4.1144 (after 7.4.1143)
Problem:    Can't build on several systems.
Solution:   Include float.h. (Christian Robinson, closes #570 #571)
Files:      src/ex_cmds.c

Patch 7.4.1145
Problem:    Default features are conservative.
Solution:   Make the default feature set for most of today's systems &quot;huge&quot;.
Files:      src/feature.h, src/configure.in, src/auto/configure

Patch 7.4.1146
Problem:    Can't build with <A HREF="if_pyth.html#Python">Python</A> 3 interface using MingW.
Solution:   Update the Makefile. (Yasuhiro Matsumoto, Ken Takata)
Files:      src/Make_cyg_ming.mak

Patch 7.4.1147
Problem:    Conflict for &quot;chartab&quot;. (Kazunobu Kuriyama)
Solution:   Rename the global one to something <A HREF="various.html#less">less</A> obvious.  Move <A HREF="motion.html#it">it</A> into
            src/chartab.c.
Files:      src/macros.h, src/globals.h, src/charset.c, src/main.c,
            src/option.c, src/screen.c, src/vim.h

Patch 7.4.1148
Problem:    Default for MingW and Cygwin is still &quot;normal&quot;.
Solution:   Use &quot;huge&quot; <A HREF="motion.html#as">as</A> default. (Ken Takata)
Files:      src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 7.4.1149 (after 7.4.1013)
Problem:    Using the local value of <A HREF="options.html#'errorformat'">'errorformat'</A> causes more problems than
            <A HREF="motion.html#it">it</A> solves.
Solution:   Revert 7.4.1013.
Files:      runtime/doc/quickfix.txt, src/quickfix.c

Patch 7.4.1150
Problem:    <A HREF="options.html#'langmap'">'langmap'</A> applies to the first character typed in <A HREF="visual.html#Select">Select</A> mode.
            (David Watson)
Solution:   Check for SELECTMODE. (Christian Brabandt, closes #572)
            Add the '<A HREF="change.html#x">x</A>' flag to <A HREF="builtin.html#feedkeys()">feedkeys()</A>.
Files:      src/getchar.c, src/normal.c, src/testdir/test_langmap.vim,
            src/ex_docmd.c, src/proto/ex_docmd.pro, src/testdir/Make_all.mak,
            runtime/doc/eval.txt

Patch 7.4.1151 (after 7.4.1150)
Problem:    Missing change to eval.c
Solution:   Also change <A HREF="builtin.html#feedkeys()">feedkeys()</A>.
Files:      src/eval.c

Patch 7.4.1152
Problem:    Langmap test fails with normal build.
Solution:   Check for <A HREF="various.html#+langmap">+langmap</A> feature.
Files:      src/testdir/test_langmap.vim

Patch 7.4.1153
Problem:    Autocommands triggered by <A HREF="quickfix.html#quickfix">quickfix</A> cannot always get the current
            title value.
Solution:   Call qf_fill_buffer() later. (Christian Brabandt)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 7.4.1154
Problem:    No support for JSON.
Solution:   Add jsonencode() and jsondecode().  Also add <A HREF="eval.html#v:false">v:false</A>, <A HREF="eval.html#v:true">v:true</A>,
            <A HREF="eval.html#v:null">v:null</A> and <A HREF="eval.html#v:none">v:none</A>.
Files:      src/json.c, src/eval.c, src/proto.h, src/structs.h, src/vim.h,
            src/if_lua.c, src/if_mzsch.c, src/if_ruby.c, src/if_py_both.h,
            src/globals.h, src/Makefile, src/Make_bc3.mak, src/Make_bc5.mak,
            src/Make_cyg_ming.mak, src/Make_dice.mak, src/Make_ivc.mak,
            src/Make_manx.mak, src/Make_morph.mak, src/Make_mvc.mak,
            src/Make_sas.mak, src/Make_vms.mms, src/proto/json.pro,
            src/proto/eval.pro, src/testdir/test_json.vim,
            src/testdir/test_alot.vim, Filelist, runtime/doc/eval.txt

Patch 7.4.1155
Problem:    Build with normal features fails.
Solution:   Always define dict_lookup().
Files:      src/eval.c

Patch 7.4.1156
Problem:    Coverity warns for NULL pointer and ignoring return value.
Solution:   Check for NULL pointer. When dict_add() returns FAIL free the item.
Files:      src/json.c

Patch 7.4.1157
Problem:    <A HREF="builtin.html#type()">type()</A> does not work for <A HREF="eval.html#v:true">v:true</A>, <A HREF="eval.html#v:none">v:none</A>, etc.
Solution:   Add new type numbers.
Files:      src/eval.c, src/testdir/test_json.vim, src/testdir/test_viml.vim

Patch 7.4.1158
Problem:    Still using __ARGS().
Solution:   Remove __ARGS() from eval.c
Files:      src/eval.c

Patch 7.4.1159
Problem:    Automatically generated function prototypes use __ARGS.
Solution:   Remove __ARGS from osdef.sh.
Files:      src/osdef.sh, src/osdef1.h.in, src/osdef2.h.in

Patch 7.4.1160
Problem:    No error for jsondecode(&#39;&#34;'').
Solution:   Give an error message for missing double <A HREF="change.html#quote.">quote.</A>
Files:      src/json.c

Patch 7.4.1161
Problem:    &quot;<A HREF="editing.html#:argadd">:argadd</A>&quot; without argument is supposed to add the current buffer
            name to the <A HREF="editing.html#arglist">arglist</A>.
Solution:   Make <A HREF="motion.html#it">it</A> work <A HREF="motion.html#as">as</A> documented. (Coot, closes #577)
Files:      src/ex_cmds.h, src/ex_cmds2.c, src/testdir/test_arglist.vim

Patch 7.4.1162
Problem:    Missing error number in <A HREF="if_mzsch.html#MzScheme">MzScheme</A>. (Dominique Pelle)
Solution:   Add a proper error number.
Files:      src/if_mzsch.c

Patch 7.4.1163
Problem:    Expressions &quot;<A HREF="motion.html#0">0</A> + v:true&quot; and &quot;<A HREF="motion.html#''">''</A> . v:true&quot; cause an error.
Solution:   Return something sensible when using a special variable <A HREF="motion.html#as">as</A> a
            number or <A HREF="motion.html#as">as</A> a <A HREF="eval.html#string">string</A>. (suggested by Damien)
Files:      src/eval.c, src/testdir/test_viml.vim

Patch 7.4.1164
Problem:    No tests for comparing special <A HREF="eval.html#variables">variables</A>.  Error in jsondecode()
            not reported.  test_json does not work with <A HREF="mbyte.html#Japanese">Japanese</A> system.
Solution:   Set scriptencoding. (Ken Takata) Add a few more tests. Add error.
Files:      src/json.c, src/testdir/test_viml.vim, src/testdir/test_json.vim

Patch 7.4.1165
Problem:    When defining DYNAMIC_ICONV_DLL in the makefile, the build fails.
Solution:   Add #ifdef's. (Taro Muraoka)  Try the newer version first.
Files:      src/mbyte.c, src/os_win32.c

Patch 7.4.1166
Problem:    Can't encode a <A HREF="eval.html#Funcref">Funcref</A> into JSON.  jsonencode() doesn't handle the
            same <A HREF="eval.html#list">list</A> or <A HREF="eval.html#dict">dict</A> <A HREF="if_cscop.html#twice">twice</A> properly.  (Nikolai Pavlov)
Solution:   Give an error.  Reset copyID when the <A HREF="eval.html#list">list</A> or <A HREF="eval.html#dict">dict</A> is finished.
Files:      src/json.c, src/proto/json.pro, src/testdir/test_json.vim

Patch 7.4.1167
Problem:    No tests for &quot;is&quot; and &quot;isnot&quot; with the new <A HREF="eval.html#variables">variables</A>.
Solution:   Add tests.
Files:      src/testdir/test_viml.vim

Patch 7.4.1168
Problem:    This doesn't give the right result: eval(string(v:true)). (Nikolai
            Pavlov)
Solution:   Make the <A HREF="eval.html#string">string</A> &quot;<A HREF="eval.html#v:true">v:true</A>&quot; instead of &quot;<A HREF="vim9.html#true">true</A>&quot;.
Files:      src/eval.c, src/testdir/test_viml.vim

Patch 7.4.1169
Problem:    The socket I/O is intertwined with the <A HREF="netbeans.html#netbeans">netbeans</A> code.
Solution:   Start refactoring the <A HREF="netbeans.html#netbeans">netbeans</A> communication to split off the
            socket I/O.  Add the <A HREF="various.html#+channel">+channel</A> feature.
Files:      src/channel.c, src/netbeans.c, src/proto/channel.pro,
            src/proto/netbeans.pro, src/proto/gui_w32.pro, src/gui_w32.c,
            src/eval.c, src/os_mswin.c, src/ui.c, src/macros.h, Makefile,
            src/proto.h, src/feature.h, src/os_unix.c, src/vim.h,
            src/configure.in, src/auto/configure, src/config.mk.in,
            src/config.aap.in, src/config.h.in, src/Make_bc5.mak,
            src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 7.4.1170 (after 7.4.1169)
Problem:    Missing changes in src/Makefile, Filelist.
Solution:   Add the missing changes.
Files:      Filelist, src/Makefile

Patch 7.4.1171
Problem:    Makefile dependencies are outdated.
Solution:   Run &quot;make depend&quot;. Add <A HREF="gui_x11.html#GTK">GTK</A> resource dependencies.
Files:      src/Makefile

Patch 7.4.1172 (after 7.4.1169)
Problem:    Configure is overly positive.
Solution:   <A HREF="insert.html#Insert">Insert</A> &quot;test&quot;.
Files:      src/configure.in, src/auto/configure

Patch 7.4.1173 (after 7.4.1168)
Problem:    No test for new behavior of <A HREF="eval.html#v:true">v:true</A> et al.
Solution:   Add a test.
Files:      src/testdir/test_viml.vim

Patch 7.4.1174
Problem:    Netbeans contains dead code inside #ifndef INIT_SOCKETS.
Solution:   Remove the dead code.
Files:      src/netbeans.c

Patch 7.4.1175 (after 7.4.1169)
Problem:    Can't build with Mingw and Cygwin.
Solution:   Remove extra &quot;endif&quot;. (Christian <A HREF="change.html#J">J</A>. Robinson)
Files:      src/Make_cyg_ming.mak

Patch 7.4.1176
Problem:    Missing change to proto file.
Solution:   Update the proto file. (Charles Cooper)
Files:      src/proto/gui_w32.pro

Patch 7.4.1177
Problem:    The <A HREF="various.html#+channel">+channel</A> feature is not in <A HREF="various.html#:version">:version</A> output. (Tony Mechelynck)
Solution:   Add the feature <A HREF="eval.html#string">string</A>.
Files:      src/version.c

Patch 7.4.1178
Problem:    <A HREF="builtin.html#empty()">empty()</A> doesn't work for the new special <A HREF="eval.html#variables">variables</A>.
Solution:   Make <A HREF="builtin.html#empty()">empty()</A> work. (Damien)
Files:      src/eval.c, src/testdir/test_viml.vim

Patch 7.4.1179
Problem:    test_writefile and test_viml <A HREF="diff.html#do">do</A> not delete the <A HREF="change.html#tempfile">tempfile</A>.
Solution:   Delete the <A HREF="change.html#tempfile">tempfile</A>. (Charles Cooper)  Add DeleteTheScript().
Files:      src/testdir/test_writefile.in, src/testdir/test_viml.vim

Patch 7.4.1180
Problem:    Crash with invalid argument to <A HREF="builtin.html#glob2regpat()">glob2regpat()</A>.
Solution:   Check for NULL. (Justin <A HREF="motion.html#M">M</A>. Keyes, closes #596)  Add a test.
Files:      src/eval.c, src/testdir/test_glob2regpat.vim,
            src/testdir/test_alot.vim

Patch 7.4.1181
Problem:    free_tv() can't handle special <A HREF="eval.html#variables">variables</A>. (Damien)
Solution:   Add the variable type.
Files:      src/eval.c, src/testdir/test_viml.vim

Patch 7.4.1182
Problem:    Still socket code intertwined with <A HREF="netbeans.html#netbeans">netbeans</A>.
Solution:   Move code from netbeans.c to channel.c
Files:      src/channel.c, src/netbeans.c, src/proto/channel.pro,
            src/proto/netbeans.pro, src/gui.c, src/gui_w48.c

Patch 7.4.1183 (after 7.4.1182)
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> build is broken.
Solution:   Remove init in wrong place.
Files:      src/channel.c

Patch 7.4.1184 (after 7.4.1182)
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> build is still broken.
Solution:   Change nbsock to ch_fd.
Files:      src/channel.c

Patch 7.4.1185
Problem:    Can't build with <A HREF="if_tcl.html#TCL">TCL</A> on some systems.
Solution:   Rename the channel_ <A HREF="eval.html#functions">functions</A>.
Files:      src/if_tcl.c

Patch 7.4.1186
Problem:    Error <A HREF="message.html#messages">messages</A> for security context are hard to translate.
Solution:   Use one <A HREF="eval.html#string">string</A> with &#37;s. (Ken Takata)
Files:      src/os_unix.c

Patch 7.4.1187
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> <A HREF="channel.html#channel">channel</A> code only supports one <A HREF="channel.html#channel">channel</A>.  Doesn't build
            without <A HREF="netbeans.html#netbeans">netbeans</A> support.
Solution:   Get the <A HREF="channel.html#channel">channel</A> index from the socket in the message. Closes #600.
Files:      src/channel.c, src/netbeans.c, src/gui_w48.c,
            src/proto/channel.pro, src/proto/netbeans.pro

Patch 7.4.1188
Problem:    Using older JSON standard.
Solution:   Update the link.  Adjust the text a bit.
Files:      src/json.c, runtime/doc/eval.txt

Patch 7.4.1189 (after 7.4.1165)
Problem:    Using another language on <A HREF="os_win32.html#MS-Windows">MS-Windows</A> does not work. (Yongwei Wu)
Solution:   Undo the change to try loading libintl-8.dll first.
Files:      src/os_win32.c

Patch 7.4.1190
Problem:    On OSX the default flag for dlopen() is different.
Solution:   Add RTLD_LOCAL in the configure check. (sv99, closes #604)
Files:      src/configure.in, src/auto/configure

Patch 7.4.1191
Problem:    The <A HREF="channel.html#channel">channel</A> feature isn't working yet.
Solution:   Add the connect(), disconnect(), sendexpr() and sendraw()
            <A HREF="eval.html#functions">functions</A>.  Add initial documentation.  Add a demo server.
Files:      src/channel.c, src/eval.c, src/proto/channel.pro,
            src/proto/eval.pro, runtime/doc/channel.txt, runtime/doc/eval.txt,
            runtime/doc/Makefile, runtime/tools/demoserver.py

Patch 7.4.1192
Problem:    Can't build with FEAT_EVAL but without FEAT_MBYTE. (John
            Marriott)
Solution:   Add #ifdef for FEAT_MBYTE.
Files:      src/json.c

Patch 7.4.1193
Problem:    Can't build the <A HREF="channel.html#channel">channel</A> feature on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Add #ifdef HAVE_POLL.
Files:      src/channel.c

Patch 7.4.1194
Problem:    Compiler warning for not using return value of fwrite().
Solution:   Return OK/FAIL. (Charles Campbell)
Files:      src/channel.c, src/proto/channel.pro

Patch 7.4.1195
Problem:    The <A HREF="channel.html#channel">channel</A> feature does not work in the <A HREF="os_win32.html#MS-Windows">MS-Windows</A> console.
Solution:   Add <A HREF="os_win32.html#win32">win32</A> console support. (Yasuhiro Matsumoto)
Files:      src/channel.c, src/gui_w32.c, src/os_mswin.c, src/os_win32.c,
            src/proto/gui_w32.pro, src/proto/os_mswin.pro, src/vim.h

Patch 7.4.1196
Problem:    Still using __ARGS.
Solution:   Remove __ARGS in several files. (script by Hirohito Higashi)
Files:      src/arabic.c, src/buffer.c, src/charset.c, src/crypt_zip.c,
            src/diff.c, src/digraph.c, src/edit.c, src/ex_cmds.c,
            src/ex_cmds2.c, src/ex_docmd.c

Patch 7.4.1197
Problem:    Still using __ARGS.
Solution:   Remove __ARGS in several files. (script by Hirohito Higashi)
Files:      src/ex_eval.c, src/ex_getln.c, src/farsi.c, src/fileio.c,
            src/fold.c, src/getchar.c, src/gui.c, src/gui_at_fs.c,
            src/gui_at_sb.c, src/gui_athena.c, src/gui_beval.c,
            src/gui_motif.c, src/gui_w32.c, src/gui_w48.c

Patch 7.4.1198
Problem:    Still using __ARGS.
Solution:   Remove __ARGS in several files. (script by Hirohito Higashi)
            Also remove use of HAVE_STDARG_H.
Files:      src/gui_x11.c, src/hangulin.c, src/hardcopy.c, src/hashtab.c,
            src/if_cscope.c, src/if_python3.c, src/if_sniff.c,
            src/if_xcmdsrv.c, src/main.c, src/mark.c, src/mbyte.c,
            src/memfile.c, src/memfile_test.c, src/memline.c, src/menu.c,
            src/message.c, src/misc1.c, src/misc2.c, src/move.c,
            src/netbeans.c, src/normal.c

Patch 7.4.1199
Problem:    Still using __ARGS.
Solution:   Remove __ARGS in several files. (script by Hirohito Higashi)
Files:      src/ops.c, src/option.c, src/os_amiga.c, src/os_mac_conv.c,
            src/os_unix.c, src/os_vms.c, src/os_w32exe.c, src/popupmnu.c,
            src/pty.c, src/quickfix.c, src/regexp.c, src/regexp_nfa.c,
            src/screen.c, src/search.c, src/sha256.c, src/spell.c,
            src/syntax.c, src/tag.c, src/term.c, src/termlib.c, src/ui.c,
            src/undo.c, src/version.c, src/window.c

Patch 7.4.1200
Problem:    Still using __ARGS.
Solution:   Remove __ARGS in several files. (script by Hirohito Higashi)
Files:      src/blowfish.c, src/ex_cmds2.c, src/ex_getln.c, src/fold.c,
            src/gui_beval.c, src/gui_w32.c, src/os_unix.c, src/os_win16.c,
            src/pty.c, src/regexp.c, src/syntax.c, src/xpm_w32.c,
            src/ex_cmds.h, src/globals.h, src/gui_at_sb.h, src/gui_beval.h,
            src/if_cscope.h, src/if_sniff.h, src/nbdebug.h, src/os_unix.h,
            src/proto.h, src/structs.h, src/vim.h, src/xpm_w32.h,
            src/if_perl.xs, src/proto/if_lua.pro, src/proto/pty.pro,
            runtime/tools/xcmdsrv_client.c,
            src/Makefile

Patch 7.4.1201
Problem:    One more file still using __ARGS.
Solution:   Remove __ARGS in the last file. (script by Hirohito Higashi)
Files:      src/gui_at_sb.c

Patch 7.4.1202
Problem:    Still one more file still using __ARGS.
Solution:   Remove __ARGS in the last file. (script by Hirohito Higashi)
            (closes #612)
Files:      src/proto/os_mac_conv.pro, src/os_mac_conv.c, src/Makefile

Patch 7.4.1203
Problem:    Still more files still using __ARGS.
Solution:   Remove __ARGS in really the last files.
Files:      src/proto/if_mzsch.pro, src/if_mzsch.c, src/vim.h,
            src/proto/gui_gtk_gresources.pro, src/proto/gui_mac.pro,
            src/proto/if_ole.pro, src/proto/os_qnx.pro, src/Makefile

Patch 7.4.1204
Problem:    Latin1 characters cause encoding conversion.
Solution:   Remove the characters.
Files:      src/gui_motif.c

Patch 7.4.1205
Problem:    Using old style function declarations.
Solution:   Change to new style function declarations. (script by Hirohito
            Higashi)
Files:      src/arabic.c, src/blowfish.c, src/buffer.c, src/channel.c,
            src/charset.c, src/crypt.c, src/crypt_zip.c, src/diff.c,
            src/digraph.c, src/edit.c, src/eval.c

Patch 7.4.1206
Problem:    Using old style function declarations.
Solution:   Change to new style function declarations. (script by Hirohito
            Higashi)
Files:      src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c, src/ex_eval.c,
            src/ex_getln.c, src/farsi.c, src/fileio.c

Patch 7.4.1207
Problem:    Using old style function declarations.
Solution:   Change to new style function declarations. (script by Hirohito
            Higashi)
Files:      src/fold.c, src/getchar.c, src/gui_at_fs.c, src/gui_athena.c,
            src/gui_at_sb.c, src/gui_beval.c, src/gui.c, src/gui_gtk.c,
            src/gui_gtk_x11.c, src/gui_mac.c, src/gui_motif.c

Patch 7.4.1208
Problem:    Using old style function declarations.
Solution:   Change to new style function declarations. (script by Hirohito
            Higashi)
Files:      src/gui_photon.c, src/gui_w32.c, src/gui_w48.c, src/gui_x11.c,
            src/hangulin.c, src/hardcopy.c, src/hashtab.c, src/if_cscope.c,
            src/if_mzsch.c, src/if_perlsfio.c, src/if_python.c,
            src/if_python3.c, src/if_ruby.c, src/if_sniff.c, src/if_tcl.c,
            src/if_xcmdsrv.c, src/integration.c

Patch 7.4.1209 (after 7.4.1207)
Problem:    Can't build with Athena. (Elimar Riesebieter)
Solution:   Fix function declarations.
Files:      src/gui_athena.c, src/gui_x11.c, src/gui_at_sb.c, src/gui_at_fs.c

Patch 7.4.1210
Problem:    Using old style function declarations.
Solution:   Change to new style function declarations. (script by Hirohito
            Higashi)
Files:      src/main.c, src/mark.c, src/mbyte.c, src/memfile.c,
            src/memfile_test.c, src/memline.c, src/menu.c, src/message.c

Patch 7.4.1211
Problem:    Using old style function declarations.
Solution:   Change to new style function declarations. (script by Hirohito
            Higashi)
Files:      src/misc1.c, src/misc2.c, src/move.c, src/netbeans.c,
            src/normal.c, src/ops.c, src/option.c

Patch 7.4.1212 (after 7.4.1207)
Problem:    Can't build with <A HREF="gui_x11.html#Motif">Motif</A>.
Solution:   Fix function declaration.(Dominique Pelle)
Files:      src/gui_motif.c

Patch 7.4.1213
Problem:    Using old style function declarations.
Solution:   Change to new style function declarations. (script by Hirohito
            Higashi)
Files:      src/os_amiga.c, src/os_mac_conv.c, src/os_msdos.d, src/os_mswin.c,
            src/os_qnx.c, src/os_unix.c, src/os_vms.c, src/os_win16.c,
            src/os_win32.c, src/popupmnu.c, src/pty.c, src/quickfix.c,
            src/regexp.c, src/regexp_nfa.c, src/screen.c

Patch 7.4.1214
Problem:    Using old style function declarations.
Solution:   Change to new style function declarations. (script by Hirohito
            Higashi)
Files:      src/search.c, src/sha256.c, src/spell.c, src/syntax.c, src/tag.c,
            src/term.c, src/termlib.c, src/ui.c, src/undo.c

Patch 7.4.1215
Problem:    Using old style function declarations.
Solution:   Change to new style function declarations. (script by Hirohito
            Higashi)
Files:      src/version.c, src/winclip.c, src/window.c, src/workshop.c,
            src/xpm_w32.c, runtime/doc/doctags.c,
            runtime/tools/xcmdsrv_client.c, src/po/sjiscorr.c, src/xxd/xxd.c

Patch 7.4.1216
Problem:    Still using HAVE_STDARG_H.
Solution:   Assume it's always defined.
Files:      src/eval.c, src/misc2.c, src/vim.h, src/proto.h, src/configure.in,
            src/auto/configure, config.h.in, src/os_amiga.h, src/os_msdos.h,
            src/os_vms_conf.h, src/os_win32.h

Patch 7.4.1217
Problem:    Execution of command on <A HREF="channel.html#channel">channel</A> doesn't work yet.
Solution:   Implement the &quot;<A HREF="starting.html#ex">ex</A>&quot; and &quot;normal&quot; commands.
Files:      src/channel.c, src/proto/channel.pro, src/misc2.c, src/eval.c,
            src/ex_docmd.c, src/proto/ex_docmd.pro, src/feature.h

Patch 7.4.1218
Problem:    Missing change in configure.  More changes for function style.
Solution:   Avoid the typos.
Files:      src/configure.in, src/config.h.in, runtime/tools/ccfilter.c,
            src/os_msdos.c

Patch 7.4.1219
Problem:    Build fails with <A HREF="various.html#+channel">+channel</A> but without <A HREF="various.html#+float">+float</A>.
Solution:   Add #ifdef.
Files:      src/ex_cmds.c

Patch 7.4.1220
Problem:    Warnings for unused <A HREF="eval.html#variables">variables</A> in tiny build. (Tony Mechelynck)
Solution:   Move declarations inside #ifdef. (Hirohito Higashi)
Files:      src/ex_cmds.c

Patch 7.4.1221
Problem:    Including <A HREF="netbeans.html#netbeans">netbeans</A> and <A HREF="channel.html#channel">channel</A> support in small and tiny builds.
            Build fails with some interfaces.
Solution:   Only include these features in small build and above.  Let
            configure fail if trying to enable an interface that won't build.
Files:      src/configure.in, src/auto/configure

Patch 7.4.1222
Problem:    &quot;<A HREF="various.html#:normal">:normal</A>&quot; command and others missing in tiny build.
Solution:   Graduate FEAT_EX_EXTRA.
Files:      src/feature.h, src/charset.c, src/eval.c, src/ex_cmds.c,
            src/ex_cmds2.c, src/ex_docmd.c, src/ex_getln.c, src/getchar.c,
            src/normal.c, src/ui.c, src/version.c, src/globals.h

Patch 7.4.1223
Problem:    Crash when setting <A HREF="eval.html#v:errors">v:errors</A> to a number.
Solution:   Free the typval without assuming its type. (Yasuhiro Matsumoto)
Files:      src/eval.c, src/testdir/test_assert.vim

Patch 7.4.1224
Problem:    Build problems with <A HREF="gui_x11.html#GTK">GTK</A> on BSD. (Mike Williams)
Solution:   Don't use &quot;$&lt;&quot;. Skip building gui_gtk_gresources.h when <A HREF="motion.html#it">it</A> doesn't
            work. (Kazunobu Kuriyama)
Files:      src/Makefile

Patch 7.4.1225
Problem:    Still a few old style function declarations.
Solution:   Make them new style. (Hirohito Higashi)
Files:      runtime/tools/blink.c, src/eval.c, src/ex_cmds2.c, src/ex_getln.c,
            src/fileio.c, src/gui_w32.c, src/gui_x11.c, src/if_perl.xs,
            src/os_unix.c, src/po/sjiscorr.c, src/pty.c

Patch 7.4.1226
Problem:    GRESOURCE_HDR is unused.
Solution:   Remove <A HREF="motion.html#it">it</A>. (Kazunobu Kuriyama)
Files:      src/configure.in, src/auto/configure, src/config.mk.in

Patch 7.4.1227
Problem:    Compiler warnings.
Solution:   Add UNUSED.  Add type cast. (Yegappan Lakshmanan)
Files:      src/getchar.c, src/os_macosx.m

Patch 7.4.1228
Problem:    <A HREF="builtin.html#copy()">copy()</A> and <A HREF="builtin.html#deepcopy()">deepcopy()</A> fail with special <A HREF="eval.html#variables">variables</A>. (Nikolai
            Pavlov)
Solution:   Make <A HREF="motion.html#it">it</A> work.  Add a test.  Closes #614.
Files:      src/eval.c, src/testdir/test_viml.vim

Patch 7.4.1229
Problem:    &quot;<A HREF="eval.html#eval">eval</A>&quot; and &quot;<A HREF="eval.html#expr">expr</A>&quot; <A HREF="channel.html#channel">channel</A> commands don't work yet.
Solution:   Implement them.  Update the error numbers.  Also add &quot;redraw&quot;.
Files:      src/channel.c, src/eval.c, src/json.c, src/ex_docmd.c,
            src/proto/channel.pro, src/proto/json.pro, src/proto/ex_docmd.pro,
            runtime/doc/channel.txt

Patch 7.4.1230
Problem:    <A HREF="os_win32.html#Win32">Win32</A>: opening a <A HREF="channel.html#channel">channel</A> may hang.  Not checking for <A HREF="message.html#messages">messages</A>
            while waiting for characters.
Solution:   Add a zero timeout.  Call parse_queued_messages(). (Yasuhiro
            Matsumoto)
Files:      src/os_win32.c

Patch 7.4.1231
Problem:    JSON <A HREF="message.html#messages">messages</A> are not parsed properly.
Solution:   Queue received <A HREF="message.html#messages">messages</A>.
Files:      src/eval.c src/channel.c, src/json.c, src/proto/eval.pro,
            src/proto/channel.pro, src/proto/json.pro, src/structs.h

Patch 7.4.1232
Problem:    Compiler warnings when the Sniff feature is enabled.
Solution:   Add UNUSED.
Files:      src/gui_gtk_x11.c

Patch 7.4.1233
Problem:    <A HREF="eval.html#Channel">Channel</A> command may cause a crash.
Solution:   Check for NULL argument. (Damien)
Files:      src/channel.c

Patch 7.4.1234
Problem:    Demo server only runs with <A HREF="if_pyth.html#Python">Python</A> 2.
Solution:   Make <A HREF="motion.html#it">it</A> run with <A HREF="if_pyth.html#Python">Python</A> 3 <A HREF="motion.html#as">as</A> well. (Ken Takata)
Files:      runtime/tools/demoserver.py

Patch 7.4.1235 (after 7.4.1231)
Problem:    Missing change to eval.c.
Solution:   Include that change.
Files:      src/eval.c

Patch 7.4.1236
Problem:    When &quot;<A HREF="syntax.html#syntax">syntax</A> manual&quot; was used switching between <A HREF="windows.html#buffers">buffers</A> removes
            the highlighting.
Solution:   Set the <A HREF="syntax.html#syntax">syntax</A> option without <A HREF="change.html#changing">changing</A> the value. (Anton
            Lindqvist)
Files:      runtime/syntax/manual.vim

Patch 7.4.1237
Problem:    Can't translate message without adding a line break.
Solution:   Join the two parts of the message.
Files:      src/memline.c

Patch 7.4.1238
Problem:    Can't handle two <A HREF="message.html#messages">messages</A> right after each other.
Solution:   Find the end of the JSON.  Read more when incomplete.  Add a C
            test for the JSON decoding.
Files:      src/channel.c, src/json.c, src/proto/json.pro, src/eval.c,
            src/Makefile, src/json_test.c, src/memfile_test.c, src/structs.h

Patch 7.4.1239
Problem:    JSON message after the first one is dropped.
Solution:   Put remainder of message back in the queue.
Files:      src/channel.c

Patch 7.4.1240
Problem:    <A HREF="visual.html#Visual">Visual</A> Studio tools are noisy.
Solution:   Suppress <A HREF="starting.html#startup">startup</A> info. (Mike Williams)
Files:      src/GvimExt/Makefile, src/Make_mvc.mak, src/tee/Make_mvc.mak

Patch 7.4.1241 (after 7.4.1238)
Problem:    Missing change in Makefile due to <A HREF="diff.html#diff">diff</A> mismatch
Solution:   Update the <A HREF="eval.html#list">list</A> of object files.
Files:      src/Makefile

Patch 7.4.1242 (after 7.4.1238)
Problem:    json_test fails without the <A HREF="eval.html#eval">eval</A> feature.
Solution:   Add #ifdef.
Files:      src/json_test.c

Patch 7.4.1243
Problem:    Compiler warning for uninitialized variable.
Solution:   Initialize <A HREF="motion.html#it">it</A>. (Elias Diem)
Files:      src/json.c

Patch 7.4.1244
Problem:    The <A HREF="channel.html#channel">channel</A> <A HREF="eval.html#functions">functions</A> don't sort together.
Solution:   Use a common &quot;ch_&quot; prefix.
Files:      src/eval.c, runtime/doc/eval.txt, runtime/tools/demoserver.py

Patch 7.4.1245
Problem:    File missing from <A HREF="intro.html#distribution">distribution</A>.
Solution:   Add json_test.c.
Files:      Filelist

Patch 7.4.1246
Problem:    The <A HREF="channel.html#channel">channel</A> functionality isn't tested.
Solution:   Add a test using a <A HREF="if_pyth.html#Python">Python</A> test server.
Files:      src/channel.c, src/proto/channel.pro,
            src/testdir/test_channel.vim, src/testdir/test_channel.py,
            src/testdir/Make_all.mak

Patch 7.4.1247
Problem:    The <A HREF="channel.html#channel">channel</A> test doesn't run on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Make <A HREF="motion.html#it">it</A> work on the <A HREF="os_win32.html#MS-Windows">MS-Windows</A> console. (Ken Takata)
Files:      src/testdir/test_channel.py, src/testdir/test_channel.vim

Patch 7.4.1248
Problem:    Can't reliably stop the <A HREF="channel.html#channel">channel</A> test server.  Can't start the
            server if the <A HREF="if_pyth.html#python">python</A> file is not executable.
Solution:   Use &quot;pkill&quot; instead of &quot;killall&quot;.  Run the <A HREF="if_pyth.html#python">python</A> file <A HREF="motion.html#as">as</A> an
            argument instead of <A HREF="motion.html#as">as</A> an executable.
Files:      src/testdir/test_channel.vim

Patch 7.4.1249
Problem:    Crash when the process a <A HREF="channel.html#channel">channel</A> is connected to exits.
Solution:   Use the file descriptor properly.  Add a test. (Damien)
            Also add a test for <A HREF="builtin.html#eval()">eval()</A>.
Files:      src/channel.c, src/testdir/test_channel.py,
            src/testdir/test_channel.vim

Patch 7.4.1250
Problem:    Running tests in shadow directory fails.
Solution:   Also link testdir/*.py
Files:      src/Makefile

Patch 7.4.1251
Problem:    New test file missing from <A HREF="intro.html#distribution">distribution</A>.
Solution:   Add src/testdir/*.py.
Files:      Filelist

Patch 7.4.1252
Problem:    The <A HREF="channel.html#channel">channel</A> test server may receive two <A HREF="message.html#messages">messages</A> concatenated.
Solution:   Split the <A HREF="message.html#messages">messages</A>.
Files:      src/testdir/test_channel.py

Patch 7.4.1253
Problem:    <A HREF="if_pyth.html#Python">Python</A> test server not displaying second of two commands.
            Solaris doesn't have &quot;pkill --full&quot;.
Solution:   Also echo the second command. Use &quot;pkill -f&quot;.
Files:      src/testdir/test_channel.py, src/testdir/test_channel.vim

Patch 7.4.1254
Problem:    Opening a second <A HREF="channel.html#channel">channel</A> causes a crash. (Ken Takata)
Solution:   Don't re-allocate the array with channels.
Files:      src/channel.c, src/testdir/test_channel.vim,
            src/testdir/test_channel.py

Patch 7.4.1255
Problem:    Crash for <A HREF="channel.html#channel">channel</A> &quot;<A HREF="eval.html#eval">eval</A>&quot; command without third argument.
Solution:   Check for missing argument.
Files:      src/channel.c, src/testdir/test_channel.vim,
            src/testdir/test_channel.py

Patch 7.4.1256
Problem:    On <A HREF="os_mac.html#Mac">Mac</A> sys.exit(0) doesn't kill the test server.
Solution:   Use self.server.shutdown(). (Jun Takimoto)
Files:      src/testdir/test_channel.py

Patch 7.4.1257
Problem:    <A HREF="eval.html#Channel">Channel</A> test fails in some configurations.
Solution:   Add check for the <A HREF="various.html#+channel">+channel</A> feature.
Files:      src/testdir/test_channel.vim

Patch 7.4.1258
Problem:    The <A HREF="channel.html#channel">channel</A> test can fail if <A HREF="message.html#messages">messages</A> arrive later.
Solution:   Add a short sleep. (Jun Takimoto)
Files:      src/testdir/test_channel.vim

Patch 7.4.1259
Problem:    No test for what patch 7.3.414 fixed.
Solution:   Add a test. (Elias Diem)
Files:      src/testdir/test_increment.vim

Patch 7.4.1260
Problem:    The <A HREF="channel.html#channel">channel</A> feature doesn't work on <A HREF="os_win32.html#Win32">Win32</A> <A HREF="gui.html#GUI">GUI</A>.
Solution:   Use WSAGetLastError(). (Ken Takata)
Files:      src/channel.c, src/testdir/test_channel.vim, src/vim.h

Patch 7.4.1261
Problem:    Pending <A HREF="channel.html#channel">channel</A> <A HREF="message.html#messages">messages</A> are garbage collected. Leaking memory in
            <A HREF="channel.html#ch_sendexpr()">ch_sendexpr()</A>.  Leaking memory for a decoded JSON <A HREF="eval.html#string">string</A>.
Solution:   <A HREF="motion.html#Mark">Mark</A> the message <A HREF="eval.html#list">list</A> <A HREF="motion.html#as">as</A> used. Free the encoded JSON.  Don't save
            the JSON <A HREF="eval.html#string">string</A>.
Files:      src/eval.c, src/channel.c, src/json.c, src/proto/channel.pro

Patch 7.4.1262
Problem:    The <A HREF="channel.html#channel">channel</A> callback is not invoked.
Solution:   Make a <A HREF="eval.html#list">list</A> of pending callbacks.
Files:      src/eval.c, src/channel.c, src/proto/channel.pro,
            src/testdir/test_channel.vim

Patch 7.4.1263
Problem:    <A HREF="channel.html#ch_open()">ch_open()</A> hangs when the server isn't running.
Solution:   Add a timeout. Use a <A HREF="eval.html#dict">dict</A> to pass arguments. (Yasuhiro Matsumoto)
Files:      runtime/doc/eval.txt, runtime/doc/channel.txt, src/channel.c,
            src/eval.c, src/netbeans.c, src/os_win32.c, src/proto/channel.pro,
            src/testdir/test_channel.vim

Patch 7.4.1264
Problem:    Crash when receiving an empty array.
Solution:   Check for array with wrong number of arguments. (Damien)
Files:      src/channel.c, src/eval.c, src/testdir/test_channel.py,
            src/testdir/test_channel.vim

Patch 7.4.1265
Problem:    Not all <A HREF="channel.html#channel">channel</A> commands are tested.
Solution:   Add a test for &quot;normal&quot;, &quot;<A HREF="eval.html#expr">expr</A>&quot; and &quot;redraw&quot;.
Files:      src/testdir/test_channel.py, src/testdir/test_channel.vim

Patch 7.4.1266
Problem:    A <A HREF="autocmd.html#BufAdd">BufAdd</A> <A HREF="autocmd.html#autocommand">autocommand</A> may cause an ml_get error (Christian
            Brabandt)
Solution:   Increment RedrawingDisabled earlier.
Files:      src/ex_cmds.c

Patch 7.4.1267
Problem:    Easy to miss handling all types of <A HREF="eval.html#variables">variables</A>.
Solution:   Change the variable type into an enum.
Files:      src/structs.h, src/eval.c

Patch 7.4.1268
Problem:    Waittime is used <A HREF="motion.html#as">as</A> seconds instead of milliseconds. (Hirohito
            Higashi)
Solution:   Divide by 1000.
Files:      src/channel.c

Patch 7.4.1269
Problem:    Encoding {'key':v:none} to JSON doesn't give an error (Tyru)
Solution:   Give an error.
Files:      src/json.c, src/testdir/test_json.vim

Patch 7.4.1270
Problem:    Warnings for missing values in switch.
Solution:   Change switch to if-else or add values.
Files:      src/if_py_both.h, src/if_python.c, src/if_python3.c

Patch 7.4.1271
Problem:    assert_false(v:false) reports an error. (Nikolai Pavlov)
Solution:   Recognize <A HREF="eval.html#v:true">v:true</A> and <A HREF="eval.html#v:false">v:false</A>. (Closes #625)
Files:      src/eval.c, src/testdir/test_assert.vim

Patch 7.4.1272 (after 7.4.1270)
Problem:    Using future enum value.
Solution:   Remove <A HREF="motion.html#it">it</A>.
Files:      src/if_python.c, src/if_python3.c

Patch 7.4.1273 (after 7.4.1271)
Problem:    assert_false(v:false) still fails.
Solution:   Fix the typo.
Files:      src/eval.c

Patch 7.4.1274
Problem:    Cannot run a <A HREF="channel.html#job">job</A>.
Solution:   Add <A HREF="channel.html#job_start()">job_start()</A>, <A HREF="channel.html#job_status()">job_status()</A> and <A HREF="channel.html#job_stop()">job_stop()</A>. Currently only works
            for <A HREF="os_unix.html#Unix">Unix</A>.
Files:      src/eval.c, src/structs.h, runtime/doc/eval.txt, src/os_unix.c,
            src/proto/os_unix.pro, src/feature.h, src/version.c,
            src/testdir/test_channel.vim

Patch 7.4.1275 (after 7.4.1274)
Problem:    Build fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Fix wrong #ifdef.
Files:      src/eval.c

Patch 7.4.1276
Problem:    Warning for not using return value of fcntl().
Solution:   Explicitly ignore the return value.
Files:      src/fileio.c, src/channel.c, src/memfile.c, src/memline.c

Patch 7.4.1277
Problem:    Compiler can complain about missing enum value in switch with some
            combination of features.
Solution:   Remove #ifdefs around <A HREF="change.html#case">case</A> statements.
Files:      src/eval.c

Patch 7.4.1278
Problem:    When jsonencode() fails <A HREF="motion.html#it">it</A> still returns something.
Solution:   Return an empty <A HREF="eval.html#string">string</A> on failure.
Files:      src/json.c, src/channel.c, src/testdir/test_json.vim,
            src/testdir/test_channel.vim, src/testdir/test_channel.py

Patch 7.4.1279
Problem:    jsonencode() is not producing strict JSON.
Solution:   Add jsencode() and jsdecode().  Make jsonencode() and jsondecode()
            strict.
Files:      src/json.c, src/json_test.c, src/proto/json.pro, src/channel.c,
            src/proto/channel.pro, src/eval.c, src/vim.h, src/structs.h,
            runtime/doc/eval.txt, runtime/doc/channel.txt,
            src/testdir/test_json.vim

Patch 7.4.1280
Problem:    Missing <A HREF="change.html#case">case</A> value.
Solution:   Add VAR_JOB.
Files:      src/if_python.c, src/if_python3.c

Patch 7.4.1281
Problem:    No test for skipping over code that isn't evaluated.
Solution:   Add a test with code that would fail when not skipped.
Files:      src/testdir/test_viml.vim

Patch 7.4.1282
Problem:    Crash when evaluating the <A HREF="pattern.html#pattern">pattern</A> of &quot;<A HREF="eval.html#:catch">:catch</A>&quot; causes an error.
            (Dominique Pelle)
Solution:   Block error <A HREF="message.html#messages">messages</A> at this point.
Files:      src/ex_eval.c

Patch 7.4.1283
Problem:    The <A HREF="channel.html#job">job</A> feature isn't available on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Add the <A HREF="channel.html#job">job</A> feature.  Fix argument of <A HREF="channel.html#job_stop()">job_stop()</A>. (Yasuhiro
            Matsumoto)
Files:      src/eval.c, src/feature.h, src/os_win32.c, src/proto/os_win32.pro

Patch 7.4.1284 (after 7.4.1282)
Problem:    Test 49 fails.
Solution:   Check for a different error message.
Files:      src/testdir/test49.vim

Patch 7.4.1285
Problem:    Cannot measure elapsed time.
Solution:   Add <A HREF="builtin.html#reltimefloat()">reltimefloat()</A>.
Files:      src/ex_cmds2.c, src/eval.c, src/proto/ex_cmds2.pro,
            src/testdir/test_reltime.vim, src/testdir/test_alot.vim

Patch 7.4.1286
Problem:    <A HREF="channel.html#ch_open()">ch_open()</A> with a timeout doesn't work correctly.
Solution:   Change how select() is used.  Don't give an error on timeout.
            Add a test for <A HREF="channel.html#ch_open()">ch_open()</A> failing.
Files:      src/channel.c, src/testdir/test_channel.vim

Patch 7.4.1287 (after 7.4.1286)
Problem:    <A HREF="eval.html#Channel">Channel</A> test fails.
Solution:   Use <A HREF="builtin.html#reltimefloat()">reltimefloat()</A>.
Files:      src/testdir/test_channel.vim

Patch 7.4.1288
Problem:    <A HREF="channel.html#ch_sendexpr()">ch_sendexpr()</A> does not use JS encoding.
Solution:   Use the encoding that fits the <A HREF="channel.html#channel">channel</A> mode.  Refuse using
            <A HREF="channel.html#ch_sendexpr()">ch_sendexpr()</A> on a raw <A HREF="channel.html#channel">channel</A>.
Files:      src/channel.c, src/proto/channel.pro, src/eval.c

Patch 7.4.1289
Problem:    <A HREF="eval.html#Channel">Channel</A> test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>, connect() takes too long.
Solution:   Adjust the test for <A HREF="os_win32.html#MS-Windows">MS-Windows</A> using &quot;<A HREF="channel.html#waittime">waittime</A>&quot;.
Files:      src/channel.c, src/testdir/test_channel.vim

Patch 7.4.1290
Problem:    Coverity complains about unnecessary check for NULL.
Solution:   Remove the check.
Files:      src/eval.c

Patch 7.4.1291
Problem:    On <A HREF="os_win32.html#MS-Windows">MS-Windows</A> the <A HREF="channel.html#channel">channel</A> test server doesn't quit.
Solution:   Use return instead of break. (Ken Takata)
Files:      src/testdir/test_channel.py

Patch 7.4.1292
Problem:    Some compilers complain about uninitialized variable, even though
            all possible cases are handled. (Dominique Pelle)
Solution:   Add a default <A HREF="starting.html#initialization">initialization</A>.
Files:      src/eval.c

Patch 7.4.1293
Problem:    Sometimes a <A HREF="channel.html#channel">channel</A> may hang waiting for a message that was
            already discarded. (Ken Takata)
Solution:   Store the ID of the message blocking on in the <A HREF="channel.html#channel">channel</A>.
Files:      src/channel.c

Patch 7.4.1294
Problem:    <A HREF="channel.html#job_stop()">job_stop()</A> only kills the started process.
Solution:   Send the signal to the process group. (Olaf Dabrunz)
Files:      src/os_unix.c

Patch 7.4.1295
Problem:    string(job) doesn't work well on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Use the process ID. (Yasuhiro Matsumoto)
Files:      src/eval.c

Patch 7.4.1296
Problem:    Cursor changes column with up motion when the <A HREF="pi_paren.html#matchparen">matchparen</A> <A HREF="usr_05.html#plugin">plugin</A>
            saves and restores the cursor position. (Martin Kunev)
Solution:   Make sure curswant is updated before invoking the <A HREF="autocmd.html#autocommand">autocommand</A>.
Files:      src/edit.c

Patch 7.4.1297
Problem:    On <A HREF="os_mac.html#Mac">Mac</A> test_channel leaves <A HREF="if_pyth.html#python">python</A> instances running.
Solution:   Use a small <A HREF="channel.html#waittime">waittime</A> to make <A HREF="channel.html#ch_open()">ch_open()</A> work. (Ozaki Kiichi)
Files:      src/testdir/test_channel.vim

Patch 7.4.1298
Problem:    When the <A HREF="channel.html#channel">channel</A> test fails in an unexpected way the server keeps
            running.
Solution:   Use try/catch. (Ozaki Kiichi)
Files:      src/testdir/test_channel.vim

Patch 7.4.1299
Problem:    When the server sends a message with ID zero the <A HREF="channel.html#channel">channel</A> handler
            is not invoked. (Christian <A HREF="change.html#J">J</A>. Robinson)
Solution:   Recognize zero value for the request ID.  Add a test for invoking
            the <A HREF="channel.html#channel">channel</A> handler.
Files:      src/channel.c, src/testdir/test_channel.vim,
            src/testdir/test_channel.py

Patch 7.4.1300
Problem:    Cannot test <A HREF="autocmd.html#CursorMovedI">CursorMovedI</A> because there is typeahead.
Solution:   Add disable_char_avail_for_testing().
Files:      src/eval.c, src/getchar.c, src/globals.h,
            src/testdir/test_cursor_func.vim, src/testdir/README.txt

Patch 7.4.1301
Problem:    Missing <A HREF="options.html#options">options</A> in <A HREF="channel.html#ch_open()">ch_open()</A>.
Solution:   Add s:chopt like in the other calls. (Ozaki Kiichi)
Files:      src/testdir/test_channel.vim

Patch 7.4.1302
Problem:    Typo in struct field name. (Ken Takata)
Solution:   Rename jf_pi to jv_pi.
Files:      src/eval.c, src/os_win32.c, src/structs.h

Patch 7.4.1303
Problem:    A <A HREF="eval.html#Funcref">Funcref</A> is not accepted <A HREF="motion.html#as">as</A> a callback.
Solution:   Make a <A HREF="eval.html#Funcref">Funcref</A> work. (Damien)
Files:      src/eval.c, src/testdir/test_channel.vim

Patch 7.4.1304
Problem:    Function names are difficult to read.
Solution:   Rename jsonencode to json_encode, jsondecode to json_decode,
            jsencode to js_encode and jsdecode to js_decode.
Files:      src/eval.c, runtime/doc/eval.txt, src/testdir/test_json.vim

Patch 7.4.1305
Problem:    &quot;\&#37;1l^#.*&quot; does not match on a line starting with &quot;<A HREF="pattern.html##">#</A>&quot;.
Solution:   Do not clear the start-of-line flag. (Christian Brabandt)
Files:      src/regexp.c, src/regexp_nfa.c, src/testdir/test36.in,
            src/testdir/test36.ok

Patch 7.4.1306
Problem:    <A HREF="eval.html#Job">Job</A> <A HREF="intro.html#control">control</A> doesn't work well on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Various fixes. (Ken Takata, Ozaki Kiichi, Yukihiro Nakadaira,
            Yasuhiro Matsumoto)
Files:      src/Make_mvc.mak, src/eval.c, src/os_unix.c, src/os_win32.c,
            src/proto/os_unix.pro, src/proto/os_win32.pro, src/structs.h

Patch 7.4.1307
Problem:    Some <A HREF="channel.html#channel">channel</A> tests fail on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Disable the failing tests temporarily.
Files:      src/testdir/test_channel.vim

Patch 7.4.1308 (after 7.4.1307)
Problem:    Typo in test.
Solution:   Change endf to endif.
Files:      src/testdir/test_channel.vim

Patch 7.4.1309
Problem:    When a test fails not all relevant info is listed.
Solution:   Add the <A HREF="message.html#errors">errors</A> to the <A HREF="message.html#messages">messages</A>.
Files:      src/testdir/runtest.vim

Patch 7.4.1310
Problem:    <A HREF="eval.html#Jobs">Jobs</A> don't open a <A HREF="channel.html#channel">channel</A>.
Solution:   Create pipes and add them to the <A HREF="channel.html#channel">channel</A>.  Add <A HREF="channel.html#ch_logfile()">ch_logfile()</A>.
            Only <A HREF="os_unix.html#Unix">Unix</A> for now.
Files:      src/channel.c, src/eval.c, src/os_unix.c, src/structs.h,
            src/gui_w48.c, src/proto/channel.pro, src/testdir/test_channel.vim,
            src/testdir/test_channel_pipe.py, runtime/doc/eval.txt

Patch 7.4.1311 (after 7.4.1310)
Problem:    sock_T is defined too late.
Solution:   Move <A HREF="motion.html#it">it</A> up.
Files:      src/vim.h

Patch 7.4.1312 (after 7.4.1311)
Problem:    sock_T is not defined without the <A HREF="various.html#+channel">+channel</A> feature.
Solution:   Always define <A HREF="motion.html#it">it</A>.
Files:      src/vim.h

Patch 7.4.1313
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: Using socket after <A HREF="motion.html#it">it</A> was closed causes an exception.
Solution:   Don't give an error when handling WM_NETBEANS.  Re-enable tests
            for <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Files:      src/gui_w48.c, src/testdir/test_channel.vim

Patch 7.4.1314
Problem:    Warning for uninitialized variable.
Solution:   Initialize <A HREF="motion.html#it">it</A>. (Dominique Pelle)
Files:      src/channel.c

Patch 7.4.1315
Problem:    Using a <A HREF="channel.html#channel">channel</A> handle does not allow for freeing <A HREF="motion.html#it">it</A> when unused.
Solution:   Add the <A HREF="eval.html#Channel">Channel</A> variable type.
Files:      src/structs.h, src/channel.c, src/misc2.c, src/eval.c,
            src/if_python.c, src/if_python3.c, src/json.c, src/gui_w48.c,
            src/netbeans.c, src/proto/channel.pro, src/os_unix.c,
            src/testdir/test_channel.py, src/testdir/test_channel.vim

Patch 7.4.1316
Problem:    Can't build <A HREF="os_win32.html#MS-Windows">MS-Windows</A> console version. (Tux)
Solution:   Add #ifdefs.
Files:      src/eval.c

Patch 7.4.1317
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="channel.html#channel">channel</A> test fails.
Solution:   Temporarily disable Test_connect_waittime().
Files:      src/testdir/test_channel.vim

Patch 7.4.1318
Problem:    <A HREF="eval.html#Channel">Channel</A> with pipes doesn't work in <A HREF="gui.html#GUI">GUI</A>.
Solution:   Register input handlers for pipes.
Files:      src/structs.h, src/feature.h, src/channel.c, src/eval.c,
            src/os_unix.c, src/os_win32.c, src/gui_w48.c, src/proto/channel.pro

Patch 7.4.1319 (after 7.4.1318)
Problem:    Tests fail on <A HREF="os_win32.html#MS-Windows">MS-Windows</A> and on <A HREF="os_unix.html#Unix">Unix</A> with <A HREF="gui.html#GUI">GUI</A>.
Solution:   Fix unregistering.
Files:      src/structs.h, src/channel.c, src/os_unix.c, src/os_win32.c,
            src/proto/channel.pro

Patch 7.4.1320
Problem:    Building with Cygwin or MingW with <A HREF="channel.html#channel">channel</A> but without Netbeans
            doesn't work.
Solution:   Set NETBEANS to &quot;no&quot; when not used.
Files:      src/Make_cyg_ming.mak

Patch 7.4.1321
Problem:    Compiler complains about missing statement.
Solution:   Add an empty statement. (Andrei Olsen)
Files:      src/os_win32.c

Patch 7.4.1322
Problem:    Crash when unletting the variable that holds the <A HREF="channel.html#channel">channel</A> in a
            callback function.  (Christian Robinson)
Solution:   Increase the reference <A HREF="intro.html#count">count</A> while invoking the callback.
Files:      src/eval.c, src/channel.c, src/proto/eval.pro,
            src/testdir/test_channel.vim

Patch 7.4.1323
Problem:    Do not get warnings when building with MingW.
Solution:   Remove the <A HREF="starting.html#-w">-w</A> flag. (Ken Takata)
Files:      src/Make_cyg_ming.mak

Patch 7.4.1324
Problem:    <A HREF="eval.html#Channels">Channels</A> with pipes don't work on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Add pipe I/O support. (Yasuhiro Matsumoto)
Files:      src/channel.c, src/os_win32.c, src/proto/channel.pro,
            src/structs.h, src/vim.h, src/testdir/test_channel.vim

Patch 7.4.1325
Problem:    <A HREF="eval.html#Channel">Channel</A> test fails on difference between <A HREF="os_unix.html#Unix">Unix</A> and <A HREF="os_dos.html#DOS">DOS</A> line endings.
Solution:   Strip off CR.  Make assert show difference better.
Files:      src/eval.c, src/channel.c

Patch 7.4.1326
Problem:    Build rules are bit too complicated.
Solution:   Remove -lwsock32 from Netbeans, it's already added for the <A HREF="channel.html#channel">channel</A>
            feature that <A HREF="motion.html#it">it</A> depends on. (Tony Mechelynck)
Files:      src/Make_cyg_ming.mak

Patch 7.4.1327
Problem:    <A HREF="eval.html#Channel">Channel</A> test doesn't work if <A HREF="if_pyth.html#Python">Python</A> executable is python.exe.
Solution:   Find py.exe or python.exe. (Ken Takata)
Files:      src/testdir/test_channel.vim

Patch 7.4.1328
Problem:    Can't compile with <A HREF="various.html#+job">+job</A> but without <A HREF="various.html#+channel">+channel</A>. (John Marriott)
Solution:   Add more #ifdefs.
Files:      src/os_unix.c

Patch 7.4.1329
Problem:    Crash when using <A HREF="channel.html#channel">channel</A> that failed to open.
Solution:   Check for NULL.  Update <A HREF="message.html#messages">messages</A>. (Yukihiro Nakadaira)
Files:      src/channel.c, src/eval.c, src/testdir/test_channel.vim

Patch 7.4.1330
Problem:    fd_read() has an unused argument.
Solution:   Remove the timeout. (Yasuhiro Matsumoto)
Files:      src/channel.c

Patch 7.4.1331
Problem:    Crash when closing the <A HREF="channel.html#channel">channel</A> in a callback. (Christian <A HREF="change.html#J">J</A>.
            Robinson)
Solution:   Take the callback out of the <A HREF="eval.html#list">list</A> before invoking <A HREF="motion.html#it">it</A>.
Files:      src/channel.c, src/testdir/test_channel.vim

Patch 7.4.1332
Problem:    Problem using Python3 when compiled with MingW.
Solution:   Define PYTHON3_HOME <A HREF="motion.html#as">as</A> a wide character <A HREF="eval.html#string">string</A>. (Yasuhiro
            Matsumoto)
Files:      src/Make_cyg_ming.mak

Patch 7.4.1333
Problem:    <A HREF="eval.html#Channel">Channel</A> test fails on non-darwin builds.
Solution:   Add the &quot;osx&quot; feature and test for that. (Kazunobu Kuriyama)
Files:      runtime/doc/eval.txt, src/eval.c, src/testdir/test_channel.vim

Patch 7.4.1334
Problem:    Many compiler warnings with MingW.
Solution:   Add type casts. (Yasuhiro Matsumoto)
Files:      src/channel.c, src/dosinst.h, src/eval.c, src/ex_cmds2.c,
            src/ex_getln.c, src/fileio.c, src/if_cscope.c, src/if_perl.xs,
            src/if_python.c, src/if_python3.c, src/if_ruby.c, src/main.c,
            src/mbyte.c, src/misc1.c, src/option.c, src/os_mswin.c,
            src/os_win32.c

Patch 7.4.1335
Problem:    Can't build on <A HREF="os_win32.html#MS-Windows">MS-Windows</A> with <A HREF="various.html#+job">+job</A> but without <A HREF="various.html#+channel">+channel</A>. (Cesar
            Romani)
Solution:   Add #ifdefs. (Yasuhiro Matsumoto)
Files:      src/os_win32.c

Patch 7.4.1336
Problem:    <A HREF="eval.html#Channel">Channel</A> NL mode is not supported yet.
Solution:   Add NL mode support to channels.
Files:      src/channel.c, src/netbeans.c, src/structs.h, src/os_win32.c,
            src/proto/channel.pro, src/proto/os_unix.pro,
            src/proto/os_win32.pro, src/testdir/test_channel.vim,
            src/testdir/test_channel_pipe.py

Patch 7.4.1337 (after 7.4.1336)
Problem:    Part of the change is missing.
Solution:   Add changes to eval.c
Files:      src/eval.c


Patch 7.4.1338 (after 7.4.1336)
Problem:    Another part of the change is missing.
Solution:   Type os_unix.c right this time.
Files:      src/os_unix.c

Patch 7.4.1339
Problem:    Warnings when building the <A HREF="gui.html#GUI">GUI</A> with MingW. (Cesar Romani)
Solution:   Add type casts. (Yasuhiro Matsumoto)
Files:      src/edit.c, src/gui_w32.c, src/gui_w48.c, src/os_mswin.c,
            src/os_win32.c

Patch 7.4.1340 (after 7.4.1339)
Problem:    Merge left extra #endif behind.
Solution:   Remove the #endif
Files:      src/os_win32.c

Patch 7.4.1341
Problem:    It's difficult to add more arguments to <A HREF="channel.html#ch_sendraw()">ch_sendraw()</A> and
            <A HREF="channel.html#ch_sendexpr()">ch_sendexpr()</A>.
Solution:   Make the third option a dictionary.
Files:      src/eval.c, src/structs.h, src/channel.c, src/os_unix.c,
            src/os_win32.c, src/proto/channel.pro,
            src/testdir/test_channel.vim, runtime/doc/eval.txt

Patch 7.4.1342
Problem:    On <A HREF="os_mac.html#Mac">Mac</A> OS/X the <A HREF="channel.html#waittime">waittime</A> must be <A HREF="change.html#&gt;">&gt;</A> 0 for connect to work.
Solution:   Use select() in a different way. (partly by Kazunobu Kuriyama)
            Always use a <A HREF="channel.html#waittime">waittime</A> of 1 or more.
Files:      src/eval.c, src/channel.c, src/testdir/test_channel.vim

Patch 7.4.1343
Problem:    Can't compile with <A HREF="various.html#+job">+job</A> but without <A HREF="various.html#+channel">+channel</A>. (Andrei Olsen)
Solution:   Move get_job_options up and adjust #ifdef.
Files:      src/eval.c

Patch 7.4.1344
Problem:    Can't compile <A HREF="os_win32.html#Win32">Win32</A> <A HREF="gui.html#GUI">GUI</A> with tiny features.
Solution:   Add #ifdef. (Christian Brabandt)
Files:      src/gui_w32.c

Patch 7.4.1345
Problem:    A few more compiler warnings. (Axel Bender)
Solution:   Add type casts.
Files:      src/gui_w32.c, src/gui_w48.c

Patch 7.4.1346
Problem:    Compiler warnings in build with -O2.
Solution:   Add initializations.
Files:      src/eval.c

Patch 7.4.1347
Problem:    When there is any error Vim will use a non-zero exit code.
Solution:   When using &quot;<A HREF="various.html#:silent!">:silent!</A>&quot; <A HREF="diff.html#do">do</A> not set the exit code. (Yasuhiro
            Matsumoto)
Files:      src/message.c

Patch 7.4.1348
Problem:    More compiler warnings. (John Marriott)
Solution:   Add type casts, remove unused variable.
Files:      src/gui_w32.c

Patch 7.4.1349
Problem:    And some more MingW compiler warnings. (Cesar Romani)
Solution:   Add type casts.
Files:      src/if_mzsch.c

Patch 7.4.1350
Problem:    When the test server fails to start Vim hangs.
Solution:   Check that there is actually something to read from the tty fd.
Files:      src/os_unix.c

Patch 7.4.1351
Problem:    When the port isn't opened yet when <A HREF="channel.html#ch_open()">ch_open()</A> is called <A HREF="motion.html#it">it</A> may
            fail instead of waiting for the specified time.
Solution:   Loop when select() succeeds but when connect() failed. Also use
            <A HREF="channel.html#channel">channel</A> logging for jobs.  Add <A HREF="channel.html#ch_log()">ch_log()</A>.
Files:      src/channel.c, src/eval.c, src/netbeans.c, src/proto/channel.pro,
            src/testdir/test_channel.vim, src/testdir/test_channel.py

Patch 7.4.1352
Problem:    The test <A HREF="usr_41.html#script">script</A> lists all <A HREF="eval.html#functions">functions</A> before executing them.
Solution:   Only <A HREF="eval.html#list">list</A> the function currently being executed.
Files:      src/testdir/runtest.vim

Patch 7.4.1353
Problem:    Test_connect_waittime is skipped for <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Add the test back, <A HREF="motion.html#it">it</A> works now.
Files:      src/testdir/test_channel.vim

Patch 7.4.1354
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: Mismatch between default compile <A HREF="options.html#options">options</A> and what the
            code expects.
Solution:   Change the default WINVER from 0x0500 to 0x0501. (Ken Takata)
Files:      src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 7.4.1355
Problem:    <A HREF="os_win32.html#Win32">Win32</A> console and <A HREF="gui.html#GUI">GUI</A> handle channels differently.
Solution:   Consolidate code between <A HREF="os_win32.html#Win32">Win32</A> console and <A HREF="gui.html#GUI">GUI</A>.
Files:      src/channel.c, src/eval.c, src/gui_w48.c, src/os_win32.c,
            src/proto/channel.pro

Patch 7.4.1356
Problem:    <A HREF="eval.html#Job">Job</A> and <A HREF="channel.html#channel">channel</A> <A HREF="options.html#options">options</A> parsing is scattered.
Solution:   Move all option value parsing to get_job_options();
Files:      src/channel.c, src/eval.c, src/structs.h, src/proto/channel.pro,
            src/testdir/test_channel.vim

Patch 7.4.1357 (after 7.4.1356)
Problem:    Error for returning value from void function.
Solution:   Don't <A HREF="diff.html#do">do</A> that.
Files:      src/eval.c

Patch 7.4.1358
Problem:    Compiler warning when not building with +crypt.
Solution:   Add #ifdef. (John Marriott)
Files:      src/undo.c

Patch 7.4.1359 (after 7.4.1356)
Problem:    <A HREF="eval.html#Channel">Channel</A> test <A HREF="channel.html#ch_sendexpr()">ch_sendexpr()</A> times out.
Solution:   Increase the timeout
Files:      src/testdir/test_channel.vim

Patch 7.4.1360
Problem:    Can't remove a callback with <A HREF="channel.html#ch_setoptions()">ch_setoptions()</A>.
Solution:   When passing zero or an empty <A HREF="eval.html#string">string</A> remove the callback.
Files:      src/channel.c, src/proto/channel.pro, src/testdir/test_channel.vim

Patch 7.4.1361
Problem:    <A HREF="eval.html#Channel">Channel</A> test fails on Solaris.
Solution:   Use the 1 msec <A HREF="channel.html#waittime">waittime</A> for all systems.
Files:      src/channel.c

Patch 7.4.1362 (after 7.4.1356)
Problem:    Using uninitialized value.
Solution:   Initialize jo_set.
Files:      src/eval.c

Patch 7.4.1363
Problem:    Compiler warnings with tiny build.
Solution:   Add #ifdefs.
Files:      src/gui_w48.c, src/gui_w32.c

Patch 7.4.1364
Problem:    The Win 16 code is not maintained and unused.
Solution:   Remove the Win 16 support.
Files:      src/gui_w16.c, src/gui_w32.c, src/gui_w48.c, src/Make_w16.mak,
            src/Makefile, src/Make_cyg_ming.mak, src/Make_mvc.mak,
            src/proto/gui_w16.pro, src/proto/os_win16.pro, src/guiw16rc.h,
            src/vim16.rc, src/vim16.def, src/tools16.bmp, src/eval.c,
            src/gui.c, src/misc2.c, src/option.c, src/os_msdos.c,
            src/os_mswin.c, src/os_win16.c, src/os_win16.h, src/version.c,
            src/winclip.c, src/feature.h, src/proto.h, src/vim.h, Filelist

Patch 7.4.1365
Problem:    Cannot execute a single test function.
Solution:   Add an argument to <A HREF="change.html#filter">filter</A> the <A HREF="eval.html#functions">functions</A> with. (Yasuhiro Matsumoto)
Files:      src/testdir/runtest.vim

Patch 7.4.1366
Problem:    Typo in test and resulting error in test result.
Solution:   Fix the typo and correct the result. (James McCoy, closes #650)
Files:      src/testdir/test_charsearch.in, src/testdir/test_charsearch.ok

Patch 7.4.1367
Problem:    Compiler warning for unreachable code.
Solution:   Remove a &quot;break&quot;. (Danek Duvall)
Files:      src/json.c

Patch 7.4.1368
Problem:    One more Win16 file remains.
Solution:   Delete <A HREF="motion.html#it">it</A>.
Files:      src/proto/os_win16.pro

Patch 7.4.1369
Problem:    <A HREF="eval.html#Channels">Channels</A> don't have a queue for stderr.
Solution:   Have a queue for each part of the <A HREF="channel.html#channel">channel</A>.
Files:      src/channel.c, src/eval.c, src/structs.h, src/netbeans.c,
            src/gui_w32.c, src/proto/channel.pro

Patch 7.4.1370
Problem:    The <A HREF="if_pyth.html#Python">Python</A> test <A HREF="usr_41.html#script">script</A> may keep on running.
Solution:   Join the threads. (Yasuhiro Matsumoto)
Files:      src/testdir/test_channel.py

Patch 7.4.1371
Problem:    <A HREF="options.html#X11">X11</A> <A HREF="gui.html#GUI">GUI</A> callbacks don't specify the part of the <A HREF="channel.html#channel">channel</A>.
Solution:   Pass the fd instead of the <A HREF="channel.html#channel">channel</A> ID.
Files:      src/channel.c

Patch 7.4.1372
Problem:    <A HREF="channel.html#channel">channel</A> read implementation is incomplete.
Solution:   Add <A HREF="channel.html#ch_read()">ch_read()</A> and <A HREF="options.html#options">options</A> for <A HREF="channel.html#ch_readraw()">ch_readraw()</A>.
Files:      src/channel.c, src/eval.c, src/structs.h, src/proto/channel.pro,
            src/testdir/test_channel.vim

Patch 7.4.1373
Problem:    Calling a Vim function over a <A HREF="channel.html#channel">channel</A> requires turning the
            arguments into a <A HREF="eval.html#string">string</A>.
Solution:   Add the &quot;call&quot; command. (Damien)  Also <A HREF="diff.html#merge">merge</A> &quot;<A HREF="eval.html#expr">expr</A>&quot; and &quot;<A HREF="eval.html#eval">eval</A>&quot;
            into one.
Files:      src/channel.c, src/testdir/test_channel.py,
            src/testdir/test_channel.vim

Patch 7.4.1374
Problem:    <A HREF="eval.html#Channel">Channel</A> test hangs on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Disable the <A HREF="channel.html#ch_read()">ch_read()</A> that is supposed to time out.
Files:      src/testdir/test_channel.vim

Patch 7.4.1375
Problem:    Still some Win16 code.
Solution:   Remove FEAT_GUI_W16.(Hirohito Higashi)
Files:      src/eval.c, src/ex_cmds.h, src/feature.h, src/gui.h, src/menu.c,
            src/misc1.c, src/option.c, src/proto.h, src/structs.h, src/term.c,
            src/vim.h, runtime/doc/gui_w16.txt

Patch 7.4.1376
Problem:    <A HREF="channel.html#ch_setoptions()">ch_setoptions()</A> cannot set all <A HREF="options.html#options">options</A>.
Solution:   Support more <A HREF="options.html#options">options</A>.
Files:      src/channel.c, src/eval.c, src/structs.h, runtime/doc/channel.txt,
            src/testdir/test_channel.vim

Patch 7.4.1377
Problem:    Test_connect_waittime() is flaky.
Solution:   Ignore the &quot;Connection reset by peer&quot; error.
Files:      src/testdir/test_channel.vim

Patch 7.4.1378
Problem:    Can't change <A HREF="channel.html#job">job</A> settings after <A HREF="motion.html#it">it</A> started.
Solution:   Add <A HREF="channel.html#job_setoptions()">job_setoptions()</A> with the &quot;stoponexit&quot; flag.
Files:      src/eval.c, src/main.c, src/structs.h, src/proto/eval.pro,
            src/testdir/test_channel.vim

Patch 7.4.1379
Problem:    <A HREF="eval.html#Channel">Channel</A> test fails on <A HREF="os_win32.html#Win32">Win32</A> console.
Solution:   Don't sleep when timeout is zero. Call channel_wait() before
            channel_read(). <A HREF="eval.html#Channels">Channels</A> are not polled during &quot;<A HREF="various.html#:sleep">:sleep</A>&quot;. (Yukihiro
            Nakadaira)
Files:      src/channel.c, src/misc2.c, src/gui_w32.c, src/os_win32.c

Patch 7.4.1380
Problem:    The <A HREF="channel.html#job">job</A> exit callback is not implemented.
Solution:   Add the &quot;exit-cb&quot; option.
Files:      src/structs.h, src/eval.c, src/channel.c, src/proto/eval.pro,
            src/misc2.c, src/macros.h, src/testdir/test_channel.vim

Patch 7.4.1381 (after 7.4.1380)
Problem:    Exit value not available on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Set the exit value.
Files:      src/structs.h, src/os_win32.c

Patch 7.4.1382
Problem:    Can't get the <A HREF="channel.html#job">job</A> of a <A HREF="channel.html#channel">channel</A>.
Solution:   Add <A HREF="channel.html#ch_getjob()">ch_getjob()</A>.
Files:      src/eval.c, runtime/doc/channel.txt, runtime/doc/eval.txt

Patch 7.4.1383
Problem:    GvimExt only loads the old libintl.dll.
Solution:   Also try loading libint-8.dll. (Ken Takata, closes #608)
Files:      src/GvimExt/gvimext.cpp, src/GvimExt/gvimext.h

Patch 7.4.1384
Problem:    It is not <A HREF="starting.html#easy">easy</A> to use a set of plugins and their dependencies.
Solution:   Add <A HREF="repeat.html#packages">packages</A>, &quot;:loadplugin&quot;, <A HREF="options.html#'packpath'">'packpath'</A>.
Files:      src/main.c, src/ex_cmds2.c, src/option.c, src/option.h,
            src/ex_cmds.h, src/eval.c, src/version.c, src/proto/ex_cmds2.pro,
            runtime/doc/repeat.txt, runtime/doc/options.txt,
            runtime/optwin.vim

Patch 7.4.1385
Problem:    Compiler warning for using array.
Solution:   Use the right member name. (Yegappan Lakshmanan)
Files:      src/eval.c

Patch 7.4.1386
Problem:    When the <A HREF="eval.html#Job">Job</A> exit callback is invoked, the <A HREF="channel.html#job">job</A> may be freed too
            soon. (Yasuhiro Matsumoto)
Solution:   Increase refcount.
Files:      src/eval.c

Patch 7.4.1387
Problem:    Win16 docs still referenced.
Solution:   Remove Win16 files from the docs Makefile. (Kenichi Ito)
Files:      runtime/doc/Makefile

Patch 7.4.1388
Problem:    Compiler warning. (Cesar Romani)
Solution:   Initialize variable.
Files:      src/ex_cmds2.c

Patch 7.4.1389
Problem:    Incomplete function declaration.
Solution:   Add &quot;void&quot;. (Yasuhiro Matsumoto)
Files:      src/eval.c

Patch 7.4.1390
Problem:    When building with <A HREF="gui_x11.html#GTK">GTK</A> and glib-compile-resources cannot be found
            building Vim fails. (Michael Gehring)
Solution:   Make GLIB_COMPILE_RESOURCES empty instead of leaving <A HREF="motion.html#it">it</A> at &quot;no&quot;.
            (nuko8, closes #655)
Files:      src/configure.in, src/auto/configure

Patch 7.4.1391
Problem:    Warning for uninitialized variable.
Solution:   Set <A HREF="motion.html#it">it</A> to zero. (Christian Brabandt)
Files:      src/eval.c

Patch 7.4.1392
Problem:    Some tests fail for <A HREF="os_win32.html#Win32">Win32</A> console version.
Solution:   Move the tests to SCRIPTS_MORE2.  Pass VIMRUNTIME. (Christian
            Brabandt)
Files:      src/testdir/Make_all.mak

Patch 7.4.1393
Problem:    Starting a <A HREF="channel.html#job">job</A> hangs in the <A HREF="gui.html#GUI">GUI</A>. (Takuya Fujiwara)
Solution:   Don't check if ch_job is NULL when checking for an error.
            (Yasuhiro Matsumoto)
Files:      src/channel.c

Patch 7.4.1394
Problem:    Can't sort inside a sort function.
Solution:   Use a struct to store the sort parameters. (Jacob Niehus)
Files:      src/eval.c, src/testdir/test_sort.vim

Patch 7.4.1395
Problem:    Using DETACH in <A HREF="quotes.html#quotes">quotes</A> is not compatible with the Netbeans
            interface. (Xavier de Gaye)
Solution:   Remove the <A HREF="quotes.html#quotes">quotes</A>, only use them for JSON and JS mode.
Files:      src/netbeans.c, src/channel.c

Patch 7.4.1396
Problem:    Compiler warnings for conversions.
Solution:   Add type cast.
Files:      src/ex_cmds2.c

Patch 7.4.1397
Problem:    Sort test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Correct the compare function.
Files:      src/testdir/test_sort.vim

Patch 7.4.1398
Problem:    The close-cb option is not implemented yet.
Solution:   Implement close-cb. (Yasuhiro Matsumoto)
Files:      src/channel.c, src/eval.c, src/structs.h, src/proto/channel.pro,
            src/testdir/test_channel.py, src/testdir/test_channel.vim

Patch 7.4.1399
Problem:    The <A HREF="os_msdos.html#MS-DOS">MS-DOS</A> code does not build.
Solution:   Remove the old <A HREF="os_msdos.html#MS-DOS">MS-DOS</A> code.
Files:      Filelist, src/Make_bc3.mak, src/Make_bc5.mak, src/Make_djg.mak,
            src/Makefile, src/blowfish.c, src/buffer.c, src/diff.c,
            src/digraph.c, src/dosinst.h, src/eval.c, src/ex_cmds.c,
            src/ex_cmds2.c, src/ex_docmd.c, src/ex_getln.c, src/feature.h,
            src/fileio.c, src/getchar.c, src/globals.h, src/macros.h,
            src/main.c, src/mbyte.c, src/memfile.c, src/memline.c,
            src/misc1.c, src/misc2.c, src/netbeans.c, src/option.c,
            src/option.h, src/os_msdos.c, src/os_msdos.h, src/proto.h,
            src/proto/os_msdos.pro, src/regexp.c, src/screen.c, src/structs.h,
            src/syntax.c, src/term.c, src/undo.c, src/uninstal.c,
            src/version.c, src/vim.h, src/window.c, src/xxd/Make_bc3.mak,
            src/xxd/Make_djg.mak


Patch 7.4.1400
Problem:    <A HREF="if_perl.html#Perl">Perl</A> <A HREF="eval.html#eval">eval</A> doesn't work properly on 64-bit big-endian machine.
Solution:   Use 32 bit type for the key. (Danek Duvall)
Files:      src/if_perl.xs

Patch 7.4.1401
Problem:    Having <A HREF="options.html#'autochdir'">'autochdir'</A> set during <A HREF="starting.html#startup">startup</A> and using <A HREF="diff.html#diff">diff</A> mode doesn't
            work. (Axel Bender)
Solution:   Don't use <A HREF="options.html#'autochdir'">'autochdir'</A> while still starting up. (Christian
            Brabandt)
Files:      src/buffer.c

Patch 7.4.1402
Problem:    <A HREF="gui_x11.html#GTK">GTK</A> 3 is not supported.
Solution:   Add <A HREF="gui_x11.html#GTK">GTK</A> 3 support. (Kazunobu Kuriyama)
Files:      runtime/doc/eval.txt, runtime/doc/gui.txt,
            runtime/doc/gui_x11.txt, src/auto/configure, src/channel.c,
            src/config.h.in, src/configure.in, src/eval.c, src/gui.h,
            src/gui_beval.c, src/gui_beval.h, src/gui_gtk.c, src/gui_gtk_f.c,
            src/gui_gtk_f.h, src/gui_gtk_x11.c, src/if_mzsch.c, src/mbyte.c,
            src/netbeans.c, src/structs.h, src/version.c

Patch 7.4.1403
Problem:    Can't build without the <A HREF="quickfix.html#quickfix">quickfix</A> feature.
Solution:   Add #ifdefs. Call ex_ni() for unimplemented commands. (Yegappan
            Lakshmanan)
Files:      src/ex_cmds2.c, src/popupmnu.c

Patch 7.4.1404
Problem:    <A HREF="channel.html#ch_read()">ch_read()</A> doesn't time out on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Instead of WM_NETBEANS use select(). (Yukihiro Nakadaira)
Files:      src/channel.c, src/gui_w32.c, src/os_win32.c, src/structs.h,
            src/testdir/test_channel.vim, src/vim.h

Patch 7.4.1405
Problem:    Completion menu flickers.
Solution:   Delay showing the <A HREF="popup.html#popup">popup</A> menu. (Shougo Matsu, Justin <A HREF="motion.html#M">M</A>. Keyes,
	    closes #656)
Files:      src/edit.c

Patch 7.4.1406
Problem:    Leaking memory in cs_print_tags_priv().
Solution:   Free tbuf. (idea by Forrest Fleming)
Files:      src/if_cscope.c

Patch 7.4.1407
Problem:    <A HREF="builtin.html#json_encode()">json_encode()</A> does not handle NaN and inf properly. (David
            Barnett)
Solution:   For JSON turn them into &quot;<A HREF="vim9.html#null">null</A>&quot;.  For JS use &quot;NaN&quot; and &quot;Infinity&quot;.
            Add <A HREF="builtin.html#isnan()">isnan()</A>.
Files:      src/eval.c, src/json.c, src/testdir/test_json.vim

Patch 7.4.1408
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> doesn't have <A HREF="builtin.html#isnan()">isnan()</A> and <A HREF="builtin.html#isinf()">isinf()</A>.
Solution:   Use _isnan() and _isinf().
Files:      src/eval.c, src/json.c

Patch 7.4.1409 (after 7.4.1402)
Problem:    Configure includes <A HREF="gui.html#GUI">GUI</A> despite --disable-gui flag.
Solution:   Add SKIP_GTK3. (Kazunobu Kuriyama)
Files:      src/configure.in, src/auto/configure

Patch 7.4.1410
Problem:    Leaking memory in <A HREF="if_cscop.html#cscope">cscope</A> interface.
Solution:   Free memory when no <A HREF="intro.html#tab">tab</A> is found. (Christian Brabandt)
Files:      src/if_cscope.c

Patch 7.4.1411
Problem:    Compiler warning for indent. (Ajit Thakkar)
Solution:   Indent normally.
Files:      src/ui.c

Patch 7.4.1412
Problem:    Compiler warning for indent. (Dominique Pelle)
Solution:   Fix the indent.
Files:      src/farsi.c

Patch 7.4.1413
Problem:    When calling <A HREF="channel.html#ch_close()">ch_close()</A> the close callback is invoked, even though
            the docs say <A HREF="motion.html#it">it</A> isn't. (Christian <A HREF="change.html#J">J</A>. Robinson)
Solution:   Don't call the close callback.
Files:      src/eval.c, src/channel.c, src/netbeans.c, src/proto/channel.pro

Patch 7.4.1414
Problem:    Appveyor only builds one feature set.
Solution:   Build a combination of features and GUI/console. (Christian
            Brabandt)
Files:      appveyor.yml, src/appveyor.bat

Patch 7.4.1415 (after 7.4.1414)
Problem:    Dropped the skip-tags setting.
Solution:   Put <A HREF="motion.html#it">it</A> back.
Files:      appveyor.yml

Patch 7.4.1416
Problem:    Using &quot;u_char&quot; instead of &quot;char_u&quot;, which doesn't work everywhere.
            (Jrg Plate)
Solution:   Use &quot;char_u&quot; always.
Files:      src/integration.c, src/macros.h

Patch 7.4.1417 (after 7.4.1414)
Problem:    Missing appveyor.bat from the <A HREF="intro.html#distribution">distribution</A>.
Solution:   Add <A HREF="motion.html#it">it</A> to the <A HREF="eval.html#list">list</A> of files.
Files:      Filelist

Patch 7.4.1418
Problem:    <A HREF="channel.html#job_stop()">job_stop()</A> on <A HREF="os_win32.html#MS-Windows">MS-Windows</A> does not really stop the <A HREF="channel.html#job">job</A>.
Solution:   Make the default to stop the <A HREF="channel.html#job">job</A> forcefully. (Ken Takata)
            Make <A HREF="os_win32.html#MS-Windows">MS-Windows</A> and <A HREF="os_unix.html#Unix">Unix</A> more similar.
Files:      src/os_win32.c, src/os_unix.c, runtime/doc/eval.txt

Patch 7.4.1419
Problem:    Tests slowed down because of the &quot;not a terminal&quot; warning.
Solution:   Add the <A HREF="starting.html#--not-a-term">--not-a-term</A> command line argument.
Files:      src/main.c, src/testdir/Makefile, src/Make_all.mak,
            src/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_vms.mms,
            runtime/doc/starting.txt

Patch 7.4.1420 (after 7.4.1419)
Problem:    Missing makefile.
Solution:   Type the path correctly.
Files:      src/testdir/Make_all.mak

Patch 7.4.1421
Problem:    May free a <A HREF="channel.html#channel">channel</A> when a callback may need to be invoked.
Solution:   Keep the <A HREF="channel.html#channel">channel</A> when refcount is zero.
Files:      src/eval.c, src/channel.c, src/proto/channel.pro

Patch 7.4.1422
Problem:    Error when reading fails uses wrong errno.  Keeping <A HREF="channel.html#channel">channel</A> open
            after <A HREF="channel.html#job">job</A> stops results in test failing.
Solution:   Move the error up.  Add ch_job_killed.
Files:      src/channel.c, src/eval.c, src/structs.h

Patch 7.4.1423
Problem:    <A HREF="eval.html#Channel">Channel</A> test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Do not give an error message when reading fails, assume the other
            end exited.
Files:      src/channel.c

Patch 7.4.1424
Problem:    Not using <A HREF="starting.html#--not-a-term">--not-a-term</A> when running tests on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Use NO_PLUGIN. (Christian Brabandt)
Files:      src/testdir/Make_dos.mak

Patch 7.4.1425
Problem:    There are still references to <A HREF="os_msdos.html#MS-DOS">MS-DOS</A> support.
Solution:   Remove most of the help txt and <A HREF="usr_90.html#install">install</A> instructions. (Ken Takata)
Files:      src/INSTALLpc.txt, runtime/doc/os_msdos.txt, csdpmi4b.zip,
            Filelist

Patch 7.4.1426
Problem:    The &quot;out-io&quot; option for jobs is not implemented yet.
Solution:   Implement the &quot;buffer&quot; value: append <A HREF="channel.html#job">job</A> output to a buffer.
Files:      src/eval.c, src/channel.c, src/structs.h, src/netbeans.c,
            runtime/doc/channel.txt

Patch 7.4.1427
Problem:    Trailing comma in enums is not ANSI C.
Solution:   Remove the trailing commas.
Files:      src/alloc.h, src/gui_mac.c

Patch 7.4.1428
Problem:    Compiler warning for non-virtual destructor.
Solution:   Make <A HREF="motion.html#it">it</A> virtual. (Yasuhiro Matsumoto)
Files:      src/gui_dwrite.cpp

Patch 7.4.1429
Problem:    On <A HREF="os_win32.html#MS-Windows">MS-Windows</A>, when not use renderoptions=type:directx, drawing
            emoji will be broken.
Solution:   Fix usage of unicodepdy. (Yasuhiro Matsumoto)
Files:      src/gui_w32.c

Patch 7.4.1430
Problem:    When encoding JSON, turning NaN and Infinity into <A HREF="vim9.html#null">null</A> without
            giving an error is not useful.
Solution:   Pass NaN and Infinity on.  If the receiver can't handle them <A HREF="motion.html#it">it</A>
            will generate the error.
Files:      src/json.c, src/testdir/test_json.vim, runtime/doc/eval.txt

Patch 7.4.1431
Problem:    Including header files <A HREF="if_cscop.html#twice">twice</A>.
Solution:   Remove the extra includes.
Files:      src/if_cscope.h

Patch 7.4.1432
Problem:    Typo in button text.
Solution:   Fix the typo. (Dominique Pelle)
Files:      src/gui_gtk.c

Patch 7.4.1433
Problem:    The Sniff interface is no longer useful, the tool has not been
            available for may years.
Solution:   Delete the Sniff interface and related code.
Files:      src/if_sniff.c, src/if_sniff.h, src/charset.c, src/edit.c,
            src/eval.c, src/ex_cmds2.c, src/ex_docmd.c, src/ex_getln.c,
            src/gui_gtk_x11.c, src/gui_w32.c, src/gui_x11.c, src/normal.c,
            src/os_unix.c, src/os_win32.c, src/term.c, src/ui.c,
            src/version.c, src/ex_cmds.h, src/feature.h, src/keymap.h,
            src/structs.h, src/vim.h, src/Make_mvc.mak, src/Make_vms.mms,
            src/Makefile, src/configure.in, src/auto/configure,
            src/config.h.in, src/config.mk.in, runtime/doc/if_sniff.txt,
            src/config.aap.in, src/main.aap

Patch 7.4.1434
Problem:    JSON encoding doesn't handle surrogate pair.
Solution:   Improve <A HREF="mbyte.html#multibyte">multibyte</A> handling of JSON. (Yasuhiro Matsumoto)
Files:      src/json.c, src/testdir/test_json.vim

Patch 7.4.1435
Problem:    It is confusing that <A HREF="channel.html#ch_sendexpr()">ch_sendexpr()</A> and <A HREF="channel.html#ch_sendraw()">ch_sendraw()</A> wait for a
            response.
Solution:   Add <A HREF="channel.html#ch_evalexpr()">ch_evalexpr()</A> and <A HREF="channel.html#ch_evalraw()">ch_evalraw()</A>.
Files:      src/eval.c, runtime/doc/channel.txt, runtime/doc/eval.txt,
            src/testdir/test_channel.vim

Patch 7.4.1436 (after 7.4.1433)
Problem:    Sniff files still referenced in <A HREF="intro.html#distribution">distribution</A>.
Solution:   Remove sniff files from <A HREF="intro.html#distribution">distribution</A>.
Files:      Filelist

Patch 7.4.1437
Problem:    Old system doesn't have <A HREF="builtin.html#isinf()">isinf()</A> and NAN. (Ben Fritz)
Solution:   Adjust #ifdefs.  Detect <A HREF="builtin.html#isnan()">isnan()</A> and <A HREF="builtin.html#isinf()">isinf()</A> <A HREF="eval.html#functions">functions</A> with
            configure. Use a replacement when missing. (Kazunobu Kuriyama)
Files:      src/eval.c, src/json.c, src/macros.h, src/message.c,
            src/config.h.in, src/configure.in, src/auto/configure

Patch 7.4.1438
Problem:    Can't get buffer number of a <A HREF="channel.html#channel">channel</A>.
Solution:   Add <A HREF="channel.html#ch_getbufnr()">ch_getbufnr()</A>.
Files:      src/eval.c, src/channel.c, src/testdir/test_channel.vim,
            runtime/doc/channel.txt, runtime/doc/eval.txt

Patch 7.4.1439 (after 7.4.1434)
Problem:    Using uninitialized variable.
Solution:   Initialize vc_type.
Files:      src/json.c

Patch 7.4.1440 (after 7.4.1437)
Problem:    Can't build on Windows.
Solution:   Change #ifdefs.  Only define isnan when used.
Files:      src/macros.h, src/eval.c, src/json.c

Patch 7.4.1441
Problem:    Using empty name instead of no name for <A HREF="channel.html#channel">channel</A> buffer.
Solution:   Remove the empty name.
Files:      src/channel.c

Patch 7.4.1442
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: more compilation warnings for destructor.
Solution:   Add &quot;virtual&quot;. (Ken Takata)
Files:      src/if_ole.cpp

Patch 7.4.1443
Problem:    Can't build <A HREF="gui_x11.html#GTK3">GTK3</A> with small features.
Solution:   Use gtk_widget_get_window().  Fix typos. (Dominique Pelle)
Files:      src/gui_gtk_x11.c

Patch 7.4.1444
Problem:    Can't build with JSON but without <A HREF="mbyte.html#multibyte">multibyte</A>.
Solution:   Fix pointer name.
Files:      src/json.c

Patch 7.4.1445
Problem:    Memory corruption when <A HREF="options.html#'encoding'">'encoding'</A> is not <A HREF="mbyte.html#utf-8">utf-8</A>.
Solution:   Convert decoded <A HREF="eval.html#string">string</A> later.
Files:      src/json.c

Patch 7.4.1446
Problem:    Crash when using <A HREF="builtin.html#json_decode()">json_decode()</A>.
Solution:   Terminate <A HREF="eval.html#string">string</A> with a NUL byte.
Files:      src/json.c

Patch 7.4.1447
Problem:    Memory leak when using <A HREF="channel.html#ch_read()">ch_read()</A>. (Dominique Pelle)
            No log message when stopping a <A HREF="channel.html#job">job</A> and a few other situations.
            Too many &quot;Nothing to read&quot; <A HREF="message.html#messages">messages</A>.  <A HREF="eval.html#Channels">Channels</A> are not freed.
Solution:   Free the listtv.  Add more log <A HREF="message.html#messages">messages</A>. Remove &quot;Nothing to read&quot;
            message.  Remove the <A HREF="channel.html#channel">channel</A> from the <A HREF="channel.html#job">job</A> when its refcount
            becomes zero.
Files:      src/eval.c, src/channel.c

Patch 7.4.1448
Problem:    JSON tests fail if <A HREF="options.html#'encoding'">'encoding'</A> is not <A HREF="mbyte.html#utf-8">utf-8</A>.
Solution:   Force encoding to <A HREF="mbyte.html#utf-8">utf-8</A>.
Files:      src/testdir/test_json.vim

Patch 7.4.1449
Problem:    Build fails with <A HREF="channel.html#job">job</A> feature but without <A HREF="channel.html#channel">channel</A> feature.
Solution:   Add #ifdef.
Files:      src/eval.c

Patch 7.4.1450
Problem:    Json encoding still fails when encoding is not <A HREF="mbyte.html#utf-8">utf-8</A>.
Solution:   Set <A HREF="options.html#'encoding'">'encoding'</A> before <A HREF="repeat.html#:scriptencoding">:scriptencoding</A>.  Run the json test
            separately to avoid affecting other tests.
Files:      src/testdir/test_json.vim, src/testdir/Make_all.mak,
            src/testdir/test_alot.vim

Patch 7.4.1451
Problem:    Vim hangs when a <A HREF="channel.html#channel">channel</A> has a callback but isn't referenced.
Solution:   Have channel_unref() only return <A HREF="eval.html#TRUE">TRUE</A> when the <A HREF="channel.html#channel">channel</A> was
            actually freed.
Files:      src/eval.c, src/channel.c, src/proto/channel.pro

Patch 7.4.1452
Problem:    When a callback adds a <A HREF="syntax.html#syntax">syntax</A> item either the redraw doesn't
            happen right away or in the <A HREF="gui.html#GUI">GUI</A> the cursor is in the wrong
            position for a moment. (Jakson Alves de Aquino)
Solution:   Redraw after the callback was invoked.
Files:      src/channel.c

Patch 7.4.1453
Problem:    Missing <A HREF="starting.html#--not-a-term">--not-a-term</A>.
Solution:   Add the argument.
Files:      src/testdir/Make_amiga.mak

Patch 7.4.1454
Problem:    The exit callback test is flaky.
Solution:   Loop to wait for a short time up to a second.
Files:      src/testdir/test_channel.vim

Patch 7.4.1455
Problem:    JSON decoding test for surrogate pairs is in the wrong place.
Solution:   Move the test lines. (Ken Takata)
Files:      src/testdir/test_json.vim

Patch 7.4.1456
Problem:    Test 87 fails with <A HREF="if_pyth.html#Python">Python</A> 3.5.
Solution:   Work around difference. (Taro Muraoka)
Files:      src/testdir/test87.in

Patch 7.4.1457
Problem:    Opening a <A HREF="channel.html#channel">channel</A> with select() is not done properly.
Solution:   Also used read-fds. Use getsockopt() to check for <A HREF="message.html#errors">errors</A>. (Ozaki
            Kiichi)
Files:      src/channel.c

Patch 7.4.1458
Problem:    When a JSON <A HREF="channel.html#channel">channel</A> has a callback <A HREF="motion.html#it">it</A> may never be cleared.
Solution:   Do not write &quot;DETACH&quot; into a JS or JSON <A HREF="channel.html#channel">channel</A>.
Files:      src/channel.c

Patch 7.4.1459 (after 7.4.1457)
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> doesn't know socklen_t.
Solution:   Use previous <A HREF="eval.html#method">method</A> for WIN32.
Files:      src/channel.c

Patch 7.4.1460
Problem:    <A HREF="autocmd.html#Syntax">Syntax</A> error in rarely used code.
Solution:   Fix the mch_rename() declaration. (Ken Takata)
Files:      src/os_unix.c, src/proto/os_unix.pro

Patch 7.4.1461
Problem:    When starting <A HREF="channel.html#job">job</A> on <A HREF="os_win32.html#MS-Windows">MS-Windows</A> all parts of the command are put
            in <A HREF="quotes.html#quotes">quotes</A>.
Solution:   Only use <A HREF="quotes.html#quotes">quotes</A> when needed. (Yasuhiro Matsumoto)
Files:      src/eval.c

Patch 7.4.1462
Problem:    Two more rarely used <A HREF="eval.html#functions">functions</A> with <A HREF="message.html#errors">errors</A>.
Solution:   Add proper argument types. (Dominique Pelle)
Files:      src/misc2.c, src/termlib.c

Patch 7.4.1463
Problem:    Configure doesn't find <A HREF="builtin.html#isinf()">isinf()</A> and <A HREF="builtin.html#isnan()">isnan()</A> on some systems.
Solution:   Use a configure check that includes math.h.
Files:      src/configure.in, src/auto/configure

Patch 7.4.1464
Problem:    When the argument of <A HREF="builtin.html#sort()">sort()</A> is zero or empty <A HREF="motion.html#it">it</A> fails.
Solution:   Make zero work <A HREF="motion.html#as">as</A> documented. (suggested by Yasuhiro Matsumoto)
Files:      src/eval.c, src/testdir/test_sort.vim

Patch 7.4.1465
Problem:    Coverity reported possible use of NULL pointer when using buffer
            output with JSON mode.
Solution:   Make <A HREF="motion.html#it">it</A> actually possible to use JSON mode with a buffer.
            Re-encode the JSON to append <A HREF="motion.html#it">it</A> to the buffer.
Files:      src/channel.c, src/testdir/test_channel.vim

Patch 7.4.1466
Problem:    Coverity reports dead code.
Solution:   Remove the two lines.
Files:      src/channel.c

Patch 7.4.1467
Problem:    Can't build without the float feature.
Solution:   Add #ifdefs. (Nick Owens, closes #667)
Files:      src/eval.c, src/json.c

Patch 7.4.1468
Problem:    Sort test doesn't test with &quot;1&quot; argument.
Solution:   Also test ignore-case <A HREF="change.html#sorting">sorting</A>. (Yasuhiro Matsumoto)
Files:      src/testdir/test_sort.vim

Patch 7.4.1469
Problem:    <A HREF="eval.html#Channel">Channel</A> test sometimes fails, especially on OS/X. (Kazunobu
            Kuriyama)
Solution:   Change the &amp;&amp; into &#124;&#124;, call getsockopt() in more situations.
            (Ozaki Kiichi)
Files:      src/channel.c

Patch 7.4.1470
Problem:    Coverity reports missing restore.
Solution:   Move <A HREF="builtin.html#json_encode()">json_encode()</A> call up.
Files:      src/channel.c

Patch 7.4.1471
Problem:    Missing out-of-memory check.  And Coverity warning.
Solution:   Bail out when msg is NULL.
Files:      src/channel.c

Patch 7.4.1472
Problem:    Coverity warning for not using return value.
Solution:   Add &quot;(void)&quot;.
Files:      src/os_unix.c

Patch 7.4.1473
Problem:    Can't build without the <A HREF="autocmd.html#autocommand">autocommand</A> feature.
Solution:   Add #ifdefs. (Yegappan Lakshmanan)
Files:      src/edit.c, src/main.c, src/syntax.c

Patch 7.4.1474
Problem:    Compiler warnings without the float feature.
Solution:   Move #ifdefs. (John Marriott)
Files:      src/eval.c

Patch 7.4.1475
Problem:    When using hangulinput with <A HREF="mbyte.html#utf-8">utf-8</A> a CSI character is
            misinterpreted.
Solution:   Convert CSI to K_CSI. (SungHyun Nam)
Files:      src/ui.c

Patch 7.4.1476
Problem:    Function arguments marked <A HREF="motion.html#as">as</A> unused while they are not.
Solution:   Remove UNUSED. (Yegappan Lakshmanan)
Files:      src/diff.c, src/eval.c, src/ex_cmds2.c, src/ex_docmd.c,
            src/window.c

Patch 7.4.1477
Problem:    Test_reltime is flaky, <A HREF="motion.html#it">it</A> depends on timing.
Solution:   When <A HREF="motion.html#it">it</A> fails run <A HREF="motion.html#it">it</A> a second time.
Files:      src/testdir/runtest.vim

Patch 7.4.1478
Problem:    &quot;:loadplugin&quot; doesn't take care of <A HREF="filetype.html#ftdetect">ftdetect</A> files.
Solution:   Also load <A HREF="filetype.html#ftdetect">ftdetect</A> scripts when appropriate.
Files:      src/ex_cmds2.c

Patch 7.4.1479
Problem:    No testfor &quot;:loadplugin&quot;.
Solution:   Add a test.  Fix how option is being set.
Files:      src/ex_cmds2.c, src/testdir/test_loadplugin.vim,
            src/testdir/Make_all.mak

Patch 7.4.1480
Problem:    Cannot add a pack directory without loading a <A HREF="usr_05.html#plugin">plugin</A>.
Solution:   Add the <A HREF="repeat.html#:packadd">:packadd</A> command.
Files:      src/ex_cmds.h, src/ex_cmds2.c, src/proto/ex_cmds2.pro,
            src/testdir/test_loadplugin.vim, runtime/doc/repeat.txt

Patch 7.4.1481
Problem:    Can't build with small features.
Solution:   Add #ifdef.
Files:      src/ex_cmds2.c

Patch 7.4.1482
Problem:    &quot;timeout&quot; option not supported on ch_eval*().
Solution:   Get and use the timeout option from the argument.
Files:      src/eval.c, src/testdir/test_channel.vim

Patch 7.4.1483
Problem:    A one-time callback is not used for a raw <A HREF="channel.html#channel">channel</A>.
Solution:   Use a one-time callback when <A HREF="motion.html#it">it</A> exists.
Files:      src/channel.c, src/testdir/test_channel.vim,
            src/testdir/test_channel.py

Patch 7.4.1484
Problem:    <A HREF="eval.html#Channel">Channel</A> &quot;err-io&quot; value &quot;out&quot; is not supported.
Solution:   Connect stderr to stdout if wanted.
Files:      src/os_unix.c, src/os_win32.c, src/testdir/test_channel.vim,
            src/testdir/test_channel_pipe.py

Patch 7.4.1485
Problem:    <A HREF="eval.html#Job">Job</A> input from buffer is not implemented.
Solution:   Implement <A HREF="motion.html#it">it</A>.  Add &quot;in-top&quot; and &quot;in-bot&quot; <A HREF="options.html#options">options</A>.
Files:      src/structs.h, src/eval.c, src/channel.c, src/proto/channel.pro,
            src/os_unix.c, src/os_win32.c, src/testdir/test_channel.vim

Patch 7.4.1486
Problem:    &quot;:loadplugin&quot; is not optimal, some people find <A HREF="motion.html#it">it</A> confusing.
Solution:   Only use &quot;<A HREF="repeat.html#:packadd">:packadd</A>&quot; with an optional &quot;<A HREF="change.html#!">!</A>&quot;.
Files:      src/ex_cmds.h, src/ex_cmds2.c, src/testdir/test_loadplugin.vim,
            src/testdir/test_packadd.vim, src/testdir/Make_all.mak,
            runtime/doc/repeat.txt

Patch 7.4.1487
Problem:    For WIN32 <A HREF="builtin.html#isinf()">isinf()</A> is defined <A HREF="motion.html#as">as</A> a <A HREF="map.html#macro">macro</A>.
Solution:   Define <A HREF="motion.html#it">it</A> <A HREF="motion.html#as">as</A> an inline function. (ZyX)
Files:      src/macros.h

Patch 7.4.1488 (after 7.4.1475)
Problem:    Not using key when result from hangul_string_convert() is NULL.
Solution:   Fall back to not converted <A HREF="eval.html#string">string</A>.
Files:      src/ui.c

Patch 7.4.1489 (after 7.4.1487)
Problem:    &quot;inline&quot; is not supported by old MSVC.
Solution:   use &quot;__inline&quot;. (Ken Takata)
Files:      src/macros.h

Patch 7.4.1490
Problem:    Compiler warning for unused function.
Solution:   Add #ifdef. (Dominique Pelle)
Files:      src/gui_gtk_x11.c

Patch 7.4.1491
Problem:    Visual-block <A HREF="intro.html#shift">shift</A> breaks <A HREF="mbyte.html#multibyte">multibyte</A> characters.
Solution:   Compute column differently. (Yasuhiro Matsumoto) Add a test.
Files:      src/ops.c, src/testdir/test_visual.vim, src/testdir/Make_all.mak

Patch 7.4.1492
Problem:    No command line completion for &quot;<A HREF="repeat.html#:packadd">:packadd</A>&quot;.
Solution:   Implement completion. (Hirohito Higashi)
Files:      src/ex_docmd.c, src/ex_getln.c, src/testdir/test_packadd.vim,
            src/vim.h

Patch 7.4.1493
Problem:    Wrong callback invoked for zero-id <A HREF="message.html#messages">messages</A>.
Solution:   Don't use the first one-time callback when the sequence number
            doesn't match.
Files:      src/channel.c, src/testdir/test_channel.vim,
            src/testdir/test_channel.py

Patch 7.4.1494
Problem:    clr_history() does not work properly.
Solution:   Increment hisptr. Add a test. (Yegappan Lakshmanan)
Files:      src/ex_getln.c, src/testdir/test_history.vim,
            src/testdir/Make_all.mak

Patch 7.4.1495
Problem:    Compiler warnings when building on <A HREF="os_unix.html#Unix">Unix</A> with the <A HREF="channel.html#job">job</A> feature but
            without the <A HREF="channel.html#channel">channel</A> feature.
Solution:   Move #ifdefs. (Dominique Pelle)
Files:      src/os_unix.c

Patch 7.4.1496
Problem:    Crash when built with <A HREF="gui.html#GUI">GUI</A> but it's not active. (Dominique Pelle)
Solution:   Check gui.in_use.
Files:      src/channel.c

Patch 7.4.1497
Problem:    Cursor drawing problem with <A HREF="gui_x11.html#GTK">GTK</A> 3.
Solution:   Handle blinking differently. (Kazunobu Kuriyama)
Files:      src/gui_gtk_x11.c

Patch 7.4.1498
Problem:    Error for locked item when using <A HREF="builtin.html#json_decode()">json_decode()</A>. (Shougo Matsu)
Solution:   Initialize v_lock.
Files:      src/json.c

Patch 7.4.1499
Problem:    No error message when <A HREF="repeat.html#:packadd">:packadd</A> does not find anything.
Solution:   Add an error message. (Hirohito Higashi)
Files:      runtime/doc/repeat.txt, src/ex_cmds.h, src/ex_cmds2.c,
            src/globals.h, src/testdir/test_packadd.vim

Patch 7.4.1500
Problem:    Should_free flag set to <A HREF="eval.html#FALSE">FALSE</A>.
Solution:   Set <A HREF="motion.html#it">it</A> to <A HREF="eval.html#TRUE">TRUE</A>. (Neovim 4415)
Files:      src/ex_eval.c

Patch 7.4.1501
Problem:    Garbage collection with an open <A HREF="channel.html#channel">channel</A> is not tested.
Solution:   Call <A HREF="builtin.html#garbagecollect()">garbagecollect()</A> in the test.
Files:      src/testdir/test_channel.vim

Patch 7.4.1502
Problem:    Writing last-but-one line of buffer to a <A HREF="channel.html#channel">channel</A> isn't implemented
            yet.
Solution:   Implement <A HREF="motion.html#it">it</A>.  Fix leaving a swap file behind.
Files:      src/channel.c, src/structs.h, src/memline.c, src/proto/channel.pro

Patch 7.4.1503
Problem:    Crash when using <A HREF="channel.html#ch_getjob()">ch_getjob()</A>. (Damien)
Solution:   Check for a NULL <A HREF="channel.html#job">job</A>.
Files:      src/eval.c, src/testdir/test_channel.vim

Patch 7.4.1504 (after 7.4.1502)
Problem:    No test for reading last-but-one line.
Solution:   Add a test.
Files:      src/testdir/test_channel.vim

Patch 7.4.1505
Problem:    When <A HREF="channel.html#channel">channel</A> log is enabled get too many &quot;looking for messages&quot;
            log entries.
Solution:   Only give the message after another message.
Files:      src/channel.c

Patch 7.4.1506
Problem:    <A HREF="eval.html#Job">Job</A> cannot read from a file.
Solution:   Implement reading from a file for <A HREF="os_unix.html#Unix">Unix</A>.
Files:      src/eval.c, src/os_unix.c, src/os_win32.c,
            src/testdir/test_channel.vim

Patch 7.4.1507
Problem:    Crash when starting a <A HREF="channel.html#job">job</A> fails.
Solution:   Check for the <A HREF="channel.html#channel">channel</A> to be NULL.  (idea by Yasuhiro Matsumoto)
Files:      src/eval.c

Patch 7.4.1508
Problem:    Can't build GvimExt with MingW.
Solution:   Adjust the makefile. (Ben Fritz)
Files:      src/GvimExt/Make_ming.mak

Patch 7.4.1509
Problem:    Keeping both a variable for a <A HREF="channel.html#job">job</A> and the <A HREF="channel.html#channel">channel</A> <A HREF="motion.html#it">it</A> refers to is
            a hassle.
Solution:   Allow passing the <A HREF="channel.html#job">job</A> where a <A HREF="channel.html#channel">channel</A> is expected. (Damien)
Files:      src/eval.c, src/testdir/test_channel.vim

Patch 7.4.1510
Problem:    <A HREF="eval.html#Channel">Channel</A> test fails on AppVeyor.
Solution:   Wait longer than 10 msec if needed.
Files:      src/testdir/test_channel.vim

Patch 7.4.1511
Problem:    Statusline highlighting is sometimes wrong.
Solution:   Check for Highlight type. (Christian Brabandt)
Files:      src/buffer.c

Patch 7.4.1512
Problem:    <A HREF="eval.html#Channel">Channel</A> input from file not supported on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Implement <A HREF="motion.html#it">it</A>. (Yasuhiro Matsumoto)
Files:      src/os_win32.c, src/testdir/test_channel.vim

Patch 7.4.1513
Problem:    &quot;<A HREF="change.html#J">J</A>&quot; fails if there are not enough lines. (Christian Neukirchen)
Solution:   Reduce the <A HREF="intro.html#count">count</A>, only fail on the last line.
Files:      src/normal.c, src/testdir/test_join.vim, src/testdir/test_alot.vim

Patch 7.4.1514
Problem:    <A HREF="eval.html#Channel">Channel</A> output to file not implemented yet.
Solution:   Implement <A HREF="motion.html#it">it</A> for <A HREF="os_unix.html#Unix">Unix</A>.
Files:      src/os_unix.c, src/testdir/test_channel.vim,
            src/testdir/test_channel_pipe.py

Patch 7.4.1515
Problem:    <A HREF="eval.html#Channel">Channel</A> test is a bit flaky.
Solution:   Instead of a fixed sleep time wait until an <A HREF="eval.html#expression">expression</A> evaluates
            to <A HREF="vim9.html#true">true</A>.
Files:      src/testdir/test_channel.vim

Patch 7.4.1516
Problem:    Cannot change file permissions.
Solution:   Add <A HREF="builtin.html#setfperm()">setfperm()</A>.
Files:      src/eval.c, runtime/doc/eval.txt, src/testdir/test_alot.vim,
            src/testdir/test_file_perm.vim

Patch 7.4.1517
Problem:    Compiler warning with 64bit compiler.
Solution:   Add typecast. (Mike Williams)
Files:      src/channel.c

Patch 7.4.1518
Problem:    <A HREF="eval.html#Channel">Channel</A> with disconnected in/out/err is not supported.
Solution:   Implement <A HREF="motion.html#it">it</A> for <A HREF="os_unix.html#Unix">Unix</A>.
Files:      src/eval.c, src/os_unix.c, src/structs.h,
            src/testdir/test_channel.vim, src/testdir/test_channel_pipe.py

Patch 7.4.1519 (after 7.4.1514)
Problem:    <A HREF="eval.html#Channel">Channel</A> output to file not implemented for <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Implement <A HREF="motion.html#it">it</A>. (Yasuhiro Matsumoto)
Files:      src/os_win32.c, src/testdir/test_channel.vim

Patch 7.4.1520
Problem:    <A HREF="eval.html#Channel">Channel</A> test: Waiting for a file to appear doesn't work.
Solution:   In waitFor() ignore <A HREF="message.html#errors">errors</A>.
Files:      src/testdir/test_channel.vim

Patch 7.4.1521 (after 7.4.1516)
Problem:    File permission test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Expect a different permission.
Files:      src/testdir/test_file_perm.vim

Patch 7.4.1522
Problem:    Cannot write <A HREF="channel.html#channel">channel</A> err to a buffer.
Solution:   Implement <A HREF="motion.html#it">it</A>.
Files:      src/channel.c, src/testdir/test_channel.vim

Patch 7.4.1523
Problem:    Writing <A HREF="channel.html#channel">channel</A> to a file fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Disable <A HREF="motion.html#it">it</A> for now.
Files:      src/testdir/test_channel.vim

Patch 7.4.1524
Problem:    <A HREF="eval.html#Channel">Channel</A> test fails on BSD.
Solution:   Break out of the loop when connect() succeeds. (Ozaki Kiichi)
Files:      src/channel.c

Patch 7.4.1525
Problem:    On a high resolution screen the toolbar icons are too small.
Solution:   Add &quot;huge&quot; and &quot;giant&quot; to <A HREF="options.html#'toolbariconsize'">'toolbariconsize'</A>. (Brian Gix)
Files:      src/gui_gtk_x11.c, src/option.h

Patch 7.4.1526
Problem:    Writing to file and not connecting a <A HREF="channel.html#channel">channel</A> doesn't work for
            <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Make <A HREF="motion.html#it">it</A> work. (Yasuhiro Matsumoto)
Files:      src/os_win32.c, src/testdir/test_channel.vim

Patch 7.4.1527
Problem:    <A HREF="eval.html#Channel">Channel</A> test is flaky on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Limit the select() timeout to 50 msec and try with a new socket if
            <A HREF="motion.html#it">it</A> fails.
Files:      src/channel.c

Patch 7.4.1528
Problem:    Using &quot;ever&quot; for <A HREF="repeat.html#packages">packages</A> is confusing.
Solution:   Use &quot;start&quot;, <A HREF="motion.html#as">as</A> it's related to <A HREF="starting.html#startup">startup</A>.
Files:      src/ex_cmds2.c, runtime/doc/repeat.txt

Patch 7.4.1529
Problem:    Specifying buffer number for <A HREF="channel.html#channel">channel</A> not implemented yet.
Solution:   Implement passing a buffer number.
Files:      src/structs.h, src/channel.c, src/eval.c,
            src/testdir/test_channel.vim

Patch 7.4.1530
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> <A HREF="channel.html#job_start()">job_start()</A> closes wrong handle.
Solution:   Close hThread on the process info. (Ken Takata)
Files:      src/os_win32.c

Patch 7.4.1531
Problem:    Compiler warning for uninitialized variable. (Dominique Pelle)
Solution:   Always give the variable a value.
Files:      src/channel.c

Patch 7.4.1532
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> <A HREF="channel.html#channel">channel</A> leaks file descriptor.
Solution:   Use CreateFile with the right <A HREF="options.html#options">options</A>. (Yasuhiro Matsumoto)
Files:      src/os_win32.c

Patch 7.4.1533
Problem:    Using <A HREF="builtin.html#feedkeys()">feedkeys()</A> with an empty <A HREF="eval.html#string">string</A> disregards '<A HREF="change.html#x">x</A>' option.
Solution:   Make '<A HREF="change.html#x">x</A>' work with an empty <A HREF="eval.html#string">string</A>. (Thinca)
Files:      src/eval.c, src/testdir/test_alot.vim,
            src/testdir/test_feedkeys.vim

Patch 7.4.1534
Problem:    Compiler warning for shadowed variable. (Kazunobu Kuriyama)
Solution:   Rename <A HREF="motion.html#it">it</A>.
Files:      src/eval.c

Patch 7.4.1535
Problem:    The feedkeys test has a one second delay.
Solution:   Avoid need_wait_return() to delay. (Hirohito Higashi)
Files:      src/eval.c

Patch 7.4.1536
Problem:    Cannot re-use a <A HREF="channel.html#channel">channel</A> for another <A HREF="channel.html#job">job</A>.
Solution:   Add the &quot;<A HREF="channel.html#channel">channel</A>&quot; option to <A HREF="channel.html#job_start()">job_start()</A>.
Files:      src/channel.c, src/eval.c, src/structs.h, src/os_unix.c,
            src/os_win32.c, src/proto/channel.pro,
            src/testdir/test_channel.vim

Patch 7.4.1537
Problem:    Too many feature flags for pipes, jobs and channels.
Solution:   Only use FEAT_JOB_CHANNEL.
Files:      src/structs.h, src/feature.h, src/configure.in,
            src/auto/configure, src/config.h.in, src/channel.c, src/eval.c,
            src/gui.c, src/main.c, src/memline.c, src/misc2.c, src/os_mswin.c,
            src/os_unix.c, src/os_win32.c, src/ui.c, src/version.c,
            src/macros.h, src/proto.h, src/vim.h, src/Make_cyg_ming.mak,
            src/Make_bc5.mak, src/Make_mvc.mak

Patch 7.4.1538
Problem:    Selection with the mouse does not work in command line mode.
Solution:   Use cairo <A HREF="eval.html#functions">functions</A>. (Kazunobu Kuriyama)
Files:      src/gui_gtk_x11.c

Patch 7.4.1539
Problem:    Too much code in eval.c.
Solution:   Move <A HREF="channel.html#job">job</A> and <A HREF="channel.html#channel">channel</A> code to channel.c.
Files:      src/eval.c, src/channel.c, src/proto/channel.pro,
            src/proto/eval.pro

Patch 7.4.1540
Problem:    <A HREF="eval.html#Channel">Channel</A> test is a bit flaky.
Solution:   Increase expected wait time.
Files:      src/testdir/test_channel.vim

Patch 7.4.1541
Problem:    Missing <A HREF="channel.html#job_info()">job_info()</A>.
Solution:   Implement <A HREF="motion.html#it">it</A>.
Files:      src/eval.c, src/channel.c, src/proto/channel.pro,
            src/testdir/test_channel.vim, runtime/doc/eval.txt

Patch 7.4.1542
Problem:    <A HREF="channel.html#job_start()">job_start()</A> with a <A HREF="eval.html#list">list</A> is not tested.
Solution:   Call <A HREF="channel.html#job_start()">job_start()</A> with a <A HREF="eval.html#list">list</A>.
Files:      src/testdir/test_channel.vim

Patch 7.4.1543
Problem:    <A HREF="eval.html#Channel">Channel</A> log methods are not tested.
Solution:   Log <A HREF="channel.html#job">job</A> activity and check <A HREF="motion.html#it">it</A>.
Files:      src/testdir/test_channel.vim

Patch 7.4.1544
Problem:    On <A HREF="os_win32.html#Win32">Win32</A> escaping the command does not work properly.
Solution:   Reset <A HREF="options.html#'ssl'">'ssl'</A> when escaping the command. (Yasuhiro Matsumoto)
Files:      src/channel.c

Patch 7.4.1545
Problem:    <A HREF="gui_x11.html#GTK3">GTK3</A>: horizontal cursor <A HREF="intro.html#movement">movement</A> in <A HREF="visual.html#Visual">Visual</A> selection not good.
Solution:   Make <A HREF="motion.html#it">it</A> work better. (Kazunobu Kuriyama)
Files:      src/gui_gtk_x11.c

Patch 7.4.1546
Problem:    Sticky type checking is more annoying than useful.
Solution:   Remove the error for <A HREF="change.html#changing">changing</A> a variable type.
Files:      src/eval.c, src/testdir/test_assign.vim,
            src/testdir/test_alot.vim, runtime/doc/eval.txt

Patch 7.4.1547
Problem:    Getting a cterm highlight attribute that is not set results in the
            <A HREF="eval.html#string">string</A> &quot;-1&quot;.
Solution:   Return an empty <A HREF="eval.html#string">string</A>. (Taro Muraoka)
Files:      src/syntax.c, src/testdir/test_alot.vim,
            src/testdir/test_syn_attr.vim

Patch 7.4.1548 (after 7.4.1546)
Problem:    Two tests fail.
Solution:   Adjust the expected error number. Remove check for type.
Files:      src/testdir/test101.ok, src/testdir/test55.in,
            src/testdir/test55.ok

Patch 7.4.1549 (after 7.4.1547)
Problem:    Test for <A HREF="syntax.html#syntax">syntax</A> attributes fails in <A HREF="os_win32.html#Win32">Win32</A> <A HREF="gui.html#GUI">GUI</A>.
Solution:   Use an existing font name.
Files:      src/testdir/test_syn_attr.vim

Patch 7.4.1550
Problem:    Cannot load <A HREF="repeat.html#packages">packages</A> early.
Solution:   Add the &quot;<A HREF="repeat.html#:packloadall">:packloadall</A>&quot; command.
Files:      src/ex_cmds.h, src/ex_cmds2.c, src/main.c,
            src/proto/ex_cmds2.pro, src/testdir/test_packadd.vim

Patch 7.4.1551
Problem:    Cannot generate help <A HREF="tagsrch.html#tags">tags</A> in all doc directories.
Solution:   Make &quot;<A HREF="helphelp.html#:helptags">:helptags</A> ALL&quot; work.
Files:      src/ex_cmds2.c, src/proto/ex_cmds2.pro, src/ex_cmds.c, src/vim.h
            src/testdir/test_packadd.vim

Patch 7.4.1552
Problem:    &quot;<A HREF="syntax.html#:colorscheme">:colorscheme</A>&quot; does not use <A HREF="options.html#'packpath'">'packpath'</A>.
Solution:   Also use in &quot;start&quot; and &quot;opt&quot; directories in <A HREF="options.html#'packpath'">'packpath'</A>.
Files:      src/ex_cmds2.c, src/gui.c, src/hardcopy.c, src/os_mswin.c,
            src/spell.c, src/tag.c, src/if_py_both.h, src/vim.h,
            src/digraph.c, src/eval.c, src/ex_docmd.c, src/main.c,
            src/option.c, src/syntax.c, src/testdir/test_packadd.vim

Patch 7.4.1553
Problem:    &quot;<A HREF="repeat.html#:runtime">:runtime</A>&quot; does not use <A HREF="options.html#'packpath'">'packpath'</A>.
Solution:   Add &quot;what&quot; argument.
Files:      src/ex_cmds2.c, src/vim.h, runtime/doc/repeat.txt,
            src/testdir/test_packadd.vim

Patch 7.4.1554
Problem:    Completion for <A HREF="syntax.html#:colorscheme">:colorscheme</A> does not use <A HREF="options.html#'packpath'">'packpath'</A>.
Solution:   Make <A HREF="motion.html#it">it</A> work, add a test. (Hirohito Higashi)
Files:      src/ex_getln.c, src/testdir/test_packadd.vim

Patch 7.4.1555
Problem:    <A HREF="eval.html#List">List</A> of test targets incomplete.
Solution:   Add newly added tests.
Files:      src/Makefile

Patch 7.4.1556
Problem:    &quot;make install&quot; changes the help <A HREF="tagsrch.html#tags">tags</A> file, causing <A HREF="motion.html#it">it</A> to differ
            from the repository.
Solution:   Move <A HREF="motion.html#it">it</A> aside and restore <A HREF="motion.html#it">it</A>.
Files:      src/Makefile

Patch 7.4.1557
Problem:    Windows cannot be identified.
Solution:   Add a unique <A HREF="windows.html#window">window</A> number to each <A HREF="windows.html#window">window</A> and <A HREF="eval.html#functions">functions</A> to use <A HREF="motion.html#it">it</A>.
Files:      src/structs.h, src/window.c, src/eval.c, src/proto/eval.pro,
            src/proto/window.pro, src/testdir/test_window_id.vim,
            src/testdir/Make_all.mak, runtime/doc/eval.txt

Patch 7.4.1558
Problem:    It is not <A HREF="starting.html#easy">easy</A> to find out what <A HREF="windows.html#windows">windows</A> display a buffer.
Solution:   Add <A HREF="builtin.html#win_findbuf()">win_findbuf()</A>.
Files:      src/eval.c, src/window.c, src/proto/window.pro,
            src/testdir/test_window_id.vim, runtime/doc/eval.txt

Patch 7.4.1559
Problem:    Passing cookie to a callback is clumsy.
Solution:   Change <A HREF="builtin.html#function()">function()</A> to take arguments and return a <A HREF="builtin.html#partial">partial</A>.
Files:      src/structs.h, src/channel.c, src/eval.c, src/if_python.c,
            src/if_python3.c, src/if_py_both.h, src/json.c,
            src/proto/eval.pro, src/testdir/test_partial.vim,
            src/testdir/test_alot.vim, runtime/doc/eval.txt

Patch 7.4.1560
Problem:    <A HREF="eval.html#Dict">Dict</A> <A HREF="options.html#options">options</A> with a dash are more difficult to use.
Solution:   Use an underscore, so that dict.err_io can be used.
Files:      src/channel.c, src/structs.h, src/testdir/test_channel.vim,
            runtime/doc/channel.txt

Patch 7.4.1561 (after 7.4.1559)
Problem:    Missing update to proto file.
Solution:   Change the proto file.
Files:      src/proto/channel.pro

Patch 7.4.1562
Problem:    &quot;<A HREF="helphelp.html#:helptags">:helptags</A> ALL&quot; crashes. (Lcd)
Solution:   Don't free <A HREF="if_cscop.html#twice">twice</A>.
Files:      src/ex_cmds.c

Patch 7.4.1563
Problem:    <A HREF="eval.html#Partial">Partial</A> test fails on <A HREF="windows.html#windows">windows</A>.
Solution:   Return 1 or -1 from compare function.
Files:      src/testdir/test_partial.vim

Patch 7.4.1564
Problem:    An empty <A HREF="eval.html#list">list</A> in <A HREF="builtin.html#function()">function()</A> causes an error.
Solution:   Handle an empty <A HREF="eval.html#list">list</A> like there is no <A HREF="eval.html#list">list</A> of arguments.
Files:      src/eval.c, src/testdir/test_partial.vim

Patch 7.4.1565
Problem:    Crash when <A HREF="testing.html#assert_equal()">assert_equal()</A> runs into a NULL <A HREF="eval.html#string">string</A>.
Solution:   Check for NULL. (Dominique) Add a test.
Files:      src/eval.c, src/testdir/test_assert.vim

Patch 7.4.1566
Problem:    Compiler warning for shadowed variable. (Kazunobu Kuriyama)
Solution:   Remove the inner one.
Files:      src/eval.c

Patch 7.4.1567
Problem:    Crash in <A HREF="testing.html#assert_fails()">assert_fails()</A>.
Solution:   Check for NULL. (Dominique Pelle)  Add a test.
Files:      src/eval.c, src/testdir/test_assert.vim

Patch 7.4.1568
Problem:    Using <A HREF="tagsrch.html#CTRL-]">CTRL-]</A> in help on option in parentheses doesn't work.
Solution:   Skip the &quot;<A HREF="motion.html#(">(</A>&quot; in &quot;(&#39;&#34;'. (Hirohito Higashi)
Files:      src/ex_cmds.c

Patch 7.4.1569
Problem:    Using old style tests for <A HREF="quickfix.html#quickfix">quickfix</A>.
Solution:   Change them to new style tests. (Yegappan Lakshmanan)
Files:      src/testdir/Make_all.mak, src/testdir/test106.in,
            src/testdir/test106.ok, src/testdir/test_qf_title.in,
            src/testdir/test_qf_title.ok, src/testdir/test_quickfix.vim

Patch 7.4.1570
Problem:    There is no way to avoid the message when editing a file.
Solution:   Add the &quot;<A HREF="motion.html#F">F</A>&quot; flag to <A HREF="options.html#'shortmess'">'shortmess'</A>. (Shougo Matsu, closes #686)
Files:      runtime/doc/options.txt, src/buffer.c, src/ex_cmds.c,
            src/option.h

Patch 7.4.1571
Problem:    No test for &quot;<A HREF="helphelp.html#:help">:help</A>&quot;.
Solution:   Add a test for what 7.4.1568 fixed. (Hirohito Higashi)
Files:      src/testdir/test_alot.vim, src/testdir/test_help_tagjump.vim

Patch 7.4.1572
Problem:    Setting <A HREF="options.html#'compatible'">'compatible'</A> in test influences following tests.
Solution:   Turn <A HREF="options.html#'compatible'">'compatible'</A> off again.
Files:      src/testdir/test_backspace_opt.vim

Patch 7.4.1573
Problem:    Tests get stuck at the more prompt.
Solution:   Move the backspace test out of test_alot.
Files:      src/testdir/test_alot.vim, src/testdir/Make_all.mak

Patch 7.4.1574
Problem:    &quot;<A HREF="undo.html#:undo">:undo</A> 0&quot; does not work. (Florent Fayolle)
Solution:   Make <A HREF="motion.html#it">it</A> <A HREF="undo.html#undo">undo</A> all the way. (closes #688)
Files:      src/undo.c, src/testdir/test_undolevels.vim,
            src/testdir/test_ex_undo.vim, src/testdir/test_alot.vim

Patch 7.4.1575
Problem:    Using wrong size for struct.
Solution:   Use the size for wide API. (Ken Takata)
Files:      src/gui_w32.c

Patch 7.4.1576
Problem:    Write error of <A HREF="starting.html#viminfo">viminfo</A> file is not handled properly. (Christian
            Neukirchen)
Solution:   Check the return value of fclose(). (closes #682)
Files:      src/ex_cmds.c

Patch 7.4.1577
Problem:    Cannot pass &quot;dict.Myfunc&quot; around <A HREF="motion.html#as">as</A> a <A HREF="builtin.html#partial">partial</A>.
Solution:   Create a <A HREF="builtin.html#partial">partial</A> when expected.
Files:      src/eval.c, src/testdir/test_partial.vim

Patch 7.4.1578
Problem:    There is no way to invoke a function later or periodically.
Solution:   Add <A HREF="builtin.html#timer">timer</A> support.
Files:      src/eval.c, src/ex_cmds2.c, src/screen.c, src/ex_docmd.c,
            src/feature.h, src/gui.c, src/proto/eval.pro,
            src/proto/ex_cmds2.pro, src/proto/screen.pro, src/structs.h,
            src/version.c, src/testdir/test_alot.vim,
            src/testdir/test_timers.vim, runtime/doc/eval.txt

Patch 7.4.1579 (after 7.4.1578)
Problem:    Missing changes in channel.c
Solution:   Include the changes.
Files:      src/channel.c

Patch 7.4.1580
Problem:    Crash when using function reference. (Luchr)
Solution:   Set initial refcount. (Ken Takata, closes #690)
Files:      src/eval.c, src/testdir/test_partial.vim

Patch 7.4.1581
Problem:    Using &quot;<A HREF="eval.html#:call">:call</A> dict.func()&quot; where the function is a <A HREF="builtin.html#partial">partial</A> does
            not work.  Using &quot;dict.func()&quot; where the function does not take a
            <A HREF="eval.html#Dictionary">Dictionary</A> does not work.
Solution:   Handle <A HREF="builtin.html#partial">partial</A> properly in &quot;<A HREF="eval.html#:call">:call</A>&quot;. (Yasuhiro Matsumoto)
Files:      src/eval.c, src/testdir/test_partial.vim, src/testdir/test55.ok

Patch 7.4.1582
Problem:    Get <A HREF="builtin.html#E923">E923</A> when using function(dict.func, <A HREF="motion.html#[]">[]</A>, <A HREF="eval.html#dict">dict</A>). (Kent Sibilev)
            Storing a function with a <A HREF="eval.html#dict">dict</A> in a variable drops the <A HREF="eval.html#dict">dict</A> if the
            function is <A HREF="map.html#script-local">script-local</A>.
Solution:   Translate the function name.  Use <A HREF="eval.html#dict">dict</A> arg if present.
Files:      src/eval.c, src/testdir/test_partial.vim

Patch 7.4.1583
Problem:    Warning for uninitialized variable.
Solution:   Initialize <A HREF="motion.html#it">it</A>. (Dominique)
Files:      src/ex_cmds2.c

Patch 7.4.1584
Problem:    Timers don't work for <A HREF="os_win32.html#Win32">Win32</A> console.
Solution:   Add check_due_timer() in WaitForChar().
Files:      src/os_win32.c

Patch 7.4.1585
Problem:    <A HREF="eval.html#Partial">Partial</A> is not recognized everywhere.
Solution:   Check for <A HREF="builtin.html#partial">partial</A> in trans_function_name(). (Yasuhiro Matsumoto)
            Add a test.
Files:      src/eval.c, src/testdir/test_partial.vim

Patch 7.4.1586
Problem:    Nesting partials doesn't work.
Solution:   Append arguments. (Ken Takata)
Files:      src/eval.c, src/testdir/test_partial.vim

Patch 7.4.1587
Problem:    Compiler warnings with 64 bit compiler.
Solution:   Add type casts. (Mike Williams)
Files:      src/ex_cmds2.c

Patch 7.4.1588
Problem:    Old style test for <A HREF="quickfix.html#quickfix">quickfix</A>.
Solution:   Turn test 96 into a new style test.
Files:      src/testdir/Make_all.mak, src/testdir/test96.in,
            src/testdir/test96.ok, src/testdir/test_quickfix.vim

Patch 7.4.1589
Problem:    Combining <A HREF="eval.html#dict">dict</A> and args with <A HREF="builtin.html#partial">partial</A> doesn't always work.
Solution:   Use the arguments from the <A HREF="builtin.html#partial">partial</A>.
Files:      src/eval.c, src/testdir/test_partial.vim

Patch 7.4.1590
Problem:    Warning for shadowed variable. (Christian Brabandt)
Solution:   Move the variable into a local block.
Files:      src/eval.c

Patch 7.4.1591
Problem:    The <A HREF="quickfix.html#quickfix">quickfix</A> title is truncated.
Solution:   Save the command before <A HREF="motion.html#it">it</A> is truncated. (Anton Lindqvist)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 7.4.1592
Problem:    <A HREF="quickfix.html#Quickfix">Quickfix</A> code using memory after being freed. (Dominique Pelle)
Solution:   Detect that the <A HREF="windows.html#window">window</A> was closed. (Hirohito Higashi)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 7.4.1593
Problem:    Using <A HREF="channel.html#channel">channel</A> timeout instead of request timeout. (Coverity)
Solution:   Remove the extra assignment.
Files:      src/channel.c

Patch 7.4.1594
Problem:    Timers don't work on <A HREF="os_unix.html#Unix">Unix</A>.
Solution:   Add missing code.
Files:      src/os_unix.c

Patch 7.4.1595
Problem:    Not checking for failed open(). (Coverity)
Solution:   Check file descriptor not being negative.
Files:      src/os_unix.c

Patch 7.4.1596
Problem:    Memory leak. (Coverity)
Solution:   Free the <A HREF="pattern.html#pattern">pattern</A>.
Files:      src/ex_cmds2.c

Patch 7.4.1597
Problem:    Memory leak when out of memory. (Coverity)
Solution:   Free the name.
Files:      src/eval.c

Patch 7.4.1598
Problem:    When starting the <A HREF="gui.html#GUI">GUI</A> fails a swap file is left behind. (Joerg
            Plate)
Solution:   Preserve files before <A HREF="starting.html#exiting">exiting</A>. (closes #692)
Files:      src/main.c, src/gui.c

Patch 7.4.1599
Problem:    No link to Coverity.
Solution:   Add Coverity badge in README.
Files:      README.md

Patch 7.4.1600
Problem:    libs directory is not useful.
Solution:   Remove arp.library, <A HREF="motion.html#it">it</A> was only for very old <A HREF="os_amiga.html#Amiga">Amiga</A> versions.
Files:      libs/arp.library, Filelist

Patch 7.4.1601
Problem:    README files take a lot of space in the top directory.
Solution:   Move most of them to &quot;READMEdir&quot;.
Files:      Filelist, Makefile, README.txt.info, README_ami.txt,
            README_ami.txt.info, README_amibin.txt, README_amibin.txt.info,
            README_amisrc.txt, README_amisrc.txt.info, README_bindos.txt,
            README_dos.txt, README_extra.txt, README_mac.txt, README_ole.txt,
            README_os2.txt, README_os390.txt, README_src.txt,
            README_srcdos.txt, README_unix.txt, README_vms.txt,
            README_w32s.txt, READMEdir/README.txt.info,
            READMEdir/README_ami.txt, READMEdir/README_ami.txt.info,
            READMEdir/README_amibin.txt, READMEdir/README_amibin.txt.info,
            READMEdir/README_amisrc.txt, READMEdir/README_amisrc.txt.info,
            READMEdir/README_bindos.txt, READMEdir/README_dos.txt,
            READMEdir/README_extra.txt, READMEdir/README_mac.txt,
            READMEdir/README_ole.txt, READMEdir/README_os2.txt,
            READMEdir/README_os390.txt, READMEdir/README_src.txt,
            READMEdir/README_srcdos.txt, READMEdir/README_unix.txt,
            READMEdir/README_vms.txt, READMEdir/README_w32s.txt,

Patch 7.4.1602
Problem:    Info files take space in the top directory.
Solution:   Move them to &quot;READMEdir&quot;.
Files:      Filelist, src.info, Contents.info, runtime.info, vimdir.info,
            Vim.info, Xxd.info, READMEdir/src.info, READMEdir/Contents.info,
            READMEdir/runtime.info, READMEdir/vimdir.info, READMEdir/Vim.info,
            READMEdir/Xxd.info

Patch 7.4.1603
Problem:    Timer with an &quot;<A HREF="eval.html#:echo">:echo</A>&quot; command messes up display.
Solution:   Redraw depending on the mode. (Hirohito Higashi)  Avoid the more
            prompt being used recursively.
Files:      src/screen.c, src/message.c

Patch 7.4.1604
Problem:    Although emoji characters are ambiguous width, best is to treat
            them <A HREF="motion.html#as">as</A> full width.
Solution:   Update the <A HREF="mbyte.html#Unicode">Unicode</A> character tables. Add the <A HREF="options.html#'emoji'">'emoji'</A> <A HREF="options.html#options">options</A>.
            (Yasuhiro Matsumoto)
Files:      runtime/doc/options.txt, runtime/optwin.vim,
            runtime/tools/unicode.vim, src/mbyte.c, src/option.c, src/option.h

Patch 7.4.1605
Problem:    Catching exception that won't be thrown.
Solution:   Remove try/catch.
Files:      src/testdir/test55.in

Patch 7.4.1606
Problem:    Having <A HREF="builtin.html#type()">type()</A> handle a <A HREF="eval.html#Funcref">Funcref</A> that is or isn't a <A HREF="builtin.html#partial">partial</A>
            differently causes problems for existing scripts.
Solution:   Make <A HREF="builtin.html#type()">type()</A> return the same value. (Thinca)
Files:      src/eval.c, src/testdir/test_viml.vim

Patch 7.4.1607
Problem:    Comparing a function that exists on two dicts is not backwards
            compatible. (Thinca)
Solution:   Only compare the function, not what the <A HREF="builtin.html#partial">partial</A> adds.
Files:      src/eval.c, src/testdir/test_alot.vim, src/testdir/test_expr.vim

Patch 7.4.1608
Problem:    <A HREF="builtin.html#string()">string()</A> doesn't handle a <A HREF="builtin.html#partial">partial</A>.
Solution:   Make a <A HREF="eval.html#string">string</A> from a <A HREF="builtin.html#partial">partial</A>.
Files:      src/eval.c, src/testdir/test_partial.vim

Patch 7.4.1609
Problem:    <A HREF="quickref.html#Contents">Contents</A> file is only for <A HREF="os_amiga.html#Amiga">Amiga</A> distro.
Solution:   Move <A HREF="motion.html#it">it</A> to &quot;READMEdir&quot;.  Update some info.
Files:      Filelist, <A HREF="quickref.html#Contents">Contents</A>, READMEdir/Contents

Patch 7.4.1610
Problem:    Compiler warnings for non-virtual destructor.
Solution:   <A HREF="motion.html#Mark">Mark</A> the classes final. (Ken Takata)
Files:      src/Make_cyg_ming.mak, src/gui_dwrite.cpp, src/if_ole.cpp

Patch 7.4.1611
Problem:    The versplit feature makes the code unnecessary complicated.
Solution:   Remove FEAT_VERTSPLIT, always support vertical splits when
            FEAT_WINDOWS is defined.
Files:      src/buffer.c, src/charset.c, src/eval.c, src/ex_cmds.c,
            src/ex_docmd.c, src/ex_getln.c, src/gui.c, src/if_lua.c,
            src/if_mzsch.c, src/if_ruby.c, src/main.c, src/misc1.c,
            src/misc2.c, src/move.c, src/normal.c, src/option.c,
            src/quickfix.c, src/screen.c, src/syntax.c, src/term.c, src/ui.c,
            src/window.c, src/globals.h, src/gui.h, src/if_py_both.h,
            src/option.h, src/structs.h, src/term.h
            src/feature.h, src/vim.h, src/version.c

Patch 7.4.1612 (after 7.4.1611)
Problem:    Can't build with small features.
Solution:   Move code and #ifdefs.
Files:      src/ex_getln.c

Patch 7.4.1613 (after 7.4.1612)
Problem:    Still can't build with small features.
Solution:   Adjust #ifdefs.
Files:      src/ex_getln.c

Patch 7.4.1614
Problem:    Still <A HREF="quickfix.html#quickfix">quickfix</A> test in old style.
Solution:   Turn test 10 into a new style test.
Files:      src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/main.aap, src/testdir/test10.in,
            src/testdir/test10.ok, src/testdir/test_quickfix.vim,
            src/testdir/test10a.in, src/testdir/test10a.ok

Patch 7.4.1615
Problem:    Build fails with tiny features.
Solution:   Adjust #ifdefs.
Files:      src/normal.c, src/window.c

Patch 7.4.1616
Problem:    Malformed <A HREF="channel.html#channel">channel</A> request causes a hang.
Solution:   Drop malformed message. (Damien)
Files:      src/channel.c, src/testdir/test_channel.vim,
            src/testdir/test_channel.py

Patch 7.4.1617
Problem:    When a JSON message is split <A HREF="motion.html#it">it</A> isn't decoded.
Solution:   Wait a short time for the rest of the message to arrive.
Files:      src/channel.c, src/json.c, src/structs.h,
            src/testdir/test_channel.vim, src/testdir/test_channel.py

Patch 7.4.1618
Problem:    Starting <A HREF="channel.html#job">job</A> with output to buffer changes <A HREF="options.html#options">options</A> in the current
            buffer.
Solution:   Set &quot;curbuf&quot; earlier. (Yasuhiro Matsumoto)
Files:      src/channel.c

Patch 7.4.1619
Problem:    When <A HREF="options.html#'fileformats'">'fileformats'</A> is set in the <A HREF="starting.html#vimrc">vimrc</A> <A HREF="motion.html#it">it</A> applies to new <A HREF="windows.html#buffers">buffers</A>
            but not the initial buffer.
Solution:   Set <A HREF="options.html#'fileformat'">'fileformat'</A> when starting up. (Mike Williams)
Files:      src/option.c

Patch 7.4.1620
Problem:    Emoji characters are not considered <A HREF="motion.html#as">as</A> a kind of <A HREF="motion.html#word">word</A> character.
Solution:   Give emoji characters a <A HREF="motion.html#word">word</A> class number. (Yasuhiro Matsumoto)
Files:      src/mbyte.c

Patch 7.4.1621
Problem:    <A HREF="eval.html#Channel">Channel</A> test doesn't work with <A HREF="if_pyth.html#Python">Python</A> 2.6.
Solution:   Add number in <A HREF="change.html#formatting">formatting</A> placeholder. (Wiredool)
Files:      src/testdir/test_channel.py

Patch 7.4.1622
Problem:    <A HREF="eval.html#Channel">Channel</A> demo doesn't work with <A HREF="if_pyth.html#Python">Python</A> 2.6.
Solution:   Add number in <A HREF="change.html#formatting">formatting</A> placeholder
Files:      runtime/tools/demoserver.py

Patch 7.4.1623
Problem:    All <A HREF="eval.html#Channels">Channels</A> share the message ID, <A HREF="motion.html#it">it</A> keeps getting bigger.
Solution:   Use a message ID per <A HREF="channel.html#channel">channel</A>.
Files:      src/channel.c, src/proto/channel.pro, src/structs.h

Patch 7.4.1624
Problem:    Can't get info about a <A HREF="channel.html#channel">channel</A>.
Solution:   Add <A HREF="channel.html#ch_info()">ch_info()</A>.
Files:      src/eval.c, src/channel.c, src/proto/channel.pro,
            src/testdir/test_channel.vim, runtime/doc/eval.txt

Patch 7.4.1625
Problem:    Trying to close file descriptor that isn't open.
Solution:   Check for negative number.
Files:      src/os_unix.c

Patch 7.4.1626 (after 7.4.1624)
Problem:    Missing changes to structs.
Solution:   Include the changes.
Files:      src/structs.h

Patch 7.4.1627
Problem:    <A HREF="eval.html#Channel">Channel</A> <A HREF="channel.html#out_cb">out_cb</A> and <A HREF="channel.html#err_cb">err_cb</A> are not tested.
Solution:   Add a test.
Files:      src/testdir/test_channel.vim

Patch 7.4.1628
Problem:    64-bit Compiler warning.
Solution:   Change type of variable. (Mike Williams)
Files:      src/channel.c

Patch 7.4.1629
Problem:    Handling emoji characters <A HREF="motion.html#as">as</A> full width has problems with
            backwards compatibility.
Solution:   Remove ambiguous and double width characters from the emoji table.
            Use a separate table for the character class.
            (partly by Yasuhiro Matsumoto)
Files:      runtime/tools/unicode.vim, src/mbyte.c

Patch 7.4.1630
Problem:    <A HREF="mbyte.html#Unicode">Unicode</A> table for double width is outdated.
Solution:   Update to the latest <A HREF="mbyte.html#Unicode">Unicode</A> standard.
Files:      src/mbyte.c

Patch 7.4.1631
Problem:    Compiler doesn't understand switch on all enum values. (Tony
            Mechelynck)
Solution:   Initialize variable.
Files:      src/channel.c

Patch 7.4.1632
Problem:    <A HREF="eval.html#List">List</A> of test targets is outdated.
Solution:   Update to current <A HREF="eval.html#list">list</A> of test targets.
Files:      src/Makefile

Patch 7.4.1633
Problem:    If the help <A HREF="tagsrch.html#tags">tags</A> file was removed &quot;make install&quot; fails. (Tony
            Mechelynck)
Solution:   Only try moving the file if <A HREF="motion.html#it">it</A> exists.
Files:      src/Makefile

Patch 7.4.1634
Problem:    Vertical <A HREF="intro.html#movement">movement</A> after <A HREF="change.html#CTRL-A">CTRL-A</A> ends up in the wrong column.
            (Urtica Dioica)
Solution:   Set curswant when appropriate. (Hirohito Higashi)
Files:      src/ops.c, src/testdir/test_increment.vim

Patch 7.4.1635
Problem:    <A HREF="eval.html#Channel">Channel</A> test is a bit flaky.
Solution:   Remove 'DETACH' if it's there.
Files:      src/testdir/test_channel.vim

Patch 7.4.1636
Problem:    When '<A HREF="motion.html#F">F</A>' is in <A HREF="options.html#'shortmess'">'shortmess'</A> the prompt for the <A HREF="editing.html#encryption">encryption</A> key isn't
            displayed. (Toothpik)
Solution:   Reset msg_silent.
Files:      src/ex_getln.c

Patch 7.4.1637
Problem:    Can't build with older MinGW compiler.
Solution:   Change option from c++11 to gnu++11. (Ken Takata)
Files:      src/Make_cyg_ming.mak

Patch 7.4.1638
Problem:    When binding a function to a <A HREF="eval.html#dict">dict</A> the reference <A HREF="intro.html#count">count</A> is wrong.
Solution:   Decrement <A HREF="eval.html#dict">dict</A> reference <A HREF="intro.html#count">count</A>, only reference the function when
            actually making a copy. (Ken Takata)
Files:      src/eval.c, src/testdir/test_partial.vim

Patch 7.4.1639
Problem:    Invoking garbage collection may cause a double free.
Solution:   Don't free the <A HREF="eval.html#dict">dict</A> in a <A HREF="builtin.html#partial">partial</A> when recursive is <A HREF="eval.html#FALSE">FALSE</A>.
Files:      src/eval.c

Patch 7.4.1640
Problem:    Crash when an <A HREF="autocmd.html#autocommand">autocommand</A> changes a <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A>. (Dominique)
Solution:   Check whether an entry is still valid. (Yegappan Lakshmanan,
            Hirohito Higashi)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 7.4.1641
Problem:    Using unterminated <A HREF="eval.html#string">string</A>.
Solution:   Add NUL before calling vim_strsave_shellescape(). (James McCoy)
Files:      src/eval.c, src/testdir/test105.in, src/testdir/test105.ok

Patch 7.4.1642
Problem:    Handling emoji characters <A HREF="motion.html#as">as</A> full width has problems with
            backwards compatibility.
Solution:   Only put characters in the 1f000 range in the emoji table.
Files:      runtime/tools/unicode.vim, src/mbyte.c

Patch 7.4.1643 (after 7.4.1641)
Problem:    Terminating file name has side effects.
Solution:   Restore the character. (mostly by James McCoy, closes #713)
Files:      src/eval.c, src/testdir/test105.in, src/testdir/test105.ok

Patch 7.4.1644
Problem:    Using <A HREF="builtin.html#string()">string()</A> on a <A HREF="builtin.html#partial">partial</A> that exists in the dictionary <A HREF="motion.html#it">it</A> binds
            results in an error. (Nikolai Pavlov)
Solution:   Make <A HREF="builtin.html#string()">string()</A> not fail on a recursively nested structure. (Ken
            Takata)
Files:      src/eval.c, src/testdir/test_partial.vim

Patch 7.4.1645
Problem:    When a <A HREF="eval.html#dict">dict</A> contains a <A HREF="builtin.html#partial">partial</A> <A HREF="motion.html#it">it</A> can't be redefined <A HREF="motion.html#as">as</A> a
            function. (Nikolai Pavlov)
Solution:   Remove the <A HREF="builtin.html#partial">partial</A> when overwriting with a function.
Files:      src/eval.c, src/testdir/test_partial.vim

Patch 7.4.1646
Problem:    Using <A HREF="if_pyth.html#Python">Python</A> vim.bindeval() on a <A HREF="builtin.html#partial">partial</A> doesn't work. (Nikolai
            Pavlov)
Solution:   Add VAR_PARTIAL support in <A HREF="if_pyth.html#Python">Python</A>.
Files:      src/if_py_both.h, src/testdir/test_partial.vim

Patch 7.4.1647
Problem:    Using freed memory after <A HREF="builtin.html#setqflist()">setqflist()</A> and &quot;<A HREF="quickfix.html#:caddbuffer">:caddbuffer</A>&quot;.  (Dominique)
Solution:   Set qf_ptr when adding the first item to the <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A>.
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 7.4.1648
Problem:    Compiler has a problem <A HREF="uganda.html#copying">copying</A> a <A HREF="eval.html#string">string</A> into di_key[]. (Yegappan
            Lakshmanan)
Solution:   Add dictitem16_T.
Files:      src/structs.h, src/eval.c

Patch 7.4.1649
Problem:    The matchit <A HREF="usr_05.html#plugin">plugin</A> needs to be copied to be used.
Solution:   Put the matchit <A HREF="usr_05.html#plugin">plugin</A> in an optional package.
Files:      Filelist, runtime/macros/matchit.vim, runtime/macros/matchit.txt,
            runtime/macros/README.txt, src/Makefile,
            runtime/pack/dist/opt/matchit/plugin/matchit.vim,
            runtime/pack/dist/opt/matchit/doc/matchit.txt,
            runtime/pack/dist/opt/matchit/doc/tags,
            runtime/doc/usr_05.txt, runtime/doc/usr_toc.txt

Patch 7.4.1650
Problem:    <A HREF="quickfix.html#Quickfix">Quickfix</A> test fails.
Solution:   Accept any number of matches.
Files:      src/testdir/test_quickfix.vim

Patch 7.4.1651
Problem:    Some dead (MSDOS) code remains.
Solution:   Remove the unused lines. (Ken Takata)
Files:      src/misc1.c

Patch 7.4.1652
Problem:    Old style test for <A HREF="builtin.html#fnamemodify()">fnamemodify()</A>.
Solution:   Turn <A HREF="motion.html#it">it</A> into a new style test.
Files:      src/testdir/test105.in, src/testdir/test105.ok,
            src/testdir/test_fnamemodify.vim, src/testdir/test_alot.vim,
            src/testdir/Make_all.mak

Patch 7.4.1653 (after 7.4.1649)
Problem:    Users who loaded matchit.vim manually have to change their
            <A HREF="starting.html#startup">startup</A>. (Gary Johnson)
Solution:   Add a file in the old location that loads the package.
Files:      runtime/macros/matchit.vim, Filelist

Patch 7.4.1654
Problem:    Crash when using expand('&#37;:S') in a buffer without a name.
Solution:   Don't set a NUL. (James McCoy, closes #714)
Files:      src/eval.c, src/testdir/test_fnamemodify.vim

Patch 7.4.1655
Problem:    <A HREF="builtin.html#remote_expr()">remote_expr()</A> hangs. (Ramel)
Solution:   Check for <A HREF="message.html#messages">messages</A> in the waiting loop.
Files:      src/if_xcmdsrv.c

Patch 7.4.1656
Problem:    Crash when using <A HREF="builtin.html#partial">partial</A> with a <A HREF="builtin.html#timer">timer</A>.
Solution:   Increment <A HREF="builtin.html#partial">partial</A> reference <A HREF="intro.html#count">count</A>. (Hirohito Higashi)
Files:      src/eval.c, src/testdir/test_timers.vim

Patch 7.4.1657
Problem:    On <A HREF="os_unix.html#Unix">Unix</A> in a <A HREF="terminal.html#terminal">terminal</A>: <A HREF="channel.html#channel">channel</A> <A HREF="message.html#messages">messages</A> are not handled right away.
            (Jackson Alves de Aquino)
Solution:   Break the loop for <A HREF="builtin.html#timers">timers</A> when something was received.
Files:      src/os_unix.c

Patch 7.4.1658
Problem:    A <A HREF="usr_05.html#plugin">plugin</A> does not know when <A HREF="autocmd.html#VimEnter">VimEnter</A> <A HREF="autocmd.html#autocommands">autocommands</A> were already
            triggered.
Solution:   Add the <A HREF="eval.html#v:vim_did_enter">v:vim_did_enter</A> variable.
Files:      src/eval.c, src/main.c, src/vim.h, src/testdir/test_autocmd.vim,
            src/testdir/test_alot.vim, runtime/doc/autocmd.txt,
            runtime/doc/eval.txt

Patch 7.4.1659 (after 7.4.1657)
Problem:    Compiler warning for argument type. (Manuel Ortega)
Solution:   Remove &quot;<A HREF="change.html#&amp;">&amp;</A>&quot;.
Files:      src/os_unix.c

Patch 7.4.1660
Problem:    has('patch-7.4.1') doesn't work.
Solution:   Fix off-by-one error. (Thinca)
Files:      src/eval.c, src/testdir/test_expr.vim, src/testdir/test60.in,
            src/testdir/test60.ok

Patch 7.4.1661
Problem:    No test for special characters in <A HREF="channel.html#channel">channel</A> <A HREF="eval.html#eval">eval</A> command.
Solution:   Testing sending and receiving text with special characters.
Files:      src/testdir/test_channel.vim, src/testdir/test_channel.py

Patch 7.4.1662
Problem:    No test for an invalid <A HREF="intro.html#Ex">Ex</A> command on a <A HREF="channel.html#channel">channel</A>.
Solution:   Test handling an invalid command gracefully.  Avoid getting an
            error message, <A HREF="diff.html#do">do</A> write <A HREF="motion.html#it">it</A> to the <A HREF="channel.html#channel">channel</A> log.
Files:      src/channel.c, src/testdir/test_channel.vim,
            src/testdir/test_channel.py

Patch 7.4.1663
Problem:    In tests it's often useful to check if a <A HREF="pattern.html#pattern">pattern</A> matches.
Solution:   Add <A HREF="testing.html#assert_match()">assert_match()</A>.
Files:      src/eval.c, src/testdir/test_assert.vim,
            src/testdir/test_channel.vim, runtime/doc/eval.txt

Patch 7.4.1664
Problem:    Crash in <A HREF="quickfix.html#:cgetexpr">:cgetexpr</A>.
Solution:   Check for NULL pointer. (Dominique) Add a test.
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 7.4.1665
Problem:    Crash when calling <A HREF="channel.html#job_start()">job_start()</A> with a NULL <A HREF="eval.html#string">string</A>. (Dominique)
Solution:   Check for an invalid argument.
Files:      src/channel.c, src/testdir/test_channel.vim

Patch 7.4.1666
Problem:    When reading JSON from a <A HREF="channel.html#channel">channel</A> all readahead is used.
Solution:   Use the fill function to reduce overhead.
Files:      src/channel.c, src/json.c, src/structs.h

Patch 7.4.1667
Problem:    <A HREF="os_win32.html#Win32">Win32</A>: waiting on a pipe with fixed sleep time.
Solution:   Start with a short delay and increase <A HREF="motion.html#it">it</A> when looping.
Files:      src/channel.c

Patch 7.4.1668
Problem:    channel_get_all() does multiple allocations.
Solution:   Compute the size and allocate once.
Files:      src/channel.c

Patch 7.4.1669
Problem:    When <A HREF="editing.html#writing">writing</A> buffer lines to a pipe Vim may block.
Solution:   Avoid blocking, write more lines later.
Files:      src/channel.c, src/misc2.c, src/os_unix.c, src/structs.h,
            src/vim.h, src/proto/channel.pro, src/testdir/test_channel.vim

Patch 7.4.1670
Problem:    Completion doesn't work well for a variable containing &quot;<A HREF="pattern.html##">#</A>&quot;.
Solution:   Recognize the &quot;<A HREF="pattern.html##">#</A>&quot;. (Watiko)
Files:      src/eval.c

Patch 7.4.1671
Problem:    When help exists in multiple languages, adding @ab while &quot;<A HREF="motion.html#ab">ab</A>&quot; is
            the default help language is unnecessary.
Solution:   Leave out &quot;@ab&quot; when not needed. (Ken Takata)
Files:      src/ex_getln.c

Patch 7.4.1672
Problem:    The Dvorak support is a bit difficult to <A HREF="usr_90.html#install">install</A>.
Solution:   Turn <A HREF="motion.html#it">it</A> into an optional package.
Files:      runtime/macros/dvorak, runtime/macros/README.txt,
            runtime/pack/dist/opt/dvorak/plugin/dvorak.vim,
            runtime/pack/dist/opt/dvorak/dvorak/enable.vim,
            runtime/pack/dist/opt/dvorak/dvorak/disable.vim

Patch 7.4.1673
Problem:    The justify <A HREF="usr_05.html#plugin">plugin</A> has to be copied or sourced to be used.
Solution:   Turn <A HREF="motion.html#it">it</A> into a package.
Files:      runtime/macros/justify.vim, runtime/macros/README.txt,
            runtime/pack/dist/opt/justify/plugin/justify.vim, Filelist

Patch 7.4.1674
Problem:    The editexisting <A HREF="usr_05.html#plugin">plugin</A> has to be copied or sourced to be used.
Solution:   Turn <A HREF="motion.html#it">it</A> into a package.
Files:      runtime/macros/editexisting.vim, runtime/macros/README.txt,
            runtime/pack/dist/opt/editexisting/plugin/editexisting.vim,
            Filelist

Patch 7.4.1675
Problem:    The swapmous <A HREF="usr_05.html#plugin">plugin</A> has to be copied or sourced to be used.
Solution:   Turn <A HREF="motion.html#it">it</A> into the swapmouse package.
Files:      runtime/macros/swapmous.vim, runtime/macros/README.txt,
            runtime/pack/dist/opt/swapmouse/plugin/swapmouse.vim, Filelist

Patch 7.4.1676
Problem:    The shellmenu <A HREF="usr_05.html#plugin">plugin</A> has to be copied or sourced to be used.
Solution:   Turn <A HREF="motion.html#it">it</A> into a package.
Files:      runtime/macros/shellmenu.vim, runtime/macros/README.txt,
            runtime/pack/dist/opt/shellmenu/plugin/shellmenu.vim, Filelist

Patch 7.4.1677
Problem:    A reference to the removed file_select <A HREF="usr_05.html#plugin">plugin</A> remains.
Solution:   Remove <A HREF="motion.html#it">it</A>.
Files:      runtime/macros/README.txt

Patch 7.4.1678
Problem:    Warning for unused argument.
Solution:   Add UNUSED. (Dominique Pelle)
Files:      src/if_mzsch.c

Patch 7.4.1679
Problem:    Coverity: <A HREF="uganda.html#copying">copying</A> value of v_lock without initializing <A HREF="motion.html#it">it</A>.
Solution:   Init v_lock in rettv_list_alloc() and rettv_dict_alloc().
Files:      src/eval.c

Patch 7.4.1680
Problem:    Coverity warns for not checking name length (false positive).
Solution:   Only copy the characters we know are there.
Files:      src/channel.c

Patch 7.4.1681
Problem:    Coverity warns for fixed size buffer length (false positive).
Solution:   Add a check for the name length.
Files:      src/eval.c

Patch 7.4.1682
Problem:    Coverity: no check for NULL.
Solution:   Add check for invalid argument to <A HREF="testing.html#assert_match()">assert_match()</A>.
Files:      src/eval.c

Patch 7.4.1683
Problem:    Generated .bat files <A HREF="diff.html#do">do</A> not support <A HREF="starting.html#--nofork">--nofork</A>.
Solution:   Add check for <A HREF="starting.html#--nofork">--nofork</A>.  Also add &quot;setlocal&quot;. (Kevin Cant,
            closes #659)
Files:      src/dosinst.c

Patch 7.4.1684
Problem:    README text is slightly outdated.
Solution:   Mention the READMEdir directory.
Files:      README.md, README.txt

Patch 7.4.1685
Problem:    There is no <A HREF="starting.html#easy">easy</A> way to get all the information about a match.
Solution:   Add <A HREF="builtin.html#matchstrpos()">matchstrpos()</A>. (Ozaki Kiichi)
Files:      runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/eval.c,
            src/testdir/test_alot.vim, src/testdir/test_matchstrpos.vim

Patch 7.4.1686
Problem:    When running tests $HOME/.viminfo is written. (James McCoy)
Solution:   Add 'nviminfo' to the <A HREF="options.html#'viminfo'">'viminfo'</A> option. (closes #722)
Files:      src/testdir/test_backspace_opt.vim, src/testdir/test_viminfo.vim,
            src/testdir/runtest.vim.

Patch 7.4.1687
Problem:    The <A HREF="channel.html#channel">channel</A> <A HREF="channel.html#close_cb">close_cb</A> option does not work.
Solution:   Use jo_close_partial instead of jo_err_partial. (Damien)
Files:      src/channel.c, src/testdir/test_channel.vim

Patch 7.4.1688
Problem:    <A HREF="if_mzsch.html#MzScheme">MzScheme</A> does not support <A HREF="builtin.html#partial">partial</A>.
Solution:   Add minimal <A HREF="builtin.html#partial">partial</A> support. (Ken Takata)
Files:      src/if_mzsch.c

Patch 7.4.1689
Problem:    <A HREF="if_ruby.html#Ruby">Ruby</A> interface has inconsistent coding style.
Solution:   Fix the coding style. (Ken Takata)
Files:      src/if_ruby.c

Patch 7.4.1690
Problem:    Can't compile with the <A HREF="syntax.html#conceal">conceal</A> feature but without <A HREF="mbyte.html#multibyte">multibyte</A>.
Solution:   Adjust #ifdef. (Owen Leibman)
Files:      src/eval.c, src/window.c

Patch 7.4.1691
Problem:    When switching to a new buffer and an <A HREF="autocmd.html#autocommand">autocommand</A> applies <A HREF="syntax.html#syntax">syntax</A>
            highlighting an ml_get error may occur.
Solution:   Check &quot;syn_buf&quot; against the buffer in the <A HREF="windows.html#window">window</A>. (Alexander von
            Buddenbrock, closes #676)
Files:      src/syntax.c

Patch 7.4.1692
Problem:    feedkeys('i', '<A HREF="change.html#x">x</A>') gets stuck, waits for a character to be typed.
Solution:   Behave like &quot;<A HREF="various.html#:normal">:normal</A>&quot;. (Yasuhiro Matsumoto)
Files:      src/eval.c, src/testdir/test_feedkeys.vim

Patch 7.4.1693
Problem:    Building the <A HREF="if_perl.html#Perl">Perl</A> interface gives compiler warnings.
Solution:   Remove a pragma. Add noreturn attributes. (Damien)
Files:      src/if_perl.xs

Patch 7.4.1694
Problem:    <A HREF="os_win32.html#Win32">Win32</A> <A HREF="starting.html#gvim">gvim</A> doesn't work with &quot;dvorakj&quot; input <A HREF="eval.html#method">method</A>.
Solution:   Wait for QS_ALLINPUT instead of QS_ALLEVENTS. (Yukihiro Nakadaira)
Files:      src/gui_w32.c

Patch 7.4.1695
Problem:    &quot;<A HREF="syntax.html#:syn">:syn</A> reset&quot; clears the effect &quot;<A HREF="syntax.html#:syn">:syn</A> iskeyword&quot;. (James McCoy)
Solution:   Remove clearing the <A HREF="syntax.html#syntax">syntax</A> keywords.
Files:      src/syntax.c

Patch 7.4.1696
Problem:    When using <A HREF="insert.html#:stopinsert">:stopinsert</A> in a silent <A HREF="map.html#mapping">mapping</A> the &quot;INSERT&quot; message
            isn't cleared. (Coacher)
Solution:   Always clear the message. (Christian Brabandt, closes #718)
Files:      src/ex_docmd.c, src/proto/screen.pro, src/screen.c

Patch 7.4.1697
Problem:    Display problems when the <A HREF="options.html#'ambiwidth'">'ambiwidth'</A> and <A HREF="options.html#'emoji'">'emoji'</A> <A HREF="options.html#options">options</A> are not
            set properly or the <A HREF="terminal.html#terminal">terminal</A> doesn't behave <A HREF="motion.html#as">as</A> expected.
Solution:   After drawing an ambiguous width character always position the
            cursor.
Files:      src/mbyte.c, src/screen.c, src/proto/mbyte.pro

Patch 7.4.1698
Problem:    Two tests fail when running tests with MinGW. (Michael Soyka)
Solution:   Convert test_getcwd.ok test_wordcount.ok to <A HREF="os_unix.html#unix">unix</A> fileformat.
Files:      src/testdir/Make_ming.mak

Patch 7.4.1699
Problem:    <A HREF="repeat.html#:packadd">:packadd</A> does not work the same when used early or late.
Solution:   Always load plugins matching &quot;plugin/**/*.vim&quot;.
Files:      src/ex_cmds2.c, src/testdir/test_packadd.vim

Patch 7.4.1700
Problem:    Equivalence classes are not properly tested.
Solution:   Add tests for <A HREF="mbyte.html#multibyte">multibyte</A> and latin1. Fix an error. (Owen Leibman)
Files:      src/regexp.c, src/testdir/Make_all.mak,
            src/testdir/test_alot_latin.vim, src/testdir/test_alot_utf8.vim,
            src/testdir/test_regexp_latin.vim,
            src/testdir/test_regexp_utf8.vim

Patch 7.4.1701
Problem:    Equivalence classes still tested in old style tests.
Solution:   Remove the duplicate.
Files:      src/testdir/test44.in, src/testdir/test44.ok,
            src/testdir/test99.in, src/testdir/test99.ok

Patch 7.4.1702
Problem:    Using freed memory when parsing <A HREF="options.html#'printoptions'">'printoptions'</A> fails.
Solution:   Save the old <A HREF="options.html#options">options</A> and restore them in <A HREF="change.html#case">case</A> of an error.
            (Dominique)
Files:      src/hardcopy.c, src/testdir/test_hardcopy.vim

Patch 7.4.1703
Problem:    Can't assert for not equal and not matching.
Solution:   Add <A HREF="testing.html#assert_notmatch()">assert_notmatch()</A> and <A HREF="testing.html#assert_notequal()">assert_notequal()</A>.
Files:      src/eval.c, runtime/doc/eval.txt, src/testdir/test_assert.vim

Patch 7.4.1704
Problem:    Using freed memory with &quot;wincmd p&quot;. (Dominique Pelle)
Solution:   Also clear &quot;prevwin&quot; in other <A HREF="intro.html#tab">tab</A> pages.
Files:      src/window.c

Patch 7.4.1705
Problem:    The <A HREF="options.html#'guifont'">'guifont'</A> option does not allow for a quality setting.
Solution:   Add the &quot;<A HREF="repeat.html#q">q</A>&quot; item, supported on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>. (Yasuhiro Matsumoto)
Files:      runtime/doc/options.txt, src/gui_w32.c, src/os_mswin.c,
            src/proto/os_mswin.pro

Patch 7.4.1706
Problem:    Old style function declaration breaks build.
Solution:   Remove __ARGS().
Files:      src/proto/os_mswin.pro

Patch 7.4.1707
Problem:    Cannot use empty dictionary key, even though <A HREF="motion.html#it">it</A> can be useful.
Solution:   Allow using an empty dictionary key.
Files:      src/hashtab.c, src/eval.c, src/testdir/test_expr.vim

Patch 7.4.1708
Problem:    New <A HREF="pattern.html#regexp">regexp</A> engine does not work properly with EBCDIC.
Solution:   Define equivalence class characters. (Owen Leibman)
Files:      src/regexp_nfa.c

Patch 7.4.1709
Problem:    Mistake in #ifdef.
Solution:   Change PROOF_QUALITY to DRAFT_QUALITY. (Ken Takata)
Files:      src/os_mswin.c

Patch 7.4.1710
Problem:    Not all output of an external command is read.
Solution:   Avoid timing out when the process has exited. (closes #681)
Files:      src/os_unix.c

Patch 7.4.1711
Problem:    When using try/catch in <A HREF="options.html#'statusline'">'statusline'</A> <A HREF="motion.html#it">it</A> is still considered an
            error and the status line will be disabled.
Solution:   Check did_emsg instead of called_emsg. (haya14busa, closes #729)
Files:      src/screen.c, src/testdir/test_statusline.vim,
            src/testdir/test_alot.vim

Patch 7.4.1712
Problem:    For plugins in <A HREF="repeat.html#packages">packages</A>, <A HREF="usr_05.html#plugin">plugin</A> authors need to take care of all
            dependencies.
Solution:   When loading &quot;start&quot; <A HREF="repeat.html#packages">packages</A> and for <A HREF="repeat.html#:packloadall">:packloadall</A>, first add all
            directories to <A HREF="options.html#'runtimepath'">'runtimepath'</A> before sourcing plugins.
Files:      src/ex_cmds2.c, src/testdir/test_packadd.vim

Patch 7.4.1713
Problem:    <A HREF="gui_x11.html#GTK">GTK</A> <A HREF="gui.html#GUI">GUI</A> doesn't work on Wayland.
Solution:   Specify that only the <A HREF="options.html#X11">X11</A> backend is allowed. (Simon McVittie)
Files:      src/gui_gtk_x11.c

Patch 7.4.1714
Problem:    Non-GUI specific settings in the gvimrc_example file.
Solution:   Move some settings to the vimrc_example file.  Remove setting
            <A HREF="options.html#'hlsearch'">'hlsearch'</A> again. (suggested by Hirohito Higashi)
Files:      runtime/vimrc_example.vim, runtime/gvimrc_example.vim

Patch 7.4.1715
Problem:    Double free when a <A HREF="builtin.html#partial">partial</A> is in a cycle with a <A HREF="eval.html#list">list</A> or <A HREF="eval.html#dict">dict</A>.
            (Nikolai Pavlov)
Solution:   Do not free a nested <A HREF="eval.html#list">list</A> or <A HREF="eval.html#dict">dict</A> used by the <A HREF="builtin.html#partial">partial</A>.
Files:      src/eval.c, src/testdir/test_partial.vim

Patch 7.4.1716
Problem:    <A HREF="options.html#'autochdir'">'autochdir'</A> doesn't work for the first file. (Rob Hoelz)
Solution:   Call DO_AUTOCHDIR after <A HREF="starting.html#startup">startup</A>. (Christian Brabandt, closes #704)
Files:      src/main.c

Patch 7.4.1717
Problem:    Leaking memory when opening a <A HREF="channel.html#channel">channel</A> fails.
Solution:   Unreference partials in <A HREF="channel.html#job">job</A> <A HREF="options.html#options">options</A>.
Files:      src/eval.c, src/channel.c, src/proto/channel.pro,
            src/testdir/test_channel.vim

Patch 7.4.1718
Problem:    Coverity: not using return value of set_ref_in_item().
Solution:   Use the return value.
Files:      src/eval.c

Patch 7.4.1719
Problem:    Leaking memory when there is a cycle involving a <A HREF="channel.html#job">job</A> and a
            <A HREF="builtin.html#partial">partial</A>.
Solution:   Add a copyID to <A HREF="channel.html#job">job</A> and <A HREF="channel.html#channel">channel</A>.  Set references in items referred
            by them.  Go through all jobs and channels to find unreferenced
            items.  Also, decrement reference counts when garbage collecting.
Files:      src/eval.c, src/channel.c, src/netbeans.c, src/globals.h,
            src/ops.c, src/regexp.c, src/tag.c, src/proto/channel.pro,
            src/proto/eval.pro, src/testdir/test_partial.vim, src/structs.h

Patch 7.4.1720
Problem:    Tests fail without the <A HREF="channel.html#job">job</A> feature.
Solution:   Skip tests when the <A HREF="channel.html#job">job</A> feature is not present.
Files:      src/testdir/test_partial.vim

Patch 7.4.1721
Problem:    The vimtbar files are unused.
Solution:   Remove them. (Ken Takata)
Files:      src/vimtbar.dll, src/vimtbar.h, src/vimtbar.lib, Filelist

Patch 7.4.1722
Problem:    Crash when calling <A HREF="builtin.html#garbagecollect()">garbagecollect()</A> after starting a <A HREF="channel.html#job">job</A>.
Solution:   Set the copyID on <A HREF="channel.html#job">job</A> and <A HREF="channel.html#channel">channel</A>. (Hirohito Higashi, Ozaki
            Kiichi)
Files:      src/eval.c

Patch 7.4.1723
Problem:    When using try/catch in <A HREF="options.html#'tabline'">'tabline'</A> <A HREF="motion.html#it">it</A> is still considered an
            error and the tabline will be disabled.
Solution:   Check did_emsg instead of called_emsg. (haya14busa, closes #746)
Files:      src/screen.c, src/testdir/test_tabline.vim,
            src/testdir/test_alot.vim

Patch 7.4.1724 (after 7.4.1723)
Problem:    Tabline test fails in <A HREF="gui.html#GUI">GUI</A>.
Solution:   Remove '<A HREF="motion.html#e">e</A>' from <A HREF="options.html#'guioptions'">'guioptions'</A>.
Files:      src/testdir/test_tabline.vim

Patch 7.4.1725
Problem:    Compiler <A HREF="message.html#errors">errors</A> for non-ANSI compilers.
Solution:   Remove <A HREF="version7.html#//">//</A> comment.  Remove comma at end of enum. (Michael Jarvis)
Files:      src/eval.c

Patch 7.4.1726
Problem:    ANSI compiler complains about <A HREF="eval.html#string">string</A> length.
Solution:   Split long <A HREF="eval.html#string">string</A> in two parts. (Michael Jarvis)
Files:      src/ex_cmds.c

Patch 7.4.1727
Problem:    Cannot detect a crash in tests when caused by <A HREF="builtin.html#garbagecollect()">garbagecollect()</A>.
Solution:   Add garbagecollect_for_testing().  Do not free a <A HREF="channel.html#job">job</A> if is still
            useful.
Files:      src/channel.c, src/eval.c, src/getchar.c, src/main.c, src/vim.h,
            src/proto/eval.pro, src/testdir/runtest.vim,
            src/testdir/test_channel.vim, runtime/doc/eval.txt

Patch 7.4.1728
Problem:    The help for <A HREF="eval.html#functions">functions</A> require a space after the &quot;<A HREF="motion.html#(">(</A>&quot;.
Solution:   Make <A HREF="tagsrch.html#CTRL-]">CTRL-]</A> on a function name ignore the arguments. (Hirohito
            Higashi)
Files:      src/ex_cmds.c, src/testdir/test_help_tagjump.vim,
            runtime/doc/eval.txt

Patch 7.4.1729
Problem:    The <A HREF="if_perl.html#Perl">Perl</A> interface cannot use 'print' <A HREF="motion.html#operator">operator</A> for <A HREF="editing.html#writing">writing</A>
            directly in standard IO.
Solution:   Add a minimal implementation of PerlIO Layer feature and try to
            use <A HREF="motion.html#it">it</A> for STDOUT/STDERR. (Damien)
Files:      src/if_perl.xs, src/testdir/test_perl.vim

Patch 7.4.1730
Problem:    It is not <A HREF="starting.html#easy">easy</A> to get a character out of a <A HREF="eval.html#string">string</A>.
Solution:   Add <A HREF="builtin.html#strgetchar()">strgetchar()</A> and <A HREF="builtin.html#strcharpart()">strcharpart()</A>.
Files:      src/eval.c, src/testdir/test_expr.vim

Patch 7.4.1731
Problem:    <A HREF="if_pyth.html#Python">Python</A>: turns <A HREF="builtin.html#partial">partial</A> into simple funcref.
Solution:   Use partials like partials. (Nikolai Pavlov, closes #734)
Files:      runtime/doc/if_pyth.txt, src/eval.c, src/if_py_both.h,
            src/if_python.c, src/if_python3.c, src/proto/eval.pro,
            src/testdir/test86.in, src/testdir/test86.ok,
            src/testdir/test87.in, src/testdir/test87.ok

Patch 7.4.1732
Problem:    Folds may close when using autocomplete. (Anmol Sethi)
Solution:   Increment/decrement disable_fold. (Christian Brabandt, closes
            #643)
Files:      src/edit.c, src/fold.c, src/globals.h

Patch 7.4.1733
Problem:    &quot;make install&quot; doesn't know about cross-compiling. (Christian
            Neukirchen)
Solution:   Add CROSS_COMPILING. (closes #740)
Files:      src/configure.in, src/auto/configure, src/config.mk.in,
            src/Makefile

Patch 7.4.1734 (after 7.4.1730)
Problem:    Test fails when not using <A HREF="mbyte.html#utf-8">utf-8</A>.
Solution:   Split test in regular and <A HREF="mbyte.html#utf-8">utf-8</A> part.
Files:      src/testdir/test_expr.vim, src/testdir/test_expr_utf8.vim,
            src/testdir/test_alot_utf8.vim

Patch 7.4.1735
Problem:    It is not possible to only see part of the message <A HREF="cmdline.html#history">history</A>.  It is
            not possible to clear <A HREF="message.html#messages">messages</A>.
Solution:   Add a <A HREF="intro.html#count">count</A> to &quot;<A HREF="message.html#:messages">:messages</A>&quot; and a clear argument. (Yasuhiro
            Matsumoto)
Files:      runtime/doc/message.txt, src/ex_cmds.h, src/message.c,
            src/testdir/test_messages.vim, src/testdir/test_alot.vim

Patch 7.4.1736 (after 7.4.1731)
Problem:    Unused variable.
Solution:   Remove <A HREF="motion.html#it">it</A>. (Yasuhiro Matsumoto)
Files:      src/if_py_both.h

Patch 7.4.1737
Problem:    Argument marked <A HREF="motion.html#as">as</A> unused is used.
Solution:   Remove UNUSED.
Files:      src/message.c

Patch 7.4.1738
Problem:    Count for &quot;<A HREF="message.html#:messages">:messages</A>&quot; depends on number of lines.
Solution:   Add ADDR_OTHER address type.
Files:      src/ex_cmds.h

Patch 7.4.1739
Problem:    Messages test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Adjust the asserts.  Skip the &quot;<A HREF="message.html#messages">messages</A> maintainer&quot; line if not
            showing all <A HREF="message.html#messages">messages</A>.
Files:      src/message.c, src/testdir/test_messages.vim

Patch 7.4.1740
Problem:    syn-cchar defined with <A HREF="builtin.html#matchadd()">matchadd()</A> does not appear if there are no
            other <A HREF="syntax.html#syntax">syntax</A> <A HREF="intro.html#definitions">definitions</A> which matches buffer text.
Solution:   Check for startcol. (Ozaki Kiichi, haya14busa, closes #757)
Files:      src/screen.c, src/testdir/Make_all.mak,
            src/testdir/test_alot_utf8.vim, src/testdir/test_match_conceal.in,
            src/testdir/test_match_conceal.ok,
            src/testdir/test_matchadd_conceal.vim,
            src/testdir/test_matchadd_conceal_utf8.vim,
            src/testdir/test_undolevels.vim

Patch 7.4.1741
Problem:    Not <A HREF="testing.html#testing">testing</A> <A HREF="mbyte.html#utf-8">utf-8</A> characters.
Solution:   Move the right asserts to the test_expr_utf8 test.
Files:      src/testdir/test_expr.vim, src/testdir/test_expr_utf8.vim

Patch 7.4.1742
Problem:    <A HREF="builtin.html#strgetchar()">strgetchar()</A> does not work correctly.
Solution:   use mb_cptr2len().  Add a test. (Naruhiko Nishino)
Files:      src/eval.c, src/testdir/test_expr_utf8.vim

Patch 7.4.1743
Problem:    Clang warns for uninitialized variable. (Michael Jarvis)
Solution:   Initialize <A HREF="motion.html#it">it</A>.
Files:      src/if_py_both.h

Patch 7.4.1744
Problem:    <A HREF="if_pyth.html#Python">Python</A>: Converting a sequence may leak memory.
Solution:   Decrement a reference. (Nikolai Pavlov)
Files:      src/if_py_both.h

Patch 7.4.1745
Problem:    README file is not clear about where to get Vim.
Solution:   Add links to github, releases and the Windows installer.
            (Suggested by Christian Brabandt)
Files:      README.md, README.txt

Patch 7.4.1746
Problem:    Memory leak in <A HREF="if_perl.html#Perl">Perl</A>.
Solution:   Decrement the reference <A HREF="intro.html#count">count</A>.  Add a test. (Damien)
Files:      src/if_perl.xs, src/testdir/test_perl.vim

Patch 7.4.1747
Problem:    Coverity: missing check for NULL pointer.
Solution:   Check for out of memory.
Files:      src/if_py_both.h

Patch 7.4.1748
Problem:    &quot;<A HREF="pattern.html#gD">gD</A>&quot; does not find match in first column of first line. (Gary
            Johnson)
Solution:   Accept match at the cursor.
Files:      src/normal.c, src/testdir/test_goto.vim, src/testdir/test_alot.vim

Patch 7.4.1749
Problem:    When using <A HREF="gui_x11.html#GTK">GTK</A> 3.20 there are a few warnings.
Solution:   Use new <A HREF="eval.html#functions">functions</A> when available. (Kazunobu Kuriyama)
Files:      src/gui_beval.c src/gui_gtk_x11.c

Patch 7.4.1750
Problem:    When a buffer gets updated while in command line mode, the screen
            may be messed up.
Solution:   Postpone the redraw when the screen is scrolled.
Files:      src/channel.c

Patch 7.4.1751
Problem:    Crash when <A HREF="options.html#'tagstack'">'tagstack'</A> is off. (Dominique Pelle)
Solution:   Fix <A HREF="motion.html#it">it</A>. (Hirohito Higashi)
Files:      src/tag.c, src/testdir/test_alot.vim, src/testdir/test_tagjump.vim

Patch 7.4.1752
Problem:    When adding to the <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A> the current position is reset.
Solution:   Do not reset the position when not needed. (Yegappan Lakshmanan)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 7.4.1753
Problem:    &quot;noinsert&quot; in <A HREF="options.html#'completeopt'">'completeopt'</A> is sometimes ignored.
Solution:   Set the <A HREF="eval.html#variables">variables</A> when the <A HREF="options.html#'completeopt'">'completeopt'</A> was set. (Ozaki Kiichi)
Files:      src/edit.c, src/option.c, src/proto/edit.pro

Patch 7.4.1754
Problem:    When <A HREF="options.html#'filetype'">'filetype'</A> was set and reloading a buffer which does not
            cause <A HREF="motion.html#it">it</A> to be set, the <A HREF="syntax.html#syntax">syntax</A> isn't loaded. (KillTheMule)
Solution:   Remember whether the <A HREF="autocmd.html#FileType">FileType</A> event was fired and fire <A HREF="motion.html#it">it</A> if not.
            (Anton Lindqvist, closes #747)
Files:      src/fileio.c, src/testdir/test_syntax.vim

Patch 7.4.1755
Problem:    When using <A HREF="builtin.html#getreg()">getreg()</A> on a non-existing <A HREF="sponsor.html#register">register</A> a NULL <A HREF="eval.html#list">list</A> is
            returned. (Bjorn Linse)
Solution:   Allocate an empty <A HREF="eval.html#list">list</A>. Add a test.
Files:      src/eval.c, src/testdir/test_expr.vim

Patch 7.4.1756
Problem:    &quot;dll&quot; <A HREF="options.html#options">options</A> are not expanded.
Solution:   Expand environment <A HREF="eval.html#variables">variables</A>. (Ozaki Kiichi)
Files:      src/option.c, src/testdir/test_alot.vim,
            src/testdir/test_expand_dllpath.vim

Patch 7.4.1757
Problem:    When using <A HREF="builtin.html#complete()">complete()</A> <A HREF="motion.html#it">it</A> may set <A HREF="options.html#'modified'">'modified'</A> even though nothing
            was inserted.
Solution:   Use Down/Up instead of Next/Previous match. (Shougo Matsu, closes
	    #745)
Files:      src/edit.c

Patch 7.4.1758
Problem:    Triggering <A HREF="autocmd.html#CursorHoldI">CursorHoldI</A> when in <A HREF="change.html#CTRL-X">CTRL-X</A> mode causes problems.
Solution:   Do not trigger <A HREF="autocmd.html#CursorHoldI">CursorHoldI</A> in <A HREF="change.html#CTRL-X">CTRL-X</A> mode. Add &quot;<A HREF="change.html#!">!</A>&quot; flag to
            <A HREF="builtin.html#feedkeys()">feedkeys()</A> (test with that didn't work though).
Files:      src/edit.c, src/eval.c

Patch 7.4.1759
Problem:    When using <A HREF="builtin.html#feedkeys()">feedkeys()</A> in a <A HREF="builtin.html#timer">timer</A> the inserted characters are not
            used right away.
Solution:   Break the wait loop when characters have been added to typebuf.
            use this for <A HREF="testing.html#testing">testing</A> <A HREF="autocmd.html#CursorHoldI">CursorHoldI</A>.
Files:      src/gui.c, src/os_win32.c, src/os_unix.c,
            src/testdir/test_autocmd.vim

Patch 7.4.1760 (after 7.4.1759)
Problem:    Compiler warning for unused variable.
Solution:   Add #ifdef. (John Marriott)
Files:      src/os_win32.c

Patch 7.4.1761
Problem:    Coverity complains about ignoring return value.
Solution:   Add &quot;(void)&quot; to get rid of the warning.
Files:      src/eval.c

Patch 7.4.1762
Problem:    Coverity: useless assignments.
Solution:   Remove them.
Files:      src/search.c

Patch 7.4.1763
Problem:    Coverity: useless assignment.
Solution:   Add #if 0.
Files:      src/spell.c

Patch 7.4.1764
Problem:    C++ style comment. (Ken Takata)
Solution:   Finish the work started here: don't call perror() when stderr
            isn't working.
Files:      src/os_unix.c

Patch 7.4.1765
Problem:    Undo <A HREF="options.html#options">options</A> are not together in the <A HREF="options.html#options">options</A> <A HREF="windows.html#window">window</A>.
Solution:   Put them together.  (Gary Johnson)
Files:      runtime/optwin.vim

Patch 7.4.1766
Problem:    Building instructions for <A HREF="os_win32.html#MS-Windows">MS-Windows</A> are outdated.
Solution:   Mention setting SDK_INCLUDE_DIR. (Ben Franklin, closes #771)  Move
            outdated instructions further down.
Files:      src/INSTALLpc.txt

Patch 7.4.1767
Problem:    When installing Vim on a <A HREF="gui_x11.html#GTK">GTK</A> system the icon cache is not updated.
Solution:   Update the <A HREF="gui_x11.html#GTK">GTK</A> icon cache when possible. (Kazunobu Kuriyama)
Files:      src/Makefile, src/configure.in, src/config.mk.in,
            src/auto/configure

Patch 7.4.1768
Problem:    Arguments of <A HREF="builtin.html#setqflist()">setqflist()</A> are not checked properly.
Solution:   Add better checks, add a test. (Nikolai Pavlov, Hirohito Higashi,
            closes #661)
Files:      src/eval.c, src/testdir/test_quickfix.vim

Patch 7.4.1769
Problem:    No &quot;closed&quot;, &quot;<A HREF="message.html#errors">errors</A>&quot; and &quot;encoding&quot; attribute on <A HREF="if_pyth.html#Python">Python</A> output.
Solution:   Add attributes and more tests. (Roland Puntaier, closes #622)
Files:      src/if_py_both.h, src/if_python.c, src/if_python3.c,
            src/testdir/test86.in, src/testdir/test86.ok,
            src/testdir/test87.in, src/testdir/test87.ok

Patch 7.4.1770
Problem:    Cannot use <A HREF="vim9.html#true">true</A> color in the <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Add the 'guicolors' option. (Nikolai Pavlov)
Files:      runtime/doc/options.txt, runtime/doc/term.txt,
            runtime/doc/various.txt, src/auto/configure, src/config.h.in,
            src/configure.in, src/eval.c, src/globals.h, src/hardcopy.c,
            src/option.c, src/option.h, src/proto/term.pro, src/screen.c,
            src/structs.h, src/syntax.c, src/term.c, src/term.h,
            src/version.c, src/vim.h

Patch 7.4.1771 (after 7.4.1768)
Problem:    Warning for unused variable.
Solution:   Add #ifdef. (John Marriott)
Files:      src/eval.c

Patch 7.4.1772 (after 7.4.1767)
Problem:    Installation fails when $GTK_UPDATE_ICON_CACHE is empty.
Solution:   Add <A HREF="quotes.html#quotes">quotes</A>. (Kazunobu Kuriyama)
Files:      src/Makefile

Patch 7.4.1773 (after 7.4.1770)
Problem:    Compiler warnings. (Dominique Pelle)
Solution:   Add UNUSED. Add type cast. Avoid a buffer overflow.
Files:      src/syntax.c, src/term.c

Patch 7.4.1774 (after 7.4.1770)
Problem:    Cterm <A HREF="vim9.html#true">true</A> color feature has warnings.
Solution:   Add type casts.
Files:      src/screen.c, src/syntax.c, src/term.c

Patch 7.4.1775
Problem:    The <A HREF="gui_w32.html#rgb.txt">rgb.txt</A> file is not installed.
Solution:   Install the file. (Christian Brabandt)
Files:      src/Makefile

Patch 7.4.1776
Problem:    Using wrong buffer length.
Solution:   use the right name. (Kazunobu Kuriyama)
Files:      src/term.c

Patch 7.4.1777
Problem:    Newly added features can <A HREF="intro.html#escape">escape</A> the <A HREF="eval.html#sandbox">sandbox</A>.
Solution:   Add checks for restricted and secure. (Yasuhiro Matsumoto)
Files:      src/eval.c

Patch 7.4.1778
Problem:    When using the term truecolor feature, the <A HREF="term.html#t_8f">t_8f</A> and <A HREF="term.html#t_8b">t_8b</A> <A HREF="term.html#termcap">termcap</A>
            <A HREF="options.html#options">options</A> are not set by default.
Solution:   Move the values to before BT_EXTRA_KEYS. (Christian Brabandt)
Files:      src/term.c

Patch 7.4.1779
Problem:    Using negative index in <A HREF="builtin.html#strcharpart()">strcharpart()</A>. (Yegappan Lakshmanan)
Solution:   Assume single byte when using a negative index.
Files:      src/eval.c

Patch 7.4.1780
Problem:    Warnings reported by cppcheck.
Solution:   Fix the warnings. (Dominique Pelle)
Files:      src/ex_cmds2.c, src/json.c, src/misc1.c, src/ops.c,
            src/regexp_nfa.c

Patch 7.4.1781
Problem:    <A HREF="builtin.html#synIDattr()">synIDattr()</A> does not respect 'guicolors'.
Solution:   Change the condition for the mode. (Christian Brabandt)
Files:      src/eval.c

Patch 7.4.1782
Problem:    <A HREF="builtin.html#strcharpart()">strcharpart()</A> does not work properly with some <A HREF="mbyte.html#multibyte">multibyte</A>
            characters.
Solution:   Use mb_cptr2len() instead of mb_char2len(). (Hirohito Higashi)
Files:      src/eval.c, src/testdir/test_expr_utf8.vim

Patch 7.4.1783
Problem:    The old <A HREF="pattern.html#regexp">regexp</A> engine doesn't handle character classes correctly.
            (Manuel Ortega)
Solution:   Use regmbc() instead of regc().  Add a test.
Files:      src/regexp.c, src/testdir/test_regexp_utf8.vim

Patch 7.4.1784
Problem:    The termtruecolor feature is enabled differently from many other
            features.
Solution:   Enable the termtruecolor feature for the big build, not through
            configure.
Files:      src/configure.in, src/config.h.in, src/auto/configure,
            src/feature.h

Patch 7.4.1785 (after 7.4.1783)
Problem:    Regexp test fails on <A HREF="windows.html#windows">windows</A>.
Solution:   set <A HREF="options.html#'isprint'">'isprint'</A> to the right value for <A HREF="testing.html#testing">testing</A>.
Files:      src/testdir/test_regexp_utf8.vim

Patch 7.4.1786
Problem:    Compiled-in colors <A HREF="diff.html#do">do</A> not match <A HREF="gui_w32.html#rgb.txt">rgb.txt</A>.
Solution:   Use the <A HREF="gui_w32.html#rgb.txt">rgb.txt</A> colors. (Kazunobu Kuriyama)
Files:      src/term.c

Patch 7.4.1787
Problem:    When a <A HREF="channel.html#job">job</A> ends the close callback is invoked before other
            callbacks. On Windows the close callback is not called.
Solution:   First invoke out/err callbacks before the close callback.
            Make the close callback work on Windows.
Files:      src/channel.c, src/proto/channel.pro,
            src/testdir/test_channel.vim, src/testdir/test_channel_pipe.py

Patch 7.4.1788
Problem:    NSIS <A HREF="usr_41.html#script">script</A> is missing <A HREF="repeat.html#packages">packages</A>.
Solution:   Add the missing directories. (Ken Takata)
Files:      nsis/gvim.nsi

Patch 7.4.1789
Problem:    Cannot use <A HREF="channel.html#ch_read()">ch_read()</A> in the close callback.
Solution:   Do not <A HREF="editing.html#discard">discard</A> the <A HREF="channel.html#channel">channel</A> if there is readahead.  Do not <A HREF="editing.html#discard">discard</A>
            readahead if there is a close callback.
Files:      src/eval.c, src/channel.c, src/proto/channel.pro,
            src/testdir/test_channel.vim

Patch 7.4.1790
Problem:    Leading white space in a <A HREF="channel.html#job">job</A> command matters. (Andrew Stewart)
Solution:   Skip leading white space.
Files:      src/os_unix.c

Patch 7.4.1791
Problem:    <A HREF="eval.html#Channel">Channel</A> could be garbage collected too early.
Solution:   Don't free a <A HREF="channel.html#channel">channel</A> or remove <A HREF="motion.html#it">it</A> from a <A HREF="channel.html#job">job</A> when <A HREF="motion.html#it">it</A> is still
            useful.
Files:      src/channel.c

Patch 7.4.1792
Problem:    Color name decoding is implemented several times.
Solution:   Move <A HREF="motion.html#it">it</A> to term.c. (Christian Brabandt)
Files:      src/gui_mac.c, src/gui_photon.c, src/gui_w32.c,
            src/proto/term.pro, src/term.c

Patch 7.4.1793
Problem:    Some character classes may differ between systems.  On OS/X the
            <A HREF="pattern.html#regexp">regexp</A> test fails.
Solution:   Make this <A HREF="various.html#less">less</A> dependent on the system. (idea by Kazunobu Kuriyama)
Files:      src/regexp.c, src/regexp_nfa.c

Patch 7.4.1794 (after 7.4.1792)
Problem:    Can't build on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Add missing declaration.
Files:      src/gui_w32.c

Patch 7.4.1795
Problem:    Compiler warning for redefining RGB. (John Marriott)
Solution:   Rename <A HREF="motion.html#it">it</A> to TORGB.
Files:      src/term.c

Patch 7.4.1796 (after 7.4.1795)
Problem:    Colors are wrong on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>. (Christian Robinson)
Solution:   Use existing RGB <A HREF="map.html#macro">macro</A> if <A HREF="motion.html#it">it</A> exists. (Ken Takata)
Files:      src/term.c

Patch 7.4.1797
Problem:    Warning from Windows 64 bit compiler.
Solution:   Change int to size_t. (Mike Williams)
Files:      src/term.c

Patch 7.4.1798
Problem:    Still compiler warning for unused return value. (Charles Campbell)
Solution:   Assign to ignoredp.
Files:      src/term.c

Patch 7.4.1799
Problem:    'guicolors' is a confusing option name.
Solution:   Use <A HREF="options.html#'termguicolors'">'termguicolors'</A> instead. (Hirohito Higashi, Ken Takata)
Files:      runtime/doc/options.txt, runtime/doc/term.txt,
            runtime/doc/various.txt, runtime/syntax/dircolors.vim, src/eval.c,
            src/feature.h, src/globals.h, src/hardcopy.c, src/option.c,
            src/option.h, src/proto/term.pro, src/screen.c, src/structs.h,
            src/syntax.c, src/term.c, src/version.c, src/vim.h

Patch 7.4.1800 (after 7.4.1799)
Problem:    Unnecessary #ifdef.
Solution:   Just use USE_24BIT. (Ken Takata)
Files:      src/syntax.c

Patch 7.4.1801
Problem:    Make uninstall leaves file behind.
Solution:   Delete <A HREF="gui_w32.html#rgb.txt">rgb.txt</A>. (Kazunobu Kuriyama)
Files:      src/Makefile

Patch 7.4.1802
Problem:    <A HREF="quickfix.html#Quickfix">Quickfix</A> doesn't handle long lines well, they are split.
Solution:   Drop characters after a limit. (Anton Lindqvist)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim,
            src/testdir/samples/quickfix.txt

Patch 7.4.1803
Problem:    <A HREF="gui_x11.html#GTK3">GTK3</A> doesn't handle menu separators properly.
Solution:   Use gtk_separator_menu_item_new(). (Kazunobu Kuriyama)
Files:      src/gui_gtk.c

Patch 7.4.1804
Problem:    Can't use Vim <A HREF="motion.html#as">as</A> MANPAGER.
Solution:   Add <A HREF="filetype.html#manpager.vim">manpager.vim</A>. (Enno Nagel, closes #491)
Files:      runtime/doc/filetype.txt, runtime/plugin/manpager.vim

Patch 7.4.1805
Problem:    Running tests in shadow dir fails.
Solution:   Link the samples directory
Files:      src/Makefile

Patch 7.4.1806
Problem:    <A HREF="options.html#'termguicolors'">'termguicolors'</A> option missing from the <A HREF="options.html#options">options</A> <A HREF="windows.html#window">window</A>.
Solution:   Add the entry.
Files:      runtime/optwin.vim

Patch 7.4.1807
Problem:    Test_out_close_cb sometimes fails.
Solution:   Always write DETACH to out, not err.
Files:      src/channel.c, src/testdir/test_channel.vim

Patch 7.4.1808 (after 7.4.1806)
Problem:    Using wrong feature name to check for <A HREF="options.html#'termguicolors'">'termguicolors'</A>.
Solution:   Use the right feature name. (Ken Takata)
Files:      runtime/optwin.vim

Patch 7.4.1809 (after 7.4.1808)
Problem:    Using wrong short option name for <A HREF="options.html#'termguicolors'">'termguicolors'</A>.
Solution:   Use the option name.
Files:      runtime/optwin.vim

Patch 7.4.1810
Problem:    Sending DETACH after a <A HREF="channel.html#channel">channel</A> was closed isn't useful.
Solution:   Only add DETACH for a <A HREF="netbeans.html#netbeans">netbeans</A> <A HREF="channel.html#channel">channel</A>.
Files:      src/channel.c, src/testdir/test_channel.vim

Patch 7.4.1811
Problem:    Netbeans <A HREF="channel.html#channel">channel</A> gets garbage collected.
Solution:   Set reference in nb_channel.
Files:      src/eval.c, src/netbeans.c, src/proto/netbeans.pro

Patch 7.4.1812
Problem:    Failure on <A HREF="starting.html#startup">startup</A> with Athena and <A HREF="gui_x11.html#Motif">Motif</A>.
Solution:   Check for INVALCOLOR. (Kazunobu Kuriyama)
Files:      src/syntax.c, src/vim.h

Patch 7.4.1813
Problem:    Memory access error when running test_quickfix.
Solution:   Allocate one more byte. (Yegappan Lakshmanan)
Files:      src/quickfix.c

Patch 7.4.1814
Problem:    A <A HREF="channel.html#channel">channel</A> may be garbage collected while it's still being used by
            a <A HREF="channel.html#job">job</A>. (James McCoy)
Solution:   <A HREF="motion.html#Mark">Mark</A> the <A HREF="channel.html#channel">channel</A> <A HREF="motion.html#as">as</A> used if the <A HREF="channel.html#job">job</A> is still used.  Do the same
            for channels that are still used.
Files:      src/eval.c, src/channel.c, src/proto/channel.pro

Patch 7.4.1815
Problem:    Compiler warnings for unused <A HREF="eval.html#variables">variables</A>. (Ajit Thakkar)
Solution:   Add a dummy <A HREF="starting.html#initialization">initialization</A>. (Yasuhiro Matsumoto)
Files:      src/quickfix.c

Patch 7.4.1816
Problem:    Looping over a <A HREF="vim9.html#null">null</A> <A HREF="eval.html#list">list</A> throws an error.
Solution:   Skip over the for loop.
Files:      src/eval.c, src/testdir/test_expr.vim

Patch 7.4.1817
Problem:    The screen is not updated if a callback is invoked when closing a
            <A HREF="channel.html#channel">channel</A>.
Solution:   Invoke redraw_after_callback().
Files:      src/channel.c

Patch 7.4.1818
Problem:    Help completion adds @en to all matches except the first one.
Solution:   Remove &quot;break&quot;, go over all items.
Files:      src/ex_getln.c

Patch 7.4.1819
Problem:    Compiler warnings when sprintf() is a <A HREF="map.html#macro">macro</A>.
Solution:   Don't interrupt sprintf() with an #ifdef. (Michael Jarvis,
            closes #788)
Files:      src/fileio.c, src/tag.c, src/term.c

Patch 7.4.1820
Problem:    Removing language from help <A HREF="tagsrch.html#tags">tags</A> too often.
Solution:   Only remove @en when not needed. (Hirohito Higashi)
Files:      src/ex_getln.c, src/testdir/test_help_tagjump.vim

Patch 7.4.1821 (after 7.4.1820)
Problem:    Test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Sort the completion results.
Files:      src/testdir/test_help_tagjump.vim

Patch 7.4.1822
Problem:    Redirecting stdout of a <A HREF="channel.html#channel">channel</A> to &quot;<A HREF="vim9.html#null">null</A>&quot; doesn't work. (Nicola)
Solution:   Correct the file descriptor number.
Files:      src/os_unix.c

Patch 7.4.1823
Problem:    Warning from 64 bit compiler.
Solution:   Add type cast. (Mike Williams)
Files:      src/quickfix.c

Patch 7.4.1824
Problem:    When a <A HREF="channel.html#job">job</A> is no longer referenced and does not have an exit
            callback the process may hang around in defunct state. (Nicola)
Solution:   Call <A HREF="channel.html#job_status()">job_status()</A> if the <A HREF="channel.html#job">job</A> is running and won't get freed
            because <A HREF="motion.html#it">it</A> might still be useful.
Files:      src/channel.c

Patch 7.4.1825
Problem:    When <A HREF="channel.html#job">job</A> writes to buffer nothing is written. (Nicola)
Solution:   Do not <A HREF="editing.html#discard">discard</A> a <A HREF="channel.html#channel">channel</A> before <A HREF="editing.html#writing">writing</A> is done.
Files:      src/channel.c

Patch 7.4.1826
Problem:    Callbacks are invoked when it's not safe. (Andrew Stewart)
Solution:   When a <A HREF="channel.html#channel">channel</A> is to be closed don't invoke callbacks right away,
            wait for a safe moment.
Files:      src/structs.h, src/channel.c

Patch 7.4.1827
Problem:    No error when invoking a callback when it's not safe.
Solution:   Add an error message.  Avoid the error when freeing a <A HREF="channel.html#channel">channel</A>.
Files:      src/structs.h, src/channel.c

Patch 7.4.1828
Problem:    May try to access buffer that's already freed.
Solution:   When freeing a buffer remove <A HREF="motion.html#it">it</A> from any <A HREF="channel.html#channel">channel</A>.
Files:      src/buffer.c, src/channel.c, src/proto/channel.pro

Patch 7.4.1829 (after 7.4.1828)
Problem:    No message on <A HREF="channel.html#channel">channel</A> log when buffer was freed.
Solution:   Log a message.
Files:      src/channel.c

Patch 7.4.1830
Problem:    non-antialiased misnamed.
Solution:   Use NONANTIALIASED and NONANTIALIASED_QUALITY. (Kim Brouer,
            closes #793)
Files:      src/os_mswin.c, runtime/doc/options.txt

Patch 7.4.1831
Problem:    When <A HREF="builtin.html#timer_stop()">timer_stop()</A> is called with a <A HREF="eval.html#string">string</A> there is no proper error
            message.
Solution:   Require getting a number. (Bjorn Linse)
Files:      src/eval.c

Patch 7.4.1832
Problem:    Memory leak in debug commands.
Solution:   Free memory before overwriting the pointer. (hint by Justin Keyes)
Files:      src/ex_cmds2.c

Patch 7.4.1833
Problem:    Cannot use an <A HREF="intro.html#Ex">Ex</A> command for <A HREF="options.html#'keywordprg'">'keywordprg'</A>.
Solution:   Accept an <A HREF="intro.html#Ex">Ex</A> command. (Nelo-Thara Wallus)
Files:      src/normal.c, runtime/doc/options.txt

Patch 7.4.1834
Problem:    Possible crash when <A HREF="syntax.html#conceal">conceal</A> is active.
Solution:   Check for the screen to be valid when redrawing a line.
Files:      src/screen.c

Patch 7.4.1835
Problem:    When splitting and closing a <A HREF="windows.html#window">window</A> the status height changes.
Solution:   Compute the frame height correctly. (Hirohito Higashi)
Files:      src/window.c, src/testdir/test_alot.vim,
            src/testdir/test_window_cmd.vim

Patch 7.4.1836
Problem:    When using a <A HREF="builtin.html#partial">partial</A> on a dictionary <A HREF="motion.html#it">it</A> always gets bound to that
            dictionary.
Solution:   Make a difference between binding a function to a dictionary
            explicitly or automatically.
Files:      src/structs.h, src/eval.c, src/testdir/test_partial.vim,
            runtime/doc/eval.txt

Patch 7.4.1837
Problem:    The <A HREF="autocmd.html#BufUnload">BufUnload</A> event is triggered <A HREF="if_cscop.html#twice">twice</A>, when <A HREF="windows.html#:bunload">:bunload</A> is used with
            `bufhidden` set to `unload` or `delete`.
Solution:   Do not trigger the event when ml_mfp is NULL. (Hirohito Higashi)
Files:      src/buffer.c, src/testdir/test_autocmd.vim

Patch 7.4.1838
Problem:    Functions specifically for <A HREF="testing.html#testing">testing</A> <A HREF="diff.html#do">do</A> not sort together.
Solution:   Rename garbagecollect_for_testing() to <A HREF="testing.html#test_garbagecollect_now()">test_garbagecollect_now()</A>.
            Add <A HREF="testing.html#test_null_list()">test_null_list()</A>, <A HREF="testing.html#test_null_dict()">test_null_dict()</A>, etc.
Files:      src/eval.c, src/testdir/test_expr.vim,
            src/testdir/test_channel.vim, runtime/doc/eval.txt

Patch 7.4.1839
Problem:    Cannot get the items stored in a <A HREF="builtin.html#partial">partial</A>.
Solution:   Support using <A HREF="builtin.html#get()">get()</A> on a <A HREF="builtin.html#partial">partial</A>.
Files:      src/eval.c, src/testdir/test_partial.vim, runtime/doc/eval.txt

Patch 7.4.1840
Problem:    When using <A HREF="repeat.html#packages">packages</A> an &quot;after&quot; directory cannot be used.
Solution:   Add the &quot;after&quot; directory of the package to <A HREF="options.html#'runtimepath'">'runtimepath'</A> if <A HREF="motion.html#it">it</A>
            exists.
Files:      src/ex_cmds2.c, src/testdir/test_packadd.vim

Patch 7.4.1841
Problem:    The code to reallocate the buffer used for <A HREF="quickfix.html#quickfix">quickfix</A> is repeated.
Solution:   Move the code to a function. (Yegappan Lakshmanan, closes #831)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 7.4.1842 (after 7.4.1839)
Problem:    <A HREF="builtin.html#get()">get()</A> works for <A HREF="eval.html#Partial">Partial</A> but not for <A HREF="eval.html#Funcref">Funcref</A>.
Solution:   Accept <A HREF="eval.html#Funcref">Funcref</A>.  Also return the function itself. (Nikolai Pavlov)
Files:      src/eval.c, src/testdir/test_partial.vim, runtime/doc/eval.txt

Patch 7.4.1843
Problem:    Tests involving <A HREF="if_pyth.html#Python">Python</A> are flaky.
Solution:   Set the pt_auto field.  Add tests. (Nikolai Pavlov)
Files:      runtime/doc/if_pyth.txt, src/if_py_both.h, src/testdir/test86.in,
            src/testdir/test86.ok, src/testdir/test87.in,
            src/testdir/test87.ok

Patch 7.4.1844
Problem:    Using old function name in comment.  More <A HREF="eval.html#functions">functions</A> should start
            with test_.
Solution:   Rename function in comment. (Hirohito Higashi) Rename
            disable_char_avail_for_testing() to test_disable_char_avail().
            And alloc_fail() to <A HREF="testing.html#test_alloc_fail()">test_alloc_fail()</A>.
Files:      src/eval.c, src/getchar.c, src/testdir/runtest.vim,
            src/testdir/test_cursor_func.vim, src/testdir/test_quickfix.vim,
            runtime/doc/eval.txt

Patch 7.4.1845
Problem:    Mentioning <A HREF="netbeans.html#NetBeans">NetBeans</A> when reading from <A HREF="channel.html#channel">channel</A>. (Ramel Eshed)
Solution:   Make the text more generic.
Files:      src/channel.c

Patch 7.4.1846
Problem:    Ubsan detects a multiplication overflow.
Solution:   Don't use orig_mouse_time when it's zero. (Dominique Pelle)
Files:      src/term.c

Patch 7.4.1847
Problem:    Getting an item from a NULL <A HREF="eval.html#dict">dict</A> crashes.  Setting a <A HREF="sponsor.html#register">register</A> to a
            NULL <A HREF="eval.html#list">list</A> crashes. (Nikolai Pavlov, issue #768)  Comparing a NULL
            <A HREF="eval.html#dict">dict</A> with a NULL <A HREF="eval.html#dict">dict</A> fails.
Solution:   Properly check for NULL.
Files:      src/eval.c, src/testdir/test_expr.vim

Patch 7.4.1848
Problem:    Can't build with Strawberry <A HREF="if_perl.html#Perl">Perl</A> 5.24.
Solution:   Define S_SvREFCNT_dec() if needed. (Damien, Ken Takata)
Files:      src/if_perl.xs

Patch 7.4.1849
Problem:    Still trying to read from <A HREF="channel.html#channel">channel</A> that is going to be closed.
            (Ramel Eshed)
Solution:   Check if ch_to_be_closed is set.
Files:      src/channel.c

Patch 7.4.1850
Problem:    <A HREF="gui.html#GUI">GUI</A> freezes when using a <A HREF="channel.html#job">job</A>. (Shougo Matsu)
Solution:   Unregister the <A HREF="channel.html#channel">channel</A> when there is an input error.
Files:      src/channel.c

Patch 7.4.1851
Problem:    test_syn_attr fails when using the <A HREF="gui.html#GUI">GUI</A>. (Dominique Pelle)
Solution:   Escape the font name properly.
Files:      src/testdir/test_syn_attr.vim

Patch 7.4.1852
Problem:    <A HREF="os_unix.html#Unix">Unix</A>: Cannot run all tests with the <A HREF="gui.html#GUI">GUI</A>.
Solution:   Add the &quot;testgui&quot; target.
Files:      src/Makefile, src/testdir/Makefile

Patch 7.4.1853
Problem:    Crash when <A HREF="channel.html#job">job</A> and <A HREF="channel.html#channel">channel</A> are in the same <A HREF="eval.html#dict">dict</A> while using
            partials. (Luc Hermitte)
Solution:   Do not decrement the <A HREF="channel.html#channel">channel</A> reference <A HREF="intro.html#count">count</A> too early.
Files:      src/channel.c

Patch 7.4.1854
Problem:    When setting <A HREF="options.html#'termguicolors'">'termguicolors'</A> the Ignore highlighting doesn't work.
            (Charles Campbell)
Solution:   Handle the color names &quot;fg&quot; and &quot;bg&quot; when the <A HREF="gui.html#GUI">GUI</A> isn't running
            and no colors are specified, fall back to black and white.
Files:      src/syntax.c

Patch 7.4.1855
Problem:    Valgrind reports memory leak for <A HREF="channel.html#job">job</A> that is not freed.
Solution:   Free all jobs on exit.  Add test for failing <A HREF="channel.html#job">job</A>.
Files:      src/channel.c, src/misc2.c, src/proto/channel.pro,
            src/testdir/test_partial.vim

Patch 7.4.1856 (after 7.4.1855)
Problem:    failing <A HREF="channel.html#job">job</A> test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Expect &quot;fail&quot; status instead of &quot;dead&quot;.
Files:      src/testdir/test_partial.vim

Patch 7.4.1857
Problem:    When a <A HREF="channel.html#channel">channel</A> appends to a buffer that is <A HREF="options.html#'nomodifiable'">'nomodifiable'</A> there is
            an error but appending is done anyway.
Solution:   Add the <A HREF="options.html#'modifiable'">'modifiable'</A> option.  Refuse to write to a <A HREF="options.html#'nomodifiable'">'nomodifiable'</A>
            when the value is 1.
Files:      src/structs.h, src/channel.c, src/testdir/test_channel.vim,
            runtime/doc/channel.txt

Patch 7.4.1858
Problem:    When a <A HREF="channel.html#channel">channel</A> writes to a buffer <A HREF="motion.html#it">it</A> doesn't find a buffer by the
            short name but re-uses <A HREF="motion.html#it">it</A> anyway.
Solution:   Find buffer also by the short name.
Files:      src/channel.c, src/buffer.c, src/vim.h

Patch 7.4.1859
Problem:    Cannot use a function reference for &quot;exit_cb&quot;.
Solution:   Use get_callback(). (Yegappan Lakshmanan)
Files:      src/channel.c, src/structs.h

Patch 7.4.1860
Problem:    Using a <A HREF="builtin.html#partial">partial</A> for <A HREF="builtin.html#timer_start()">timer_start()</A> may cause a crash.
Solution:   Set the copyID in <A HREF="builtin.html#timer">timer</A> <A HREF="index.html#objects">objects</A>. (Ozaki Kiichi)
Files:      src/testdir/test_timers.vim, src/eval.c, src/ex_cmds2.c,
            src/proto/ex_cmds2.pro

Patch 7.4.1861
Problem:    Compiler warnings with 64 bit compiler.
Solution:   Change int to size_t. (Mike Williams)
Files:      src/ex_cmds2.c

Patch 7.4.1862
Problem:    <A HREF="builtin.html#string()">string()</A> with repeated argument does not give a result usable by
            <A HREF="builtin.html#eval()">eval()</A>.
Solution:   Refactor echo_string and tv2string(), moving the common part to
            echo_string_core(). (Ken Takata)
Files:      src/eval.c, src/testdir/test_viml.vim, src/testdir/test86.ok,
            src/testdir/test87.ok

Patch 7.4.1863
Problem:    Compiler warnings on Win64.
Solution:   Adjust types, add type casts. (Ken Takata)
Files:      src/if_mzsch.c, src/if_perl.xs, src/if_ruby.c, src/version.c

Patch 7.4.1864
Problem:    <A HREF="if_pyth.html#Python">Python</A>: encoding error with <A HREF="if_pyth.html#Python">Python</A> 2.
Solution:   Use &quot;getcwdu&quot; instead of &quot;getcwd&quot;. (Ken Takata)
Files:      src/if_py_both.h

Patch 7.4.1865
Problem:    Memory leaks in test49. (Dominique Pelle)
Solution:   Use NULL instead of an empty <A HREF="eval.html#string">string</A>.
Files:      src/eval.c

Patch 7.4.1866
Problem:    Invalid memory access when <A HREF="starting.html#exiting">exiting</A> with EXITFREE defined.
            (Dominique Pelle)
Solution:   Set &quot;really_exiting&quot; and skip error <A HREF="message.html#messages">messages</A>.
Files:      src/misc2.c, src/eval.c

Patch 7.4.1867
Problem:    Memory leak in test_matchstrpos.
Solution:   Free the <A HREF="eval.html#string">string</A> before overwriting. (Yegappan Lakshmanan)
Files:      src/eval.c

Patch 7.4.1868
Problem:    Setting really_exiting causes memory leaks to be reported.
Solution:   Add the in_free_all_mem flag.
Files:      src/globals.h, src/misc2.c, src/eval.c

Patch 7.4.1869
Problem:    Can't build with old version of <A HREF="if_perl.html#Perl">Perl</A>.
Solution:   Define PERLIO_FUNCS_DECL. (Tom <A HREF="motion.html#G">G</A>. Christensen)
Files:      src/if_perl.xs

Patch 7.4.1870 (after 7.4.1863)
Problem:    One more Win64 compiler warning.
Solution:   Change declared argument type. (Ken Takata)
Files:      src/if_mzsch.c

Patch 7.4.1871
Problem:    Appending to the <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A> while the <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="windows.html#window">window</A> is open
            is very slow.
Solution:   Do not delete all the lines, only append the new ones.  Avoid
            using a <A HREF="windows.html#window">window</A> while updating the <A HREF="eval.html#list">list</A>. (closes #841)
Files:      src/quickfix.c

Patch 7.4.1872
Problem:    Still build problem with old version of <A HREF="if_perl.html#Perl">Perl</A>.
Solution:   Also define SvREFCNT_inc_void_NN if needed. (Tom <A HREF="motion.html#G">G</A>. Christensen)
Files:      src/if_perl.xs

Patch 7.4.1873
Problem:    When a callback adds a <A HREF="builtin.html#timer">timer</A> the <A HREF="gui.html#GUI">GUI</A> doesn't use <A HREF="motion.html#it">it</A> until later.
            (Ramel Eshed)
Solution:   Return early if a callback adds a <A HREF="builtin.html#timer">timer</A>.
Files:      src/ex_cmds2.c, src/gui_gtk_x11.c, src/gui_w32.c, src/gui_x11.c,
            src/globals.h

Patch 7.4.1874
Problem:    Unused variable in <A HREF="os_win32.html#Win32">Win32</A> code.
Solution:   Remove <A HREF="motion.html#it">it</A>. (Mike Williams)
Files:      src/gui_w32.c

Patch 7.4.1875
Problem:    Comparing <A HREF="eval.html#functions">functions</A> and partials doesn't work well.
Solution:   Add tests. (Nikolai Pavlov)  Compare the <A HREF="eval.html#dict">dict</A> and arguments in the
            <A HREF="builtin.html#partial">partial</A>. (closes #813)
Files:      src/eval.c, src/testdir/test_partial.vim

Patch 7.4.1876
Problem:    Typing &quot;<A HREF="motion.html#k">k</A>&quot; at the <A HREF="message.html#hit-enter">hit-enter</A> prompt has no effect.
Solution:   Don't assume recursive use of the prompt if a character was typed.
            (Hirohito Higashi)
Files:      src/message.c

Patch 7.4.1877
Problem:    No test for invoking &quot;<A HREF="channel.html#close_cb">close_cb</A>&quot; when <A HREF="editing.html#writing">writing</A> to a buffer.
Solution:   Add using <A HREF="channel.html#close_cb">close_cb</A> to a test <A HREF="change.html#case">case</A>.
Files:      src/testdir/test_channel.vim

Patch 7.4.1878
Problem:    Whether a <A HREF="channel.html#job">job</A> has exited isn't detected until a character is
            typed.  After calling exit_cb the cursor is in the wrong place.
Solution:   Don't wait forever for a character to be typed when there is a
            pending <A HREF="channel.html#job">job</A>.  Update the screen if needed after calling exit_cb.
Files:      src/os_unix.c, src/channel.c, src/proto/channel.pro

Patch 7.4.1879 (after 7.4.1877)
Problem:    <A HREF="eval.html#Channel">Channel</A> test is flaky.
Solution:   Wait for <A HREF="channel.html#close_cb">close_cb</A> to be invoked.
Files:      src/testdir/test_channel.vim

Patch 7.4.1880
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> console build defaults to not having <A HREF="various.html#+channel">+channel</A>.
Solution:   Include the <A HREF="channel.html#channel">channel</A> feature if building with huge features.
Files:      src/Make_mvc.mak

Patch 7.4.1881
Problem:    Appending to a long <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A> is slow.
Solution:   Add qf_last.
Files:      src/quickfix.c

Patch 7.4.1882
Problem:    Check for line break at end of line wrong. (Dominique Pelle)
Solution:   Correct the logic.
Files:      src/quickfix.c

Patch 7.4.1883
Problem:    Cppcheck found 2 incorrect printf formats.
Solution:   Use &#37;ld and &#37;lx. (Dominique Pelle)
Files:      src/VisVim/Commands.cpp, src/gui_mac.c

Patch 7.4.1884
Problem:    Updating marks in a <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A> is very slow when the <A HREF="eval.html#list">list</A> is
            long.
Solution:   Only update marks if the buffer has a <A HREF="quickfix.html#quickfix">quickfix</A> entry.
Files:      src/structs.h, src/quickfix.c

Patch 7.4.1885
Problem:    MinGW console build defaults to not having <A HREF="various.html#+channel">+channel</A>.
Solution:   Include the <A HREF="channel.html#channel">channel</A> feature if building with huge features. (Ken
            Takata)
Files:      src/Make_cyg_ming.mak

Patch 7.4.1886
Problem:    When waiting for a character is interrupted by receiving <A HREF="channel.html#channel">channel</A>
            data and the first character of a <A HREF="map.html#mapping">mapping</A> was typed, the <A HREF="map.html#mapping">mapping</A>
            times out. (Ramel Eshed)
Solution:   When dealing with <A HREF="channel.html#channel">channel</A> data don't return from mch_inchar().
Files:      src/getchar.c, src/proto/getchar.pro, src/os_unix.c

Patch 7.4.1887
Problem:    When receiving <A HREF="channel.html#channel">channel</A> data <A HREF="options.html#'updatetime'">'updatetime'</A> is not respected.
Solution:   Recompute the waiting time after being interrupted.
Files:      src/os_unix.c

Patch 7.4.1888
Problem:    Wrong computation of remaining wait time in RealWaitForChar()
Solution:   Remember the original waiting time.
Files:      src/os_unix.c

Patch 7.4.1889
Problem:    When umask is set to 0177 Vim can't create temp files. (Lcd)
Solution:   Also correct umask when using mkdtemp().
Files:      src/fileio.c

Patch 7.4.1890
Problem:    <A HREF="gui.html#GUI">GUI</A>: When <A HREF="channel.html#channel">channel</A> data is received the cursor blinking is
            interrupted.  (Ramel Eshed)
Solution:   Don't update the cursor when <A HREF="motion.html#it">it</A> is blinking.
Files:      src/screen.c, src/gui_gtk_x11.c, src/proto/gui_gtk_x11.pro,
            src/gui_mac.c, src/proto/gui_mac.pro, src/gui_photon.c,
            src/proto/gui_photon.pro, src/gui_w32.c, src/proto/gui_w32.pro,
            src/gui_x11.c, src/proto/gui_x11.pro

Patch 7.4.1891
Problem:    <A HREF="eval.html#Channel">Channel</A> reading very long lines is slow.
Solution:   Collapse multiple <A HREF="windows.html#buffers">buffers</A> until a NL is found.
Files:      src/channel.c, src/netbeans.c, src/proto/channel.pro,
            src/structs.h

Patch 7.4.1892
Problem:    balloon <A HREF="eval.html#eval">eval</A> only gets the <A HREF="windows.html#window">window</A> number, not the ID.
Solution:   Add <A HREF="eval.html#v:beval_winid">v:beval_winid</A>.
Files:      src/eval.c, src/gui_beval.c, src/vim.h

Patch 7.4.1893
Problem:    Cannot easily get the <A HREF="windows.html#window">window</A> ID for a buffer.
Solution:   Add <A HREF="builtin.html#bufwinid()">bufwinid()</A>.
Files:      src/eval.c, runtime/doc/eval.txt

Patch 7.4.1894
Problem:    Cannot get the <A HREF="windows.html#window">window</A> ID for a mouse click.
Solution:   Add <A HREF="eval.html#v:mouse_winid">v:mouse_winid</A>.
Files:      src/eval.c, src/vim.h, runtime/doc/eval.txt

Patch 7.4.1895
Problem:    Cannot use a <A HREF="windows.html#window">window</A> ID where a <A HREF="windows.html#window">window</A> number is expected.
Solution:   Add LOWEST_WIN_ID, so that the <A HREF="windows.html#window">window</A> ID can be used where a
            number is expected.
Files:      src/window.c, src/eval.c, src/vim.h, runtime/doc/eval.txt,
            src/testdir/test_window_id.vim

Patch 7.4.1896
Problem:    Invoking mark_adjust() when adding a new line below the last line
            is pointless.
Solution:   Skip calling mark_adjust() when appending below the last line.
Files:      src/misc1.c, src/ops.c

Patch 7.4.1897
Problem:    Various typos, long lines and style mistakes.
Solution:   Fix the typos, wrap lines, improve style.
Files:      src/buffer.c, src/ex_docmd.c, src/getchar.c, src/option.c,
            src/main.aap, src/testdir/README.txt,
            src/testdir/test_reltime.vim, src/testdir/test_tagjump.vim,
            src/INSTALL, src/config.aap.in, src/if_mzsch.c

Patch 7.4.1898
Problem:    <A HREF="autocmd.html#User">User</A> commands don't support modifiers.
Solution:   Add the <A HREF="map.html#&lt;mods&gt;">&lt;mods&gt;</A> item. (Yegappan Lakshmanan, closes #829)
Files:      runtime/doc/map.txt, src/ex_docmd.c, src/testdir/Make_all.mak,
            src/testdir/test_usercommands.vim

Patch 7.4.1899
Problem:    <A HREF="gui_x11.html#GTK">GTK</A> 3: cursor blinking doesn't work well.
Solution:   Instead of gui_gtk_window_clear() use gui_mch_clear_block().
            (Kazunobu Kuriyama)
Files:      src/gui_gtk_x11.c

Patch 7.4.1900
Problem:    Using <A HREF="tagsrch.html#CTRL-]">CTRL-]</A> in the help on &quot;{address}.&quot; doesn't work.
Solution:   Recognize an item in <A HREF="intro.html#{}">{}</A>. (Hirohito Higashi, closes #814)
Files:      src/ex_cmds.c, src/testdir/test_help_tagjump.vim

Patch 7.4.1901
Problem:    <A HREF="os_win32.html#Win32">Win32</A>: the &quot;Disabled&quot; menu items would appear enabled.
Solution:   Use submenu_id if there is a parent. (Shane Harper, closes #834)
Files:      src/gui_w32.c

Patch 7.4.1902
Problem:    No test for collapsing <A HREF="windows.html#buffers">buffers</A> for a <A HREF="channel.html#channel">channel</A>.  Some text is lost.
Solution:   Add a simple test.  Set rq_buflen correctly.
Files:      src/channel.c, src/testdir/test_channel.vim,
            src/testdir/test_channel_pipe.py

Patch 7.4.1903
Problem:    When <A HREF="editing.html#writing">writing</A> <A HREF="starting.html#viminfo">viminfo</A> merging current <A HREF="cmdline.html#history">history</A> with <A HREF="cmdline.html#history">history</A> in
            <A HREF="starting.html#viminfo">viminfo</A> may drop recent <A HREF="cmdline.html#history">history</A> entries.
Solution:   Add new format for <A HREF="starting.html#viminfo">viminfo</A> lines, use <A HREF="motion.html#it">it</A> for <A HREF="cmdline.html#history">history</A> entries.  Use
            a <A HREF="editing.html#timestamp">timestamp</A> for ordering the entries. Add <A HREF="testing.html#test_settime()">test_settime()</A>.
            Add the <A HREF="starting.html#viminfo">viminfo</A> version.  Does not <A HREF="diff.html#do">do</A> merging on <A HREF="editing.html#timestamp">timestamp</A> yet.
Files:      src/eval.c, src/ex_getln.c, src/ex_cmds.c, src/structs.h,
            src/globals.h, src/proto/ex_cmds.pro, src/proto/ex_getln.pro,
            src/testdir/test_viminfo.vim

Patch 7.4.1904 (after 7.4.1903)
Problem:    Build fails.
Solution:   Add missing changes.
Files:      src/vim.h

Patch 7.4.1905 (after 7.4.1903)
Problem:    Some compilers can't handle a double semicolon.
Solution:   Remove one semicolon.
Files:      src/ex_cmds.c

Patch 7.4.1906
Problem:    Collapsing <A HREF="channel.html#channel">channel</A> <A HREF="windows.html#buffers">buffers</A> and searching for NL does not work
            properly. (Xavier de Gaye, Ramel Eshed)
Solution:   Do not assume the buffer contains a NUL or not.  Change NUL bytes
            to NL to avoid the <A HREF="eval.html#string">string</A> is truncated.
Files:      src/channel.c, src/netbeans.c, src/proto/channel.pro

Patch 7.4.1907
Problem:    Warnings from 64 bit compiler.
Solution:   Change type to size_t. (Mike Williams)
Files:      src/ex_cmds.c

Patch 7.4.1908
Problem:    Netbeans uses uninitialized pointer and freed memory.
Solution:   Set &quot;buffer&quot; at the right place (hint by Ken Takata)
Files:      src/netbeans.c

Patch 7.4.1909
Problem:    Doubled semicolons.
Solution:   Reduce to one. (Dominique Pelle)
Files:      src/dosinst.c, src/fold.c, src/gui_gtk_x11.c, src/gui_w32.c,
            src/main.c, src/misc2.c

Patch 7.4.1910
Problem:    Tests using external command to delete directory.
Solution:   Use <A HREF="builtin.html#delete()">delete()</A>.
Files:      src/testdir/test17.in, src/testdir/test73.in,
            src/testdir/test_getcwd.in

Patch 7.4.1911
Problem:    Recent <A HREF="cmdline.html#history">history</A> lines may be lost when <A HREF="starting.html#exiting">exiting</A> Vim.
Solution:   Merge <A HREF="cmdline.html#history">history</A> using the <A HREF="editing.html#timestamp">timestamp</A>.
Files:      src/ex_getln.c, src/ex_cmds.c, src/vim.h, src/proto/ex_getln.pro,
            src/testdir/test_viminfo.vim

Patch 7.4.1912
Problem:    No test for using <A HREF="builtin.html#setqflist()">setqflist()</A> on an older <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A>.
Solution:   Add a couple of tests.
Files:      src/testdir/test_quickfix.vim

Patch 7.4.1913
Problem:    When &quot;<A HREF="autocmd.html#:doautocmd">:doautocmd</A>&quot; is used modelines are used even when no
            <A HREF="autocmd.html#autocommands">autocommands</A> were executed. (Daniel Hahler)
Solution:   Skip processing modelines. (closes #854)
Files:      src/fileio.c, src/ex_cmds.c, src/ex_docmd.c, src/proto/fileio.pro

Patch 7.4.1914
Problem:    Executing <A HREF="autocmd.html#autocommands">autocommands</A> while using the signal stack has a high
            chance of crashing Vim.
Solution:   Don't invoke <A HREF="autocmd.html#autocommands">autocommands</A> when on the signal stack.
Files:      src/os_unix.c

Patch 7.4.1915
Problem:    The effect of the PopupMenu <A HREF="autocmd.html#autocommand">autocommand</A> isn't directly visible.
Solution:   Call gui_update_menus() before displaying the <A HREF="popup.html#popup">popup</A> menu. (Shane
            Harper, closes #855)
Files:      src/menu.c

Patch 7.4.1916 (after 7.4.1906)
Problem:    No proper test for what 7.4.1906 fixes.
Solution:   Add a test for reading many lines.
Files:      src/testdir/test_channel.vim

Patch 7.4.1917
Problem:    History lines read from <A HREF="starting.html#viminfo">viminfo</A> in different encoding than when
            <A HREF="editing.html#writing">writing</A> are not converted.
Solution:   Convert the <A HREF="cmdline.html#history">history</A> lines.
Files:      src/ex_cmds.c, src/testdir/test_viminfo.vim

Patch 7.4.1918
Problem:    Not enough <A HREF="testing.html#testing">testing</A> for parsing <A HREF="starting.html#viminfo">viminfo</A> lines.
Solution:   Add test with <A HREF="starting.html#viminfo">viminfo</A> lines in bad <A HREF="syntax.html#syntax">syntax</A>.  Fix memory leak.
Files:      src/ex_cmds.c, src/ex_getln.c, src/testdir/test_viminfo.vim

Patch 7.4.1919
Problem:    Register contents is not merged when <A HREF="editing.html#writing">writing</A> <A HREF="starting.html#viminfo">viminfo</A>.
Solution:   Use <A HREF="editing.html#timestamps">timestamps</A> for <A HREF="sponsor.html#register">register</A> contents.
Files:      src/ops.c, src/ex_getln.c, src/ex_cmds.c, src/proto/ex_cmds.pro,
            src/proto/ex_getln.pro, src/proto/ops.pro, src/vim.h

Patch 7.4.1920 (after 7.4.1919)
Problem:    Missing test changes.
Solution:   Update <A HREF="starting.html#viminfo">viminfo</A> test.
Files:      src/testdir/test_viminfo.vim

Patch 7.4.1921 (after 7.4.1919)
Problem:    vim_time() not included when needed.
Solution:   Adjust #ifdef.
Files:      src/ex_cmds.c

Patch 7.4.1922
Problem:    <A HREF="if_ruby.html#Ruby">Ruby</A> 2.4.0 unifies Fixnum and Bignum into <A HREF="eval.html#Integer">Integer</A>.
Solution:   Use rb_cInteger. (Weiyong Mao)
Files:      src/if_ruby.c

Patch 7.4.1923
Problem:    Command line editing is not tested much.
Solution:   Add tests for expanding the file name and <A HREF="options.html#'wildmenu'">'wildmenu'</A>.
Files:      src/testdir/test_cmdline.vim, src/testdir/Make_all.mak

Patch 7.4.1924
Problem:    Missing &quot;void&quot; for <A HREF="eval.html#functions">functions</A> without argument.
Solution:   Add &quot;void&quot;. (Hirohito Higashi)
Files:      src/channel.c, src/edit.c, src/ex_cmds2.c, src/ops.c, src/screen.c

Patch 7.4.1925
Problem:    Viminfo does not <A HREF="diff.html#merge">merge</A> file marks properly.
Solution:   Use a <A HREF="editing.html#timestamp">timestamp</A>.  Add the <A HREF="motion.html#:clearjumps">:clearjumps</A> command.
Files:      src/mark.c, src/ex_cmds.c, src/ex_docmd.c, src/proto/mark.pro,
            src/structs.h, src/vim.h, src/ex_cmds.h,
            src/testdir/test_viminfo.vim

Patch 7.4.1926
Problem:    Possible crash with many <A HREF="cmdline.html#history">history</A> items.
Solution:   Avoid the index going past the last item.
Files:      src/ex_getln.c

Patch 7.4.1927
Problem:    Compiler warning for signed/unsigned.
Solution:   Add type cast.
Files:      src/if_mzsch.c

Patch 7.4.1928
Problem:    Overwriting pointer argument.
Solution:   Assign to what <A HREF="motion.html#it">it</A> points to. (Dominique Pelle)
Files:      src/fileio.c

Patch 7.4.1929
Problem:    Inconsistent indenting and weird name.
Solution:   Fix indent, make name all upper <A HREF="change.html#case">case</A>. (Ken Takata)
Files:      src/if_ruby.c

Patch 7.4.1930
Problem:    Can't build without <A HREF="various.html#+spell">+spell</A> but with <A HREF="various.html#+quickfix">+quickfix</A>. (Charles)
Solution:   Add better #ifdef around ml_append_buf(). (closes #864)
Files:      src/memline.c

Patch 7.4.1931
Problem:    Using both old and new style file <A HREF="motion.html#mark">mark</A> lines from <A HREF="starting.html#viminfo">viminfo</A>.
Solution:   Skip the old style lines if the <A HREF="starting.html#viminfo">viminfo</A> file was written with a
            Vim version that supports the new style.
Files:      src/ex_cmds.c

Patch 7.4.1932
Problem:    When <A HREF="editing.html#writing">writing</A> <A HREF="starting.html#viminfo">viminfo</A> the <A HREF="motion.html#jumplist">jumplist</A> is not merged with the one in
            the <A HREF="starting.html#viminfo">viminfo</A> file.
Solution:   Merge based on <A HREF="editing.html#timestamp">timestamp</A>.
Files:      src/mark.c, src/testdir/test_viminfo.vim

Patch 7.4.1933
Problem:    Compiler warning about uninitialized variable. (Yegappan)
Solution:   Give <A HREF="motion.html#it">it</A> a dummy value.
Files:      src/ex_getln.c

Patch 7.4.1934
Problem:    New style tests not executed with MinGW compiler.
Solution:   Add new style test support. (Yegappan Lakshmanan)
Files:      src/testdir/Make_ming.mak

Patch 7.4.1935
Problem:    When using the <A HREF="gui.html#GUI">GUI</A> search/replace a second match right after the
            replacement is skipped.
Solution:   Add the SEARCH_START flag. (Mleddy)
Files:      src/gui.c

Patch 7.4.1936
Problem:    Off-by-one error in bounds check. (Coverity)
Solution:   Check <A HREF="sponsor.html#register">register</A> number properly.
Files:      src/ops.c

Patch 7.4.1937
Problem:    No test for directory stack in <A HREF="quickfix.html#quickfix">quickfix</A>.
Solution:   Add a test. (Yegappan Lakshmanan)
Files:      src/testdir/test_quickfix.vim

Patch 7.4.1938
Problem:    When <A HREF="editing.html#writing">writing</A> <A HREF="starting.html#viminfo">viminfo</A> numbered marks were duplicated.
Solution:   Check for duplicates between current numbered marks and the ones
            read from <A HREF="starting.html#viminfo">viminfo</A>.
Files:      src/mark.c

Patch 7.4.1939
Problem:    Memory access error when reading <A HREF="starting.html#viminfo">viminfo</A>. (Dominique Pelle)
Solution:   Correct index in <A HREF="motion.html#jumplist">jumplist</A> when at the end.
Files:      src/mark.c, src/testdir/test_viminfo.vim

Patch 7.4.1940
Problem:    &quot;<A HREF="pattern.html#gd">gd</A>&quot; hangs in some situations. (Eric Biggers)
Solution:   Remove the SEARCH_START flag when looping.  Add a test.
Files:      src/normal.c, src/testdir/test_goto.vim

Patch 7.4.1941
Problem:    Not all <A HREF="quickfix.html#quickfix">quickfix</A> tests are also done with the location lists.
Solution:   Test more <A HREF="quickfix.html#quickfix">quickfix</A> code.  Use user commands instead of &quot;exe&quot;.
            (Yegappan Lakshmanan)
Files:      src/testdir/test_quickfix.vim

Patch 7.4.1942
Problem:    Background is not drawn properly when <A HREF="options.html#'termguicolors'">'termguicolors'</A> is set.
Solution:   Check cterm_normal_bg_color. (Jacob Niehus, closes #805)
Files:      src/screen.c

Patch 7.4.1943
Problem:    Coverity warns for unreachable code.
Solution:   Remove the code that won't <A HREF="diff.html#do">do</A> anything.
Files:      src/mark.c

Patch 7.4.1944
Problem:    <A HREF="os_win32.html#Win32">Win32</A>: Cannot compile with XPM feature using VC2015
Solution:   Add XPM libraries compiled with VC2015, and enable to build
            gvim.exe which supports XPM using VC2015. (Ken Takata)
Files:      src/Make_mvc.mak, src/xpm/x64/lib-vc14/libXpm.lib,
            src/xpm/x86/lib-vc14/libXpm.lib

Patch 7.4.1945
Problem:    The Man <A HREF="usr_05.html#plugin">plugin</A> doesn't work that well.
Solution:   Use &quot;g:ft_man_open_mode&quot; to be able open man pages in vert split
            or separate <A HREF="intro.html#tab">tab</A>. Set nomodifiable for buffer with man content. Add
            a test. (Andrey Starodubtsev, closes #873)
Files:      runtime/ftplugin/man.vim, src/testdir/test_man.vim,
            src/testdir/Make_all.mak

Patch 7.4.1946 (after 7.4.1944)
Problem:    File <A HREF="eval.html#list">list</A> does not include new XPM libraries.
Solution:   Add the file <A HREF="eval.html#list">list</A> entries.
Files:      Filelist

Patch 7.4.1947
Problem:    Viminfo continuation line with wrong length isn't skipped. (Marius
            Gedminas)
Solution:   Skip a line when encountering an error, but not two lines.
Files:      src/ex_cmds.c

Patch 7.4.1948
Problem:    Using Ctrl-A with double-byte encoding may result in garbled text.
Solution:   Skip to the start of a character. (Hirohito Higashi)
Files:      src/ops.c

Patch 7.4.1949
Problem:    Minor problems with the <A HREF="quickfix.html#quickfix">quickfix</A> code.
Solution:   Fix the problems. (Yegappan Lakshmanan)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 7.4.1950
Problem:    <A HREF="quickfix.html#Quickfix">Quickfix</A> long lines test not executed for buffer.
Solution:   Call the function to test long lines. (Yegappan Lakshmanan)
Files:      src/testdir/test_quickfix.vim

Patch 7.4.1951
Problem:    <A HREF="if_ruby.html#Ruby">Ruby</A> test is old style.
Solution:   Convert to a new style test. (Ken Takata)
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/test_ruby.in,
            src/testdir/test_ruby.ok, src/testdir/test_ruby.vim

Patch 7.4.1952
Problem:    <A HREF="if_cscop.html#Cscope">Cscope</A> interface does not support finding assignments.
Solution:   Add the &quot;<A HREF="insert.html#a">a</A>&quot; command. (ppettina, closes #882)
Files:      runtime/doc/if_cscop.txt, src/if_cscope.c

Patch 7.4.1953
Problem:    Not all parts of the <A HREF="quickfix.html#quickfix">quickfix</A> code are tested.
Solution:   Add more tests. (Yegappan Lakshmanan)
Files:      src/testdir/samples/quickfix.txt,
            src/testdir/test_quickfix.vim

Patch 7.4.1954 (after 7.4.1948)
Problem:    No test for what 7.4.1948 fixes.
Solution:   Add a test. (Hirohito Higashi, closes #880)
Files:      src/Makefile, src/testdir/Make_all.mak,
            src/testdir/test_increment_dbcs.vim

Patch 7.4.1955
Problem:    Using 32-bit <A HREF="if_perl.html#Perl">Perl</A> with 64-bit time_t causes memory corruption.
            (Christian Brabandt)
Solution:   Use time_T instead of time_t for global <A HREF="eval.html#variables">variables</A>. (Ken Takata)
Files:      src/ex_cmds.c, src/globals.h, src/misc2.c, src/proto/ex_cmds.pro,
            src/proto/misc2.pro, src/structs.h, src/vim.h

Patch 7.4.1956
Problem:    When using <A HREF="index.html#CTRL-W">CTRL-W</A> <A HREF="motion.html#f">f</A> and pressing &quot;<A HREF="repeat.html#q">q</A>&quot; at the <A HREF="usr_11.html#ATTENTION">ATTENTION</A> <A HREF="gui_w32.html#dialog">dialog</A> the
            newly opened <A HREF="windows.html#window">window</A> is not closed.
Solution:   Close the <A HREF="windows.html#window">window</A> and go back to the original one. (Norio Takagi,
            Hirohito Higashi)
Files:      src/window.c, src/testdir/test_window_cmd.vim

Patch 7.4.1957
Problem:    <A HREF="if_perl.html#Perl">Perl</A> interface has obsolete workaround.
Solution:   Remove the workaround added by 7.3.623. (Ken Takata)
Files:      src/if_perl.xs

Patch 7.4.1958
Problem:    <A HREF="if_perl.html#Perl">Perl</A> interface preprocessor statements not nicely indented.
Solution:   Improve the indenting. (Ken Takata)
Files:      src/if_perl.xs

Patch 7.4.1959
Problem:    Crash when running test_channel.vim on Windows.
Solution:   Check for NULL pointer result from FormatMessage(). (Christian
            Brabandt)
Files:      src/channel.c

Patch 7.4.1960
Problem:    <A HREF="mbyte.html#Unicode">Unicode</A> standard 9 was released.
Solution:   Update the character property tables. (Christian Brabandt)
Files:      src/mbyte.c

Patch 7.4.1961
Problem:    When <A HREF="options.html#'insertmode'">'insertmode'</A> is reset while doing completion the <A HREF="popup.html#popup">popup</A> menu
            remains even though Vim is in <A HREF="intro.html#Normal">Normal</A> mode.
Solution:   Ignore stop_insert_mode when the <A HREF="popup.html#popup">popup</A> menu is visible.  Don't set
            stop_insert_mode when <A HREF="options.html#'insertmode'">'insertmode'</A> was already off. (Christian
            Brabandt)
Files:      src/edit.c, src/option.c, src/Makefile, src/testdir/test_alot.vim,
            src/testdir/test_popup.vim

Patch 7.4.1962
Problem:    Two test files for increment/decrement.
Solution:   Move the old style test into the new style test. (Hirohito
            Higashi, closes #881)
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/main.aap,
            src/testdir/test35.in, src/testdir/test35.ok,
            src/testdir/test_increment.vim

Patch 7.4.1963
Problem:    Running <A HREF="os_win32.html#Win32">Win32</A> Vim in mintty does not work.
Solution:   Detect mintty and give a helpful error message. (Ken Takata)
Files:      src/Make_cyg_ming.mak, src/Make_mvc.mak, src/iscygpty.c,
            src/iscygpty.h, src/main.c, Filelist

Patch 7.4.1964
Problem:    The <A HREF="quickfix.html#quickfix">quickfix</A> init function is too big.
Solution:   Factor out parsing <A HREF="options.html#'errorformat'">'errorformat'</A> to a separate function. (Yegappan
            Lakshmanan)
Files:      src/quickfix.c

Patch 7.4.1965
Problem:    When using a <A HREF="channel.html#job">job</A> in raw mode to append to a buffer garbage
            characters are added.
Solution:   Do not replace the trailing NUL with a NL. (Ozaki Kiichi)
Files:      src/channel.c, src/testdir/test_channel.vim

Patch 7.4.1966
Problem:    Coverity reports a resource leak.
Solution:   Close &quot;fd&quot; also when bailing out.
Files:      src/quickfix.c

Patch 7.4.1967
Problem:    Falling back from <A HREF="pattern.html#NFA">NFA</A> to old <A HREF="pattern.html#regexp">regexp</A> engine does not work properly.
            (fritzophrenic)
Solution:   Do not restore nfa_match. (Christian Brabandt, closes #867)
Files:      src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.4.1968
Problem:    Invalid memory access with &quot;\&lt;C-&quot;&gt;.
Solution:   Do not recognize this <A HREF="motion.html#as">as</A> a special character. (Dominique Pelle)
Files:      src/misc2.c, src/testdir/test_expr.vim

Patch 7.4.1969
Problem:    When the <A HREF="netbeans.html#netbeans">netbeans</A> <A HREF="channel.html#channel">channel</A> is closed consuming the buffer may cause
            a crash.
Solution:   Check for nb_channel not to be NULL. (Xavier de Gaye)
Files:      src/netbeans.c

Patch 7.4.1970
Problem:    Using &quot;<A HREF="insert.html#:insert">:insert</A>&quot; in an empty buffer sets the jump <A HREF="motion.html#mark">mark</A>. (Ingo
            Karkat)
Solution:   Don't adjust marks when <A HREF="change.html#replacing">replacing</A> the empty line in an empty
            buffer. (closes #892)
Files:      src/ex_cmds.c, src/testdir/test_jumps.vim,
            src/testdir/test_alot.vim

Patch 7.4.1971
Problem:    It is not <A HREF="starting.html#easy">easy</A> to see unrecognized error lines below the current
            error position.
Solution:   Add &quot;<A HREF="quickfix.html#:clist">:clist</A> +count&quot;.
Files:      src/quickfix.c, runtime/doc/quickfix.txt

Patch 7.4.1972
Problem:    On Solaris select() does not work <A HREF="motion.html#as">as</A> expected when there is
            typeahead.
Solution:   Add ICANON when sleeping. (Ozaki Kiichi)
Files:      src/os_unix.c

Patch 7.4.1973
Problem:    On <A HREF="os_win32.html#MS-Windows">MS-Windows</A> the package directory may be added at the end
            because of forward/backward slash differences. (Matthew
            Desjardins)
Solution:   Ignore slash differences.
Files:      src/ex_cmds2.c

Patch 7.4.1974
Problem:    <A HREF="gui.html#GUI">GUI</A> has a problem with some termcodes.
Solution:   Handle negative numbers. (Kazunobu Kuriyama)
Files:      src/gui.c

Patch 7.4.1975
Problem:    On <A HREF="os_win32.html#MS-Windows">MS-Windows</A> large files (&gt; 2Gbyte) cause problems.
Solution:   Use &quot;off_T&quot; instead of &quot;off_t&quot;.  Use &quot;stat_T&quot; instead of &quot;struct
            stat&quot;.  Use 64 bit system <A HREF="eval.html#functions">functions</A> if available.  (Ken Takata)
Files:      src/Makefile, src/buffer.c, src/diff.c, src/eval.c, src/ex_cmds.c,
            src/ex_cmds2.c, src/fileio.c, src/gui.c, src/gui_at_fs.c,
            src/if_cscope.c, src/main.c, src/memfile.c, src/memline.c,
            src/misc1.c, src/misc2.c, src/netbeans.c, src/os_mswin.c,
            src/os_win32.c, src/proto/fileio.pro, src/proto/memline.pro,
            src/proto/os_mswin.pro, src/pty.c, src/quickfix.c, src/spell.c,
            src/structs.h, src/tag.c, src/testdir/Make_all.mak,
            src/testdir/test_largefile.vim, src/testdir/test_stat.vim,
            src/undo.c, src/vim.h

Patch 7.4.1976
Problem:    <A HREF="eval.html#Number">Number</A> <A HREF="eval.html#variables">variables</A> are not 64 bits while they could be.
Solution:   Add the num64 feature. (Ken Takata, Yasuhiro Matsumoto)
Files:      runtime/doc/eval.txt, runtime/doc/various.txt,
            src/Make_cyg_ming.mak, src/Make_mvc.mak, src/charset.c,
            src/eval.c, src/ex_cmds.c, src/ex_getln.c, src/feature.h,
            src/fileio.c, src/fold.c, src/json.c, src/message.c, src/misc1.c,
            src/misc2.c, src/ops.c, src/option.c, src/proto/charset.pro,
            src/proto/eval.pro, src/quickfix.c, src/structs.h,
            src/testdir/test_viml.vim, src/version.c

Patch 7.4.1977
Problem:    With 64 bit changes don't need three calls to sprintf().
Solution:   Simplify the code, use vim_snprintf(). (Ken Takata)
Files:      src/fileio.c

Patch 7.4.1978 (after 7.4.1975)
Problem:    Large file test does not delete its output.
Solution:   Delete the output. Check size properly when possible. (Ken Takata)
Files:      src/testdir/test_largefile.vim

Patch 7.4.1979 (after 7.4.1976)
Problem:    Getting value of binary option is wrong. (Kent Sibilev)
Solution:   Fix type cast.  Add a test.
Files:      src/option.c, src/testdir/test_expr.vim

Patch 7.4.1980
Problem:    <A HREF="options.html#'errorformat'">'errorformat'</A> is parsed for every call to &quot;<A HREF="quickfix.html#:caddexpr">:caddexpr</A>&quot;.  Can't add
            to two location lists asynchronously.
Solution:   Keep the previously parsed data when appropriate. (mostly by
            Yegappan Lakshmanan)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 7.4.1981
Problem:    No <A HREF="testing.html#testing">testing</A> for <A HREF="farsi.html#Farsi">Farsi</A> code.
Solution:   Add a minimal test.  Clean up <A HREF="farsi.html#Farsi">Farsi</A> code.
Files:      src/farsi.c, src/Makefile, src/charset.c, src/normal.c,
            src/proto/main.pro, src/testdir/Make_all.mak,
            src/testdir/test_farsi.vim

Patch 7.4.1982
Problem:    Viminfo file contains duplicate change marks.
Solution:   Drop duplicate marks.
Files:      src/mark.c

Patch 7.4.1983
Problem:    farsi.c and arabic.c are included in a strange way.
Solution:   Build them like other files.
Files:      src/main.c, src/farsi.c, src/arabic.c, src/proto.h,
            src/proto/main.pro, src/proto/farsi.pro, src/proto/arabic.pro,
            src/Makefile, src/Make_bc5.mak, src/Make_cyg_ming.mak,
            src/Make_dice.mak, src/Make_ivc.mak, src/Make_manx.mak,
            src/Make_morph.mak, src/Make_mvc.mak, src/Make_sas.mak,
            Filelist

Patch 7.4.1984
Problem:    Not all <A HREF="quickfix.html#quickfix">quickfix</A> features are tested.
Solution:   Add a few more tests. (Yegappan Lakshmanan)
Files:      src/testdir/test_quickfix.vim

Patch 7.4.1985 (after 7.4.1983)
Problem:    Missing changes in <A HREF="os_vms.html#VMS">VMS</A> build file.
Solution:   Use the right file name.
Files:      src/Make_vms.mms

Patch 7.4.1986
Problem:    Compiler warns for loss of data.
Solution:   Use size_t instead of int. (Christian Brabandt)
Files:      src/ex_cmds2.c

Patch 7.4.1987
Problem:    When <A HREF="uganda.html#copying">copying</A> unrecognized lines for <A HREF="starting.html#viminfo">viminfo</A>, end up with useless
            continuation lines.
Solution:   Skip continuation lines.
Files:      src/ex_cmds.c

Patch 7.4.1988
Problem:    When updating <A HREF="starting.html#viminfo">viminfo</A> with file marks there is no time order.
Solution:   Remember the time when a buffer was last used, store marks for
            the most recently used <A HREF="windows.html#buffers">buffers</A>.
Files:      src/buffer.c, src/structs.h, src/mark.c, src/main.c,
            src/ex_cmds.c, src/proto/mark.pro, src/testdir/test_viminfo.vim

Patch 7.4.1989
Problem:    <A HREF="builtin.html#filter()">filter()</A> and <A HREF="builtin.html#map()">map()</A> only accept a <A HREF="eval.html#string">string</A> argument.
Solution:   Implement using a <A HREF="eval.html#Funcref">Funcref</A> argument (Yasuhiro Matsumoto, Ken
            Takata)
Files:      runtime/doc/eval.txt, src/Makefile, src/eval.c,
            src/testdir/test_alot.vim, src/testdir/test_filter_map.vim,
            src/testdir/test_partial.vim

Patch 7.4.1990 (after 7.4.1952)
Problem:    <A HREF="if_cscop.html#Cscope">Cscope</A> items are not sorted.
Solution:   Put the new &quot;<A HREF="insert.html#a">a</A>&quot; command first. (Ken Takata)
Files:      src/if_cscope.c

Patch 7.4.1991
Problem:    <A HREF="builtin.html#glob()">glob()</A> does not add a symbolic link when there are no <A HREF="editing.html#wildcards">wildcards</A>.
Solution:   Remove the call to mch_getperm().
Files:      src/misc1.c

Patch 7.4.1992
Problem:    Values for <A HREF="vim9.html#true">true</A> and <A HREF="vim9.html#false">false</A> can be confusing.
Solution:   Update the documentation.  Add a test.  Make <A HREF="eval.html#v:true">v:true</A> evaluate to
            <A HREF="eval.html#TRUE">TRUE</A> for a <A HREF="eval.html#non-zero-arg">non-zero-arg</A>.
Files:      runtime/doc/eval.txt, src/eval.c, src/Makefile,
            src/testdir/test_true_false.vim, src/testdir/test_alot.vim

Patch 7.4.1993
Problem:    Not all <A HREF="eval.html#TRUE">TRUE</A> and <A HREF="eval.html#FALSE">FALSE</A> arguments are tested.
Solution:   Add a few more tests.
Files:      src/testdir/test_true_false.vim

Patch 7.4.1994 (after 7.4.1993)
Problem:    True-false test fails.
Solution:   Filter the <A HREF="eval.html#dict">dict</A> to only keep the value that matters.
Files:      src/testdir/test_true_false.vim

Patch 7.4.1995
Problem:    <A HREF="gui.html#GUI">GUI</A>: cursor drawn in wrong place if a <A HREF="builtin.html#timer">timer</A> callback causes a
            screen update. (David Samvelyan)
Solution:   Also redraw the cursor when it's blinking and on.
Files:      src/gui_gtk_x11.c, src/gui_mac.c, src/gui_photon.c, src/gui_w32.c,
            src/gui_x11.c, src/screen.c, src/proto/gui_gtk_x11.pro,
            src/proto/gui_mac.pro, src/proto/gui_photon.pro,
            src/proto/gui_w32.pro, src/proto/gui_x11.pro

Patch 7.4.1996
Problem:    Capturing the output of a command takes a few commands.
Solution:   Add evalcmd().
Files:      src/eval.c, runtime/doc/eval.txt, src/testdir/test_alot.vim,
            src/Makefile, src/testdir/test_evalcmd.vim

Patch 7.4.1997
Problem:    Cannot easily scroll the <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="windows.html#window">window</A>.
Solution:   Add &quot;<A HREF="quickfix.html#:cbottom">:cbottom</A>&quot;.
Files:      src/ex_cmds.h, src/quickfix.c, src/proto/quickfix.pro,
            src/ex_docmd.c, src/testdir/test_quickfix.vim,
            runtime/doc/quickfix.txt

Patch 7.4.1998
Problem:    When <A HREF="editing.html#writing">writing</A> buffer lines to a <A HREF="channel.html#job">job</A> there is no NL to NUL
            conversion.
Solution:   Make <A HREF="motion.html#it">it</A> work symmetrical with <A HREF="editing.html#writing">writing</A> lines from a <A HREF="channel.html#job">job</A> into a
            buffer.
Files:      src/channel.c, src/proto/channel.pro, src/netbeans.c

Patch 7.4.1999
Problem:    evalcmd() doesn't work recursively.
Solution:   Use redir_evalcmd instead of redir_vname.
Files:      src/message.c, src/eval.c, src/globals.h, src/proto/eval.pro,
            src/testdir/test_evalcmd.vim

Patch 7.4.2000 (after 7.4.1999)
Problem:    Evalcmd test fails.
Solution:   Add missing piece.
Files:      src/ex_docmd.c

Patch 7.4.2001 (after 7.4.2000)
Problem:    Tiny build fails. (Tony Mechelynck)
Solution:   Add #ifdef.
Files:      src/ex_docmd.c

Patch 7.4.2002
Problem:    Crash when passing number to <A HREF="builtin.html#filter()">filter()</A> or <A HREF="builtin.html#map()">map()</A>.
Solution:   Convert to a <A HREF="eval.html#string">string</A>. (Ozaki Kiichi)
Files:      src/eval.c, src/testdir/test_filter_map.vim

Patch 7.4.2003
Problem:    Still cursor flickering when a callback updates the screen. (David
            Samvelyan)
Solution:   Put the cursor in the right position after updating the screen.
Files:      src/screen.c

Patch 7.4.2004
Problem:    <A HREF="gui.html#GUI">GUI</A>: cursor displayed in the wrong position.
Solution:   Correct screen_cur_col and screen_cur_row.
Files:      src/screen.c

Patch 7.4.2005
Problem:    After using evalcmd() message output is in the wrong position.
            (Christian Brabandt)
Solution:   Reset msg_col.
Files:      src/eval.c

Patch 7.4.2006
Problem:    Crash when using tabnext in <A HREF="autocmd.html#BufUnload">BufUnload</A> autocmd. (Norio Takagi)
Solution:   First check that the current buffer is the right one. (Hirohito
            Higashi)
Files:      src/buffer.c, src/testdir/test_autocmd.vim

Patch 7.4.2007
Problem:    Running the tests leaves a <A HREF="starting.html#viminfo">viminfo</A> file behind.
Solution:   Make the <A HREF="starting.html#viminfo">viminfo</A> option empty.
Files:      src/testdir/runtest.vim

Patch 7.4.2008
Problem:    evalcmd() has a confusing name.
Solution:   Rename to <A HREF="builtin.html#execute()">execute()</A>.  Make silent optional.  Support a <A HREF="eval.html#list">list</A> of
            commands.
Files:      src/eval.c, src/ex_docmd.c, src/message.c, src/globals.h,
            src/proto/eval.pro, src/Makefile, src/testdir/test_evalcmd.vim,
            src/testdir/test_execute_func.vim, src/testdir/test_alot.vim,
            runtime/doc/eval.txt

Patch 7.4.2009 (after 7.4.2008)
Problem:    Messages test fails.
Solution:   Don't set redir_execute before returning.  Add missing version
            number.
Files:      src/eval.c

Patch 7.4.2010
Problem:    There is a <A HREF="quickfix.html#:cbottom">:cbottom</A> command but no <A HREF="quickfix.html#:lbottom">:lbottom</A> command.
Solution:   Add <A HREF="quickfix.html#:lbottom">:lbottom</A>. (Yegappan Lakshmanan)
Files:      runtime/doc/index.txt, runtime/doc/quickfix.txt, src/ex_cmds.h,
            src/quickfix.c, src/testdir/test_quickfix.vim

Patch 7.4.2011
Problem:    It is not <A HREF="starting.html#easy">easy</A> to get a <A HREF="eval.html#list">list</A> of command arguments.
Solution:   Add <A HREF="builtin.html#getcompletion()">getcompletion()</A>. (Yegappan Lakshmanan)
Files:      runtime/doc/eval.txt, src/eval.c, src/ex_docmd.c,
            src/proto/ex_docmd.pro, src/testdir/test_cmdline.vim

Patch 7.4.2012 (after 7.4.2011)
Problem:    Test for <A HREF="builtin.html#getcompletion()">getcompletion()</A> does not pass on all systems.
Solution:   Only test what is supported.
Files:      src/testdir/test_cmdline.vim

Patch 7.4.2013
Problem:    Using &quot;noinsert&quot; in <A HREF="options.html#'completeopt'">'completeopt'</A> breaks <A HREF="undo.html#redo">redo</A>.
Solution:   Set compl_curr_match. (Shougo Matsu, closes #874)
Files:      src/edit.c, src/testdir/test_popup.vim

Patch 7.4.2014
Problem:    Using &quot;noinsert&quot; in <A HREF="options.html#'completeopt'">'completeopt'</A> does not insert match.
Solution:   Set compl_enter_selects. (Shougo Matsu, closes #875)
Files:      src/edit.c, src/testdir/test_popup.vim

Patch 7.4.2015
Problem:    When a file gets a name when <A HREF="editing.html#writing">writing</A> <A HREF="motion.html#it">it</A> <A HREF="options.html#'acd'">'acd'</A> is not effective.
            (Dan Church)
Solution:   Invoke DO_AUTOCHDIR after <A HREF="editing.html#writing">writing</A> the file. (Allen Haim, closes
            #777, closes #803)  Add <A HREF="testing.html#test_autochdir()">test_autochdir()</A> to enable <A HREF="options.html#'acd'">'acd'</A> before
            &quot;starting&quot; is reset.
Files:      src/ex_cmds.c, src/buffer.c, src/eval.c, src/globals.h,
            src/Makefile, src/testdir/test_autochdir.vim,
            src/testdir/Make_all.mak

Patch 7.4.2016
Problem:    Warning from MinGW about _WIN32_WINNT redefined. (John Marriott)
Solution:   First undefine <A HREF="motion.html#it">it</A>. (Ken Takata)
Files:      src/Make_cyg_ming.mak

Patch 7.4.2017
Problem:    When there are many <A HREF="message.html#errors">errors</A> adding them to the <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A> takes
            a long time.
Solution:   Add BLN_NOOPT.  Don't call buf_valid() in buf_copy_options().
            Remember the last file name used.  When going through the buffer
            <A HREF="eval.html#list">list</A> start from the end of the <A HREF="eval.html#list">list</A>.  Only call buf_valid() when
            <A HREF="autocmd.html#autocommands">autocommands</A> were executed.
Files:      src/buffer.c, src/option.c, src/quickfix.c, src/vim.h

Patch 7.4.2018
Problem:    buf_valid() can be slow when there are many <A HREF="windows.html#buffers">buffers</A>.
Solution:   Add bufref_valid(), only go through the buffer <A HREF="eval.html#list">list</A> when a buffer
            was freed.
Files:      src/structs.h, src/buffer.c, src/quickfix.c, src/proto/buffer.pro

Patch 7.4.2019
Problem:    When ignoring <A HREF="change.html#case">case</A> utf_fold() may consume a lot of time.
Solution:   Optimize for ASCII.
Files:      src/mbyte.c

Patch 7.4.2020
Problem:    Can't build without <A HREF="various.html#+autocmd">+autocmd</A> feature.
Solution:   Adjust #ifdefs.
Files:      src/buffer.c

Patch 7.4.2021
Problem:    Still too many buf_valid() calls.
Solution:   Make au_new_curbuf a bufref.  Use bufref_valid() in more places.
Files:      src/ex_cmds.c, src/buffer.c, src/globals.h

Patch 7.4.2022
Problem:    Warnings from 64 bit compiler.
Solution:   Add type casts. (Mike Williams)
Files:      src/eval.c

Patch 7.4.2023
Problem:    buflist_findname_stat() may find a dummy buffer.
Solution:   Set the BF_DUMMY flag after loading a dummy buffer.  Start
            finding <A HREF="windows.html#buffers">buffers</A> from the end of the <A HREF="eval.html#list">list</A>.
Files:      src/quickfix.c, src/buffer.c

Patch 7.4.2024
Problem:    More buf_valid() calls can be optimized.
Solution:   Use bufref_valid() instead.
Files:      src/buffer.c, src/ex_cmds.c, src/structs.h, src/channel.c,
            src/diff.c, src/eval.c, src/ex_cmds2.c, src/ex_docmd.c,
            src/ex_getln.c, src/fileio.c, src/main.c, src/misc2.c,
            src/netbeans.c, src/quickfix.c, src/spell.c, src/term.c,
            src/if_py_both.h, src/window.c, src/proto/buffer.pro,
            src/proto/window.pro

Patch 7.4.2025
Problem:    The cursor blinking stops or is irregular when receiving date over
            a <A HREF="channel.html#channel">channel</A> and <A HREF="editing.html#writing">writing</A> <A HREF="motion.html#it">it</A> in a buffer, and when updating the status
            line. (Ramel Eshed)
Solution:   Make <A HREF="motion.html#it">it</A> a bit better by flushing <A HREF="gui.html#GUI">GUI</A> output.  Don't redraw the
            cursor after updating the screen if the blink state is off.
Files:      src/gui_gtk_x11.c, src/screen.c

Patch 7.4.2026
Problem:    Reference counting for callbacks isn't right.
Solution:   Add free_callback(). (Ken Takata)  Fix reference <A HREF="intro.html#count">count</A>.
Files:      src/channel.c, src/eval.c, src/ex_cmds2.c, src/proto/eval.pro

Patch 7.4.2027
Problem:    Can't build with <A HREF="various.html#+eval">+eval</A> but without <A HREF="various.html#+menu">+menu</A>.
Solution:   Add #ifdef. (John Marriott)
Files:      src/eval.c

Patch 7.4.2028
Problem:    cppcheck warns for using index before <A HREF="vi_diff.html#limits">limits</A> check.
Solution:   Swap the expressions. (Dominique Pelle)
Files:      src/mbyte.c

Patch 7.4.2029
Problem:    <A HREF="builtin.html#printf()">printf()</A> does not work with 64 bit numbers.
Solution:   use the &quot;<A HREF="motion.html#L">L</A>&quot; length modifier. (Ken Takata)
Files:      src/message.c, src/testdir/test_expr.vim

Patch 7.4.2030
Problem:    ARCH must be set properly when using MinGW.
Solution:   Detect the default value of ARCH from the current compiler. (Ken
            Takata)
Files:      src/Make_cyg_ming.mak

Patch 7.4.2031
Problem:    The list_lbr_utf8 test fails if ~/.vim/syntax/c.vim sets
            <A HREF="options.html#'textwidth'">'textwidth'</A> to a non-zero value. (Oyvind A. Holm)
Solution:   Add a setup.vim file that sets <A HREF="options.html#'runtimepath'">'runtimepath'</A> and <A HREF="options.html#$HOME">$HOME</A> to a safe
            value. (partly by Christian Brabandt, closes #912)
Files:      src/testdir/setup.vim, src/testdir/amiga.vim, src/testdir/dos.vim,
            src/testdir/unix.vim, src/testdir/vms.vim, src/testdir/runtest.vim

Patch 7.4.2032 (after 7.4.2030)
Problem:    Build fails with 64 bit MinGW. (Axel Bender)
Solution:   Handle dash vs. underscore. (Ken Takata, Hirohito Higashi)
Files:      src/Make_cyg_ming.mak

Patch 7.4.2033
Problem:    <A HREF="options.html#'cscopequickfix'">'cscopequickfix'</A> option does not accept new value &quot;<A HREF="insert.html#a">a</A>&quot;.
Solution:   Adjust <A HREF="eval.html#list">list</A> of command characters. (Ken Takata)
Files:      src/option.h, src/Makefile, src/testdir/test_cscope.vim,
            src/testdir/Make_all.mak

Patch 7.4.2034 (after 7.4.2032)
Problem:    Build fails with some version of MinGW. (illusorypan)
Solution:   Recognize mingw32. (Ken Takata, closes #921)
Files:      src/Make_cyg_ming.mak

Patch 7.4.2035
Problem:    On Solaris with ZFS the <A HREF="editing.html#ACL">ACL</A> may get removed.
Solution:   Always restore the <A HREF="editing.html#ACL">ACL</A> for Solaris ZFS. (Danek Duvall)
Files:      src/fileio.c

Patch 7.4.2036
Problem:    Looking up a buffer by number is slow if there are many.
Solution:   Use a hashtab.
Files:      src/structs.h, src/buffer.c

Patch 7.4.2037 (after 7.4.2036)
Problem:    Small build fails.
Solution:   Adjust #ifdefs.
Files:      src/hashtab.c

Patch 7.4.2038 (after 7.4.2036)
Problem:    Small build still fails.
Solution:   Adjust more #ifdefs.
Files:      src/globals.h, src/buffer.c

Patch 7.4.2039
Problem:    The Netbeans integration is not tested.
Solution:   Add a first Netbeans test.
Files:      src/testdir/test_netbeans.vim, src/testdir/test_netbeans.py,
            src/testdir/Make_all.mak, src/Makefile,
            src/testdir/test_channel.vim, src/testdir/shared.vim

Patch 7.4.2040
Problem:    New files missing from <A HREF="intro.html#distribution">distribution</A>.
Solution:   Add new test scripts.
Files:      Filelist

Patch 7.4.2041
Problem:    Netbeans file authentication not tested.
Solution:   Add a test.
Files:      src/testdir/test_netbeans.vim

Patch 7.4.2042
Problem:    <A HREF="gui_x11.html#GTK">GTK</A>: display updating is not done properly and can be slow.
Solution:   Use gdk_display_flush() instead of gdk_display_sync(). Don't call
            gdk_window_process_updates().  (Kazunobu Kuriyama)
Files:      src/gui_gtk_x11.c

Patch 7.4.2043
Problem:    setbuvfar() causes a screen redraw.
Solution:   Only use aucmd_prepbuf() for <A HREF="options.html#options">options</A>.
Files:      src/eval.c

Patch 7.4.2044
Problem:    <A HREF="builtin.html#filter()">filter()</A> and <A HREF="builtin.html#map()">map()</A> either require a <A HREF="eval.html#string">string</A> or defining a function.
Solution:   Support <A HREF="eval.html#lambda">lambda</A>, a short way to define a function that evaluates an
            <A HREF="eval.html#expression">expression</A>. (Yasuhiro Matsumoto, Ken Takata)
Files:      runtime/doc/eval.txt, src/eval.c, src/testdir/test_alot.vim,
            src/Makefile, src/testdir/test_channel.vim,
            src/testdir/test_lambda.vim

Patch 7.4.2045
Problem:    Memory leak when using a function callback.
Solution:   Don't save the function name when it's in the <A HREF="builtin.html#partial">partial</A>.
Files:      src/channel.c

Patch 7.4.2046
Problem:    The qf_init_ext() function is too big.
Solution:   Refactor <A HREF="motion.html#it">it</A>. (Yegappan Lakshmanan)
Files:      src/quickfix.c

Patch 7.4.2047
Problem:    Compiler warning for initializing a struct.
Solution:   Initialize in another way. (Anton Lindqvist)
Files:      src/quickfix.c

Patch 7.4.2048
Problem:    There is still code and help for unsupported systems.
Solution:   Remove the code and text. (Hirohito Higashi)
Files:      runtime/doc/eval.txt, runtime/lang/menu_sk_sk.vim,
            runtime/menu.vim, runtime/optwin.vim, src/Make_bc5.mak,
            src/ex_docmd.c, src/feature.h, src/fileio.c, src/globals.h,
            src/main.c, src/memfile.c, src/memline.c, src/misc1.c,
            src/misc2.c, src/option.c, src/option.h, src/os_unix.c,
            src/os_unix.h, src/proto.h, src/term.c, src/undo.c, src/version.c,
            src/vim.h, src/xxd/xxd.c

Patch 7.4.2049
Problem:    There is no way to get a <A HREF="eval.html#list">list</A> of the error lists.
Solution:   Add &quot;<A HREF="quickfix.html#:chistory">:chistory</A>&quot; and &quot;<A HREF="quickfix.html#:lhistory">:lhistory</A>&quot;.
Files:      src/ex_cmds.h, src/quickfix.c, src/ex_docmd.c, src/message.c,
            src/proto/quickfix.pro, src/testdir/test_quickfix.vim

Patch 7.4.2050
Problem:    When using &quot;<A HREF="quickfix.html#:vimgrep">:vimgrep</A>&quot; may end up with duplicate <A HREF="windows.html#buffers">buffers</A>.
Solution:   When adding an error <A HREF="eval.html#list">list</A> entry pass the buffer number if possible.
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 7.4.2051
Problem:    No proper <A HREF="testing.html#testing">testing</A> of trunc_string().
Solution:   Add a unittest for message.c.
Files:      src/Makefile, src/message.c, src/message_test.c, src/main.c,
            src/proto/main.pro, src/structs.h

Patch 7.4.2052
Problem:    Coverage report is messed up by the unittests.
Solution:   Add a separate test target for <A HREF="usr_41.html#script">script</A> tests.  Use that when
            collecting coverage information.
Files:      src/Makefile

Patch 7.4.2053
Problem:    Can't run scripttests in the top directory.
Solution:   Add targets to the top Makefile.
Files:      Makefile

Patch 7.4.2054 (after 7.4.2048)
Problem:    Wrong part of #ifdef removed.
Solution:   Use the right part. (Hirohito Higashi)
Files:      src/os_unix.c

Patch 7.4.2055
Problem:    eval.c is too big
Solution:   Move <A HREF="eval.html#Dictionary">Dictionary</A> <A HREF="eval.html#functions">functions</A> to dict.c
Files:      src/eval.c, src/dict.c, src/vim.h, src/globals.h,
            src/proto/eval.pro, src/proto/dict.pro, src/Makefile, Filelist

Patch 7.4.2056 (after 7.4.2055)
Problem:    Build fails.
Solution:   Add missing changes.
Files:      src/proto.h

Patch 7.4.2057
Problem:    eval.c is too big.
Solution:   Move <A HREF="eval.html#List">List</A> <A HREF="eval.html#functions">functions</A> to list.c
Files:      src/eval.c, src/dict.c, src/list.c, src/proto.h, src/Makefile,
            src/globals.h, src/proto/eval.pro, src/proto/list.pro, Filelist

Patch 7.4.2058
Problem:    eval.c is too big.
Solution:   Move user <A HREF="eval.html#functions">functions</A> to userfunc.c
Files:      src/userfunc.c, src/eval.c, src/vim.h, src/globals.h,
            src/structs.h, src/proto.h, src/Makefile, src/proto/eval.pro,
            src/proto/userfunc.pro, Filelist

Patch 7.4.2059
Problem:    Non-Unix builds fail.
Solution:   Update Makefiles for new files.
Files:      src/Make_bc5.mak, src/Make_cyg_ming.mak, src/Make_dice.mak,
            src/Make_ivc.mak, src/Make_manx.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_sas.mak

Patch 7.4.2060 (after 7.4.2059)
Problem:    Wrong file name.
Solution:   Fix typo.
Files:      src/Make_mvc.mak

Patch 7.4.2061
Problem:    qf_init_ext() is too big.
Solution:   Move code to qf_parse_line() (Yegappan Lakshmanan)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 7.4.2062
Problem:    Using dummy variable to compute struct member offset.
Solution:   Use offsetof().
Files:      src/globals.h, src/macros.h, src/vim.h, src/spell.c

Patch 7.4.2063
Problem:    eval.c is still too big.
Solution:   Split off internal <A HREF="eval.html#functions">functions</A> to evalfunc.c.
Files:      src/eval.c, src/evalfunc.c, src/list.c, src/proto.h,
            src/globals.h, src/vim.h, src/proto/eval.pro,
            src/proto/evalfunc.pro, src/proto/list.pro, src/Makefile, Filelist,
            src/Make_bc5.mak, src/Make_cyg_ming.mak, src/Make_dice.mak,
            src/Make_ivc.mak, src/Make_manx.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_sas.mak

Patch 7.4.2064
Problem:    Coverity warns for possible buffer overflow.
Solution:   Use vim_strcat() instead of strcat().
Files:      src/quickfix.c

Patch 7.4.2065
Problem:    Compiler warns for uninitialized variable. (John Marriott)
Solution:   Set lnum to the right value.
Files:      src/evalfunc.c

Patch 7.4.2066
Problem:    <A HREF="builtin.html#getcompletion()">getcompletion()</A> not well tested.
Solution:   Add more <A HREF="testing.html#testing">testing</A>.
Files:      src/testdir/test_cmdline.vim

Patch 7.4.2067
Problem:    Compiler warning for char/char_u conversion. (Tony Mechelynck)
            Inefficient code.
Solution:   Use more lines to fill with spaces. (Nikolai Pavlov) Add type cast.
Files:      src/quickfix.c

Patch 7.4.2068
Problem:    Not all arguments of trunc_string() are tested.  Memory access
            error when running the message tests.
Solution:   Add another test <A HREF="change.html#case">case</A>. (Yegappan Lakshmanan)  Make <A HREF="motion.html#it">it</A> <A HREF="starting.html#easy">easy</A> to run
            unittests with <A HREF="debug.html#valgrind">valgrind</A>.  Fix the access error.
Files:      src/message.c, src/message_test.c, src/Makefile

Patch 7.4.2069
Problem:    spell.c is too big.
Solution:   Split <A HREF="motion.html#it">it</A> in <A HREF="spell.html#spell">spell</A> file handling and <A HREF="spell.html#spell">spell</A> checking.
Files:      src/spell.c, src/spellfile.c, src/spell.h, src/Makefile,
            src/proto/spell.pro, src/proto/spellfile.pro, src/proto.h
            Filelist, src/Make_bc5.mak, src/Make_cyg_ming.mak,
            src/Make_dice.mak, src/Make_ivc.mak, src/Make_manx.mak,
            src/Make_morph.mak, src/Make_mvc.mak, src/Make_sas.mak

Patch 7.4.2070 (after 7.4.2069)
Problem:    Missing change to include file.
Solution:   Include the <A HREF="spell.html#spell">spell</A> header file.
Files:      src/vim.h

Patch 7.4.2071
Problem:    The return value of <A HREF="builtin.html#type()">type()</A> is difficult to use.
Solution:   Define v:t_ constants. (Ken Takata)
Files:      runtime/doc/eval.txt, src/eval.c, src/evalfunc.c,
            src/testdir/test_channel.vim, src/testdir/test_viml.vim, src/vim.h

Patch 7.4.2072
Problem:    <A HREF="builtin.html#substitute()">substitute()</A> does not support a <A HREF="eval.html#Funcref">Funcref</A> argument.
Solution:   Support a <A HREF="eval.html#Funcref">Funcref</A> like <A HREF="motion.html#it">it</A> supports  a <A HREF="eval.html#string">string</A> starting with &quot;\=&quot;.
Files:      src/evalfunc.c, src/regexp.c, src/eval.c, src/proto/eval.pro,
            src/proto/regexp.pro, src/testdir/test_expr.vim

Patch 7.4.2073
Problem:    <A HREF="gui_w32.html#rgb.txt">rgb.txt</A> is read for every color name.
Solution:   Load <A HREF="gui_w32.html#rgb.txt">rgb.txt</A> once. (Christian Brabandt)  Add a test.
Files:      runtime/rgb.txt, src/term.c, src/testdir/test_syn_attr.vim

Patch 7.4.2074
Problem:    One more place using a dummy variable.
Solution:   Use offsetof(). (Ken Takata)
Files:      src/userfunc.c

Patch 7.4.2075
Problem:    No <A HREF="autocmd.html#autocommand">autocommand</A> event to initialize a <A HREF="windows.html#window">window</A> or <A HREF="intro.html#tab">tab</A> page.
Solution:   Add <A HREF="autocmd.html#WinNew">WinNew</A> and <A HREF="autocmd.html#TabNew">TabNew</A> events. (partly by Felipe Morales)
Files:      src/fileio.c, src/window.c, src/vim.h,
            src/testdir/test_autocmd.vim, runtime/doc/autocmd.txt

Patch 7.4.2076
Problem:    <A HREF="autocmd.html#Syntax">Syntax</A> error when <A HREF="eval.html#dict">dict</A> has '<A HREF="change.html#&gt;">&gt;</A>' key.
Solution:   Check for endchar. (Ken Takata)
Files:      src/userfunc.c, src/testdir/test_lambda.vim

Patch 7.4.2077
Problem:    Cannot update <A HREF="options.html#'tabline'">'tabline'</A> when a <A HREF="intro.html#tab">tab</A> was closed.
Solution:   Add the <A HREF="autocmd.html#TabClosed">TabClosed</A> autocmd event. (partly by Felipe Morales)
Files:      src/fileio.c, src/window.c, src/vim.h,
            src/testdir/test_autocmd.vim, runtime/doc/autocmd.txt

Patch 7.4.2078
Problem:    Running checks in po directory fails.
Solution:   Add colors used in syntax.c to the builtin color table.
Files:      src/term.c

Patch 7.4.2079
Problem:    Netbeans test fails on non-Unix systems.
Solution:   Only <A HREF="diff.html#do">do</A> the permission check on <A HREF="os_unix.html#Unix">Unix</A> systems.
Files:      src/testdir/test_netbeans.vim

Patch 7.4.2080
Problem:    When using PERROR() on some systems <A HREF="testing.html#assert_fails()">assert_fails()</A> does not see
            the error.
Solution:   Make PERROR() always report the error.
Files:      src/vim.h, src/message.c, src/proto/message.pro

Patch 7.4.2081
Problem:    Line numbers in the error <A HREF="eval.html#list">list</A> are not always adjusted.
Solution:   Set b_has_qf_entry properly. (Yegappan Lakshmanan)
Files:      src/quickfix.c, src/structs.h, src/testdir/test_quickfix.vim

Patch 7.4.2082
Problem:    Not much test coverage for <A HREF="digraph.html#digraphs">digraphs</A>.
Solution:   Add a new style <A HREF="digraph.html#digraph">digraph</A> test. (Christian Brabandt)
Files:      src/Makefile, src/testdir/test_alot.vim,
            src/testdir/test_digraph.vim

Patch 7.4.2083
Problem:    Coverity complains about not restoring a value.
Solution:   Restore the value, although it's not really needed.  Change return
            to jump to cleanup, might leak memory.
Files:      src/userfunc.c

Patch 7.4.2084
Problem:    New <A HREF="digraph.html#digraph">digraph</A> test makes <A HREF="testing.html#testing">testing</A> hang.
Solution:   Don't set &quot;nocp&quot;.
Files:      src/testdir/test_digraph.vim

Patch 7.4.2085
Problem:    Digraph tests fails on some systems.
Solution:   Run <A HREF="motion.html#it">it</A> separately and set <A HREF="options.html#'encoding'">'encoding'</A> early.
Files:      src/testdir/Make_all.mak, src/testdir/test_alot.vim,
            src/testdir/test_digraph.vim

Patch 7.4.2086
Problem:    Using the system default encoding makes tests unpredictable.
Solution:   Always use <A HREF="mbyte.html#utf-8">utf-8</A> or latin1 in the new style tests.  Remove setting
            encoding and scriptencoding where <A HREF="motion.html#it">it</A> is not needed.
Files:      src/testdir/runtest.vim, src/testdir/test_channel.vim,
            src/testdir/test_digraph.vim, src/testdir/test_expand_dllpath.vim,
            src/testdir/test_expr_utf8.vim, src/testdir/test_json.vim,
            src/testdir/test_matchadd_conceal_utf8.vim,
            src/testdir/test_regexp_utf8.vim, src/testdir/test_visual.vim,
            src/testdir/test_alot_utf8.vim,

Patch 7.4.2087
Problem:    Digraph code test coverage is still low.
Solution:   Add more tests. (Christian Brabandt)
Files:      src/testdir/test_digraph.vim

Patch 7.4.2088 (after 7.4.2087)
Problem:    Keymap test fails with normal features.
Solution:   Bail out if the keymap feature is not supported.
Files:      src/testdir/test_digraph.vim

Patch 7.4.2089
Problem:    Color handling of <A HREF="options.html#X11">X11</A> GUIs is too complicated.
Solution:   Simplify the code.  Use RGBA where appropriate. (Kazunobu
            Kuriyama)
Files:      src/gui.h, src/gui_beval.c, src/gui_gtk_x11.c, src/netbeans.c

Patch 7.4.2090
Problem:    Using <A HREF="builtin.html#submatch()">submatch()</A> in a <A HREF="eval.html#lambda">lambda</A> passed to <A HREF="builtin.html#substitute()">substitute()</A> is <A HREF="starting.html#verbose">verbose</A>.
Solution:   Use a static <A HREF="eval.html#list">list</A> and pass <A HREF="motion.html#it">it</A> <A HREF="motion.html#as">as</A> an optional argument to the
            function.  Fix memory leak.
Files:      src/structs.h, src/list.c, src/userfunc.c, src/channel.c,
            src/eval.c, src/evalfunc.c, src/ex_cmds2.c, src/regexp.c,
            src/proto/list.pro, src/proto/userfunc.pro,
            src/testdir/test_expr.vim, runtime/doc/eval.txt

Patch 7.4.2091
Problem:    Coverity reports a resource leak when out of memory.
Solution:   Close the file before returning.
Files:      src/term.c

Patch 7.4.2092
Problem:    <A HREF="gui_x11.html#GTK">GTK</A> 3 build fails with older <A HREF="gui_x11.html#GTK">GTK</A> version.
Solution:   Check the pango version. (Kazunobu Kuriyama)
Files:      src/gui_beval.c

Patch 7.4.2093
Problem:    Netbeans test fails once in a while.  Leaving log file behind.
Solution:   Add <A HREF="motion.html#it">it</A> to the <A HREF="eval.html#list">list</A> of flaky tests.  Disable logfile.
Files:      src/testdir/runtest.vim, src/testdir/test_channel.vim

Patch 7.4.2094
Problem:    The color allocation in <A HREF="options.html#X11">X11</A> is overly complicated.
Solution:   Remove find_closest_color(), XAllocColor() already does this.
            (Kazunobu Kuriyama)
Files:      src/gui_x11.c

Patch 7.4.2095
Problem:    Man test fails when run with the <A HREF="gui.html#GUI">GUI</A>.
Solution:   Adjust for different behavior of <A HREF="gui.html#GUI">GUI</A>.  Add <A HREF="testing.html#assert_inrange()">assert_inrange()</A>.
Files:      src/eval.c, src/evalfunc.c, src/proto/eval.pro,
            src/testdir/test_assert.vim, src/testdir/test_man.vim,
            runtime/doc/eval.txt

Patch 7.4.2096
Problem:    Lambda <A HREF="eval.html#functions">functions</A> show up with completion.
Solution:   Don't show <A HREF="eval.html#lambda">lambda</A> <A HREF="eval.html#functions">functions</A>. (Ken Takata)
Files:      src/userfunc.c, src/testdir/test_cmdline.vim

Patch 7.4.2097
Problem:    Warning from 64 bit compiler.
Solution:   use size_t instead of int. (Mike Williams)
Files:      src/message.c

Patch 7.4.2098
Problem:    Text object tests are old style.
Solution:   Turn them into new style tests. (James McCoy, closes #941)
Files:      src/testdir/Make_all.mak, src/testdir/test_textobjects.in,
            src/testdir/test_textobjects.ok, src/testdir/test_textobjects.vim,
            src/Makefile

Patch 7.4.2099
Problem:    When a keymap is active only &quot;(lang)&quot; is displayed. (Ilya
            Dogolazky)
Solution:   Show the keymap name. (Dmitri Vereshchagin, closes #933)
Files:      src/buffer.c, src/proto/screen.pro, src/screen.c

Patch 7.4.2100
Problem:    &quot;cgn&quot; and &quot;<A HREF="motion.html#dgn">dgn</A>&quot; <A HREF="diff.html#do">do</A> not work correctly with a single character
            match and the replacement includes the searched <A HREF="pattern.html#pattern">pattern</A>. (John
            Beckett)
Solution:   If the match is found in the wrong column try in the next column.
            Turn the test into new style. (Christian Brabandt)
Files:      src/search.c, src/testdir/Make_all.mak, src/Makefile,
            src/testdir/test53.in, src/testdir/test53.ok,
            src/testdir/test_gn.vim

Patch 7.4.2101
Problem:    Looping over <A HREF="windows.html#windows">windows</A>, <A HREF="windows.html#buffers">buffers</A> and <A HREF="intro.html#tab">tab</A> pages is inconsistent.
Solution:   Use FOR_ALL_ macros everywhere. (Yegappan Lakshmanan)
Files:      src/buffer.c, src/diff.c, src/edit.c, src/eval.c, src/evalfunc.c,
            src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c, src/fileio.c,
            src/globals.h, src/gui.c, src/gui_mac.c, src/if_lua.c,
            src/if_mzsch.c, src/if_perl.xs, src/if_ruby.c, src/if_tcl.c,
            src/main.c, src/mark.c, src/memfile.c, src/memline.c, src/misc1.c,
            src/move.c, src/netbeans.c, src/normal.c, src/option.c,
            src/quickfix.c, src/screen.c, src/spell.c, src/term.c,
            src/window.c, src/workshop.c

Patch 7.4.2102 (after 7.4.2101)
Problem:    Tiny build with <A HREF="gui.html#GUI">GUI</A> fails.
Solution:   Revert one FOR_ALL_ change.
Files:      src/gui.c

Patch 7.4.2103
Problem:    Can't have &quot;augroup END&quot; right after &quot;:au!&quot;.
Solution:   Check for the <A HREF="motion.html#bar">bar</A> character before the command argument.
Files:      src/fileio.c, src/testdir/test_autocmd.vim,
            runtime/doc/autocmd.txt

Patch 7.4.2104
Problem:    Code duplication when unreferencing a function.
Solution:   De-duplicate.
Files:      src/userfunc.c

Patch 7.4.2105
Problem:    Configure reports default features to be &quot;normal&quot; while <A HREF="motion.html#it">it</A> is
            &quot;huge&quot;.
Solution:   Change the default text.  Build with newer autoconf.
Files:      src/configure.in, src/auto/configure

Patch 7.4.2106
Problem:    Clang warns about missing field in initializer.
Solution:   Define COMMA and use <A HREF="motion.html#it">it</A>.  (Kazunobu Kuriyama)
Files:      src/ex_cmds.c, src/globals.h, src/vim.h

Patch 7.4.2107 (after 7.4.2106)
Problem:    Misplaced equal sign.
Solution:   Remove <A HREF="motion.html#it">it</A>.
Files:      src/globals.h

Patch 7.4.2108
Problem:    Netbeans test is flaky.
Solution:   Wait for the cursor to be positioned.
Files:      src/testdir/test_netbeans.vim

Patch 7.4.2109
Problem:    Setting <A HREF="options.html#'display'">'display'</A> to &quot;lastline&quot; is a drastic change, while
            omitting <A HREF="motion.html#it">it</A> results in lots of &quot;<A HREF="repeat.html#@">@</A>&quot; lines.
Solution:   Add &quot;truncate&quot; to show &quot;@@@&quot; for a truncated line.
Files:      src/option.h, src/screen.c, runtime/doc/options.txt

Patch 7.4.2110
Problem:    When there is an <A HREF="autocmd.html#CmdUndefined">CmdUndefined</A> autocmd then the error for a missing
            command is <A HREF="message.html#E464">E464</A> instead of <A HREF="message.html#E492">E492</A>. (Manuel Ortega)
Solution:   Don't let the pointer be NULL.
Files:      src/ex_docmd.c, src/testdir/test_usercommands.vim

Patch 7.4.2111
Problem:    Defaults are very conservative.
Solution:   Move settings from <A HREF="usr_05.html#vimrc_example.vim">vimrc_example.vim</A> to <A HREF="starting.html#defaults.vim">defaults.vim</A>.  Load
            <A HREF="starting.html#defaults.vim">defaults.vim</A> if no <A HREF="starting.html#.vimrc">.vimrc</A> was found.
Files:      src/main.c, src/version.c, src/os_amiga.h, src/os_dos.h,
            src/os_mac.h, src/os_unix.h, src/feature.h, src/Makefile,
            runtime/vimrc_example.vim, runtime/defaults.vim,
            runtime/evim.vim, Filelist, runtime/doc/starting.txt

Patch 7.4.2112
Problem:    getcompletion(.., <A HREF="options.html#'dir'">'dir'</A>) returns a match with trailing &quot;*&quot; when
            there are no matches. (Chdiza)
Solution:   Return an empty <A HREF="eval.html#list">list</A> when there are no matches.  Add a trailing
            slash to directories. (Yegappan Lakshmanan)  Add tests for no
            matches. (closes #947)
Files:      src/evalfunc.c, src/testdir/test_cmdline.vim

Patch 7.4.2113
Problem:    Test for <A HREF="undo.html#undo">undo</A> is flaky.
Solution:   Turn <A HREF="motion.html#it">it</A> into a new style test.  Use <A HREF="testing.html#test_settime()">test_settime()</A> to avoid
            flakiness.
Files:      src/Makefile, src/undo.c, src/testdir/test61.in,
            src/testdir/test61.ok, src/testdir/test_undo.vim,
            src/testdir/test_undolevels.vim, src/testdir/Make_all.mak,
            src/testdir/test_alot.vim

Patch 7.4.2114
Problem:    Tiny build fails.
Solution:   Always include vim_time().
Files:      src/ex_cmds.c

Patch 7.4.2115
Problem:    Loading <A HREF="starting.html#defaults.vim">defaults.vim</A> with <A HREF="starting.html#-C">-C</A> argument.
Solution:   Don't load the defaults <A HREF="usr_41.html#script">script</A> with <A HREF="starting.html#-C">-C</A> argument.  Test sourcing
            the defaults <A HREF="usr_41.html#script">script</A>.  Set <A HREF="options.html#'display'">'display'</A> to &quot;truncate&quot;.
Files:      src/main.c, src/Makefile, runtime/defaults.vim,
            src/testdir/test_startup.vim, src/testdir/Make_all.mak

Patch 7.4.2116
Problem:    The default <A HREF="starting.html#vimrc">vimrc</A> for Windows is very conservative.
Solution:   Use the <A HREF="starting.html#defaults.vim">defaults.vim</A> in the Windows installer.
Files:      src/dosinst.c

Patch 7.4.2117
Problem:    Deleting an augroup that still has autocmds does not give a
            warning.  The next defined augroup takes its place.
Solution:   Give a warning and prevent the index being used for another group
            name.
Files:      src/fileio.c, src/testdir/test_autocmd.vim

Patch 7.4.2118
Problem:    <A HREF="os_mac.html#Mac">Mac</A>: can't build with tiny features.
Solution:   Don't define FEAT_CLIPBOARD unconditionally. (Kazunobu Kuriyama)
Files:      src/vim.h

Patch 7.4.2119
Problem:    Closures are not supported.
Solution:   Capture <A HREF="eval.html#variables">variables</A> in lambdas from the outer scope. (Yasuhiro
            Matsumoto, Ken Takata)
Files:      runtime/doc/eval.txt, src/eval.c, src/ex_cmds2.c, src/globals.h,
            src/proto/eval.pro, src/proto/userfunc.pro,
            src/testdir/test_lambda.vim, src/userfunc.c

Patch 7.4.2120
Problem:    <A HREF="autocmd.html#User">User</A> defined <A HREF="eval.html#functions">functions</A> can't be a <A HREF="eval.html#closure">closure</A>.
Solution:   Add the &quot;<A HREF="eval.html#closure">closure</A>&quot; argument. Allow using <A HREF="eval.html#:unlet">:unlet</A> on a bound
            variable. (Yasuhiro Matsumoto, Ken Takata)
Files:      runtime/doc/eval.txt, src/testdir/test_lambda.vim, src/userfunc.c,
            src/eval.c src/proto/userfunc.pro

Patch 7.4.2121
Problem:    No <A HREF="starting.html#easy">easy</A> way to check if <A HREF="eval.html#lambda">lambda</A> and <A HREF="eval.html#closure">closure</A> are supported.
Solution:   Add the <A HREF="various.html#+lambda">+lambda</A> feature.
Files:      src/evalfunc.c, src/version.c, src/testdir/test_lambda.vim

Patch 7.4.2122 (after 7.4.2118)
Problem:    <A HREF="os_mac.html#Mac">Mac</A>: don't get <A HREF="various.html#+clipboard">+clipboard</A> in huge build.
Solution:   Move #define down below including feature.h
Files:      src/vim.h

Patch 7.4.2123
Problem:    No new style test for <A HREF="diff.html#diff">diff</A> mode.
Solution:   Add a test.  Check that <A HREF="fold.html#folds">folds</A> are in sync.
Files:      src/Makefile, src/testdir/test_diffmode.vim,
            src/testdir/Make_all.mak, src/testdir/test47.in,
            src/testdir/test47.ok

Patch 7.4.2124
Problem:    diffmode test leaves files behind, breaking another test.
Solution:   Delete the files.
Files:      src/testdir/test_diffmode.vim

Patch 7.4.2125
Problem:    Compiler warning for loss of data.
Solution:   Add a type cast. (Christian Brabandt)
Files:      src/message.c

Patch 7.4.2126
Problem:    No tests for <A HREF="diff.html#:diffget">:diffget</A> and <A HREF="diff.html#:diffput">:diffput</A>
Solution:   Add tests.
Files:      src/testdir/test_diffmode.vim

Patch 7.4.2127
Problem:    The short form of &quot;<A HREF="recover.html#:noswapfile">:noswapfile</A>&quot; is &quot;:noswap&quot; instead of &quot;<A HREF="recover.html#:nos">:nos</A>&quot;.
            (Kent Sibilev)
Solution:   Only require three characters.  Add a test for the short forms.
Files:      src/ex_docmd.c, src/testdir/test_usercommands.vim

Patch 7.4.2128
Problem:    Memory leak when saving for <A HREF="undo.html#undo">undo</A> fails.
Solution:   Free allocated memory. (Hirohito Higashi)
Files:      src/ex_cmds.c

Patch 7.4.2129
Problem:    Memory leak when using <A HREF="builtin.html#timer_start()">timer_start()</A>. (Dominique Pelle)
Solution:   Don't copy the callback when using a <A HREF="builtin.html#partial">partial</A>.
Files:      src/evalfunc.c

Patch 7.4.2130
Problem:    Pending <A HREF="builtin.html#timers">timers</A> cause <A HREF="vim9.html#false">false</A> memory leak reports.
Solution:   Free all <A HREF="builtin.html#timers">timers</A> on exit.
Files:      src/ex_cmds2.c, src/proto/ex_cmds2.pro, src/misc2.c

Patch 7.4.2131
Problem:    More memory leaks when using <A HREF="builtin.html#partial">partial</A>, e.g. for &quot;exit-cb&quot;.
Solution:   Don't copy the callback when using a <A HREF="builtin.html#partial">partial</A>.
Files:      src/channel.c

Patch 7.4.2132
Problem:    test_partial has memory leaks reported.
Solution:   Add a note about why this happens.
Files:      src/testdir/test_partial.vim

Patch 7.4.2133 (after 7.4.2128)
Problem:    Can't build with tiny features.
Solution:   Add #ifdef.
Files:      src/ex_cmds.c

Patch 7.4.2134
Problem:    No error for using <A HREF="builtin.html#function()">function()</A> badly.
Solution:   Check for passing wrong function name. (Ken Takata)
Files:      src/eval.c, src/evalfunc.c, src/proto/userfunc.pro,
            src/testdir/test_expr.vim, src/userfunc.c, src/vim.h

Patch 7.4.2135
Problem:    Various tiny issues.
Solution:   Update comments, white space, etc.
Files:      src/diff.c, src/digraph.c, src/testdir/test80.in,
            src/testdir/test_channel.vim, src/testdir/Makefile,
            runtime/menu.vim, src/INSTALLpc.txt, src/xpm/README.txt

Patch 7.4.2136
Problem:    Closure function fails.
Solution:   Don't reset uf_scoped when <A HREF="motion.html#it">it</A> points to another funccal.
Files:      src/userfunc.c, src/testdir/test_lambda.vim

Patch 7.4.2137
Problem:    Using <A HREF="builtin.html#function()">function()</A> with a name will find another function when <A HREF="motion.html#it">it</A> is
            redefined.
Solution:   Add <A HREF="builtin.html#funcref()">funcref()</A>.  Refer to <A HREF="eval.html#lambda">lambda</A> using a <A HREF="builtin.html#partial">partial</A>.  Fix several
            reference counting issues.
Files:      src/vim.h, src/structs.h, src/userfunc.c, src/eval.c,
            src/evalfunc.c, src/channel.c, src/proto/eval.pro,
            src/proto/userfunc.pro, src/if_mzsch.c, src/regexp.c, src/misc2.c,
            src/if_py_both.h, src/testdir/test_expr.vim, runtime/doc/eval.txt

Patch 7.4.2138
Problem:    Test 86 and 87 fail.
Solution:   Call func_ref() also for regular <A HREF="eval.html#functions">functions</A>.
Files:      src/if_py_both.h

Patch 7.4.2139
Problem:    <A HREF="eval.html#:delfunction">:delfunction</A> causes illegal memory access.
Solution:   Correct logic when deciding to free a function.
Files:      src/userfunc.c, src/testdir/test_lambda.vim

Patch 7.4.2140
Problem:    Tiny build fails.
Solution:   Add dummy typedefs.
Files:      src/structs.h

Patch 7.4.2141
Problem:    Coverity reports bogus NULL check.
Solution:   When checking for a variable in the funccal scope don't pass the
            varname.
Files:      src/userfunc.c, src/proto/userfunc.pro, src/eval.c

Patch 7.4.2142
Problem:    Leaking memory when redefining a function.
Solution:   Don't increment the function reference <A HREF="intro.html#count">count</A> when it's found by
            name. Don't remove the wrong function from the hashtab.  More
            reference counting fixes.
Files:      src/structs.h, src/userfunc.c

Patch 7.4.2143
Problem:    A funccal is garbage collected while <A HREF="motion.html#it">it</A> can still be used.
Solution:   Set copyID in all referenced <A HREF="eval.html#functions">functions</A>.  Do not <A HREF="eval.html#list">list</A> <A HREF="eval.html#lambda">lambda</A>
            <A HREF="eval.html#functions">functions</A> with &quot;<A HREF="eval.html#:function">:function</A>&quot;.
Files:      src/userfunc.c, src/proto/userfunc.pro, src/eval.c,
            src/testdir/test_lambda.vim

Patch 7.4.2144
Problem:    On <A HREF="os_win32.html#MS-Windows">MS-Windows</A> <A HREF="quickfix.html#quickfix">quickfix</A> does not handle a line with 1023 bytes
            ending in CR-LF properly.
Solution:   Don't consider CR a line break. (Ken Takata)
Files:      src/quickfix.c

Patch 7.4.2145
Problem:    <A HREF="os_win32.html#Win32">Win32</A>: Using CreateThread/ExitThread is not safe.
Solution:   Use _beginthreadex and return from the thread. (Ken Takata)
Files:      src/os_win32.c

Patch 7.4.2146
Problem:    Not enough <A HREF="testing.html#testing">testing</A> for <A HREF="popup.html#popup">popup</A> menu.  <A HREF="scroll.html#CTRL-E">CTRL-E</A> does not always work
            properly.
Solution:   Add more tests.  When using <A HREF="scroll.html#CTRL-E">CTRL-E</A> check if the <A HREF="popup.html#popup">popup</A> menu is
            visible. (Christian Brabandt)
Files:      src/edit.c, src/testdir/test_popup.vim

Patch 7.4.2147 (after 7.4.2146)
Problem:    test_alot fails.
Solution:   Close <A HREF="windows.html#window">window</A>.
Files:      src/testdir/test_popup.vim

Patch 7.4.2148
Problem:    Not much <A HREF="testing.html#testing">testing</A> for <A HREF="if_cscop.html#cscope">cscope</A>.
Solution:   Add a test that uses the <A HREF="if_cscop.html#cscope">cscope</A> program. (Christian Brabandt)
Files:      src/testdir/test_cscope.vim

Patch 7.4.2149
Problem:    If a test leaves a <A HREF="windows.html#window">window</A> open a following test may fail.
Solution:   Always close extra <A HREF="windows.html#windows">windows</A> after running a test.
Files:      src/testdir/runtest.vim, src/testdir/test_popup.vim

Patch 7.4.2150
Problem:    Warning with MinGW 64. (John Marriott)
Solution:   Change return type. (Ken Takata)
Files:      src/os_win32.c

Patch 7.4.2151
Problem:    <A HREF="quickfix.html#Quickfix">Quickfix</A> test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Close the help <A HREF="windows.html#window">window</A>. (Christian Brabandt)
Files:      src/testdir/test_quickfix.vim

Patch 7.4.2152
Problem:    No proper translation of <A HREF="message.html#messages">messages</A> with a <A HREF="intro.html#count">count</A>.
Solution:   Use ngettext(). (Sergey Alyoshin)
Files:      src/evalfunc.c, src/fold.c, src/os_win32.c, src/screen.c, src/vim.h

Patch 7.4.2153
Problem:    <A HREF="gui.html#GUI">GUI</A> test isn't <A HREF="testing.html#testing">testing</A> much.
Solution:   Turn into a new style test.  Execute a shell command.
Files:      src/testdir/test_gui.vim, src/testdir/test16.in,
            src/testdir/test16.ok, src/testdir/Make_all.mak, src/Makefile,
            src/testdir/Make_vms.mms

Patch 7.4.2154
Problem:    Test_communicate() fails sometimes.
Solution:   Add <A HREF="motion.html#it">it</A> to the flaky tests.
Files:      src/testdir/runtest.vim

Patch 7.4.2155
Problem:    Quotes make <A HREF="gui.html#GUI">GUI</A> test fail on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Remove <A HREF="quotes.html#quotes">quotes</A>, strip white space.
Files:      src/testdir/test_gui.vim

Patch 7.4.2156
Problem:    Compiler warning.
Solution:   Add type cast. (Ken Takata, Mike Williams)
Files:      src/os_win32.c

Patch 7.4.2157
Problem:    Test_job_start_fails() is expected to report memory leaks, making
            <A HREF="motion.html#it">it</A> hard to see other leaks in test_partial.
Solution:   Move Test_job_start_fails() to a separate test file.
Files:      src/testdir/test_partial.vim, src/testdir/test_job_fails.vim,
            src/Makefile, src/testdir/Make_all.mak

Patch 7.4.2158
Problem:    Result of getcompletion('', '<A HREF="if_cscop.html#cscope">cscope</A>') depends on previous
            completion. (Christian Brabandt)
Solution:   Call set_context_in_cscope_cmd().
Files:      src/evalfunc.c, src/testdir/test_cmdline.vim

Patch 7.4.2159
Problem:    Insufficient <A HREF="testing.html#testing">testing</A> for <A HREF="if_cscop.html#cscope">cscope</A>.
Solution:   Add more tests. (Dominique Pelle)
Files:      src/testdir/test_cscope.vim

Patch 7.4.2160
Problem:    <A HREF="builtin.html#setmatches()">setmatches()</A> mixes up values. (Nikolai Pavlov)
Solution:   Save the <A HREF="eval.html#string">string</A> instead of reusing a shared buffer.
Files:      src/dict.c, src/evalfunc.c, src/testdir/test_expr.vim,

Patch 7.4.2161 (after 7.4.2160)
Problem:    Expression test fails without <A HREF="syntax.html#conceal">conceal</A> feature.
Solution:   Only check &quot;<A HREF="syntax.html#conceal">conceal</A>&quot; with the <A HREF="syntax.html#conceal">conceal</A> feature.
Files:      src/testdir/test_expr.vim

Patch 7.4.2162
Problem:    Result of getcompletion('', 'sign') depends on previous
            completion.
Solution:   Call set_context_in_sign_cmd(). (Dominique Pelle)
Files:      src/evalfunc.c, src/testdir/test_cmdline.vim

Patch 7.4.2163
Problem:    <A HREF="builtin.html#match()">match()</A> and related <A HREF="eval.html#functions">functions</A> tested with old style test.
Solution:   Convert to new style test. (Hirohito Higashi)
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/test63.in,
            src/testdir/test63.ok, src/testdir/test_alot.vim,
            src/testdir/test_match.vim, src/testdir/test_matchstrpos.vim

Patch 7.4.2164
Problem:    It is not possible to use plugins in an &quot;after&quot; directory to tune
            the behavior of a package.
Solution:   First load plugins from non-after directories, then <A HREF="repeat.html#packages">packages</A> and
            finally plugins in after directories.
            Reset <A HREF="options.html#'loadplugins'">'loadplugins'</A> before executing <A HREF="starting.html#--cmd">--cmd</A> arguments.
Files:      src/main.c, src/vim.h, src/ex_cmds2.c, src/testdir/Makefile,
            src/testdir/shared.vim, src/testdir/test_startup.vim,
            src/testdir/setup.vim, runtime/doc/starting.txt

Patch 7.4.2165 (after 7.4.2164)
Problem:    Startup test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Don't check output if RunVim() returns zero.
Files:      src/testdir/test_startup.vim

Patch 7.4.2166 (after 7.4.2164)
Problem:    Small build can't run <A HREF="starting.html#startup">startup</A> test.
Solution:   Skip the test.
Files:      src/testdir/test_startup.vim

Patch 7.4.2167 (after 7.4.2164)
Problem:    Small build can't run tests.
Solution:   Don't try setting <A HREF="options.html#'packpath'">'packpath'</A>.
Files:      src/testdir/setup.vim

Patch 7.4.2168
Problem:    Not running the <A HREF="starting.html#startup">startup</A> test on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Write vimcmd.
Files:      src/testdir/Make_ming.mak, src/testdir/Make_dos.mak

Patch 7.4.2169 (after 7.4.2168)
Problem:    Startup test gets stuck on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Use double <A HREF="quotes.html#quotes">quotes</A>.
Files:      src/testdir/shared.vim, src/testdir/test_startup.vim

Patch 7.4.2170
Problem:    Cannot get information about <A HREF="builtin.html#timers">timers</A>.
Solution:   Add <A HREF="builtin.html#timer_info()">timer_info()</A>.
Files:      src/evalfunc.c, src/ex_cmds2.c, src/proto/ex_cmds2.pro,
            runtime/doc/eval.txt

Patch 7.4.2171 (after 7.4.2170)
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> build fails.
Solution:   Add QueryPerformanceCounter().
Files:      src/ex_cmds2.c

Patch 7.4.2172
Problem:    No test for &quot;vim --help&quot;.
Solution:   Add a test.
Files:      src/testdir/test_startup.vim, src/testdir/shared.vim

Patch 7.4.2173 (after 7.4.2172)
Problem:    Can't test help on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Skip the test.
Files:      src/testdir/test_startup.vim

Patch 7.4.2174
Problem:    Adding duplicate flags to <A HREF="options.html#'whichwrap'">'whichwrap'</A> leaves commas behind.
Solution:   Also remove the commas. (Naruhiko Nishino)
Files:      src/Makefile, src/option.c, src/testdir/Make_all.mak,
            src/testdir/test_alot.vim, src/testdir/test_options.in,
            src/testdir/test_options.ok, src/testdir/test_options.vim

Patch 7.4.2175
Problem:    Insufficient <A HREF="testing.html#testing">testing</A> of <A HREF="if_cscop.html#cscope">cscope</A>.
Solution:   Add more tests. (Dominique Pelle)
Files:      src/testdir/test_cscope.vim

Patch 7.4.2176
Problem:    #ifdefs in main() are complicated.
Solution:   Always define vim_main2().  Move params to the file level.
            (suggested by Ken Takata)
Files:      src/main.c, src/structs.h, src/vim.h, src/if_mzsch.c,
            src/proto/if_mzsch.pro

Patch 7.4.2177
Problem:    No <A HREF="testing.html#testing">testing</A> for <A HREF="starting.html#-C">-C</A> and <A HREF="starting.html#-N">-N</A> command line flags, file arguments,
            startuptime.
Solution:   Add tests.
Files:      src/testdir/test_startup.vim, src/testdir/shared.vim

Patch 7.4.2178
Problem:    No test for reading from stdin.
Solution:   Add a test.
Files:      src/testdir/test_startup.vim, src/testdir/shared.vim

Patch 7.4.2179 (after 7.4.2178)
Problem:    Reading from stdin test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Strip the extra space.
Files:      src/testdir/test_startup.vim

Patch 7.4.2180
Problem:    There is no <A HREF="starting.html#easy">easy</A> way to stop all <A HREF="builtin.html#timers">timers</A>.  There is no way to
            temporary pause a <A HREF="builtin.html#timer">timer</A>.
Solution:   Add <A HREF="builtin.html#timer_stopall()">timer_stopall()</A> and <A HREF="builtin.html#timer_pause()">timer_pause()</A>.
Files:      src/evalfunc.c, src/ex_cmds2.c, src/proto/ex_cmds2.pro,
            src/structs.h, src/testdir/test_timers.vim,
            src/testdir/shared.vim, runtime/doc/eval.txt

Patch 7.4.2181
Problem:    Compiler warning for unused variable.
Solution:   Remove <A HREF="motion.html#it">it</A>. (Dominique Pelle)
Files:      src/ex_cmds2.c

Patch 7.4.2182
Problem:    Color Grey40 used in <A HREF="starting.html#startup">startup</A> but not in the short <A HREF="eval.html#list">list</A>.
Solution:   Add Grey40 to the builtin colors.
Files:      src/term.c

Patch 7.4.2183
Problem:    Sign tests are old style.
Solution:   Turn them into new style tests. (Dominique Pelle)
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/test_signs.in,
            src/testdir/test_signs.ok, src/testdir/test_signs.vim,

Patch 7.4.2184
Problem:    Tests that use RunVim() <A HREF="diff.html#do">do</A> not actually perform the test.
Solution:   Use &quot;return&quot; instead of &quot;call&quot;. (Ken Takata)
Files:      src/testdir/shared.vim

Patch 7.4.2185
Problem:    Test glob2regpat does not test much.
Solution:   Add a few more test cases. (Dominique Pelle)
Files:      src/testdir/test_glob2regpat.vim

Patch 7.4.2186
Problem:    Timers test is flaky.
Solution:   Relax the sleep time check.
Files:      src/testdir/test_timers.vim

Patch 7.4.2187 (after 7.4.2185)
Problem:    glob2regpat test fails on Windows.
Solution:   Remove the checks that use backslashes.
Files:      src/testdir/test_glob2regpat.vim

Patch 7.4.2188 (after 7.4.2146)
Problem:    Completion does not work properly with some plugins.
Solution:   Revert the part related to typing <A HREF="scroll.html#CTRL-E">CTRL-E</A>. (closes #972)
Files:      src/edit.c, src/testdir/test_popup.vim

Patch 7.4.2189
Problem:    Cannot detect encoding in a fifo.
Solution:   Extend the stdin way of detecting encoding to fifo.  Add a test
            for detecting encoding on stdin and fifo. (Ken Takata)
Files:      src/buffer.c, src/fileio.c, src/Makefile,
            src/testdir/Make_all.mak, src/testdir/test_startup_utf8.vim,
            src/vim.h

Patch 7.4.2190
Problem:    When <A HREF="starting.html#startup">startup</A> test fails it's not <A HREF="starting.html#easy">easy</A> to find out why.
            <A HREF="gui.html#GUI">GUI</A> test fails with <A HREF="gui_x11.html#Gnome">Gnome</A>.
Solution:   Add the help entry matches to a <A HREF="eval.html#list">list</A> an assert that.
            Set <A HREF="options.html#$HOME">$HOME</A> for <A HREF="gui_x11.html#Gnome">Gnome</A> to create .gnome2 directory.
Files:      src/testdir/test_startup.vim, src/testdir/test_gui.vim

Patch 7.4.2191
Problem:    No automatic prototype for vim_main2().
Solution:   Move the #endif. (Ken Takata)
Files:      src/main.c, src/vim.h, src/proto/main.pro

Patch 7.4.2192
Problem:    Generating prototypes with Cygwin doesn't work well.
Solution:   Change #ifdefs. (Ken Takata)
Files:      src/gui.h, src/gui_w32.c, src/ops.c, src/proto/fileio.pro,
            src/proto/message.pro, src/proto/normal.pro, src/proto/ops.pro,
            src/vim.h

Patch 7.4.2193
Problem:    With <A HREF="gui_x11.html#Gnome">Gnome</A> when the <A HREF="gui.html#GUI">GUI</A> can't start test_startup hangs.
Solution:   Call gui_mch_early_init_check(). (Hirohito Higashi)
Files:      src/gui.c, src/gui_gtk_x11.c, src/proto/gui_gtk_x11.pro

Patch 7.4.2194
Problem:    Sign tests don't cover enough.
Solution:   Add more test cases. (Dominique Pelle)
Files:      src/testdir/test_signs.vim

Patch 7.4.2195
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: The vimrun program does not support <A HREF="mbyte.html#Unicode">Unicode</A>.
Solution:   Use GetCommandLineW().  Cleanup old #ifdefs. (Ken Takata)
Files:      src/vimrun.c

Patch 7.4.2196
Problem:    glob2regpat test doesn't test everything on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Add patterns with <A HREF="intro.html#backslash">backslash</A> handling.
Files:      src/testdir/test_glob2regpat.vim

Patch 7.4.2197
Problem:    All <A HREF="eval.html#functions">functions</A> are freed on exit, which may hide leaks.
Solution:   Only free named <A HREF="eval.html#functions">functions</A>, not reference counted ones.
Files:      src/userfunc.c

Patch 7.4.2198
Problem:    Test alot sometimes fails under <A HREF="debug.html#valgrind">valgrind</A>. (Dominique Pelle)
Solution:   Avoid passing a callback with the wrong number of arguments.
Files:      src/testdir/test_partial.vim

Patch 7.4.2199
Problem:    In the <A HREF="gui.html#GUI">GUI</A> the cursor is hidden when redrawing any <A HREF="windows.html#window">window</A>,
            causing flicker.
Solution:   Only undraw the cursor when updating the <A HREF="windows.html#window">window</A> it's in.
Files:      src/screen.c, src/gui.c, src/proto/gui.pro, src/gui_gtk_x11.c

Patch 7.4.2200
Problem:    Cannot get all information about a <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A>.
Solution:   Add an optional argument to get/set loc/qf list(). (Yegappan
            Lakshmanan)
Files:      runtime/doc/eval.txt, src/evalfunc.c, src/proto/quickfix.pro,
            src/quickfix.c, src/tag.c, src/testdir/test_quickfix.vim

Patch 7.4.2201
Problem:    The sign column disappears when the last sign is deleted.
Solution:   Add the <A HREF="options.html#'signcolumn'">'signcolumn'</A> option. (Christian Brabandt)
Files:      runtime/doc/options.txt, runtime/optwin.vim, src/edit.c,
            src/move.c, src/option.c, src/option.h, src/proto/option.pro,
            src/screen.c, src/structs.h, src/testdir/test_options.vim

Patch 7.4.2202
Problem:    Build fails with small features.
Solution:   Correct option <A HREF="starting.html#initialization">initialization</A>.
Files:      src/option.c

Patch 7.4.2203
Problem:    Test fails with normal features.
Solution:   Check is <A HREF="sign.html#signs">signs</A> are supported.
Files:      src/testdir/test_options.vim

Patch 7.4.2204
Problem:    It is not <A HREF="starting.html#easy">easy</A> to get information about <A HREF="windows.html#buffers">buffers</A>, <A HREF="windows.html#windows">windows</A> and
            tabpages.
Solution:   Add <A HREF="builtin.html#getbufinfo()">getbufinfo()</A>, <A HREF="builtin.html#getwininfo()">getwininfo()</A> and <A HREF="builtin.html#gettabinfo()">gettabinfo()</A>. (Yegappan
            Lakshmanan)
Files:      runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/dict.c,
            src/evalfunc.c, src/option.c, src/proto/dict.pro,
            src/proto/option.pro, src/proto/window.pro,
            src/testdir/Make_all.mak, src/testdir/test_bufwintabinfo.vim,
            src/window.c, src/Makefile

Patch 7.4.2205
Problem:    <A HREF="options.html#'wildignore'">'wildignore'</A> always applies to <A HREF="builtin.html#getcompletion()">getcompletion()</A>.
Solution:   Add an option to use <A HREF="options.html#'wildignore'">'wildignore'</A> or not. (Yegappan Lakshmanan)
Files:      runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_cmdline.vim

Patch 7.4.2206
Problem:    Warning for unused function.
Solution:   Put the function inside #ifdef. (John Marriott)
Files:      src/evalfunc.c

Patch 7.4.2207
Problem:    The <A HREF="various.html#+xpm">+xpm</A> feature is not sorted properly in <A HREF="various.html#:version">:version</A> output.
Solution:   Move <A HREF="motion.html#it">it</A> up. (Tony Mechelynck)
Files:      src/version.c

Patch 7.4.2208
Problem:    Test for mappings is old style.
Solution:   Convert the test to new style.
Files:      src/testdir/test_mapping.vim, src/testdir/test_mapping.in,
            src/testdir/test_mapping.ok, src/Makefile,
            src/testdir/test_alot.vim, src/testdir/Make_all.mak

Patch 7.4.2209
Problem:    Cannot map &lt;M-&quot;&gt;. (Stephen Riehm)
Solution:   Solve the memory access problem in another way. (Dominique Pelle)
            Allow for using &lt;M-\&quot;&gt; in a <A HREF="eval.html#string">string</A>.
Files:      src/eval.c, src/gui_mac.c, src/misc2.c, src/option.c,
            src/proto/misc2.pro, src/syntax.c, src/term.c,
            src/testdir/test_mapping.vim

Patch 7.4.2210
Problem:    On OSX configure mixes up a <A HREF="if_pyth.html#Python">Python</A> framework and the <A HREF="os_unix.html#Unix">Unix</A> layout.
Solution:   Make configure check properly. (Tim <A HREF="change.html#D">D</A>. Smith, closes #980)
Files:      src/configure.in, src/auto/configure

Patch 7.4.2211
Problem:    Mouse support is not automatically enabled with simple term.
Solution:   Recognize &quot;st&quot; and other names. (Manuel Schiller, closes #963)
Files:      src/os_unix.c

Patch 7.4.2212
Problem:    <A HREF="motion.html#Mark">Mark</A> &quot; is not set when closing a <A HREF="windows.html#window">window</A> in another <A HREF="intro.html#tab">tab</A>. (Guraga)
Solution:   Check all tabs for the <A HREF="windows.html#window">window</A> to be valid. (based on patch by
            Hirohito Higashi, closes #974)
Files:      src/window.c, src/proto/window.pro, src/buffer.c,
            src/testdir/test_viminfo.vim

Patch 7.4.2213
Problem:    Cannot highlight the &quot;<A HREF="change.html#~">~</A>&quot; lines at the end of a <A HREF="windows.html#window">window</A> differently.
Solution:   Add the EndOfBuffer highlighting. (Marco Hinz, James McCoy)
Files:      runtime/doc/options.txt, runtime/doc/syntax.txt, src/option.c,
            src/screen.c, src/syntax.c, src/vim.h

Patch 7.4.2214
Problem:    A font that uses ligatures messes up the screen display.
Solution:   Put spaces between characters when building the glyph table.
            (based on a patch from Manuel Schiller)
Files:      src/gui_gtk_x11.c

Patch 7.4.2215
Problem:    It's not <A HREF="starting.html#easy">easy</A> to find out if a <A HREF="windows.html#window">window</A> is a <A HREF="quickfix.html#quickfix">quickfix</A> or location
            <A HREF="eval.html#list">list</A> <A HREF="windows.html#window">window</A>.
Solution:   Add &quot;loclist&quot; and &quot;<A HREF="quickfix.html#quickfix">quickfix</A>&quot; entries to the <A HREF="eval.html#dict">dict</A> returned by
            <A HREF="builtin.html#getwininfo()">getwininfo()</A>. (Yegappan Lakshmanan)
Files:      runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_bufwintabinfo.vim

Patch 7.4.2216 (after 7.4.2215)
Problem:    Test fails without the +sign feature.
Solution:   Only check for signcolumn with the +sign feature.
Files:      src/testdir/test_bufwintabinfo.vim

Patch 7.4.2217
Problem:    When using <A HREF="builtin.html#matchaddpos()">matchaddpos()</A> a character after the end of the line can
            be highlighted.
Solution:   Only highlight existing characters. (Hirohito Higashi)
Files:      src/screen.c, src/structs.h, src/testdir/test_match.vim

Patch 7.4.2218
Problem:    Can't build with <A HREF="various.html#+timers">+timers</A> when +digraph is not included.
Solution:   Change #ifdef for e_number_exp. (Damien)
Files:      src/globals.h

Patch 7.4.2219
Problem:    Recursive call to substitute gets stuck in <A HREF="eval.html#sandbox">sandbox</A>. (Nikolai
            Pavlov)
Solution:   Handle the recursive call. (Christian Brabandt, closes #950)
            Add a test.
Files:      src/ex_cmds.c, src/testdir/test_regexp_latin.vim

Patch 7.4.2220
Problem:    <A HREF="builtin.html#printf()">printf()</A> gives an error when the argument for &#37;s is not a <A HREF="eval.html#string">string</A>.
            (Ozaki Kiichi)
Solution:   Behave like invoking <A HREF="builtin.html#string()">string()</A> on the argument. (Ken Takata)
Files:      runtime/doc/eval.txt, src/message.c, src/testdir/test_expr.vim

Patch 7.4.2221
Problem:    <A HREF="builtin.html#printf()">printf()</A> does not support binary format.
Solution:   Add &#37;b and &#37;B. (Ozaki Kiichi)
Files:      runtime/doc/eval.txt, src/message.c, src/testdir/test_expr.vim

Patch 7.4.2222
Problem:    Sourcing a <A HREF="usr_41.html#script">script</A> where a character has 0x80 <A HREF="motion.html#as">as</A> a second byte does
            not work. (Filipe <A HREF="motion.html#L">L</A> <A HREF="motion.html#B">B</A> Correia)
Solution:   Turn 0x80 into K_SPECIAL KS_SPECIAL KE_FILLER. (Christian
            Brabandt, closes #728)  Add a test <A HREF="change.html#case">case</A>.
Files:      src/getchar.c, src/proto/getchar.pro, src/misc1.c,
            src/testdir/test_regexp_utf8.vim

Patch 7.4.2223
Problem:    Buffer overflow when using latin1 character with <A HREF="builtin.html#feedkeys()">feedkeys()</A>.
Solution:   Check for an illegal character.  Add a test.
Files:      src/testdir/test_regexp_utf8.vim, src/testdir/test_source_utf8.vim,
            src/testdir/test_alot_utf8.vim, src/Makefile, src/getchar.c,
            src/macros.h, src/evalfunc.c, src/os_unix.c, src/os_win32.c,
            src/spell.c,

Patch 7.4.2224
Problem:    Compiler warnings with older compiler and 64 bit numbers.
Solution:   Add &quot;LL&quot; to large values. (Mike Williams)
Files:      src/eval.c, src/evalfunc.c

Patch 7.4.2225
Problem:    Crash when placing a sign in a deleted buffer.
Solution:   Check for missing buffer name. (Dominique Pelle). Add a test.
Files:      src/ex_cmds.c, src/testdir/test_signs.vim

Patch 7.4.2226
Problem:    The field names used by <A HREF="builtin.html#getbufinfo()">getbufinfo()</A>, <A HREF="builtin.html#gettabinfo()">gettabinfo()</A> and
            <A HREF="builtin.html#getwininfo()">getwininfo()</A> are not consistent.
Solution:   Use bufnr, winnr and tabnr. (Yegappan Lakshmanan)
Files:      runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_bufwintabinfo.vim

Patch 7.4.2227
Problem:    <A HREF="intro.html#Tab">Tab</A> page tests are old style.
Solution:   Change into new style tests. (Hirohito Higashi)
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/test62.in,
            src/testdir/test62.ok, src/testdir/test_alot.vim,
            src/testdir/test_tabpage.vim

Patch 7.4.2228
Problem:    Test files have inconsistent modelines.
Solution:   Don't set <A HREF="options.html#'tabstop'">'tabstop'</A> to 2, use <A HREF="options.html#'sts'">'sts'</A> and <A HREF="options.html#'sw'">'sw'</A>.
Files:      src/testdir/README.txt, src/testdir/test_backspace_opt.vim,
            src/testdir/test_digraph.vim, src/testdir/test_gn.vim
            src/testdir/test_help_tagjump.vim,
            src/testdir/test_increment_dbcs.vim,
            src/testdir/test_increment.vim, src/testdir/test_match.vim,
            src/testdir/test_tagjump.vim, src/testdir/test_window_cmd.vim,
            src/testdir/test_regexp_latin.vim, src/testdir/test_timers.vim

Patch 7.4.2229
Problem:    Startup test fails on Solaris.
Solution:   Recognize a character device. (Danek Duvall)
Files:      src/buffer.c, src/fileio.c, src/proto/fileio.pro, src/vim.h

Patch 7.4.2230
Problem:    There is no equivalent of <A HREF="options.html#'smartcase'">'smartcase'</A> for a <A HREF="tagsrch.html#tag">tag</A> search.
Solution:   Add value &quot;followscs&quot; and &quot;smart&quot; to <A HREF="options.html#'tagcase'">'tagcase'</A>. (Christian
            Brabandt, closes #712) Turn tagcase test into new style.
Files:      runtime/doc/options.txt, runtime/doc/tagsrch.txt, src/option.h,
            src/tag.c, src/search.c, src/proto/search.pro,
            src/testdir/test_tagcase.in, src/testdir/test_tagcase.ok,
            src/testdir/test_tagcase.vim, src/Makefile,
            src/testdir/Make_all.mak, src/testdir/test_alot.vim

Patch 7.4.2231
Problem:    &quot;<A HREF="starting.html#:oldfiles">:oldfiles</A>&quot; output is a very long <A HREF="eval.html#list">list</A>.
Solution:   Add a <A HREF="pattern.html#pattern">pattern</A> argument. (Coot, closes #575)
Files:      runtime/doc/starting.txt, src/ex_cmds.h, src/eval.c,
            src/ex_cmds.c, src/proto/eval.pro, src/proto/ex_cmds.pro,
            src/testdir/test_viminfo.vim

Patch 7.4.2232
Problem:    The default ttimeoutlen is very long.
Solution:   Use &quot;100&quot;. (Hirohito Higashi)
Files:      runtime/defaults.vim

Patch 7.4.2233
Problem:    Crash when using <A HREF="builtin.html#funcref()">funcref()</A> with invalid name. (Dominique Pelle)
Solution:   Check for NULL translated name.
Files:      src/evalfunc.c, src/testdir/test_expr.vim

Patch 7.4.2234
Problem:    Can't build with <A HREF="various.html#+eval">+eval</A> but without <A HREF="various.html#+quickfix">+quickfix</A>. (John Marriott)
Solution:   Move skip_vimgrep_pat() to separate #ifdef block.
Files:      src/quickfix.c

Patch 7.4.2235
Problem:    <A HREF="builtin.html#submatch()">submatch()</A> does not check for a valid argument.
Solution:   Give an error if the argument is out of range. (Dominique Pelle)
Files:      src/evalfunc.c, src/testdir/test_expr.vim

Patch 7.4.2236
Problem:    The <A HREF="options.html#'langnoremap'">'langnoremap'</A> option leads to double negatives.  And <A HREF="motion.html#it">it</A> does
            not work for the last character of a <A HREF="map.html#mapping">mapping</A>.
Solution:   Add <A HREF="options.html#'langremap'">'langremap'</A> with the opposite value.  Keep <A HREF="options.html#'langnoremap'">'langnoremap'</A> for
            backwards compatibility.  Make <A HREF="motion.html#it">it</A> work for the last character of a
            <A HREF="map.html#mapping">mapping</A>.  Make the test work.
Files:      runtime/doc/options.txt, runtime/defaults.vim, src/option.c,
            src/option.h, src/macros.h, src/testdir/test_mapping.vim

Patch 7.4.2237
Problem:    Can't use &quot;<A HREF="repeat.html#.">.</A>&quot; and &quot;<A HREF="motion.html#$">$</A>&quot; with &quot;<A HREF="tabpage.html#:tab">:tab</A>&quot;.
Solution:   Support a range for &quot;<A HREF="tabpage.html#:tab">:tab</A>&quot;. (Hirohito Higashi)
Files:      runtime/doc/tabpage.txt, src/ex_docmd.c,
            src/testdir/test_tabpage.vim

Patch 7.4.2238
Problem:    With SGR mouse reporting (suckless <A HREF="terminal.html#terminal">terminal</A>) the mouse release and
            scroll up/down is confused.
Solution:   Don't see a release <A HREF="motion.html#as">as</A> a scroll up/down. (Ralph Eastwood)
Files:      src/term.c

Patch 7.4.2239
Problem:    Warning for missing declaration of skip_vimgrep_pat(). (John
            Marriott)
Solution:   Move <A HREF="motion.html#it">it</A> to another file.
Files:      src/quickfix.c, src/proto/quickfix.pro, src/ex_cmds.c,
            src/proto/ex_cmds.pro

Patch 7.4.2240
Problem:    Tests using the sleep time can be flaky.
Solution:   Use <A HREF="builtin.html#reltime()">reltime()</A> if available. (Partly by Shane Harper)
Files:      src/testdir/shared.vim, src/testdir/test_timers.vim

Patch 7.4.2241 (after 7.4.2240)
Problem:    Timer test sometimes fails.
Solution:   Increase the maximum time for <A HREF="repeat.html#repeating">repeating</A> <A HREF="builtin.html#timer">timer</A>.
Files:      src/testdir/test_timers.vim

Patch 7.4.2242 (after 7.4.2240)
Problem:    Timer test sometimes fails.
Solution:   Increase the maximum time for callback <A HREF="builtin.html#timer">timer</A> test.
Files:      src/testdir/test_timers.vim

Patch 7.4.2243
Problem:    Warning for assigning negative value to unsigned. (Danek Duvall)
Solution:   Make cterm_normal_fg_gui_color and _bg_ guicolor_T, cast to long_u
            only when an unsigned is needed.
Files:      src/structs.h, src/globals.h, src/screen.c, src/term.c,
            src/syntax.c, src/gui_gtk_x11.c, src/gui.c, src/gui_mac.c,
            src/gui_photon.c, src/gui_w32.c, src/gui_x11.c,
            src/proto/term.pro, src/proto/gui_gtk_x11.pro,
            src/proto/gui_mac.pro, src/proto/gui_photon.pro,
            src/proto/gui_w32.pro, src/proto/gui_x11.pro

Patch 7.4.2244
Problem:    Adding <A HREF="pattern.html#pattern">pattern</A> to &quot;<A HREF="starting.html#:oldfiles">:oldfiles</A>&quot; is not a generic solution.
Solution:   Add the &quot;<A HREF="various.html#:filter">:filter</A> /pat/ cmd&quot; command modifier.  Only works for some
            commands right now.
Files:      src/structs.h, src/ex_docmd.c, src/ex_cmds.h, src/message.c,
            src/proto/message.pro, runtime/doc/starting.txt,
            runtime/doc/various.txt, src/testdir/test_viminfo.vim,
            src/testdir/test_alot.vim, src/testdir/test_filter_cmd.vim,
            src/Makefile

Patch 7.4.2245 (after 7.4.2244)
Problem:    Filter test fails.
Solution:   Include missing changes.
Files:      src/buffer.c

Patch 7.4.2246 (after 7.4.2244)
Problem:    Oldfiles test fails.
Solution:   Include missing changes.
Files:      src/ex_cmds.c

Patch 7.4.2247 (after 7.4.2244)
Problem:    Tiny build fails. (Tony Mechelynck)
Solution:   Remove #ifdef.
Files:      src/ex_cmds.c

Patch 7.4.2248
Problem:    When cancelling the <A HREF="tagsrch.html#:ptjump">:ptjump</A> prompt a preview <A HREF="windows.html#window">window</A> is opened for
            a following command.
Solution:   Reset g_do_tagpreview. (Hirohito Higashi)  Add a test.  Avoid that
            the test runner gets stuck in trying to close a <A HREF="windows.html#window">window</A>.
Files:      src/tag.c, src/testdir/test_tagjump.vim, src/testdir/runtest.vim

Patch 7.4.2249
Problem:    Missing colon in error message.
Solution:   Add the colon. (Dominique Pelle)
Files:      src/userfunc.c

Patch 7.4.2250
Problem:    Some error <A HREF="message.html#messages">messages</A> cannot be translated.
Solution:   Enclose them in _() and N_(). (Dominique Pelle)
Files:      src/channel.c, src/evalfunc.c, src/ex_cmds.c, src/spell.c,
            src/window.c

Patch 7.4.2251
Problem:    In rare cases diffing 4 <A HREF="windows.html#buffers">buffers</A> is not enough.
Solution:   Raise the limit to 8. (closes #1000)
Files:      src/structs.h, runtime/doc/diff.txt

Patch 7.4.2252
Problem:    Compiler warnings for signed/unsigned in <A HREF="eval.html#expression">expression</A>.
Solution:   Remove type cast. (Dominique Pelle)
Files:      src/vim.h

Patch 7.4.2253
Problem:    Check for Windows 3.1 will always return <A HREF="vim9.html#false">false</A>.  (Christian
            Brabandt)
Solution:   Remove the dead code.
Files:      src/gui_w32.c, src/evalfunc.c, src/ex_cmds.c, src/option.c,
            src/os_win32.c, src/version.c, src/proto/gui_w32.pro

Patch 7.4.2254
Problem:    Compiler warnings in <A HREF="if_mzsch.html#MzScheme">MzScheme</A> code.
Solution:   Add UNUSED.  Remove unreachable code.
Files:      src/if_mzsch.c

Patch 7.4.2255
Problem:    The <A HREF="usr_41.html#script">script</A> that checks translations can't handle plurals.
Solution:   Check for plural msgid and msgstr entries.  Leave the cursor on
            the first error.
Files:      src/po/check.vim

Patch 7.4.2256
Problem:    Coverity complains about <A HREF="vim9.html#null">null</A> pointer check.
Solution:   Remove wrong and superfluous error check.
Files:      src/eval.c

Patch 7.4.2257
Problem:    Coverity complains about not checking for NULL.
Solution:   Check for out of memory.
Files:      src/if_py_both.h

Patch 7.4.2258
Problem:    Two JSON <A HREF="message.html#messages">messages</A> are sent without a separator.
Solution:   Separate <A HREF="message.html#messages">messages</A> with a NL. (closes #1001)
Files:      src/json.c, src/channel.c, src/vim.h, src/testdir/test_channel.py,
            src/testdir/test_channel.vim, runtime/doc/channel.txt

Patch 7.4.2259
Problem:    With <A HREF="options.html#'incsearch'">'incsearch'</A> can only see the next match.
Solution:   Make CTRL-N/CTRL-P move to the previous/next match. (Christian
            Brabandt)
Files:      runtime/doc/cmdline.txt, src/ex_getln.c, src/testdir/Make_all.mak,
            src/testdir/test_search.vim, src/Makefile

Patch 7.4.2260 (after 7.4.2258)
Problem:    <A HREF="eval.html#Channel">Channel</A> test is flaky.
Solution:   Add a newline to separate JSON <A HREF="message.html#messages">messages</A>.
Files:      src/testdir/test_channel.vim

Patch 7.4.2261 (after 7.4.2259)
Problem:    Build fails with small features.
Solution:   Move &quot;else&quot; inside the #ifdef.
Files:      src/ex_getln.c

Patch 7.4.2262
Problem:    Fail to read <A HREF="sponsor.html#register">register</A> content from <A HREF="starting.html#viminfo">viminfo</A> if <A HREF="motion.html#it">it</A> is 438 characters
            long. (John Chen)
Solution:   Adjust the check for line wrapping. (closes #1010)
Files:      src/testdir/test_viminfo.vim, src/ex_cmds.c

Patch 7.4.2263
Problem:    <A HREF="various.html#:filter">:filter</A> does not work for many commands.  Can only get matching
            <A HREF="message.html#messages">messages</A>.
Solution:   Make <A HREF="various.html#:filter">:filter</A> work for <A HREF="map.html#:command">:command</A>, <A HREF="map.html#:map">:map</A>, <A HREF="various.html#:list">:list</A>, <A HREF="various.html#:number">:number</A> and <A HREF="various.html#:print">:print</A>.
            Make &quot;:filter!&quot; show non-matching lines.
Files:      src/getchar.c, src/ex_cmds.c, src/ex_cmds.h, src/ex_docmd.c,
            src/message.c, src/structs.h, src/testdir/test_filter_cmd.vim

Patch 7.4.2264
Problem:    When adding entries to an empty <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A> the title is reset.
Solution:   Improve handling of the title. (Yegappan Lakshmanan)
Files:      src/testdir/test_quickfix.vim, src/quickfix.c

Patch 7.4.2265
Problem:    <A HREF="builtin.html#printf()">printf()</A> isn't tested much.
Solution:   Add more tests for <A HREF="builtin.html#printf()">printf()</A>. (Dominique Pelle)
Files:      src/testdir/test_expr.vim

Patch 7.4.2266 (after 7.4.2265)
Problem:    <A HREF="builtin.html#printf()">printf()</A> test fails on Windows. &quot;-inf&quot; is not used.
Solution:   Check for Windows-specific values for &quot;nan&quot;.  Add sign to &quot;inf&quot;
            when appropriate.
Files:      src/message.c, src/testdir/test_expr.vim

Patch 7.4.2267 (after 7.4.2266)
Problem:    Build fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Add define to get <A HREF="builtin.html#isinf()">isinf()</A>.
Files:      src/message.c

Patch 7.4.2268 (after 7.4.2259)
Problem:    Using <A HREF="motion.html#CTRL-N">CTRL-N</A> and <A HREF="motion.html#CTRL-P">CTRL-P</A> for incsearch shadows completion keys.
Solution:   Use <A HREF="tagsrch.html#CTRL-T">CTRL-T</A> and <A HREF="editing.html#CTRL-G">CTRL-G</A> instead.
Files:      runtime/doc/cmdline.txt, src/ex_getln.c,
            src/testdir/test_search.vim

Patch 7.4.2269
Problem:    Using <A HREF="options.html#'hlsearch'">'hlsearch'</A> highlighting instead of matchpos if there is no
            search match.
Solution:   Pass NULL <A HREF="motion.html#as">as</A> last item to next_search_hl() when searching for
            <A HREF="options.html#'hlsearch'">'hlsearch'</A> match. (Shane Harper, closes #1013)
Files:      src/screen.c, src/testdir/test_match.vim

Patch 7.4.2270
Problem:    Insufficient <A HREF="testing.html#testing">testing</A> for NUL bytes on a raw <A HREF="channel.html#channel">channel</A>.
Solution:   Add a test for <A HREF="editing.html#writing">writing</A> and reading.
Files:      src/testdir/test_channel.vim

Patch 7.4.2271
Problem:    Netbeans test doesn't read settings from file.
Solution:   Use &quot;-Xnbauth&quot;.
Files:      src/testdir/test_netbeans.vim

Patch 7.4.2272
Problem:    <A HREF="builtin.html#getbufinfo()">getbufinfo()</A>, <A HREF="builtin.html#getwininfo()">getwininfo()</A> and <A HREF="builtin.html#gettabinfo()">gettabinfo()</A> are inefficient.
Solution:   Instead of making a copy of the <A HREF="eval.html#variables">variables</A> dictionary, use a
            reference.
Files:      src/evalfunc.c

Patch 7.4.2273
Problem:    <A HREF="builtin.html#getwininfo()">getwininfo()</A> and <A HREF="builtin.html#getbufinfo()">getbufinfo()</A> are inefficient.
Solution:   Do not make a copy of all window/buffer-local <A HREF="options.html#options">options</A>.  Make <A HREF="motion.html#it">it</A>
            possible to get them with <A HREF="builtin.html#gettabwinvar()">gettabwinvar()</A> or <A HREF="builtin.html#getbufvar()">getbufvar()</A>.
Files:      src/evalfunc.c, src/eval.c, src/testdir/test_bufwintabinfo.vim,
            runtime/doc/eval.txt

Patch 7.4.2274
Problem:    Command line completion on &quot;find **/filename&quot; drops sub-directory.
Solution:   Handle this <A HREF="change.html#case">case</A> separately. (Harm te Hennepe, closes #932, closes
            #939)
Files:      src/misc1.c, src/testdir/test_cmdline.vim

Patch 7.4.2275
Problem:    &quot;:diffoff!&quot; does not remove filler lines.
Solution:   Force a redraw and invalidate the cursor. (closes #1014)
Files:      src/diff.c, src/testdir/test_diffmode.vim

Patch 7.4.2276
Problem:    Command line test fails on Windows when run <A HREF="if_cscop.html#twice">twice</A>.
Solution:   Wipe the buffer so that the directory can be deleted.
Files:      src/testdir/test_cmdline.vim

Patch 7.4.2277
Problem:    Memory leak in <A HREF="builtin.html#getbufinfo()">getbufinfo()</A> when there is a sign. (Dominique
            Pelle)
Solution:   Remove extra vim_strsave().
Files:      src/evalfunc.c

Patch 7.4.2278
Problem:    New users have no idea of the <A HREF="options.html#'scrolloff'">'scrolloff'</A> option.
Solution:   Set <A HREF="options.html#'scrolloff'">'scrolloff'</A> in <A HREF="starting.html#defaults.vim">defaults.vim</A>.
Files:      runtime/defaults.vim

Patch 7.4.2279
Problem:    Starting <A HREF="diff.html#diff">diff</A> mode with the cursor in the last line might end up
            only showing one closed fold. (John Beckett)
Solution:   Scroll the <A HREF="windows.html#window">window</A> to show the same relative cursor position.
Files:      src/diff.c, src/window.c, src/proto/window.pro

Patch 7.4.2280
Problem:    <A HREF="builtin.html#printf()">printf()</A> doesn't handle infinity float values correctly.
Solution:   Add a table with possible infinity values. (Dominique Pelle)
Files:      src/message.c, src/testdir/test_expr.vim

Patch 7.4.2281
Problem:    Timer test fails sometimes.
Solution:   Reduce minimum time by 1 msec.
Files:      src/testdir/test_timers.vim

Patch 7.4.2282
Problem:    When a child process is very fast waiting 10 msec for <A HREF="motion.html#it">it</A> is
            noticeable. (Ramel Eshed)
Solution:   Start waiting for 1 msec and gradually increase.
Files:      src/os_unix.c

Patch 7.4.2283
Problem:    Part of &quot;<A HREF="starting.html#:oldfiles">:oldfiles</A>&quot; command isn't cleared. (Lifepillar)
Solution:   Clear the rest of the line. (closes 1018)
Files:      src/ex_cmds.c

Patch 7.4.2284
Problem:    Comment in scope header file is outdated. (KillTheMule)
Solution:   Point to the help instead. (closes #1017)
Files:      src/if_cscope.h

Patch 7.4.2285
Problem:    Generated files are outdated.
Solution:   Generate the files.  Avoid <A HREF="message.html#errors">errors</A> when generating prototypes.
Files:      src/if_mzsch.h, src/Makefile, src/option.h, src/os_mac_conv.c,
            src/os_amiga.c, src/vim.h, src/structs.h, src/os_win32.c,
            src/if_lua.c, src/proto/mbyte.pro

Patch 7.4.2286
Problem:    The tee program isn't included.  Makefile contains build
            instructions that don't work.
Solution:   Update the Filelist and build instructions. Remove build
            instructions for <A HREF="os_dos.html#DOS">DOS</A> and old Windows.  Add the tee program.
Files:      Filelist, Makefile, nsis/gvim.nsi

Patch 7.4.2287
Problem:    The callback passed to <A HREF="channel.html#ch_sendraw()">ch_sendraw()</A> is not used.
Solution:   Pass the read part, not the send part. (haya14busa, closes #1019)
Files:      src/channel.c, src/testdir/test_channel.vim

Patch 7.4.2288
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> build instructions are clumsy. &quot;dosbin&quot; doesn't build.
Solution:   Add rename.bat. Fix building &quot;dosbin&quot;.
Files:      Makefile, Filelist, rename.bat

Patch 7.4.2289
Problem:    When installing and $DESTDIR is set the icons probably won't be
            installed.
Solution:   Create the icon directories if $DESTDIR is not empty. (Danek
            Duvall)
Files:      src/Makefile

Patch 7.4.2290
Problem:    Compiler warning in tiny build. (Tony Mechelynck)
Solution:   Add #ifdef around infinity_str().
Files:      src/message.c

Patch 7.4.2291
Problem:    <A HREF="builtin.html#printf()">printf()</A> handles floats wrong when there is a sign.
Solution:   Fix placing the sign.  Add tests. (Dominique Pelle)
Files:      src/testdir/test_expr.vim, runtime/doc/eval.txt, src/message.c

Patch 7.4.2292 (after 7.4.2291)
Problem:    Not all systems understand &#37;F in <A HREF="builtin.html#printf()">printf()</A>.
Solution:   Use &#37;f.
Files:      src/message.c

Patch 7.4.2293
Problem:    Modelines in source code are inconsistent.
Solution:   Use the same line in most files.  Add <A HREF="options.html#'noet'">'noet'</A>.  (Naruhiko Nishino)
Files:      src/alloc.h, src/arabic.c, src/arabic.h, src/ascii.h,
            src/blowfish.c, src/buffer.c, src/channel.c, src/charset.c,
            src/crypt.c, src/crypt_zip.c, src/dict.c, src/diff.c,
            src/digraph.c, src/dosinst.c, src/dosinst.h, src/edit.c,
            src/eval.c, src/evalfunc.c, src/ex_cmds.c, src/ex_cmds.h,
            src/ex_cmds2.c, src/ex_docmd.c, src/ex_eval.c, src/ex_getln.c,
            src/farsi.c, src/farsi.h, src/feature.h, src/fileio.c, src/fold.c,
            src/getchar.c, src/glbl_ime.cpp, src/glbl_ime.h, src/globals.h,
            src/gui.c, src/gui.h, src/gui_at_fs.c, src/gui_at_sb.c,
            src/gui_at_sb.h, src/gui_athena.c, src/gui_beval.c,
            src/gui_beval.h, src/gui_gtk.c, src/gui_gtk_f.c, src/gui_gtk_f.h,
            src/gui_gtk_vms.h, src/gui_gtk_x11.c, src/gui_mac.c,
            src/gui_motif.c, src/gui_photon.c, src/gui_w32.c, src/gui_x11.c,
            src/gui_x11_pm.h, src/gui_xmdlg.c, src/gui_xmebw.c,
            src/gui_xmebw.h, src/gui_xmebwp.h, src/hangulin.c, src/hardcopy.c,
            src/hashtab.c, src/if_cscope.c, src/if_cscope.h, src/if_mzsch.c,
            src/if_mzsch.h, src/if_ole.cpp, src/if_perl.xs, src/if_perlsfio.c,
            src/if_python3.c, src/if_ruby.c, src/if_tcl.c, src/if_xcmdsrv.c,
            src/integration.c, src/integration.h, src/iscygpty.c, src/json.c,
            src/json_test.c, src/keymap.h, src/list.c, src/macros.h,
            src/main.c, src/mark.c, src/mbyte.c, src/memfile.c,
            src/memfile_test.c, src/memline.c, src/menu.c, src/message.c,
            src/message_test.c, src/misc1.c, src/misc2.c, src/move.c,
            src/nbdebug.c, src/nbdebug.h, src/netbeans.c, src/normal.c,
            src/ops.c, src/option.c, src/option.h, src/os_amiga.c,
            src/os_amiga.h, src/os_beos.c, src/os_beos.h, src/os_dos.h,
            src/os_mac.h, src/os_mac_conv.c, src/os_macosx.m, src/os_mint.h,
            src/os_mswin.c, src/os_qnx.c, src/os_qnx.h, src/os_unix.c,
            src/os_unix.h, src/os_unixx.h, src/os_vms.c, src/os_w32dll.c,
            src/os_w32exe.c, src/os_win32.c, src/os_win32.h, src/popupmnu.c,
            src/proto.h, src/pty.c, src/quickfix.c, src/regexp.c,
            src/regexp.h, src/regexp_nfa.c, src/screen.c, src/search.c,
            src/sha256.c, src/spell.c, src/spell.h, src/spellfile.c,
            src/structs.h, src/syntax.c, src/tag.c, src/term.c, src/term.h,
            src/termlib.c, src/ui.c, src/undo.c, src/uninstal.c,
            src/userfunc.c, src/version.c, src/version.h, src/vim.h,
            src/vim.rc, src/vimio.h, src/vimrun.c, src/winclip.c,
            src/window.c, src/workshop.c, src/workshop.h, src/wsdebug.c,
            src/wsdebug.h, src/xpm_w32.c

Patch 7.4.2294
Problem:    Sign test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A> when using the distributed <A HREF="pi_zip.html#zip">zip</A>
            archives.
Solution:   Create dummy files instead of relying on files in the pixmaps
            directory.
Files:      src/testdir/test_signs.vim

Patch 7.4.2295 (after 7.4.2293)
Problem:    <A HREF="if_cscop.html#Cscope">Cscope</A> test fails.
Solution:   Avoid checking for specific line and column numbers.
Files:      src/testdir/test_cscope.vim

Patch 7.4.2296
Problem:    No tests for <A HREF="undo.html#:undolist">:undolist</A> and &quot;<A HREF="undo.html#U">U</A>&quot; command.
Solution:   Add tests. (Dominique Pelle)
Files:      src/testdir/test_undo.vim

Patch 7.4.2297
Problem:    When starting a <A HREF="channel.html#job">job</A> that reads from a buffer and reaching the end,
            the <A HREF="channel.html#job">job</A> hangs.
Solution:   Close the pipe or socket when all lines were read.
Files:      src/channel.c, src/testdir/test_channel.vim

Patch 7.4.2298
Problem:    It is not possible to close the &quot;in&quot; part of a <A HREF="channel.html#channel">channel</A>.
Solution:   Add <A HREF="channel.html#ch_close_in()">ch_close_in()</A>.
Files:      src/evalfunc.c, src/channel.c, src/proto/channel.pro,
            src/testdir/test_channel.vim, runtime/doc/eval.txt,
            runtime/doc/channel.txt

Patch 7.4.2299
Problem:    <A HREF="autocmd.html#QuickFixCmdPre">QuickFixCmdPre</A> and <A HREF="autocmd.html#QuickFixCmdPost">QuickFixCmdPost</A> <A HREF="autocmd.html#autocommands">autocommands</A> are not always
            triggered.
Solution:   Also trigger on &quot;<A HREF="quickfix.html#:cexpr">:cexpr</A>&quot;, &quot;<A HREF="quickfix.html#:cbuffer">:cbuffer</A>&quot;, etc. (Yegappan Lakshmanan)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 7.4.2300
Problem:    Get warning for <A HREF="change.html#deleting">deleting</A> <A HREF="autocmd.html#autocommand">autocommand</A> group when the <A HREF="autocmd.html#autocommand">autocommand</A>
            using the group is scheduled for deletion. (Pavol Juhas)
Solution:   Check for deleted <A HREF="autocmd.html#autocommand">autocommand</A>.
Files:      src/fileio.c, src/testdir/test_autocmd.vim

Patch 7.4.2301
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: some files remain after <A HREF="testing.html#testing">testing</A>.
Solution:   Close the <A HREF="channel.html#channel">channel</A> output file.  Wait for the file handle to be
            closed before <A HREF="change.html#deleting">deleting</A> the file.
Files:      src/os_win32.c, src/testdir/test_channel.vim

Patch 7.4.2302
Problem:    Default interface versions for <A HREF="os_win32.html#MS-Windows">MS-Windows</A> are outdated.
Solution:   Use Active <A HREF="if_perl.html#Perl">Perl</A> 5.24, <A HREF="if_pyth.html#Python">Python</A> 3.5.2.  Could only make <A HREF="motion.html#it">it</A> work with
            <A HREF="if_ruby.html#Ruby">Ruby</A> 1.9.2.
Files:      src/bigvim.bat, src/bigvim64.bat, src/Make_mvc.mak

Patch 7.4.2303
Problem:    When using &quot;is&quot; the mode isn't always updated.
Solution:   Redraw the command line. (Christian Brabandt)
Files:      src/search.c

Patch 7.4.2304
Problem:    In a <A HREF="builtin.html#timer">timer</A> callback the <A HREF="builtin.html#timer">timer</A> itself can't be found or stopped.
            (Thinca)
Solution:   Do not remove the <A HREF="builtin.html#timer">timer</A> from the <A HREF="eval.html#list">list</A>, remember whether <A HREF="motion.html#it">it</A> was
            freed.
Files:      src/ex_cmds2.c, src/testdir/test_timers.vim

Patch 7.4.2305
Problem:    Marks, writefile and nested function tests are old style.
Solution:   Turn them into new style tests. (Yegappan Lakshmanan)
Files:      src/testdir/Make_all.mak, src/testdir/test_marks.in,
            src/testdir/test_marks.ok, src/testdir/test_marks.vim,
            src/testdir/test_nested_function.in,
            src/testdir/test_nested_function.ok,
            src/testdir/test_nested_function.vim,
            src/testdir/test_writefile.in, src/testdir/test_writefile.ok,
            src/testdir/test_writefile.vim, src/Makefile

Patch 7.4.2306
Problem:    Default value for <A HREF="options.html#'langremap'">'langremap'</A> is wrong.
Solution:   Set the right value. (Jrgen Krmer)  Add a test.
Files:      src/option.c, src/testdir/test_mapping.vim

Patch 7.4.2307
Problem:    Several tests are old style.
Solution:   Turn them into new style tests. (Yegappan Lakshmanan)
Files:      src/testdir/Make_all.mak, src/testdir/test102.in,
            src/testdir/test102.ok, src/testdir/test46.in,
            src/testdir/test46.ok, src/testdir/test81.in,
            src/testdir/test81.ok, src/testdir/test_charsearch.in,
            src/testdir/test_charsearch.ok, src/testdir/test_charsearch.vim,
            src/testdir/test_fnameescape.vim, src/testdir/test_substitute.vim,
            src/Makefile

Patch 7.4.2308 (after 7.4.2307)
Problem:    Old charsearch test still listed in Makefile.
Solution:   Remove the line.
Files:      src/testdir/Make_all.mak

Patch 7.4.2309
Problem:    Crash when doing tabnext in a <A HREF="autocmd.html#BufUnload">BufUnload</A> autocmd. (Dominique Pelle)
Solution:   When detecting that the <A HREF="intro.html#tab">tab</A> page changed, don't just abort but
            delete the <A HREF="windows.html#window">window</A> where w_buffer is NULL.
Files:      src/window.c, src/testdir/test_tabpage.vim

Patch 7.4.2310 (after 7.4.2304)
Problem:    Accessing freed memory when a <A HREF="builtin.html#timer">timer</A> does not repeat.
Solution:   Free after removing <A HREF="motion.html#it">it</A>. (Dominique Pelle)
Files:      src/ex_cmds2.c

Patch 7.4.2311
Problem:    Appveyor 64 bit build still using <A HREF="if_pyth.html#Python">Python</A> 3.4
Solution:   Switch to <A HREF="if_pyth.html#Python">Python</A> 3.5. (Ken Takata, closes #1032)
Files:      appveyor.yml, src/appveyor.bat

Patch 7.4.2312
Problem:    Crash when <A HREF="autocmd.html#autocommand">autocommand</A> moves to another <A HREF="intro.html#tab">tab</A>. (Dominique Pelle)
Solution:   When navigating to another <A HREF="windows.html#window">window</A> halfway the <A HREF="editing.html#:edit">:edit</A> command go
            back to the right <A HREF="windows.html#window">window</A>.
Files:      src/buffer.c, src/ex_cmds.c, src/ex_getln.c, src/ex_docmd.c,
            src/window.c, src/proto/ex_getln.pro, src/testdir/test_tabpage.vim

Patch 7.4.2313
Problem:    Crash when <A HREF="change.html#deleting">deleting</A> an augroup and listing an <A HREF="autocmd.html#autocommand">autocommand</A>.
            (Dominique Pelle)
Solution:   Make sure deleted_augroup is valid.
Files:      src/fileio.c, src/testdir/test_autocmd.vim

Patch 7.4.2314
Problem:    No error when <A HREF="change.html#deleting">deleting</A> an augroup while it's the current one.
Solution:   Disallow <A HREF="change.html#deleting">deleting</A> an augroup when it's the current one.
Files:      src/fileio.c, src/testdir/test_autocmd.vim

Patch 7.4.2315
Problem:    Insufficient <A HREF="testing.html#testing">testing</A> for <A HREF="intro.html#Normal">Normal</A> mode commands.
Solution:   Add a big test. (Christian Brabandt, closes #1029)
Files:      src/Makefile, src/testdir/Make_all.mak,
            src/testdir/test_normal.vim

Patch 7.4.2316
Problem:    <A HREF="eval.html#Channel">Channel</A> sort test is flaky.
Solution:   Add a check the output has been read.
Files:      src/testdir/test_channel.vim

Patch 7.4.2317 (after 7.4.2315)
Problem:    <A HREF="intro.html#Normal">Normal</A> mode tests fail on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Do some tests only on <A HREF="os_unix.html#Unix">Unix</A>.  Set <A HREF="options.html#'fileformat'">'fileformat'</A> to &quot;<A HREF="os_unix.html#unix">unix</A>&quot;.
Files:      src/testdir/test_normal.vim

Patch 7.4.2318
Problem:    When <A HREF="options.html#'incsearch'">'incsearch'</A> is not set <A HREF="tagsrch.html#CTRL-T">CTRL-T</A> and <A HREF="editing.html#CTRL-G">CTRL-G</A> are not inserted <A HREF="motion.html#as">as</A>
            before.
Solution:   Move #ifdef and don't use goto.
Files:      src/ex_getln.c

Patch 7.4.2319
Problem:    No way for a system wide <A HREF="starting.html#vimrc">vimrc</A> to stop loading <A HREF="starting.html#defaults.vim">defaults.vim</A>.
            (Christian Hesse)
Solution:   Bail out of <A HREF="starting.html#defaults.vim">defaults.vim</A> if <A HREF="starting.html#skip_defaults_vim">skip_defaults_vim</A> was set.
Files:      runtime/defaults.vim

Patch 7.4.2320
Problem:    Redraw problem when using <A HREF="options.html#'incsearch'">'incsearch'</A>.
Solution:   Save the current <A HREF="starting.html#view">view</A> when <A HREF="change.html#deleting">deleting</A> characters. (Christian
            Brabandt) Fix that the &#39;&#34;' <A HREF="motion.html#mark">mark</A> is set in the wrong position. Don't
            change the search start when using BS.
Files:      src/ex_getln.c, src/normal.c, src/testdir/test_search.vim

Patch 7.4.2321
Problem:    When a test is commented out we forget about <A HREF="motion.html#it">it</A>.
Solution:   Let a test throw an exception with &quot;Skipped&quot; and <A HREF="eval.html#list">list</A> skipped test
            <A HREF="eval.html#functions">functions</A>. (Christian Brabandt)
Files:      src/testdir/Makefile, src/testdir/runtest.vim,
            src/testdir/test_popup.vim, src/testdir/README.txt

Patch 7.4.2322
Problem:    Access memory beyond the end of the line. (Dominique Pelle)
Solution:   Adjust the cursor column.
Files:      src/move.c, src/testdir/test_normal.vim

Patch 7.4.2323
Problem:    Using freed memory when using <A HREF="options.html#'formatexpr'">'formatexpr'</A>. (Dominique Pelle)
Solution:   Make a copy of <A HREF="options.html#'formatexpr'">'formatexpr'</A> before evaluating <A HREF="motion.html#it">it</A>.
Files:      src/ops.c, src/testdir/test_normal.vim

Patch 7.4.2324
Problem:    Crash when editing a new buffer and <A HREF="autocmd.html#BufUnload">BufUnload</A> <A HREF="autocmd.html#autocommand">autocommand</A> wipes
            out the new buffer. (Norio Takagi)
Solution:   Don't allow wiping out this buffer. (partly by Hirohito Higashi)
            Move old style test13 into test_autocmd. Avoid ml_get error when
            editing a file.
Files:      src/structs.h, src/buffer.c, src/ex_cmds.c, src/ex_docmd.c,
            src/window.c, src/testdir/test13.in, src/testdir/test13.ok,
            src/testdir/test_autocmd.vim, src/testdir/Make_all.mak,
            src/Makefile

Patch 7.4.2325 (after 7.4.2324)
Problem:    Tiny build fails.
Solution:   Add #ifdef.
Files:      src/buffer.c

Patch 7.4.2326
Problem:    Illegal memory access when <A HREF="visual.html#Visual">Visual</A> selection starts in invalid
            position. (Dominique Pelle)
Solution:   Correct position when needed.
Files:      src/normal.c, src/misc2.c, src/proto/misc2.pro

Patch 7.4.2327
Problem:    Freeing a variable that is on the stack.
Solution:   Don't free res_tv or err_tv. (Ozaki Kiichi)
Files:      src/channel.c

Patch 7.4.2328
Problem:    Crash when <A HREF="autocmd.html#BufWinLeave">BufWinLeave</A> autocmd goes to another <A HREF="intro.html#tab">tab</A> page. (Hirohito
            Higashi)
Solution:   Make close_buffer() go back to the right <A HREF="windows.html#window">window</A>.
Files:      src/buffer.c, src/testdir/test_autocmd.vim

Patch 7.4.2329
Problem:    Error for <A HREF="builtin.html#min()">min()</A> and <A HREF="builtin.html#max()">max()</A> contains &#37;s. (Nikolai Pavlov)
Solution:   Pass the function name. (closes #1040)
Files:      src/evalfunc.c, src/testdir/test_expr.vim

Patch 7.4.2330
Problem:    Coverity complains about not checking curwin to be NULL.
Solution:   Use firstwin to avoid the warning.
Files:      src/buffer.c

Patch 7.4.2331
Problem:    Using <A HREF="change.html#CTRL-X">CTRL-X</A> <A HREF="visual.html#CTRL-V">CTRL-V</A> to complete a command line from <A HREF="insert.html#Insert">Insert</A> mode
            does not work after entering an <A HREF="eval.html#expression">expression</A> on the command line.
Solution:   Don't use &quot;ccline&quot; when not actually using a command line. (test
            by Hirohito Higashi)
Files:      src/edit.c, src/ex_getln.c, src/proto/ex_getln.pro,
            src/testdir/test_popup.vim

Patch 7.4.2332
Problem:    Crash when stop_timer() is called in a callback of a callback.
            Vim hangs when the <A HREF="builtin.html#timer">timer</A> callback uses too much time.
Solution:   Set tr_id to -1 when a <A HREF="builtin.html#timer">timer</A> is to be deleted. Don't keep calling
            callbacks forever. (Ozaki Kiichi)
Files:      src/evalfunc.c, src/ex_cmds2.c, src/structs.h,
            src/proto/ex_cmds2.pro, src/testdir/test_timers.vim

Patch 7.4.2333
Problem:    Outdated comments in test.
Solution:   Cleanup normal mode test. (Christian Brabandt)
Files:      src/testdir/test_normal.vim

Patch 7.4.2334
Problem:    On <A HREF="os_win32.html#MS-Windows">MS-Windows</A> test_getcwd leaves Xtopdir behind.
Solution:   Set <A HREF="options.html#'noswapfile'">'noswapfile'</A>. (Michael Soyka)
Files:      src/testdir/test_getcwd.in

Patch 7.4.2335
Problem:    <A HREF="builtin.html#taglist()">taglist()</A> is slow. (Luc Hermitte)
Solution:   Check for <A HREF="pattern.html#CTRL-C">CTRL-C</A> <A HREF="various.html#less">less</A> often when doing a linear search. (closes
            #1044)
Files:      src/tag.c

Patch 7.4.2336
Problem:    Running normal mode tests leave a couple of files behind.
            (Yegappan Lakshmanan)
Solution:   Delete the files. (Christian Brabandt)
Files:      src/testdir/test_normal.vim

Patch 7.4.2337
Problem:    <A HREF="builtin.html#taglist()">taglist()</A> is still slow. (Luc Hermitte)
Solution:   Check for <A HREF="pattern.html#CTRL-C">CTRL-C</A> <A HREF="various.html#less">less</A> often when finding duplicates.
Files:      src/tag.c

Patch 7.4.2338
Problem:    Can't build with small features. (John Marriott)
Solution:   Nearly always define FEAT_TAG_BINS.
Files:      src/feature.h, src/tag.c

Patch 7.4.2339
Problem:    <A HREF="intro.html#Tab">Tab</A> page test fails when run <A HREF="motion.html#as">as</A> fake root.
Solution:   Check <A HREF="options.html#'buftype'">'buftype'</A> instead of <A HREF="options.html#'filetype'">'filetype'</A>. (James McCoy, closes #1042)
Files:      src/testdir/test_tabpage.vim

Patch 7.4.2340
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: Building with <A HREF="if_ruby.html#Ruby">Ruby</A> uses old version.
Solution:   Update to 2.2.X. Use clearer name for the API version. (Ken
            Takata)
Files:      Makefile, src/INSTALLpc.txt, src/Make_cyg_ming.mak,
            src/Make_mvc.mak, src/bigvim.bat

Patch 7.4.2341
Problem:    Tiny things.  Test doesn't clean up properly.
Solution:   Adjust comment and white space. Restore option value.
Files:      src/ex_cmds.c, src/message.c, src/testdir/test_autocmd.vim

Patch 7.4.2342
Problem:    Typo in <A HREF="os_win32.html#MS-Windows">MS-Windows</A> build <A HREF="usr_41.html#script">script</A>.
Solution:   change &quot;w2&quot; to &quot;22&quot;.
Files:      src/bigvim.bat

Patch 7.4.2343
Problem:    Too many old style tests.
Solution:   Turn several into new style tests. (Yegappan Lakshmanan)
Files:      src/testdir/Make_all.mak, src/testdir/test101.in,
            src/testdir/test101.ok, src/testdir/test18.in,
            src/testdir/test18.ok, src/testdir/test2.in, src/testdir/test2.ok,
            src/testdir/test21.in, src/testdir/test21.ok,
            src/testdir/test6.in, src/testdir/test6.ok,
            src/testdir/test_arglist.vim, src/testdir/test_charsearch.vim,
            src/testdir/test_fnameescape.vim, src/testdir/test_gf.vim,
            src/testdir/test_hlsearch.vim, src/testdir/test_smartindent.vim,
            src/testdir/test_tagjump.vim, src/Makefile

Patch 7.4.2344
Problem:    The &quot;Reading from <A HREF="channel.html#channel">channel</A> output...&quot; message can be unwanted.
            Appending to a buffer leaves an empty first line behind.
Solution:   Add the &quot;<A HREF="channel.html#out_msg">out_msg</A>&quot; and &quot;<A HREF="channel.html#err_msg">err_msg</A>&quot; <A HREF="options.html#options">options</A>. Writing the first line
            overwrites the first, empty line.
Files:      src/structs.h, src/channel.c, src/testdir/test_channel.vim,
            runtime/doc/channel.txt

Patch 7.4.2345 (after 7.4.2340)
Problem:    For MinGW RUBY_API_VER_LONG isn't set correctly.  Many default
            version numbers are outdated.
Solution:   Set RUBY_API_VER_LONG to RUBY_VER_LONG. Use latest stable releases
            for defaults. (Ken Takata)
Files:      src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 7.4.2346
Problem:    Autocommand test fails when run directly, passes when run <A HREF="motion.html#as">as</A> part
            of test_alot.
Solution:   Add command to make the cursor move.  Close a <A HREF="intro.html#tab">tab</A> page.
Files:      src/testdir/test_autocmd.vim

Patch 7.4.2347
Problem:    Crash when closing a buffer while <A HREF="visual.html#Visual">Visual</A> mode is active.
            (Dominique Pelle)
Solution:   Adjust the position before computing the number of lines.
            When closing the current buffer stop <A HREF="visual.html#Visual">Visual</A> mode.
Files:      src/buffer.c, src/normal.c, src/testdir/test_normal.vim

Patch 7.4.2348
Problem:    Crash on exit when EXITFREE is defined. (Dominique Pelle)
Solution:   Don't access curwin when <A HREF="starting.html#exiting">exiting</A>.
Files:      src/buffer.c

Patch 7.4.2349
Problem:    Valgrind reports using uninitialized memory. (Dominique Pelle)
Solution:   Check the length before checking for a NUL.
Files:      src/message.c

Patch 7.4.2350
Problem:    Test 86 and 87 fail with some version of <A HREF="if_pyth.html#Python">Python</A>.
Solution:   Unify &quot;can't&quot; and &quot;cannot&quot;.  Unify <A HREF="quotes.html#quotes">quotes</A>.
Files:      src/testdir/test86.in, src/testdir/test86.ok,
            src/testdir/test87.in, src/testdir/test87.ok

Patch 7.4.2351
Problem:    Netbeans test fails when run from unpacked <A HREF="os_win32.html#MS-Windows">MS-Windows</A> sources.
Solution:   Open README.txt instead of Makefile.
Files:      src/testdir/test_netbeans.py, src/testdir/test_netbeans.vim

Patch 7.4.2352
Problem:    Netbeans test fails in shadow directory.
Solution:   Also copy README.txt to the shadow directory.
Files:      src/Makefile

Patch 7.4.2353
Problem:    Not enough test coverage for <A HREF="intro.html#Normal">Normal</A> mode commands.
Solution:   Add more tests. (Christian Brabandt)
Files:      src/testdir/test_normal.vim

Patch 7.4.2354
Problem:    The example that explains nested backreferences does not work
            properly with the new <A HREF="pattern.html#regexp">regexp</A> engine. (Harm te Hennepe)
Solution:   Also save the end position when adding a state. (closes #990)
Files:      src/regexp_nfa.c, src/testdir/test_regexp_latin.vim

Patch 7.4.2355
Problem:    Regexp fails to match when using &quot;\&gt;\)\?&quot;. (Ramel)
Solution:   When a state is already in the <A HREF="eval.html#list">list</A>, but addstate_here() is used
            and the existing state comes later, add the new state anyway.
Files:      src/regexp_nfa.c, src/testdir/test_regexp_latin.vim

Patch 7.4.2356
Problem:    Reading past end of line when using previous substitute <A HREF="pattern.html#pattern">pattern</A>.
            (Dominique Pelle)
Solution:   Don't set &quot;pat&quot; only set &quot;searchstr&quot;.
Files:      src/search.c, src/testdir/test_search.vim

Patch 7.4.2357
Problem:    Attempt to read <A HREF="cmdline.html#history">history</A> entry while not initialized.
Solution:   Skip when the index is negative.
Files:      src/ex_getln.c

Patch 7.4.2358
Problem:    Compiler warnings with Solaris Studio when using <A HREF="gui_x11.html#GTK3">GTK3</A>. (Danek
            Duvall)
Solution:   Define FUNC2GENERIC depending on the system. (Kazunobu Kuriyama)
Files:      src/gui.h, src/gui_beval.c, src/gui_gtk_f.c

Patch 7.4.2359
Problem:    Memory leak in <A HREF="builtin.html#timer_start()">timer_start()</A>.
Solution:   Check the right field to be NULL.
Files:      src/evalfunc.c, src/testdir/test_timers.vim

Patch 7.4.2360
Problem:    Invalid memory access when <A HREF="change.html#formatting">formatting</A>. (Dominique Pelle)
Solution:   Make sure cursor line and column are associated.
Files:      src/misc1.c

Patch 7.4.2361
Problem:    Checking for last_timer_id to overflow is not reliable. (Ozaki
            Kiichi)
Solution:   Check for the number not going up.
Files:      src/ex_cmds2.c

Patch 7.4.2362
Problem:    Illegal memory access with &quot;:1@&quot;. (Dominique Pelle)
Solution:   Correct cursor column after setting the line number.  Also avoid
            calling end_visual_mode() when not in <A HREF="visual.html#Visual">Visual</A> mode.
Files:      src/ex_docmd.c, src/buffer.c

Patch 7.4.2363
Problem:    Superfluous function prototypes.
Solution:   Remove them.
Files:      src/regexp.c

Patch 7.4.2364
Problem:    Sort test sometimes fails.
Solution:   Add <A HREF="motion.html#it">it</A> to the <A HREF="eval.html#list">list</A> of flaky tests.
Files:      src/testdir/runtest.vim

Patch 7.4.2365
Problem:    Needless line break. Confusing directory name.
Solution:   Remove line break.  Prepend &quot;../&quot; to &quot;tools&quot;.
Files:      Makefile, src/normal.c

Patch 7.4.2366
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> gvim.exe does not have DirectX support.
Solution:   Add the DIRECTX to the <A HREF="usr_41.html#script">script</A>.
Files:      src/bigvim.bat

Patch 7.4.2367 (after 7.4.2364)
Problem:    Test runner misses a comma.
Solution:   Add the comma.
Files:      src/testdir/runtest.vim


==============================================================================

VERSION 8.1				*<A NAME="version-8.1"></A><B>version-8.1</B>* *<A NAME="version8.1"></A><B>version8.1</B>* *<A NAME="vim-8.1"></A><B>vim-8.1</B>*

This section is about improvements made between version 8.0 and 8.1.

This release has hundreds of bug fixes, there is a new feature and there are
many minor improvements.



The <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>				*<A NAME="new-terminal-window"></A><B>new-terminal-window</B>*

You can now open a <A HREF="windows.html#window">window</A> which <A HREF="eval.html#functions">functions</A> <A HREF="motion.html#as">as</A> a <A HREF="terminal.html#terminal">terminal</A>.  You can use <A HREF="motion.html#it">it</A> for:
- Running a command, such <A HREF="motion.html#as">as</A> &quot;make&quot;, while editing in other <A HREF="windows.html#windows">windows</A>
- Running a shell and execute several commands
- Use the terminal debugger <A HREF="usr_05.html#plugin">plugin</A>, see |<A HREF="terminal.html#terminal-debugger">terminal-debugger</A>|

All of this is especially useful when running Vim on a remote (ssh)
connection, when you can't easily open more terminals.

For more information see |<A HREF="terminal.html#terminal-window">terminal-window</A>|.



Changed							*<A NAME="changed-8.1"></A><B>changed-8.1</B>*

Internal: A few <A HREF="develop.html#C99">C99</A> features are now allowed such <A HREF="motion.html#as">as</A> <A HREF="version7.html#//">//</A> comments and a
comma after the last enum entry.  See |<A HREF="develop.html#style-compiler">style-compiler</A>|.

Since patch 8.0.0029 removed support for older <A HREF="os_win32.html#MS-Windows">MS-Windows</A> systems, only
<A HREF="os_win32.html#MS-Windows">MS-Windows</A> XP and later are supported.



Added							*<A NAME="added-8.1"></A><B>added-8.1</B>*

Various <A HREF="syntax.html#syntax">syntax</A>, indent and other plugins were added.

<A HREF="quickfix.html#Quickfix">Quickfix</A> improvements (by Yegappan Lakshmanan):
	Added support for modifying any quickfix/location <A HREF="eval.html#list">list</A> in the <A HREF="quickfix.html#quickfix">quickfix</A>
	stack.
	Added a unique identifier for every quickfix/location <A HREF="eval.html#list">list</A>.
	Added support for associating any Vim type <A HREF="motion.html#as">as</A> a context information to
	a quickfix/location <A HREF="eval.html#list">list</A>.
	Enhanced the <A HREF="builtin.html#getqflist()">getqflist()</A>, <A HREF="builtin.html#getloclist()">getloclist()</A>, <A HREF="builtin.html#setqflist()">setqflist()</A> and <A HREF="builtin.html#setloclist()">setloclist()</A>
	<A HREF="eval.html#functions">functions</A> to get and set the various quickfix/location <A HREF="eval.html#list">list</A> attributes.
	Added the QuickFixLine highlight group to highlight the current line
	in the <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="windows.html#window">window</A>.
	The <A HREF="quickfix.html#quickfix">quickfix</A> buffer <A HREF="eval.html#b:changedtick">b:changedtick</A> variable is incremented for every
	change to the contained <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A>.
	Added a changedtick variable to a quickfix/location <A HREF="eval.html#list">list</A> which is
	incremented when the <A HREF="eval.html#list">list</A> is modified.
	Added support for parsing text using <A HREF="options.html#'errorformat'">'errorformat'</A> without creating a
	new <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A>.
	Added support for the &quot;module&quot; item to a <A HREF="quickfix.html#quickfix">quickfix</A> entry which can be
	used for display purposes instead of a long file name.
	Added support for freeing all the lists in the quickfix/location stack.
	When opening a <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="windows.html#window">window</A> using the :copen/:cwindow commands, the
	supplied split modifiers are used.

Functions:
	All the term_ <A HREF="eval.html#functions">functions</A>.

	|<A HREF="testing.html#assert_beeps()">assert_beeps()</A>|
	|<A HREF="testing.html#assert_equalfile()">assert_equalfile()</A>|
	|<A HREF="testing.html#assert_report()">assert_report()</A>|
	|<A HREF="builtin.html#balloon_show()">balloon_show()</A>|
	|<A HREF="builtin.html#balloon_split()">balloon_split()</A>|
	|<A HREF="channel.html#ch_canread()">ch_canread()</A>|
	|<A HREF="builtin.html#getchangelist()">getchangelist()</A>|
	|<A HREF="builtin.html#getjumplist()">getjumplist()</A>|
	|<A HREF="builtin.html#getwinpos()">getwinpos()</A>|
	|<A HREF="builtin.html#pyxeval()">pyxeval()</A>|
	|<A HREF="builtin.html#remote_startserver()">remote_startserver()</A>|
	|<A HREF="builtin.html#setbufline()">setbufline()</A>|
	|<A HREF="testing.html#test_ignore_error()">test_ignore_error()</A>|
	|<A HREF="testing.html#test_override()">test_override()</A>|
	|<A HREF="builtin.html#trim()">trim()</A>|
	|<A HREF="builtin.html#win_screenpos()">win_screenpos()</A>|

Autocommands:
	|<A HREF="autocmd.html#CmdlineChanged">CmdlineChanged</A>|
	|<A HREF="autocmd.html#CmdlineEnter">CmdlineEnter</A>|
	|<A HREF="autocmd.html#CmdlineLeave">CmdlineLeave</A>|
	|<A HREF="autocmd.html#ColorSchemePre">ColorSchemePre</A>|
	|<A HREF="autocmd.html#DirChanged">DirChanged</A>|
	|<A HREF="autocmd.html#ExitPre">ExitPre</A>|
	|<A HREF="autocmd.html#TerminalOpen">TerminalOpen</A>|
	|<A HREF="autocmd.html#TextChangedP">TextChangedP</A>|
	|<A HREF="autocmd.html#TextYankPost">TextYankPost</A>|

Commands:
	|<A HREF="if_pyth.html#:pyx">:pyx</A>|
	|<A HREF="if_pyth.html#:pythonx">:pythonx</A>|
	|<A HREF="if_pyth.html#:pyxdo">:pyxdo</A>|
	|<A HREF="if_pyth.html#:pyxfile">:pyxfile</A>|
	|<A HREF="terminal.html#:terminal">:terminal</A>|
	|<A HREF="map.html#:tmapclear">:tmapclear</A>|
	|<A HREF="map.html#:tmap">:tmap</A>|
	|<A HREF="map.html#:tnoremap">:tnoremap</A>|
	|<A HREF="map.html#:tunmap">:tunmap</A>|

Options:
	<A HREF="options.html#'balloonevalterm'">'balloonevalterm'</A>
	<A HREF="options.html#'imstyle'">'imstyle'</A>
	<A HREF="options.html#'mzschemedll'">'mzschemedll'</A>
	<A HREF="options.html#'mzschemegcdll'">'mzschemegcdll'</A>
	<A HREF="options.html#'makeencoding'">'makeencoding'</A>
	<A HREF="options.html#'pumwidth'">'pumwidth'</A>
	<A HREF="options.html#'pythonhome'">'pythonhome'</A>
	<A HREF="options.html#'pythonthreehome'">'pythonthreehome'</A>
	<A HREF="options.html#'pyxversion'">'pyxversion'</A>
	<A HREF="options.html#'termwinkey'">'termwinkey'</A>
	<A HREF="options.html#'termwinscroll'">'termwinscroll'</A>
	<A HREF="options.html#'termwinsize'">'termwinsize'</A>
	<A HREF="options.html#'viminfofile'">'viminfofile'</A>
	<A HREF="options.html#'winptydll'">'winptydll'</A>



Patches							*<A NAME="patches-8.1"></A><B>patches-8.1</B>*

Patch 8.0.0001
Problem:    Intro screen still mentions version7. (Paul)
Solution:   Change <A HREF="motion.html#it">it</A> to version8.
Files:	    src/version.c

Patch 8.0.0002
Problem:    The <A HREF="pi_netrw.html#netrw">netrw</A> <A HREF="usr_05.html#plugin">plugin</A> does not work.
Solution:   Make <A HREF="motion.html#it">it</A> accept version 8.0.
Files:      runtime/autoload/netrw.vim

Patch 8.0.0003
Problem:    <A HREF="builtin.html#getwinvar()">getwinvar()</A> returns wrong Value of <A HREF="options.html#boolean">boolean</A> and number <A HREF="options.html#options">options</A>,
            especially non big endian systems. (James McCoy)
Solution:   Cast the pointer to long or int. (closes #1060)
Files:      src/option.c, src/testdir/test_bufwintabinfo.vim

Patch 8.0.0004
Problem:    A <A HREF="eval.html#string">string</A> argument for <A HREF="builtin.html#function()">function()</A> that is not a function name
            results in an error message with NULL. (Christian Brabandt)
Solution:   Use the argument for the error message.
Files:      src/evalfunc.c, src/testdir/test_expr.vim

Patch 8.0.0005
Problem:    Netbeans test fails with <A HREF="if_pyth.html#Python">Python</A> 3. (Jonathonf)
Solution:   Encode the <A HREF="eval.html#string">string</A> before sending <A HREF="motion.html#it">it</A>. (closes #1070)
Files:      src/testdir/test_netbeans.py

Patch 8.0.0006
Problem:    &quot;<A HREF="quickfix.html#:lb">:lb</A>&quot; is interpreted <A HREF="motion.html#as">as</A> &quot;<A HREF="quickfix.html#:lbottom">:lbottom</A>&quot; while the documentation says <A HREF="motion.html#it">it</A>
            means &quot;<A HREF="quickfix.html#:lbuffer">:lbuffer</A>&quot;.
Solution:   Adjust the order of the commands. (haya14busa, closes #1093)
Files:      src/ex_cmds.h

Patch 8.0.0007
Problem:    Vim 7.4 is still mentioned in a few places.
Solution:   Update to Vim 8.  (Uncle Bill, closes #1094)
Files:      src/INSTALLpc.txt, src/vimtutor, uninstal.txt

Patch 8.0.0008
Problem:    Popup complete test is disabled.
Solution:   Enable the test and change the assert. (Hirohito Higashi)
Files:      src/testdir/test_popup.vim

Patch 8.0.0009
Problem:    Unnecessary workaround for AppVeyor.
Solution:   Revert patch 7.4.990. (Christian Brabandt)
Files:      appveyor.yml

Patch 8.0.0010
Problem:    Crash when editing file that starts with crypt header. (igor2x)
Solution:   Check for length of text. (Christian Brabandt) Add a test.
Files:      src/fileio.c, src/testdir/test_crypt.vim, src/Makefile,
            src/testdir/Make_all.mak

Patch 8.0.0011
Problem:    On OSX Test_pipe_through_sort_all() sometimes fails.
Solution:   Add the test to the <A HREF="eval.html#list">list</A> of flaky tests.
Files:      src/testdir/runtest.vim

Patch 8.0.0012
Problem:    Typos in comments.
Solution:   Change &quot;its&quot; to &quot;it's&quot;. (Matthew Brener, closes #1088)
Files:      src/evalfunc.c, src/main.aap, src/nbdebug.c, src/netbeans.c,
            src/quickfix.c, src/workshop.c, src/wsdebug.c

Patch 8.0.0013 (after 8.0.0011)
Problem:    Missing comma in <A HREF="eval.html#list">list</A>.
Solution:   Add the comma.
Files:      src/testdir/runtest.vim

Patch 8.0.0014
Problem:    Crypt tests are old style.
Solution:   Convert to new style.
Files:      src/testdir/test71.in, src/testdir/test71.ok,
	    src/testdir/test71a.in, src/testdir/test_crypt.vim, src/Makefile,
            src/testdir/Make_all.mak

Patch 8.0.0015
Problem:    Can't tell which part of a <A HREF="channel.html#channel">channel</A> has &quot;buffered&quot; status.
Solution:   Add an optional argument to <A HREF="channel.html#ch_status()">ch_status()</A>.  Let <A HREF="channel.html#ch_info()">ch_info()</A> also
            return &quot;buffered&quot; for out_status and err_status.
Files:      src/evalfunc.c, src/channel.c, src/proto/channel.pro,
            src/testdir/test_channel.vim, runtime/doc/eval.txt

Patch 8.0.0016 (after 8.0.0015)
Problem:    Build fails.
Solution:   Include missing change.
Files:      src/eval.c

Patch 8.0.0017
Problem:    Cannot get the number of the current <A HREF="quickfix.html#quickfix">quickfix</A> or location <A HREF="eval.html#list">list</A>.
Solution:   Use the current <A HREF="eval.html#list">list</A> if &quot;nr&quot; in &quot;what&quot; is zero. (Yegappan
            Lakshmanan)  Remove debug command from test.
Files:      src/quickfix.c, src/testdir/test_quickfix.vim,
            runtime/doc/eval.txt

Patch 8.0.0018
Problem:    When using &quot;<A HREF="various.html#:sleep">:sleep</A>&quot; <A HREF="channel.html#channel">channel</A> input is not handled.
Solution:   When there is a <A HREF="channel.html#channel">channel</A> check for input also when not in raw mode.
            Check every 100 msec.
Files:      src/channel.c, src/proto/channel.pro, src/ui.c, src/proto/ui.pro,
            src/ex_docmd.c, src/os_amiga.c, src/proto/os_amiga.pro,
            src/os_unix.c, src/proto/os_unix.pro, src/os_win32.c,
            src/proto/os_win32.pro

Patch 8.0.0019
Problem:    Test_command_count is old style.
Solution:   Turn <A HREF="motion.html#it">it</A> into a new style test. (Naruhiko Nishino)
            Use more assert <A HREF="eval.html#functions">functions</A>.
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/test_alot.vim,
            src/testdir/test_autocmd.vim, src/testdir/test_command_count.in,
            src/testdir/test_command_count.ok,
            src/testdir/test_command_count.vim

Patch 8.0.0020
Problem:    The <A HREF="pattern.html#regexp">regexp</A> engines are not reentrant.
Solution:   Add regexec_T and save/restore the state when needed.
Files:      src/regexp.c, src/regexp_nfa.c, src/testdir/test_expr.vim,
            runtime/doc/eval.txt, runtime/doc/change.txt

Patch 8.0.0021
Problem:    In the <A HREF="gui.html#GUI">GUI</A> when redrawing the cursor <A HREF="motion.html#it">it</A> may be on the second half
            of a double byte character.
Solution:   Correct the cursor column. (Yasuhiro Matsumoto)
Files:      src/screen.c

Patch 8.0.0022
Problem:    If a <A HREF="channel.html#channel">channel</A> in NL mode is missing the NL at the end the remaining
            characters are dropped.
Solution:   When the <A HREF="channel.html#channel">channel</A> is closed use the remaining text. (Ozaki Kiichi)
Files:      src/channel.c, src/testdir/test_channel.vim

Patch 8.0.0023
Problem:    &quot;<A HREF="pattern.html#gd">gd</A>&quot; and &quot;<A HREF="pattern.html#gD">gD</A>&quot; may find a match in a comment or <A HREF="eval.html#string">string</A>.
Solution:   Ignore matches in comments and strings. (Anton Lindqvist)
Files:      src/normal.c, src/testdir/test_goto.vim

Patch 8.0.0024
Problem:    When the <A HREF="netbeans.html#netbeans">netbeans</A> <A HREF="channel.html#channel">channel</A> closes, &quot;DETACH&quot; is put in the output
            part. (Ozaki Kiichi)
Solution:   Write &quot;DETACH&quot; in the socket part.
Files:      src/channel.c, src/testdir/test_netbeans.vim

Patch 8.0.0025
Problem:    Inconsistent use of spaces vs tabs in <A HREF="pattern.html#gd">gd</A> test.
Solution:   Use tabs. (Anton Lindqvist)
Files:      src/testdir/test_goto.vim

Patch 8.0.0026
Problem:    Error format with &#37;W, &#37;C and &#37;Z does not work. (Gerd Wachsmuth)
Solution:   Skip code when qf_multiignore is set. (Lcd)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.0027
Problem:    A <A HREF="channel.html#channel">channel</A> is closed when reading on stderr or stdout fails, but
            there may still be something to read on another part.
Solution:   Turn ch_to_be_closed into a bitfield. (Ozaki Kiichi)
Files:      src/channel.c, src/eval.c, src/structs.h, src/proto/channel.pro,
            src/testdir/test_channel.vim

Patch 8.0.0028
Problem:    Superfluous semicolons.
Solution:   Remove them. (Ozaki Kiichi)
Files:      src/ex_cmds2.c

Patch 8.0.0029
Problem:    Code for <A HREF="os_win32.html#MS-Windows">MS-Windows</A> is complicated because of the exceptions for
            old systems.
Solution:   Drop support for <A HREF="os_win32.html#MS-Windows">MS-Windows</A> older than Windows XP. (Ken Takata)
Files:      runtime/doc/gui_w32.txt, runtime/doc/os_win32.txt,
            runtime/doc/todo.txt, src/GvimExt/Makefile, src/Make_mvc.mak,
            src/evalfunc.c, src/ex_cmds.c, src/ex_docmd.c, src/gui_w32.c,
            src/if_cscope.c, src/misc1.c, src/misc2.c, src/option.c,
            src/os_mswin.c, src/os_win32.c, src/os_win32.h,
            src/proto/os_mswin.pro, src/proto/os_win32.pro, src/version.c

Patch 8.0.0030
Problem:    Mouse mode is not automatically detected for <A HREF="syntax.html#tmux">tmux</A>.
Solution:   Check for <A HREF="options.html#'term'">'term'</A> to be &quot;<A HREF="syntax.html#tmux">tmux</A>&quot;. (Michael Henry)
Files:      src/os_unix.c

Patch 8.0.0031
Problem:    After &quot;<A HREF="windows.html#:bwipeout">:bwipeout</A>&quot; <A HREF="options.html#'fileformat'">'fileformat'</A> is not set to the right default.
Solution:   Get the default from <A HREF="options.html#'fileformats'">'fileformats'</A>. (Mike Williams)
Files:      src/option.c, src/Makefile, src/testdir/test_fileformat.vim,
            src/testdir/test_alot.vim

Patch 8.0.0032
Problem:    Tests may change the input file when something goes wrong.
Solution:   Avoid <A HREF="editing.html#writing">writing</A> the input file.
Files:      src/testdir/test51.in, src/testdir/test67.in,
            src/testdir/test97.in, src/testdir/test_tabpage.vim

Patch 8.0.0033
Problem:    Cannot use overlapping positions with <A HREF="builtin.html#matchaddpos()">matchaddpos()</A>.
Solution:   Check end of match. (Ozaki Kiichi) Add a test (Hirohito Higashi)
Files:      src/screen.c, src/testdir/test_match.vim

Patch 8.0.0034
Problem:    No completion for &quot;<A HREF="message.html#:messages">:messages</A>&quot;.
Solution:   Complete &quot;clear&quot; argument. (Hirohito Higashi)
Files:      src/ex_docmd.c, src/ex_getln.c, src/proto/ex_docmd.pro,
            src/testdir/test_cmdline.vim, src/vim.h,
            runtime/doc/eval.txt, runtime/doc/map.txt

Patch 8.0.0035 (after 7.4.2013)
Problem:    Order of matches for <A HREF="options.html#'omnifunc'">'omnifunc'</A> is messed up. (Danny Su)
Solution:   Do not set compl_curr_match when called from <A HREF="builtin.html#complete_check()">complete_check()</A>.
            (closes #1168)
Files:      src/edit.c, src/evalfunc.c, src/proto/edit.pro, src/search.c,
            src/spell.c, src/tag.c, src/testdir/test76.in,
            src/testdir/test76.ok, src/testdir/test_popup.vim, src/Makefile,
            src/testdir/Make_all.mak

Patch 8.0.0036
Problem:    Detecting that a <A HREF="channel.html#job">job</A> has finished may take a while.
Solution:   Check for a finished <A HREF="channel.html#job">job</A> more often (Ozaki Kiichi)
Files:      src/channel.c, src/os_unix.c, src/os_win32.c,
            src/proto/os_unix.pro, src/proto/os_win32.pro,
            src/testdir/test_channel.vim

Patch 8.0.0037
Problem:    Get <A HREF="quickfix.html#E924">E924</A> when switching tabs. ()
Solution:   Use win_valid_any_tab() instead of win_valid(). (Martin Vuille,
            closes #1167, closes #1171)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.0038
Problem:    OPEN_CHR_FILES not defined for FreeBSD using Debian userland
            files.
Solution:   Check for __FreeBSD_kernel__. (James McCoy, closes #1166)
Files:      src/vim.h

Patch 8.0.0039
Problem:    When Vim 8 reads an old <A HREF="starting.html#viminfo">viminfo</A> and exits, the next time marks are
            not read from <A HREF="starting.html#viminfo">viminfo</A>. (Ned Batchelder)
Solution:   Set a <A HREF="motion.html#mark">mark</A> when <A HREF="motion.html#it">it</A> wasn't set before, even when the <A HREF="editing.html#timestamp">timestamp</A> is
            zero. (closes #1170)
Files:      src/mark.c, src/testdir/test_viminfo.vim

Patch 8.0.0040 (after 8.0.0033)
Problem:    Whole line highlighting with <A HREF="builtin.html#matchaddpos()">matchaddpos()</A> does not work.
Solution:   Check for zero length. (Hirohito Higashi)
Files:      src/screen.c, src/testdir/test_match.vim

Patch 8.0.0041
Problem:    When using <A HREF="insert.html#Insert">Insert</A> mode completion but not actually <A HREF="insert.html#inserting">inserting</A>
            anything an <A HREF="undo.html#undo">undo</A> item is still created. (Tommy Allen)
Solution:   Do not call stop_arrow() when not <A HREF="insert.html#inserting">inserting</A> anything.
Files:      src/edit.c, src/testdir/test_popup.vim

Patch 8.0.0042 (after 8.0.0041)
Problem:    When using <A HREF="insert.html#Insert">Insert</A> mode completion with <A HREF="options.html#'completeopt'">'completeopt'</A> containing
            &quot;noinsert&quot; change is not saved for <A HREF="undo.html#undo">undo</A>.  (Tommy Allen)
Solution:   Call stop_arrow() before <A HREF="insert.html#inserting">inserting</A> for pressing Enter.
Files:      src/edit.c, src/testdir/test_popup.vim

Patch 8.0.0043 (after 8.0.0041)
Problem:    When using <A HREF="insert.html#Insert">Insert</A> mode completion with <A HREF="options.html#'completeopt'">'completeopt'</A> containing
            &quot;noinsert&quot; with <A HREF="motion.html#CTRL-N">CTRL-N</A> the change is not saved for <A HREF="undo.html#undo">undo</A>.  (Tommy
            Allen)
Solution:   Call stop_arrow() before <A HREF="insert.html#inserting">inserting</A> for any key.
Files:      src/edit.c, src/testdir/test_popup.vim

Patch 8.0.0044
Problem:    In <A HREF="diff.html#diff">diff</A> mode the cursor may end up below the last line, resulting
            in an ml_get error.
Solution:   Check the line to be valid.
Files:      src/move.c, src/diff.c, src/proto/diff.pro,
            src/testdir/test_diffmode.vim

Patch 8.0.0045
Problem:    Calling <A HREF="channel.html#job_stop()">job_stop()</A> right after <A HREF="channel.html#job_start()">job_start()</A> does not work.
Solution:   Block signals while <A HREF="os_unix.html#fork">fork</A> is still busy. (Ozaki Kiichi, closes
            #1155)
Files:      src/auto/configure, src/config.h.in, src/configure.in,
            src/os_unix.c, src/testdir/test_channel.vim

Patch 8.0.0046
Problem:    Using NUL instead of NULL.
Solution:   Change to NULL. (Dominique Pelle)
Files:      src/ex_cmds.c, src/json.c

Patch 8.0.0047
Problem:    Crash when using the preview <A HREF="windows.html#window">window</A> from an unnamed buffer.
            (lifepillar)
Solution:   Do not clear the wrong buffer. (closes #1200)
Files:      src/popupmnu.c

Patch 8.0.0048
Problem:    On Windows <A HREF="channel.html#job_stop()">job_stop()</A> stops cmd.exe, not the processes <A HREF="motion.html#it">it</A> runs.
            (Linwei)
Solution:   Iterate over all processes and terminate the one where the parent
            is the <A HREF="channel.html#job">job</A> process. (Yasuhiro Matsumoto, closes #1184)
Files:      src/os_win32.c, src/structs.h

Patch 8.0.0049
Problem:    When a match ends in part of concealed text highlighting, <A HREF="motion.html#it">it</A> might
            mess up concealing by resetting prev_syntax_id.
Solution:   Do not reset prev_syntax_id and add a test to verify. (Christian
            Brabandt, closes #1092)
Files:      src/screen.c, src/testdir/test_matchadd_conceal.vim

Patch 8.0.0050
Problem:    An <A HREF="starting.html#exiting">exiting</A> <A HREF="channel.html#job">job</A> is detected with a large latency.
Solution:   Check for pending <A HREF="channel.html#job">job</A> more often. (Ozaki Kiichi)  Change the
            double loop in mch_inchar() into one.
Files:      src/channel.c, src/os_unix.c, src/testdir/shared.vim,
            src/testdir/test_channel.vim

Patch 8.0.0051 (after 8.0.0048)
Problem:    New code for <A HREF="channel.html#job_stop()">job_stop()</A> breaks <A HREF="channel.html#channel">channel</A> test on AppVeyor.
Solution:   Revert the change.
Files:      src/os_win32.c, src/structs.h

Patch 8.0.0052 (after 8.0.0049)
Problem:    Conceal test passes even without the bug fix.
Solution:   Add a redraw command. (Christian Brabandt)
Files:      src/testdir/test_matchadd_conceal.vim

Patch 8.0.0053 (after 8.0.0047)
Problem:    No test for what 8.0.0047 fixes.
Solution:   Add a test. (Hirohito Higashi)
Files:      src/testdir/test_popup.vim

Patch 8.0.0054 (after 8.0.0051)
Problem:    On Windows <A HREF="channel.html#job_stop()">job_stop()</A> stops cmd.exe, not the processes <A HREF="motion.html#it">it</A> runs.
            (Linwei)
Solution:   Iterate over all processes and terminate the one where the parent
            is the <A HREF="channel.html#job">job</A> process. Now only when there is no <A HREF="channel.html#job">job</A> object.
            (Yasuhiro Matsumoto, closes #1203)
Files:      src/os_win32.c

Patch 8.0.0055
Problem:    Minor comment and style deficiencies.
Solution:   Update comments and fix style.
Files:      src/buffer.c, src/misc2.c, src/os_unix.c

Patch 8.0.0056
Problem:    When setting <A HREF="options.html#'filetype'">'filetype'</A> there is no check for a valid name.
Solution:   Only allow valid characters in <A HREF="options.html#'filetype'">'filetype'</A>, <A HREF="options.html#'syntax'">'syntax'</A> and <A HREF="options.html#'keymap'">'keymap'</A>.
Files:      src/option.c, src/testdir/test_options.vim

Patch 8.0.0057 (after 8.0.0056)
Problem:    Tests fail without the <A HREF="options.html#'keymap'">'keymap'</A> features.
Solution:   Check for feature in test.
Files:      src/testdir/test_options.vim

Patch 8.0.0058
Problem:    Positioning of the <A HREF="popup.html#popup">popup</A> menu is not good.
Solution:   Position <A HREF="motion.html#it">it</A> better. (Hirohito Higashi)
Files:      src/popupmnu.c

Patch 8.0.0059
Problem:    Vim does not build on <A HREF="os_vms.html#VMS">VMS</A> systems.
Solution:   Various changes for <A HREF="os_vms.html#VMS">VMS</A>. (Zoltan Arpadffy)
Files:      src/json.c, src/macros.h, src/Make_vms.mms, src/os_unix.c,
            src/os_unix.h, src/os_vms.c, src/os_vms_conf.h,
            src/proto/os_vms.pro, src/testdir/Make_vms.mms

Patch 8.0.0060
Problem:    When using an <A HREF="intro.html#Ex">Ex</A> command for <A HREF="options.html#'keywordprg'">'keywordprg'</A> <A HREF="motion.html#it">it</A> is escaped <A HREF="motion.html#as">as</A> with a
            shell command. (Romain Lafourcade)
Solution:   Escape for an <A HREF="intro.html#Ex">Ex</A> command. (closes #1175)
Files:      src/normal.c, src/testdir/test_normal.vim

Patch 8.0.0061 (after 8.0.0058)
Problem:    Compiler warning for unused variable.
Solution:   Add #ifdef. (John Marriott)
Files:      src/popupmnu.c

Patch 8.0.0062
Problem:    No <A HREF="digraph.html#digraph">digraph</A> for HORIZONTAL ELLIPSIS.
Solution:   Use &quot;,.&quot;. (Hans Ginzel, closes #1226)
Files:      src/digraph.c, runtime/doc/digraph.txt

Patch 8.0.0063
Problem:    Compiler warning for comparing with unsigned. (Zoltan Arpadffy)
Solution:   Change &lt;= to <A HREF="change.html#==">==</A>.
Files:      src/undo.c

Patch 8.0.0064 (after 8.0.0060)
Problem:    <A HREF="intro.html#Normal">Normal</A> test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Don't try using an illegal file name.
Files:      src/testdir/test_normal.vim

Patch 8.0.0065 (after 8.0.0056)
Problem:    Compiler warning for unused function in tiny build. (Tony
            Mechelynck)
Solution:   Add #ifdef.
Files:      src/option.c

Patch 8.0.0066
Problem:    when calling an <A HREF="motion.html#operator">operator</A> function when <A HREF="options.html#'linebreak'">'linebreak'</A> is set, <A HREF="motion.html#it">it</A> is
            internally reset before calling the <A HREF="motion.html#operator">operator</A> function.
Solution:   Restore <A HREF="options.html#'linebreak'">'linebreak'</A> before calling op_function(). (Christian
            Brabandt)
Files:      src/normal.c, src/testdir/test_normal.vim

Patch 8.0.0067
Problem:    <A HREF="os_vms.html#VMS">VMS</A> has a problem with infinity.
Solution:   Avoid an overflow. (Zoltan Arpadffy)
Files:      src/json.c, src/macros.h

Patch 8.0.0068
Problem:    Checking did_throw after executing <A HREF="autocmd.html#autocommands">autocommands</A> is wrong. (Daniel
            Hahler)
Solution:   Call aborting() instead, and only when <A HREF="autocmd.html#autocommands">autocommands</A> were executed.
Files:      src/quickfix.c, src/if_cscope.c, src/testdir/test_quickfix.vim

Patch 8.0.0069
Problem:    Compiler warning for self-comparison.
Solution:   Define ONE_WINDOW and add #ifdef.
Files:      src/globals.h, src/buffer.c, src/ex_docmd.c, src/move.c,
            src/screen.c, src/quickfix.c, src/window.c

Patch 8.0.0070
Problem:    Tests referred in Makefile that no longer exist.
Solution:   Remove test71 and test74 entries. (Michael Soyka)
Files:      src/testdir/Mak_ming.mak

Patch 8.0.0071
Problem:    Exit value from a shell command is wrong. (Hexchain Tong)
Solution:   Do not check for ended jobs while waiting for a shell command.
            (ichizok, closes #1196)
Files:      src/os_unix.c

Patch 8.0.0072
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: Crash with long font name. (Henry Hu)
Solution:   Fix comparing with LF_FACESIZE. (Ken Takata, closes #1243)
Files:      src/os_mswin.c

Patch 8.0.0073 (after 8.0.0069)
Problem:    More comparisons between firstwin and lastwin.
Solution:   Use ONE_WINDOW for consistency. (Hirohito Higashi)
Files:      src/buffer.c, src/ex_cmds.c, src/ex_docmd.c, src/option.c,
            src/window.c

Patch 8.0.0074
Problem:    Cannot make Vim fail on an internal error.
Solution:   Add IEMSG() and IEMSG2(). (Dominique Pelle)  Avoid reporting an
            internal error without mentioning where.
Files:      src/globals.h, src/blowfish.c, src/dict.c, src/edit.c, src/eval.c,
            src/evalfunc.c, src/ex_eval.c, src/getchar.c, src/gui_beval.c,
            src/gui_w32.c, src/hangulin.c, src/hashtab.c, src/if_cscope.c,
            src/json.c, src/memfile.c, src/memline.c, src/message.c,
            src/misc2.c, src/option.c, src/quickfix.c, src/regexp.c,
            src/spell.c, src/undo.c, src/userfunc.c, src/vim.h, src/window.c,
            src/proto/misc2.pro, src/proto/message.pro, src/Makefile

Patch 8.0.0075
Problem:    Using number for exception type lacks type checking.
Solution:   Use an enum.
Files:      src/structs.h, src/ex_docmd.c, src/ex_eval.c,
            src/proto/ex_eval.pro

Patch 8.0.0076
Problem:    <A HREF="eval.html#Channel">Channel</A> log has double parens ()().
Solution:   Remove () for write_buf_line. (Yasuhiro Matsumoto)
Files:      src/channel.c

Patch 8.0.0077
Problem:    The <A HREF="gui.html#GUI">GUI</A> code is not tested by Travis.
Solution:   Install the virtual framebuffer.
Files:      .travis.yml

Patch 8.0.0078
Problem:    Accessing freed memory in <A HREF="quickfix.html#quickfix">quickfix</A>.
Solution:   Reset pointer when freeing <A HREF="options.html#'errorformat'">'errorformat'</A>. (Dominique Pelle)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.0079
Problem:    Accessing freed memory in <A HREF="quickfix.html#quickfix">quickfix</A>. (Dominique Pelle)
Solution:   Do not free the current <A HREF="eval.html#list">list</A> when adding to <A HREF="motion.html#it">it</A>.
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.0080
Problem:    The OS X build fails on Travis.
Solution:   Skip the virtual framebuffer on OS X.
Files:      .travis.yml

Patch 8.0.0081
Problem:    Inconsistent function names.
Solution:   Rename do_cscope to ex_cscope.  Clean up comments.
Files:      src/ex_cmds.h, src/if_cscope.c, src/ex_docmd.c,
            src/proto/if_cscope.pro

Patch 8.0.0082
Problem:    Extension for configure should be &quot;.ac&quot;.
Solution:   Rename configure.in to configure.ac. (James McCoy, closes #1173)
Files:      src/configure.in, src/configure.ac, Filelist, src/Makefile,
            src/blowfish.c, src/channel.c, src/config.h.in, src/main.aap,
            src/os_unix.c, src/INSTALL, src/mysign

Patch 8.0.0083
Problem:    Using freed memory with <A HREF="builtin.html#win_getid()">win_getid()</A>. (Dominique Pelle)
Solution:   For the current <A HREF="intro.html#tab">tab</A> use curwin.
Files:      src/window.c, src/testdir/test_window_id.vim

Patch 8.0.0084
Problem:    Using freed memory when adding to a <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A>. (Dominique
            Pelle)
Solution:   Clear the directory name.
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.0085
Problem:    Using freed memory with recursive function call. (Dominique Pelle)
Solution:   Make a copy of the function name.
Files:      src/eval.c, src/testdir/test_nested_function.vim

Patch 8.0.0086
Problem:    Cannot add a comment after &quot;<A HREF="windows.html#:hide">:hide</A>&quot;. (Norio Takagi)
Solution:   Make <A HREF="motion.html#it">it</A> work, add a test. (Hirohito Higashi)
Files:      src/Makefile, src/ex_cmds.h, src/ex_docmd.c,
            src/testdir/Make_all.mak, src/testdir/test_hide.vim

Patch 8.0.0087
Problem:    When the <A HREF="channel.html#channel">channel</A> callback gets <A HREF="channel.html#job">job</A> info the <A HREF="channel.html#job">job</A> may already have
            been deleted. (lifepillar)
Solution:   Do not delete the <A HREF="channel.html#job">job</A> when the <A HREF="channel.html#channel">channel</A> is still useful. (ichizok,
            closes #1242, closes #1245)
Files:      src/channel.c, src/eval.c, src/os_unix.c, src/os_win32.c,
            src/structs.h, src/testdir/test_channel.vim

Patch 8.0.0088
Problem:    When a test fails in Setup or Teardown the problem is not reported.
Solution:   Add a try/catch. (Hirohito Higashi)
Files:      src/testdir/runtest.vim

Patch 8.0.0089
Problem:    Various problems with <A HREF="gui_x11.html#GTK">GTK</A> 3.22.2.
Solution:   Fix the problems, add #ifdefs. (Kazunobu Kuriyama)
Files:      src/gui_beval.c, src/gui_gtk.c, src/gui_gtk_x11.c

Patch 8.0.0090
Problem:    Cursor moved after last character when using <A HREF="options.html#'breakindent'">'breakindent'</A>.
Solution:   Fix the cursor positioning.  Turn the breakindent test into new
            style.  (Christian Brabandt)
Files:      src/screen.c, src/testdir/Make_all.mak,
            src/testdir/test_breakindent.in, src/testdir/test_breakindent.ok,
            src/testdir/test_breakindent.vim, src/Makefile

Patch 8.0.0091
Problem:    Test_help_complete sometimes fails in <A HREF="os_win32.html#MS-Windows">MS-Windows</A> console.
Solution:   Use <A HREF="builtin.html#getcompletion()">getcompletion()</A> instead of <A HREF="builtin.html#feedkeys()">feedkeys()</A> and command line
            completion. (Hirohito Higashi)
Files:      src/testdir/test_help_tagjump.vim

Patch 8.0.0092
Problem:    C indenting does not support nested namespaces that C++ 17 has.
Solution:   Add check that passes double colon inside a name. (Pauli, closes
            #1214)
Files:      src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 8.0.0093
Problem:    Not using multiprocess build feature.
Solution:   Enable multiprocess build with MSVC 10. (Ken Takata)
Files:      src/Make_mvc.mak

Patch 8.0.0094
Problem:    When vimrun.exe is not found the error message is not properly
            encoded.
Solution:   Use utf-16 and MessageBoxW(). (Ken Takata)
Files:      src/os_win32.c

Patch 8.0.0095
Problem:    Problems with <A HREF="gui_x11.html#GTK">GTK</A> 3.22.2 fixed in 3.22.4.
Solution:   Adjust the #ifdefs. (Kazunobu Kuriyama)
Files:      src/gui_gtk_x11.c

Patch 8.0.0096
Problem:    When the input or output is not a tty Vim appears to hang.
Solution:   Add the <A HREF="starting.html#--ttyfail">--ttyfail</A> argument.  Also add the &quot;ttyin&quot; and &quot;ttyout&quot;
            features to be able to check in Vim <A HREF="usr_41.html#script">script</A>.
Files:      src/globals.h, src/structs.h, src/main.c, src/evalfunc.c,
            runtime/doc/starting.txt, runtime/doc/eval.txt

Patch 8.0.0097
Problem:    When a <A HREF="channel.html#channel">channel</A> callback consumes a lot of time Vim becomes
            unresponsive. (skywind)
Solution:   Bail out of checking <A HREF="channel.html#channel">channel</A> readahead after 100 msec.
Files:      src/os_unix.c, src/misc2.c, src/vim.h, src/os_win32.c,
            src/channel.c

Patch 8.0.0098 (after 8.0.0097)
Problem:    Can't build on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Add missing parenthesis.
Files:      src/vim.h

Patch 8.0.0099
Problem:    Popup menu always appears above the cursor when <A HREF="motion.html#it">it</A> is in the lower
            half of the screen. (Matt Gardner)
Solution:   Compute the available space better. (Hirohito Higashi,
            closes #1241)
Files:      src/popupmnu.c

Patch 8.0.0100
Problem:    Options that are a file name may contain non-filename characters.
Solution:   Check for more invalid characters.
Files:      src/option.c

Patch 8.0.0101
Problem:    Some <A HREF="options.html#options">options</A> are not strictly checked.
Solution:   Add flags for stricter checks.
Files:      src/option.c

Patch 8.0.0102 (after 8.0.0101)
Problem:    Cannot set <A HREF="options.html#'dictionary'">'dictionary'</A> to a path.
Solution:   Allow for slash and <A HREF="intro.html#backslash">backslash</A>.  Add a test (partly by Daisuke
            Suzuki, closes #1279, closes #1284)
Files:      src/option.c, src/testdir/test_options.vim

Patch 8.0.0103
Problem:    May not process <A HREF="channel.html#channel">channel</A> readahead. (skywind)
Solution:   If there is readahead don't block on input.
Files:      src/channel.c, src/proto/channel.pro, src/os_unix.c,
            src/os_win32.c, src/misc2.c

Patch 8.0.0104
Problem:    Value of <A HREF="options.html#'thesaurus'">'thesaurus'</A> option not checked properly.
Solution:   Add P_NDNAME flag. (Daisuke Suzuki)
Files:      src/option.c, src/testdir/test_options.vim

Patch 8.0.0105
Problem:    When using <A HREF="channel.html#ch_read()">ch_read()</A> with zero timeout, can't tell the difference
            between reading an empty line and nothing available.
Solution:   Add <A HREF="channel.html#ch_canread()">ch_canread()</A>.
Files:      src/evalfunc.c, src/channel.c, src/proto/channel.pro,
            src/testdir/test_channel.vim, src/testdir/shared.vim,
            runtime/doc/eval.txt, runtime/doc/channel.txt

Patch 8.0.0106 (after 8.0.0100)
Problem:    Cannot use a semicolon in <A HREF="options.html#'backupext'">'backupext'</A>. (Jeff)
Solution:   Allow for a few more characters when &quot;secure&quot; isn't set.
Files:      src/option.c

Patch 8.0.0107
Problem:    When reading <A HREF="channel.html#channel">channel</A> output in a <A HREF="builtin.html#timer">timer</A>, <A HREF="message.html#messages">messages</A> may go missing.
            (Skywind)
Solution:   Add the &quot;drop&quot; option.  Write error <A HREF="message.html#messages">messages</A> in the <A HREF="channel.html#channel">channel</A> log.
            Don't have <A HREF="channel.html#ch_canread()">ch_canread()</A> check for the <A HREF="channel.html#channel">channel</A> being open.
Files:      src/structs.h, src/channel.c, src/message.c, src/evalfunc.c,
            src/proto/channel.pro, runtime/doc/channel.txt

Patch 8.0.0108 (after 8.0.0107)
Problem:    The <A HREF="channel.html#channel">channel</A> &quot;drop&quot; option is not tested.
Solution:   Add a test.
Files:      src/testdir/test_channel.vim

Patch 8.0.0109
Problem:    Still checking if memcmp() exists while every system should have
            <A HREF="motion.html#it">it</A> now.
Solution:   Remove vim_memcmp().  (James McCoy, closes #1295)
Files:      src/config.h.in, src/configure.ac, src/misc2.c, src/os_vms_conf.h,
            src/osdef1.h.in, src/search.c, src/tag.c, src/vim.h

Patch 8.0.0110
Problem:    Drop command doesn't use existing <A HREF="windows.html#window">window</A>.
Solution:   Check the <A HREF="windows.html#window">window</A> width properly. (Hirohito Higashi)
Files:      src/buffer.c, src/testdir/test_tabpage.vim

Patch 8.0.0111
Problem:    The <A HREF="cmdline.html#:history">:history</A> command is not tested.
Solution:   Add tests. (Dominique Pelle)
Files:      runtime/doc/cmdline.txt, src/testdir/test_history.vim

Patch 8.0.0112
Problem:    Tests 92 and 93 are old style.
Solution:   Make test92 and test93 new style. (Hirohito Higashi, closes #1289)
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test92.in, src/testdir/test92.ok,
            src/testdir/test93.in, src/testdir/test93.ok,
            src/testdir/test_mksession.vim,
            src/testdir/test_mksession_utf8.vim

Patch 8.0.0113
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: message box to prompt for saving changes may appear on
            the wrong monitor.
Solution:   Adjust the CenterWindow function. (Ken Takata)
Files:      src/gui_w32.c

Patch 8.0.0114
Problem:    Coding style not optimal.
Solution:   Add spaces. (Ken Takata)
Files:      src/gui_w32.c, src/os_mswin.c

Patch 8.0.0115
Problem:    When building with Cygwin libwinpthread isn't found.
Solution:   Link winpthread statically. (jmmerz, closes #1255, closes #1256)
Files:      src/Make_cyg_ming.mak

Patch 8.0.0116
Problem:    When reading English help and using <A HREF="tagsrch.html#CTRL-]">CTRL-]</A> the language from
            <A HREF="options.html#'helplang'">'helplang'</A> is used.
Solution:   Make help <A HREF="tagsrch.html#tag">tag</A> jumps keep the language. (Tatsuki, test by Hirohito
            Higashi, closes #1249)
Files:      src/tag.c, src/testdir/test_help_tagjump.vim

Patch 8.0.0117
Problem:    Parallel make fails. (J. Lewis Muir)
Solution:   Make sure the <A HREF="index.html#objects">objects</A> directory exists. (closes #1259)
Files:      src/Makefile

Patch 8.0.0118
Problem:    &quot;make proto&quot; adds extra function prototype.
Solution:   Add #ifdef.
Files:      src/misc2.c

Patch 8.0.0119
Problem:    No test for using <A HREF="undo.html#CTRL-R">CTRL-R</A> on the command line.
Solution:   Add a test. (Dominique Pelle) And some more.
Files:      src/testdir/test_cmdline.vim

Patch 8.0.0120
Problem:    <A HREF="eval.html#Channel">Channel</A> test is still flaky on OS X.
Solution:   Set the drop argument to &quot;never&quot;.
Files:      src/testdir/test_channel.vim

Patch 8.0.0121
Problem:    Setting <A HREF="options.html#'cursorline'">'cursorline'</A> changes the curswant column. (Daniel Hahler)
Solution:   Add the P_RWINONLY flag. (closes #1297)
Files:      src/option.c, src/testdir/test_goto.vim

Patch 8.0.0122
Problem:    <A HREF="eval.html#Channel">Channel</A> test is still flaky on OS X.
Solution:   Add a short sleep.
Files:      src/testdir/test_channel.py

Patch 8.0.0123
Problem:    Modern Sun compilers define &quot;__sun&quot; instead of &quot;sun&quot;.
Solution:   Use __sun. (closes #1296)
Files:      src/mbyte.c, src/pty.c, src/os_unixx.h, src/vim.h

Patch 8.0.0124
Problem:    Internal error for assert_inrange(1, 1).
Solution:   Adjust number of allowed arguments. (Dominique Pelle)
Files:      src/evalfunc.c, src/testdir/test_assert.vim

Patch 8.0.0125
Problem:    Not enough <A HREF="testing.html#testing">testing</A> for entering <A HREF="intro.html#Ex">Ex</A> commands.
Solution:   Add test for CTRL-\ <A HREF="motion.html#e">e</A> {expr}. (Dominique Pelle)
Files:      src/testdir/test_cmdline.vim

Patch 8.0.0126
Problem:    Display problem with <A HREF="options.html#'foldcolumn'">'foldcolumn'</A> and a wide character.
            (esiegerman)
Solution:   Don't use &quot;extra&quot; but an allocated buffer. (Christian Brabandt,
            closes #1310)
Files:      src/screen.c, src/testdir/Make_all.mak, src/Makefile,
            src/testdir/test_display.vim

Patch 8.0.0127
Problem:    Cancelling completion still inserts text when <A HREF="change.html#formatting">formatting</A> is done
            for <A HREF="options.html#'textwidth'">'textwidth'</A>. (lacygoill)
Solution:   Don't format when <A HREF="scroll.html#CTRL-E">CTRL-E</A> was typed. (Hirohito Higashi,
            closes #1312)
Files:      src/edit.c, src/testdir/test_popup.vim

Patch 8.0.0128 (after 8.0.0126)
Problem:    Display test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Set <A HREF="options.html#'isprint'">'isprint'</A> to &quot;<A HREF="repeat.html#@">@</A>&quot;.
Files:      src/testdir/test_display.vim

Patch 8.0.0129
Problem:    Parallel make still doesn't work. (Lewis Muir)
Solution:   Define OBJ_MAIN.
Files:      src/Makefile

Patch 8.0.0130
Problem:    Configure uses &quot;ushort&quot; while the Vim code doesn't.
Solution:   Use &quot;unsigned short&quot; instead. (Fredrik Fornwall, closes #1314)
Files:      src/configure.ac, src/auto/configure

Patch 8.0.0131
Problem:    Not enough test coverage for <A HREF="syntax.html#syntax">syntax</A> commands.
Solution:   Add more tests. (Dominique Pelle)
Files:      src/testdir/test_syntax.vim

Patch 8.0.0132 (after 8.0.0131)
Problem:    Test fails because of using <A HREF="repeat.html#:finish">:finish</A>.
Solution:   Change to return.
Files:      src/testdir/test_syntax.vim

Patch 8.0.0133
Problem:    &quot;2;'(&quot; causes ml_get <A HREF="message.html#errors">errors</A> in an empty buffer.  (Dominique Pelle)
Solution:   Check the cursor line earlier.
Files:      src/ex_docmd.c, src/testdir/test_cmdline.vim

Patch 8.0.0134
Problem:    Null pointer access reported by UBsan.
Solution:   Check curwin-&gt;w_buffer is not NULL. (Yegappan Lakshmanan)
Files:      src/ex_cmds.c

Patch 8.0.0135
Problem:    An address relative to the current line, &quot;:.,+3y&quot;, does not work
            properly on a closed fold. (Efraim Yawitz)
Solution:   Correct for including the closed fold. (Christian Brabandt)
Files:      src/ex_docmd.c, src/testdir/test_fold.vim,
            src/testdir/Make_all.mak, src/Makefile

Patch 8.0.0136
Problem:    When using indent <A HREF="fold.html#folding">folding</A> and <A HREF="change.html#changing">changing</A> indent the wrong fold is
            opened. (Jonathan Fudger)
Solution:   Open the fold under the cursor a bit later. (Christian Brabandt)
Files:      src/ops.c, src/testdir/test_fold.vim

Patch 8.0.0137
Problem:    When <A HREF="options.html#'maxfuncdepth'">'maxfuncdepth'</A> is set above 200 the nesting is limited to
            200. (Brett Stahlman)
Solution:   Allow for <A HREF="intro.html#Ex">Ex</A> command recursion depending on <A HREF="options.html#'maxfuncdepth'">'maxfuncdepth'</A>.
Files:      src/ex_docmd.c, src/testdir/test_nested_function.vim

Patch 8.0.0138 (after 8.0.0137)
Problem:    Small build fails.
Solution:   Add #ifdef.
Files:      src/ex_docmd.c

Patch 8.0.0139 (after 8.0.0135)
Problem:    Warning for unused argument.
Solution:   Add UNUSED.
Files:      src/ex_docmd.c

Patch 8.0.0140
Problem:    Pasting inserted text in <A HREF="visual.html#Visual">Visual</A> mode does not work properly.
            (Matthew Malcomson)
Solution:   Stop <A HREF="visual.html#Visual">Visual</A> mode before stuffing the inserted text. (Christian
            Brabandt, from neovim #5709)
Files:      src/ops.c, src/testdir/test_visual.vim

Patch 8.0.0141 (after 8.0.0137)
Problem:    Nested function test fails on AppVeyor.
Solution:   Disable the test on Windows for now.
Files:      src/testdir/test_nested_function.vim

Patch 8.0.0142
Problem:    <A HREF="intro.html#Normal">Normal</A> colors are wrong with <A HREF="options.html#'termguicolors'">'termguicolors'</A>.
Solution:   Initialize to INVALCOLOR instead of zero. (Ben Jackson, closes
            #1344)
Files:      src/syntax.c

Patch 8.0.0143
Problem:    Line number of current buffer in <A HREF="builtin.html#getbufinfo()">getbufinfo()</A> is wrong.
Solution:   For the current buffer use the current line number. (Ken Takata)
Files:      src/evalfunc.c

Patch 8.0.0144
Problem:    When using MSVC the GvimExt directory is cleaned <A HREF="if_cscop.html#twice">twice</A>.
Solution:   Remove the lines. (Ken Takata)
Files:      src/Make_mvc.mak

Patch 8.0.0145
Problem:    Running tests on <A HREF="os_win32.html#MS-Windows">MS-Windows</A> is a little bit noisy.
Solution:   Redirect some output to &quot;nul&quot;. (Ken Takata)
Files:      src/testdir/Make_dos.mak

Patch 8.0.0146
Problem:    When using <A HREF="options.html#'termguicolors'">'termguicolors'</A> on <A HREF="os_win32.html#MS-Windows">MS-Windows</A> the RGB definition causes
            the colors to be wrong.
Solution:   Undefined RGB and use our own. (Gabriel Barta)
Files:      src/term.c

Patch 8.0.0147
Problem:    <A HREF="builtin.html#searchpair()">searchpair()</A> does not work when <A HREF="options.html#'magic'">'magic'</A> is off. (Chris Paul)
Solution:   Add \m in the <A HREF="pattern.html#pattern">pattern</A>. (Christian Brabandt, closes #1341)
Files:      src/evalfunc.c, src/testdir/test_search.vim

Patch 8.0.0148
Problem:    When a C preprocessor statement has two line continuations the
            following line does not have the right indent. (Ken Takata)
Solution:   Add the indent of the previous continuation line. (Hirohito
            Higashi)
Files:      src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 8.0.0149
Problem:    &quot;<A HREF="undo.html#:earlier">:earlier</A>&quot; and &quot;<A HREF="undo.html#:later">:later</A>&quot; <A HREF="diff.html#do">do</A> not work after <A HREF="starting.html#startup">startup</A> or reading the
            <A HREF="undo.html#undo">undo</A> file.
Solution:   Use absolute time stamps instead of relative to the Vim start
            time. (Christian Brabandt, Pavel Juhas, closes #1300, closes
            #1254)
Files:      src/testdir/test_undo.vim, src/undo.c

Patch 8.0.0150
Problem:    When the <A HREF="pattern.html#pattern">pattern</A> of <A HREF="various.html#:filter">:filter</A> does not have a separator then
            completion of the command fails.
Solution:   Skip over the <A HREF="pattern.html#pattern">pattern</A>. (Ozaki Kiichi, closes #1299)
Files:      src/ex_docmd.c, src/testdir/test_filter_cmd.vim

Patch 8.0.0151
Problem:    To pass buffer content to <A HREF="builtin.html#system()">system()</A> and <A HREF="builtin.html#systemlist()">systemlist()</A> one has to
            first create a <A HREF="eval.html#string">string</A> or <A HREF="eval.html#list">list</A>.
Solution:   Allow passing a buffer number. (LemonBoy, closes #1240)
Files:      runtime/doc/eval.txt, src/Makefile, src/evalfunc.c,
            src/testdir/Make_all.mak, src/testdir/test_system.vim

Patch 8.0.0152
Problem:    Running the <A HREF="channel.html#channel">channel</A> test creates channellog.
Solution:   Delete the debug line.
Files:      src/testdir/test_channel.vim

Patch 8.0.0153 (after 8.0.0151)
Problem:    <A HREF="builtin.html#system()">system()</A> test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Deal with extra space and CR.
Files:      src/testdir/test_system.vim

Patch 8.0.0154 (after 8.0.0151)
Problem:    <A HREF="builtin.html#system()">system()</A> test fails on OS/X.
Solution:   Deal with leading spaces.
Files:      src/testdir/test_system.vim

Patch 8.0.0155
Problem:    When <A HREF="change.html#sorting">sorting</A> zero elements a NULL pointer is passed to qsort(),
            which ubsan warns for.
Solution:   Don't call qsort() if there are no elements. (Dominique Pelle)
Files:      src/syntax.c

Patch 8.0.0156
Problem:    Several float <A HREF="eval.html#functions">functions</A> are not covered by tests.
Solution:   Add float tests. (Dominique Pelle)
Files:      src/Makefile, src/testdir/test_alot.vim,
            src/testdir/test_float_func.vim

Patch 8.0.0157
Problem:    No command line completion for &quot;<A HREF="syntax.html#:syntax">:syntax</A> spell&quot; and &quot;<A HREF="syntax.html#:syntax">:syntax</A> sync&quot;.
Solution:   Implement the completion. (Dominique Pelle)
Files:      src/syntax.c, src/testdir/test_syntax.vim

Patch 8.0.0158 (after 8.0.0156)
Problem:    On <A HREF="os_win32.html#MS-Windows">MS-Windows</A> some float <A HREF="eval.html#functions">functions</A> return a different value when
            passed unusual values.  strtod() doesn't work for &quot;inf&quot; and &quot;nan&quot;.
Solution:   Accept both results.  Fix <A HREF="builtin.html#str2float()">str2float()</A> for <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.  Also
            reorder assert function arguments.
Files:      src/testdir/test_float_func.vim, src/eval.c

Patch 8.0.0159
Problem:    Using a NULL pointer when using <A HREF="builtin.html#feedkeys()">feedkeys()</A> to trigger drawing a
            tabline.
Solution:   Skip drawing a tabline if TabPageIdxs is NULL. (Dominique Pelle)
            Also fix recursing into <A HREF="builtin.html#getcmdline()">getcmdline()</A> from the cmd <A HREF="windows.html#window">window</A>.
Files:      src/screen.c, src/ex_getln.c

Patch 8.0.0160
Problem:    EMSG() is sometimes used for internal <A HREF="message.html#errors">errors</A>.
Solution:   Change them to IEMSG(). (Dominique Pelle)  And a few more.
Files:      src/regexp_nfa.c, src/channel.c, src/eval.c

Patch 8.0.0161 (after 8.0.0159)
Problem:    Build fails when using small features.
Solution:   Update #ifdef for using save_ccline. (Hirohito Higashi)
Files:      src/ex_getln.c

Patch 8.0.0162
Problem:    Build error on Fedora 23 with small features and gnome2.
Solution:   Undefine ngettext(). (Hirohito Higashi)
Files:      src/gui_gtk.c, src/gui_gtk_x11.c

Patch 8.0.0163
Problem:    <A HREF="if_ruby.html#Ruby">Ruby</A> 2.4 no longer supports rb_cFixnum.
Solution:   move rb_cFixnum into an #ifdef. (Kazuki Sakamoto, closes #1365)
Files:      src/if_ruby.c

Patch 8.0.0164
Problem:    Outdated and misplaced comments.
Solution:   Fix the comments.
Files:      src/charset.c, src/getchar.c, src/list.c, src/misc2.c,
            src/testdir/README.txt

Patch 8.0.0165
Problem:    Ubsan warns for integer overflow.
Solution:   Swap two conditions. (Dominique Pelle)
Files:      src/regexp_nfa.c

Patch 8.0.0166
Problem:    JSON with a duplicate key gives an internal error. (Lcd)
Solution:   Give a normal error.  Avoid an error when parsing JSON from a
            remote client fails.
Files:      src/evalfunc.c, src/json.c, src/channel.c,
            src/testdir/test_json.vim

Patch 8.0.0167
Problem:    <A HREF="builtin.html#str2nr()">str2nr()</A> and <A HREF="builtin.html#str2float()">str2float()</A> <A HREF="diff.html#do">do</A> not always work with negative values.
Solution:   Be more flexible about handling <A HREF="sign.html#signs">signs</A>. (LemonBoy, closes #1332)
            Add more tests.
Files:      src/evalfunc.c, src/testdir/test_float_func.vim,
            src/testdir/test_functions.vim, src/testdir/test_alot.vim,
            src/Makefile

Patch 8.0.0168
Problem:    Still some float functionality is not covered by tests.
Solution:   Add more tests. (Dominique Pelle, closes #1364)
Files:      src/testdir/test_float_func.vim

Patch 8.0.0169
Problem:    For complicated <A HREF="eval.html#string">string</A> <A HREF="builtin.html#json_decode()">json_decode()</A> may run out of stack space.
Solution:   Change the recursive solution into an iterative solution.
Files:      src/json.c

Patch 8.0.0170 (after 8.0.0169)
Problem:    <A HREF="eval.html#Channel">Channel</A> test fails for using freed memory.
Solution:   Fix memory use in <A HREF="builtin.html#json_decode()">json_decode()</A>.
Files:      src/json.c

Patch 8.0.0171
Problem:    JS style JSON does not support single <A HREF="quotes.html#quotes">quotes</A>.
Solution:   Allow for single <A HREF="quotes.html#quotes">quotes</A>. (Yasuhiro Matsumoto, closes #1371)
Files:      src/json.c, src/testdir/test_json.vim, src/json_test.c,
            runtime/doc/eval.txt

Patch 8.0.0172 (after 8.0.0159)
Problem:    The command selected in the command line <A HREF="windows.html#window">window</A> is not executed.
            (Andrey Starodubtsev)
Solution:   Save and restore the command line at a lower level. (closes #1370)
Files:      src/ex_getln.c, src/testdir/test_history.vim

Patch 8.0.0173
Problem:    When compiling with EBCDIC defined the build fails. (Yaroslav
            Kuzmin)
Solution:   Move sortFunctions() to the right file.  Avoid warning for
            redefining __SUSV3.
Files:      src/eval.c, src/evalfunc.c, src/os_unixx.h

Patch 8.0.0174
Problem:    For completion &quot;<A HREF="mbyte.html#locale">locale</A> -a&quot; is executed on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>, even though
            <A HREF="motion.html#it">it</A> most likely won't work.
Solution:   Skip executing &quot;<A HREF="mbyte.html#locale">locale</A> -a&quot; on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>. (Ken Takata)
Files:      src/ex_cmds2.c

Patch 8.0.0175
Problem:    Setting language in <A HREF="starting.html#gvim">gvim</A> on <A HREF="os_win32.html#MS-Windows">MS-Windows</A> does not work when
            libintl.dll is dynamically linked with msvcrt.dll.
Solution:   Use putenv() from libintl <A HREF="motion.html#as">as</A> well. (Ken Takata, closes #1082)
Files:      src/mbyte.c, src/misc1.c, src/os_win32.c, src/proto/os_win32.pro,
            src/vim.h

Patch 8.0.0176
Problem:    Using <A HREF="change.html#:change">:change</A> in between <A HREF="eval.html#:function">:function</A> and <A HREF="eval.html#:endfunction">:endfunction</A> fails.
Solution:   Recognize <A HREF="change.html#:change">:change</A> inside a function. (ichizok, closes #1374)
Files:      src/userfunc.c, src/testdir/test_viml.vim

Patch 8.0.0177
Problem:    When opening a buffer on a directory and inside a try/catch then
            the <A HREF="autocmd.html#BufEnter">BufEnter</A> event is not triggered.
Solution:   Return NOTDONE from <A HREF="builtin.html#readfile()">readfile()</A> for a directory and deal with the
            three possible return values. (Justin <A HREF="motion.html#M">M</A>. Keyes, closes #1375,
            closes #1353)
Files:      src/buffer.c, src/ex_cmds.c, src/ex_docmd.c, src/fileio.c,
            src/memline.c

Patch 8.0.0178
Problem:    test_command_count may fail when a previous test interferes, seen
            on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Run <A HREF="motion.html#it">it</A> separately.
Files:      src/testdir/test_alot.vim, src/testdir/Make_all.mak

Patch 8.0.0179
Problem:    <A HREF="options.html#'formatprg'">'formatprg'</A> is a global option but the value may depend on the
            type of buffer. (Sung Pae)
Solution:   Make <A HREF="options.html#'formatprg'">'formatprg'</A> <A HREF="options.html#global-local">global-local</A>. (closes #1380)
Files:      src/structs.h, src/option.h, src/option.c, src/normal.c,
            runtime/doc/options.txt, src/testdir/test_normal.vim

Patch 8.0.0180
Problem:    Error <A HREF="autocmd.html#E937">E937</A> is used both for duplicate key in JSON and for trying
            to delete a buffer that is in use.
Solution:   Rename the JSON error to <A HREF="builtin.html#E938">E938</A>. (Norio Takagi, closes #1376)
Files:      src/json.c, src/testdir/test_json.vim

Patch 8.0.0181
Problem:    When <A HREF="options.html#'cursorbind'">'cursorbind'</A> and <A HREF="options.html#'cursorcolumn'">'cursorcolumn'</A> are both on, the column
            highlight in non-current <A HREF="windows.html#windows">windows</A> is wrong.
Solution:   Add validate_cursor(). (Masanori Misono, closes #1372)
Files:      src/move.c

Patch 8.0.0182
Problem:    When <A HREF="options.html#'cursorbind'">'cursorbind'</A> and <A HREF="options.html#'cursorline'">'cursorline'</A> are set, but <A HREF="options.html#'cursorcolumn'">'cursorcolumn'</A> is
            not, then the cursor line highlighting is not updated. (Hirohito
            Higashi)
Solution:   Call redraw_later() with NOT_VALID.
Files:      src/move.c

Patch 8.0.0183
Problem:    Ubsan warns for using a pointer that is not aligned.
Solution:   First copy the address. (Yegappan Lakshmanan)
Files:      src/channel.c

Patch 8.0.0184
Problem:    When in <A HREF="intro.html#Ex">Ex</A> mode and an error is caught by try-catch, Vim still
            exits with a non-zero exit code.
Solution:   Don't set ex_exitval when inside a try-catch. (partly by Christian
            Brabandt)
Files:      src/message.c, src/testdir/test_system.vim

Patch 8.0.0185 (after 8.0.0184)
Problem:    The <A HREF="builtin.html#system()">system()</A> test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Skip the test on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Files:      src/testdir/test_system.vim

Patch 8.0.0186
Problem:    The error message from <A HREF="testing.html#assert_notequal()">assert_notequal()</A> is confusing.
Solution:   Only mention the expected value.
Files:      src/eval.c, src/testdir/test_assert.vim

Patch 8.0.0187
Problem:    Building with a new <A HREF="if_ruby.html#Ruby">Ruby</A> version fails.
Solution:   Use ruby_sysinit() instead of NtInitialize(). (Tomas Volf,
            closes #1382)
Files:      src/if_ruby.c

Patch 8.0.0188 (after 8.0.0182)
Problem:    Using NOT_VALID for redraw_later() to update the cursor
            line/column highlighting is not efficient.
Solution:   Call validate_cursor() when <A HREF="options.html#'cul'">'cul'</A> or <A HREF="options.html#'cuc'">'cuc'</A> is set.
Files:      src/move.c

Patch 8.0.0189
Problem:    There are no tests for the <A HREF="repeat.html#:profile">:profile</A> command.
Solution:   Add tests. (Dominique Pelle, closes #1383)
Files:      src/Makefile, src/testdir/Make_all.mak,
            src/testdir/test_profile.vim

Patch 8.0.0190
Problem:    Detecting duplicate <A HREF="tagsrch.html#tags">tags</A> uses a slow linear search.
Solution:   Use a much faster hash table solution. (James McCoy, closes #1046)
            But don't add hi_keylen, <A HREF="motion.html#it">it</A> makes hash tables 50&#37; bigger.
Files:      src/tag.c

Patch 8.0.0191 (after 8.0.0187)
Problem:    Some systems <A HREF="diff.html#do">do</A> not have ruby_sysinit(), causing the build to
            fail.
Solution:   Clean up how ruby_sysinit() and NtInitialize() are used. (Taro
            Muraoka)
Files:      src/if_ruby.c

Patch 8.0.0192 (after 8.0.0190)
Problem:    Build fails with tiny features.
Solution:   Change #ifdef for hash_clear().  Avoid warning for unused
            argument.
Files:      src/hashtab.c, src/if_cscope.c

Patch 8.0.0193 (after 8.0.0188)
Problem:    Accidentally removed #ifdef.
Solution:   Put <A HREF="motion.html#it">it</A> back. (Masanori Misono)
Files:      src/move.c

Patch 8.0.0194 (after 8.0.0189)
Problem:    Profile tests fails if total and <A HREF="eval.html#self">self</A> time are equal.
Solution:   Make one time optional.
Files:      src/testdir/test_profile.vim

Patch 8.0.0195 (after 8.0.0190)
Problem:    Jumping to a <A HREF="tagsrch.html#tag">tag</A> that is a static item in the current file fails.
            (Kazunobu Kuriyama)
Solution:   Make sure the first byte of the <A HREF="tagsrch.html#tag">tag</A> key is not NUL. (Suggested by
            James McCoy, closes #1387)
Files:      src/tag.c, src/testdir/test_tagjump.vim

Patch 8.0.0196 (after 8.0.0194)
Problem:    The test for <A HREF="repeat.html#:profile">:profile</A> is slow and does not work on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Use the &quot;-es&quot; argument. (Dominique Pelle)  Swap single and double
            <A HREF="quotes.html#quotes">quotes</A> for <A HREF="builtin.html#system()">system()</A>
Files:      src/testdir/test_profile.vim

Patch 8.0.0197
Problem:    On <A HREF="os_win32.html#MS-Windows">MS-Windows</A> the <A HREF="builtin.html#system()">system()</A> test skips a few parts.
Solution:   Swap single and double <A HREF="quotes.html#quotes">quotes</A> for the command.
Files:      src/testdir/test_system.vim

Patch 8.0.0198
Problem:    Some <A HREF="syntax.html#syntax">syntax</A> arguments take effect even after &quot;if 0&quot;. (Taylor
            Venable)
Solution:   Properly skip the <A HREF="syntax.html#syntax">syntax</A> statements.  Make &quot;syn case&quot; and &quot;syn
            conceal&quot; report the current state.  Fix that &quot;syn clear&quot; didn't
            reset the <A HREF="syntax.html#conceal">conceal</A> flag.  Add tests for <A HREF="syntax.html#:syntax">:syntax</A> skipping properly.
Files:      src/syntax.c, src/testdir/test_syntax.vim

Patch 8.0.0199
Problem:    Warning for an unused parameter when the libcall feature is
            disabled.  Warning for a function type cast when compiling with
            -pedantic.
Solution:   Add UNUSED.  Use a different type cast. (Damien Molinier)
Files:      src/evalfunc.c, src/os_unix.c

Patch 8.0.0200
Problem:    Some <A HREF="syntax.html#syntax">syntax</A> arguments are not tested.
Solution:   Add more <A HREF="syntax.html#syntax">syntax</A> command tests.
Files:      src/testdir/test_syntax.vim

Patch 8.0.0201
Problem:    When completing a group name for a highlight or <A HREF="syntax.html#syntax">syntax</A> command
            cleared groups are included.
Solution:   Skip groups that have been cleared.
Files:      src/syntax.c, src/testdir/test_syntax.vim

Patch 8.0.0202
Problem:    No test for invalid <A HREF="syntax.html#syntax">syntax</A> group name.
Solution:   Add a test for group name error and warning.
Files:      src/testdir/test_syntax.vim

Patch 8.0.0203
Problem:    Order of complication flags is sometimes wrong.
Solution:   Put interface-specific flags before ALL_CFLAGS. (idea by Yousong
            Zhou, closes #1100)
Files:      src/Makefile

Patch 8.0.0204
Problem:    Compiler warns for uninitialized variable. (Tony Mechelynck)
Solution:   When skipping set &quot;id&quot; to -1.
Files:      src/syntax.c

Patch 8.0.0205
Problem:    After <A HREF="undo.html#:undojoin">:undojoin</A> some commands don't work properly, such <A HREF="motion.html#as">as</A> <A HREF="undo.html#:redo">:redo</A>.
            (Matthew Malcomson)
Solution:   Don't set curbuf-&gt;b_u_curhead. (closes #1390)
Files:      src/undo.c, src/testdir/test_undo.vim

Patch 8.0.0206
Problem:    Test coverage for <A HREF="change.html#:retab">:retab</A> insufficient.
Solution:   Add test for <A HREF="change.html#:retab">:retab</A>. (Dominique Pelle, closes #1391)
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/test_retab.vim

Patch 8.0.0207
Problem:    Leaking file descriptor when <A HREF="builtin.html#system()">system()</A> cannot find the buffer.
            (Coverity)
Solution:   Close the file descriptor.  (Dominique Pelle, closes #1398)
Files:      src/evalfunc.c

Patch 8.0.0208
Problem:    Internally used commands for <A HREF="starting.html#CTRL-Z">CTRL-Z</A> and mouse click end up in
            <A HREF="cmdline.html#history">history</A>. (Matthew Malcomson)
Solution:   Use do_cmdline_cmd() instead of stuffing them in the readahead
            buffer. (James McCoy, closes #1395)
Files:      src/edit.c, src/normal.c

Patch 8.0.0209
Problem:    When using <A HREF="change.html#:substitute">:substitute</A> with the &quot;<A HREF="change.html#c">c</A>&quot; flag and <A HREF="options.html#'cursorbind'">'cursorbind'</A> is set
            the cursor is not updated in other <A HREF="windows.html#windows">windows</A>.
Solution:   Call do_check_cursorbind(). (Masanori Misono)
Files:      src/ex_cmds.c

Patch 8.0.0210
Problem:    Vim does not support bracketed paste, <A HREF="motion.html#as">as</A> implemented by xterm and
            other terminals.
Solution:   Add <A HREF="term.html#t_BE">t_BE</A>, <A HREF="term.html#t_BD">t_BD</A>, <A HREF="term.html#t_PS">t_PS</A> and <A HREF="term.html#t_PE">t_PE</A>.
Files:      src/term.c, src/term.h, src/option.c, src/misc2.c, src/keymap.h,
            src/edit.c, src/normal.c, src/evalfunc.c, src/getchar.c,
            src/vim.h, src/proto/edit.pro, runtime/doc/term.txt

Patch 8.0.0211 (after 8.0.0210)
Problem:    Build fails if the <A HREF="mbyte.html#multibyte">multibyte</A> feature is disabled.
Solution:   Change #ifdef around ins_char_bytes.
Files:      src/misc1.c

Patch 8.0.0212
Problem:    The buffer used to store a key name theoretically could be too
            small. (Coverity)
Solution:   Count all possible modifier characters.  Add a check for the
            length just in <A HREF="change.html#case">case</A>.
Files:      src/keymap.h, src/misc2.c

Patch 8.0.0213
Problem:    The Netbeans &quot;specialKeys&quot; command does not check if the argument
            fits in the buffer. (Coverity)
Solution:   Add a length check.
Files:      src/netbeans.c

Patch 8.0.0214
Problem:    Leaking memory when <A HREF="syntax.html#syntax">syntax</A> cluster id is unknown. (Coverity)
Solution:   Free the memory.
Files:      src/syntax.c

Patch 8.0.0215
Problem:    When a <A HREF="if_cscop.html#Cscope">Cscope</A> line contains <A HREF="various.html#CTRL-L">CTRL-L</A> a NULL pointer may be used.
            (Coverity)
Solution:   Don't check for an emacs <A HREF="tagsrch.html#tag">tag</A> in a <A HREF="if_cscop.html#cscope">cscope</A> line.
Files:      src/tag.c

Patch 8.0.0216
Problem:    When decoding JSON with a JS style object the JSON test may use a
            NULL pointer. (Coverity)
Solution:   Check for a NULL pointer.
Files:      src/json.c, src/json_test.c

Patch 8.0.0217 (after 8.0.0215)
Problem:    Build fails without the <A HREF="if_cscop.html#cscope">cscope</A> feature.
Solution:   Add #ifdef.
Files:      src/tag.c

Patch 8.0.0218
Problem:    No command line completion for <A HREF="quickfix.html#:cexpr">:cexpr</A>, <A HREF="quickfix.html#:cgetexpr">:cgetexpr</A>, <A HREF="quickfix.html#:caddexpr">:caddexpr</A>, etc.
Solution:   Make completion work. (Yegappan Lakshmanan)  Add a test.
Files:      src/ex_docmd.c, src/testdir/test_cmdline.vim

Patch 8.0.0219
Problem:    Ubsan reports <A HREF="message.html#errors">errors</A> for integer overflow.
Solution:   Define macros for minimum and maximum values.  <A HREF="visual.html#Select">Select</A> an
            <A HREF="eval.html#expression">expression</A> based on the value. (Mike Williams)
Files:      src/charset.c, src/eval.c, src/evalfunc.c, src/structs.h,
            src/testdir/test_viml.vim

Patch 8.0.0220
Problem:    Completion for <A HREF="pattern.html#:match">:match</A> does not show &quot;none&quot; and other missing
            highlight names.
Solution:   Skip over cleared entries before checking the index to be at the
            end.
Files:      src/syntax.c, src/testdir/test_cmdline.vim

Patch 8.0.0221
Problem:    Checking if PROTO is defined inside a function has no effect.
Solution:   Remove the check for PROTO. (Hirohito Higashi)
Files:      src/misc1.c

Patch 8.0.0222
Problem:    When a <A HREF="mbyte.html#multibyte">multibyte</A> character ends in a zero byte, putting blockwise
            text puts <A HREF="motion.html#it">it</A> before the character instead of after <A HREF="motion.html#it">it</A>.
Solution:   Use int instead of char for the character under the cursor.
            (Luchr, closes #1403)  Add a test.
Files:      src/ops.c, src/testdir/test_put.vim, src/Makefile,
            src/testdir/test_alot.vim

Patch 8.0.0223
Problem:    Coverity gets confused by the flags passed to find_tags() and
            warns about uninitialized variable.
Solution:   Disallow using <A HREF="if_cscop.html#cscope">cscope</A> and help <A HREF="tagsrch.html#tags">tags</A> at the same time.
Files:      src/tag.c

Patch 8.0.0224
Problem:    When <A HREF="options.html#'fileformats'">'fileformats'</A> is changed in a <A HREF="autocmd.html#BufReadPre">BufReadPre</A> auto command, <A HREF="motion.html#it">it</A>
            does not take effect in <A HREF="builtin.html#readfile()">readfile()</A>. (Gary Johnson)
Solution:   Check the value of <A HREF="options.html#'fileformats'">'fileformats'</A> after executing auto commands.
            (Christian Brabandt)
Files:      src/fileio.c, src/testdir/test_fileformat.vim

Patch 8.0.0225
Problem:    When a block is visually selected and put is used on the end of
            the selection only one line is changed.
Solution:   Check for the end properly. (Christian Brabandt, neovim issue
            5781)
Files:      src/ops.c, src/testdir/test_put.vim

Patch 8.0.0226
Problem:    The test for patch 8.0.0224 misses the CR characters and passes
            even without the fix. (Christian Brabandt)
Solution:   Use double <A HREF="quotes.html#quotes">quotes</A> and \&lt;CR&gt;.
Files:      src/testdir/test_fileformat.vim

Patch 8.0.0227
Problem:    Crash when <A HREF="options.html#'fileformat'">'fileformat'</A> is forced to &quot;<A HREF="os_dos.html#dos">dos</A>&quot; and the first line in
            the file is empty and does not have a CR character.
Solution:   Don't check for CR before the start of the buffer.
Files:      src/fileio.c, src/testdir/test_fileformat.vim

Patch 8.0.0228 (after 8.0.0210)
Problem:    When pasting test in an xterm on the command line <A HREF="motion.html#it">it</A> is surrounded
            by &lt;PasteStart&gt; and &lt;PasteEnd&gt;. (Johannes Kaltenbach)
Solution:   Add missing changes.
Files:      src/ex_getln.c, src/term.c

Patch 8.0.0229 (after 8.0.0179)
Problem:    When freeing a buffer the local value of the <A HREF="options.html#'formatprg'">'formatprg'</A> option is
            not cleared.
Solution:   Add missing change.
Files:      src/buffer.c

Patch 8.0.0230 (after 8.0.0210)
Problem:    When using bracketed paste line breaks are not respected.
Solution:   Turn CR characters into a line break if the text is being
            inserted. (closes #1404)
Files:      src/edit.c

Patch 8.0.0231
Problem:    There are no tests for bracketed paste mode.
Solution:   Add a test.  Fix <A HREF="repeat.html#repeating">repeating</A> with &quot;normal .&quot;.
Files:      src/edit.c, src/testdir/test_paste.vim, src/Makefile,
            src/testdir/Make_all.mak

Patch 8.0.0232
Problem:    Pasting in <A HREF="insert.html#Insert">Insert</A> mode does not work when bracketed paste is used
            and <A HREF="options.html#'esckeys'">'esckeys'</A> is off.
Solution:   When <A HREF="options.html#'esckeys'">'esckeys'</A> is off disable bracketed paste in <A HREF="insert.html#Insert">Insert</A> mode.
Files:      src/edit.c

Patch 8.0.0233 (after 8.0.0231)
Problem:    The paste test fails if the <A HREF="gui.html#GUI">GUI</A> is being used.
Solution:   Skip the test in the <A HREF="gui.html#GUI">GUI</A>.
Files:      src/testdir/test_paste.vim

Patch 8.0.0234 (after 8.0.0225)
Problem:    When several lines are visually selected and one of them is short,
            using put may cause a crash. (Axel Bender)
Solution:   Check for a short line. (Christian Brabandt)
Files:      src/ops.c, src/testdir/test_put.vim

Patch 8.0.0235
Problem:    Memory leak detected when running tests for <A HREF="diff.html#diff">diff</A> mode.
Solution:   Free p_extra_free.
Files:      src/screen.c

Patch 8.0.0236 (after 8.0.0234)
Problem:    Gcc complains that a variable may be used uninitialized. Confusion
            between variable and label name. (John Marriott)
Solution:   Initialize <A HREF="motion.html#it">it</A>.  Rename end to end_lnum.
Files:      src/ops.c

Patch 8.0.0237
Problem:    When setting wildoptions=tagfile the completion context is not set
            correctly. (desjardins)
Solution:   Check for EXPAND_TAGS_LISTFILES. (Christian Brabandt, closes #1399)
Files:      src/ex_getln.c, src/testdir/test_cmdline.vim

Patch 8.0.0238
Problem:    When using bracketed paste autoindent causes indent to be
            increased.
Solution:   Disable <A HREF="options.html#'ai'">'ai'</A> and set <A HREF="options.html#'paste'">'paste'</A> temporarily. (Ken Takata)
Files:      src/edit.c, src/testdir/test_paste.vim

Patch 8.0.0239
Problem:    The address sanitizer sometimes finds <A HREF="message.html#errors">errors</A>, but <A HREF="motion.html#it">it</A> needs to be
            run manually.
Solution:   Add an environment to Travis with clang and the address sanitizer.
            (Christian Brabandt)  Also include changes only on github.
Files:      .travis.yml

Patch 8.0.0240 (after 8.0.0239)
Problem:    The clang build on CI fails with one configuration.
Solution:   Redo a previous patch that was accidentally reverted.
Files:      .travis.yml

Patch 8.0.0241
Problem:    Vim defines a mch_memmove() function but <A HREF="motion.html#it">it</A> doesn't work, thus is
            always unused.
Solution:   Remove the mch_memmove implementation. (suggested by Dominique
            Pelle)
Files:      src/os_unix.h, src/misc2.c, src/vim.h

Patch 8.0.0242
Problem:    Completion of user defined <A HREF="eval.html#functions">functions</A> is not covered by tests.
Solution:   Add tests.  Also test various <A HREF="message.html#errors">errors</A> of user-defined commands.
            (Dominique Pelle, closes #1413)
Files:      src/testdir/test_usercommands.vim

Patch 8.0.0243
Problem:    When making a character lower <A HREF="change.html#case">case</A> with <A HREF="builtin.html#tolower()">tolower()</A> changes the byte
            <A HREF="intro.html#count">count</A>, <A HREF="motion.html#it">it</A> is not made lower <A HREF="change.html#case">case</A>.
Solution:   Add strlow_save(). (Dominique Pelle, closes #1406)
Files:      src/evalfunc.c, src/misc2.c, src/proto/misc2.pro,
            src/testdir/test_functions.vim

Patch 8.0.0244
Problem:    When the user sets <A HREF="term.html#t_BE">t_BE</A> empty after <A HREF="starting.html#startup">startup</A> to disable bracketed
            paste, this has no direct effect.
Solution:   When <A HREF="term.html#t_BE">t_BE</A> is made empty write <A HREF="term.html#t_BD">t_BD</A>.  When <A HREF="term.html#t_BE">t_BE</A> is made non-empty
            write the new value.
Files:      src/option.c

Patch 8.0.0245
Problem:    The generated zh_CN.cp936.po message file is not encoded properly.
Solution:   Instead of using zh_CN.po <A HREF="motion.html#as">as</A> input, use zh_CN.UTF-8.po.
Files:      src/po/Makefile

Patch 8.0.0246
Problem:    Compiler warnings for int to pointer conversion.
Solution:   Fix <A HREF="map.html#macro">macro</A> for mch_memmove(). (John Marriott)
Files:      src/vim.h

Patch 8.0.0247
Problem:    Under some circumstances, one needs to type Ctrl-N or Ctrl-P <A HREF="if_cscop.html#twice">twice</A>
            to have a menu entry selected. (Lifepillar)
Solution:   call ins_compl_free(). (Christian Brabandt, closes #1411)
Files:      src/edit.c, src/testdir/test_popup.vim

Patch 8.0.0248
Problem:    vim_strcat() cannot handle overlapping arguments.
Solution:   Use mch_memmove() instead of strcpy(). (Justin <A HREF="motion.html#M">M</A>. Keyes,
            closes #1415)
Files:      src/misc2.c

Patch 8.0.0249
Problem:    When two submits happen quick after each other, the tests for the
            first one may error out.
Solution:   Use a git depth of 10 instead of 1. (Christian Brabandt)
Files:      .travis.yml

Patch 8.0.0250
Problem:    When <A HREF="builtin.html#virtcol()">virtcol()</A> gets a column that is not the first byte of a
            <A HREF="mbyte.html#multibyte">multibyte</A> character the result is unpredictable. (Christian
            Ludwig)
Solution:   Correct the column to the first byte of a <A HREF="mbyte.html#multibyte">multibyte</A> character.
            Change the <A HREF="mbyte.html#utf-8">utf-8</A> test to new style.
Files:      src/charset.c, src/testdir/test_utf8.in, src/testdir/test_utf8.ok,
            src/testdir/test_utf8.vim, src/Makefile, src/testdir/Make_all.mak,
            src/testdir/test_alot_utf8.vim

Patch 8.0.0251
Problem:    It is not so <A HREF="starting.html#easy">easy</A> to write a <A HREF="usr_41.html#script">script</A> that works with both <A HREF="if_pyth.html#Python">Python</A> 2
            and <A HREF="if_pyth.html#Python">Python</A> 3, even when the <A HREF="if_pyth.html#Python">Python</A> code works with both.
Solution:   Add <A HREF="options.html#'pyxversion'">'pyxversion'</A>, <A HREF="if_pyth.html#:pyx">:pyx</A>, etc. (Marc Weber, Ken Takata)
Files:      Filelist, runtime/doc/eval.txt, runtime/doc/if_pyth.txt,
            runtime/doc/index.txt, runtime/doc/options.txt,
            runtime/optwin.vim, runtime/doc/quickref.txt,
            runtime/doc/usr_41.txt, src/Makefile, src/evalfunc.c,
            src/ex_cmds.h, src/ex_cmds2.c, src/ex_docmd.c, src/if_python.c,
            src/if_python3.c, src/option.c, src/option.h,
            src/proto/ex_cmds2.pro, src/testdir/Make_all.mak,
            src/testdir/pyxfile/py2_magic.py,
            src/testdir/pyxfile/py2_shebang.py,
            src/testdir/pyxfile/py3_magic.py,
            src/testdir/pyxfile/py3_shebang.py, src/testdir/pyxfile/pyx.py,
            src/testdir/test_pyx2.vim, src/testdir/test_pyx3.vim
            src/userfunc.c

Patch 8.0.0252
Problem:    Characters below 256 that are not one byte are not always
            recognized <A HREF="motion.html#as">as</A> <A HREF="motion.html#word">word</A> characters.
Solution:   Make vim_iswordc() and vim_iswordp() work the same way. Add a test
            for this. (Ozaki Kiichi)
Files:      src/Makefile, src/charset.c, src/kword_test.c, src/mbyte.c,
            src/proto/mbyte.pro

Patch 8.0.0253
Problem:    When creating a session when <A HREF="options.html#'winminheight'">'winminheight'</A> is 2 or larger and
            loading that session gives an error.
Solution:   Also set <A HREF="options.html#'winminheight'">'winminheight'</A> before setting <A HREF="options.html#'winheight'">'winheight'</A> to 1. (Rafael
            Bodill, neovim #5717)
Files:      src/ex_docmd.c, src/testdir/test_mksession.vim

Patch 8.0.0254
Problem:    When using an assert function one can either specify a message or
            get a message about what failed, not both.
Solution:   Concatenate the error with the message.
Files:      src/eval.c, src/testdir/test_assert.vim

Patch 8.0.0255
Problem:    When calling <A HREF="builtin.html#setpos()">setpos()</A> with a buffer argument <A HREF="motion.html#it">it</A> often is ignored.
            (Matthew Malcomson)
Solution:   Make the buffer argument work for all marks local to a buffer.
            (neovim #5713)  Add more tests.
Files:      src/mark.c, src/testdir/test_marks.vim, runtime/doc/eval.txt

Patch 8.0.0256 (after 8.0.0255)
Problem:    Tests fail because some changes were not included.
Solution:   Add changes to evalfunc.c
Files:      src/evalfunc.c

Patch 8.0.0257 (after 8.0.0252)
Problem:    The keyword test file is not included in the archive.
Solution:   Update the <A HREF="eval.html#list">list</A> of files.
Files:      Filelist

Patch 8.0.0258 (after 8.0.0253)
Problem:    mksession test leaves file behind.
Solution:   Delete the file.  Rename files to start with &quot;<A HREF="change.html#X">X</A>&quot;.
Files:      src/testdir/test_mksession.vim

Patch 8.0.0259
Problem:    <A HREF="intro.html#Tab">Tab</A> commands <A HREF="diff.html#do">do</A> not handle <A HREF="intro.html#count">count</A> correctly. (Ken Hamada)
Solution:   Add ADDR_TABS_RELATIVE. (Hirohito Higashi)
Files:      runtime/doc/tabpage.txt, src/ex_cmds.h, src/ex_docmd.c,
            src/testdir/test_tabpage.vim

Patch 8.0.0260
Problem:    Build fails with tiny features.
Solution:   Move get_tabpage_arg() inside #ifdef.
Files:      src/ex_docmd.c

Patch 8.0.0261
Problem:    Not enough test coverage for <A HREF="eval.html#eval">eval</A> <A HREF="eval.html#functions">functions</A>.
Solution:   Add more tests. (Dominique Pelle, closes #1420)
Files:      src/testdir/test_functions.vim

Patch 8.0.0262
Problem:    <A HREF="farsi.html#Farsi">Farsi</A> support is barely tested.
Solution:   Add more tests for <A HREF="farsi.html#Farsi">Farsi</A>.  Clean up the code.
Files:      src/edit.c, src/farsi.c, src/testdir/test_farsi.vim

Patch 8.0.0263
Problem:    <A HREF="farsi.html#Farsi">Farsi</A> support is not tested enough.
Solution:   Add more tests for <A HREF="farsi.html#Farsi">Farsi</A>.  Clean up the code.
Files:      src/farsi.c, src/testdir/test_farsi.vim

Patch 8.0.0264
Problem:    Memory error reported by ubsan, probably for using the <A HREF="eval.html#string">string</A>
            returned by <A HREF="builtin.html#execute()">execute()</A>.
Solution:   NUL terminate the result of <A HREF="builtin.html#execute()">execute()</A>.
Files:      src/evalfunc.c

Patch 8.0.0265
Problem:    May get ml_get error when <A HREF="if_pyth.html#:pydo">:pydo</A> deletes lines or switches to
            another buffer. (Nikolai Pavlov, issue #1421)
Solution:   Check the buffer and line every time.
Files:      src/if_py_both.h, src/testdir/test_python2.vim,
            src/testdir/test_python3.vim, src/Makefile,
            src/testdir/Make_all.mak

Patch 8.0.0266
Problem:    Compiler warning for using uninitialized variable.
Solution:   Set tab_number also when there is an error.
Files:      src/ex_docmd.c

Patch 8.0.0267
Problem:    A <A HREF="channel.html#channel">channel</A> test sometimes fails on <A HREF="os_mac.html#Mac">Mac</A>.
Solution:   Add the test to the <A HREF="eval.html#list">list</A> of flaky tests.
Files:      src/testdir/runtest.vim

Patch 8.0.0268
Problem:    May get ml_get error when <A HREF="if_lua.html#:luado">:luado</A> deletes lines or switches to
            another buffer. (Nikolai Pavlov, issue #1421)
Solution:   Check the buffer and line every time.
Files:      src/if_lua.c, src/testdir/test_lua.vim, src/Makefile,
            src/testdir/Make_all.mak

Patch 8.0.0269
Problem:    May get ml_get error when <A HREF="if_perl.html#:perldo">:perldo</A> deletes lines or switches to
            another buffer. (Nikolai Pavlov, issue #1421)
Solution:   Check the buffer and line every time.
Files:      src/if_perl.xs, src/testdir/test_perl.vim

Patch 8.0.0270
Problem:    May get ml_get error when <A HREF="if_ruby.html#:rubydo">:rubydo</A> deletes lines or switches to
            another buffer. (Nikolai Pavlov, issue #1421)
Solution:   Check the buffer and line every time.
Files:      src/if_ruby.c, src/testdir/test_ruby.vim

Patch 8.0.0271
Problem:    May get ml_get error when <A HREF="if_tcl.html#:tcldo">:tcldo</A> deletes lines or switches to
            another buffer. (Nikolai Pavlov, closes #1421)
Solution:   Check the buffer and line every time.
Files:      src/if_tcl.c, src/testdir/test_tcl.vim, src/Makefile,
            src/testdir/Make_all.mak

Patch 8.0.0272
Problem:    Crash on exit is not detected when running tests.
Solution:   Remove the dash before the command. (Dominique Pelle, closes
            #1425)
Files:      src/testdir/Makefile

Patch 8.0.0273
Problem:    Dead code detected by Coverity when not using gnome.
Solution:   Rearrange the #ifdefs to avoid dead code.
Files:      src/gui_gtk_x11.c

Patch 8.0.0274
Problem:    When update_single_line() is called recursively, or another screen
            update happens while <A HREF="motion.html#it">it</A> is busy, <A HREF="message.html#errors">errors</A> may occur.
Solution:   Check and update updating_screen. (Christian Brabandt)
Files:      src/screen.c

Patch 8.0.0275
Problem:    When checking for <A HREF="pattern.html#CTRL-C">CTRL-C</A> typed the <A HREF="gui.html#GUI">GUI</A> may detect a screen resize
            and redraw the screen, causing trouble.
Solution:   Set updating_screen in ui_breakcheck().
Files:      src/ui.c

Patch 8.0.0276
Problem:    Checking for FEAT_GUI_GNOME inside <A HREF="gui_x11.html#GTK">GTK</A> 3 code is unnecessary.
Solution:   Remove the #ifdef. (Kazunobu Kuriyama)
Files:      src/gui_gtk_x11.c

Patch 8.0.0277
Problem:    The <A HREF="gui.html#GUI">GUI</A> test may trigger fontconfig and take a long time.
Solution:   Set $XDG_CACHE_HOME. (Kazunobu Kuriyama)
Files:      src/testdir/unix.vim, src/testdir/test_gui.vim

Patch 8.0.0278 (after 8.0.0277)
Problem:    <A HREF="gui.html#GUI">GUI</A> test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Check that tester_HOME exists.
Files:      src/testdir/test_gui.vim

Patch 8.0.0279
Problem:    With MSVC 2015 the dll name is vcruntime140.dll.
Solution:   Check the MSVC version and use the right dll name. (Ken Takata)
Files:      src/Make_mvc.mak

Patch 8.0.0280
Problem:    On <A HREF="os_win32.html#MS-Windows">MS-Windows</A> setting an environment variable with <A HREF="mbyte.html#multibyte">multibyte</A>
            strings does not work well.
Solution:   Use wputenv when possible. (Taro Muraoka, Ken Takata)
Files:      src/misc1.c, src/os_win32.c, src/os_win32.h,
            src/proto/os_win32.pro, src/vim.h

Patch 8.0.0281
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> files are still using ARGSUSED while most other files
            have UNUSED.
Solution:   Change ARGSUSED to UNUSED or delete <A HREF="motion.html#it">it</A>.
Files:      src/os_win32.c, src/gui_w32.c, src/os_mswin.c, src/os_w32exe.c,
            src/winclip.c

Patch 8.0.0282
Problem:    When doing a <A HREF="visual.html#Visual">Visual</A> selection and using &quot;<A HREF="insert.html#I">I</A>&quot; to go to insert mode,
            <A HREF="motion.html#CTRL-O">CTRL-O</A> needs to be used <A HREF="if_cscop.html#twice">twice</A> to go to <A HREF="intro.html#Normal">Normal</A> mode. (Coacher)
Solution:   Check for the return value of edit(). (Christian Brabandt,
            closes #1290)
Files:      src/normal.c, src/ops.c

Patch 8.0.0283
Problem:    The return value of <A HREF="builtin.html#mode()">mode()</A> does not indicate that completion is
            active in <A HREF="insert.html#Replace">Replace</A> and <A HREF="insert.html#Insert">Insert</A> mode. (Zhen-Huan (Kenny) Hu)
Solution:   Add &quot;<A HREF="change.html#c">c</A>&quot; or &quot;<A HREF="change.html#x">x</A>&quot; for two kinds of completion. (Yegappan Lakshmanan,
            closes #1397)  Test some more modes.
Files:      runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_functions.vim, src/testdir/test_mapping.vim

Patch 8.0.0284
Problem:    The Test_collapse_buffers() test failed once, looks like <A HREF="motion.html#it">it</A> is
            flaky.
Solution:   Add <A HREF="motion.html#it">it</A> to the <A HREF="eval.html#list">list</A> of flaky tests.
Files:      src/testdir/runtest.vim

Patch 8.0.0285 (after 8.0.0277)
Problem:    Tests fail with tiny build on <A HREF="os_unix.html#Unix">Unix</A>.
Solution:   Only set g:tester_HOME when build with the <A HREF="various.html#+eval">+eval</A> feature.
Files:      src/testdir/unix.vim

Patch 8.0.0286
Problem:    When concealing is active and the screen is resized in the <A HREF="gui.html#GUI">GUI</A> <A HREF="motion.html#it">it</A>
            is not immediately redrawn.
Solution:   Use update_prepare() and update_finish() from
            update_single_line().
Files:      src/screen.c

Patch 8.0.0287
Problem:    Cannot access the arguments of the current function in debug mode.
            (Luc Hermitte)
Solution:   use get_funccal(). (LemonBoy, closes #1432, closes #1352)
Files:      src/userfunc.c

Patch 8.0.0288 (after 8.0.0284)
Problem:    Errors reported while running tests.
Solution:   Put comma in the right place.
Files:      src/testdir/runtest.vim

Patch 8.0.0289
Problem:    No test for &quot;<A HREF="various.html#ga">ga</A>&quot; and <A HREF="various.html#:ascii">:ascii</A>.
Solution:   Add a test. (Dominique Pelle, closes #1429)
Files:      src/Makefile, src/testdir/test_alot.vim, src/testdir/test_ga.vim

Patch 8.0.0290
Problem:    If a wide character doesn't fit at the end of the screen line, and
            the line doesn't fit on the screen, then the cursor position may
            be wrong. (anliting)
Solution:   Don't skip over wide character. (Christian Brabandt, closes #1408)
Files:      src/screen.c

Patch 8.0.0291 (after 8.0.0282)
Problem:    <A HREF="visual.html#Visual">Visual</A> block insertion does not insert in all lines.
Solution:   Don't bail out of insert too early. Add a test. (Christian
            Brabandt, closes #1290)
Files:      src/ops.c, src/testdir/test_visual.vim

Patch 8.0.0292
Problem:    The stat test is a bit slow.
Solution:   Remove a couple of sleep comments and reduce another.
Files:      src/testdir/test_stat.vim

Patch 8.0.0293
Problem:    Some tests have a one or three second wait.
Solution:   Reset the <A HREF="options.html#'showmode'">'showmode'</A> option.  Use a test time of one to disable
            sleep after an error or warning message.
Files:      src/misc1.c, src/testdir/runtest.vim, src/testdir/test_normal.vim

Patch 8.0.0294
Problem:    Argument <A HREF="eval.html#list">list</A> is not stored correctly in a session file.
            (lgpasquale)
Solution:   Use &quot;$argadd&quot; instead of &quot;argadd&quot;. (closes #1434)
Files:      src/ex_docmd.c, src/testdir/test_mksession.vim

Patch 8.0.0295 (after 8.0.0293)
Problem:    test_viml hangs.
Solution:   Put resetting <A HREF="options.html#'more'">'more'</A> before sourcing the <A HREF="usr_41.html#script">script</A>.
Files:      src/testdir/runtest.vim

Patch 8.0.0296
Problem:    Bracketed paste can only append, not insert.
Solution:   When the cursor is in the first column insert the text.
Files:      src/normal.c, src/testdir/test_paste.vim, runtime/doc/term.txt

Patch 8.0.0297
Problem:    Double free on exit when using a <A HREF="eval.html#closure">closure</A>. (James McCoy)
Solution:   Split free_al_functions in two parts. (closes #1428)
Files:      src/userfunc.c, src/structs.h

Patch 8.0.0298
Problem:    <A HREF="intro.html#Ex">Ex</A> command range with repeated search does not work. (Bruce
            DeVisser)
Solution:   Skip over \/, \? and \&amp;.
Files:      src/ex_docmd.c, src/testdir/test_cmdline.vim

Patch 8.0.0299
Problem:    When the <A HREF="gui.html#GUI">GUI</A> <A HREF="windows.html#window">window</A> is resized Vim does not always take over the
            new size. (Luchr)
Solution:   Reset new_p_guifont in gui_resize_shell().  Call
            gui_may_resize_shell() in the main loop.
Files:      src/main.c, src/gui.c

Patch 8.0.0300
Problem:    Cannot stop diffing hidden <A HREF="windows.html#buffers">buffers</A>. (Daniel Hahler)
Solution:   When using <A HREF="diff.html#:diffoff">:diffoff</A>! make the whole <A HREF="eval.html#list">list</A> if diffed <A HREF="windows.html#buffers">buffers</A> empty.
            (closes #736)
Files:      src/diff.c, src/testdir/test_diffmode.vim

Patch 8.0.0301
Problem:    No tests for &quot;<A HREF="options.html#:set">:set</A> completion&quot; and various <A HREF="message.html#errors">errors</A> of the <A HREF="options.html#:set">:set</A>
            command.
Solution:   Add more <A HREF="options.html#:set">:set</A> tests. (Dominique Pelle, closes #1440)
Files:      src/testdir/test_options.vim

Patch 8.0.0302
Problem:    Cannot set <A HREF="terminal.html#terminal">terminal</A> key codes with <A HREF="eval.html#:let">:let</A>.
Solution:   Make <A HREF="motion.html#it">it</A> work.
Files:      src/option.c, src/testdir/test_assign.vim

Patch 8.0.0303
Problem:    Bracketed paste does not work in <A HREF="visual.html#Visual">Visual</A> mode.
Solution:   Delete the text before pasting
Files:      src/normal.c, src/ops.c, src/proto/ops.pro,
            src/testdir/test_paste.vim

Patch 8.0.0304 (after 8.0.0302)
Problem:    Assign test fails in the <A HREF="gui.html#GUI">GUI</A>.
Solution:   Skip the test for setting <A HREF="term.html#t_k1">t_k1</A>.
Files:      src/testdir/test_assign.vim

Patch 8.0.0305
Problem:    Invalid memory access when option has duplicate flag.
Solution:   Correct pointer computation. (Dominique Pelle, closes #1442)
Files:      src/option.c, src/testdir/test_options.vim

Patch 8.0.0306
Problem:    <A HREF="builtin.html#mode()">mode()</A> not sufficiently tested.
Solution:   Add more tests. (Yegappan Lakshmanan)
Files:      src/testdir/test_functions.vim

Patch 8.0.0307
Problem:    Asan detects a memory error when EXITFREE is defined. (Dominique
            Pelle)
Solution:   In getvcol() check for ml_get_buf() returning an empty <A HREF="eval.html#string">string</A>.
            Also skip adjusting the scroll position.  Set &quot;<A HREF="starting.html#exiting">exiting</A>&quot; in
            mch_exit() for all systems.
Files:      src/charset.c, src/window.c, src/os_mswin.c, src/os_win32.c,
            src/os_amiga.c

Patch 8.0.0308
Problem:    When using a symbolic link, the package path will not be inserted
            at the right position in <A HREF="options.html#'runtimepath'">'runtimepath'</A>. (Dugan Chen, Norio Takagi)
Solution:   Resolve symbolic links when finding the right position in
            <A HREF="options.html#'runtimepath'">'runtimepath'</A>. (Hirohito Higashi)
Files:      src/ex_cmds2.c, src/testdir/test_packadd.vim

Patch 8.0.0309
Problem:    Cannot use an empty key in json.
Solution:   Allow for using an empty key.
Files:      src/json.c, src/testdir/test_json.vim

Patch 8.0.0310
Problem:    Not enough <A HREF="testing.html#testing">testing</A> for <A HREF="gui.html#GUI">GUI</A> functionality.
Solution:   Add tests for <A HREF="eval.html#v:windowid">v:windowid</A> and getwinpos[xy](). (Kazunobu Kuriyama)
Files:      src/testdir/test_gui.vim

Patch 8.0.0311
Problem:    Linebreak tests are old style.
Solution:   Turn the tests into new style. Share utility <A HREF="eval.html#functions">functions</A>. (Ozaki
            Kiichi, closes #1444)
Files:      src/Makefile, src/testdir/Make_all.mak,
            src/testdir/test_breakindent.vim, src/testdir/test_listlbr.in,
            src/testdir/test_listlbr.ok, src/testdir/test_listlbr.vim,
            src/testdir/test_listlbr_utf8.in,
            src/testdir/test_listlbr_utf8.ok,
            src/testdir/test_listlbr_utf8.vim, src/testdir/view_util.vim

Patch 8.0.0312
Problem:    When a json message arrives in pieces, the start is dropped and
            the decoding fails.
Solution:   Do not drop the start when <A HREF="motion.html#it">it</A> is still needed. (Kay Zheng)  Add a
            test.  Reset the timeout when something is received.
Files:      src/channel.c, src/testdir/test_channel.vim, src/structs.h,
            src/testdir/test_channel_pipe.py

Patch 8.0.0313 (after 8.0.0310)
Problem:    Not enough <A HREF="testing.html#testing">testing</A> for <A HREF="gui.html#GUI">GUI</A> functionality.
Solution:   Add tests for the <A HREF="gui.html#GUI">GUI</A> font. (Kazunobu Kuriyama)
Files:      src/testdir/test_gui.vim

Patch 8.0.0314
Problem:    <A HREF="builtin.html#getcmdtype()">getcmdtype()</A>, <A HREF="builtin.html#getcmdpos()">getcmdpos()</A> and <A HREF="builtin.html#getcmdline()">getcmdline()</A> are not tested.
Solution:   Add tests. (Yegappan Lakshmanan)
Files:      src/testdir/test_cmdline.vim

Patch 8.0.0315
Problem:    &quot;<A HREF="helphelp.html#:help">:help</A> :[range]&quot; does not work. (Tony Mechelynck)
Solution:   Translate to insert a <A HREF="intro.html#backslash">backslash</A>.
Files:      src/ex_cmds.c

Patch 8.0.0316
Problem:    &quot;<A HREF="helphelp.html#:help">:help</A> z?&quot; does not work. (Pavol Juhas)
Solution:   Remove exception for z?.
Files:      src/ex_cmds.c

Patch 8.0.0317
Problem:    No test for setting <A HREF="options.html#'guifont'">'guifont'</A>.
Solution:   Add a test for <A HREF="options.html#X11">X11</A> GUIs. (Kazunobu Kuriyama)
Files:      src/testdir/test_gui.vim

Patch 8.0.0318
Problem:    Small mistake in 7x13 font name.
Solution:   Use ISO 8859-1 name instead of 10646-1. (Kazunobu Kuriyama)
Files:      src/testdir/test_gui.vim

Patch 8.0.0319
Problem:    <A HREF="insert.html#Insert">Insert</A> mode completion does not respect &quot;start&quot; in <A HREF="options.html#'backspace'">'backspace'</A>.
Solution:   Check whether backspace can go before where insert started.
            (Hirohito Higashi)
Files:      src/edit.c, src/testdir/test_popup.vim

Patch 8.0.0320
Problem:    Warning for unused variable with small build.
Solution:   Change #ifdef to exclude FEAT_CMDWIN. (Kazunobu Kuriyama)
Files:      src/ex_getln.c

Patch 8.0.0321
Problem:    When using the tiny version trying to load the matchit <A HREF="usr_05.html#plugin">plugin</A>
            gives an error. On <A HREF="os_win32.html#MS-Windows">MS-Windows</A> some default mappings fail.
Solution:   Add a check if the command used is available. (Christian Brabandt)
Files:      runtime/mswin.vim, runtime/macros/matchit.vim

Patch 8.0.0322
Problem:    Possible overflow with <A HREF="spell.html#spell">spell</A> file where the tree length is
            corrupted.
Solution:   Check for an invalid length (suggested by shqking)
Files:      src/spellfile.c

Patch 8.0.0323
Problem:    When running the command line tests there is a one second wait.
Solution:   Change an Esc to Ctrl-C. (Yegappan Lakshmanan)
Files:      src/testdir/test_cmdline.vim

Patch 8.0.0324
Problem:    Illegal memory access with &quot;1;y&quot;.
Solution:   Call check_cursor() instead of check_cursor_lnum(). (Dominique
            Pelle, closes #1455)
Files:      src/ex_docmd.c, src/testdir/test_cmdline.vim

Patch 8.0.0325
Problem:    Packadd test does not clean up symlink.
Solution:   Delete the link. (Hirohito Higashi)
Files:      src/testdir/test_packadd.vim

Patch 8.0.0326 (after 8.0.0325)
Problem:    Packadd test uses wrong directory name.
Solution:   Use the variable name value. (Hirohito Higashi)
Files:      src/testdir/test_packadd.vim

Patch 8.0.0327
Problem:    The <A HREF="cmdline.html#E11">E11</A> error message in the command line <A HREF="windows.html#window">window</A> is not
            translated.
Solution:   use _(). (Hirohito Higashi)
Files:      src/ex_docmd.c

Patch 8.0.0328
Problem:    The &quot;zero count&quot; error doesn't have a number. (Hirohito Higashi)
Solution:   Give <A HREF="motion.html#it">it</A> a number and be more specific about the error.
Files:      src/globals.h

Patch 8.0.0329
Problem:    Xfontset and guifontwide are not tested.
Solution:   Add tests. (Kazunobu Kuriyama)
Files:      src/testdir/test_gui.vim

Patch 8.0.0330
Problem:    Illegal memory access after &quot;vapo&quot;. (Dominique Pelle)
Solution:   Fix the cursor column.
Files:      src/search.c, src/testdir/test_visual.vim

Patch 8.0.0331
Problem:    Restoring help snapshot accesses freed memory. (Dominique Pelle)
Solution:   Don't restore a snapshot when the <A HREF="windows.html#window">window</A> closes.
Files:      src/window.c, src/Makefile, src/testdir/Make_all.mak,
            src/testdir/test_help.vim

Patch 8.0.0332
Problem:    <A HREF="gui.html#GUI">GUI</A> test fails on some systems.
Solution:   Try different language settings. (Kazunobu Kuriyama)
Files:      src/testdir/test_gui.vim

Patch 8.0.0333
Problem:    Illegal memory access when <A HREF="options.html#'complete'">'complete'</A> ends in a <A HREF="intro.html#backslash">backslash</A>.
Solution:   Check for trailing <A HREF="intro.html#backslash">backslash</A>. (Dominique Pelle, closes #1478)
Files:      src/option.c, src/testdir/test_options.vim

Patch 8.0.0334
Problem:    Can't access <A HREF="eval.html#b:changedtick">b:changedtick</A> from a <A HREF="eval.html#dict">dict</A> reference.
Solution:   Make changedtick a member of the <A HREF="eval.html#b:">b:</A> <A HREF="eval.html#dict">dict</A>. (inspired by neovim
            #6112)
Files:      src/structs.h, src/buffer.c, src/edit.c, src/eval.c,
            src/evalfunc.c, src/ex_docmd.c, src/main.c, src/globals.h,
            src/fileio.c, src/memline.c, src/misc1.c, src/syntax.c,
            src/proto/eval.pro, src/testdir/test_changedtick.vim,
            src/Makefile, src/testdir/test_alot.vim, src/testdir/test91.in,
            src/testdir/test91.ok, src/testdir/test_functions.vim

Patch 8.0.0335 (after 8.0.0335)
Problem:    Functions test fails.
Solution:   Use the right buffer number.
Files:      src/testdir/test_functions.vim

Patch 8.0.0336
Problem:    Flags of <A HREF="change.html#:substitute">:substitute</A> not sufficiently tested.
Solution:   Test up to two <A HREF="print.html#letter">letter</A> flag combinations. (James McCoy, closes
            #1479)
Files:      src/testdir/test_substitute.vim

Patch 8.0.0337
Problem:    Invalid memory access in <A HREF="recover.html#:recover">:recover</A> command.
Solution:   Avoid access before directory name. (Dominique Pelle,
            closes #1488)
Files:      src/Makefile, src/memline.c, src/testdir/test_alot.vim,
            src/testdir/test_recover.vim

Patch 8.0.0338 (after 8.0.0337)
Problem:    <A HREF="recover.html#:recover">:recover</A> test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Use non-existing directory on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Files:      src/testdir/test_recover.vim

Patch 8.0.0339
Problem:    Illegal memory access with vi'
Solution:   For quoted text <A HREF="index.html#objects">objects</A> bail out if the <A HREF="visual.html#Visual">Visual</A> area spans more
            than one line.
Files:      src/search.c, src/testdir/test_visual.vim

Patch 8.0.0340
Problem:    Not checking return value of dict_add(). (Coverity)
Solution:   Handle a failure.
Files:      src/buffer.c

Patch 8.0.0341
Problem:    When using <A HREF="builtin.html#complete()">complete()</A> and typing a character <A HREF="undo.html#undo">undo</A> is saved after
            the character was inserted. (Shougo)
Solution:   Save for <A HREF="undo.html#undo">undo</A> before <A HREF="insert.html#inserting">inserting</A> the character.
Files:      src/edit.c, src/testdir/test_popup.vim

Patch 8.0.0342
Problem:    Double free when compiled with EXITFREE and setting <A HREF="options.html#'ttytype'">'ttytype'</A>.
Solution:   Avoid setting P_ALLOCED on <A HREF="options.html#'ttytype'">'ttytype'</A>. (Dominique Pelle,
            closes #1461)
Files:      src/option.c, src/testdir/test_options.vim

Patch 8.0.0343
Problem:    <A HREF="eval.html#b:changedtick">b:changedtick</A> can be unlocked, even though <A HREF="motion.html#it">it</A> has no effect.
            (Nikolai Pavlov)
Solution:   Add a check and error <A HREF="eval.html#E940">E940</A>. (closes #1496)
Files:      src/eval.c, src/testdir/test_changedtick.vim, runtime/doc/eval.txt

Patch 8.0.0344
Problem:    Unlet command leaks memory. (Nikolai Pavlov)
Solution:   Free the memory on error. (closes #1497)
Files:      src/eval.c, src/testdir/test_unlet.vim

Patch 8.0.0345
Problem:    islocked('d.changedtick') does not work.
Solution:   Make <A HREF="motion.html#it">it</A> work.
Files:      src/buffer.c, src/eval.c, src/evalfunc.c, src/vim.h,
            src/testdir/test_changedtick.vim,

Patch 8.0.0346
Problem:    Vim relies on limits.h to be included indirectly, but on Solaris 9
            <A HREF="motion.html#it">it</A> may not be. (Ben Fritz)
Solution:   Always include limits.h.
Files:      src/os_unixx.h, src/vim.h

Patch 8.0.0347
Problem:    When using <A HREF="change.html#CTRL-X">CTRL-X</A> <A HREF="scroll.html#CTRL-U">CTRL-U</A> inside a comment, the use of the comment
            leader may not work. (Klement)
Solution:   Save and restore did_ai. (Christian Brabandt, closes #1494)
Files:      src/edit.c, src/testdir/test_popup.vim

Patch 8.0.0348
Problem:    When building with a shadow directory on macOS lacks the
            <A HREF="various.html#+clipboard">+clipboard</A> feature.
Solution:   Link *.m files, specifically os_macosx.m. (Kazunobu Kuriyama)
Files:      src/Makefile

Patch 8.0.0349
Problem:    Redrawing <A HREF="message.html#errors">errors</A> with <A HREF="gui_x11.html#GTK">GTK</A> 3.
Solution:   When updating, first clear all rectangles and then draw them.
            (Kazunobu Kuriyama, Christian Ludwig, closes #848)
Files:      src/gui_gtk_x11.c

Patch 8.0.0350
Problem:    Not enough test coverage for <A HREF="if_perl.html#Perl">Perl</A>.
Solution:   Add more <A HREF="if_perl.html#Perl">Perl</A> tests. (Dominique Pelle, closes #1500)
Files:      src/testdir/test_perl.vim

Patch 8.0.0351
Problem:    No test for concatenating an empty <A HREF="eval.html#string">string</A> that results from out of
            bounds indexing.
Solution:   Add a simple test.
Files:      src/testdir/test_expr.vim

Patch 8.0.0352
Problem:    The condition for when a typval needs to be cleared is too
            complicated.
Solution:   Init the type to VAR_UNKNOWN and always clear <A HREF="motion.html#it">it</A>.
Files:      src/eval.c

Patch 8.0.0353
Problem:    If [RO] in the status line is translated to a longer <A HREF="eval.html#string">string</A>, <A HREF="motion.html#it">it</A> is
            truncated to 4 bytes.
Solution:   Skip over the resulting <A HREF="eval.html#string">string</A>. (Jente Hidskes, closes #1499)
Files:      src/screen.c

Patch 8.0.0354
Problem:    Test to check that setting <A HREF="term.html#termcap">termcap</A> key fails sometimes.
Solution:   Check for &quot;<A HREF="term.html#t_k1">t_k1</A>&quot; to exist. (Christian Brabandt, closes #1459)
Files:      src/testdir/test_assign.vim

Patch 8.0.0355
Problem:    Using uninitialized memory when <A HREF="options.html#'isfname'">'isfname'</A> is empty.
Solution:   Don't call getpwnam() without an argument. (Dominique Pelle,
            closes #1464)
Files:      src/misc1.c, src/testdir/test_options.vim

Patch 8.0.0356 (after 8.0.0342)
Problem:    Leaking memory when setting <A HREF="options.html#'ttytype'">'ttytype'</A>.
Solution:   Get free_oldval from the right option entry.
Files:      src/option.c

Patch 8.0.0357
Problem:    Crash when setting <A HREF="options.html#'guicursor'">'guicursor'</A> to weird value.
Solution:   Avoid negative size. (Dominique Pelle, closes #1465)
Files:      src/misc2.c, src/testdir/test_options.vim

Patch 8.0.0358
Problem:    Invalid memory access in C-indent code.
Solution:   Don't go over end of empty line. (Dominique Pelle, closes #1492)
Files:      src/edit.c, src/testdir/test_options.vim

Patch 8.0.0359
Problem:    <A HREF="options.html#'number'">'number'</A> and <A HREF="options.html#'relativenumber'">'relativenumber'</A> are not properly tested.
Solution:   Add tests, change old style to new style tests. (Ozaki Kiichi,
            closes #1447)
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test89.in, src/testdir/test89.ok,
            src/testdir/test_alot.vim, src/testdir/test_findfile.vim,
            src/testdir/test_number.vim

Patch 8.0.0360
Problem:    Sometimes VimL is used, which is confusing.
Solution:   Consistently use &quot;Vim script&quot;. (Hirohito Higashi)
Files:      runtime/doc/if_mzsch.txt, runtime/doc/if_pyth.txt,
            runtime/doc/syntax.txt, runtime/doc/usr_02.txt,
            runtime/doc/version7.txt, src/Makefile, src/eval.c,
            src/ex_getln.c, src/if_py_both.h, src/if_xcmdsrv.c,
            src/testdir/Make_all.mak, src/testdir/runtest.vim,
            src/testdir/test49.vim, src/testdir/test_vimscript.vim,
            src/testdir/test_viml.vim

Patch 8.0.0361
Problem:    <A HREF="gui.html#GUI">GUI</A> initialisation is not sufficiently tested.
Solution:   Add the gui_init test. (Kazunobu Kuriyama)
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Makefile,
            src/testdir/gui_init.vim, src/testdir/setup_gui.vim,
            src/testdir/test_gui.vim, src/testdir/test_gui_init.vim, Filelist

Patch 8.0.0362 (after 8.0.0361)
Problem:    Tests fail on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Use $*.vim instead of $&lt;.
Files:      src/testdir/Make_dos.mak

Patch 8.0.0363
Problem:    Travis is too slow to keep up with patches.
Solution:   Increase git depth to 20
Files:      .travis.yml

Patch 8.0.0364
Problem:    <A HREF="spell.html#]s">]s</A> does not move cursor with two <A HREF="spell.html#spell">spell</A> <A HREF="message.html#errors">errors</A> in one line. (Manuel
            Ortega)
Solution:   Don't stop search immediately when wrapped, search the line first.
            (Ken Takata)  Add a test.
Files:      src/spell.c, src/Makefile, src/testdir/test_spell.vim,
            src/testdir/Make_all.mak

Patch 8.0.0365
Problem:    Might free a <A HREF="eval.html#dict">dict</A> item that wasn't allocated.
Solution:   Call dictitem_free(). (Nikolai Pavlov)  Use this for
            <A HREF="eval.html#b:changedtick">b:changedtick</A>.
Files:      src/dict.c, src/structs.h, src/buffer.c, src/edit.c,
            src/evalfunc.c, src/ex_docmd.c, src/fileio.c, src/main.c,
            src/memline.c, src/misc1.c, src/syntax.c

Patch 8.0.0366 (after 8.0.0365)
Problem:    Build fails with tiny features.
Solution:   Add #ifdef.
Files:      src/buffer.c

Patch 8.0.0367
Problem:    If configure defines _LARGE_FILES some include files are included
            before <A HREF="motion.html#it">it</A> is defined.
Solution:   Include vim.h first. (Sam Thursfield, closes #1508)
Files:      src/gui_at_sb.c, src/gui_athena.c, src/gui_motif.c, src/gui_x11.c,
            src/gui_xmdlg.c

Patch 8.0.0368
Problem:    Not all <A HREF="options.html#options">options</A> are tested with a range of values.
Solution:   Generate a test <A HREF="usr_41.html#script">script</A> from the source code.
Files:      Filelist, src/gen_opt_test.vim, src/testdir/test_options.vim,
            src/Makefile

Patch 8.0.0369 (after 8.0.0368)
Problem:    The <A HREF="options.html#'balloondelay'">'balloondelay'</A>, <A HREF="options.html#'ballooneval'">'ballooneval'</A> and <A HREF="options.html#'balloonexpr'">'balloonexpr'</A> <A HREF="options.html#options">options</A> are
            not defined without the <A HREF="various.html#+balloon_eval">+balloon_eval</A> feature. Testing that an
            option value fails does not work for unsupported <A HREF="options.html#options">options</A>.
Solution:   Make the <A HREF="options.html#options">options</A> defined but not supported.  Don't test if
            setting unsupported <A HREF="options.html#options">options</A> fails.
Files:      src/option.c, src/gen_opt_test.vim

Patch 8.0.0370
Problem:    Invalid memory access when setting wildchar empty.
Solution:   Avoid going over the end of the option value. (Dominique Pelle,
            closes #1509)  Make option test check all number <A HREF="options.html#options">options</A> with
            empty value.
Files:      src/gen_opt_test.vim, src/option.c, src/testdir/test_options.vim

Patch 8.0.0371 (after 8.0.0365)
Problem:    Leaking memory when setting <A HREF="eval.html#v:completed_item">v:completed_item</A>.
Solution:   Or the flags instead of setting them.
Files:      src/eval.c

Patch 8.0.0372
Problem:    More <A HREF="options.html#options">options</A> are not always defined.
Solution:   Consistently define all possible <A HREF="options.html#options">options</A>.
Files:      src/option.c, src/testdir/test_expand_dllpath.vim

Patch 8.0.0373
Problem:    Build fails without <A HREF="various.html#+folding">+folding</A>.
Solution:   Move misplaced #ifdef.
Files:      src/option.c

Patch 8.0.0374
Problem:    Invalid memory access when using <A HREF="change.html#:sc">:sc</A> in <A HREF="intro.html#Ex">Ex</A> mode. (Dominique Pelle)
Solution:   Avoid the column being negative.  Also fix a hang in <A HREF="intro.html#Ex">Ex</A> mode.
Files:      src/ex_getln.c, src/ex_cmds.c, src/testdir/test_substitute.vim

Patch 8.0.0375
Problem:    The &quot;<A HREF="motion.html#+">+</A> <A HREF="sponsor.html#register">register</A> is not tested.
Solution:   Add a test using another Vim instance to change the &quot;<A HREF="motion.html#+">+</A> <A HREF="sponsor.html#register">register</A>.
            (Kazunobu Kuriyama)
Files:      src/testdir/test_gui.vim

Patch 8.0.0376
Problem:    Size computations in <A HREF="spell.html#spell">spell</A> file reading are not exactly right.
Solution:   Make &quot;len&quot; a &quot;long&quot; and check with LONG_MAX.
Files:      src/spellfile.c

Patch 8.0.0377
Problem:    Possible overflow when reading corrupted <A HREF="undo.html#undo">undo</A> file.
Solution:   Check if allocated size is not too big. (King)
Files:      src/undo.c

Patch 8.0.0378
Problem:    Another possible overflow when reading corrupted <A HREF="undo.html#undo">undo</A> file.
Solution:   Check if allocated size is not too big. (King)
Files:      src/undo.c

Patch 8.0.0379
Problem:    <A HREF="starting.html#CTRL-Z">CTRL-Z</A> and mouse click use <A HREF="motion.html#CTRL-O">CTRL-O</A> unnecessary.
Solution:   Remove stuffing <A HREF="motion.html#CTRL-O">CTRL-O</A>. (James McCoy, closes #1453)
Files:      src/edit.c, src/normal.c

Patch 8.0.0380
Problem:    With <A HREF="options.html#'linebreak'">'linebreak'</A> set and <A HREF="options.html#'breakat'">'breakat'</A> includes &quot;<A HREF="change.html#&gt;">&gt;</A>&quot; a double-wide
            character results in &quot;<A HREF="change.html#&lt;&lt;">&lt;&lt;</A>&quot; displayed.
Solution:   Check for the character not to be replaced. (Ozaki Kiichi,
            closes #1456)
Files:      src/screen.c, src/testdir/test_listlbr_utf8.vim

Patch 8.0.0381
Problem:    Diff mode is not sufficiently tested.
Solution:   Add more <A HREF="diff.html#diff">diff</A> mode tests. (Dominique Pelle, closes #1515)
Files:      src/testdir/test_diffmode.vim

Patch 8.0.0382 (after 8.0.0380)
Problem:    Warning in tiny build for unused variable. (Tony Mechelynck)
Solution:   Add #ifdefs.
Files:      src/screen.c

Patch 8.0.0383 (after 8.0.0382)
Problem:    Misplaced #ifdef. (Christ van Willegen)
Solution:   Split assignment.
Files:      src/screen.c

Patch 8.0.0384
Problem:    Timer test failed for no apparent reason.
Solution:   <A HREF="motion.html#Mark">Mark</A> the test <A HREF="motion.html#as">as</A> flaky.
Files:      src/testdir/runtest.vim

Patch 8.0.0385
Problem:    No tests for arabic.
Solution:   Add a first test for arabic. (Dominique Pelle, closes #1518)
Files:      src/Makefile, src/testdir/Make_all.mak,
            src/testdir/test_arabic.vim

Patch 8.0.0386
Problem:    Tiny build has a problem with generating the <A HREF="options.html#options">options</A> test.
Solution:   Change the &quot;if&quot; to skip over statements.
Files:      src/gen_opt_test.vim

Patch 8.0.0387
Problem:    compiler warnings
Solution:   Add type casts. (Christian Brabandt)
Files:      src/channel.c, src/memline.c

Patch 8.0.0388
Problem:    filtering lines through &quot;cat&quot;, without <A HREF="change.html#changing">changing</A> the line <A HREF="intro.html#count">count</A>,
            changes manual <A HREF="fold.html#folds">folds</A>.
Solution:   Change how marks and <A HREF="fold.html#folds">folds</A> are adjusted. (Matthew Malcomson, from
            neovim #6194).
Files:      src/fold.c, src/testdir/test_fold.vim

Patch 8.0.0389
Problem:    Test for arabic does not check what is displayed.
Solution:   Improve what is asserted. (Dominique Pelle, closes #1523)
            Add a first shaping test.
Files:      src/testdir/test_arabic.vim

Patch 8.0.0390
Problem:    When the <A HREF="windows.html#window">window</A> scrolls horizontally when the <A HREF="popup.html#popup">popup</A> menu is
            displayed part of <A HREF="motion.html#it">it</A> may not be cleared. (Neovim issue #6184)
Solution:   Remove the menu when the <A HREF="windows.html#windows">windows</A> scrolled. (closes #1524)
Files:      src/edit.c

Patch 8.0.0391
Problem:    <A HREF="arabic.html#Arabic">Arabic</A> support is <A HREF="starting.html#verbose">verbose</A> and not well tested.
Solution:   Simplify the code.  Add more tests.
Files:      src/arabic.c, src/testdir/test_arabic.vim

Patch 8.0.0392
Problem:    <A HREF="gui.html#GUI">GUI</A> test fails with Athena and <A HREF="gui_x11.html#Motif">Motif</A>.
Solution:   Add <A HREF="testing.html#test_ignore_error()">test_ignore_error()</A>.  Use <A HREF="motion.html#it">it</A> to ignore the &quot;failed to create
            input context&quot; error.
Files:      src/message.c, src/proto/message.pro, src/evalfunc.c,
            src/testdir/test_gui.vim, runtime/doc/eval.txt

Patch 8.0.0393 (after 8.0.0190)
Problem:    When the same <A HREF="tagsrch.html#tag">tag</A> appears more than once, the order is
            unpredictable. (Charles Campbell)
Solution:   Besides using a <A HREF="eval.html#dict">dict</A> for finding duplicates, use a grow array for
            keeping the <A HREF="tagsrch.html#tags">tags</A> in sequence.
Files:      src/tag.c, src/testdir/test_tagjump.vim

Patch 8.0.0394
Problem:    Tabs are not aligned when <A HREF="scroll.html#scrolling">scrolling</A> horizontally and a <A HREF="intro.html#Tab">Tab</A> doesn't
            fit. (Axel Bender)
Solution:   Handle a <A HREF="intro.html#Tab">Tab</A> <A HREF="motion.html#as">as</A> a not fitting character. (Christian Brabandt)
            Also fix that &quot;<A HREF="various.html#:redraw">:redraw</A>&quot; does not scroll horizontally to show the
            cursor.  And fix the test that depended on the old behavior.
Files:      src/screen.c, src/ex_docmd.c, src/testdir/test_listlbr.vim,
            src/testdir/test_listlbr_utf8.vim,
            src/testdir/test_breakindent.vim

Patch 8.0.0395 (after 8.0.0392)
Problem:    Testing the + <A HREF="sponsor.html#register">register</A> fails with <A HREF="gui_x11.html#Motif">Motif</A>.
Solution:   Also ignore the &quot;failed to create input context&quot; error in the
            second <A HREF="starting.html#gvim">gvim</A>.  Don't use msg() when <A HREF="motion.html#it">it</A> would result in a <A HREF="gui_w32.html#dialog">dialog</A>.
Files:      src/message.c, src/testdir/test_gui.vim, src/testdir/setup_gui.vim

Patch 8.0.0396
Problem:    <A HREF="options.html#'balloonexpr'">'balloonexpr'</A> only works synchronously.
Solution:   Add <A HREF="builtin.html#balloon_show()">balloon_show()</A>. (Jusufadis Bakamovic, closes #1449)
Files:      runtime/doc/eval.txt, src/evalfunc.c, src/os_unix.c,
            src/os_win32.c

Patch 8.0.0397 (after 8.0.0392)
Problem:    Cannot build with the <A HREF="starting.html#viminfo">viminfo</A> feature but without the <A HREF="eval.html#eval">eval</A>
            feature.
Solution:   Adjust #ifdef. (John Marriott)
Files:      src/message.c, src/misc2.c

Patch 8.0.0398
Problem:    Illegal memory access with &quot;<A HREF="motion.html#t">t</A>&quot;.
Solution:   Use strncmp() instead of memcmp(). (Dominique Pelle, closes #1528)
Files:      src/search.c, src/testdir/test_search.vim

Patch 8.0.0399
Problem:    Crash when using <A HREF="builtin.html#balloon_show()">balloon_show()</A> when not supported. (Hirohito
            Higashi)
Solution:   Check for balloonEval not to be NULL. (Ken Takata)
Files:      src/evalfunc.c, src/testdir/test_functions.vim

Patch 8.0.0400
Problem:    Some tests have a one second delay.
Solution:   Add <A HREF="starting.html#--not-a-term">--not-a-term</A> in RunVim().
Files:      src/testdir/shared.vim

Patch 8.0.0401
Problem:    Test fails with missing balloon feature.
Solution:   Add check for balloon feature.
Files:      src/testdir/test_functions.vim

Patch 8.0.0402
Problem:    <A HREF="map.html#:map">:map</A> completion does not have &lt;special&gt;. (Dominique Pelle)
Solution:   Recognize &lt;special&gt; in completion.  Add a test.
Files:      src/getchar.c, src/testdir/test_cmdline.vim

Patch 8.0.0403
Problem:    <A HREF="gui.html#GUI">GUI</A> tests may fail.
Solution:   Ignore the <A HREF="mbyte.html#E285">E285</A> error better. (Kazunobu Kuriyama)
Files:      src/testdir/test_gui.vim, src/testdir/test_gui_init.vim

Patch 8.0.0404
Problem:    Not enough <A HREF="testing.html#testing">testing</A> for <A HREF="quickfix.html#quickfix">quickfix</A>.
Solution:   Add some more tests. (Yegappan Lakshmanan)
Files:      src/testdir/test_quickfix.vim

Patch 8.0.0405
Problem:    <A HREF="eval.html#v:progpath">v:progpath</A> may become invalid after &quot;<A HREF="editing.html#:cd">:cd</A>&quot;.
Solution:   Turn <A HREF="eval.html#v:progpath">v:progpath</A> into a full path if needed.
Files:      src/main.c, src/testdir/test_startup.vim, runtime/doc/eval.txt

Patch 8.0.0406
Problem:    The arabic shaping code is <A HREF="starting.html#verbose">verbose</A>.
Solution:   Shorten the code without <A HREF="change.html#changing">changing</A> the functionality.
Files:      src/arabic.c

Patch 8.0.0407 (after 8.0.0388)
Problem:    Filtering <A HREF="fold.html#folds">folds</A> with marker <A HREF="eval.html#method">method</A> not tested.
Solution:   Also set <A HREF="options.html#'foldmethod'">'foldmethod'</A> to &quot;marker&quot;.
Files:      src/testdir/test_fold.vim

Patch 8.0.0408
Problem:    Updating <A HREF="fold.html#folds">folds</A> does not work properly when <A HREF="insert.html#inserting">inserting</A> a file and a
            few other situations.
Solution:   Adjust the way <A HREF="fold.html#folds">folds</A> are updated. (Matthew Malcomson)
Files:      src/fold.c, src/testdir/test_fold.vim

Patch 8.0.0409
Problem:    set_progpath is defined but not always used
Solution:   Adjust #ifdef.
Files:      src/main.c

Patch 8.0.0410
Problem:    Newer gettext/iconv library has extra dll file.
Solution:   Add the file to the Makefile and nsis <A HREF="usr_41.html#script">script</A>. (Christian Brabandt)
Files:      Makefile, nsis/gvim.nsi

Patch 8.0.0411
Problem:    We can't change the <A HREF="change.html#case">case</A> in menu entries, <A HREF="motion.html#it">it</A> breaks translations.
Solution:   Ignore <A HREF="change.html#case">case</A> when looking up a menu translation.
Files:      src/menu.c, src/testdir/test_menu.vim

Patch 8.0.0412 (after 8.0.0411)
Problem:    Menu test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Use a menu entry with only ASCII characters.
Files:      src/testdir/test_menu.vim

Patch 8.0.0413 (after 8.0.0412)
Problem:    Menu test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A> using <A HREF="starting.html#gvim">gvim</A>.
Solution:   First delete the English <A HREF="gui.html#menus">menus</A>.
Files:      src/testdir/test_menu.vim

Patch 8.0.0414
Problem:    Balloon <A HREF="eval.html#eval">eval</A> is not tested.
Solution:   Add a few balloon tests. (Kazunobu Kuriyama)
Files:      src/testdir/test_gui.vim

Patch 8.0.0415 (after 8.0.0414)
Problem:    Balloon test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Test with 0x7fffffff instead of 0xffffffff.
Files:      src/testdir/test_gui.vim

Patch 8.0.0416
Problem:    Setting <A HREF="eval.html#v:progpath">v:progpath</A> is not quite right.
Solution:   On <A HREF="os_win32.html#MS-Windows">MS-Windows</A> add the extension. On <A HREF="os_unix.html#Unix">Unix</A> use the full path for a
            relative directory. (partly by James McCoy, closes #1531)
Files:      src/main.c, src/os_win32.c, src/os_unix.c

Patch 8.0.0417
Problem:    Test for the <A HREF="gui.html#clipboard">clipboard</A> fails sometimes.
Solution:   Add <A HREF="motion.html#it">it</A> to the flaky tests.
Files:      src/testdir/runtest.vim

Patch 8.0.0418
Problem:    ASAN logs are disabled and don't cause a failure.
Solution:   Enable ASAN logs and fail if not empty. (James McCoy,
            closes #1425)
Files:      .travis.yml

Patch 8.0.0419
Problem:    Test for <A HREF="eval.html#v:progpath">v:progpath</A> fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Expand to full path.  Also add &quot;.exe&quot; when the path is an absolute
            path.
Files:      src/os_win32.c, src/main.c

Patch 8.0.0420
Problem:    When running <A HREF="quickfix.html#:make">:make</A> the output may be in the system encoding,
            different from <A HREF="options.html#'encoding'">'encoding'</A>.
Solution:   Add the <A HREF="options.html#'makeencoding'">'makeencoding'</A> option. (Ken Takata)
Files:      runtime/doc/options.txt, runtime/doc/quickfix.txt,
            runtime/doc/quickref.txt, src/Makefile, src/buffer.c,
            src/if_cscope.c, src/main.c, src/option.c, src/option.h,
            src/proto/quickfix.pro, src/quickfix.c, src/structs.h,
            src/testdir/Make_all.mak, src/testdir/test_makeencoding.py,
            src/testdir/test_makeencoding.vim

Patch 8.0.0421
Problem:    Diff mode is displayed wrong when adding a line at the end of a
            buffer.
Solution:   Adjust marks in <A HREF="diff.html#diff">diff</A> mode. (James McCoy, closes #1329)
Files:      src/misc1.c, src/ops.c, src/testdir/test_diffmode.vim

Patch 8.0.0422
Problem:    <A HREF="if_pyth.html#Python">Python</A> test fails with <A HREF="if_pyth.html#Python">Python</A> 3.6.
Solution:   Convert new exception <A HREF="message.html#messages">messages</A> to old ones. (closes #1359)
Files:      src/testdir/test87.in

Patch 8.0.0423
Problem:    The effect of adding &quot;<A HREF="pattern.html##">#</A>&quot; to <A HREF="options.html#'cinoptions'">'cinoptions'</A> is not always removed.
            (David Briscoe)
Solution:   Reset b_ind_hash_comment. (Christian Brabandt, closes #1475)
Files:      src/misc1.c, src/Makefile, src/testdir/Make_all.mak,
            src/testdir/test_cindent.vim, src/testdir/test3.in

Patch 8.0.0424
Problem:    Compiler warnings on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>. (Ajit Thakkar)
Solution:   Add type casts.
Files:      src/os_win32.c

Patch 8.0.0425
Problem:    Build <A HREF="message.html#errors">errors</A> when building without <A HREF="fold.html#folding">folding</A>.
Solution:   Add #ifdefs. (John Marriott)
Files:      src/diff.c, src/edit.c, src/option.c, src/syntax.c

Patch 8.0.0426
Problem:    Insufficient <A HREF="testing.html#testing">testing</A> for statusline.
Solution:   Add several tests. (Dominique Pelle, closes #1534)
Files:      src/testdir/test_statusline.vim

Patch 8.0.0427
Problem:    <A HREF="options.html#'makeencoding'">'makeencoding'</A> missing from the <A HREF="options.html#options">options</A> <A HREF="windows.html#window">window</A>.
Solution:   Add the entry.
Files:      runtime/optwin.vim

Patch 8.0.0428
Problem:    Git and hg see new files after running tests. (Manuel Ortega)
Solution:   Add the generated file to .hgignore (or .gitignore). Delete the
            resulting <A HREF="starting.html#verbose">verbose</A> file. (Christian Brabandt)  Improve dependency
            on opt_test.vim.  Reset the <A HREF="options.html#'more'">'more'</A> option.
Files:      .hgignore, src/gen_opt_test.vim, src/testdir/gen_opt_test.vim,
            src/Makefile, src/testdir/Make_all.mak, src/testdir/Makefile,
            src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
            Filelist

Patch 8.0.0429
Problem:    Options test does not always test everything.
Solution:   Fix dependency for opt_test.vim.  Give a message when opt_test.vim
            was not found.
Files:      src/testdir/test_options.vim, src/testdir/gen_opt_test.vim,
            src/testdir/Makefile, src/testdir/Make_all.mak,
            src/testdir/Make_dos.mak, src/testdir/Make_ming.mak

Patch 8.0.0430
Problem:    Options test fails or hangs on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Run <A HREF="motion.html#it">it</A> separately instead of part of test_alot.  Use &quot;<A HREF="starting.html#-S">-S</A>&quot; instead
            of &quot;<A HREF="starting.html#-u">-u</A>&quot; to run the <A HREF="usr_41.html#script">script</A>.  Fix failures.
Files:      src/testdir/Make_all.mak, src/testdir/test_alot.vim,
            src/testdir/Makefile, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/gen_opt_test.vim

Patch 8.0.0431
Problem:    <A HREF="options.html#'cinoptions'">'cinoptions'</A> cannot set indent for extern block.
Solution:   Add the &quot;<A HREF="motion.html#E">E</A>&quot; flag in <A HREF="options.html#'cinoptions'">'cinoptions'</A>. (Hirohito Higashi)
Files:      runtime/doc/indent.txt, src/misc1.c, src/structs.h,
            src/testdir/test_cindent.vim

Patch 8.0.0432
Problem:    &quot;make shadow&quot; creates an invalid link.
Solution:   Don't link &quot;*.vim&quot;. (Kazunobu Kuriyama)
Files:      src/Makefile

Patch 8.0.0433
Problem:    Quite a few beeps when running tests.
Solution:   Set <A HREF="options.html#'belloff'">'belloff'</A> for these tests. (Christian Brabandt)
Files:      src/testdir/test103.in, src/testdir/test14.in,
            src/testdir/test29.in, src/testdir/test30.in,
            src/testdir/test32.in, src/testdir/test45.in,
            src/testdir/test72.in, src/testdir/test73.in,
            src/testdir/test77.in, src/testdir/test78.in,
            src/testdir/test85.in, src/testdir/test94.in,
            src/testdir/test_alot.vim, src/testdir/test_alot_utf8.vim,
            src/testdir/test_close_count.in, src/testdir/test_cmdline.vim,
            src/testdir/test_diffmode.vim, src/testdir/test_digraph.vim,
            src/testdir/test_erasebackword.in, src/testdir/test_normal.vim,
            src/testdir/test_packadd.vim, src/testdir/test_search.vim,
            src/testdir/test_textobjects.vim, src/testdir/test_undo.vim,
            src/testdir/test_usercommands.vim, src/testdir/test_visual.vim

Patch 8.0.0434
Problem:    Clang version not correctly detected.
Solution:   Adjust the configure <A HREF="usr_41.html#script">script</A>. (Kazunobu Kuriyama)
Files:      src/configure.ac, src/auto/configure

Patch 8.0.0435
Problem:    Some <A HREF="eval.html#functions">functions</A> are not tested.
Solution:   Add more tests for <A HREF="eval.html#functions">functions</A>. (Dominique Pelle, closes #1541)
Files:      src/testdir/test_functions.vim

Patch 8.0.0436
Problem:    Running the <A HREF="options.html#options">options</A> test sometimes resizes the <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Clear out <A HREF="term.html#t_WS">t_WS</A>.
Files:      src/testdir/gen_opt_test.vim

Patch 8.0.0437
Problem:    The packadd test does not create the symlink correctly and does
            not test the right thing.
Solution:   Create the directory and symlink correctly.
Files:      src/testdir/test_packadd.vim

Patch 8.0.0438
Problem:    The fnamemodify test changes <A HREF="options.html#'shell'">'shell'</A> in a way later tests may not
            be able to use <A HREF="builtin.html#system()">system()</A>.
Solution:   Save and restore <A HREF="options.html#'shell'">'shell'</A>.
Files:      src/testdir/test_fnamemodify.vim

Patch 8.0.0439
Problem:    Using &quot;:&#37;argdel&quot; while the argument <A HREF="eval.html#list">list</A> is already empty gives an
            error. (Pavol Juhas)
Solution:   Don't give an error. (closes #1546)
Files:      src/ex_cmds2.c, src/testdir/test_arglist.vim

Patch 8.0.0440
Problem:    Not enough test coverage in <A HREF="insert.html#Insert">Insert</A> mode.
Solution:   Add lots of tests.  Add <A HREF="testing.html#test_override()">test_override()</A>. (Christian Brabandt,
            closes #1521)
Files:      runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/edit.c,
            src/evalfunc.c, src/globals.h,  src/screen.c,
            src/testdir/Make_all.mak, src/testdir/test_cursor_func.vim,
            src/testdir/test_edit.vim, src/testdir/test_search.vim,
            src/testdir/test_assert.vim, src/Makefile, src/testdir/runtest.vim

Patch 8.0.0441
Problem:    Dead code in #ifdef.
Solution:   Remove the #ifdef and #else part.
Files:      src/option.c

Patch 8.0.0442
Problem:    Patch shell command uses double <A HREF="quotes.html#quotes">quotes</A> around the argument, which
            allows for <A HREF="options.html#$HOME">$HOME</A> to be expanded. (Etienne)
Solution:   Use single <A HREF="quotes.html#quotes">quotes</A> on <A HREF="os_unix.html#Unix">Unix</A>. (closes #1543)
Files:      src/diff.c, src/testdir/test_diffmode.vim

Patch 8.0.0443
Problem:    Terminal width is set to 80 in test3.
Solution:   Instead of setting <A HREF="options.html#'columns'">'columns'</A> set <A HREF="options.html#'wrapmargin'">'wrapmargin'</A> depending on
            'columns.
Files:      src/testdir/test3.in

Patch 8.0.0444 (after 8.0.0442)
Problem:    Diffpatch fails when the file name has a <A HREF="change.html#quote.">quote.</A>
Solution:   Escape the name properly. (zetzei)
Files:      src/diff.c, src/testdir/test_diffmode.vim

Patch 8.0.0445
Problem:    Getpgid is not supported on all systems.
Solution:   Add a configure check.
Files:      src/configure.ac, src/auto/configure, src/config.h.in,
            src/os_unix.c

Patch 8.0.0446
Problem:    The &quot;<A HREF="motion.html#;">;</A>&quot; command does not work after characters with a lower byte
            that is NUL.
Solution:   Properly check for not having a previous character. (Hirohito
            Higashi)
Files:      src/Makefile, src/search.c, src/testdir/test_alot_utf8.vim,
            src/testdir/test_charsearch_utf8.vim

Patch 8.0.0447
Problem:    Getting font name does not work on <A HREF="options.html#X11">X11</A>.
Solution:   Implement gui_mch_get_fontname() for <A HREF="options.html#X11">X11</A>.  Add more <A HREF="gui.html#GUI">GUI</A> tests.
            (Kazunobu Kuriyama)
Files:      src/gui_x11.c, src/syntax.c, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Makefile,
            src/testdir/gui_init.vim, src/testdir/gui_preinit.vim,
            src/testdir/test_gui.vim, src/testdir/test_gui_init.vim,
            Filelist

Patch 8.0.0448
Problem:    Some macros are in lower <A HREF="change.html#case">case</A>, which can be confusing.
Solution:   Make a few lower <A HREF="change.html#case">case</A> macros upper <A HREF="change.html#case">case</A>.
Files:      src/macros.h, src/buffer.c, src/charset.c, src/ops.c, src/diff.c,
            src/edit.c, src/evalfunc.c, src/ex_cmds.c, src/ex_getln.c,
            src/fileio.c, src/fold.c, src/gui.c, src/gui_beval.c, src/main.c,
            src/mark.c, src/misc1.c, src/move.c, src/normal.c,
            src/option.c, src/popupmnu.c, src/regexp.c, src/screen.c,
            src/search.c, src/spell.c, src/tag.c, src/ui.c, src/undo.c,
            src/version.c, src/workshop.c, src/if_perl.xs

Patch 8.0.0449 (after 8.0.0448)
Problem:    Part of fold patch accidentally included.
Solution:   Revert that part of the patch.
Files:      src/ex_cmds.c

Patch 8.0.0450
Problem:    <A HREF="eval.html#v:progpath">v:progpath</A> is not reliably set.
Solution:   Read /proc/self/exe if possible. (idea by Michal Grochmal)
            Also fixes missing #if.
Files:      src/main.c, src/config.h.in

Patch 8.0.0451
Problem:    Some macros are in lower <A HREF="change.html#case">case</A>.
Solution:   Make a few more macros upper <A HREF="change.html#case">case</A>. Avoid lower <A HREF="change.html#case">case</A> macros use an
            argument <A HREF="if_cscop.html#twice">twice</A>.
Files:      src/macros.h, src/charset.c, src/misc2.c, src/proto/misc2.pro,
            src/edit.c, src/eval.c, src/ex_cmds.c, src/ex_cmds2.c,
            src/ex_docmd.c, src/ex_getln.c, src/fileio.c, src/fold.c,
            src/gui.c, src/gui_gtk.c, src/mark.c, src/memline.c, src/mbyte.c,
            src/menu.c, src/message.c, src/misc1.c, src/ops.c, src/option.c,
            src/os_amiga.c, src/os_mswin.c, src/os_unix.c, src/os_win32.c,
            src/popupmnu.c, src/regexp.c, src/regexp_nfa.c, src/screen.c,
            src/search.c, src/spell.c, src/spellfile.c, src/syntax.c,
            src/tag.c, src/ui.c, src/undo.c, src/window.c

Patch 8.0.0452
Problem:    Some macros are in lower <A HREF="change.html#case">case</A>.
Solution:   Make a few more macros upper <A HREF="change.html#case">case</A>.
Files:      src/vim.h, src/macros.h, src/evalfunc.c, src/fold.c,
            src/gui_gtk.c, src/gui_gtk_x11.c, src/charset.c, src/diff.c,
            src/edit.c, src/eval.c, src/ex_cmds.c, src/ex_cmds2.c,
            src/ex_docmd.c, src/ex_getln.c, src/fileio.c, src/getchar.c,
            src/gui.c, src/gui_w32.c, src/if_cscope.c, src/mbyte.c,
            src/menu.c, src/message.c, src/misc1.c, src/misc2.c, src/normal.c,
            src/ops.c, src/option.c, src/os_unix.c, src/os_win32.c,
            src/quickfix.c, src/regexp.c, src/regexp_nfa.c, src/screen.c,
            src/search.c, src/spell.c, src/syntax.c, src/tag.c, src/userfunc.c

Patch 8.0.0453
Problem:    Adding fold marker creates new comment.
Solution:   Use an existing comment if possible. (LemonBoy, closes #1549)
Files:      src/ops.c, src/proto/ops.pro, src/fold.c,
            src/testdir/test_fold.vim

Patch 8.0.0454
Problem:    Compiler warnings for comparing unsigned char with 256 always
            being <A HREF="vim9.html#true">true</A>. (Manuel Ortega)
Solution:   Add type cast.
Files:      src/screen.c, src/charset.c

Patch 8.0.0455
Problem:    The mode test may hang in Test_mode(). (Michael Soyka)
Solution:   Set <A HREF="options.html#'complete'">'complete'</A> to only search the current buffer (as suggested by
            Michael)
Files:      src/testdir/test_functions.vim

Patch 8.0.0456
Problem:    Typo in MinGW test makefile.
Solution:   Change an underscore to a dot. (Michael Soyka)
Files:      src/testdir/Make_ming.mak

Patch 8.0.0457
Problem:    Using <A HREF="change.html#:move">:move</A> messes up manual <A HREF="fold.html#folds">folds</A>.
Solution:   Split adjusting marks and <A HREF="fold.html#folds">folds</A>.  Add foldMoveRange(). (neovim
            patch #6221)
Files:      src/ex_cmds.c, src/fold.c, src/mark.c, src/proto/fold.pro,
            src/proto/mark.pro src/testdir/test_fold.vim

Patch 8.0.0458
Problem:    Potential crash if adding <A HREF="eval.html#list">list</A> or <A HREF="eval.html#dict">dict</A> to <A HREF="eval.html#dict">dict</A> fails.
Solution:   Make sure the reference <A HREF="intro.html#count">count</A> is correct. (Nikolai Pavlov, closes
            #1555)
Files:      src/dict.c

Patch 8.0.0459 (after 8.0.0457)
Problem:    Old fix for <A HREF="change.html#:move">:move</A> messing up <A HREF="fold.html#folding">folding</A> no longer needed, now that we
            have a proper solution.
Solution:   Revert patch 7.4.700. (Christian Brabandt)
Files:      src/ex_cmds.c

Patch 8.0.0460 (after 8.0.0452)
Problem:    Can't build on HPUX.
Solution:   Fix argument names in vim_stat(). (John Marriott)
Files:      src/misc2.c

Patch 8.0.0461 (after 8.0.0457)
Problem:    Test 45 hangs on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Reset <A HREF="options.html#'shiftwidth'">'shiftwidth'</A>.  Also remove redundant function.
Files:      src/fold.c, src/testdir/test45.in

Patch 8.0.0462
Problem:    If an <A HREF="os_win32.html#MS-Windows">MS-Windows</A> tests succeeds at first and then fails in a way
            <A HREF="motion.html#it">it</A> does not produce a test.out file <A HREF="motion.html#it">it</A> looks like the test
            succeeded.
Solution:   Delete the previous output file.
Files:      src/testdir/Make_dos.mak

Patch 8.0.0463
Problem:    Resetting <A HREF="options.html#'compatible'">'compatible'</A> in <A HREF="starting.html#defaults.vim">defaults.vim</A> has unexpected side
            effects. (David Fishburn)
Solution:   Only reset <A HREF="options.html#'compatible'">'compatible'</A> if <A HREF="motion.html#it">it</A> was set.
Files:      runtime/defaults.vim

Patch 8.0.0464
Problem:    Can't find executable name on Solaris and FreeBSD.
Solution:   Check for &quot;/proc/self/path/a.out&quot;. (Danek Duvall) And for
            &quot;/proc/curproc/file&quot;.
Files:      src/config.h.in, src/configure.ac, src/main.c,
            src/auto/configure

Patch 8.0.0465
Problem:    Off-by-one error in using <A HREF="change.html#:move">:move</A> with <A HREF="fold.html#folding">folding</A>.
Solution:   Correct off-by-one mistakes and add more tests. (Matthew
            Malcomson)
Files:      src/fold.c, src/testdir/test_fold.vim

Patch 8.0.0466
Problem:    There are still a few macros that should be all-caps.
Solution:   Make a few more macros all-caps.
Files:      src/buffer.c, src/edit.c, src/ex_cmds.c, src/ex_cmds2.c,
	    src/ex_docmd.c, src/ex_getln.c, src/farsi.c, src/fileio.c,
	    src/getchar.c, src/gui_beval.c, src/hardcopy.c, src/if_cscope.c,
	    src/if_xcmdsrv.c, src/mark.c, src/memline.c, src/menu.c,
	    src/message.c, src/misc1.c, src/normal.c, src/ops.c, src/option.c,
	    src/quickfix.c, src/screen.c, src/search.c, src/syntax.c,
	    src/tag.c, src/term.c, src/term.h, src/ui.c, src/undo.c,
	    src/userfunc.c, src/version.c, src/vim.h

Patch 8.0.0467
Problem:    Using <A HREF="message.html#g&lt;">g&lt;</A> after <A HREF="eval.html#:for">:for</A> does not show the right output. (Marcin
            Szamotulski)
Solution:   Call msg_sb_eol() in <A HREF="eval.html#:echomsg">:echomsg</A>.
Files:      src/eval.c

Patch 8.0.0468
Problem:    After aborting an <A HREF="intro.html#Ex">Ex</A> command <A HREF="message.html#g&lt;">g&lt;</A> does not work. (Marcin
            Szamotulski)
Solution:   Postpone clearing scrollback <A HREF="message.html#messages">messages</A> to until the command line
            has been entered.  Also fix that the screen isn't redrawn if after
            <A HREF="message.html#g&lt;">g&lt;</A> the command line is cancelled.
Files:      src/message.c, src/proto/message.pro, src/ex_getln.c, src/misc2.c,
            src/gui.c

Patch 8.0.0469
Problem:    Compiler warnings on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Add type casts. (Christian Brabandt)
Files:      src/fold.c

Patch 8.0.0470
Problem:    Not enough <A HREF="testing.html#testing">testing</A> for help commands.
Solution:   Add a few more help tests. (Dominique Pelle, closes #1565)
Files:      src/testdir/test_help.vim, src/testdir/test_help_tagjump.vim

Patch 8.0.0471
Problem:    Exit callback test sometimes fails.
Solution:   Add <A HREF="motion.html#it">it</A> to the <A HREF="eval.html#list">list</A> of flaky tests.
Files:      src/testdir/runtest.vim

Patch 8.0.0472
Problem:    When a test fails and test.log is created, Test_edit_CTRL_I
            matches <A HREF="motion.html#it">it</A> instead of test1.in.
Solution:   Match with runtest.vim instead.
Files:      src/testdir/test_edit.vim

Patch 8.0.0473
Problem:    No test covering arg_all().
Solution:   Add a test expanding ##.
Files:      src/testdir/test_arglist.vim

Patch 8.0.0474
Problem:    The <A HREF="remote.html#client-server">client-server</A> feature is not tested.
Solution:   Add a test.
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/shared.vim,
            src/testdir/test_clientserver.vim, src/os_mswin.c

Patch 8.0.0475
Problem:    Not enough <A HREF="testing.html#testing">testing</A> for the <A HREF="remote.html#client-server">client-server</A> feature.
Solution:   Add more tests.  Add the <A HREF="builtin.html#remote_startserver()">remote_startserver()</A> function.  Fix that
            a locally evaluated <A HREF="eval.html#expression">expression</A> uses function-local <A HREF="eval.html#variables">variables</A>.
Files:      src/if_xcmdsrv.c, src/evalfunc.c, src/os_mswin.c,
            src/proto/main.pro, src/testdir/test_clientserver.vim,
            runtime/doc/eval.txt

Patch 8.0.0476 (after 8.0.0475)
Problem:    Missing change to main.c.
Solution:   Add new function.
Files:      src/main.c

Patch 8.0.0477
Problem:    The <A HREF="remote.html#client-server">client-server</A> test may hang when failing.
Solution:   Set a <A HREF="builtin.html#timer">timer</A>.  Add <A HREF="testing.html#assert_report()">assert_report()</A>
Files:      src/testdir/test_clientserver.vim, src/testdir/runtest.vim,
            src/eval.c, src/evalfunc.c, src/proto/eval.pro, src/if_xcmdsrv.c,
            src/os_mswin.c, runtime/doc/eval.txt

Patch 8.0.0478
Problem:    Tests use assert_true(0) and assert_false(1) to report <A HREF="message.html#errors">errors</A>.
Solution:   Use <A HREF="testing.html#assert_report()">assert_report()</A>.
Files:      src/testdir/test_cscope.vim, src/testdir/test_expr.vim,
            src/testdir/test_perl.vim, src/testdir/test_channel.vim,
            src/testdir/test_cursor_func.vim, src/testdir/test_gui.vim,
            src/testdir/test_menu.vim, src/testdir/test_popup.vim,
            src/testdir/test_viminfo.vim, src/testdir/test_vimscript.vim,
            src/testdir/test_assert.vim

Patch 8.0.0479
Problem:    <A HREF="builtin.html#remote_peek()">remote_peek()</A> is not tested.
Solution:   Add a test.
Files:      src/testdir/test_clientserver.vim, src/testdir/runtest.vim

Patch 8.0.0480
Problem:    The <A HREF="builtin.html#remote_peek()">remote_peek()</A> test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Check for pending <A HREF="message.html#messages">messages</A>. Also report <A HREF="message.html#errors">errors</A> in the first run if
            a flaky test fails <A HREF="if_cscop.html#twice">twice</A>.
Files:      src/os_mswin.c, src/testdir/runtest.vim

Patch 8.0.0481
Problem:    Unnecessary if statement.
Solution:   Remove the statement.  Fix &quot;it's&quot; vs &quot;its&quot; mistakes. (Dominique
            Pelle, closes #1568)
Files:      src/syntax.c

Patch 8.0.0482
Problem:    The <A HREF="builtin.html#setbufvar()">setbufvar()</A> function may mess up the <A HREF="windows.html#window">window</A> layout. (Kay Z.)
Solution:   Do not check the <A HREF="windows.html#window">window</A> to be valid if <A HREF="motion.html#it">it</A> is NULL.
Files:      src/window.c, src/testdir/test_functions.vim

Patch 8.0.0483
Problem:    Illegal memory access when using <A HREF="windows.html#:all">:all</A>. (Dominique Pelle)
Solution:   Adjust the cursor position right after setting &quot;curwin&quot;.
Files:      src/window.c, src/testdir/test_window_cmd.vim

Patch 8.0.0484
Problem:    Using <A HREF="helphelp.html#:lhelpgrep">:lhelpgrep</A> with an argument that should fail does not
            produce an error if the previous <A HREF="helphelp.html#:helpgrep">:helpgrep</A> worked.
Solution:   Use another way to detect that <A HREF="autocmd.html#autocommands">autocommands</A> made the <A HREF="quickfix.html#quickfix">quickfix</A> info
            invalid. (Yegappan Lakshmanan)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.0485
Problem:    Not all <A HREF="windows.html#windows">windows</A> commands are tested.
Solution:   Add more tests for <A HREF="windows.html#windows">windows</A> commands. (Dominique Pelle,
            closes #1575) Run test_autocmd separately, <A HREF="motion.html#it">it</A> interferes with
            other tests.  Fix tests that depended on side effects.
Files:      src/testdir/test_window_cmd.vim, src/testdir/test_alot.vim,
            src/testdir/test_autocmd.vim, src/testdir/test_fnamemodify.vim,
            src/testdir/test_functions.vim, src/testdir/test_delete.vim,
            src/testdir/Make_all.mak

Patch 8.0.0486
Problem:    Crash and endless loop when closing <A HREF="windows.html#windows">windows</A> in a <A HREF="autocmd.html#SessionLoadPost">SessionLoadPost</A>
            <A HREF="autocmd.html#autocommand">autocommand</A>.
Solution:   Check for valid <A HREF="tabpage.html#tabpage">tabpage</A>.  (partly neovim #6308)
Files:      src/testdir/test_autocmd.vim, src/fileio.c, src/proto/window.pro,
            src/window.c

Patch 8.0.0487
Problem:    The autocmd test hangs on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Skip the hanging tests for now.
Files:      src/testdir/test_autocmd.vim

Patch 8.0.0488
Problem:    Running tests leaves an &quot;xxx&quot; file behind.
Solution:   Delete the <A HREF="options.html#'verbosefile'">'verbosefile'</A> after resetting the option.
Files:      src/testdir/gen_opt_test.vim

Patch 8.0.0489
Problem:    Clipboard and &quot;* <A HREF="sponsor.html#register">register</A> is not tested.
Solution:   Add a test for <A HREF="os_mac.html#Mac">Mac</A> and <A HREF="options.html#X11">X11</A>. (Kazunobu Kuriyama)
Files:      src/Makefile, src/testdir/Make_all.mak,
            src/testdir/test_quotestar.vim, src/testdir/runtest.vim

Patch 8.0.0490
Problem:    Splitting a <A HREF="options.html#'winfixwidth'">'winfixwidth'</A> <A HREF="windows.html#window">window</A> vertically makes <A HREF="motion.html#it">it</A> one column
            smaller. (Dominique Pelle)
Solution:   Add one to the width for the separator.
Files:      src/window.c, src/testdir/test_window_cmd.vim

Patch 8.0.0491
Problem:    The <A HREF="gui.html#quotestar">quotestar</A> test fails when a required feature is missing.
Solution:   Prepend &quot;Skipped&quot; to the thrown exception.
Files:      src/testdir/test_quotestar.vim

Patch 8.0.0492
Problem:    A failing <A HREF="remote.html#client-server">client-server</A> request can make Vim hang.
Solution:   Add a timeout argument to <A HREF="eval.html#functions">functions</A> that wait.
Files:      src/evalfunc.c, src/if_xcmdsrv.c, src/proto/if_xcmdsrv.pro,
            src/main.c, src/os_mswin.c, src/proto/os_mswin.pro,
            src/vim.h, runtime/doc/eval.txt, src/testdir/test_clientserver.vim

Patch 8.0.0493
Problem:    Crash with cd command with very long argument.
Solution:   Check for running out of space. (Dominique Pelle, closes #1576)
Files:      src/testdir/test_alot.vim, src/testdir/test_cd.vim, src/Makefile,
            src/misc2.c

Patch 8.0.0494
Problem:    Build failure with older compiler on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Move declaration to start of block.
Files:      src/evalfunc.c, src/main.c, src/os_mswin.c

Patch 8.0.0495
Problem:    The <A HREF="gui.html#quotestar">quotestar</A> test uses a <A HREF="builtin.html#timer">timer</A> instead of a timeout, thus <A HREF="motion.html#it">it</A>
            cannot be rerun like a flaky test.
Solution:   Remove the <A HREF="builtin.html#timer">timer</A> and add a timeout. (Kazunobu Kuriyama)
Files:      src/testdir/test_quotestar.vim

Patch 8.0.0496
Problem:    Insufficient <A HREF="testing.html#testing">testing</A> for <A HREF="fold.html#folding">folding</A>.
Solution:   Add a couple more fold tests. (Dominique Pelle, closes #1579)
Files:      src/testdir/test_fold.vim

Patch 8.0.0497
Problem:    <A HREF="arabic.html#Arabic">Arabic</A> support is not fully tested.
Solution:   Add more tests for the untested <A HREF="eval.html#functions">functions</A>.  Comment out
            unreachable code.
Files:      src/arabic.c, src/testdir/test_arabic.vim

Patch 8.0.0498
Problem:    Two autocmd tests are skipped on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Make the test pass on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>. Write the <A HREF="message.html#messages">messages</A> in a file
            instead of getting the output of <A HREF="builtin.html#system()">system()</A>.
Files:      src/testdir/test_autocmd.vim

Patch 8.0.0499
Problem:    <A HREF="builtin.html#taglist()">taglist()</A> does not prioritize <A HREF="tagsrch.html#tags">tags</A> for a buffer.
Solution:   Add an optional buffer argument. (Duncan McDougall, closes #1194)
Files:      runtime/doc/eval.txt, src/evalfunc.c, src/proto/tag.pro,
            src/Makefile, src/tag.c, src/testdir/test_alot.vim,
            src/testdir/test_taglist.vim

Patch 8.0.0500
Problem:    Quotestar test is still a bit flaky.
Solution:   Add a slower check for <A HREF="eval.html#v:version">v:version</A>.
Files:      src/testdir/test_quotestar.vim

Patch 8.0.0501
Problem:    On <A HREF="os_win32.html#MS-Windows">MS-Windows</A> &quot;<A HREF="os_win32.html#:!start">:!start</A>&quot; does not work <A HREF="motion.html#as">as</A> expected.
Solution:   When creating a process fails try passing the argument to
            ShellExecute().  (Katsuya Hino, closes #1570)
Files:      runtime/doc/os_win32.txt, src/os_win32.c

Patch 8.0.0502
Problem:    Coverity complains about possible NULL pointer.
Solution:   Add an assert(), let's see if this works on all systems.
Files:      src/window.c

Patch 8.0.0503
Problem:    Endless loop in updating <A HREF="fold.html#folds">folds</A> with 32 bit ints.
Solution:   Subtract from LHS instead of add to the RHS. (Matthew Malcomson)
Files:      src/fold.c

Patch 8.0.0504
Problem:    Looking up an <A HREF="intro.html#Ex">Ex</A> command is a bit slow.
Solution:   Instead of just using the first <A HREF="print.html#letter">letter</A>, also use the second <A HREF="print.html#letter">letter</A>
            to skip ahead in the <A HREF="eval.html#list">list</A> of commands. Generate the table with a
            <A HREF="if_perl.html#Perl">Perl</A> <A HREF="usr_41.html#script">script</A>. (Dominique Pelle, closes #1589)
Files:      src/Makefile, src/create_cmdidxs.pl, src/ex_docmd.c, Filelist

Patch 8.0.0505
Problem:    Failed <A HREF="windows.html#window">window</A> split for <A HREF="windows.html#:stag">:stag</A> not handled. (Coverity CID 99204)
Solution:   If the split fails skip to the end. (bstaletic, closes #1577)
Files:      src/tag.c

Patch 8.0.0506 (after 8.0.0504)
Problem:    Can't build with ANSI C.
Solution:   Move declarations to start of block.
Files:      src/ex_docmd.c

Patch 8.0.0507
Problem:    Client-server tests fail when $DISPLAY is not set.
Solution:   Check for <A HREF="remote.html#E240">E240</A> before running the test.
Files:      src/testdir/test_quotestar.vim, src/testdir/test_clientserver.vim

Patch 8.0.0508
Problem:    Coveralls no longer shows per-file coverage.
Solution:   Add coverage from codecov.io. (Christian Brabandt)
Files:      .travis.yml

Patch 8.0.0509
Problem:    No link to codecov.io results.
Solution:   Add a badge to the readme file.
Files:      README.md

Patch 8.0.0510 (after 8.0.0509)
Problem:    Typo in link to codecov.io results.
Solution:   Remove duplicate https:.
Files:      README.md

Patch 8.0.0511
Problem:    Message for skipping <A HREF="remote.html#client-server">client-server</A> tests is unclear.
Solution:   Be more specific about what's missing (Hirohito Higashi, Kazunobu
            Kuriyama)
Files:      src/testdir/test_quotestar.vim, src/testdir/test_clientserver.vim

Patch 8.0.0512
Problem:    Check for available characters takes too long.
Solution:   Only check did_start_blocking if wtime is negative. (Daisuke
            Suzuki, closes #1591)
Files:      src/os_unix.c

Patch 8.0.0513 (after 8.0.0201)
Problem:    Getting name of cleared highlight group is wrong. (Matt Wozniski)
Solution:   Only skip over cleared names for completion. (closes #1592)
            Also fix that a cleared group causes duplicate completions.
Files:      src/syntax.c, src/proto/syntax.pro, src/evalfunc.c,
            src/ex_cmds.c, src/testdir/test_syntax.vim,
            src/testdir/test_cmdline.vim

Patch 8.0.0514
Problem:    Script for creating cmdidxs can be improved.
Solution:   Count skipped lines instead of collecting the lines.  Add &quot;const&quot;.
            (Dominique Pelle, closes #1594)
Files:      src/create_cmdidxs.pl, src/ex_docmd.c

Patch 8.0.0515
Problem:    ml_get <A HREF="message.html#errors">errors</A> in silent <A HREF="intro.html#Ex">Ex</A> mode. (Dominique Pelle)
Solution:   Clear valid flags when setting the cursor.  Set the topline when
            not in full screen mode.
Files:      src/ex_docmd.c, src/move.c, src/testdir/test_startup.vim

Patch 8.0.0516
Problem:    A large <A HREF="intro.html#count">count</A> on a normal command causes trouble. (Dominique
            Pelle)
Solution:   Make &quot;opcount&quot; long.
Files:      src/globals.h, src/testdir/test_normal.vim

Patch 8.0.0517
Problem:    There is no way to remove <A HREF="quickfix.html#quickfix">quickfix</A> lists (for <A HREF="testing.html#testing">testing</A>).
Solution:   Add the '<A HREF="motion.html#f">f</A>' action to <A HREF="builtin.html#setqflist()">setqflist()</A>. Add tests. (Yegappan
            Lakshmanan)
Files:      runtime/doc/eval.txt, src/evalfunc.c, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.0518
Problem:    Storing a zero byte from a <A HREF="mbyte.html#multibyte">multibyte</A> character causes fold text
            to show up wrong.
Solution:   Avoid putting zero in ScreenLines. (Christian Brabandt,
            closes #1567)
Files:      src/screen.c, src/testdir/test_display.vim

Patch 8.0.0519
Problem:    Character classes are not well tested. They can differ between
            platforms.
Solution:   Add tests.  In the documentation make clear which classes depend
            on what library function.  Only use :cntrl: and :graph: for ASCII.
            (Kazunobu Kuriyama, Dominique Pelle, closes #1560)
            Update the documentation.
Files:      src/regexp.c, src/regexp_nfa.c, runtime/doc/pattern.txt,
            src/testdir/test_regexp_utf8.vim

Patch 8.0.0520
Problem:    Using a function pointer instead of the actual function, which we
            know.
Solution:   Change mb_ <A HREF="eval.html#functions">functions</A> to utf_ <A HREF="eval.html#functions">functions</A> when already checked for
            <A HREF="mbyte.html#Unicode">Unicode</A>. (Dominique Pelle, closes #1582)
Files:      src/message.c, src/misc2.c, src/regexp.c, src/regexp_nfa.c,
            src/screen.c, src/spell.c

Patch 8.0.0521
Problem:    GtkForm handling is outdated.
Solution:   Get rid of event <A HREF="change.html#filter">filter</A> <A HREF="eval.html#functions">functions</A>.  Get rid of GtkForm.width and
            .height.  Eliminate gtk_widget_size_request() calls. (Kazunobu
            Kuriyama)
Files:      src/gui_gtk_f.c, src/gui_gtk_f.h

Patch 8.0.0522
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: when <A HREF="options.html#'clipboard'">'clipboard'</A> is &quot;unnamed&quot; yyp does not work in a
            <A HREF="repeat.html#:global">:global</A> command.
Solution:   When setting the <A HREF="gui.html#clipboard">clipboard</A> was postponed, <A HREF="diff.html#do">do</A> not clear the
            <A HREF="sponsor.html#register">register</A>.
Files:      src/ops.c, src/proto/ui.pro, src/ui.c, src/globals.h,
            src/testdir/test_global.vim, src/Makefile,
            src/testdir/test_alot.vim

Patch 8.0.0523
Problem:    dv} deletes part of a <A HREF="mbyte.html#multibyte">multibyte</A> character. (Urtica Dioica)
Solution:   Include the whole character.
Files:      src/search.c, src/testdir/test_normal.vim

Patch 8.0.0524 (after 8.0.0518)
Problem:    Folds are messed up when <A HREF="options.html#'encoding'">'encoding'</A> is &quot;<A HREF="mbyte.html#utf-8">utf-8</A>&quot;.
Solution:   Also set the fold character when it's not <A HREF="mbyte.html#multibyte">multibyte</A>.
Files:      src/screen.c, src/testdir/test_display.vim

Patch 8.0.0525
Solution:   Completion for user command argument not tested.
Problem:    Add a test.
Files:      src/testdir/test_cmdline.vim

Patch 8.0.0526
Problem:    Coverity complains about possible negative value.
Solution:   Check return value of ftell() not to be negative.
Files:      src/os_unix.c

Patch 8.0.0527
Problem:    RISC OS support was removed long ago, but one file is still
            included.
Solution:   Delete the file. (Thomas Dziedzic, closes #1603)
Files:      Filelist, src/swis.s

Patch 8.0.0528
Problem:    When <A HREF="options.html#'wildmenu'">'wildmenu'</A> is set and <A HREF="options.html#'wildmode'">'wildmode'</A> has &quot;longest&quot; then the first
            file name is highlighted, even though the text shows the longest
            match.
Solution:   Do not highlight the first match. (LemonBoy, closes #1602)
Files:      src/ex_getln.c

Patch 8.0.0529
Problem:    Line in test commented out.
Solution:   Uncomment the lines for character classes that were failing before
            8.0.0519. (Dominique Pelle, closes #1599)
Files:      src/testdir/test_regexp_utf8.vim

Patch 8.0.0530
Problem:    Buffer overflow when <A HREF="options.html#'columns'">'columns'</A> is very big. (Nikolai Pavlov)
Solution:   Correctly compute where to truncate.  Fix translation.
            (closes #1600)
Files:      src/edit.c, src/testdir/test_edit.vim

Patch 8.0.0531 (after 8.0.0530)
Problem:    Test with long directory name fails on non-unix systems.
Solution:   Skip the test on non-unix systems.
Files:      src/testdir/test_edit.vim

Patch 8.0.0532 (after 8.0.0531)
Problem:    Test with long directory name fails on <A HREF="os_mac.html#Mac">Mac</A>.
Solution:   Skip the test on <A HREF="os_mac.html#Mac">Mac</A> systems.
Files:      src/testdir/test_edit.vim

Patch 8.0.0533
Problem:    Abbreviation doesn't work after backspacing newline. (Hkonrk)
Solution:   Set the insert start column. (closes #1609)
Files:      src/testdir/test_mapping.vim, src/edit.c

Patch 8.0.0534
Problem:    Defaults.vim does not work well with tiny features. (crd477)
Solution:   When the <A HREF="various.html#+eval">+eval</A> feature is not available always reset <A HREF="options.html#'compatible'">'compatible'</A>.
Files:      runtime/defaults.vim

Patch 8.0.0535
Problem:    Memory leak when <A HREF="starting.html#exiting">exiting</A> from within a user function.
Solution:   Clear the function call stack on exit.
Files:      src/userfunc.c

Patch 8.0.0536
Problem:    <A HREF="quickfix.html#Quickfix">Quickfix</A> <A HREF="windows.html#window">window</A> not updated when freeing <A HREF="quickfix.html#quickfix">quickfix</A> stack.
Solution:   Update the <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="windows.html#window">window</A>. (Yegappan Lakshmanan)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.0537
Problem:    Illegal memory access with <A HREF="various.html#:z">:z</A> and large <A HREF="intro.html#count">count</A>.
Solution:   Check for number overflow, using long instead of int. (Dominique
            Pelle, closes #1612)
Files:      src/Makefile, src/ex_cmds.c, src/testdir/test_alot.vim,
            src/testdir/test_ex_z.vim

Patch 8.0.0538
Problem:    No test for falling back to default term value.
Solution:   Add a test.
Files:      src/testdir/test_startup.vim

Patch 8.0.0539 (after 8.0.0538)
Problem:    Startup test fails on <A HREF="os_mac.html#Mac">Mac</A>.
Solution:   Use another term name, &quot;unknown&quot; is known. Avoid a 2 second delay.
Files:      src/testdir/test_startup.vim, src/main.c, src/proto/main.pro,
            src/term.c

Patch 8.0.0540 (after 8.0.0540)
Problem:    Building unit tests fails.
Solution:   Move params outside of #ifdef.
Files:      src/main.c, src/message_test.c

Patch 8.0.0541
Problem:    Compiler warning on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Add a type cast. (Mike Williams)
Files:      src/edit.c

Patch 8.0.0542
Problem:    <A HREF="builtin.html#getpos()">getpos()</A> can return a negative line number. (haya14busa)
Solution:   Handle a zero topline and botline. (closes #1613)
Files:      src/eval.c, runtime/doc/eval.txt

Patch 8.0.0543
Problem:    Test_edit causes older xfce4-terminal to close. (Dominique Pelle)
Solution:   Reduce number of columns to 2000.  Try to restore the <A HREF="windows.html#window">window</A>
            position.
Files:      src/testdir/test_edit.vim, src/evalfunc.c, src/term.c,
            src/proto/term.pro, src/term.h

Patch 8.0.0544
Problem:    Cppcheck warnings.
Solution:   Use temp variable. Change NUL to NULL. Swap conditions. (Dominique
            Pelle)
Files:      src/channel.c, src/edit.c, src/farsi.c

Patch 8.0.0545
Problem:    Edit test may fail on some systems.
Solution:   If creating a directory with a very long path fails, bail out.
Files:      src/testdir/test_edit.vim

Patch 8.0.0546
Problem:    Swap file exists briefly when opening the command <A HREF="windows.html#window">window</A>.
Solution:   Set the noswapfile command modifier before splitting the <A HREF="windows.html#window">window</A>.
            (James McCoy, closes #1620)
Files:      src/ex_getln.c, src/option.c

Patch 8.0.0547
Problem:    Extra line break in verbosefile when using &quot;<A HREF="eval.html#:echomsg">:echomsg</A>&quot;. (Ingo
            Karkat)
Solution:   Don't call msg_start(). (closes #1618)
Files:      src/eval.c, src/testdir/test_cmdline.vim

Patch 8.0.0548
Problem:    Saving the <A HREF="undo.html#redo">redo</A> buffer only works one time, resulting in the &quot;<A HREF="repeat.html#.">.</A>&quot;
            command not working well for a function call inside another
            function call. (Ingo Karkat)
Solution:   Save the <A HREF="undo.html#redo">redo</A> buffer at every user function call. (closes #1619)
Files:      src/getchar.c, src/proto/getchar.pro, src/structs.h,
            src/fileio.c, src/userfunc.c, src/testdir/test_functions.vim

Patch 8.0.0549
Problem:    No test for the <A HREF="various.html#8g8">8g8</A> command.
Solution:   Add a test. (Dominique Pelle, closes #1615)
Files:      src/testdir/test_normal.vim

Patch 8.0.0550
Problem:    Some etags format <A HREF="tagsrch.html#tags">tags</A> file use 0x01, breaking the parsing.
Solution:   Use 0x02 for TAG_SEP. (James McCoy, closes #1614)
Files:      src/tag.c, src/testdir/test_taglist.vim

Patch 8.0.0551
Problem:    The typeahead buffer is reallocated too often.
Solution:   Re-use the existing buffer if possible.
Files:      src/getchar.c

Patch 8.0.0552
Problem:    Toupper and tolower don't work properly for Turkish when <A HREF="options.html#'casemap'">'casemap'</A>
            is empty. (Bjorn Linse)
Solution:   Check the <A HREF="options.html#'casemap'">'casemap'</A> <A HREF="options.html#options">options</A> when deciding how to upper/lower <A HREF="change.html#case">case</A>.
Files:      src/charset.c, src/testdir/test_normal.vim

Patch 8.0.0553 (after 8.0.0552)
Problem:    Toupper/tolower test with Turkish <A HREF="mbyte.html#locale">locale</A> fails on <A HREF="os_mac.html#Mac">Mac</A>.
Solution:   Skip the test on <A HREF="os_mac.html#Mac">Mac</A>.
Files:      src/testdir/test_normal.vim

Patch 8.0.0554 (after 8.0.0552)
Problem:    Toupper and tolower don't work properly for Turkish when <A HREF="options.html#'casemap'">'casemap'</A>
            contains &quot;keepascii&quot;. (Bjorn Linse)
Solution:   When <A HREF="options.html#'casemap'">'casemap'</A> contains &quot;keepascii&quot; use ASCII toupper/tolower.
Files:      src/charset.c, src/testdir/test_normal.vim

Patch 8.0.0555 (after 8.0.0552)
Problem:    Toupper/tolower test fails on OSX without Darwin.
Solution:   Skip that part of the test also for OSX. (Kazunobu Kuriyama)
Files:      src/testdir/test_normal.vim

Patch 8.0.0556
Problem:    Getting the <A HREF="windows.html#window">window</A> position fails if both the <A HREF="gui.html#GUI">GUI</A> and term
            code is built in.
Solution:   Return after getting the <A HREF="gui.html#GUI">GUI</A> <A HREF="windows.html#window">window</A> position. (Kazunobu Kuriyama)
Files:      src/evalfunc.c

Patch 8.0.0557
Problem:    <A HREF="gui_x11.html#GTK">GTK</A>: using static gravities is not useful.
Solution:   Remove setting static gravities. (Kazunobu Kuriyama)
Files:      src/gui_gtk_f.c

Patch 8.0.0558
Problem:    The <A HREF="syntax.html#:ownsyntax">:ownsyntax</A> command is not tested.
Solution:   Add a test. (Dominique Pelle, closes #1622)
Files:      src/testdir/test_syntax.vim

Patch 8.0.0559
Problem:    Setting <A HREF="options.html#'ttytype'">'ttytype'</A> to xxx does not always fail <A HREF="motion.html#as">as</A> expected. (Marvin
            Schmidt)
Solution:   Catch both possible <A HREF="message.html#errors">errors</A>. (closes #1601)
Files:      src/testdir/test_options.vim

Patch 8.0.0560
Problem:    <A HREF="windows.html#:windo">:windo</A> allows for ! but it's not supported.
Solution:   Disallow passing !. (Hirohito Higashi)
Files:      src/ex_cmds.h

Patch 8.0.0561
Problem:    Undefined behavior when using <A HREF="intro.html#backslash">backslash</A> after empty line.
Solution:   Check for an empty line. (Dominique Pelle, closes #1631)
Files:      src/misc2.c, src/testdir/test_vimscript.vim

Patch 8.0.0562
Problem:    Not enough test coverage for <A HREF="syntax.html#syntax">syntax</A> commands.
Solution:   Add a few more tests. (Dominique Pelle, closes #1624)
Files:      src/testdir/test_cmdline.vim, src/testdir/test_syntax.vim

Patch 8.0.0563
Problem:    Crash when getting the <A HREF="windows.html#window">window</A> position in <A HREF="syntax.html#tmux">tmux</A>. (Marvin Schmidt)
Solution:   Add <A HREF="term.html#t_GP">t_GP</A> to the <A HREF="eval.html#list">list</A> of <A HREF="terminal.html#terminal">terminal</A> <A HREF="options.html#options">options</A>. (closes #1627)
Files:      src/option.c

Patch 8.0.0564
Problem:    Cannot detect Bazel BUILD files on some systems.
Solution:   Check for BUILD after <A HREF="usr_41.html#script">script</A> checks. (Issue #1340)
Files:      runtime/filetype.vim

Patch 8.0.0565
Problem:    Using freed memory in :caddbuf after clearing <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A>.
            (Dominique Pelle)
Solution:   Set qf_last to NULL.
Files:      src/quickfix.c

Patch 8.0.0566
Problem:    Setting <A HREF="options.html#'nocompatible'">'nocompatible'</A> for the tiny version moves the cursor.
Solution:   Use another trick to skip commands when the <A HREF="various.html#+eval">+eval</A> feature is
            present. (Christian Brabandt, closes #1630)
Files:      runtime/defaults.vim

Patch 8.0.0567
Problem:    Call for requesting color and ambiwidth is too early. (Hirohito
            Higashi)
Solution:   Move the call down to below resetting &quot;starting&quot;.
Files:      src/main.c

Patch 8.0.0568
Problem:    &quot;<A HREF="pattern.html#1gd">1gd</A>&quot; may hang.
Solution:   Don't get stuck in one position. (Christian Brabandt, closes #1643)
Files:      src/testdir/test_goto.vim, src/normal.c

Patch 8.0.0569
Problem:    Bracketed paste is still enabled when executing a shell command.
            (Michael Smith)
Solution:   Disable bracketed paste when going into cooked mode. (closes #1638)
Files:      src/term.c

Patch 8.0.0570
Problem:    Can't run make with several jobs, creating directories has a race
            condition.
Solution:   Use the MKDIR_P autoconf mechanism. (Eric N. Vander Weele,
            closes #1639)
Files:      src/configure.ac, src/auto/configure, src/Makefile,
            src/config.mk.in, src/install-sh, src/mkinstalldirs, Filelist

Patch 8.0.0571
Problem:    The cursor line number becomes negative when using :z^ in an empty
            buffer. (neovim #6557)
Solution:   Correct the line number.  Also reset the column.
Files:      src/testdir/test_ex_z.vim, src/ex_cmds.c

Patch 8.0.0572
Problem:    Building the command table requires <A HREF="if_perl.html#Perl">Perl</A>.
Solution:   Use a Vim <A HREF="usr_41.html#script">script</A> solution. (Dominique Pelle, closes #1641)
Files:      src/Makefile, src/create_cmdidxs.pl, src/create_cmdidxs.vim,
            src/ex_cmdidxs.h, src/ex_docmd.c, Filelist

Patch 8.0.0573
Problem:    Running parallel make after distclean fails. (Manuel Ortega)
Solution:   Instead of using targets &quot;scratch config myself&quot; use &quot;reconfig&quot;.
Files:      src/Makefile, src/config.mk.dist

Patch 8.0.0574
Problem:    Get only one <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A> after :caddbuf.
Solution:   Reset qf_multiline. (Yegappan Lakshmanan)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.0575
Problem:    Using freed memory when resetting <A HREF="options.html#'indentexpr'">'indentexpr'</A> while evaluating
            <A HREF="motion.html#it">it</A>. (Dominique Pelle)
Solution:   Make a copy of <A HREF="options.html#'indentexpr'">'indentexpr'</A>.
Files:      src/misc1.c, src/testdir/test_options.vim

Patch 8.0.0576 (after 8.0.0570 and 8.0.0573)
Problem:    Can't build when configure chooses &quot;install-sh&quot;. (Daniel Hahler)
Solution:   Always use install-sh.  Fix remaining use of mkinstalldirs.
            (closes #1647)
Files:      src/installman.sh, src/installml.sh, src/config.mk.in,
            src/configure.ac, src/auto/configure, src/Makefile

Patch 8.0.0577 (after 8.0.0575)
Problem:    Warning for uninitialized variable. (John Marriott)
Solution:   Initialize &quot;indent&quot;.
Files:      src/misc1.c

Patch 8.0.0578
Problem:    <A HREF="gui_w32.html#:simalt">:simalt</A> on <A HREF="os_win32.html#MS-Windows">MS-Windows</A> does not work properly.
Solution:   Put something in the typeahead buffer. (Christian Brabandt)
Files:      src/gui_w32.c

Patch 8.0.0579
Problem:    Duplicate test <A HREF="change.html#case">case</A> for <A HREF="quickfix.html#quickfix">quickfix</A>.
Solution:   Remove the function. (Yegappan Lakshmanan)
Files:      src/testdir/test_quickfix.vim

Patch 8.0.0580
Problem:    Cannot set the valid flag with <A HREF="builtin.html#setqflist()">setqflist()</A>.
Solution:   Add the &quot;valid&quot; argument. (Yegappan Lakshmanan, closes #1642)
Files:      runtime/doc/eval.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.0581
Problem:    Moving folded text is sometimes not correct.
Solution:   Bail out when &quot;move_end&quot; is zero. (Matthew Malcomson)
Files:      src/fold.c, src/testdir/test_fold.vim

Patch 8.0.0582
Problem:    Illegal memory access with <A HREF="spell.html#z=">z=</A> command. (Dominique Pelle)
Solution:   Avoid <A HREF="change.html#case">case</A> folded text to be longer than the original text.  Use
            MB_PTR2LEN() instead of MB_BYTE2LEN().
Files:      src/spell.c, src/testdir/test_spell.vim

Patch 8.0.0583
Problem:    Fold test hangs on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Avoid overflow in compare.
Files:      src/fold.c

Patch 8.0.0584
Problem:    Memory leak when executing <A HREF="quickfix.html#quickfix">quickfix</A> tests.
Solution:   Free the <A HREF="eval.html#list">list</A> reference. (Yegappan Lakshmanan)
Files:      src/quickfix.c

Patch 8.0.0585
Problem:    Test_options fails when run in the <A HREF="gui.html#GUI">GUI</A>.
Solution:   Also check the <A HREF="options.html#'imactivatekey'">'imactivatekey'</A> value when the <A HREF="gui.html#GUI">GUI</A> is not running.
            Specify test values that work and that fail.
Files:      src/option.c, src/testdir/gen_opt_test.vim

Patch 8.0.0586
Problem:    No test for <A HREF="map.html#mapping">mapping</A> timing out.
Solution:   Add a test.
Files:      src/testdir/test_mapping.vim

Patch 8.0.0587
Problem:    Configure check for return value of tgetent is skipped.
Solution:   Always perform the check. (Marvin Schmidt, closes #1664)
Files:      src/configure.ac, src/auto/configure

Patch 8.0.0588
Problem:    <A HREF="channel.html#job_stop()">job_stop()</A> often assumes the <A HREF="channel.html#channel">channel</A> will be closed, while the <A HREF="channel.html#job">job</A>
            may not actually be stopped. (Martin Gammelster)
Solution:   Only assume the <A HREF="channel.html#job">job</A> stops on &quot;kill&quot;.  Don't send a signal if the
            <A HREF="channel.html#job">job</A> has already ended. (closes #1632)
Files:      src/channel.c

Patch 8.0.0589 (after 8.0.0578)
Problem:    <A HREF="gui_w32.html#:simalt">:simalt</A> still does not work.
Solution:   Use K_NOP instead of K_IGNORE. (Christian Brabandt)
Files:      src/gui_w32.c

Patch 8.0.0590
Problem:    Cannot add a context to locations.
Solution:   Add the &quot;context&quot; entry in location entries. (Yegappan Lakshmanan,
            closes #1012)
Files:      src/eval.c, src/proto/quickfix.pro, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.0591
Problem:    Changes to <A HREF="eval.html#eval">eval</A> functionality not documented.
Solution:   Include all the changes.
Files:      runtime/doc/eval.txt

Patch 8.0.0592
Problem:    If a <A HREF="channel.html#job">job</A> writes to a buffer and the user is typing a command, the
            screen isn't updated. When a message is displayed the changed
            buffer may cause <A HREF="motion.html#it">it</A> to be cleared. (Ramel Eshed)
Solution:   Update the screen and then the command line if the screen didn't
            scroll. Avoid <A HREF="insert.html#inserting">inserting</A> screen lines, <A HREF="motion.html#as">as</A> <A HREF="motion.html#it">it</A> clears any message.
            Update the status line when the buffer changed.
Files:      src/channel.c, src/screen.c, src/ex_getln.c, src/globals.h,
            src/vim.h, src/proto/ex_getln.pro, src/proto/screen.pro

Patch 8.0.0593
Problem:    Duplication of code for adding a <A HREF="eval.html#list">list</A> or <A HREF="eval.html#dict">dict</A> return value.
Solution:   Add rettv_dict_set() and rettv_list_set(). (Yegappan Lakshmanan)
Files:      src/dict.c, src/eval.c, src/evalfunc.c, src/if_perl.xs, src/list.c,
            src/proto/dict.pro, src/proto/list.pro

Patch 8.0.0594 (after 8.0.0592)
Problem:    Build failure when <A HREF="windows.html#windows">windows</A> feature is missing.
Solution:   Add #ifdef.
Files:      src/screen.c

Patch 8.0.0595 (after 8.0.0590)
Problem:    Coverity warning for not checking return value of dict_add().
Solution:   Check the return value for FAIL.
Files:      src/quickfix.c

Patch 8.0.0596
Problem:    Crash when <A HREF="builtin.html#complete()">complete()</A> is called after <A HREF="builtin.html#complete_add()">complete_add()</A> in
            <A HREF="options.html#'completefunc'">'completefunc'</A>. (Lifepillar)
Solution:   Bail out if compl_pattern is NULL. (closes #1668)
            Also avoid using freed memory.
Files:      src/edit.c, src/testdir/test_popup.vim

Patch 8.0.0597
Problem:    Off-by-one error in buffer size computation.
Solution:   Use &quot;&gt;=&quot; instead of &quot;<A HREF="change.html#&gt;">&gt;</A>&quot;. (LemonBoy, closes #1694)
Files:      src/quickfix.c

Patch 8.0.0598
Problem:    Building with gcc 7.1 yields new warnings.
Solution:   Initialize result. (John Marriott)
Files:      src/ex_docmd.c

Patch 8.0.0599
Problem:    <A HREF="diff.html#diff">diff</A> mode is insufficiently tested
Solution:   Add more test cases. (Dominique Pelle, closes #1685)
Files:      src/diff.c, src/testdir/test_diffmode.vim

Patch 8.0.0600
Problem:    test_recover fails on some systems.
Solution:   Explicitly check if &quot;<A HREF="pattern.html#/">/</A>&quot; is writable. (Ken Takata)
Files:      src/testdir/test_recover.vim

Patch 8.0.0601
Problem:    No test coverage for <A HREF="spell.html#:spellrepall">:spellrepall</A>.
Solution:   Add a test. (Dominique Pelle, closes #1717)
Files:      src/testdir/test_spell.vim

Patch 8.0.0602
Problem:    When <A HREF="editing.html#gF">gF</A> fails to edit the file the cursor still moves to the found
            line number.
Solution:   Check the return value of do_ecmd(). (Michael Hwang)
Files:      src/normal.c, src/testdir/test_gf.vim

Patch 8.0.0603 (after 8.0.0602)
Problem:    <A HREF="editing.html#gF">gF</A> test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Use @ instead of : before the line number
Files:      src/testdir/test_gf.vim

Patch 8.0.0604 (after 8.0.0603)
Problem:    <A HREF="editing.html#gF">gF</A> test still fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Use : before the line number and remove <A HREF="motion.html#it">it</A> from <A HREF="options.html#'isfname'">'isfname'</A>.
Files:      src/testdir/test_gf.vim

Patch 8.0.0605
Problem:    The buffer that <A HREF="quickfix.html#quickfix">quickfix</A> caches for performance may become
            invalid. (Daniel Hahler)
Solution:   Reset qf_last_bufref in qf_init_ext(). (Daniel Hahler,
            closes #1728, closes #1676)
Files:      src/quickfix.c

Patch 8.0.0606
Problem:    Cannot set the context for a specified <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A>.
Solution:   Use the <A HREF="eval.html#list">list</A> index instead of the current <A HREF="eval.html#list">list</A>. (Yegappan
            Lakshmanan)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.0607
Problem:    When creating a bufref, then using <A HREF="windows.html#:bwipe">:bwipe</A> and <A HREF="windows.html#:new">:new</A> <A HREF="motion.html#it">it</A> might get
            the same memory and bufref_valid() returns <A HREF="vim9.html#true">true</A>.
Solution:   Add br_fnum to check the buffer number didn't change.
Files:      src/structs.h, src/buffer.c, src/globals.h, src/if_py_both.h,
            src/quickfix.c

Patch 8.0.0608
Problem:    Cannot manipulate other than the current <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A>.
Solution:   Pass the <A HREF="eval.html#list">list</A> index to <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#functions">functions</A>. (Yegappan Lakshmanan)
Files:      src/quickfix.c

Patch 8.0.0609
Problem:    For some people the hint about quitting is not sufficient.
Solution:   Put <A HREF="intro.html#&lt;Enter&gt;">&lt;Enter&gt;</A> separately.  Also use &quot;:qa!&quot; to get out even when
            there are changes.
Files:      src/normal.c

Patch 8.0.0610
Problem:    The screen is redrawn when t_BG is set and used to detect the
            value for <A HREF="options.html#'background'">'background'</A>.
Solution:   Don't redraw when the value of <A HREF="options.html#'background'">'background'</A> didn't change.
Files:      src/term.c

Patch 8.0.0611
Problem:    When <A HREF="term.html#t_u7">t_u7</A> is sent a few characters in the second screen line are
            overwritten and not redrawn later. (Rastislav Barlik)
Solution:   Move redrawing the screen to after overwriting the characters.
Files:      src/main.c, src/term.c

Patch 8.0.0612
Problem:    Package directories are added to <A HREF="options.html#'runtimepath'">'runtimepath'</A> only after loading
            non-package plugins.
Solution:   Split off the code to add package directories to <A HREF="options.html#'runtimepath'">'runtimepath'</A>.
            (Ingo Karkat, closes #1680)
Files:      src/ex_cmds2.c, src/globals.h, src/main.c, src/proto/ex_cmds2.pro,
            src/testdir/test_startup.vim

Patch 8.0.0613
Problem:    The conf <A HREF="filetype.html#filetype">filetype</A> detection is done before <A HREF="filetype.html#ftdetect">ftdetect</A> scripts from
            <A HREF="repeat.html#packages">packages</A> that are added later.
Solution:   Add the FALLBACK argument to <A HREF="options.html#:setfiletype">:setfiletype</A>. (closes #1679,
            closes #1693)
Files:      src/ex_docmd.c, runtime/filetype.vim, src/Makefile,
            src/testdir/test_filetype.vim, src/testdir/test_alot.vim

Patch 8.0.0614
Problem:    <A HREF="builtin.html#float2nr()">float2nr()</A> is not exactly right.
Solution:   Make <A HREF="builtin.html#float2nr()">float2nr()</A> more accurate.  Turn test65 into a new style test.
            (Hirohito Higashi, closes #1688)
Files:      src/Makefile, src/evalfunc.c, src/testdir/Make_all.mak,
            src/testdir/Make_vms.mms, src/testdir/test65.in,
            src/testdir/test65.ok, src/testdir/test_float_func.vim,
            src/testdir/test_vimscript.vim, src/macros.h

Patch 8.0.0615
Problem:    Using <A HREF="motion.html#&#37;">&#37;</A> with <A HREF="print.html#:hardcopy">:hardcopy</A> wrongly escapes spaces. (Alexey Muranov)
Solution:   Expand <A HREF="motion.html#&#37;">&#37;</A> differently. (Christian Brabandt, closes #1682)
Files:      src/ex_docmd.c, src/testdir/test_hardcopy.vim


Patch 8.0.0616
Problem:    When setting the cterm background with &quot;<A HREF="syntax.html#:hi">:hi</A> Normal&quot; the value of
            <A HREF="options.html#'background'">'background'</A> may be set wrongly.
Solution:   Check that the color is <A HREF="various.html#less">less</A> than 16.  Don't set <A HREF="options.html#'background'">'background'</A> when
            <A HREF="motion.html#it">it</A> was set explicitly. (LemonBoy, closes #1710)
Files:      src/syntax.c, src/testdir/test_syntax.vim

Patch 8.0.0617 (after 8.0.0615)
Problem:    Hardcopy test hangs on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Check the postscript feature is supported.
Files:      src/testdir/test_hardcopy.vim

Patch 8.0.0618
Problem:    <A HREF="pattern.html#NFA">NFA</A> regex engine handles [0-z] incorrectly.
Solution:   Return at the right point. (James McCoy, closes #1703)
Files:      src/regexp_nfa.c, src/testdir/test36.in, src/testdir/test36.ok

Patch 8.0.0619
Problem:    In the <A HREF="gui.html#GUI">GUI</A>, when a <A HREF="builtin.html#timer">timer</A> uses <A HREF="builtin.html#feedkeys()">feedkeys()</A>, <A HREF="motion.html#it">it</A> still waits for an
            event. (Raymond Ko)
Solution:   Check tb_change_cnt in one more place.
Files:      src/gui.c

Patch 8.0.0620
Problem:    Since we only support <A HREF="gui_x11.html#GTK">GTK</A> versions that have <A HREF="motion.html#it">it</A>, the check for
            HAVE_GTK_MULTIHEAD is no longer needed.
Solution:   Remove HAVE_GTK_MULTIHEAD. (Kazunobu Kuriyama)
Files:      src/config.h.in, src/configure.ac, src/auto/configure,
            src/gui_beval.c, src/gui_gtk_x11.c, src/mbyte.c

Patch 8.0.0621
Problem:    The &quot;<A HREF="windows.html#:stag">:stag</A>&quot; command does not respect <A HREF="options.html#'switchbuf'">'switchbuf'</A>.
Solution:   Check <A HREF="options.html#'switchbuf'">'switchbuf'</A> for <A HREF="tagsrch.html#tag">tag</A> commands that may open a new <A HREF="windows.html#window">window</A>.
            (Ingo Karkat, closes #1681)  Define macros for the return values
            of getfile().
Files:      src/tag.c, src/testdir/test_tagjump.vim, src/vim.h, src/buffer.c,
            src/ex_cmds.c, src/search.c,

Patch 8.0.0622
Problem:    Using a text object to select quoted text fails when <A HREF="options.html#'selection'">'selection'</A>
            is set to &quot;<A HREF="motion.html#exclusive">exclusive</A>&quot;. (Guraga)
Solution:   Swap cursor and visual start position. (Christian Brabandt,
            closes #1687)
Files:      src/search.c, src/testdir/test_textobjects.vim

Patch 8.0.0623
Problem:    The message &quot;Invalid range&quot; is used for multiple <A HREF="message.html#errors">errors</A>.
Solution:   Add two more specific error <A HREF="message.html#messages">messages</A>. (Itchyny, Ken Hamada)
Files:      src/regexp.c, src/regexp_nfa.c, src/testdir/test_regexp_utf8.vim

Patch 8.0.0624 (after 8.0.0623)
Problem:    Warning for unused variable in tiny build. (Tony Mechelynck)
Solution:   Add an #ifdef.
Files:      src/regexp.c

Patch 8.0.0625
Problem:    <A HREF="builtin.html#shellescape()">shellescape()</A> always escapes a newline, which does not work with
            some shells. (Harm te Hennepe)
Solution:   Only <A HREF="intro.html#escape">escape</A> a newline when the &quot;special&quot; argument is non-zero.
            (Christian Brabandt, closes #1590)
Files:      src/evalfunc.c, src/testdir/test_functions.vim

Patch 8.0.0626
Problem:    In the <A HREF="gui.html#GUI">GUI</A> the cursor may flicker.
Solution:   Check the cmd_silent flag before updating the cursor shape.
            (Hirohito Higashi, closes #1637)
Files:      src/getchar.c

Patch 8.0.0627
Problem:    When <A HREF="options.html#'wrapscan'">'wrapscan'</A> is off &quot;<A HREF="visual.html#gn">gn</A>&quot; does not select the whole <A HREF="pattern.html#pattern">pattern</A> when
            it's the last one in the text. (KeyboardFire)
Solution:   Check if the search fails. (Christian Brabandt, closes #1683)
Files:      src/search.c, src/testdir/test_gn.vim

Patch 8.0.0628 (after 8.0.0626)
Problem:    Cursor disappears after silent <A HREF="map.html#mapping">mapping</A>. (Ramel Eshed)
Solution:   Do restore the cursor when <A HREF="motion.html#it">it</A> was changed, but don't change <A HREF="motion.html#it">it</A> in
            the first place for a silent <A HREF="map.html#mapping">mapping</A>.
Files:      src/getchar.c


Patch 8.0.0629 (after 8.0.0611)
Problem:    Checking for ambiguous width is not working. (Hirohito Higashi)
Solution:   Reset &quot;starting&quot; earlier.
Files:      src/main.c

Patch 8.0.0630
Problem:    The <A HREF="repeat.html#:global">:global</A> command does not work recursively, which makes <A HREF="motion.html#it">it</A>
            difficult to execute a command on a line where one <A HREF="pattern.html#pattern">pattern</A> matches
            and another does not match. (Miles Cranmer)
Solution:   Allow for recursion if <A HREF="motion.html#it">it</A> is for only one line. (closes #1760)
Files:      src/ex_cmds.c, src/testdir/test_global.vim, runtime/doc/repeat.txt

Patch 8.0.0631
Problem:    <A HREF="if_perl.html#Perl">Perl</A> 5.26 also needs S_TOPMARK and S_POPMARK defined.
Solution:   Define the <A HREF="eval.html#functions">functions</A> when needed. (Jesin, closes #1748)
Files:      src/if_perl.xs

Patch 8.0.0632
Problem:    The <A HREF="gui.html#quotestar">quotestar</A> test is still a bit flaky.
Solution:   Kill any existing server to make the retry work.  Wait for the
            <A HREF="sponsor.html#register">register</A> to be filled.
Files:      src/testdir/test_quotestar.vim

Patch 8.0.0633
Problem:    The <A HREF="remote.html#client-server">client-server</A> test is still a bit flaky.
Solution:   Wait a bit for the <A HREF="gui.html#GUI">GUI</A> to start.  Check that the version number
            can be obtained.
Files:      src/testdir/test_clientserver.vim

Patch 8.0.0634
Problem:    Cannot easily get to the last <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A>.
Solution:   Add &quot;<A HREF="motion.html#$">$</A>&quot; <A HREF="motion.html#as">as</A> a value for the &quot;nr&quot; argument of <A HREF="builtin.html#getqflist()">getqflist()</A> and
            <A HREF="builtin.html#setqflist()">setqflist()</A>. (Yegappan Lakshmanan)
Files:      runtime/doc/eval.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.0635
Problem:    When <A HREF="options.html#'ignorecase'">'ignorecase'</A> is set <A HREF="usr_41.html#script">script</A> detection is inaccurate.
Solution:   Enforce matching <A HREF="change.html#case">case</A> for text. (closes #1753)
Files:      runtime/scripts.vim

Patch 8.0.0636
Problem:    When reading the <A HREF="undo.html#undo">undo</A> file fails may use uninitialized data.
Solution:   Always clear the buffer on failure.
Files:      src/undo.c

Patch 8.0.0637
Problem:    Crash when using some version of <A HREF="gui_x11.html#GTK">GTK</A> 3.
Solution:   Add #ifdefs around incrementing the menu index. (Kazunobu
            Kuriyama)
Files:      src/gui_gtk.c

Patch 8.0.0638
Problem:    Cannot build with new MSVC version VS2017.
Solution:   Change the compiler arguments. (Leonardo Valeri Manera,
	    closes #1731, closes #1747)
Files:      src/GvimExt/Makefile, src/Make_mvc.mak

Patch 8.0.0639
Problem:    The cursor position is set to the last position in a new commit
            message.
Solution:   Don't set the position if the <A HREF="filetype.html#filetype">filetype</A> matches &quot;commit&quot;.
            (Christian Brabandt)
Files:      runtime/defaults.vim

Patch 8.0.0640
Problem:    Mismatch between help and actual message for &quot;<A HREF="syntax.html#:syn">:syn</A> conceal&quot;.
Solution:   Change the message to match the help. (Ken Takata)
Files:      src/syntax.c

Patch 8.0.0641
Problem:    Cannot set a separate highlighting for the current line in the
            <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="windows.html#window">window</A>.
Solution:   Add QuickFixLine. (anishsane, closes #1755)
Files:      src/option.c, src/quickfix.c, src/screen.c, src/syntax.c,
            src/vim.h, runtime/doc/options.txt, runtime/doc/quickfix.txt

Patch 8.0.0642
Problem:    <A HREF="builtin.html#writefile()">writefile()</A> continues after detecting an error.
Solution:   Bail out <A HREF="motion.html#as">as</A> soon <A HREF="motion.html#as">as</A> an error is detected. (suggestions by Nikolai
            Pavlov, closes #1476)
Files:      src/evalfunc.c, src/testdir/test_writefile.vim

Patch 8.0.0643
Problem:    When <A HREF="options.html#'hlsearch'">'hlsearch'</A> is set and matching with the last search <A HREF="pattern.html#pattern">pattern</A>
            is very slow, Vim becomes unusable.  Cannot quit search by
            pressing <A HREF="pattern.html#CTRL-C">CTRL-C</A>.
Solution:   When the search times out set a flag and don't try again.  Check
            for timeout and <A HREF="pattern.html#CTRL-C">CTRL-C</A> in <A HREF="pattern.html#NFA">NFA</A> loop that adds states.
Files:      src/screen.c, src/ex_cmds.c, src/quickfix.c, src/regexp.c,
            src/proto/regexp.pro, src/regexp.h, src/search.c,
            src/proto/search.pro, src/syntax.c, src/regexp_nfa.c, src/spell.c,
            src/tag.c, src/gui.c, src/edit.c, src/evalfunc.c, src/ex_docmd.c,
            src/ex_getln.c, src/normal.c

Patch 8.0.0644
Problem:    There is no test for <A HREF="options.html#'hlsearch'">'hlsearch'</A> timing out.
Solution:   Add a test.
Files:      src/testdir/test_hlsearch.vim

Patch 8.0.0645
Problem:    The new <A HREF="pattern.html#regexp">regexp</A> engine does not give an error for using a back
            reference where <A HREF="motion.html#it">it</A> is not allowed. (Dominique Pelle)
Solution:   Check the back reference like the old engine. (closes #1774)
Files:      src/regexp.c, src/regexp_nfa.c, src/testdir/test_hlsearch.vim,
            src/testdir/test_statusline.vim,
            src/testdir/test_regexp_latin1.vim

Patch 8.0.0646
Problem:    The hlsearch test fails on fast systems.
Solution:   Make the search <A HREF="pattern.html#pattern">pattern</A> slower.  Fix that the old <A HREF="pattern.html#regexp">regexp</A> engine
            doesn't timeout properly.
Files:      src/regexp.c, src/testdir/test_hlsearch.vim

Patch 8.0.0647
Problem:    <A HREF="autocmd.html#Syntax">Syntax</A> highlighting can cause a freeze.
Solution:   Apply <A HREF="options.html#'redrawtime'">'redrawtime'</A> to <A HREF="syntax.html#syntax">syntax</A> highlighting, per <A HREF="windows.html#window">window</A>.
Files:      src/structs.h, src/screen.c, src/syntax.c, src/normal.c,
            src/regexp.c, src/proto/syntax.pro, src/testdir/test_syntax.vim,
            runtime/doc/options.txt

Patch 8.0.0648
Problem:    Possible use of NULL pointer if buflist_new() returns NULL.
            (Coverity)
Solution:   Check for NULL pointer in set_bufref().
Files:      src/buffer.c

Patch 8.0.0649
Problem:    When opening a help file the <A HREF="filetype.html#filetype">filetype</A> is set several times.
Solution:   When setting the <A HREF="filetype.html#filetype">filetype</A> to the same value from a <A HREF="options.html#modeline">modeline</A>, don't
            trigger <A HREF="autocmd.html#FileType">FileType</A> <A HREF="autocmd.html#autocommands">autocommands</A>.  Don't set the <A HREF="filetype.html#filetype">filetype</A> to &quot;help&quot;
            when it's already set correctly.
Files:      src/ex_cmds.c, src/option.c, runtime/filetype.vim

Patch 8.0.0650
Problem:    For extra help files the <A HREF="filetype.html#filetype">filetype</A> is set more than once.
Solution:   In *.txt files check that there is no help file modline.
Files:      runtime/filetype.vim

Patch 8.0.0651 (after 8.0.0649)
Problem:    Build failure without the auto command feature.
Solution:   Add #ifdef. (closes #1782)
Files:      src/ex_cmds.c

Patch 8.0.0652
Problem:    <A HREF="mbyte.html#Unicode">Unicode</A> information is outdated.
Solution:   Update to <A HREF="mbyte.html#Unicode">Unicode</A> 10. (Christian Brabandt)
Files:      runtime/tools/unicode.vim, src/mbyte.c

Patch 8.0.0653
Problem:    The default highlight for QuickFixLine does not work for several
            color schemes. (Manas Thakur)
Solution:   Make the default use the old color. (closes #1780)
Files:      src/syntax.c

Patch 8.0.0654
Problem:    Text found after <A HREF="eval.html#:endfunction">:endfunction</A> is silently ignored.
Solution:   Give a warning if <A HREF="options.html#'verbose'">'verbose'</A> is set.  When &#124; or \n are used,
            execute the text <A HREF="motion.html#as">as</A> a command.
Files:      src/testdir/test_vimscript.vim, src/userfunc.c,
            runtime/doc/eval.txt

Patch 8.0.0655
Problem:    Not <A HREF="starting.html#easy">easy</A> to make sure a function does not exist.
Solution:   Add ! <A HREF="motion.html#as">as</A> an optional argument to :delfunc.
Files:      src/userfunc.c, src/ex_cmds.h, src/testdir/test_vimscript.vim

Patch 8.0.0656
Problem:    Cannot use ! after some user commands.
Solution:   Properly check for existing command. (Hirohito Higashi)
Files:      src/ex_docmd.c, src/testdir/test_vimscript.vim

Patch 8.0.0657
Problem:    Cannot get and set <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A> items.
Solution:   Add the &quot;items&quot; argument to <A HREF="builtin.html#getqflist()">getqflist()</A> and <A HREF="builtin.html#setqflist()">setqflist()</A>. (Yegappan
            Lakshmanan)
Files:      runtime/doc/eval.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.0658
Problem:    Spell test is old style.
Solution:   Turn the <A HREF="spell.html#spell">spell</A> test into a new style test (pschuh, closes #1778)
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test58.in, src/testdir/test58.ok,
            src/testdir/test_spell.vim

Patch 8.0.0659
Problem:    No test for <A HREF="syntax.html#conceal">conceal</A> mode.
Solution:   Add a <A HREF="syntax.html#conceal">conceal</A> mode test. (Dominique Pelle, closes #1783)
Files:      runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_syntax.vim

Patch 8.0.0660
Problem:    Silent <A HREF="usr_90.html#install">install</A> on <A HREF="os_win32.html#MS-Windows">MS-Windows</A> does show a <A HREF="gui_w32.html#dialog">dialog</A>.
Solution:   Add /SD to the default choice. (allburov, closes #1772)
Files:      nsis/gvim.nsi

Patch 8.0.0661
Problem:    Recognizing urxvt mouse codes does not work well.
Solution:   Recognize &quot;Esc[*M&quot; and &quot;Esc[*m&quot;. (Maurice Bos, closes #1486)
Files:      src/keymap.h, src/misc2.c, src/os_unix.c, src/term.c

Patch 8.0.0662 (after 8.0.0659)
Problem:    Stray FIXME for fixed problem.
Solution:   Remove the comment. (Dominique Pelle)
Files:      src/testdir/test_syntax.vim

Patch 8.0.0663
Problem:    Giving an error message only when <A HREF="options.html#'verbose'">'verbose'</A> set is unexpected.
Solution:   Give a warning message instead.
Files:      src/message.c, src/proto/message.pro, src/userfunc.c,
            src/testdir/test_vimscript.vim, runtime/doc/eval.txt

Patch 8.0.0664 (after 8.0.0661)
Problem:    Mouse does not work in <A HREF="syntax.html#tmux">tmux</A>. (lilydjwg)
Solution:   Add flag for SGR release being present.
Files:      src/term.c

Patch 8.0.0665 (after 8.0.0661)
Problem:    Warning for uninitialized variable. (Tony Mechelynck)
Solution:   Initialize <A HREF="motion.html#it">it</A>.
Files:      src/term.c

Patch 8.0.0666
Problem:    Dead for loop. (Coverity)
Solution:   Remove the for loop.
Files:      src/term.c

Patch 8.0.0667
Problem:    Memory access error when command follows <A HREF="eval.html#:endfunction">:endfunction</A>. (Nikolai
            Pavlov)
Solution:   Make memory handling in <A HREF="eval.html#:function">:function</A> straightforward. (closes #1793)
Files:      src/userfunc.c, src/testdir/test_vimscript.vim

Patch 8.0.0668 (after 8.0.0660)
Problem:    Nsis installer <A HREF="usr_41.html#script">script</A> does not work. (Christian Brabandt)
Solution:   Fix the <A HREF="syntax.html#syntax">syntax</A> of /SD.
Files:      nsis/gvim.nsi

Patch 8.0.0669
Problem:    In <A HREF="insert.html#Insert">Insert</A> mode, <A HREF="motion.html#CTRL-N">CTRL-N</A> at start of the buffer does not work
            correctly. (zuloloxi)
Solution:   Wrap around the start of the buffer. (Christian Brabandt)
Files:      src/edit.c, src/testdir/test_popup.vim

Patch 8.0.0670
Problem:    Can't use <A HREF="builtin.html#input()">input()</A> in a <A HREF="builtin.html#timer">timer</A> callback. (Cosmin Popescu)
Solution:   Reset vgetc_busy and set timer_busy. (Ozaki Kiichi, closes #1790,
            closes #1129)
Files:      src/evalfunc.c, src/ex_cmds2.c, src/globals.h,
            src/testdir/test_timers.vim

Patch 8.0.0671
Problem:    When a function invoked from a <A HREF="builtin.html#timer">timer</A> calls <A HREF="builtin.html#confirm()">confirm()</A> and the user
            types <A HREF="pattern.html#CTRL-C">CTRL-C</A> then Vim hangs.
Solution:   Reset typebuf_was_filled. (Ozaki Kiichi, closes #1791)
Files:      src/getchar.c

Patch 8.0.0672
Problem:    Third item of <A HREF="builtin.html#synconcealed()">synconcealed()</A> changes too often. (Dominique Pelle)
Solution:   Reset the sequence number at the start of each line.
Files:      src/syntax.c, src/testdir/test_syntax.vim, runtime/doc/eval.txt

Patch 8.0.0673 (after 8.0.0673)
Problem:    Build failure without <A HREF="syntax.html#conceal">conceal</A> feature.
Solution:   Add #ifdef.
Files:      src/syntax.c

Patch 8.0.0674 (after 8.0.0670)
Problem:    Cannot build with <A HREF="eval.html#eval">eval</A> but without <A HREF="builtin.html#timers">timers</A>.
Solution:   Add #ifdef (John Marriott)
Files:      src/evalfunc.c

Patch 8.0.0675
Problem:    <A HREF="options.html#'colorcolumn'">'colorcolumn'</A> has a higher priority than <A HREF="options.html#'hlsearch'">'hlsearch'</A>, <A HREF="motion.html#it">it</A> should be
            the other way around. (Nazri Ramliy)
Solution:   Change the priorities. (LemonBoy, closes #1794)
Files:      src/screen.c, src/testdir/test_listlbr_utf8.vim

Patch 8.0.0676
Problem:    Crash when closing the <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="windows.html#window">window</A> in a <A HREF="autocmd.html#FileType">FileType</A> <A HREF="autocmd.html#autocommand">autocommand</A>
            that triggers when the <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="windows.html#window">window</A> is opened.
Solution:   Save the new value before triggering the <A HREF="autocmd.html#OptionSet">OptionSet</A> <A HREF="autocmd.html#autocommand">autocommand</A>.
            Add the &quot;starting&quot; flag to <A HREF="testing.html#test_override()">test_override()</A> to make the text work.
Files:      src/evalfunc.c, src/option.c, runtime/doc/eval.txt

Patch 8.0.0677
Problem:    Setting <A HREF="options.html#'filetype'">'filetype'</A> internally may cause the current buffer and
            <A HREF="windows.html#window">window</A> to change unexpectedly.
Solution:   Set curbuf_lock. (closes #1734)
Files:      src/quickfix.c, src/ex_cmds.c, src/ex_getln.c,
            src/testdir/test_quickfix.vim

Patch 8.0.0678
Problem:    When <A HREF="options.html#'equalalways'">'equalalways'</A> is set and closing a <A HREF="windows.html#window">window</A> in a separate
            frame, not all <A HREF="windows.html#window">window</A> sizes are adjusted. (Glacambre)
Solution:   Resize all <A HREF="windows.html#windows">windows</A> if the new current <A HREF="windows.html#window">window</A> is not in the same
            frame <A HREF="motion.html#as">as</A> the closed <A HREF="windows.html#window">window</A>. (closes #1707)
Files:      src/window.c, src/testdir/test_window_cmd.vim

Patch 8.0.0679 (after 8.0.0678)
Problem:    Using freed memory.
Solution:   Get the parent frame pointer earlier.
Files:      src/window.c

Patch 8.0.0680 (after 8.0.0612)
Problem:    Plugins in start <A HREF="repeat.html#packages">packages</A> are sourced <A HREF="if_cscop.html#twice">twice</A>. (mseplowitz)
Solution:   Use the unmodified runtime path when loading plugins (test by Ingo
            Karkat, closes #1801)
Files:      src/testdir/test_startup.vim, src/main.c, src/ex_cmds2.c,
            src/proto/ex_cmds2.pro

Patch 8.0.0681
Problem:    Unnamed <A HREF="sponsor.html#register">register</A> only contains the last deleted text when
            appending deleted text to a <A HREF="sponsor.html#register">register</A>. (Wolfgang Jeltsch)
Solution:   Only set y_previous when not using y_append. (Christian Brabandt)
Files:      src/ops.c, src/testdir/test_put.vim

Patch 8.0.0682
Problem:    No test for <A HREF="builtin.html#synIDtrans()">synIDtrans()</A>.
Solution:   Add a test. (Dominique Pelle, closes #1796)
Files:      src/testdir/test_syntax.vim

Patch 8.0.0683
Problem:    When using a visual bell there is no delay, causing the flash to
            be very short, possibly unnoticeable.  Also, the flash and the
            beep can lockup the UI when repeated often.
Solution:   Do the delay in Vim or flush the output before the delay. Limit the
            bell to once per half a second. (Ozaki Kiichi, closes #1789)
Files:      src/misc1.c, src/proto/term.pro, src/term.c

Patch 8.0.0684
Problem:    Old style tests are not nice.
Solution:   Turn two tests into new style. (pschuh, closes #1797)
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test82.in, src/testdir/test82.ok,
            src/testdir/test90.in, src/testdir/test90.ok,
            src/testdir/test_sha256.vim, src/testdir/test_utf8_comparisons.vim

Patch 8.0.0685
Problem:    When making backups is disabled and conversion with iconv fails
            the written file is truncated. (Luo Chen)
Solution:   First try converting the file and write the file only when <A HREF="motion.html#it">it</A> did
            not fail. (partly by Christian Brabandt)
Files:      src/fileio.c, src/testdir/test_writefile.vim

Patch 8.0.0686
Problem:    When typing <A HREF="various.html#CTRL-L">CTRL-L</A> in a <A HREF="windows.html#window">window</A> that's not the first one, another
            redraw will happen later. (Christian Brabandt)
Solution:   Reset must_redraw after calling screenclear().
Files:      src/screen.c

Patch 8.0.0687
Problem:    Minor issues related to <A HREF="quickfix.html#quickfix">quickfix</A>.
Solution:   Set the proper return status for all cases in <A HREF="builtin.html#setqflist()">setqflist()</A> and at
            test cases for this.  Move the &quot;adding&quot; flag outside of
            FEAT_WINDOWS. Minor update to the <A HREF="builtin.html#setqflist()">setqflist()</A> help text. (Yegappan
            Lakshmanan)
Files:      runtime/doc/eval.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.0688
Problem:    Cannot resize the <A HREF="windows.html#window">window</A> in a <A HREF="autocmd.html#FileType">FileType</A> <A HREF="autocmd.html#autocommand">autocommand</A>. (Ingo Karkat)
Solution:   Add the CMDWIN flag to <A HREF="windows.html#:resize">:resize</A>. (test by Ingo Karkat,
            closes #1804)
Files:      src/ex_cmds.h, src/testdir/test_quickfix.vim

Patch 8.0.0689
Problem:    The ~ character is not escaped when adding to the search <A HREF="pattern.html#pattern">pattern</A>
            with <A HREF="various.html#CTRL-L">CTRL-L</A>. (Ramel Eshed)
Solution:   Escape the character. (Christian Brabandt)
Files:      src/ex_getln.c, src/testdir/test_search.vim

Patch 8.0.0690
Problem:    Compiler warning on non-Unix system.
Solution:   Add #ifdef. (John Marriott)
Files:      src/term.c

Patch 8.0.0691
Problem:    Compiler warning without the linebreak feature.
Solution:   Add #ifdef. (John Marriott)
Files:      src/edit.c

Patch 8.0.0692
Problem:    Using <A HREF="editing.html#CTRL-G">CTRL-G</A> with <A HREF="options.html#'incsearch'">'incsearch'</A> and ? goes in the wrong direction.
            (Ramel Eshed)
Solution:   Adjust search_start. (Christian Brabandt)
Files:      src/ex_getln.c, src/testdir/test_search.vim

Patch 8.0.0693
Problem:    No <A HREF="terminal.html#terminal">terminal</A> emulator support.  Cannot properly run commands in the
            <A HREF="gui.html#GUI">GUI</A>.  Cannot run a <A HREF="channel.html#job">job</A> interactively with an ssh connection.
Solution:   Very early implementation of the <A HREF="terminal.html#:terminal">:terminal</A> command.  Includes
            libvterm converted to ANSI C.  Many parts still missing.
Files:      src/feature.h, src/Makefile, src/configure.ac, src/auto/configure,
            src/config.mk.in, src/config.h.in, src/terminal.c, src/structs.h,
            src/ex_cmdidxs.h, src/ex_docmd.c,  src/option.c, src/option.h,
            src/evalfunc.c, src/proto/terminal.pro, src/proto.h,
            runtime/doc/terminal.txt, runtime/doc/Makefile, Filelist,
            src/libvterm/.bzrignore, src/libvterm/.gitignore,
            src/libvterm/LICENSE, src/libvterm/README, src/libvterm/Makefile,
            src/libvterm/tbl2inc_c.pl, src/libvterm/vterm.pc.in,
            src/libvterm/bin/unterm.c, src/libvterm/bin/vterm-ctrl.c,
            src/libvterm/bin/vterm-dump.c, src/libvterm/doc/URLs,
            src/libvterm/doc/seqs.txt, src/libvterm/include/vterm.h,
            src/libvterm/include/vterm_keycodes.h,
            src/libvterm/src/encoding.c,
            src/libvterm/src/encoding/DECdrawing.inc,
            src/libvterm/src/encoding/DECdrawing.tbl,
            src/libvterm/src/encoding/uk.inc,
            src/libvterm/src/encoding/uk.tbl, src/libvterm/src/keyboard.c,
            src/libvterm/src/mouse.c, src/libvterm/src/parser.c,
            src/libvterm/src/pen.c, src/libvterm/src/rect.h,
            src/libvterm/src/screen.c, src/libvterm/src/state.c,
            src/libvterm/src/unicode.c, src/libvterm/src/utf8.h,
            src/libvterm/src/vterm.c, src/libvterm/src/vterm_internal.h,
            src/libvterm/t/02parser.test, src/libvterm/t/03encoding_utf8.test,
            src/libvterm/t/10state_putglyph.test,
            src/libvterm/t/11state_movecursor.test,
            src/libvterm/t/12state_scroll.test,
            src/libvterm/t/13state_edit.test,
            src/libvterm/t/14state_encoding.test,
            src/libvterm/t/15state_mode.test,
            src/libvterm/t/16state_resize.test,
            src/libvterm/t/17state_mouse.test,
            src/libvterm/t/18state_termprops.test,
            src/libvterm/t/20state_wrapping.test,
            src/libvterm/t/21state_tabstops.test,
            src/libvterm/t/22state_save.test,
            src/libvterm/t/25state_input.test,
            src/libvterm/t/26state_query.test,
            src/libvterm/t/27state_reset.test,
            src/libvterm/t/28state_dbl_wh.test,
            src/libvterm/t/29state_fallback.test, src/libvterm/t/30pen.test,
            src/libvterm/t/40screen_ascii.test,
            src/libvterm/t/41screen_unicode.test,
            src/libvterm/t/42screen_damage.test,
            src/libvterm/t/43screen_resize.test,
            src/libvterm/t/44screen_pen.test,
            src/libvterm/t/45screen_protect.test,
            src/libvterm/t/46screen_extent.test,
            src/libvterm/t/47screen_dbl_wh.test,
            src/libvterm/t/48screen_termprops.test,
            src/libvterm/t/90vttest_01-movement-1.test,
            src/libvterm/t/90vttest_01-movement-2.test,
            src/libvterm/t/90vttest_01-movement-3.test,
            src/libvterm/t/90vttest_01-movement-4.test,
            src/libvterm/t/90vttest_02-screen-1.test,
            src/libvterm/t/90vttest_02-screen-2.test,
            src/libvterm/t/90vttest_02-screen-3.test,
            src/libvterm/t/90vttest_02-screen-4.test,
            src/libvterm/t/92lp1640917.test, src/libvterm/t/harness.c,
            src/libvterm/t/run-test.pl

Patch 8.0.0694
Problem:    Building in shadow directory does not work.  Running Vim fails.
Solution:   Add the new libvterm directory.  Add missing change in command
            <A HREF="eval.html#list">list</A>.
Files:      src/Makefile, src/ex_cmds.h

Patch 8.0.0695
Problem:    Missing dependencies breaks parallel make.
Solution:   Add dependencies for terminal.o.
Files:      src/Makefile

Patch 8.0.0696
Problem:    The .inc files are missing in git. (Nazri Ramliy)
Solution:   Remove the .inc line from .gitignore.
Files:      src/libvterm/.gitignore

Patch 8.0.0697
Problem:    Recorded key sequences may become invalid.
Solution:   Add back KE_SNIFF removed in 7.4.1433. Use fixed numbers for the
            key_extra enum.
Files:      src/keymap.h

Patch 8.0.0698
Problem:    When a <A HREF="builtin.html#timer">timer</A> uses &quot;:pyeval&quot; or another <A HREF="if_pyth.html#Python">Python</A> command and <A HREF="motion.html#it">it</A>
            happens to be triggered while <A HREF="starting.html#exiting">exiting</A> a Crash may happen.
            (Ricky Zhou)
Solution:   Avoid running a <A HREF="if_pyth.html#Python">Python</A> command after python_end() was called.
            Do not trigger <A HREF="builtin.html#timers">timers</A> while <A HREF="starting.html#exiting">exiting</A>.  (closes #1824)
Files:      src/if_python.c, src/if_python3.c, src/ex_cmds2.c

Patch 8.0.0699
Problem:    Checksum tests are not actually run.
Solution:   Add the tests to the <A HREF="eval.html#list">list</A>. (Dominique Pelle, closes #1819)
Files:      src/testdir/test_alot.vim, src/testdir/test_alot_utf8.vim

Patch 8.0.0700
Problem:    Segfault with <A HREF="autocmd.html#QuitPre">QuitPre</A> <A HREF="autocmd.html#autocommand">autocommand</A> closes the <A HREF="windows.html#window">window</A>. (Marek)
Solution:   Check that the <A HREF="windows.html#window">window</A> pointer is still valid. (Christian Brabandt,
            closes #1817)
Files:      src/testdir/test_tabpage.vim, src/ex_docmd.c

Patch 8.0.0701
Problem:    System test failing when using <A HREF="options.html#X11">X11</A> forwarding.
Solution:   Set $XAUTHORITY before <A HREF="change.html#changing">changing</A> <A HREF="options.html#$HOME">$HOME</A>. (closes #1812)
            Also use a better check for the exit value.
Files:      src/testdir/setup.vim, src/testdir/test_system.vim

Patch 8.0.0702
Problem:    An error in a <A HREF="builtin.html#timer">timer</A> can make Vim unusable.
Solution:   Don't set the error flag or exception from a <A HREF="builtin.html#timer">timer</A>.  Stop a <A HREF="builtin.html#timer">timer</A>
            if <A HREF="motion.html#it">it</A> causes an error 3 out of 3 times.  Discard an exception
            caused inside a <A HREF="builtin.html#timer">timer</A>.
Files:      src/ex_cmds2.c, src/structs.h, src/testdir/test_timers.vim,
            runtime/doc/eval.txt

Patch 8.0.0703
Problem:    Illegal memory access with empty <A HREF="autocmd.html#:doau">:doau</A> command.
Solution:   Check the event for being out of range. (James McCoy)
Files:      src/testdir/test_autocmd.vim, src/fileio.c

Patch 8.0.0704
Problem:    Problems with <A HREF="autocmd.html#autocommands">autocommands</A> when opening help.
Solution:   Avoid using invalid &quot;varp&quot; value.  Allow using <A HREF="windows.html#:wincmd">:wincmd</A> if buffer
            is locked. (closes #1806, closes #1804)
Files:      src/option.c, src/ex_cmds.h

Patch 8.0.0705 (after 8.0.0702)
Problem:    Crash when there is an error in a <A HREF="builtin.html#timer">timer</A> callback. (Aron Griffis,
            Ozaki Kiichi)
Solution:   Check did_throw before discarding an exception.  NULLify
            current_exception when no longer valid.
Files:      src/ex_eval.c, src/ex_cmds2.c

Patch 8.0.0706
Problem:    Crash when cancelling the cmdline <A HREF="windows.html#window">window</A> in <A HREF="intro.html#Ex">Ex</A> mode. (James McCoy)
Solution:   Do not set cmdbuff to NULL, make <A HREF="motion.html#it">it</A> empty.
Files:      src/ex_getln.c

Patch 8.0.0707
Problem:    Freeing wrong memory when manipulating <A HREF="windows.html#buffers">buffers</A> in <A HREF="autocmd.html#autocommands">autocommands</A>.
            (James McCoy)
Solution:   Also set the w_s pointer if w_buffer was NULL.
Files:      src/ex_cmds.c

Patch 8.0.0708
Problem:    Some tests are old style.
Solution:   Change a few tests from old style to new style. (pschuh,
            closes #1813)
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_ming.mak,
            src/testdir/Make_vms.mms, src/testdir/main.aap,
            src/testdir/test23.in, src/testdir/test23.ok,
            src/testdir/test24.in, src/testdir/test24.ok,
            src/testdir/test26.in, src/testdir/test26.ok,
            src/testdir/test67.in, src/testdir/test67.ok,
            src/testdir/test75.in, src/testdir/test75.ok,
            src/testdir/test97.in, src/testdir/test97.ok,
            src/testdir/test_comparators.in, src/testdir/test_comparators.ok,
            src/testdir/test_comparators.vim,
            src/testdir/test_escaped_glob.vim,
            src/testdir/test_exec_while_if.vim,
            src/testdir/test_exists_autocmd.vim, src/testdir/test_getcwd.in,
            src/testdir/test_getcwd.ok, src/testdir/test_getcwd.vim,
            src/testdir/test_maparg.vim, src/testdir/test_plus_arg_edit.vim,
            src/testdir/test_regex_char_classes.vim

Patch 8.0.0709
Problem:    Libvterm cannot use vsnprintf(), <A HREF="motion.html#it">it</A> does not exist in C90.
Solution:   Use vim_vsnprintf() instead.
Files:      src/message.c, src/Makefile, src/proto.h, src/evalfunc.c,
            src/netbeans.c, src/libvterm/src/vterm.c

Patch 8.0.0710
Problem:    A <A HREF="channel.html#job">job</A> that writes to a buffer clears command line completion.
            (Ramel Eshed)
Solution:   Do not redraw while showing the completion menu.
Files:      src/screen.c

Patch 8.0.0711 (after 8.0.0710)
Problem:    Cannot build without the wildmenu feature.
Solution:   Add #ifdef
Files:      src/screen.c

Patch 8.0.0712
Problem:    The <A HREF="terminal.html#terminal">terminal</A> implementation is incomplete.
Solution:   Add the 'termkey' option.
Files:      src/option.c, src/option.h, src/structs.h

Patch 8.0.0713 (after 8.0.0712)
Problem:    'termkey' option not fully implemented.
Solution:   Add initialisation.
Files:      src/option.c

Patch 8.0.0714
Problem:    When a <A HREF="builtin.html#timer">timer</A> causes a command line redraw the &quot; that is displayed
            for <A HREF="undo.html#CTRL-R">CTRL-R</A> goes missing.
Solution:   Remember an extra character to display.
Files:      src/ex_getln.c

Patch 8.0.0715
Problem:    Writing to the wrong buffer if the buffer that a <A HREF="channel.html#channel">channel</A> writes to
            was closed.
Solution:   Do not write to a buffer that was unloaded.
Files:      src/channel.c, src/testdir/test_channel.vim,
            src/testdir/test_channel_write.py

Patch 8.0.0716
Problem:    Not <A HREF="starting.html#easy">easy</A> to start Vim cleanly without <A HREF="change.html#changing">changing</A> the <A HREF="starting.html#viminfo">viminfo</A> file.
            Not possible to know whether the <A HREF="starting.html#-i">-i</A> command line flag was used.
Solution:   Add the <A HREF="starting.html#--clean">--clean</A> command line argument.  Add the <A HREF="options.html#'viminfofile'">'viminfofile'</A>
            option.  Add &quot;<A HREF="starting.html#-u">-u</A> DEFAULTS&quot;.
Files:      src/main.c, runtime/doc/starting.txt, src/option.c, src/option.h,
            src/ex_cmds.c, src/globals.h, runtime/doc/options.txt

Patch 8.0.0717
Problem:    Terminal feature not included in <A HREF="various.html#:version">:version</A> output.
Solution:   Add <A HREF="various.html#+terminal">+terminal</A> or -terminal.
Files:      src/version.c, src/terminal.c

Patch 8.0.0718
Problem:    Output of <A HREF="channel.html#job">job</A> in <A HREF="terminal.html#terminal">terminal</A> is not displayed.
Solution:   Connect the <A HREF="channel.html#job">job</A> output to the <A HREF="terminal.html#terminal">terminal</A>.
Files:      src/channel.c, src/proto/channel.pro, src/terminal.c,
            src/proto/terminal.pro, src/channel.c, src/proto/channel.pro,
            src/evalfunc.c, src/screen.c, src/proto/screen.pro

Patch 8.0.0719
Problem:    Build failure without <A HREF="various.html#+terminal">+terminal</A> feature.
Solution:   Add #ifdefs.
Files:      src/screen.c, src/channel.c

Patch 8.0.0720
Problem:    Unfinished <A HREF="map.html#mapping">mapping</A> not displayed when running <A HREF="builtin.html#timer">timer</A>.
Solution:   Also use the extra_char while waiting for a <A HREF="map.html#mapping">mapping</A> and <A HREF="digraph.html#digraph">digraph</A>.
            (closes #1844)
Files:      src/ex_getln.c

Patch 8.0.0721
Problem:    <A HREF="editing.html#:argedit">:argedit</A> can only have one argument.
Solution:   Allow for multiple arguments. (Christian Brabandt)
Files:      runtime/doc/editing.txt, src/ex_cmds.h, src/ex_cmds2.c,
            src/testdir/test_arglist.vim

Patch 8.0.0722
Problem:    Screen is messed by <A HREF="builtin.html#timer">timer</A> up at <A HREF="builtin.html#inputlist()">inputlist()</A> prompt.
Solution:   Set state to ASKMORE. (closes #1843)
Files:      src/misc1.c

Patch 8.0.0723 (after 8.0.0721)
Problem:    Arglist test fails if file name <A HREF="change.html#case">case</A> is ignored.
Solution:   Wipe existing <A HREF="windows.html#buffers">buffers</A>, check for fname_case property.
Files:      src/testdir/test_arglist.vim

Patch 8.0.0724
Problem:    The message for yanking doesn't indicate the <A HREF="sponsor.html#register">register</A>.
Solution:   Show the <A HREF="sponsor.html#register">register</A> name in the &quot;<A HREF="pattern.html#N">N</A> lines yanked&quot; message. (LemonBoy,
            closes #1803, closes #1809)
Files:      src/ops.c, src/Makefile, src/testdir/test_registers.vim,
            src/testdir/Make_all.mak

Patch 8.0.0725
Problem:    A <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> does not handle keyboard input.
Solution:   Add terminal_loop().  &quot;:term bash -i&quot; sort of works now.
Files:      src/main.c, src/terminal.c, src/proto/terminal.pro, src/normal.c

Patch 8.0.0726
Problem:    Translations cleanup <A HREF="usr_41.html#script">script</A> is too conservative.
Solution:   Also delete untranslated <A HREF="message.html#messages">messages</A>.
Files:      src/po/cleanup.vim

Patch 8.0.0727
Problem:    Message about what <A HREF="sponsor.html#register">register</A> to <A HREF="change.html#yank">yank</A> into is not translated.
            (LemonBoy)
Solution:   Add _().
Files:      src/ops.c

Patch 8.0.0728
Problem:    The <A HREF="terminal.html#terminal">terminal</A> structure is never freed.
Solution:   Free the structure and unreference what <A HREF="motion.html#it">it</A> contains.
Files:      src/terminal.c, src/buffer.c, src/proto/terminal.pro,
            src/channel.c, src/proto/channel.pro, src/evalfunc.c

Patch 8.0.0729
Problem:    The help for the <A HREF="terminal.html#terminal">terminal</A> configure option is wrong.
Solution:   Change &quot;Disable&quot; to &quot;Enable&quot;. (E Kawashima, closes #1849)
            Improve alignment.
Files:      src/configure.ac, src/auto/configure

Patch 8.0.0730
Problem:    Terminal feature only supports Unix-like systems.
Solution:   Prepare for adding an <A HREF="os_win32.html#MS-Windows">MS-Windows</A> implementation.
Files:      src/terminal.c

Patch 8.0.0731
Problem:    Cannot build the <A HREF="terminal.html#terminal">terminal</A> feature on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Add the Makefile changes. (Yasuhiro Matsumoto, closes #1851)
Files:      src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.0.0732
Problem:    When updating a buffer for a callback the modeless selection is
            lost.
Solution:   Do not insert or delete screen lines when redrawing for a callback
            and there is a modeless selection.
Files:      src/screen.c

Patch 8.0.0733
Problem:    Can only add entries to one <A HREF="eval.html#list">list</A> in the <A HREF="quickfix.html#quickfix">quickfix</A> stack.
Solution:   Move state <A HREF="eval.html#variables">variables</A> from qf_list_T to qf_list_T. (Yegappan
            Lakshmanan)
Files:      src/quickfix.c

Patch 8.0.0734
Problem:    The <A HREF="usr_41.html#script">script</A> to check translations can be improved.
Solution:   Restore the <A HREF="starting.html#view">view</A> when no <A HREF="message.html#errors">errors</A> are found.  Check for matching
            line break at the end of the message. (Christian Brabandt)
Files:      src/po/check.vim

Patch 8.0.0735
Problem:    There is no way to notice that the <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="windows.html#window">window</A> contents has
            changed.
Solution:   Increment <A HREF="eval.html#b:changedtick">b:changedtick</A> when updating the <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="windows.html#window">window</A>.
            (Yegappan Lakshmanan)
Files:      runtime/doc/quickfix.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.0736
Problem:    The <A HREF="autocmd.html#OptionSet">OptionSet</A> <A HREF="autocmd.html#autocommand">autocommand</A> event is not triggered when entering
            <A HREF="diff.html#diff">diff</A> mode.
Solution:   use set_option_value() instead of setting the option directly.
            Change the tests from old to new style. (Christian Brabandt)
Files:      src/diff.c, src/testdir/Make_all.mak, src/Makefile,
            src/testdir/test_autocmd.vim, src/testdir/test_autocmd_option.in,
            src/testdir/test_autocmd_option.ok

Patch 8.0.0737
Problem:    Crash when <A HREF="options.html#X11">X11</A> selection is very big.
Solution:   Use static items instead of allocating them.  Add callbacks.
            (Ozaki Kiichi)
Files:      src/testdir/shared.vim, src/testdir/test_quotestar.vim,
            src/ui.c

Patch 8.0.0738
Problem:    Cannot use the mouse to resize <A HREF="windows.html#window">window</A> while the focus is in a
            <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Recognize nice mouse events in the <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.  A few more
            fixes for the <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Files:      src/terminal.c

Patch 8.0.0739
Problem:    Terminal resizing doesn't work well.
Solution:   Resize the <A HREF="terminal.html#terminal">terminal</A> to the Vim <A HREF="windows.html#window">window</A> and the other way around.
            Avoid <A HREF="map.html#mapping">mapping</A> typed keys.  Set the environment properly.
Files:      src/terminal.c, src/os_unix.c, src/structs.h

Patch 8.0.0740
Problem:    Cannot resize a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> by the command running in <A HREF="motion.html#it">it</A>.
Solution:   Add support for the <A HREF="windows.html#window">window</A> size <A HREF="intro.html#escape">escape</A> sequence.  Make BS work.
Files:      src/terminal.c, src/libvterm/src/state.c

Patch 8.0.0741
Problem:    Cannot build with HPUX.
Solution:   Rename envbuf_TERM to envbuf_Term. (John Marriott)
Files:      src/os_unix.c

Patch 8.0.0742
Problem:    Terminal feature does not work on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Use libvterm and libwinpty on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>. (Yasuhiro Matsumoto)
Files:      src/INSTALLpc.txt, src/Make_cyg_ming.mak, src/channel.c,
            src/proto/channel.pro, src/terminal.c

Patch 8.0.0743
Problem:    The 'termsize' option can be set to an invalid value.
Solution:   Check the 'termsize' option to be valid.
Files:      src/option.c, src/testdir/gen_opt_test.vim

Patch 8.0.0744
Problem:    A <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> uses pipes instead of a pty.
Solution:   Add pty support.
Files:      src/structs.h, src/os_unix.c, src/terminal.c, src/channel.c,
            src/proto/os_unix.pro, src/os_win32.c, src/proto/os_win32.pro

Patch 8.0.0745
Problem:    <A HREF="mbyte.html#multibyte">multibyte</A> characters in a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> are not displayed
            properly.
Solution:   Set the unused screen characters. (Yasuhiro Matsumoto, closes
            #1857)
Files:      src/terminal.c

Patch 8.0.0746
Problem:    When :term fails the <A HREF="channel.html#job">job</A> is not properly cleaned up.
Solution:   Free the <A HREF="terminal.html#terminal">terminal</A>. Handle a <A HREF="channel.html#job">job</A> that failed to start. (closes
            #1858)
Files:      src/os_unix.c, src/channel.c, src/terminal.c

Patch 8.0.0747
Problem:    <A HREF="terminal.html#:terminal">:terminal</A> without an argument doesn't work.
Solution:   Use the <A HREF="options.html#'shell'">'shell'</A> option. (Yasuhiro Matsumoto, closes #1860)
Files:      src/terminal.c

Patch 8.0.0748
Problem:    When running Vim in a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> <A HREF="motion.html#it">it</A> does not detect the right
            number of colors available.
Solution:   Detect the version <A HREF="eval.html#string">string</A> that libvterm returns.  Pass the number
            of colors in $COLORS.
Files:      src/term.c, src/os_unix.c

Patch 8.0.0749
Problem:    Some <A HREF="mbyte.html#unicode">unicode</A> <A HREF="digraph.html#digraphs">digraphs</A> are hard to remember.
Solution:   Add alternatives with a backtick. (Chris Harding, closes #1861)
Files:      src/digraph.c

Patch 8.0.0750
Problem:    OpenPTY missing in non-GUI build.
Solution:   Always include pty.c, add an #ifdef to skip over the contents.
Files:      src/pty.c, src/Makefile

Patch 8.0.0751 (after 8.0.0750)
Problem:    OpenPTY missing with some combination of features. (Kazunobu
            Kuriyama)
Solution:   Adjust #ifdef.  Also include pty.pro when needed.
Files:      src/pty.c, src/misc2.c, src/proto.h

Patch 8.0.0752
Problem:    Build fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Change #ifdef for set_color_count().
Files:      src/term.c

Patch 8.0.0753
Problem:    A <A HREF="channel.html#job">job</A> running in a <A HREF="terminal.html#terminal">terminal</A> does not get notified of changes in
            the <A HREF="terminal.html#terminal">terminal</A> size.
Solution:   Use ioctl() and SIGWINCH to report the <A HREF="terminal.html#terminal">terminal</A> size.
Files:      src/terminal.c, src/os_unix.c, src/proto/os_unix.pro

Patch 8.0.0754
Problem:    Terminal <A HREF="windows.html#window">window</A> does not support colors.
Solution:   Lookup the color attribute.
Files:      src/terminal.c, src/syntax.c, src/proto/syntax.pro

Patch 8.0.0755
Problem:    Terminal <A HREF="windows.html#window">window</A> does not have colors in the <A HREF="gui.html#GUI">GUI</A>.
Solution:   Lookup the <A HREF="gui.html#GUI">GUI</A> color.
Files:      src/terminal.c, src/syntax.c, src/proto/syntax.pro, src/term.c,
            src/proto/term.pro, src/gui_gtk_x11.c, src/proto/gui_gtk_x11.pro,
            src/gui_x11.c, src/proto/gui_x11.pro, src/gui_mac.c,
            src/proto/gui_mac.pro, src/gui_photon.c, src/proto/gui_photon.pro,
            src/gui_w32.c, src/proto/gui_w32.pro,

Patch 8.0.0756
Problem:    Cannot build libvterm with MSVC.
Solution:   Add an MSVC Makefile to libvterm. (Yasuhiro Matsumoto, closes
            #1865)
Files:      src/INSTALLpc.txt, src/Make_mvc.mak, src/libvterm/Makefile.msc

Patch 8.0.0757
Problem:    Libvterm MSVC Makefile not included in the <A HREF="intro.html#distribution">distribution</A>.
Solution:   Add the file to the <A HREF="eval.html#list">list</A>.
Files:      Filelist

Patch 8.0.0758
Problem:    Possible crash when using a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Check for NULL pointers. (Yasuhiro Matsumoto, closes #1864)
Files:      src/terminal.c

Patch 8.0.0759
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="terminal.html#terminal">terminal</A> does not adjust size to the Vim <A HREF="windows.html#window">window</A> size.
Solution:   Add a call to winpty_set_size(). (Yasuhiro Matsumoto, closes #1863)
Files:      src/terminal.c

Patch 8.0.0760
Problem:    Terminal <A HREF="windows.html#window">window</A> colors wrong with <A HREF="options.html#'termguicolors'">'termguicolors'</A>.
Solution:   Add <A HREF="options.html#'termguicolors'">'termguicolors'</A> support.
Files:      src/terminal.c, src/syntax.c, src/proto/syntax.pro

Patch 8.0.0761
Problem:    Options of a buffer for a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> are not set properly.
Solution:   Add &quot;<A HREF="terminal.html#terminal">terminal</A>&quot; value for <A HREF="options.html#'buftype'">'buftype'</A>.  Make <A HREF="options.html#'buftype'">'buftype'</A> and
            <A HREF="options.html#'bufhidden'">'bufhidden'</A> not depend on the <A HREF="quickfix.html#quickfix">quickfix</A> feature.
            Also set the buffer name and show &quot;running&quot; or &quot;finished&quot; in the
            <A HREF="windows.html#window">window</A> title.
Files:      src/option.c, src/terminal.c, src/proto/terminal.pro,
            runtime/doc/options.txt, src/quickfix.c, src/proto/quickfix.pro,
            src/structs.h, src/buffer.c, src/ex_docmd.c, src/fileio.c,
            src/channel.c

Patch 8.0.0762
Problem:    ml_get error with <A HREF="windows.html#:psearch">:psearch</A> in buffer without a name. (Dominique
            Pelle)
Solution:   Use the buffer number instead of the file name.  Check the cursor
            position.
Files:      src/search.c, src/testdir/test_preview.vim, src/Makefile,
            src/testdir/Make_all.mak

Patch 8.0.0763
Problem:    Libvterm can be improved.
Solution:   Various small improvements, more comments.
Files:      src/libvterm/README, src/libvterm/include/vterm.h,
            src/libvterm/include/vterm_keycodes.h,
            src/libvterm/src/keyboard.c, src/libvterm/src/parser.c,
            src/libvterm/src/screen.c, src/libvterm/src/state.c

Patch 8.0.0764
Problem:    'termkey' does not work yet.
Solution:   Implement 'termkey'.
Files:      src/terminal.c, src/option.c, src/proto/option.pro

Patch 8.0.0765
Problem:    Build fails with tiny features.
Solution:   Adjust #ifdef. (John Marriott)
Files:      src/option.c, src/option.h

Patch 8.0.0766
Problem:    Option test fails with <A HREF="various.html#+terminal">+terminal</A> feature.
Solution:   Fix using the right option when checking the value.
Files:      src/option.c

Patch 8.0.0767
Problem:    Build failure with Athena and <A HREF="gui_x11.html#Motif">Motif</A>.
Solution:   Move local variable declarations. (Kazunobu Kuriyama)
Files:      src/gui_x11.c

Patch 8.0.0768
Problem:    Terminal <A HREF="windows.html#window">window</A> status shows &quot;[Scratch]&quot;.
Solution:   Show &quot;[Terminal]&quot; when no title was set. (Yasuhiro Matsumoto)
            Store the <A HREF="terminal.html#terminal">terminal</A> title that vterm sends and use <A HREF="motion.html#it">it</A>.  Update the
            special buffer name.  (closes #1869)
Files:      src/terminal.c, src/proto/terminal.pro, src/buffer.c

Patch 8.0.0769
Problem:    Build problems with <A HREF="terminal.html#terminal">terminal</A> on <A HREF="os_win32.html#MS-Windows">MS-Windows</A> using MSVC.
Solution:   Remove stdbool.h dependency. Only use ScreenLinesUC when <A HREF="motion.html#it">it</A> was
            allocated. Fix typos. (Ken Takata)
Files:      src/libvterm/bin/vterm-ctrl.c, runtime/doc/terminal.txt,
            src/INSTALLpc.txt, src/Make_cyg_ming.mak, src/Make_mvc.mak,
            src/libvterm/Makefile.msc, src/terminal.c

Patch 8.0.0770
Problem:    Compiler warning for missing field initializer.
Solution:   Add two more values. (Yegappan Lakshmanan)
Files:      src/libvterm/src/encoding.c

Patch 8.0.0771
Problem:    Cursor in a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> not always updated in the <A HREF="gui.html#GUI">GUI</A>.
Solution:   Call gui_update_cursor(). (Yasuhiro Matsumoto, closes #1868)
Files:      src/terminal.c

Patch 8.0.0772
Problem:    Other stdbool.h dependencies in libvterm.
Solution:   Remove the dependency and use TRUE/FALSE/int. (Ken Takata)
Files:      src/libvterm/include/vterm.h, src/libvterm/src/mouse.c,
            src/libvterm/src/pen.c, src/libvterm/t/harness.c,
            src/libvterm/bin/unterm.c

Patch 8.0.0773
Problem:    Mixing 32 and 64 bit libvterm builds fails.
Solution:   Use OUTDIR. (Ken Takata)
Files:      src/Make_cyg_ming.mak, src/Make_mvc.mak, src/libvterm/Makefile.msc

Patch 8.0.0774
Problem:    Build failure without the <A HREF="mbyte.html#multibyte">multibyte</A> feature on HPUX.
Solution:   Move #ifdefs. (John Marriott)
Files:      src/term.c

Patch 8.0.0775
Problem:    In a <A HREF="terminal.html#terminal">terminal</A> the cursor is updated too often.
Solution:   Only flush when needed. (Yasuhiro Matsumoto).  Remember whether the
            cursor is visible. (closes #1873)
Files:      src/terminal.c

Patch 8.0.0776
Problem:    Function prototypes missing without the <A HREF="quickfix.html#quickfix">quickfix</A> feature. (Tony
            Mechelynck)
Solution:   Move non-quickfix <A HREF="eval.html#functions">functions</A> to buffer.c.
Files:      src/buffer.c, src/proto/buffer.pro, src/quickfix.c,
            src/proto/quickfix.pro

Patch 8.0.0777
Problem:    Compiler warnings with 64 bit compiler.
Solution:   Add type casts. (Mike Williams)
Files:      src/libvterm/src/pen.c, src/libvterm/src/state.c, src/terminal.c

Patch 8.0.0778
Problem:    In a <A HREF="terminal.html#terminal">terminal</A> the cursor may be hidden and screen updating lags
            behind. (Nazri Ramliy)
Solution:   Switch the cursor on and flush output when needed. (Ozaki Kiichi)
Files:      src/terminal.c

Patch 8.0.0779
Problem:    :term without an argument uses empty buffer name but runs the
            shell.
Solution:   Change the command to the shell earlier.
Files:      src/terminal.c

Patch 8.0.0780
Problem:    Build failure on Travis.
Solution:   Set <A HREF="intro.html#distribution">distribution</A> explicitly. Use <A HREF="if_lua.html#Lua">Lua</A> and <A HREF="if_ruby.html#Ruby">Ruby</A> dev. (Ken Takata,
            closes #1884)
Files:      .travis.yml

Patch 8.0.0781
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: Memory leak when using <A HREF="terminal.html#:terminal">:terminal</A>.
Solution:   Handle failures properly. (Ken Takata)
Files:      src/terminal.c

Patch 8.0.0782
Problem:    Using freed memory in <A HREF="quickfix.html#quickfix">quickfix</A> code. (Dominique Pelle)
Solution:   Handle a help <A HREF="windows.html#window">window</A> differently. (Yegappan Lakshmanan)
Files:      src/buffer.c, src/proto/buffer.pro, src/quickfix.c,
            src/testdir/test_quickfix.vim, src/ex_cmds.c, src/window.c

Patch 8.0.0783
Problem:    <A HREF="eval.html#Job">Job</A> of <A HREF="terminal.html#terminal">terminal</A> may be freed too early.
Solution:   Increment <A HREF="channel.html#job">job</A> refcount. (Yasuhiro Matsumoto)
Files:      src/terminal.c

Patch 8.0.0784
Problem:    <A HREF="eval.html#Job">Job</A> of <A HREF="terminal.html#terminal">terminal</A> may be garbage collected.
Solution:   Set copyID on <A HREF="channel.html#job">job</A> in <A HREF="terminal.html#terminal">terminal</A>. (Ozaki Kiichi)
Files:      src/terminal.c, src/eval.c, src/proto/terminal.pro

Patch 8.0.0785
Problem:    Wildcards are not expanded for <A HREF="terminal.html#:terminal">:terminal</A>.
Solution:   Add FILES to the command flags. (Yasuhiro Matsumoto, closes #1883)
            Also complete commands.
Files:      src/ex_cmds.h, src/ex_docmd.c

Patch 8.0.0786
Problem:    Build failures on Travis.
Solution:   Go back to precise temporarily.  Disable coverage with clang.
Files:      .travis.yml

Patch 8.0.0787
Problem:    Cannot send <A HREF="index.html#CTRL-W">CTRL-W</A> command to <A HREF="terminal.html#terminal">terminal</A> <A HREF="channel.html#job">job</A>.
Solution:   Make <A HREF="index.html#CTRL-W">CTRL-W</A> . a prefix for sending a key to the <A HREF="channel.html#job">job</A>.
Files:      src/terminal.c, runtime/doc/terminal.txt, src/option.c

Patch 8.0.0788
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: cannot build with <A HREF="terminal.html#terminal">terminal</A> feature.
Solution:   Move set_ref_in_term(). (Ozaki Kiichi)
Files:      src/terminal.c

Patch 8.0.0789
Problem:    When splitting a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> where the <A HREF="terminal.html#terminal">terminal</A> follows the
            size of the <A HREF="windows.html#window">window</A> doesn't work.
Solution:   Use the size of the smallest <A HREF="windows.html#window">window</A>. (Yasuhiro Matsumoto, closes
            #1885)
Files:      src/terminal.c

Patch 8.0.0790
Problem:    MSVC compiler warning for strncpy in libvterm.
Solution:   Add a define to stop the warnings. (Mike Williams)
Files:      src/Make_mvc.mak

Patch 8.0.0791
Problem:    Terminal colors depend on the system.
Solution:   Use the highlight color lookup tables.
Files:      src/syntax.c, src/proto/syntax.pro, src/terminal.c

Patch 8.0.0792
Problem:    Spell test leaves files behind.
Solution:   Delete the files.
Files:      src/testdir/test_spell.vim

Patch 8.0.0793
Problem:    Using wrong <A HREF="terminal.html#terminal">terminal</A> name for <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   When <A HREF="options.html#'term'">'term'</A> starts with &quot;xterm&quot; use <A HREF="motion.html#it">it</A> for $TERM in a <A HREF="terminal.html#terminal">terminal</A>
            <A HREF="windows.html#window">window</A>.
Files:      src/os_unix.c

Patch 8.0.0794
Problem:    The <A HREF="usr_41.html#script">script</A> to check translations fails if there is more than one
            NL in one line.
Solution:   Count the number of NL characters.  Make <A HREF="builtin.html#count()">count()</A> accept a <A HREF="eval.html#string">string</A>.
Files:      src/po/check.vim, src/evalfunc.c, runtime/doc/eval.txt,
            src/testdir/test_functions.vim

Patch 8.0.0795
Problem:    Terminal feature does not build with older MSVC.
Solution:   Do not use stdint.h.
Files:      src/libvterm/include/vterm.h

Patch 8.0.0796
Problem:    No coverage on Travis with clang.
Solution:   Use a specific coveralls version. (Ozaki Kiichi, closes #1888)
Files:      .travis.yml

Patch 8.0.0797
Problem:    Finished <A HREF="channel.html#job">job</A> in <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> is not handled.
Solution:   Add the scrollback buffer.  Use <A HREF="motion.html#it">it</A> to fill the buffer when the <A HREF="channel.html#job">job</A>
            has ended.
Files:      src/terminal.c, src/screen.c, src/proto/terminal.pro,
            src/channel.c, src/os_unix.c, src/buffer.c

Patch 8.0.0798
Problem:    No highlighting in a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> with a finished <A HREF="channel.html#job">job</A>.
Solution:   Highlight the text.
Files:      src/terminal.c, src/proto/terminal.pro, src/screen.c, src/undo.c

Patch 8.0.0799
Problem:    Missing semicolon.
Solution:   Add <A HREF="motion.html#it">it</A>.
Files:      src/terminal.c

Patch 8.0.0800
Problem:    Terminal <A HREF="windows.html#window">window</A> scrollback contents is wrong.
Solution:   Fix handling of <A HREF="mbyte.html#multibyte">multibyte</A> characters (Yasuhiro Matsumoto) Handle
            empty lines correctly. (closes #1891)
Files:      src/terminal.c

Patch 8.0.0801
Problem:    The <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> title sometimes still says &quot;running&quot; even
            though the <A HREF="channel.html#job">job</A> has finished.
Solution:   Also consider the <A HREF="channel.html#job">job</A> finished when the <A HREF="channel.html#channel">channel</A> has been closed.
Files:      src/terminal.c

Patch 8.0.0802
Problem:    After a <A HREF="channel.html#job">job</A> exits the last line in the <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> does not
            get color attributes.
Solution:   Fix off-by-one error.
Files:      src/terminal.c

Patch 8.0.0803
Problem:    Terminal <A HREF="windows.html#window">window</A> <A HREF="eval.html#functions">functions</A> not yet implemented.
Solution:   Implement several <A HREF="eval.html#functions">functions</A>. Add a first test. (Yasuhiro
            Matsumoto, closes #1871)
Files:      runtime/doc/eval.txt, src/Makefile, src/evalfunc.c,
            src/proto/evalfunc.pro, src/proto/terminal.pro, src/terminal.c,
            src/testdir/Make_all.mak, src/testdir/test_terminal.vim

Patch 8.0.0804
Problem:    Running tests fails when stdin is /dev/null. (James McCoy)
Solution:   Do not bail out from getting input if the <A HREF="starting.html#--not-a-term">--not-a-term</A> argument
            was given. (closes #1460)
Files:      src/eval.c, src/evalfunc.c

Patch 8.0.0805
Problem:    <A HREF="gui.html#GUI">GUI</A> test fails with gnome2.
Solution:   Set <A HREF="options.html#$HOME">$HOME</A> to an existing directory.
Files:      src/testdir/setup.vim, src/testdir/runtest.vim

Patch 8.0.0806
Problem:    Tests may try to create XfakeHOME <A HREF="if_cscop.html#twice">twice</A>.
Solution:   Avoid loading setup.vim <A HREF="if_cscop.html#twice">twice</A>.
Files:      src/testdir/setup.vim

Patch 8.0.0807
Problem:    Terminal <A HREF="windows.html#window">window</A> can't handle mouse buttons. (Hirohito Higashi)
Solution:   Implement mouse buttons and many other keys.  Ignore the ones that
            are not implemented.
Files:      src/terminal.c

Patch 8.0.0808
Problem:    Cannot build with <A HREF="terminal.html#terminal">terminal</A> feature and DEBUG defined. (Christian
            Brabandt)
Solution:   Use DEBUG_LOG3().
Files:      src/libvterm/src/pen.c

Patch 8.0.0809
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: tests hang.
Solution:   Delete the XfakeHOME directory.
Files:      src/testdir/Make_dos.mak, src/testdir/Make_ming.mak

Patch 8.0.0810
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: tests still hang.
Solution:   Only create the XfakeHOME directory if <A HREF="motion.html#it">it</A> does not exist yet.
Files:      src/testdir/setup.vim

Patch 8.0.0811
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: test_expand_dllpath fails.
Solution:   Change backslashes to forward slashes
Files:      src/testdir/test_expand_dllpath.vim

Patch 8.0.0812
Problem:    Terminal <A HREF="windows.html#window">window</A> colors <A HREF="intro.html#shift">shift</A> when <A HREF="options.html#'number'">'number'</A> is set. (Nazri Ramliy)
Solution:   Use vcol instead of col.
Files:      src/screen.c

Patch 8.0.0813
Problem:    Cannot use Vim commands in a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> while the <A HREF="channel.html#job">job</A> is
            running.
Solution:   Implement Terminal <A HREF="intro.html#Normal">Normal</A> mode.
Files:      src/terminal.c, src/proto/terminal.pro, src/main.c, src/screen.c,
            src/normal.c, src/option.c, runtime/doc/terminal.txt

Patch 8.0.0814 (after 8.0.0757)
Problem:    File in Filelist does not exist.
Solution:   Remove the line.
Files:      Filelist

Patch 8.0.0815
Problem:    Terminal <A HREF="windows.html#window">window</A> not correctly updated when <A HREF="options.html#'statusline'">'statusline'</A> invokes
            &quot;<A HREF="various.html#:sleep">:sleep</A>&quot;. (Nikolay Pavlov)
Solution:   Clear got_int.  Repeat redrawing when needed.
Files:      src/terminal.c

Patch 8.0.0816
Problem:    Crash when using invalid buffer number.
Solution:   Check for NULL buffer. (Yasuhiro Matsumoto, closes #1899)
Files:      src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.0817
Problem:    Cannot get the line of a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> at the cursor.
Solution:   Make the row argument optional. (Yasuhiro Matsumoto, closes #1898)
Files:      runtime/doc/eval.txt, src/evalfunc.c, src/terminal.c

Patch 8.0.0818
Problem:    Cannot get the cursor position of a <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Add <A HREF="terminal.html#term_getcursor()">term_getcursor()</A>.
Files:      runtime/doc/eval.txt, src/evalfunc.c, src/terminal.c,
            src/proto/terminal.pro

Patch 8.0.0819
Problem:    After <A HREF="change.html#changing">changing</A> current <A HREF="windows.html#window">window</A> the cursor position in the <A HREF="terminal.html#terminal">terminal</A>
            <A HREF="windows.html#window">window</A> is not updated.
Solution:   Set w_wrow, w_wcol and w_valid.
Files:      src/terminal.c

Patch 8.0.0820
Problem:    <A HREF="gui.html#GUI">GUI</A>: cursor in <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> lags behind.
Solution:   call gui_update_cursor() under different conditions. (Ozaki
            Kiichi, closes #1893)
Files:      src/terminal.c

Patch 8.0.0821
Problem:    Cannot get the title and status of a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Implement <A HREF="terminal.html#term_gettitle()">term_gettitle()</A> and <A HREF="terminal.html#term_getstatus()">term_getstatus()</A>.
Files:      src/evalfunc.c, src/terminal.c, src/proto/terminal.pro,
            runtime/doc/eval.txt

Patch 8.0.0822
Problem:    Test_with_partial_callback is a tiny bit flaky.
Solution:   Add <A HREF="motion.html#it">it</A> to the <A HREF="eval.html#list">list</A> of flaky tests.
Files:      src/testdir/runtest.vim

Patch 8.0.0823
Problem:    Cannot paste text into a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Make <A HREF="index.html#CTRL-W">CTRL-W</A> &quot; work.
Files:      src/terminal.c

Patch 8.0.0824
Problem:    In Terminal mode the cursor and screen gets redrawn when the <A HREF="channel.html#job">job</A>
            produces output.
Solution:   Check for tl_terminal_mode. (partly by Yasuhiro Matsumoto, closes
            #1904)
Files:      src/terminal.c

Patch 8.0.0825
Problem:    Not <A HREF="starting.html#easy">easy</A> to see that a <A HREF="windows.html#window">window</A> is a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Add StatusLineTerm highlighting.
Files:      src/option.c, src/vim.h, src/screen.c, src/syntax.c

Patch 8.0.0826
Problem:    Cannot use text <A HREF="index.html#objects">objects</A> in Terminal mode.
Solution:   Check for pending <A HREF="motion.html#operator">operator</A> and <A HREF="visual.html#Visual">Visual</A> mode first. (Yasuhiro
            Matsumoto, closes #1906)
Files:      src/normal.c

Patch 8.0.0827
Problem:    Coverity: could leak pty file descriptor, theoretically.
Solution:   If <A HREF="channel.html#channel">channel</A> is NULL, free the file descriptors.
Files:      src/os_unix.c

Patch 8.0.0828
Problem:    Coverity: may dereference NULL pointer.
Solution:   Bail out if calloc_state() returns NULL.
Files:      src/regexp_nfa.c

Patch 8.0.0829
Problem:    A <A HREF="channel.html#job">job</A> running in a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> cannot easily communicate with
            the Vim <A HREF="motion.html#it">it</A> is running in.
Solution:   Pass <A HREF="eval.html#v:servername">v:servername</A> in an environment variable. (closes #1908)
Files:      src/os_unix.c

Patch 8.0.0830
Problem:    Translating <A HREF="message.html#messages">messages</A> is not ideal.
Solution:   Add a remark about obsolete <A HREF="message.html#messages">messages</A>.  Use msgfmt in the check
            <A HREF="usr_41.html#script">script</A>. (Christian Brabandt)
Files:      src/po/README.txt, src/po/check.vim

Patch 8.0.0831 (after 8.0.0791)
Problem:    With 8 colors the <A HREF="syntax.html#bold">bold</A> attribute is not set properly.
Solution:   Move setting HL_TABLE() out of lookup_color. (closes #1901)
Files:      src/syntax.c, src/proto/syntax.pro, src/terminal.c

Patch 8.0.0832
Problem:    Terminal function arguments are not consistent.
Solution:   Use one-based instead of zero-based rows and cols.  Use &quot;<A HREF="repeat.html#.">.</A>&quot; for
            the current row.
Files:      src/terminal.c, runtime/doc/eval.txt

Patch 8.0.0833
Problem:    Terminal test fails.
Solution:   Update the row argument to one based.
Files:      src/testdir/test_terminal.vim

Patch 8.0.0834
Problem:    Can't build without the <A HREF="remote.html#client-server">client-server</A> feature.
Solution:   Add #ifdef.
Files:      src/os_unix.c

Patch 8.0.0835
Problem:    Translations check with msgfmt does not work.
Solution:   Add a space before the file name.
Files:      src/po/check.vim

Patch 8.0.0836
Problem:    When a <A HREF="terminal.html#terminal">terminal</A> buffer is changed <A HREF="motion.html#it">it</A> can still be accidentally
            abandoned.
Solution:   When making a change reset the <A HREF="options.html#'buftype'">'buftype'</A> option.
Files:      src/terminal.c, src/testdir/test_terminal.vim, src/option.c

Patch 8.0.0837
Problem:    Signs can be drawn on top of console <A HREF="message.html#messages">messages</A>.
Solution:   don't redraw at a prompt or when scrolled up. (Christian Brabandt,
            closes #1907)
Files:      src/screen.c

Patch 8.0.0838
Problem:    Buffer hangs around when <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> is closed.
Solution:   When the <A HREF="channel.html#job">job</A> has ended wipe out a <A HREF="terminal.html#terminal">terminal</A> buffer when the <A HREF="windows.html#window">window</A>
            is closed.
Files:      src/buffer.c, src/terminal.c, src/proto/terminal.pro,
            src/testdir/test_terminal.vim

Patch 8.0.0839
Problem:    Cannot kill a <A HREF="channel.html#job">job</A> in a <A HREF="terminal.html#terminal">terminal</A> with <A HREF="pattern.html#CTRL-C">CTRL-C</A>.
Solution:   Set the controlling tty and send SIGINT. (closes #1910)
Files:      src/os_unix.c, src/terminal.c, src/proto/os_unix.pro

Patch 8.0.0840
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: fopen() and open() prototypes <A HREF="diff.html#do">do</A> not match the ones in
            the system header file.  Can't build without FEAT_MBYTE.
Solution:   Add &quot;const&quot;.  Move <A HREF="map.html#macro">macro</A> to after including protoo.h.
Files:      src/os_win32.c, src/proto/os_win32.pro, src/macros.h, src/vim.h

Patch 8.0.0841
Problem:    <A HREF="terminal.html#term_getline()">term_getline()</A> may cause a crash.
Solution:   Check that the row is valid. (Hirohito Higashi)
Files:      src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.0842
Problem:    Using slave pty after closing <A HREF="motion.html#it">it</A>.
Solution:   Do the ioctl() before dup'ing <A HREF="motion.html#it">it</A>.
Files:      src/os_unix.c

Patch 8.0.0843
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: compiler warning for signed/unsigned.
Solution:   Add type cast. (Yasuhiro Matsumoto, closes #1912)
Files:      src/terminal.c

Patch 8.0.0844
Problem:    Wrong function prototype because of missing static.
Solution:   Add &quot;static&quot;.
Files:      src/os_win32.c, src/proto/os_win32.pro

Patch 8.0.0845
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: missing semicolon in <A HREF="terminal.html#terminal">terminal</A> code.
Solution:   Add <A HREF="motion.html#it">it</A>. (Naruhiko Nishino, closes #1923)
Files:      src/terminal.c

Patch 8.0.0846
Problem:    Cannot get the name of the pty of a <A HREF="channel.html#job">job</A>.
Solution:   Add the &quot;tty&quot; entry to the <A HREF="channel.html#job">job</A> info. (Ozaki Kiichi, closes #1920)
            Add the <A HREF="terminal.html#term_gettty()">term_gettty()</A> function.
Files:      runtime/doc/eval.txt, src/channel.c, src/os_unix.c, src/structs.h,
            src/terminal.c, src/proto/terminal.pro, src/evalfunc.c,
            src/testdir/test_terminal.vim

Patch 8.0.0847
Problem:    <A HREF="editing.html#:argadd">:argadd</A> without argument can't handle space in file name. (Harm te
            Hennepe)
Solution:   Escape the space. (Yasuhiro Matsumoto, closes #1917)
Files:      src/ex_cmds2.c, src/proto/ex_cmds2.pro,
            src/testdir/test_arglist.vim

Patch 8.0.0848
Problem:    Using multiple ch_log <A HREF="eval.html#functions">functions</A> is clumsy.
Solution:   Use variable arguments. (Ozaki Kiichi, closes #1919)
Files:      src/channel.c, src/message.c, src/proto/channel.pro,
            src/terminal.c

Patch 8.0.0849
Problem:    Crash when <A HREF="channel.html#job">job</A> exit callback wipes the <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Check for b_term to be NULL.  (Yasuhiro Matsumoto, closes #1922)
            Implement <A HREF="options.html#options">options</A> for <A HREF="terminal.html#term_start()">term_start()</A> to be able to test.
            Make <A HREF="terminal.html#term_wait()">term_wait()</A> more reliable.
Files:      src/terminal.c, src/testdir/test_terminal.vim, src/channel.c

Patch 8.0.0850
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: Depending on the console encoding, an error message
            that is given during <A HREF="starting.html#startup">startup</A> may be broken.
Solution:   Convert the message to the console codepage. (Yasuhiro Matsumoto,
            closes #1927)
Files:      src/message.c

Patch 8.0.0851
Problem:    <A HREF="options.html#'smartindent'">'smartindent'</A> is used even when <A HREF="options.html#'indentexpr'">'indentexpr'</A> is set.
Solution:   Ignore <A HREF="options.html#'smartindent'">'smartindent'</A> when <A HREF="options.html#'indentexpr'">'indentexpr'</A> is set. (Hirohito Higashi)
Files:      src/misc1.c, src/testdir/test_smartindent.vim

Patch 8.0.0852 (after 8.0.0850)
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: possible crash when giving a message on <A HREF="starting.html#startup">startup</A>.
Solution:   Initialize length. (Yasuhiro Matsumoto, closes #1931)
Files:      src/message.c

Patch 8.0.0853
Problem:    Crash when running <A HREF="terminal.html#terminal">terminal</A> with unknown command.
Solution:   Check &quot;term&quot; not to be NULL. (Yasuhiro Matsumoto, closes #1932)
Files:      src/terminal.c

Patch 8.0.0854
Problem:    No redraw after <A HREF="terminal.html#terminal">terminal</A> was closed.
Solution:   Set typebuf_was_filled. (Yasuhiro Matsumoto, closes #1925, closes
            #1924)  Add function to check for <A HREF="message.html#messages">messages</A> even when input is
            available.
Files:      src/terminal.c, src/os_unix.c, src/proto/os_unix.pro,
            src/os_win32.c, src/proto/os_win32.pro, src/os_mswin.c

Patch 8.0.0855
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: can't get tty name of <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Use the winpty process number. (Yasuhiro Matsumoto, closes #1929)
Files:      src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.0856
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="terminal.html#terminal">terminal</A> <A HREF="channel.html#job">job</A> doesn't take <A HREF="options.html#options">options</A>.
Solution:   Call job_set_options(). (Yasuhiro Matsumoto)
Files:      src/terminal.c

Patch 8.0.0857
Problem:    Terminal test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Sleep a fraction of a second.
Files:      src/testdir/test_terminal.vim

Patch 8.0.0858
Problem:    Can exit while a <A HREF="terminal.html#terminal">terminal</A> is still running a <A HREF="channel.html#job">job</A>.
Solution:   Consider a buffer with a running <A HREF="channel.html#job">job</A> like a changed file.
Files:      src/undo.c, src/terminal.c, src/option.h, src/buffer.c,
            src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c, src/normal.c,
            src/window.c, src/testdir/test_terminal.vim

Patch 8.0.0859
Problem:    NULL pointer access when term_free_vterm called <A HREF="if_cscop.html#twice">twice</A>.
Solution:   Return when tl_vterm is NULL. (Yasuhiro Matsumoto, closes #1934)
Files:      src/terminal.c

Patch 8.0.0860
Problem:    There may be side effects when a <A HREF="channel.html#channel">channel</A> appends to a buffer that
            is not the current buffer.
Solution:   Properly switch to another buffer before appending. (Yasuhiro
            Matsumoto, closes #1926, closes #1937)
Files:      src/channel.c, src/buffer.c, src/proto/buffer.pro,
            src/if_py_both.h

Patch 8.0.0861
Problem:    Still many old style tests.
Solution:   Convert several tests to new style. (Yegappan Lakshmanan)
Files:      src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/main.aap, src/testdir/test104.in,
            src/testdir/test104.ok, src/testdir/test22.in,
            src/testdir/test22.ok, src/testdir/test77.in,
            src/testdir/test77.ok, src/testdir/test84.in,
            src/testdir/test84.ok, src/testdir/test9.in, src/testdir/test9.ok,
            src/testdir/test98.in, src/testdir/test98.ok,
            src/testdir/test_autocmd.vim, src/testdir/test_curswant.vim,
            src/testdir/test_file_size.vim, src/testdir/test_let.vim,
            src/testdir/test_lineending.vim, src/testdir/test_scrollbind.vim,
            src/Makefile

Patch 8.0.0862 (after 8.0.0862)
Problem:    File size test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Set fileformat after opening new buffer.  Strip CR.
Files:      src/testdir/test_file_size.vim

Patch 8.0.0863
Problem:    A remote command starting with CTRL-\ <A HREF="motion.html#CTRL-N">CTRL-N</A> does not work in the
            <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>. (Christian <A HREF="change.html#J">J</A>. Robinson)
Solution:   Use CTRL-\ <A HREF="motion.html#CTRL-N">CTRL-N</A> <A HREF="motion.html#as">as</A> a prefix or a <A HREF="intro.html#Normal">Normal</A> mode command.
Files:      src/terminal.c, runtime/doc/terminal.txt

Patch 8.0.0864
Problem:    Cannot specify the name of a <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Add the &quot;term_name&quot; option. (Yasuhiro Matsumoto, closes #1936)
Files:      src/channel.c, src/structs.h, src/terminal.c, runtime/doc/eval.txt

Patch 8.0.0865
Problem:    Cannot build with <A HREF="channel.html#channel">channel</A> but without <A HREF="terminal.html#terminal">terminal</A> feature.
Solution:   Add #ifdef
Files:      src/channel.c

Patch 8.0.0866
Problem:    Solaris also doesn't have MIN and MAX.
Solution:   Define MIN and MAX whenever they are not defined. (Ozaki Kiichi,
            closes #1939)
Files:      src/terminal.c

Patch 8.0.0867
Problem:    When using a <A HREF="channel.html#job">job</A> or <A HREF="channel.html#channel">channel</A> value <A HREF="motion.html#as">as</A> a <A HREF="eval.html#dict">dict</A> value, when turning <A HREF="motion.html#it">it</A>
            into a <A HREF="eval.html#string">string</A> the <A HREF="quotes.html#quotes">quotes</A> are missing.
Solution:   Add <A HREF="quotes.html#quotes">quotes</A> to the <A HREF="channel.html#job">job</A> and <A HREF="channel.html#channel">channel</A> values. (Yasuhiro Matsumoto,
            closes #1930)
Files:      src/list.c, src/eval.c, src/testdir/test_terminal.vim

Patch 8.0.0868
Problem:    Cannot specify the <A HREF="terminal.html#terminal">terminal</A> size on the command line.
Solution:   Use the address range for the <A HREF="terminal.html#terminal">terminal</A> size. (Yasuhiro Matsumoto,
            closes #1941)
Files:      src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.0869
Problem:    <A HREF="eval.html#Job">Job</A> output is sometimes not displayed in a <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Flush output before closing the <A HREF="channel.html#channel">channel</A>.
Files:      src/channel.c, src/terminal.c

Patch 8.0.0870
Problem:    Mouse <A HREF="intro.html#escape">escape</A> codes sent to <A HREF="terminal.html#terminal">terminal</A> unintentionally.
Solution:   Fix libvterm to send mouse codes only when enabled.
Files:      src/terminal.c, src/libvterm/src/mouse.c

Patch 8.0.0871
Problem:    The status line for a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> always has &quot;[+]&quot;.
Solution:   Do make the status line include &quot;[+]&quot; for a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Files:      src/screen.c

Patch 8.0.0872
Problem:    Using mouse scroll while a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> has focus and the mouse
            pointer is on another <A HREF="windows.html#window">window</A> does not work.  Same for focus in a
            non-terminal <A HREF="windows.html#window">window</A> and the mouse pointer is over a <A HREF="terminal.html#terminal">terminal</A>
            <A HREF="windows.html#window">window</A>.
Solution:   Send the scroll action to the right <A HREF="windows.html#window">window</A>.
Files:      src/terminal.c, src/normal.c, src/proto/terminal.pro

Patch 8.0.0873
Problem:    In a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> cannot use CTRL-\ <A HREF="motion.html#CTRL-N">CTRL-N</A> to start <A HREF="visual.html#Visual">Visual</A>
            mode.
Solution:   After CTRL-\ <A HREF="motion.html#CTRL-N">CTRL-N</A> enter <A HREF="terminal.html#Terminal-Normal">Terminal-Normal</A> mode for one command.
Files:      src/main.c, src/terminal.c, src/proto/terminal.pro

Patch 8.0.0874 (after 8.0.0873)
Problem:    Can't build with <A HREF="terminal.html#terminal">terminal</A> feature.
Solution:   Include change to term_use_loop(). (Dominique Pelle)
Files:      src/normal.c

Patch 8.0.0875
Problem:    Crash with weird command sequence. (Dominique Pelle)
Solution:   Use vim_snprintf() instead of STRCPY().
Files:      src/misc1.c

Patch 8.0.0876
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: Backslashes and <A HREF="editing.html#wildcards">wildcards</A> in backticks don't work.
Solution:   Do not handle backslashes inside backticks in the wrong place.
            (Yasuhiro Matsumoto, closes #1942)
Files:      src/os_mswin.c, src/os_win32.c

Patch 8.0.0877
Problem:    Using CTRL-\ <A HREF="motion.html#CTRL-N">CTRL-N</A> in <A HREF="terminal.html#terminal">terminal</A> is inconsistent.
Solution:   Stay in <A HREF="intro.html#Normal">Normal</A> mode.
Files:      src/terminal.c, src/proto/terminal.pro, src/main.c, src/normal.c,
            src/option.c

Patch 8.0.0878
Problem:    No completion for <A HREF="map.html#:mapclear">:mapclear</A>.
Solution:   Add completion (Nobuhiro Takasaki et al. closes #1943)
Files:      runtime/doc/eval.txt, runtime/doc/map.txt, src/ex_docmd.c,
            src/ex_getln.c, src/proto/ex_docmd.pro,
            src/testdir/test_cmdline.vim, src/vim.h

Patch 8.0.0879
Problem:    Crash when shifting with huge number.
Solution:   Check for overflow. (Dominique Pelle, closes #1945)
Files:      src/ops.c, src/testdir/test_visual.vim

Patch 8.0.0880
Problem:    Travis uses an old Ubuntu version.
Solution:   Switch from precise to trusty. (Ken Takata, closes #1897)
Files:      .travis.yml, Filelist, src/testdir/if_ver-1.vim,
            src/testdir/if_ver-2.vim, src/testdir/lsan-suppress.txt

Patch 8.0.0881
Problem:    win32.mak no longer included in Windows SDK.
Solution:   Do not include win32.mak. (Ken Takata)
Files:      src/GvimExt/Makefile, src/Make_mvc.mak

Patch 8.0.0882
Problem:    <A HREF="terminal.html#term_scrape()">term_scrape()</A> and <A HREF="terminal.html#term_getline()">term_getline()</A> require two arguments but <A HREF="motion.html#it">it</A> is
            not enforced.
Solution:   Correct minimal number of arguments. (Hirohito Higashi)  Update
            documentation. (Ken Takata)
Files:      src/evalfunc.c, runtime/doc/eval.txt

Patch 8.0.0883
Problem:    Invalid memory access with nonsensical <A HREF="usr_41.html#script">script</A>.
Solution:   Check &quot;dstlen&quot; being positive. (Dominique Pelle)
Files:      src/misc1.c

Patch 8.0.0884
Problem:    Can't specify the wait time for <A HREF="terminal.html#term_wait()">term_wait()</A>.
Solution:   Add an optional second argument.
Files:      src/evalfunc.c, src/terminal.c, runtime/doc/eval.txt

Patch 8.0.0885
Problem:    Terminal <A HREF="windows.html#window">window</A> scrollback is stored inefficiently.
Solution:   Store the text in the Vim buffer.
Files:      src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.0886
Problem:    Crash when using &quot;:term ls&quot;.
Solution:   Fix line number computation.  Add a test for this.
Files:      src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.0887
Problem:    Can create a logfile in the <A HREF="eval.html#sandbox">sandbox</A>.
Solution:   Disable <A HREF="channel.html#ch_logfile()">ch_logfile()</A> in the <A HREF="eval.html#sandbox">sandbox</A>. (Yasuhiro Matsumoto)
Files:      src/evalfunc.c

Patch 8.0.0888
Problem:    Compiler warnings with 64 bit build.
Solution:   Add type cast of change the type. (Mike Williams)
Files:      src/message.c, src/os_mswin.c, src/os_win32.c

Patch 8.0.0889
Problem:    Gcc gives warnings for uninitialized <A HREF="eval.html#variables">variables</A>. (Tony Mechelynck)
Solution:   Initialize <A HREF="eval.html#variables">variables</A> even though they are not used.
Files:      src/terminal.c

Patch 8.0.0890
Problem:    Still many old style tests.
Solution:   Convert several tests to new style. (Yegappan Lakshmanan)
Files:      src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test103.in, src/testdir/test103.ok,
            src/testdir/test107.in, src/testdir/test107.ok,
            src/testdir/test51.in, src/testdir/test51.ok,
            src/testdir/test91.in, src/testdir/test91.ok,
            src/testdir/test_getvar.vim, src/testdir/test_highlight.vim,
            src/testdir/test_visual.vim, src/testdir/test_window_cmd.vim,
            src/Makefile

Patch 8.0.0891
Problem:    Uninitialized memory use with empty line in <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Initialize growarray earlier. (Yasuhiro Matsumoto, closes #1949)
Files:      src/terminal.c

Patch 8.0.0892
Problem:    When opening a <A HREF="terminal.html#terminal">terminal</A> the pty size doesn't always match.
Solution:   Update the pty size after opening the <A HREF="terminal.html#terminal">terminal</A>. (Ken Takata)
Files:      src/terminal.c

Patch 8.0.0893
Problem:    Cannot get the scroll <A HREF="intro.html#count">count</A> of a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Add <A HREF="terminal.html#term_getscrolled()">term_getscrolled()</A>.
Files:      src/terminal.c, src/proto/terminal.pro, src/evalfunc.c,
            runtime/doc/eval.txt, src/testdir/test_terminal.vim

Patch 8.0.0894
Problem:    There is no test for runtime <A HREF="filetype.html#filetype">filetype</A> detection.
Solution:   Test a <A HREF="eval.html#list">list</A> of <A HREF="filetype.html#filetypes">filetypes</A> from patterns.
Files:      src/testdir/test_filetype.vim, runtime/filetype.vim

Patch 8.0.0895 (after 8.0.0894)
Problem:    Filetype test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Fix file names.
Files:      src/testdir/test_filetype.vim

Patch 8.0.0896
Problem:    Cannot automatically close a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> when the <A HREF="channel.html#job">job</A> ends.
Solution:   Add the ++close argument to :term.  Add the term_finish option to
            <A HREF="terminal.html#term_start()">term_start()</A>. (Yasuhiro Matsumoto, closes #1950)  Also add
            ++open.
Files:      runtime/doc/eval.txt, runtime/doc/terminal.txt, src/channel.c,
            src/structs.h, src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.0897 (after 8.0.0896)
Problem:    Wrong error message for invalid term_finish value
Solution:   Pass the right argument to emsg().
Files:      src/channel.c

Patch 8.0.0898
Problem:    Can't use the alternate screen in a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Initialize the alternate screen. (Yasuhiro Matsumoto, closes
            #1957)  Add <A HREF="terminal.html#term_getaltscreen()">term_getaltscreen()</A>.
Files:      src/libvterm/include/vterm.h, src/terminal.c,
            src/proto/terminal.pro, src/evalfunc.c, runtime/doc/eval.txt

Patch 8.0.0899
Problem:    Function name mch_stop_job() is confusing.
Solution:   Rename to mch_signal_job().
Files:      src/channel.c, src/os_unix.c, src/proto/os_unix.pro,
            src/os_win32.c, src/proto/os_win32.pro, src/terminal.c

Patch 8.0.0900
Problem:    <A HREF="tabpage.html#:tab">:tab</A> <A HREF="options.html#options">options</A> doesn't open a new <A HREF="intro.html#tab">tab</A> page. (Aviany)
Solution:   Support the <A HREF="tabpage.html#:tab">:tab</A> modifier. (closes #1960)
Files:      src/ex_cmds2.c, runtime/optwin.vim

Patch 8.0.0901
Problem:    Asan suppress file missing from <A HREF="intro.html#distribution">distribution</A>.
Solution:   Add the file.
Files:      Filelist

Patch 8.0.0902
Problem:    Cannot specify directory or environment for a <A HREF="channel.html#job">job</A>.
Solution:   Add the &quot;cwd&quot; and &quot;env&quot; arguments to <A HREF="channel.html#job">job</A> <A HREF="options.html#options">options</A>. (Yasuhiro
            Matsumoto, closes #1160)
Files:      runtime/doc/channel.txt, src/channel.c, src/terminal.c,
            src/os_unix.c, src/os_win32.c, src/structs.h,
            src/testdir/test_channel.vim, src/testdir/test_terminal.vim

Patch 8.0.0903 (after 8.0.0902)
Problem:    Early return from test function.
Solution:   Remove the return.
Files:      src/testdir/test_terminal.vim

Patch 8.0.0904
Problem:    Cannot set a location <A HREF="eval.html#list">list</A> from text.
Solution:   Add the &quot;text&quot; argument to <A HREF="builtin.html#setqflist()">setqflist()</A>. (Yegappan Lakshmanan)
Files:      runtime/doc/eval.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.0905
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: broken <A HREF="mbyte.html#multibyte">multibyte</A> characters in the console.
Solution:   Restore all regions of the console buffer. (Ken Takata)
Files:      src/os_win32.c

Patch 8.0.0906
Problem:    Don't recognize Couchbase files.
Solution:   Add <A HREF="filetype.html#filetype">filetype</A> detection. (Eugene Ciurana, closes #1951)
Files:      runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.0.0907
Problem:    With cp932 font names might be misinterpreted.
Solution:   Do not see &quot;<A HREF="motion.html#_">_</A>&quot; <A HREF="motion.html#as">as</A> a space when <A HREF="motion.html#it">it</A> is the second byte of a double
            byte character. (Ken Takata)
Files:      src/os_win32.c

Patch 8.0.0908
Problem:    Cannot set <A HREF="terminal.html#terminal">terminal</A> size with <A HREF="options.html#options">options</A>.
Solution:   Add &quot;term_rows&quot;, &quot;term_cols&quot; and &quot;vertical&quot;.
Files:      src/terminal.c, runtime/doc/eval.txt, src/channel.c,
            src/proto/channel.pro, src/structs.h, src/evalfunc.c,
            src/testdir/test_terminal.vim

Patch 8.0.0909
Problem:    <A HREF="eval.html#Channel">Channel</A> test fails.
Solution:   Allow for &quot;cwd&quot; and &quot;env&quot; arguments.
Files:      src/channel.c

Patch 8.0.0910
Problem:    Cannot create a <A HREF="terminal.html#terminal">terminal</A> in the current <A HREF="windows.html#window">window</A>.
Solution:   Add option &quot;curwin&quot; and ++curwin.
Files:      src/terminal.c, runtime/doc/eval.txt, src/channel.c,
            src/structs.h, src/ex_cmds.h, src/testdir/test_terminal.vim

Patch 8.0.0911
Problem:    Terminal test takes too long.
Solution:   Instead of &quot;sleep 1&quot; use a <A HREF="if_pyth.html#Python">Python</A> program to briefly sleep.
Files:      src/testdir/test_terminal.vim, src/testdir/test_short_sleep.py

Patch 8.0.0912
Problem:    Cannot run a <A HREF="channel.html#job">job</A> in a hidden <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Add option &quot;hidden&quot; and ++hidden.
Files:      src/terminal.c, src/structs.h, src/channel.c, src/fileio.c,
            runtime/doc/terminal.txt, src/testdir/test_terminal.vim

Patch 8.0.0913
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="pattern.html#CTRL-C">CTRL-C</A> kills shell in <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> instead of the
            command running in the shell.
Solution:   Make <A HREF="pattern.html#CTRL-C">CTRL-C</A> only send a CTRL_C_EVENT and have CTRL-BREAK kill the
            <A HREF="channel.html#job">job</A>. (partly by Yasuhiro Matsumoto, closes #1962)
Files:      src/os_win32.c, src/gui_w32.c, src/terminal.c, src/globals.h

Patch 8.0.0914
Problem:    Highlight attributes are always combined.
Solution:   Add the '<A HREF="syntax.html#nocombine">nocombine</A>' value to replace attributes instead of
            combining them. (scauligi, closes #1963)
Files:      runtime/doc/syntax.txt, src/syntax.c, src/vim.h

Patch 8.0.0915
Problem:    Wrong initialisation of global.
Solution:   Use INIT().
Files:      src/globals.h

Patch 8.0.0916
Problem:    Cannot specify properties of <A HREF="windows.html#window">window</A> for when opening a <A HREF="windows.html#window">window</A> for
            a finished <A HREF="terminal.html#terminal">terminal</A> <A HREF="channel.html#job">job</A>.
Solution:   Add &quot;term_opencmd&quot;.
Files:      src/channel.c, src/structs.h, src/terminal.c,
            runtime/doc/eval.txt, src/testdir/test_terminal.vim

Patch 8.0.0917
Problem:    MS-Windows:CTRL-C handling in <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> is wrong
Solution:   Pass <A HREF="pattern.html#CTRL-C">CTRL-C</A> <A HREF="motion.html#as">as</A> a key. Turn CTRL-BREAK into a key stroke. (Yasuhiro
            Matsumoto, closes #1965)
Files:      src/os_win32.c, src/terminal.c

Patch 8.0.0918
Problem:    Cannot get <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> cursor shape or attributes.
Solution:   Support cursor shape, attributes and color.
Files:      src/terminal.c, runtime/doc/eval.txt,
            src/libvterm/include/vterm.h, src/libvterm/src/state.c,
            src/libvterm/src/vterm.c, src/feature.h, src/ui.c,
            src/proto/ui.pro, src/term.c, src/proto/term.pro,
            src/option.c, src/term.h

Patch 8.0.0919
Problem:    Cursor color isn't set on <A HREF="starting.html#startup">startup</A>.
Solution:   Initialize showing_mode to invalid value.
Files:      src/term.c

Patch 8.0.0920
Problem:    The cursor shape is wrong after switch back from an alternate
            screen in a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>. (Marius Gedminas)
Solution:   Change bitfield to unsigned.  Set flag that cursor shape was set.
Files:      src/terminal.c, src/libvterm/src/vterm_internal.h

Patch 8.0.0921
Problem:    Terminal <A HREF="windows.html#window">window</A> cursor shape not supported in the <A HREF="gui.html#GUI">GUI</A>.
Solution:   Use the <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> cursor shape in the <A HREF="gui.html#GUI">GUI</A>.
Files:      src/terminal.c, src/proto/terminal.pro, src/gui.c, src/syntax.c,
            src/proto/syntax.pro

Patch 8.0.0922
Problem:    <A HREF="quickfix.html#Quickfix">Quickfix</A> <A HREF="eval.html#list">list</A> always added after current one.
Solution:   Make <A HREF="motion.html#it">it</A> possible to add a <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A> after the last one.
            (Yegappan Lakshmanan)
Files:      runtime/doc/eval.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.0923
Problem:    Crash in <A HREF="gui.html#GUI">GUI</A> when <A HREF="terminal.html#terminal">terminal</A> <A HREF="channel.html#job">job</A> exits. (Kazunobu Kuriyama)
Solution:   reset in_terminal_loop when a <A HREF="terminal.html#terminal">terminal</A> is freed.
Files:      src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.0924
Problem:    Terminal <A HREF="windows.html#window">window</A> not updated after using <A HREF="terminal.html#term_sendkeys()">term_sendkeys()</A>.
Solution:   Call redraw_after_callback().
Files:      src/terminal.c

Patch 8.0.0925
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> <A HREF="gui.html#GUI">GUI</A>: <A HREF="channel.html#channel">channel</A> I/O not handled right away.
Solution:   Don't call process_message() unless a message is available.
            (Yasuhiro Matsumoto, closes #1969)
Files:      src/gui_w32.c

Patch 8.0.0926
Problem:    When <A HREF="channel.html#job">job</A> in <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> ends topline may be wrong.
Solution:   When the <A HREF="channel.html#job">job</A> ends adjust topline so that the active part of the
            <A HREF="terminal.html#terminal">terminal</A> is displayed.
Files:      src/terminal.c

Patch 8.0.0927
Problem:    If a <A HREF="terminal.html#terminal">terminal</A> <A HREF="channel.html#job">job</A> sends a blank title &quot;running&quot; is not shown.
Solution:   When the title is blank make <A HREF="motion.html#it">it</A> empty.
Files:      src/terminal.c

Patch 8.0.0928
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: passing <A HREF="editing.html#arglist">arglist</A> to <A HREF="channel.html#job">job</A> has escaping problems.
Solution:   Improve escaping. (Yasuhiro Matsumoto, closes #1954)
Files:      src/testdir/test_channel.vim, src/testdir/test_terminal.vim,
            src/channel.c, src/proto/channel.pro, src/terminal.c

Patch 8.0.0929
Problem:    :term without argument does not work.
Solution:   Use shell for empty command. (Yasuhiro Matsumoto, closes #1970)
Files:      src/terminal.c

Patch 8.0.0930
Problem:    Terminal <A HREF="windows.html#buffers">buffers</A> are stored in the <A HREF="starting.html#viminfo">viminfo</A> file while they can't
            be useful.
Solution:   Skip <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#buffers">buffers</A> for file marks and buffer <A HREF="eval.html#list">list</A>
Files:      src/buffer.c, src/mark.c

Patch 8.0.0931
Problem:    <A HREF="builtin.html#getwininfo()">getwininfo()</A> does not indicate a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Add &quot;<A HREF="terminal.html#terminal">terminal</A>&quot; to the dictionary.
Files:      runtime/doc/eval.txt, src/evalfunc.c

Patch 8.0.0932
Problem:    Terminal may not use right characters for BS and Enter.
Solution:   Get the characters from the tty.
Files:      src/os_unix.c, src/proto/os_unix.pro, src/terminal.c

Patch 8.0.0933
Problem:    Terminal test tries to start <A HREF="gui.html#GUI">GUI</A> when it's not possible.
Solution:   Check if the <A HREF="gui.html#GUI">GUI</A> can run. (James McCoy, closes #1971)
Files:      src/testdir/shared.vim, src/testdir/test_terminal.vim,
            src/testdir/test_gui.vim, src/testdir/test_gui_init.vim

Patch 8.0.0934 (after 8.0.0932)
Problem:    Change to struts.h missing in patch.
Solution:   Include adding ttyinfo_T.
Files:      src/structs.h

Patch 8.0.0935
Problem:    Cannot recognize a <A HREF="terminal.html#terminal">terminal</A> buffer in <A HREF="windows.html#:ls">:ls</A> output.
Solution:   Use <A HREF="change.html#R">R</A> for a running <A HREF="channel.html#job">job</A> and <A HREF="motion.html#F">F</A> for a finished <A HREF="channel.html#job">job</A>.
Files:      src/buffer.c

Patch 8.0.0936
Problem:    <A HREF="builtin.html#mode()">mode()</A> returns wrong value for a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Return '<A HREF="motion.html#t">t</A>' when typed keys go to a <A HREF="channel.html#job">job</A>.
Files:      src/evalfunc.c, src/testdir/test_terminal.vim

Patch 8.0.0937
Problem:    <A HREF="autocmd.html#User">User</A> highlight groups are not adjusted for StatusLineTerm.
Solution:   Combine attributes like for StatusLineNC.
Files:      src/syntax.c, src/globals.h, src/screen.c

Patch 8.0.0938
Problem:    Scrolling in <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> is inefficient.
Solution:   Use win_del_lines().
Files:      src/terminal.c

Patch 8.0.0939
Problem:    Test_terminal_env is flaky. (James McCoy)
Solution:   Use WaitFor() instead of <A HREF="terminal.html#term_wait()">term_wait()</A>.
Files:      src/testdir/test_terminal.vim

Patch 8.0.0940
Problem:    Test_terminal_scrape_multibyte is flaky. (James McCoy)
Solution:   Use WaitFor() instead of <A HREF="terminal.html#term_wait()">term_wait()</A>.
Files:      src/testdir/test_terminal.vim

Patch 8.0.0941
Problem:    Existing color schemes don't work well with StatusLineTerm.
Solution:   Don't use &quot;reverse&quot;, use fg and bg colors.  Also add
            StatusLineTermNC.
Files:      src/syntax.c, src/vim.h, src/screen.c, src/globals.h, src/option.c

Patch 8.0.0942
Problem:    Using freed memory with &quot;<A HREF="terminal.html#:terminal">:terminal</A>&quot; if an <A HREF="autocmd.html#autocommand">autocommand</A> changes
            <A HREF="options.html#'shell'">'shell'</A> when splitting the <A HREF="windows.html#window">window</A>. (Marius Gedminas)
Solution:   Make a copy of <A HREF="options.html#'shell'">'shell'</A>. (closes #1974)
Files:      src/terminal.c

Patch 8.0.0943
Problem:    Test_terminal_scrape_multibyte fails if the codepage is not <A HREF="mbyte.html#utf-8">utf-8</A>.
Solution:   Start &quot;cmd&quot; with the <A HREF="mbyte.html#utf-8">utf-8</A> codepage. (micbou, closes #1975)
Files:      src/testdir/test_terminal.vim

Patch 8.0.0944
Problem:    Test_profile is a little bit flaky.
Solution:   Accept a match when <A HREF="eval.html#self">self</A> and total time are the same. (James
            McCoy, closes #1972)
Files:      src/testdir/test_profile.vim

Patch 8.0.0945
Problem:    64-bit compiler warnings.
Solution:   Use &quot;size_t&quot; instead of &quot;int&quot;. (Mike Williams)
Files:      src/os_win32.c

Patch 8.0.0946
Problem:    Using PATH_MAX does not work well on some systems.
Solution:   use MAXPATHL instead. (James McCoy, closes #1973)
Files:      src/main.c

Patch 8.0.0947
Problem:    When in <A HREF="insert.html#Insert">Insert</A> mode and using <A HREF="motion.html#CTRL-O">CTRL-O</A> <A HREF="index.html#CTRL-W">CTRL-W</A> <A HREF="index.html#CTRL-W">CTRL-W</A> to move to a
            <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>, get in a weird <A HREF="insert.html#Insert">Insert</A> mode.
Solution:   Don't go to <A HREF="insert.html#Insert">Insert</A> mode in a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>. (closes #1977)
Files:      src/normal.c

Patch 8.0.0948
Problem:    Crash if <A HREF="builtin.html#timer">timer</A> closes <A HREF="windows.html#window">window</A> while dragging status line.
Solution:   Check if the <A HREF="windows.html#window">window</A> still exists. (Yasuhiro Matsumoto, closes
            #1979)
Files:      src/edit.c, src/evalfunc.c, src/gui.c, src/normal.c, src/ui.c

Patch 8.0.0949
Problem:    winpty.dll name is fixed.
Solution:   Add the <A HREF="options.html#'winptydll'">'winptydll'</A> option. Make the default name depend on
            whether <A HREF="motion.html#it">it</A> is a 32-bit or 64-bit build. (idea by Yasuhiro
            Matsumoto, closes #1978)
Files:      src/option.c, src/option.h, src/terminal.c,
            runtime/doc/options.txt

Patch 8.0.0950
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: wrong #ifdef, compiler warnings for signed/unsigned.
Solution:   Change variable type. Change TERMINAL to FEAT_TERMINAL.
Files:      src/os_win32.c, src/option.h

Patch 8.0.0951
Problem:    Another wrong #ifdef.
Solution:   Change TERMINAL to FEAT_TERMINAL. (closes #1981)
Files:      src/option.c

Patch 8.0.0952
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: has('terminal') does not check existence of dll file.
Solution:   Check if the winpty dll file can be loaded. (Ken Takata)
Files:      src/evalfunc.c, src/proto/terminal.pro, src/terminal.c

Patch 8.0.0953
Problem:    Get &quot;no write since last change&quot; error in <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Use another message when closing a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>. Make &quot;:quit!&quot;
            also end the <A HREF="channel.html#job">job</A>.
Files:      src/globals.h, src/buffer.c, src/proto/buffer.pro, src/ex_cmds.c,
            src/ex_cmds2.c, src/ex_docmd.c, src/quickfix.c, src/terminal.c

Patch 8.0.0954
Problem:    /proc/self/exe might be a relative path.
Solution:   Make the path a full path. (James McCoy, closes #1983)
Files:      src/main.c

Patch 8.0.0955
Problem:    Test_existent_file() fails on some file systems.
Solution:   Run the test again with a sleep when the test fails without a
            sleep. (James McCoy, closes #1984)
Files:      src/testdir/test_stat.vim

Patch 8.0.0956
Problem:    Scrolling in a <A HREF="terminal.html#terminal">terminal</A> hwindow <A HREF="motion.html#as">as</A> flicker when the <A HREF="intro.html#Normal">Normal</A>
            background differs from the <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> background.
Solution:   Set the attribute to clear with.
Files:      src/terminal.c, src/screen.c, src/proto/screen.pro, src/message.c,
            src/move.c

Patch 8.0.0957
Problem:    When <A HREF="terminal.html#term_sendkeys()">term_sendkeys()</A> sends many keys <A HREF="motion.html#it">it</A> may get stuck in <A HREF="editing.html#writing">writing</A>
            to the <A HREF="channel.html#job">job</A>.
Solution:   Make the write non-blocking, buffer keys to be sent.
Files:      src/terminal.c, src/channel.c, src/proto/channel.pro,
            src/structs.h src/testdir/test_terminal.vim

Patch 8.0.0958
Problem:    The <A HREF="terminal.html#terminal">terminal</A> test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A> when compiled with the
            <A HREF="terminal.html#terminal">terminal</A> feature but the winpty DLL is missing.
Solution:   Check if the <A HREF="terminal.html#terminal">terminal</A> feature works. (Ken Takata)
Files:      src/testdir/test_terminal.vim

Patch 8.0.0959
Problem:    Build failure on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Use ioctlsocket() instead of fcntl().
Files:      src/channel.c

Patch 8.0.0960
Problem:    <A HREF="eval.html#Job">Job</A> in <A HREF="terminal.html#terminal">terminal</A> does not get <A HREF="pattern.html#CTRL-C">CTRL-C</A>, we send a SIGINT instead.
Solution:   Don't call may_send_sigint() on <A HREF="pattern.html#CTRL-C">CTRL-C</A>.  Make <A HREF="index.html#CTRL-W">CTRL-W</A> <A HREF="pattern.html#CTRL-C">CTRL-C</A> end
            the <A HREF="channel.html#job">job</A>.
Files:      src/terminal.c, runtime/doc/terminal.txt

Patch 8.0.0961
Problem:    The <A HREF="usr_41.html#script">script</A> to build the installer does not include winpty.
Solution:   Add winpty32.dll and winpty-agent.exe like diff.exe
Files:      nsis/gvim.nsi

Patch 8.0.0962
Problem:    Crash with virtualedit and joining lines. (Joshua <A HREF="motion.html#T">T</A> Corbin, <A HREF="intro.html#Neovim">Neovim</A>
            #6726)
Solution:   When using a <A HREF="motion.html#mark">mark</A> check that coladd is valid.
Files:      src/normal.c, src/misc2.c, src/Makefile,
            src/testdir/test_virtualedit.vim, src/testdir/test_alot.vim

Patch 8.0.0963
Problem:    Terminal test fails on macOS. (chdiza)
Solution:   Wait for the shell to echo the characters. (closes #1991)
Files:      src/testdir/test_terminal.vim

Patch 8.0.0964
Problem:    <A HREF="eval.html#Channel">Channel</A> write buffer does not work with poll().
Solution:   Use the same mechanism <A HREF="motion.html#as">as</A> with select().
Files:      src/channel.c

Patch 8.0.0965
Problem:    The cursor shape is not reset after <A HREF="motion.html#it">it</A> was changed in a <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Request the original cursor shape and restore <A HREF="motion.html#it">it</A>.  Add <A HREF="term.html#t_RS">t_RS</A>.
            Do not add <A HREF="term.html#t_SH">t_SH</A> for now, <A HREF="motion.html#it">it</A> does not work properly.
Files:      src/term.c, src/term.h, src/option.c, src/terminal.c

Patch 8.0.0966 (after 8.0.0965)
Problem:    Build failure without <A HREF="terminal.html#terminal">terminal</A> feature.
Solution:   Move #endif.
Files:      src/term.c

Patch 8.0.0967
Problem:    Using a <A HREF="terminal.html#terminal">terminal</A> may cause the cursor to blink.
Solution:   Do not set <A HREF="term.html#t_vs">t_vs</A>, since we cannot restore the old blink state.
Files:      src/term.c

Patch 8.0.0968
Problem:    Crash when switching <A HREF="terminal.html#terminal">terminal</A> modes. (Nikolai Pavlov)
Solution:   Check that there are scrollback lines.
Files:      src/terminal.c

Patch 8.0.0969
Problem:    Coverity warning for unused return value.
Solution:   Add (void) to avoid the warning.
Files:      src/channel.c

Patch 8.0.0970
Problem:    if there is no StatusLine highlighting and there is StatusLineNC
            or StatusLineTermNC highlighting then an invalid highlight id is
            passed to combine_stl_hlt(). (Coverity)
Solution:   Check id_S to be -1 instead of zero.
Files:      src/syntax.c

Patch 8.0.0971
Problem:    <A HREF="options.html#'winptydll'">'winptydll'</A> missing from <A HREF="options.html#:options">:options</A>.
Solution:   Add the entry.
Files:      runtime/optwin.vim

Patch 8.0.0972
Problem:    Compiler warnings for unused <A HREF="eval.html#variables">variables</A>. (Tony Mechelynck)
Solution:   Add #ifdefs.
Files:      src/term.c

Patch 8.0.0973
Problem:    initial info about blinking cursor is wrong
Solution:   Invert the blink flag.  Add <A HREF="term.html#t_VS">t_VS</A> to stop a blinking cursor.
Files:      src/term.c, src/proto/term.pro, src/term.h, src/option.c,
            src/terminal.c

Patch 8.0.0974
Problem:    Resetting a <A HREF="eval.html#string">string</A> option does not trigger <A HREF="autocmd.html#OptionSet">OptionSet</A>. (Rick Howe)
Solution:   Set the origval.
Files:      src/option.c, src/testdir/test_autocmd.vim

Patch 8.0.0975
Problem:    Using freed memory when setting <A HREF="options.html#'backspace'">'backspace'</A>.
Solution:   When <A HREF="change.html#changing">changing</A> oldval also change origval.
Files:      src/option.c

Patch 8.0.0976
Problem:    Cannot send lines to a <A HREF="terminal.html#terminal">terminal</A> <A HREF="channel.html#job">job</A>.
Solution:   Make [range]terminal send selected lines to the <A HREF="channel.html#job">job</A>.
            Use ++rows and ++cols for the <A HREF="terminal.html#terminal">terminal</A> size.
Files:      src/ex_cmds.h, src/terminal.c, src/os_unix.c,
            src/testdir/test_terminal.vim

Patch 8.0.0977
Problem:    Cannot send lines to a <A HREF="terminal.html#terminal">terminal</A> <A HREF="channel.html#job">job</A> on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Set jv_in_buf.  Command doesn't get EOF yet though.
Files:      src/terminal.c

Patch 8.0.0978
Problem:    Writing to <A HREF="terminal.html#terminal">terminal</A> <A HREF="channel.html#job">job</A> is not tested.
Solution:   Add a test.
Files:      src/testdir/test_terminal.vim

Patch 8.0.0979
Problem:    Terminal noblock test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>. (Christian Brabandt)
Solution:   Ignore empty line below &quot;done&quot;.
Files:      src/testdir/test_terminal.vim

Patch 8.0.0980
Problem:    Coverity warning for failing to open /dev/null.
Solution:   When /dev/null can't be opened exit the child.
Files:      src/os_unix.c

Patch 8.0.0981
Problem:    Cursor in <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> blinks by default, while in a real xterm
            <A HREF="motion.html#it">it</A> does not blink, unless the -bc argument is used.
Solution:   Do not use a blinking cursor by default.
Files:      src/terminal.c

Patch 8.0.0982
Problem:    When <A HREF="options.html#'encoding'">'encoding'</A> is set to a <A HREF="mbyte.html#multibyte">multibyte</A> encoding other than <A HREF="mbyte.html#utf-8">utf-8</A>
            the characters from their <A HREF="terminal.html#terminal">terminal</A> are messed up.
Solution:   Convert displayed text from <A HREF="mbyte.html#utf-8">utf-8</A> to <A HREF="options.html#'encoding'">'encoding'</A> for <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
            (Yasuhiro Matsumoto, close #2000)
Files:      src/terminal.c

Patch 8.0.0983
Problem:    Unnecessary check for NULL pointer.
Solution:   Remove the NULL check in dialog_changed(), <A HREF="motion.html#it">it</A> already happens in
            dialog_msg(). (Ken Takata)
Files:      src/ex_cmds2.c

Patch 8.0.0984
Problem:    Terminal blinking cursor not correct in the <A HREF="gui.html#GUI">GUI</A>.
Solution:   Set blinkoff correctly.  Also make the cursor blink on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>
            by default. (Ken Takata)
Files:      src/terminal.c

Patch 8.0.0985
Problem:    Libvterm has its own idea of character width.
Solution:   Use the Vim <A HREF="eval.html#functions">functions</A> for character width and composing to avoid a
            mismatch. (idea by Yasuhiro Matsumoto)
Files:      src/Makefile, src/libvterm/src/unicode.c, src/mbyte.c,
            src/proto/mbyte.pro, src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.0.0986
Problem:    Terminal feature always requires <A HREF="mbyte.html#multibyte">multibyte</A> feature.
Solution:   Remove #ifdef FEAT_MBYTE, disable <A HREF="terminal.html#terminal">terminal</A> without <A HREF="mbyte.html#multibyte">multibyte</A>.
Files:      src/terminal.c, src/feature.h

Patch 8.0.0987
Problem:    <A HREF="terminal.html#terminal">terminal</A>: second byte of double-byte char wrong
Solution:   Set the second byte to NUL only for <A HREF="mbyte.html#utf-8">utf-8</A> and non-multibyte.
Files:      src/terminal.c

Patch 8.0.0988
Problem:    Warning from Covscan about using NULL pointer.
Solution:   Add extra check for NULL. (zdohnal)
Files:      src/fileio.c, src/undo.c

Patch 8.0.0989
Problem:    ActiveTcl dll name has changed in 8.6.6.
Solution:   Adjust the makefile. (Ken Takata)
Files:      src/INSTALLpc.txt, src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.0.0990
Problem:    When <A HREF="options.html#'encoding'">'encoding'</A> is a double-byte encoding, pasting a <A HREF="sponsor.html#register">register</A> into
            a <A HREF="terminal.html#terminal">terminal</A> ends up with the wrong characters.
Solution:   Convert from <A HREF="options.html#'encoding'">'encoding'</A> to <A HREF="mbyte.html#utf-8">utf-8</A>. (Yasuhiro Matsumoto, closes
            #2007)
Files:      src/terminal.c

Patch 8.0.0991
Problem:    Using wrong character conversion for DBCS.
Solution:   Use utf_char2bytes instead of mb_char2bytes. (Yasuhiro Matsumoto,
            closes #2012)
Files:      src/terminal.c

Patch 8.0.0992
Problem:    Terminal title is wrong when <A HREF="options.html#'encoding'">'encoding'</A> is DBCS.
Solution:   Convert the title from DBCS to <A HREF="mbyte.html#utf-8">utf-8</A>. (Yasuhiro Matsumoto, closes
            #2009)
Files:      src/terminal.c

Patch 8.0.0993
Problem:    Sometimes an xterm sends an extra <A HREF="change.html#CTRL-X">CTRL-X</A> after the response for
            the background color.  Related to <A HREF="term.html#t_RS">t_RS</A>.
Solution:   Check for the <A HREF="change.html#CTRL-X">CTRL-X</A> after the terminating 0x7.
Files:      src/term.c

Patch 8.0.0994
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: cursor in <A HREF="terminal.html#terminal">terminal</A> blinks even though the blinking
            cursor was disabled on the system.
Solution:   Use GetCaretBlinkTime(). (Ken Takata)
Files:      src/terminal.c

Patch 8.0.0995
Problem:    Terminal tests fail on <A HREF="os_mac.html#Mac">Mac</A>.
Solution:   Add workaround: sleep a moment in between sending keys.
Files:      src/testdir/test_terminal.vim

Patch 8.0.0996
Problem:    <A HREF="os_mac.html#Mac">Mac</A>: <A HREF="term.html#t_RS">t_RS</A> is echoed on the screen in Terminal.app.  Even though
            $TERM is set to &quot;xterm-256colors&quot; <A HREF="motion.html#it">it</A> cannot handle this xterm
            <A HREF="intro.html#escape">escape</A> sequence.
Solution:   Recognize Terminal.app from the termresponse and skip sending <A HREF="term.html#t_RS">t_RS</A>
            if <A HREF="motion.html#it">it</A> looks like Terminal.app.
Files:      src/term.c

Patch 8.0.0997 (after 8.0.0996)
Problem:    Libvterm and Terminal.app not recognized from termresponse.
Solution:   Adjust <A HREF="eval.html#string">string</A> compare.
Files:      src/term.c

Patch 8.0.0998
Problem:    Strange error when using <A HREF="various.html#K">K</A> while only spaces are selected.
            (Christian <A HREF="change.html#J">J</A>. Robinson)
Solution:   Check for blank argument.
Files:      src/normal.c, src/testdir/test_help.vim

Patch 8.0.0999
Problem:    Indenting raw C++ strings is wrong.
Solution:   Add special handling of raw strings. (Christian Brabandt)
Files:      src/misc1.c, src/testdir/test_cindent.vim

Patch 8.0.1000
Problem:    Cannot open a <A HREF="terminal.html#terminal">terminal</A> without running a <A HREF="channel.html#job">job</A> in <A HREF="motion.html#it">it</A>.
Solution:   Make &quot;<A HREF="terminal.html#:terminal">:terminal</A> NONE&quot; open a <A HREF="terminal.html#terminal">terminal</A> with a pty.
Files:      src/terminal.c, src/os_unix.c, src/proto/os_unix.pro,
            src/channel.c, src/proto/channel.pro, src/structs.h,
            src/testdir/test_terminal.c, src/misc2.c, src/gui_gtk_x11.c

Patch 8.0.1001
Problem:    Setting <A HREF="options.html#'encoding'">'encoding'</A> makes <A HREF="options.html#'printheader'">'printheader'</A> invalid.
Solution:   Do not translate the default value of <A HREF="options.html#'printheader'">'printheader'</A>. (Yasuhiro
            Matsumoto, closes #2026)
Files:      src/option.c

Patch 8.0.1002
Problem:    Unnecessarily updating screen after <A HREF="builtin.html#timer">timer</A> callback.
Solution:   Check if calling the <A HREF="builtin.html#timer">timer</A> sets must_redraw.
Files:      src/ex_cmds2.c, src/channel.c, src/screen.c, src/proto/screen.pro,
            src/terminal.c

Patch 8.0.1003
Problem:    64 bit compiler warning
Solution:   Add type cast. (Mike Williams)
Files:      src/channel.c

Patch 8.0.1004
Problem:    <A HREF="builtin.html#matchstrpos()">matchstrpos()</A> without a match returns too many items.
Solution:   Also remove the second item when the position is beyond the end of
            the <A HREF="eval.html#string">string</A>. (Hirohito Higashi)  Use an enum for the type.
Files:      src/evalfunc.c, src/testdir/test_match.vim

Patch 8.0.1005
Problem:    Terminal without <A HREF="channel.html#job">job</A> updates slowly in <A HREF="gui.html#GUI">GUI</A>.
Solution:   Poll for input when a <A HREF="channel.html#channel">channel</A> has the keep_open flag.
Files:      src/channel.c, src/proto/channel.pro, src/gui_gtk_x11.c

Patch 8.0.1006
Problem:    Cannot parse text with <A HREF="options.html#'errorformat'">'errorformat'</A> without <A HREF="change.html#changing">changing</A> a <A HREF="quickfix.html#quickfix">quickfix</A>
            <A HREF="eval.html#list">list</A>.
Solution:   Add the &quot;text&quot; argument to <A HREF="builtin.html#getqflist()">getqflist()</A>. (Yegappan Lakshmanan)
Files:      runtime/doc/eval.txt, src/evalfunc.c, src/proto/quickfix.pro,
            src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1007
Problem:    No test for <A HREF="filetype.html#filetype">filetype</A> detection for scripts.
Solution:   Add a first test file <A HREF="usr_41.html#script">script</A> <A HREF="filetype.html#filetype">filetype</A> detection.
Files:      src/testdir/test_filetype.vim, runtime/scripts.vim

Patch 8.0.1008
Problem:    Slow updating of <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> in <A HREF="gui_x11.html#Motif">Motif</A>.
Solution:   Add a timeout to the wait-for-character loop.
Files:      src/gui_x11.c

Patch 8.0.1009
Problem:    Xterm cursor blinking status may be inverted.
Solution:   Use another request to get the blink status and compare with the
            cursor style report
Files:      src/term.c, src/proto/term.pro, src/term.h, src/option.c,
            src/terminal.c

Patch 8.0.1010 (after 8.0.1009)
Problem:    Build failure without termresponse feature.
Solution:   Add #ifdef.
Files:      src/term.c

Patch 8.0.1011
Problem:    Terminal test fails with Athena and <A HREF="gui_x11.html#Motif">Motif</A>.
Solution:   Ignore the error for the input context. (Kazunobu Kuriyama)
Files:      src/testdir/test_terminal.vim

Patch 8.0.1012
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: Problem with <A HREF="options.html#$HOME">$HOME</A> when <A HREF="motion.html#it">it</A> was set internally.
Solution:   Only use the <A HREF="options.html#$HOME">$HOME</A> default internally. (Yasuhiro Matsumoto, closes
            #2013)
Files:      src/misc1.c, src/testdir/Make_all.mak, src/Makefile,
            src/testdir/test_windows_home.vim

Patch 8.0.1013
Problem:    A <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> with a running <A HREF="channel.html#job">job</A> behaves different from a
            <A HREF="windows.html#window">window</A> containing a changed buffer.
Solution:   Do not set <A HREF="options.html#'bufhidden'">'bufhidden'</A> to &quot;hide&quot;.  Fix that a buffer where a
            <A HREF="terminal.html#terminal">terminal</A> used to run is listed <A HREF="motion.html#as">as</A> &quot;[Scratch]&quot;.
Files:      src/terminal.c, runtime/doc/terminal.txt, src/buffer.c

Patch 8.0.1014
Problem:    Old compiler doesn't know uint32_t. Warning for using NULL instead
            of NUL.
Solution:   Use UINT32_T.  Use NUL instead of NULL.
Files:      src/mbyte.c, src/proto/mbyte.pro, src/misc1.c

Patch 8.0.1015 (after 8.0.1013)
Problem:    Missing update to <A HREF="terminal.html#terminal">terminal</A> test.
Solution:   Add the changes to the test.
Files:      src/testdir/test_terminal.vim

Patch 8.0.1016
Problem:    <A HREF="gui_x11.html#Gnome">Gnome</A> <A HREF="terminal.html#terminal">terminal</A> echoes <A HREF="term.html#t_RC">t_RC</A>.
Solution:   Detect <A HREF="gui_x11.html#Gnome">Gnome</A> <A HREF="terminal.html#terminal">terminal</A> by the version <A HREF="eval.html#string">string</A>.  Add <A HREF="eval.html#v:">v:</A> <A HREF="eval.html#variables">variables</A> for
            all the term responses.
Files:      src/term.c, src/eval.c, src/vim.h, runtime/doc/eval.txt

Patch 8.0.1017
Problem:    Test for <A HREF="os_win32.html#MS-Windows">MS-Windows</A> <A HREF="options.html#$HOME">$HOME</A> always passes.
Solution:   Rename the test function.  Make the test pass.
Files:      src/testdir/test_windows_home.vim

Patch 8.0.1018
Problem:    Warnings from 64-bit compiler. (Christian Brabandt)
Solution:   Add type casts.
Files:      src/terminal.c

Patch 8.0.1019
Problem:    Pasting in virtual edit happens in the wrong place.
Solution:   Do not adjust coladd when after the end of the line (closes #2015)
Files:      src/testdir/test_virtualedit.vim, src/misc2.c

Patch 8.0.1020
Problem:    When a <A HREF="builtin.html#timer">timer</A> calls getchar(1) input is overwritten.
Solution:   Increment tb_change_cnt in inchar(). (closes #1940)
Files:      src/getchar.c

Patch 8.0.1021
Problem:    Older <A HREF="gui_x11.html#Gnome">Gnome</A> <A HREF="terminal.html#terminal">terminal</A> still echoes <A HREF="term.html#t_RC">t_RC</A>. (Franois Ingelrest)
Solution:   Check for version <A HREF="change.html#&gt;">&gt;</A> 3000 instead of 4000.
Files:      src/term.c

Patch 8.0.1022
Problem:    Test 80 is old style.
Solution:   Turn <A HREF="motion.html#it">it</A> into a new style test. (Yegappan Lakshmanan)
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test80.in, src/testdir/test80.ok,
            src/testdir/test_substitute.vim

Patch 8.0.1023
Problem:    It is not <A HREF="starting.html#easy">easy</A> to identify a <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A>.
Solution:   Add the &quot;id&quot; field. (Yegappan Lakshmanan)
Files:      runtime/doc/eval.txt, runtime/doc/quickfix.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.1024
Problem:    Manual <A HREF="fold.html#folds">folds</A> are lost when a session file has the same buffer in
            two <A HREF="windows.html#windows">windows</A>. (Jeansen)
Solution:   Use &quot;<A HREF="editing.html#:edit">:edit</A>&quot; only once. (Christian Brabandt, closes #1958)
Files:      src/ex_docmd.c, src/testdir/test_mksession.vim

Patch 8.0.1025
Problem:    Stray copy command in test.
Solution:   Remove the copy command.
Files:      src/testdir/test_mksession.vim

Patch 8.0.1026
Problem:    <A HREF="gui_x11.html#GTK">GTK</A> on-the-spot input has problems. (Gerd Wachsmuth)
Solution:   Support over-the-spot. (Yukihiro Nakadaira, Ken Takata, closes
            #1215)
Files:      runtime/doc/mbyte.txt, runtime/doc/options.txt, src/edit.c,
            src/ex_getln.c, src/mbyte.c, src/misc1.c, src/option.c,
            src/option.h, src/screen.c, src/undo.c,
            src/testdir/gen_opt_test.vim

Patch 8.0.1027
Problem:    More terminals can't handle requesting cursor mode.
Solution:   Recognize Putty. (Hirohito Higashi)  Also include Xfce in the
            version check. (Dominique Pelle)  Recognize Konsole.
Files:      src/term.c

Patch 8.0.1028
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="starting.html#viminfo">viminfo</A> uses $VIM/_viminfo if <A HREF="options.html#$HOME">$HOME</A> not set. (Yongwei
            Wu)
Solution:   Use vim_getenv() but check it's returning the default &quot;C:/&quot;.
Files:      src/ex_cmds.c

Patch 8.0.1029
Problem:    Return value of <A HREF="builtin.html#getqflist()">getqflist()</A> is inconsistent.  (Lcd47)
Solution:   Always return an &quot;items&quot; entry.
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1030
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: wrong size computation in is_cygpty().
Solution:   Compute the size properly. (Ken Takata)
Files:      src/iscygpty.c, src/iscygpty.h

Patch 8.0.1031
Problem:    &quot;text&quot; argument for <A HREF="builtin.html#getqflist()">getqflist()</A> is confusing. (Lcd47)
Solution:   Use &quot;lines&quot; instead. (Yegappan Lakshmanan)
Files:      runtime/doc/eval.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.1032
Problem:    &quot;make tags&quot; doesn't work well on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Add or fix <A HREF="tagsrch.html#tags">tags</A> target. (Ken Takata)
Files:      src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.0.1033
Problem:    Detecting background color does not work in screen, even when <A HREF="motion.html#it">it</A>
            is working like an xterm.
Solution:   Make &quot;screen.xterm&quot; use <A HREF="term.html#termcap">termcap</A> entries like an xterm. (Lubomir
            Rintel, closes #2048)  When termresponse version is huge also
            recognize <A HREF="motion.html#as">as</A> not being an xterm.
Files:      src/os_unix.c, src/term.c

Patch 8.0.1034
Problem:    Sending buffer lines to <A HREF="terminal.html#terminal">terminal</A> doesn't work on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Send <A HREF="scroll.html#CTRL-D">CTRL-D</A> to <A HREF="motion.html#mark">mark</A> the end of the text. (Yasuhiro Matsumoto,
            closes #2043) Add the &quot;eof_chars&quot; option.
Files:      src/channel.c, src/proto/terminal.pro, src/terminal.c,
            src/testdir/test_terminal.vim, src/structs.h

Patch 8.0.1035
Problem:    Sending buffer lines to <A HREF="terminal.html#terminal">terminal</A> doesn't work on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Use CR instead of NL after every line.  Make the EOF text work
            properly.  Add the ++eof argument to <A HREF="terminal.html#:terminal">:terminal</A>.
Files:      src/structs.h, src/channel.c, src/terminal.c,
            runtime/doc/terminal.txt, runtime/doc/eval.txt

Patch 8.0.1036
Problem:    ++eof argument for <A HREF="terminal.html#terminal">terminal</A> only available on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Also support ++eof on <A HREF="os_unix.html#Unix">Unix</A>.  Add a test.
Files:      src/channel.c, src/terminal.c, src/structs.h,
            src/testdir/test_terminal.vim

Patch 8.0.1037
Problem:    &quot;icase&quot; of <A HREF="options.html#'diffopt'">'diffopt'</A> is not used for highlighting differences.
Solution:   Also use &quot;icase&quot;. (Rick Howe)
Files:      src/diff.c, src/testdir/test_diffmode.vim

Patch 8.0.1038
Problem:    Strike-through text not supported.
Solution:   Add support for the &quot;<A HREF="syntax.html#strikethrough">strikethrough</A>&quot; attribute. (Christian
            Brabandt, Ken Takata)
Files:      runtime/doc/eval.txt, runtime/doc/options.txt,
            runtime/doc/syntax.txt, runtime/doc/term.txt, src/evalfunc.c,
            src/gui.c, src/gui.h, src/gui_gtk_x11.c, src/gui_mac.c,
            src/gui_w32.c, src/gui_x11.c, src/option.c, src/screen.c,
            src/syntax.c, src/term.c, src/term.h, src/terminal.c, src/vim.h

Patch 8.0.1039
Problem:    Cannot change a line in a buffer other than the current one.
Solution:   Add <A HREF="builtin.html#setbufline()">setbufline()</A>. (Yasuhiro Matsumoto, Ozaki Kiichi, closes #1953)
Files:      src/evalfunc.c, runtime/doc/eval.txt, src/Makefile,
            src/testdir/test_bufline.vim, src/testdir/test_alot.vim


Patch 8.0.1040
Problem:    Cannot use another error format in <A HREF="builtin.html#getqflist()">getqflist()</A>.
Solution:   Add the &quot;efm&quot; argument to <A HREF="builtin.html#getqflist()">getqflist()</A>. (Yegappan Lakshmanan)
Files:      runtime/doc/eval.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.1041
Problem:    Bogus characters appear when indenting kicks in while doing a
            <A HREF="visual.html#visual-block">visual-block</A> append.
Solution:   Recompute when indenting is done. (Christian Brabandt)
Files:      runtime/doc/visual.txt, src/charset.c, src/edit.c, src/misc1.c,
            src/ops.c, src/proto/charset.pro, src/proto/misc1.pro,
            src/screen.c, src/spell.c, src/testdir/test_cindent.vim

Patch 8.0.1042 (after 8.0.1038)
Problem:    Without the <A HREF="syntax.html#syntax">syntax</A> feature highlighting doesn't work.
Solution:   Always use unsigned short to store attributes.
Files:      src/vim.h

Patch 8.0.1043
Problem:    Warning for uninitialized variable. (John Marriott)
Solution:   Move code to check indent inside &quot;if&quot;.
Files:      src/ops.c

Patch 8.0.1044
Problem:    Warning for uninitialized variable. (John Marriott)
Solution:   Initialize ind_pre.
Files:      src/ops.c

Patch 8.0.1045
Problem:    Running tests may pollute shell <A HREF="cmdline.html#history">history</A>. (Manuel Ortega)
Solution:   Make $HISTFILE empty.
Files:      src/testdir/setup.vim

Patch 8.0.1046
Problem:    Code duplication in <A HREF="diff.html#diff">diff</A> mode.
Solution:   Use diff_equal_char() also in diff_cmp(). (Rick Howe)
Files:      src/diff.c

Patch 8.0.1047
Problem:    Buffer overflow in <A HREF="if_ruby.html#Ruby">Ruby</A>.
Solution:   Allocate one more byte. (Dominique Pelle)
Files:      src/if_ruby.c

Patch 8.0.1048
Problem:    No test for what 8.0.1020 fixes.
Solution:   Add <A HREF="testing.html#test_feedinput()">test_feedinput()</A>.  Add a test. (Ozaki Kiichi, closes #2046)
Files:      runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_timers.vim,
            src/ui.c

Patch 8.0.1049
Problem:    Shell on <A HREF="os_mac.html#Mac">Mac</A> can't handle long text, making <A HREF="terminal.html#terminal">terminal</A> test fail.
Solution:   Only write 1000 characters instead of 5000.
Files:      src/testdir/test_terminal.vim

Patch 8.0.1050
Problem:    Terminal <A HREF="windows.html#window">window</A> feature not included by default.
Solution:   Include the <A HREF="terminal.html#terminal">terminal</A> feature for the &quot;huge&quot; build.
Files:      src/configure.ac, src/auto/configure

Patch 8.0.1051
Problem:    Cannot run <A HREF="terminal.html#terminal">terminal</A> with spaces in argument.
Solution:   Accept <A HREF="intro.html#backslash">backslash</A> to <A HREF="intro.html#escape">escape</A> space and other characters. (closes
            #1999)
Files:      src/os_unix.c, src/testdir/test_terminal.vim

Patch 8.0.1052
Problem:    <A HREF="terminal.html#term_start()">term_start()</A> does not allow in_io, out_io and err_io <A HREF="options.html#options">options</A>.
Solution:   Add JO_OUT_IO to get_job_options().
Files:      src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.1053
Problem:    <A HREF="builtin.html#setline()">setline()</A> does not work on <A HREF="starting.html#startup">startup</A>. (Manuel Ortega)
Solution:   Do not check for ml_mfp to be set for the current buffer.
            (Christian Brabandt)
Files:      src/testdir/shared.vim, src/testdir/test_alot.vim,
            src/testdir/test_bufline.vim, src/testdir/test_timers.vim,
            src/evalfunc.c

Patch 8.0.1054
Problem:    Terminal test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Disable the redirection test for now.  Improve scrape test to make
            <A HREF="motion.html#it">it</A> <A HREF="various.html#less">less</A> flaky.
Files:      src/testdir/test_terminal.vim

Patch 8.0.1055
Problem:    Bufline test hangs on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Avoid message for <A HREF="editing.html#writing">writing</A> file.  Source shared.vim when running
            test individually.
Files:      src/testdir/test_bufline.vim, src/testdir/test_timers.vim

Patch 8.0.1056
Problem:    Cannot build with the <A HREF="diff.html#diff">diff</A> feature but without the <A HREF="mbyte.html#multibyte">multibyte</A>
            feature.
Solution:   Remove #ifdefs. (John Marriott)
Files:      src/diff.c

Patch 8.0.1057
Problem:    Terminal scrape test waits too long, <A HREF="motion.html#it">it</A> checks for one instead of
            three.
Solution:   Check there are three characters. (micbou)
Files:      src/testdir/test_terminal.vim

Patch 8.0.1058
Problem:    Terminal redirection test is flaky.
Solution:   Wait for <A HREF="channel.html#job">job</A> to finish.
Files:      src/testdir/test_terminal.vim

Patch 8.0.1059
Problem:    older <A HREF="gui_x11.html#Gnome">Gnome</A> <A HREF="terminal.html#terminal">terminal</A> returns smaller version number. (antarestrue)
Solution:   Lower version limit from 2800 to 2500. (#2032)
Files:      src/term.c

Patch 8.0.1060
Problem:    When imstyle is zero, <A HREF="map.html#mapping">mapping</A> <A HREF="motion.html#&lt;Left&gt;">&lt;Left&gt;</A> breaks preediting.
Solution:   Pass though preediting key-events. (Yasuhiro Matsumoto, closes
            #2064, closes #2063)
Files:      src/getchar.c, src/mbyte.c

Patch 8.0.1061
Problem:    Coverity: no check for NULL command.
Solution:   Check for NULL <A HREF="eval.html#list">list</A> item.
Files:      src/terminal.c

Patch 8.0.1062
Problem:    Coverity warnings in libvterm.
Solution:   Add (void) to avoid warning for not checking return value.
            Add &quot;break&quot; before &quot;<A HREF="change.html#case">case</A>&quot;.
Files:      src/libvterm/src/screen.c, src/libvterm/src/state.c

Patch 8.0.1063
Problem:    Coverity warns for NULL check and using variable pointer <A HREF="motion.html#as">as</A> an
            array.
Solution:   Remove the NULL check.  Make &quot;argvar&quot; an array.
Files:      src/terminal.c

Patch 8.0.1064
Problem:    Coverity warns for leaking resource.
Solution:   Free pty_master_fd on failure.
Files:      src/os_unix.c

Patch 8.0.1065
Problem:    Not all <A HREF="map.html#macro">macro</A> examples are included in the self-installing
            executable. (lkintact)
Solution:   Add the directories to the NSIS <A HREF="usr_41.html#script">script</A>. (closes #2065)
Files:      nsis/gvim.nsi

Patch 8.0.1066
Problem:    Some terminals can't handle requesting cursor mode. (Steven
            Hartland)
Solution:   Recognize vandyke SecureCRT. (closes #2008)
Files:      src/term.c

Patch 8.0.1067
Problem:    Using try/catch in <A HREF="builtin.html#timer">timer</A> does not prevent <A HREF="motion.html#it">it</A> from being stopped.
Solution:   Reset the exception context and use did_emsg instead of
            called_emsg.
Files:      src/ex_cmds2.c, src/testdir/test_timers.vim, src/globals.h,
            src/message.c

Patch 8.0.1068 (after 8.0.1066)
Problem:    Vandyke SecureCRT <A HREF="terminal.html#terminal">terminal</A> can't handle cursor mode request.
            (Steven Hartland)
Solution:   Fix pointer computation. (closes #2008)
Files:      src/term.c

Patch 8.0.1069
Problem:    Still get <A HREF="change.html#CTRL-X">CTRL-X</A> sometimes for <A HREF="term.html#t_RS">t_RS</A> request.
Solution:   Also skip 0x18 after a key code response.
Files:      src/term.c

Patch 8.0.1070
Problem:    Terminal test is flaky on <A HREF="os_mac.html#Mac">Mac</A>.
Solution:   Add Test_terminal_noblock() to <A HREF="eval.html#list">list</A> of flaky tests.
Files:      src/testdir/runtest.vim

Patch 8.0.1071
Problem:    $TERM names starting with &quot;putty&quot; and &quot;cygwin&quot; are likely to have
            a dark background, but are not recognized.
Solution:   Only check the first few characters of $TERM to match &quot;putty&quot; or
            &quot;cygwin&quot;. (Christian Brabandt)
Files:      src/option.c

Patch 8.0.1072
Problem:    The <A HREF="syntax.html#:highlight">:highlight</A> command causes a redraw even when nothing changed.
Solution:   Only set &quot;need_highlight_changed&quot; when an attribute changed.
Files:      src/syntax.c

Patch 8.0.1073
Problem:    May get an endless loop if <A HREF="options.html#'statusline'">'statusline'</A> changes a highlight.
Solution:   Do not let evaluating <A HREF="options.html#'statusline'">'statusline'</A> trigger a redraw.
Files:      src/buffer.c

Patch 8.0.1074
Problem:    &quot;:term NONE&quot; does not work on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Make <A HREF="motion.html#it">it</A> work.  Split &quot;pty&quot; into &quot;pty_in&quot; and &quot;pty_out&quot;. (Yasuhiro
            Matsumoto, closes #2058, closes #2045)
Files:      runtime/doc/eval.txt,
            runtime/pack/dist/opt/termdebug/plugin/termdebug.vim,
            src/channel.c, src/evalfunc.c, src/os_unix.c, src/structs.h,
            src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.1075
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: mouse does not work in <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Force the winpty mouse on. (Yasuhiro Matsumoto, closes #2072)
Files:      src/terminal.c

Patch 8.0.1076
Problem:    <A HREF="terminal.html#term_start()">term_start()</A> does not take callbacks. When using two terminals
            without a <A HREF="channel.html#job">job</A> only one is read from.  A <A HREF="terminal.html#terminal">terminal</A> without a <A HREF="windows.html#window">window</A>
            returns the wrong pty.
Solution:   Support &quot;callback&quot;, &quot;<A HREF="channel.html#out_cb">out_cb</A>&quot; and &quot;<A HREF="channel.html#err_cb">err_cb</A>&quot;.  Fix <A HREF="terminal.html#terminal">terminal</A> without a
            <A HREF="windows.html#window">window</A>. Fix reading from multiple channels.
Files:      src/terminal.c, src/proto/terminal.pro, src/channel.c

Patch 8.0.1077
Problem:    No debugger making use of the <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Add the term debugger <A HREF="usr_05.html#plugin">plugin</A>.  So far only displays the current
            line when stopped.
Files:      Filelist, runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.0.1078
Problem:    Using freed memory with &quot;<A HREF="syntax.html#:hi">:hi</A> Normal&quot;.
Solution:   Get &quot;item&quot; again after updating the table.
Files:      src/syntax.c

Patch 8.0.1079
Problem:    Memory leak when <A HREF="builtin.html#remote_foreground()">remote_foreground()</A> fails.
Solution:   Free the error message.
Files:      src/evalfunc.c, src/if_xcmdsrv.c

Patch 8.0.1080
Problem:    Memory leak for eof_chars <A HREF="terminal.html#terminal">terminal</A> option and buffer name.
Solution:   Free <A HREF="channel.html#job">job</A> <A HREF="options.html#options">options</A>. Free the buffer name
Files:      src/terminal.c

Patch 8.0.1081
Problem:    Memory leak for the <A HREF="channel.html#channel">channel</A> write queue.
Solution:   Free the write queue when clearing a <A HREF="channel.html#channel">channel</A>.
Files:      src/channel.c

Patch 8.0.1082
Problem:    Tests fail when run under <A HREF="debug.html#valgrind">valgrind</A>.
Solution:   Increase waiting times.
Files:      src/testdir/test_clientserver.vim, src/testdir/test_terminal.vim

Patch 8.0.1083
Problem:    Leaking memory in input part of <A HREF="channel.html#channel">channel</A>.
Solution:   Clear the input part of <A HREF="channel.html#channel">channel</A>.  Free the entry. Move failing
            command test to a separate file to avoid bogus leak reports
            clouding tests that should not leak.
Files:      src/channel.c, src/testdir/test_terminal.vim, src/Makefile,
            src/testdir/test_terminal_fail.vim, src/testdir/Make_all.mak

Patch 8.0.1084
Problem:    <A HREF="gui_x11.html#GTK">GTK</A> build has compiler warnings. (Christian Brabandt)
Solution:   Get screen size with a different function. (Ken Takata, Yasuhiro
            Matsumoto)
Files:      src/mbyte.c, src/gui_gtk_x11.c, src/proto/gui_gtk_x11.pro,
            src/gui_beval.c

Patch 8.0.1085
Problem:    The <A HREF="terminal.html#terminal">terminal</A> debugger can't set breakpoints.
Solution:   Add <A HREF="terminal.html#:Break">:Break</A> and :Delete commands.  Also commands for stepping
            through code.
Files:      runtime/pack/dist/opt/termdebug/plugin/termdebug.vim,
            runtime/doc/terminal.txt

Patch 8.0.1086 (after 8.0.1084)
Problem:    Can't build with <A HREF="gui_x11.html#GTK">GTK</A> 3.
Solution:   Rename function argument. (Kazunobu Kuriyama)
Files:      src/gui_gtk_x11.c

Patch 8.0.1087
Problem:    Test_terminal_cwd is flaky. <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="terminal.html#term_start()">term_start()</A> &quot;cwd&quot;
            argument does not work.
Solution:   Wait for the condition to be <A HREF="vim9.html#true">true</A> instead of using a sleep.
            Pass the directory to winpty.
Files:      src/testdir/test_terminal.vim, src/terminal.c

Patch 8.0.1088
Problem:    Occasional memory use after free.
Solution:   Use the highlight table directly, don't keep a pointer.
Files:      src/syntax.c

Patch 8.0.1089
Problem:    Cannot get range <A HREF="intro.html#count">count</A> in user command.
Solution:   Add <A HREF="map.html#&lt;range&gt;">&lt;range&gt;</A> argument.
Files:      src/ex_docmd.c, runtime/doc/map.txt

Patch 8.0.1090
Problem:    cannot get the text under the cursor like <A HREF="eval.html#v:beval_text">v:beval_text</A>
Solution:   Add <A HREF="cmdline.html#&lt;cexpr&gt;">&lt;cexpr&gt;</A>.
Files:      src/ex_docmd.c, src/testdir/test_normal.vim,
            runtime/doc/cmdline.txt

Patch 8.0.1091 (after 8.0.1090)
Problem:    Test for <A HREF="cmdline.html#&lt;cexpr&gt;">&lt;cexpr&gt;</A> fails without <A HREF="various.html#+balloon_eval">+balloon_eval</A> feature.
Solution:   Remove #ifdefs.
Files:      src/normal.c

Patch 8.0.1092
Problem:    Terminal debugger can't evaluate expressions.
Solution:   Add <A HREF="terminal.html#:Evaluate">:Evaluate</A> and <A HREF="various.html#K">K</A>.  Various other improvements.
Files:      runtime/pack/dist/opt/termdebug/plugin/termdebug.vim,
            runtime/doc/terminal.txt

Patch 8.0.1093
Problem:    Various small <A HREF="quickfix.html#quickfix">quickfix</A> issues.
Solution:   Remove &quot;<A HREF="cmdline.html#:">:</A>&quot; prefix from title set by a user. Add the qf_id2nr().
            function. Add a couple more tests.  Update documentation.
            (Yegappan Lakshmanan)
Files:      runtime/doc/eval.txt, runtime/doc/quickfix.txt, src/evalfunc.c,
            src/proto/quickfix.pro, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.1094
Problem:    Using ssh from Terminal.app runs into xterm incompatibility.
Solution:   Also detect Terminal.app on non-Mac systems.
Files:      src/term.c

Patch 8.0.1095
Problem:    Terminal <A HREF="mbyte.html#multibyte">multibyte</A> scrape test is flaky.
Solution:   Add another condition to wait for.
Files:      src/testdir/test_terminal.vim

Patch 8.0.1096
Problem:    Terminal <A HREF="windows.html#window">window</A> in <A HREF="intro.html#Normal">Normal</A> mode has wrong background.
Solution:   Store the default background and use <A HREF="motion.html#it">it</A> for clearing until the
            end of the line.  Not for below the last line, since there is no
            text there.
Files:      src/screen.c, src/terminal.c

Patch 8.0.1097 (after 8.0.1096)
Problem:    Background color wrong if <A HREF="channel.html#job">job</A> changes background color.
Solution:   Get the background color from vterm.
Files:      src/terminal.c, src/screen.c

Patch 8.0.1098
Problem:    Build failure if libvterm installed on the system. (Oleh
            Hushchenkov)
Solution:   Change the CCCTERM argument order. (Ken Takata, closes #2080)
Files:      src/Makefile

Patch 8.0.1099
Problem:    Warnings for GDK calls.
Solution:   Use other calls for <A HREF="gui_x11.html#GTK">GTK</A> 3 and fix a few problems. (Kazunobu
            Kuriyama)
Files:      src/mbyte.c

Patch 8.0.1100
Problem:    Stuck in redraw loop when <A HREF="options.html#'lazyredraw'">'lazyredraw'</A> is set.
Solution:   Don't loop on update_screen() when not redrawing. (Yasuhiro
            Matsumoto, closes #2082)
Files:      src/terminal.c, src/screen.c, src/proto/screen.pro

Patch 8.0.1101
Problem:    <A HREF="eval.html#Channel">Channel</A> write fails if <A HREF="editing.html#writing">writing</A> to log fails.
Solution:   Ignore return value of fwrite(). (Ozaki Kiichi, closes #2081)
Files:      src/channel.c

Patch 8.0.1102
Problem:    Terminal <A HREF="windows.html#window">window</A> does not use <A HREF="intro.html#Normal">Normal</A> colors.
Solution:   For the <A HREF="gui.html#GUI">GUI</A> and when <A HREF="options.html#'termguicolors'">'termguicolors'</A> is enabled, use the actual
            foreground and background colors for the <A HREF="terminal.html#terminal">terminal</A>.  (Yasuhiro
            Matsumoto, closes #2067)
            Use the &quot;Terminal&quot; highlight group if defined.
Files:      src/terminal.c, src/syntax.c, src/proto/syntax.pro

Patch 8.0.1103 (after 8.0.1102)
Problem:    Converting cterm color fails for grey ramp.
Solution:   Use index instead of number.
Files:      src/terminal.c

Patch 8.0.1104
Problem:    The qf_jump() function is too long.
Solution:   Split of parts to separate <A HREF="eval.html#functions">functions</A>. (Yegappan Lakshmanan)
Files:      src/quickfix.c

Patch 8.0.1105
Problem:    <A HREF="builtin.html#match()">match()</A> and <A HREF="builtin.html#matchend()">matchend()</A> are not tested.
Solution:   Add tests. (Ozaki Kiichi, closes #2088)
Files:      src/testdir/test_functions.vim, src/testdir/test_match.vim

Patch 8.0.1106
Problem:    Terminal colors on an <A HREF="os_win32.html#MS-Windows">MS-Windows</A> console are not matching the
            normal colors.
Solution:   Use the normal colors for the <A HREF="terminal.html#terminal">terminal</A>. (Yasuhiro Matsumoto,
            closes #2087)
Files:      src/terminal.c

Patch 8.0.1107
Problem:    Terminal debugger jumps to non-existing file.
Solution:   Check that the file exists.  Add an option to make the Vim width
            wide. Fix removing highlight groups.
Files:      runtime/pack/dist/opt/termdebug/plugin/termdebug.vim,
            runtime/doc/terminal.txt

Patch 8.0.1108
Problem:    Cannot specify mappings for the <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Add the <A HREF="map.html#:tmap">:tmap</A> command and associated code.  (Jacob Askeland,
            closes #2073)
Files:      runtime/doc/map.txt, runtime/doc/terminal.txt, src/ex_cmdidxs.h,
            src/ex_cmds.h, src/ex_docmd.c, src/getchar.c, src/gui.c,
            src/terminal.c, src/testdir/test_terminal.vim, src/vim.h,
            src/proto/terminal.pro, src/main.c, src/evalfunc.c

Patch 8.0.1109
Problem:    Timer causes error on exit from <A HREF="intro.html#Ex">Ex</A> mode. (xtal8)
Solution:   save and restore the ex_pressedreturn flag. (Christian Brabandt,
            closes #2079)
Files:      src/ex_docmd.c, src/proto/ex_docmd.pro, src/ex_cmds2.c,
            src/testdir/test_timers.vim

Patch 8.0.1110
Problem:    FORTIFY_SOURCE from <A HREF="if_perl.html#Perl">Perl</A> causes problems. (Scott Baker)
Solution:   Filter out the flag. (Christian Brabandt, closes #2068)
Files:      src/configure.ac, src/auto/configure

Patch 8.0.1111
Problem:    <A HREF="autocmd.html#Syntax">Syntax</A> error in configure when using <A HREF="if_perl.html#Perl">Perl</A>.
Solution:   Add missing <A HREF="change.html#quote">quote</A>
Files:      src/configure.ac, src/auto/configure

Patch 8.0.1112
Problem:    Can't get size or current index from <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A>.
Solution:   Add &quot;idx&quot; and &quot;size&quot; <A HREF="options.html#options">options</A>. (Yegappan Lakshmanan)
Files:      runtime/doc/eval.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.1113
Problem:    Can go to <A HREF="insert.html#Insert">Insert</A> mode from <A HREF="terminal.html#Terminal-Normal">Terminal-Normal</A> mode.
Solution:   Prevent <A HREF="insert.html#:startinsert">:startinsert</A> and &quot;VA&quot; to enter <A HREF="insert.html#Insert">Insert</A> mode. (Yasuhiro
            Matsumoto, closes #2092)
Files:      src/normal.c

Patch 8.0.1114
Problem:    Default for <A HREF="options.html#'iminsert'">'iminsert'</A> is annoying.
Solution:   Make the default always zero. (Yasuhiro Matsumoto, closes #2071)
Files:      src/option.c, runtime/doc/options.txt

Patch 8.0.1115
Problem:    Crash when using <A HREF="builtin.html#foldtextresult()">foldtextresult()</A> recursively.
Solution:   Avoid recursive calls. (Yasuhiro Matsumoto, closes #2098)
Files:      src/evalfunc.c, src/testdir/test_fold.vim

Patch 8.0.1116
Problem:    Terminal test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Wait for the text to appear. (micbou, closes #2097)
Files:      src/testdir/test_terminal.vim

Patch 8.0.1117
Problem:    Test_terminal_no_cmd hangs on <A HREF="os_win32.html#MS-Windows">MS-Windows</A> with <A HREF="gui.html#GUI">GUI</A>. (Christian
            Brabandt)
Solution:   Run the command with &quot;start&quot; and wait for the text to appear.
            (micbou, closes #2096)
Files:      src/testdir/test_terminal.vim

Patch 8.0.1118
Problem:    FEAT_WINDOWS adds a lot of #ifdefs while <A HREF="motion.html#it">it</A> is nearly always
            enabled and only adds 7&#37; to the binary size of the tiny build.
Solution:   Graduate FEAT_WINDOWS.
Files:      src/feature.h, src/window.c, src/vim.h, src/structs.h,
            src/globals.h, src/gui.h, src/if_py_both.h, src/option.h,
            src/term.h, src/buffer.c, src/charset.c, src/digraph.c,
            src/edit.c, src/eval.c, src/evalfunc.c, src/ex_cmds.c,
            src/ex_cmds2.c, src/ex_docmd.c, src/ex_getln.c, src/fileio.c,
            src/fold.c, src/getchar.c, src/gui.c, src/gui_athena.c,
            src/gui_beval.c, src/gui_gtk.c, src/gui_motif.c, src/gui_w32.c,
            src/if_cscope.c, src/if_lua.c, src/if_mzsch.c, src/if_python.c,
            src/if_python3.c, src/if_ruby.c, src/if_tcl.c, src/main.c,
            src/mark.c, src/memline.c, src/misc1.c, src/misc2.c, src/move.c,
            src/netbeans.c, src/normal.c, src/option.c, src/popupmnu.c,
            src/quickfix.c, src/screen.c, src/search.c, src/spell.c,
            src/syntax.c, src/tag.c, src/term.c, src/ui.c, src/version.c,
            src/workshop.c, src/if_perl.xs, src/testdir/test_normal.vim

Patch 8.0.1119
Problem:    Quitting a split <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> kills the <A HREF="channel.html#job">job</A>. (Yasuhiro
            Matsumoto)
Solution:   Only stop <A HREF="terminal.html#terminal">terminal</A> <A HREF="channel.html#job">job</A> if <A HREF="motion.html#it">it</A> is the last <A HREF="windows.html#window">window</A>.
Files:      src/buffer.c, src/testdir/test_terminal.vim

Patch 8.0.1120 (after 8.0.1108)
Problem:    <A HREF="gui.html#:tm">:tm</A> means <A HREF="map.html#:tmap">:tmap</A> instead of <A HREF="gui.html#:tmenu">:tmenu</A>. (Taro Muraoka)
Solution:   Move the new entry below the old entry. (closes #2102)
Files:      src/ex_cmds.h, runtime/doc/map.txt

Patch 8.0.1121
Problem:    Can uncheck executables in <A HREF="os_win32.html#MS-Windows">MS-Windows</A> installer.
Solution:   Make the choice read-only. (Ken Takata, closes #2106)
Files:      nsis/gvim.nsi

Patch 8.0.1122
Problem:    vimtutor.bat doesn't work well with vim.bat.
Solution:   Use &quot;call vim&quot;. (Ken Takata, closes #2105)
Files:      vimtutor.bat

Patch 8.0.1123
Problem:    Cannot define a toolbar for a <A HREF="windows.html#window">window</A>.
Solution:   Add a window-local toolbar.
Files:      src/syntax.c, src/proto/syntax.pro, src/structs.h, src/menu.c,
            src/proto/menu.pro, src/testdir/test_winbar.vim, src/Makefile,
            src/normal.c, src/testdir/Make_all.mak, src/if_perl.xs,
            src/eval.c, src/evalfunc.c, src/window.c, src/ui.c,
            src/terminal.c, src/screen.c,
            runtime/pack/dist/opt/termdebug/plugin/termdebug.vim,
            runtime/doc/gui.txt, runtime/doc/terminal.txt

Patch 8.0.1124
Problem:    Use of MZSCHEME_VER is unclear.
Solution:   Add a comment. (Ken Takata)
Files:      src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.0.1125
Problem:    Wrong <A HREF="windows.html#window">window</A> height when splitting <A HREF="windows.html#window">window</A> with <A HREF="windows.html#window">window</A> toolbar.
Solution:   Add or subtract the <A HREF="windows.html#window">window</A> toolbar height.
Files:      src/window.c

Patch 8.0.1126
Problem:    Endless resize when <A HREF="terminal.html#terminal">terminal</A> showing in two <A HREF="windows.html#buffers">buffers</A>. (Hirohito
            Higashi)
Solution:   Set a flag to prevent resizing the <A HREF="windows.html#window">window</A>.
Files:      src/terminal.c

Patch 8.0.1127
Problem:    Test_peek_and_get_char fails on 32 bit system. (Elimar
            Riesebieter)
Solution:   Avoid an integer overflow. (James McCoy, closes #2116)
Files:      src/ex_cmds2.c

Patch 8.0.1128
Problem:    Old xterm sends <A HREF="change.html#CTRL-X">CTRL-X</A> in response to <A HREF="term.html#t_RS">t_RS</A>.
Solution:   Only send <A HREF="term.html#t_RS">t_RS</A> for xterm 279 and later.  Remove the workaround to
            ignore <A HREF="change.html#CTRL-X">CTRL-X</A>.
Files:      src/term.c

Patch 8.0.1129
Problem:    Window toolbar missing a part of the patch.
Solution:   Add change in vim.h.
Files:      src/vim.h

Patch 8.0.1130
Problem:    The qf_jump() function is still too long.
Solution:   Split of parts to separate <A HREF="eval.html#functions">functions</A>. (Yegappan Lakshmanan)
Files:      src/quickfix.c

Patch 8.0.1131
Problem:    It is not <A HREF="starting.html#easy">easy</A> to trigger an <A HREF="autocmd.html#autocommand">autocommand</A> for new <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
            (Marco Restelli)
Solution:   Trigger <A HREF="autocmd.html#BufWinEnter">BufWinEnter</A> after setting <A HREF="options.html#'buftype'">'buftype'</A>.
Files:      src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.1132
Problem:    #if condition is not portable.
Solution:   Add defined(). (Zuloloxi, closes #2136)
Files:      src/libvterm/src/vterm.c

Patch 8.0.1133
Problem:    <A HREF="autocmd.html#Syntax">Syntax</A> timeout not used correctly.
Solution:   Do not pass the timeout to syntax_start() but set <A HREF="motion.html#it">it</A> explicitly.
            (Yasuhiro Matsumoto, closes #2139)
Files:      src/proto/syntax.pro, src/screen.c, src/syntax.c

Patch 8.0.1134
Problem:    Superfluous call to syn_get_final_id().
Solution:   Remove <A HREF="motion.html#it">it</A>. (Ken Takata)
Files:      src/syntax.c

Patch 8.0.1135
Problem:    W_WINCOL() is always the same.
Solution:   Expand the <A HREF="map.html#macro">macro</A>.
Files:      src/edit.c, src/ex_docmd.c, src/gui_gtk.c, src/gui_w32.c,
            src/netbeans.c, src/popupmnu.c, src/screen.c, src/term.c,
            src/terminal.c, src/ui.c, src/window.c, src/if_py_both.h,
            src/structs.h, src/vim.h

Patch 8.0.1136
Problem:    W_WIDTH() is always the same.
Solution:   Expand the <A HREF="map.html#macro">macro</A>.
Files:      src/charset.c, src/edit.c, src/evalfunc.c, src/ex_cmds.c,
            src/ex_docmd.c, src/getchar.c, src/gui.c, src/gui_beval.c,
            src/gui_mac.c, src/if_lua.c, src/if_mzsch.c, src/if_py_both.h,
            src/if_ruby.c, src/misc1.c, src/misc2.c, src/move.c, src/normal.c,
            src/popupmnu.c, src/quickfix.c, src/screen.c, src/search.c,
            src/structs.h, src/ui.c, src/vim.h, src/window.c

Patch 8.0.1137 (after 8.0.1136)
Problem:    Cannot build with <A HREF="if_ruby.html#Ruby">Ruby</A>.
Solution:   Fix misplaced brace.
Files:      src/if_ruby.c

Patch 8.0.1138
Problem:    Click in <A HREF="windows.html#window">window</A> toolbar starts <A HREF="visual.html#Visual">Visual</A> mode.
Solution:   Add the MOUSE_WINBAR flag.
Files:      src/ui.c, src/vim.h, src/normal.c

Patch 8.0.1139
Problem:    Using <A HREF="windows.html#window">window</A> toolbar changes state.
Solution:   Always execute <A HREF="windows.html#window">window</A> toolbar actions in <A HREF="intro.html#Normal">Normal</A> mode.
Files:      runtime/doc/gui.txt, src/structs.h, src/ex_docmd.c,
            src/proto/ex_docmd.pro, src/menu.c

Patch 8.0.1140
Problem:    Still old style tests.
Solution:   Convert two tests to new style. (Yegappan Lakshmanan)
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test56.in, src/testdir/test56.ok,
            src/testdir/test57.in, src/testdir/test57.ok,
            src/testdir/test_sort.vim, src/testdir/test_vimscript.vim

Patch 8.0.1141
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> build dependencies are incomplete.
Solution:   Fix the dependencies. (Ken Takata)
Files:      src/Make_cyg.mak, src/Make_cyg_ming.mak, src/Make_ming.mak,
            src/Make_mvc.mak

Patch 8.0.1142
Problem:    Window toolbar menu gets a tear-off item.
Solution:   Recognize the <A HREF="windows.html#window">window</A> toolbar.
Files:      src/menu.c

Patch 8.0.1143
Problem:    Macros always expand to the same thing.
Solution:   Remove W_VSEP_WIDTH() and W_STATUS_HEIGHT().
Files:      src/vim.h, src/structs.h, src/gui.c, src/ex_getln.c, src/screen.c

Patch 8.0.1144
Problem:    Using wrong #ifdef for computing length.
Solution:   use BACKSLASH_IN_FILENAME instead of COLON_IN_FILENAME. (Yasuhiro
            Matsumoto, closes #2153)
Files:      src/quickfix.c

Patch 8.0.1145
Problem:    Warning when compiling with <A HREF="if_perl.html#Perl">Perl</A>.
Solution:   Remove unused variable. (Ken Takata)
Files:      src/if_perl.xs

Patch 8.0.1146
Problem:    Redraw when highlight is set with same names. (Ozaki Kiichi)
Solution:   Only free and save a name when <A HREF="motion.html#it">it</A> changed. (closes #2120)
Files:      src/syntax.c

Patch 8.0.1147
Problem:    Fail to build with tiny features. (Tony Mechelynck)
Solution:   Move #ifdefs.
Files:      src/syntax.c

Patch 8.0.1148
Problem:    &quot;<A HREF="visual.html#gN">gN</A>&quot; doesn't work on last match with <A HREF="options.html#'wrapscan'">'wrapscan'</A> off. (fcpg)
Solution:   Adjust for searching backward. (Christian Brabandt)
Files:      src/search.c, src/testdir/test_gn.vim

Patch 8.0.1149
Problem:    libvterm colors differ from xterm.
Solution:   Use the xterm colors for libvterm.
Files:      src/terminal.c, src/libvterm/src/pen.c,
            src/testdir/xterm_ramp.vim, Filelist

Patch 8.0.1150
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> <A HREF="gui.html#GUI">GUI</A>: <A HREF="gui_w32.html#dialog">dialog</A> font size is incorrect.
Solution:   Pass flag to indicate <A HREF="options.html#'encoding'">'encoding'</A> or active codepage. (Yasuhiro
            Matsumoto, closes #2160)
Files:      src/gui_w32.c

Patch 8.0.1151
Problem:    &quot;vim <A HREF="starting.html#-c">-c</A> startinsert!&quot; doesn't append.
Solution:   Correct line number on <A HREF="starting.html#startup">startup</A>. (Christian Brabandt, closes #2117)
Files:      src/ex_docmd.c, src/testdir/test_startup.vim

Patch 8.0.1152
Problem:    Encoding of error message wrong in Cygwin <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Get <A HREF="mbyte.html#locale">locale</A> from environment <A HREF="eval.html#variables">variables</A>. (Ken Takata)
Files:      src/main.c, src/mbyte.c, src/proto/mbyte.pro

Patch 8.0.1153
Problem:    No tests for <A HREF="builtin.html#diff_hlID()">diff_hlID()</A> and <A HREF="builtin.html#diff_filler()">diff_filler()</A>.
Solution:   Add tests. (Dominique Pelle, closes #2156)
Files:      src/testdir/test_diffmode.vim

Patch 8.0.1154
Problem:    <A HREF="options.html#'indentkeys'">'indentkeys'</A> does not work properly. (Gary Johnson)
Solution:   Get the cursor line again. (Christian Brabandt, closes #2151)
Files:      src/edit.c, src/testdir/test_edit.vim

Patch 8.0.1155
Problem:    <A HREF="if_ruby.html#Ruby">Ruby</A> command triggers a warning when RUBYOPT is set to &quot;<A HREF="starting.html#-w">-w</A>&quot;.
Solution:   use &quot;-e_=0&quot; instead of &quot;-e0&quot;. (Masataka Pocke Kuwabara, closes
            #2143)
Files:      src/if_ruby.c

Patch 8.0.1156
Problem:    Removing one <A HREF="starting.html#-W">-W</A> argument from <A HREF="if_perl.html#Perl">Perl</A> CFLAGS may cause trouble.
Solution:   Remove all <A HREF="starting.html#-W">-W</A> flags. (Christian Brabandt)
Files:      src/configure.ac, src/auto/configure

Patch 8.0.1157
Problem:    Compiler warning on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Add type cast. (Yasuhiro Matsumoto)
Files:      src/main.c

Patch 8.0.1158
Problem:    Still old style tests.
Solution:   Convert several tests to new style. (Yegappan Lakshmanan)
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/main.aap, src/testdir/test33.in,
            src/testdir/test33.ok, src/testdir/test41.in,
            src/testdir/test41.ok, src/testdir/test43.in,
            src/testdir/test43.ok, src/testdir/test53.in,
            src/testdir/test53.ok, src/testdir/test_file_size.vim,
            src/testdir/test_lispwords.vim, src/testdir/test_search.vim,
            src/testdir/test_textobjects.vim

Patch 8.0.1159
Problem:    Typo in #ifdef.
Solution:   Change &quot;PROT&quot; to &quot;PROTO&quot;. (Nobuhiro Takasaki, closes #2165)
Files:      src/syntax.c

Patch 8.0.1160
Problem:    Getting tab-local variable fails after closing <A HREF="windows.html#window">window</A>.
Solution:   set tp_firstwin and tp_lastwin. (Jason Franklin, closes #2170)
Files:      src/window.c, src/evalfunc.c, src/testdir/test_getvar.vim

Patch 8.0.1161
Problem:    Popup menu drawing problem when resizing <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Redraw after resizing also when a <A HREF="popup.html#popup">popup</A> menu is visible. (Ozaki
            Kiichi, closes #2110)
Files:      src/popupmnu.c, src/term.c, src/testdir/shared.vim,
            src/testdir/test_popup.vim

Patch 8.0.1162
Problem:    Shared <A HREF="usr_41.html#script">script</A> for tests cannot be included <A HREF="if_cscop.html#twice">twice</A>.
Solution:   Include <A HREF="motion.html#it">it</A> where needed, <A HREF="motion.html#it">it</A> will &quot;finish&quot; if loaded again.
Files:      src/testdir/test_alot.vim, src/testdir/test_bufline.vim,
            src/testdir/test_timers.vim

Patch 8.0.1163
Problem:    Popup test is flaky.
Solution:   Add a WaitFor() and fix another.
Files:      src/testdir/test_popup.vim

Patch 8.0.1164
Problem:    Changing StatusLine highlight while evaluating <A HREF="options.html#'statusline'">'statusline'</A> may
            not change the status line color.
Solution:   When <A HREF="change.html#changing">changing</A> highlighting while redrawing don't cause another
            redraw. (suggested by Ozaki Kiichi, closes #2171, closes #2120)
Files:      src/buffer.c, src/syntax.c

Patch 8.0.1165
Problem:    Popup test is still flaky.
Solution:   Add a <A HREF="terminal.html#term_wait()">term_wait()</A> call. (Ozaki Kiichi)
Files:      src/testdir/test_popup.vim

Patch 8.0.1166
Problem:    <A HREF="terminal.html#:terminal">:terminal</A> doesn't work on <A HREF="os_mac.html#Mac">Mac</A> High Sierra.
Solution:   Change #ifdef for OpenPTY(). (Ozaki Kiichi, Kazunobu Kuriyama,
            closes #2162)
Files:      src/pty.c

Patch 8.0.1167
Problem:    <A HREF="gui_x11.html#Motif">Motif</A>: typing in <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> is slow.
Solution:   Do not redraw the whole <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> but only what was changed.
Files:      src/terminal.c

Patch 8.0.1168
Problem:    wrong highlighting with combination of match and <A HREF="options.html#'cursorline'">'cursorline'</A>.
Solution:   Use &quot;line_attr&quot; when appropriate. (Ozaki Kiichi, closes #2111)
            But don't highlight more than one character.
Files:      src/screen.c, src/testdir/test_highlight.vim,
            src/testdir/view_util.vim

Patch 8.0.1169
Problem:    Highlighting one char too many with <A HREF="options.html#'list'">'list'</A> and <A HREF="options.html#'cul'">'cul'</A>.
Solution:   Check for <A HREF="options.html#'list'">'list'</A> being active. (Ozaki Kiichi, closes #2177)
Files:      src/screen.c, src/testdir/test_highlight.vim

Patch 8.0.1170
Problem:    Using termdebug results in 100&#37; CPU time. (tomleb)
Solution:   Use polling instead of select().
Files:      src/os_unix.c, src/channel.c, src/proto/channel.pro

Patch 8.0.1171
Problem:    Popup test is still a bit flaky.
Solution:   Change <A HREF="terminal.html#term_wait()">term_wait()</A> calls. (Ozaki Kiichi)
Files:      src/testdir/test_popup.vim

Patch 8.0.1172
Problem:    When <A HREF="eval.html#E734">E734</A> is given option is still set.
Solution:   Assign NULL to &quot;<A HREF="change.html#s">s</A>&quot;. (Christian Brabandt)
Files:      src/eval.c, src/testdir/test_assign.vim

Patch 8.0.1173
Problem:    Terminal <A HREF="windows.html#window">window</A> is not redrawn after <A HREF="various.html#CTRL-L">CTRL-L</A>. (Marcin Szamotulski)
Solution:   Redraw the whole <A HREF="terminal.html#terminal">terminal</A> when w_redr_type is NOT_VALID.
Files:      src/terminal.c

Patch 8.0.1174
Problem:    <A HREF="os_mac.html#Mac">Mac</A> Terminal.app has wrong color for white.
Solution:   Use white from the color cube.
Files:      src/globals.h, src/term.c, src/syntax.c

Patch 8.0.1175 (after  8.0.1174)
Problem:    Build failure without <A HREF="various.html#+termresponse">+termresponse</A>.
Solution:   Add #ifdef.
Files:      src/syntax.c

Patch 8.0.1176
Problem:    Job_start() does not handle <A HREF="change.html#quote">quote</A> and <A HREF="intro.html#backslash">backslash</A> correctly.
Solution:   Remove <A HREF="quotes.html#quotes">quotes</A>, recognize and remove backslashes.
Files:      src/testdir/test_channel.vim, src/os_unix.c

Patch 8.0.1177
Problem:    In a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> the <A HREF="popup.html#popup">popup</A> menu is not cleared. (Gerry
            Agbobada)
Solution:   Redraw when SOME_VALID is used instead of NOT_VALID. (closes
            #2194)
Files:      src/terminal.c

Patch 8.0.1178
Problem:    Using old compiler on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Switch default build on <A HREF="os_win32.html#MS-Windows">MS-Windows</A> to use MSVC 2015. (Ken Takata)
Files:      src/msvc2015.bat, src/INSTALLpc.txt, src/GvimExt/Makefile,
            src/Make_mvc.mak, src/tee/Make_mvc.mak, src/xxd/Make_mvc.mak

Patch 8.0.1179
Problem:    Test_popup_and_window_resize() does not always pass.
Solution:   Do not use $VIMPROG, pass the Vim executable in the vimcmd file.
            (Ozaki Kiichi, closes #2186)
Files:      src/testdir/Makefile, src/testdir/shared.vim,
            src/testdir/test_popup.vim

Patch 8.0.1180
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> testclean target deletes the color <A HREF="usr_41.html#script">script</A>.
Solution:   Rename the <A HREF="usr_41.html#script">script</A> file.
Files:      src/testdir/xterm_ramp.vim, src/testdir/color_ramp.vim

Patch 8.0.1181
Problem:    Tests using Vim command fail on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Do not add <A HREF="quotes.html#quotes">quotes</A> around the Vim command.
Files:      src/testdir/Make_dos.mak, src/testdir/Make_ming.mak

Patch 8.0.1182
Problem:    Cannot see or change <A HREF="if_mzsch.html#mzscheme">mzscheme</A> dll name.
Solution:   Add <A HREF="options.html#'mzschemedll'">'mzschemedll'</A> and <A HREF="options.html#'mzschemegcdll'">'mzschemegcdll'</A>.
Files:      src/if_mzsch.c, src/option.h, src/option.c,
            runtime/doc/if_mzsch.txt

Patch 8.0.1183
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> build instructions are outdated.
Solution:   Update instructions for MSVC 2015.  Update the build <A HREF="usr_41.html#script">script</A>.
Files:      Filelist, Makefile, src/INSTALLpc.txt, src/bigvim.bat

Patch 8.0.1184
Problem:    The <A HREF="motion.html#:marks">:marks</A> command is not tested.
Solution:   Add a test. (Dominique Pelle, closes #2197)
Files:      src/testdir/test_marks.vim

Patch 8.0.1185
Problem:    <A HREF="if_ruby.html#Ruby">Ruby</A> library includes minor version number.
Solution:   Only use the API version number. (Ben Boeckel, closes #2199)
Files:      src/configure.ac, src/auto/configure

Patch 8.0.1186
Problem:    Still quite a few old style tests.
Solution:   Convert old to new style tests. (Yegappan Lakshmanan)
            Avoid ringing the bell while running tests.
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_ming.mak,
            src/testdir/Make_vms.mms, src/testdir/main.aap,
            src/testdir/test31.in, src/testdir/test31.ok,
            src/testdir/test4.in, src/testdir/test4.ok, src/testdir/test5.in,
            src/testdir/test5.ok, src/testdir/test60.in,
            src/testdir/test60.ok, src/testdir/test60.vim,
            src/testdir/test7.in, src/testdir/test7.ok, src/testdir/test78.in,
            src/testdir/test78.ok, src/testdir/test_autocmd.vim,
            src/testdir/test_exists.vim, src/testdir/test_recover.vim,
            src/testdir/test_winbuf_close.vim, src/testdir/runtest.vim

Patch 8.0.1187
Problem:    Building with <A HREF="if_lua.html#lua">lua</A> fails for OSX on Travis.
Solution:   Separate brew-update and brew-install. (Ozaki Kiichi, closes #2203)
Files:      .travis.yml

Patch 8.0.1188
Problem:    Autocmd test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Give the buffer a name and find the buffer to be wiped out by
            name.
Files:      src/testdir/test_autocmd.vim

Patch 8.0.1189
Problem:    <A HREF="eval.html#E172">E172</A> is not actually useful, it's only on <A HREF="os_unix.html#Unix">Unix</A> anyway.
Solution:   Remove the check and the error.
Files:      src/ex_docmd.c, runtime/doc/message.txt

Patch 8.0.1190
Problem:    Vim becomes unusable after opening new <A HREF="windows.html#window">window</A> in <A HREF="autocmd.html#BufWritePre">BufWritePre</A>
            event.
Solution:   Call not_exiting(). (Martin Tournoij, closes #2205)
            Also for &quot;2q&quot; when a help <A HREF="windows.html#window">window</A> is open.  Add a test.
Files:      src/ex_docmd.c, src/testdir/test_writefile.vim

Patch 8.0.1191
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: missing 32 and 64 bit files in installer.
Solution:   Include both 32 and 64 bit GvimExt and related dll files. Remove
            old Windows code from the installer. (Ken Takata, closes #2144)
Files:      nsis/README.txt, nsis/gvim.nsi, src/GvimExt/gvimext.cpp,
            src/dosinst.c, src/dosinst.h, src/uninstal.c, Makefile

Patch 8.0.1192
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="terminal.html#terminal">terminal</A> feature not enabled by default.
Solution:   Enable <A HREF="motion.html#it">it</A>. (Ken Takata)
Files:      src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.0.1193
Problem:    Crash when wiping out a buffer after using <A HREF="builtin.html#getbufinfo()">getbufinfo()</A>.
            (Yegappan Lakshmanan)
Solution:   Remove <A HREF="eval.html#b:changedtick">b:changedtick</A> from the buffer <A HREF="eval.html#variables">variables</A>.
Files:      src/buffer.c, src/testdir/test_autocmd.vim

Patch 8.0.1194
Problem:    Actual fg and bg colors of <A HREF="terminal.html#terminal">terminal</A> are unknown.
Solution:   Add <A HREF="term.html#t_RF">t_RF</A>.  Store response to <A HREF="term.html#t_RB">t_RB</A> and <A HREF="term.html#t_RF">t_RF</A>, use for <A HREF="terminal.html#terminal">terminal</A>.
Files:      src/term.c, src/term.h, src/proto/term.pro, src/terminal.c,
            src/vim.h, src/eval.c, runtime/doc/eval.txt

Patch 8.0.1195 (after 8.0.1194)
Problem:    Can't build on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Adjust #ifdef and add #ifdefs.
Files:      src/term.c, src/terminal.c

Patch 8.0.1196 (after 8.0.1194)
Problem:    Crash when <A HREF="term.html#t_RF">t_RF</A> is not set. (Brian Pina)
Solution:   Add <A HREF="term.html#t_RF">t_RF</A> to the <A HREF="eval.html#list">list</A> of <A HREF="terminal.html#terminal">terminal</A> <A HREF="options.html#options">options</A>. (Hirohito Higashi)
Files:      src/option.c

Patch 8.0.1197
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> build instructions are not up to date.
Solution:   Adjust the instructions.  Fix the nsis <A HREF="usr_41.html#script">script</A>.
Files:      Makefile, nsis/gvim.nsi

Patch 8.0.1198
Problem:    Older compilers don't know uint8_t.
Solution:   Use char_u instead.
Files:      src/term.c, src/proto/term.pro

Patch 8.0.1199
Problem:    When <A HREF="options.html#'clipboard'">'clipboard'</A> is &quot;autoselectplus&quot; the <A HREF="pattern.html#star">star</A> <A HREF="sponsor.html#register">register</A> is also
            set. (Gilles Moris)
Solution:   Don't set the <A HREF="pattern.html#star">star</A> <A HREF="sponsor.html#register">register</A> in this situation.
Files:      src/ops.c

Patch 8.0.1200
Problem:    Tests switch the bell off <A HREF="if_cscop.html#twice">twice</A>.
Solution:   Don't set <A HREF="options.html#'belloff'">'belloff'</A> in individual tests. (Christian Brabandt)
Files:      src/testdir/test_alot.vim, src/testdir/test_alot_utf8.vim,
            src/testdir/test_autocmd.vim, src/testdir/test_cmdline.vim,
            src/testdir/test_diffmode.vim, src/testdir/test_digraph.vim,
            src/testdir/test_edit.vim, src/testdir/test_file_size.vim,
            src/testdir/test_gn.vim, src/testdir/test_normal.vim,
            src/testdir/test_packadd.vim, src/testdir/test_popup.vim,
            src/testdir/test_recover.vim, src/testdir/test_search.vim,
            src/testdir/test_textobjects.vim, src/testdir/test_undo.vim,
            src/testdir/test_usercommands.vim, src/testdir/test_visual.vim

Patch 8.0.1201
Problem:    &quot;yL&quot; is affected by <A HREF="options.html#'scrolloff'">'scrolloff'</A>. (Eli the Bearded)
Solution:   Don't use <A HREF="options.html#'scrolloff'">'scrolloff'</A> when an <A HREF="motion.html#operator">operator</A> is pending.
Files:      src/normal.c, runtime/doc/motion.txt

Patch 8.0.1202
Problem:    <A HREF="editing.html#:wall">:wall</A> gives an error for a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>. (Marius Gedminas)
Solution:   Don't try <A HREF="editing.html#writing">writing</A> a buffer that can't be written. (Yasuhiro
            Matsumoto, closes #2190)
Files:      src/ex_cmds.c, src/testdir/test_terminal.vim

Patch 8.0.1203
Problem:    Terminal <A HREF="windows.html#window">window</A> mistreats composing characters.
Solution:   Count composing characters with the base character. (Ozaki Kiichi,
            closes #2195)
Files:      src/mbyte.c, src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.1204
Problem:    A <A HREF="autocmd.html#QuitPre">QuitPre</A> <A HREF="autocmd.html#autocommand">autocommand</A> may get the wrong file name.
Solution:   Pass the buffer being closed to apply_autocmds(). (Rich Howe)
Files:      src/ex_docmd.c, src/testdir/test_autocmd.vim

Patch 8.0.1205
Problem:    Using &quot;1q&quot; <A HREF="motion.html#it">it</A> is possible to unload a changed buffer. (Rick Howe)
Solution:   Check the right <A HREF="windows.html#window">window</A> for changes.
Files:      src/testdir/test_edit.vim, src/ex_docmd.c

Patch 8.0.1206
Problem:    No autocmd for entering or leaving the command line.
Solution:   Add <A HREF="autocmd.html#CmdlineEnter">CmdlineEnter</A> and <A HREF="autocmd.html#CmdlineLeave">CmdlineLeave</A>.
Files:      runtime/doc/autocmd.txt, src/ex_getln.c, src/fileio.c, src/vim.h,
            src/testdir/test_autocmd.vim

Patch 8.0.1207
Problem:    Profiling skips the first and last <A HREF="usr_41.html#script">script</A> line.
Solution:   Check for BOM after setting <A HREF="usr_41.html#script">script</A> ID. (LemonBoy, closes #2103,
            closes #2112) Add a test. <A HREF="eval.html#List">List</A> the trailing <A HREF="usr_41.html#script">script</A> lines.
Files:      src/testdir/test_profile.vim, src/ex_cmds2.c

Patch 8.0.1208
Problem:    <A HREF="options.html#'statusline'">'statusline'</A> drops empty group with highlight change.
Solution:   Do not drop an empty group if <A HREF="motion.html#it">it</A> changes highlighting. (Marius
            Gedminas, closes #2228)
Files:      src/buffer.c, src/testdir/test_statusline.vim

Patch 8.0.1209
Problem:    Still too many old style tests.
Solution:   Convert a few more tests to new style. (Yegappan Lakshmanan,
            closes #2230)
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_ming.mak,
            src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Makefile, src/testdir/Make_vms.mms,
            src/testdir/main.aap, src/testdir/test34.in,
            src/testdir/test34.ok, src/testdir/test54.in,
            src/testdir/test54.ok, src/testdir/test8.in, src/testdir/test8.ok,
            src/testdir/test_autocmd.vim, src/testdir/test_autoformat_join.in,
            src/testdir/test_autoformat_join.ok, src/testdir/test_join.vim,
            src/testdir/test_user_func.vim

Patch 8.0.1210
Problem:    When typing a search <A HREF="pattern.html#pattern">pattern</A> <A HREF="editing.html#CTRL-G">CTRL-G</A> and <A HREF="tagsrch.html#CTRL-T">CTRL-T</A> are ignored when
            there is typeahead.
Solution:   Don't pass SEARCH_PEEK and don't call char_avail(). (haya14busa,
            closes #2233)
Files:      src/ex_getln.c, src/testdir/test_search.vim

Patch 8.0.1211
Problem:    Cannot reorder <A HREF="intro.html#tab">tab</A> pages with drag <A HREF="change.html#&amp;">&amp;</A> drop.
Solution:   Support drag <A HREF="change.html#&amp;">&amp;</A> drop for <A HREF="gui_x11.html#GTK">GTK</A> and <A HREF="os_win32.html#MS-Windows">MS-Windows</A>. (Ken Takata, Masamichi
            Abe)
Files:      src/gui_gtk_x11.c, src/gui_w32.c

Patch 8.0.1212
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: tear-off menu does not work on 64 bit. (shaggyaxe)
Solution:   Change how the menu handle is looked up. (Ken Takata, closes
            #1205)
Files:      src/gui_w32.c

Patch 8.0.1213
Problem:    Setting <A HREF="options.html#'mzschemedll'">'mzschemedll'</A> has no effect.
Solution:   Move loading <A HREF="starting.html#.vimrc">.vimrc</A> to before call to mzscheme_main().
Files:      src/main.c

Patch 8.0.1214
Problem:    Accessing freed memory when EXITFREE is set and there is more than
            one <A HREF="intro.html#tab">tab</A> and <A HREF="windows.html#window">window</A>. (Dominique Pelle)
Solution:   Free <A HREF="options.html#options">options</A> later.  Skip redraw when <A HREF="starting.html#exiting">exiting</A>.
Files:      src/screen.c, src/misc2.c

Patch 8.0.1215
Problem:    Newer gcc warns for implicit fallthrough.
Solution:   Consistently use a FALLTHROUGH comment. (Christian Brabandt)
Files:      src/buffer.c, src/edit.c, src/eval.c, src/ex_docmd.c,
            src/ex_getln.c, src/main.c, src/message.c, src/normal.c,
            src/regexp.c, src/regexp_nfa.c, src/spell.c, src/window.c,
            src/if_perl.xs

Patch 8.0.1216
Problem:    Tabline is not always updated for <A HREF="editing.html#:file">:file</A> command. (Norio Takagi)
Solution:   Set redraw_tabline. (Hirohito Higashi)
Files:      src/ex_cmds.c

Patch 8.0.1217
Problem:    Can't use remote <A HREF="eval.html#eval">eval</A> to inspect vars in debug mode.
Solution:   Don't <A HREF="editing.html#discard">discard</A> the call stack in debug mode. (closes #2237, #2247)
Files:      src/globals.h, src/ex_cmds2.c, src/main.c

Patch 8.0.1218
Problem:    Writing to freed memory in autocmd.
Solution:   Make a copy of the <A HREF="tagsrch.html#tag">tag</A> line. (Dominique Pelle, closes #2245)
Files:      src/tag.c, src/testdir/test_autocmd.vim

Patch 8.0.1219
Problem:    Terminal test is flaky.
Solution:   Add test function to <A HREF="eval.html#list">list</A> of flaky tests.
Files:      src/testdir/runtest.vim

Patch 8.0.1220
Problem:    Skipping empty statusline groups is not correct.
Solution:   Also set group_end_userhl. (itchyny)
Files:      src/buffer.c, src/testdir/test_statusline.vim

Patch 8.0.1221
Problem:    Still too many old style tests.
Solution:   Convert a few more tests to new style. (Yegappan Lakshmanan,
            closes #2256)
Files:      src/Makefile, src/testdir/Make_all.mak,
            src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_vms.mms,
            src/testdir/main.aap, src/testdir/test19.in,
            src/testdir/test19.ok, src/testdir/test20.in,
            src/testdir/test20.ok, src/testdir/test25.in,
            src/testdir/test25.ok, src/testdir/test28.in,
            src/testdir/test28.ok, src/testdir/test32.in,
            src/testdir/test32.ok, src/testdir/test38.in,
            src/testdir/test38.ok, src/testdir/test66.in,
            src/testdir/test66.ok, src/testdir/test79.in,
            src/testdir/test79.ok, src/testdir/test_ins_complete.vim,
            src/testdir/test_source_utf8.vim, src/testdir/test_substitute.vim,
            src/testdir/test_tab.vim, src/testdir/test_tagjump.vim,
            src/testdir/test_undo.vim, src/testdir/test_visual.vim,
            src/testdir/test79.ok, src/testdir/test79.in,
            src/testdir/test28.in

Patch 8.0.1222
Problem:    Test <A HREF="eval.html#functions">functions</A> interfere with each other.
Solution:   Cleanup <A HREF="intro.html#tab">tab</A> pages, <A HREF="windows.html#windows">windows</A> and <A HREF="windows.html#buffers">buffers</A>.  Reset option.
Files:      src/testdir/runtest.vim, src/testdir/test_filetype.vim,
            src/testdir/test_tabpage.vim, src/testdir/test_lispwords.vim

Patch 8.0.1223
Problem:    Crash when using autocomplete and <A HREF="intro.html#tab">tab</A> pages.
Solution:   Check if the current <A HREF="intro.html#tab">tab</A> changed. (Christian Brabandt, closes
            #2239)
Files:      src/popupmnu.c, src/testdir/test_popup.vim, src/misc1.c,

Patch 8.0.1224
Problem:    Still interference between test <A HREF="eval.html#functions">functions</A>.
Solution:   Clear <A HREF="autocmd.html#autocommands">autocommands</A>. Wipe all <A HREF="windows.html#buffers">buffers</A>.  Fix tests that depend on a
            specific start context.
Files:      src/testdir/runtest.vim, src/testdir/test_autocmd.vim,
            src/testdir/test_arglist.vim, src/testdir/test_bufwintabinfo.vim,
            src/testdir/test_command_count.vim, src/testdir/test_quickfix.vim,
            src/testdir/test_hardcopy.vim, src/testdir/test_ins_complete.vim,
            src/testdir/test_packadd.vim, src/testdir/test_signs.vim,
            src/testdir/test_autochdir.vim

Patch 8.0.1225
Problem:    No check for <A HREF="spell.html#spell">spell</A> region being zero. (geeknik)
Solution:   Check for zero. (closes #2252)
Files:      src/spellfile.c, src/testdir/test_spell.vim

Patch 8.0.1226
Problem:    Edit and <A HREF="popup.html#popup">popup</A> tests failing.
Solution:   Make the tests pass.
Files:      src/testdir/test_edit.vim, src/testdir/test_popup.vim

Patch 8.0.1227
Problem:    Undefined left <A HREF="intro.html#shift">shift</A> in <A HREF="builtin.html#readfile()">readfile()</A>. (Brian 'geeknik' Carpenter)
Solution:   Add cast to unsigned. (Dominique Pelle, closes #2253)
Files:      src/fileio.c

Patch 8.0.1228
Problem:    Invalid memory access in <A HREF="gui.html#GUI">GUI</A> test.
Solution:   Check that the row is not outside of the screen.
Files:      src/screen.c

Patch 8.0.1229
Problem:    Condition in vim_str2nr() is always <A HREF="vim9.html#true">true</A>. (Nikolai Pavlov)
Solution:   Remove the condition. (Closes #2259)
Files:      src/charset.c

Patch 8.0.1230
Problem:    <A HREF="change.html#CTRL-A">CTRL-A</A> in <A HREF="visual.html#Visual">Visual</A> mode uses character after selection. (Nikolai
            Pavlov)
Solution:   Check the length before using a character.
Files:      src/charset.c

Patch 8.0.1231
Problem:    Expanding file name drops dash. (stucki)
Solution:   Use the right position. (Christian Brabandt, closes #2184)
Files:      src/ex_docmd.c, src/testdir/test_cmdline.vim

Patch 8.0.1232
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> users are confused about default mappings.
Solution:   Don't map keys in the console where they don't work.  Add a choice
            in the installer to use <A HREF="os_win32.html#MS-Windows">MS-Windows</A> key bindings or not. (Christian
            Brabandt, Ken Takata, closes #2093)
Files:      Filelist, nsis/gvim.nsi, nsis/vimrc.ini, src/dosinst.c,
            runtime/mswin.vim

Patch 8.0.1233
Problem:    Typo in <A HREF="os_dos.html#dos">dos</A> installer.
Solution:   Remove comma.
Files:      src/dosinst.c

Patch 8.0.1234
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: composing characters are not shown properly.
Solution:   Pass base character and composing characters to the renderer at
            once. (Ken Takata, closes #2206)
Files:      src/gui.c, src/gui_w32.c

Patch 8.0.1235
Problem:    Cannot disable the <A HREF="terminal.html#terminal">terminal</A> feature in a huge build. (lindhobe)
Solution:   Adjust the autoconf check. (Kazunobu Kuriyama, closes #2242)
Files:      src/configure.ac, src/auto/configure, src/Makefile

Patch 8.0.1236
Problem:    <A HREF="os_mac.html#Mac">Mac</A> features are confusing.
Solution:   Make feature names more consistent, add &quot;osxdarwin&quot;. Rename
            feature flags, cleanup <A HREF="os_mac.html#Mac">Mac</A> code. (Kazunobu Kuriyama, closes #2178)
            Also includes a fix for when <A HREF="if_ruby.html#Ruby">Ruby</A> throws an exception inside
            <A HREF="if_ruby.html#:rubyfile">:rubyfile</A>. (ujihisa)
Files:      runtime/doc/eval.txt, runtime/doc/os_mac.txt, src/auto/configure,
            src/config.h.in, src/configure.ac, src/digraph.c, src/edit.c,
            src/evalfunc.c, src/feature.h, src/fileio.c, src/getchar.c,
            src/globals.h, src/gui.c, src/gui_mac.c, src/if_python.c,
            src/if_python3.c, src/if_ruby.c, src/keymap.h, src/macros.h,
            src/main.c, src/mbyte.c, src/message.c, src/misc1.c, src/misc2.c,
            src/option.c, src/os_mac.h, src/os_macosx.m, src/os_unix.c,
            src/proto.h, src/pty.c, src/structs.h, src/term.c, src/termlib.c,
            src/ui.c, src/undo.c, src/version.c, src/vim.h, src/window.c

Patch 8.0.1237
Problem:    &quot;<A HREF="options.html#:set">:set</A> scroll&amp;&quot; often gives an error.
Solution:   Don't use a fixed default value, use half the <A HREF="windows.html#window">window</A> height. Add a
            test. (Ozaki Kiichi, closes #2104)
Files:      src/Makefile, src/option.c, src/testdir/test_alot.vim,
            src/testdir/test_scroll_opt.vim

Patch 8.0.1238
Problem:    Incremental search only shows one match.
Solution:   When <A HREF="options.html#'incsearch'">'incsearch'</A> and <A HREF="options.html#'hlsearch'">'hlsearch'</A> are both set highlight all
            matches. (haya14busa, itchyny, closes #2198)
Files:      runtime/doc/options.txt, src/ex_getln.c, src/proto/search.pro,
            src/search.c, src/testdir/test_search.vim

Patch 8.0.1239
Problem:    Cannot use a <A HREF="eval.html#lambda">lambda</A> for the skip argument to <A HREF="builtin.html#searchpair()">searchpair()</A>.
Solution:   Evaluate a <A HREF="builtin.html#partial">partial</A>, funcref and <A HREF="eval.html#lambda">lambda</A>. (LemonBoy, closes #1454,
            closes #2265)
Files:      runtime/doc/eval.txt, src/evalfunc.c, src/proto/evalfunc.pro,
            src/eval.c, src/proto/eval.pro, src/search.c,
            src/testdir/test_search.vim

Patch 8.0.1240
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="terminal.html#term_start()">term_start()</A> does not support environment.
Solution:   Implement the environment argument. (Yasuhiro Matsumoto, closes
            #2264)
Files:      src/os_win32.c, src/proto/os_win32.pro, src/terminal.c,
            src/testdir/test_terminal.vim

Patch 8.0.1241
Problem:    Popup test is flaky. (James McCoy)
Solution:   Increase the wait time. (Dominique Pelle)
Files:      src/testdir/test_popup.vim

Patch 8.0.1242
Problem:    Function argument with only dash is seen <A HREF="motion.html#as">as</A> number zero. (Wang
            Shidong)
Solution:   See a dash <A HREF="motion.html#as">as</A> a <A HREF="eval.html#string">string</A>. (Christian Brabandt)
Files:      src/testdir/test_ins_complete.vim, src/Makefile, src/eval.c

Patch 8.0.1243
Problem:    No test for what 8.0.1227 fixes.
Solution:   Add a test that triggers the problem. (Christian Brabandt)
Files:      src/testdir/test_normal.vim, src/testdir/test_search.vim

Patch 8.0.1244
Problem:    Search test does not work correctly on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Put text in a file instead of sending <A HREF="motion.html#it">it</A> to the <A HREF="terminal.html#terminal">terminal</A>.
            (Christian Brabandt)
Files:      src/testdir/test_search.vim

Patch 8.0.1245
Problem:    When WaitFor() has a wrong <A HREF="eval.html#expression">expression</A> <A HREF="motion.html#it">it</A> just waits a second,
            which goes unnoticed. (James McCoy)
Solution:   When WaitFor() times out throw an exception.  Fix places where the
            <A HREF="eval.html#expression">expression</A> was wrong.
Files:      src/testdir/shared.vim, src/testdir/test_channel.vim,
            src/testdir/test_netbeans.vim, src/testdir/test_terminal.vim

Patch 8.0.1246
Problem:    Popup test has an arbitrary delay.
Solution:   Wait for the ruler to show. (James McCoy)
Files:      src/testdir/test_popup.vim

Patch 8.0.1247
Problem:    Not <A HREF="starting.html#easy">easy</A> to find Debian build info.
Solution:   Add a badge in the README file. (Dominique Pelle)
Files:      README.md

Patch 8.0.1248 (after 8.0.1247)
Problem:    Stray + in README file.
Solution:   Remove the +.  Add a line break.
Files:      README.md

Patch 8.0.1249
Problem:    No error when WaitFor() gets an invalid wrong <A HREF="eval.html#expression">expression</A>.
Solution:   Do not ignore <A HREF="message.html#errors">errors</A> in evaluation of the <A HREF="eval.html#expression">expression</A>.  Fix places
            where the <A HREF="eval.html#expression">expression</A> was wrong.
Files:      src/testdir/shared.vim, src/testdir/test_netbeans.vim

Patch 8.0.1250
Problem:    <A HREF="options.html#'hlsearch'">'hlsearch'</A> highlighting not removed after incsearch (lacygoill)
Solution:   Redraw all <A HREF="windows.html#windows">windows</A>. Start search at the end of the match.  Improve
            how <A HREF="editing.html#CTRL-G">CTRL-G</A> works with incremental search. Add tests. (Christian
            Brabandt, Hirohito Higashi, haya14busa, closes #2267)
Files:      runtime/doc/options.txt, src/ex_getln.c,
            src/testdir/test_search.vim

Patch 8.0.1251 (after 8.0.1249)
Problem:    Invalid <A HREF="eval.html#expression">expression</A> passed to WaitFor().
Solution:   Check if the variable exists.
Files:      src/testdir/test_clientserver.vim

Patch 8.0.1252
Problem:    Incomplete translations makefile for MinGW/Cygwin.
Solution:   Add missing source files.  Make <A HREF="motion.html#it">it</A> work with msys2's bash. (Ken
            Takata)
Files:      src/po/Make_cyg.mak, src/po/Make_ming.mak, src/po/Make_mvc.mak

Patch 8.0.1253
Problem:    Still too many old style tests.
Solution:   Convert a few more tests to new style. (Yegappan Lakshmanan,
            closes #2272)
Files:      src/Makefile, src/testdir/Make_all.mak,
            src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_vms.mms,
            src/testdir/main.aap, src/testdir/test12.in,
            src/testdir/test12.ok, src/testdir/test40.in,
            src/testdir/test40.ok, src/testdir/test45.in,
            src/testdir/test45.ok, src/testdir/test83.in,
            src/testdir/test83.ok, src/testdir/test_autocmd.vim,
            src/testdir/test_fold.vim, src/testdir/test_swap.vim,
            src/testdir/test_tagjump.vim

Patch 8.0.1254
Problem:    Undefined left <A HREF="intro.html#shift">shift</A> in gethexchrs(). (geeknik)
Solution:   Use unsigned long. (idea by Christian Brabandt, closes #2255)
Files:      src/regexp.c, src/regexp_nfa.c


Patch 8.0.1255 (after 8.0.1248)
Problem:    duplicate badge README file.
Solution:   Remove one. (Dominique Pelle)
Files:      README.md

Patch 8.0.1256
Problem:    Typo in configure variable vim_cv_tgent. (Matthieu Guillard)
Solution:   Rename the variable. (closes #2281)
Files:      src/configure.ac, src/auto/configure

Patch 8.0.1257 (after 8.0.1254)
Problem:    No test for fix of undefined behavior.
Solution:   Add a test. (closes #2255)
Files:      src/testdir/test_search.vim

Patch 8.0.1258
Problem:    <A HREF="options.html#'ttymouse'">'ttymouse'</A> is set to &quot;sgr&quot; even though it's not supported. (Gary
            Johnson)
Solution:   Adjust #ifdef
Files:      src/term.c

Patch 8.0.1259
Problem:    Search test can be flaky.
Solution:   Use WaitFor() instead of a delay.  Make <A HREF="motion.html#it">it</A> possible to pass a
            funcref to WaitFor() to avoid the need for global <A HREF="eval.html#variables">variables</A>.
            (James McCoy, closes #2282)
Files:      src/testdir/shared.vim, src/testdir/test_search.vim

Patch 8.0.1260 (after 8.0.1259)
Problem:    Using global <A HREF="eval.html#variables">variables</A> for WaitFor().
Solution:   Use a <A HREF="eval.html#lambda">lambda</A> function instead.  Don't check a condition if
            WaitFor() already checked <A HREF="motion.html#it">it</A>.
Files:      src/testdir/test_popup.vim, src/testdir/test_terminal.vim,
            src/testdir/test_channel.vim, src/testdir/test_clientserver.vim,
            src/testdir/test_job_fails.vim, src/testdir/test_quotestar.vim

Patch 8.0.1261
Problem:    Program in <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> gets NL instead of CR. (Lifepillar)
Solution:   Check the tty setup more often. (closes #1998)
Files:      src/terminal.c

Patch 8.0.1262
Problem:    Terminal redir test is flaky.
Solution:   Add <A HREF="motion.html#it">it</A> to the <A HREF="eval.html#list">list</A> of flaky tests.
Files:      src/testdir/runtest.vim

Patch 8.0.1263
Problem:    Others can read the swap file if a user is careless with his
            primary group.
Solution:   If the group permission allows for reading but the world
            permissions doesn't, make sure the group is right.
Files:      src/fileio.c, src/testdir/test_swap.vim, src/Makefile

Patch 8.0.1264
Problem:    Terminal debugger gets stuck in small <A HREF="windows.html#window">window</A>.
Solution:   Add &quot;-quiet&quot; to the <A HREF="debug.html#gdb">gdb</A> command. (Christian Brabandt, closes #2154)
Files:      runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.0.1265 (after 8.0.1263)
Problem:    Swap test not skipped when there is one group.
Solution:   Convert <A HREF="eval.html#list">list</A> to <A HREF="eval.html#string">string</A> for the message.
Files:      src/testdir/test_swap.vim

Patch 8.0.1266 (after 8.0.1263)
Problem:    Test_swap_directory was accidentally commented out.
Solution:   Uncomment the test.
Files:      src/testdir/test_swap.vim

Patch 8.0.1267 (after 8.0.1263)
Problem:    Test_swap_group may leave file behind.
Solution:   Add a try/finally.
Files:      src/testdir/test_swap.vim, src/testdir/test_undo.vim

Patch 8.0.1268
Problem:    PC <A HREF="usr_90.html#install">install</A> instructions are incomplete.
Solution:   Update the instructions. (Ken Takata)
Files:      src/INSTALLpc.txt

Patch 8.0.1269
Problem:    Effect of <A HREF="autocmd.html#autocommands">autocommands</A> on marks is not tested.
Solution:   Add a couple of tests. (James McCoy, closes #2271)
Files:      src/testdir/test_autocmd.vim

Patch 8.0.1270
Problem:    Mismatching file name with Filelist.
Solution:   Rename color_ramp.vim to xterm_ramp.vim
Files:      src/testdir/color_ramp.vim, src/testdir/xterm_ramp.vim

Patch 8.0.1271
Problem:    Still too many old style tests.
Solution:   Convert a few more tests to new style. (Yegappan Lakshmanan,
            closes #2290)
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/sautest/autoload/footest.vim, src/testdir/test55.in,
            src/testdir/test55.ok, src/testdir/test_changelist.in,
            src/testdir/test_changelist.ok, src/testdir/test_fold.vim,
            src/testdir/test_ins_complete.vim,
            src/testdir/test_insertcount.in, src/testdir/test_insertcount.ok,
            src/testdir/test_listdict.vim, src/testdir/test_normal.vim,
            src/testdir/test_search.vim, src/testdir/test_search_mbyte.in

Patch 8.0.1272
Problem:    Warnings for unused <A HREF="eval.html#variables">variables</A> in tiny build.
Solution:   Add #ifdef. (Dominique Pelle, closes #2288)
Files:      src/term.c

Patch 8.0.1273 (after 8.0.1271)
Problem:    Old test file remaining.
Solution:   Delete <A HREF="motion.html#it">it</A>.
Files:      src/testdir/test_search_mbyte.ok

Patch 8.0.1274
Problem:    <A HREF="builtin.html#setbufline()">setbufline()</A> fails when using <A HREF="fold.html#folding">folding</A>.
Solution:   Set &quot;curwin&quot; if needed. (Ozaki Kiichi, closes #2293)
Files:      src/evalfunc.c, src/testdir/test_bufline.vim

Patch 8.0.1275
Problem:    <A HREF="autocmd.html#CmdlineLeave">CmdlineLeave</A> autocmd prevents fold from opening. (Waivek)
Solution:   Save and restore KeyTyped. (closes #2305)
Files:      src/fileio.c

Patch 8.0.1276
Problem:    Typed key is lost when the <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> is closed in exit
            callback. (Gabriel Barta)
Solution:   When the current <A HREF="windows.html#window">window</A> changes bail out of the wait loop. (closes
            #2302)
Files:      src/misc2.c, src/terminal.c

Patch 8.0.1277
Problem:    Terminal <A HREF="windows.html#window">window</A> CR-NL conversions may cause problems.
Solution:   Avoid most conversions, only <A HREF="pi_netrw.html#fetch">fetch</A> the current backspace key value
            from the tty. (mostly by Ozaki Kiichi, closes #2278)
Files:      src/terminal.c

Patch 8.0.1278
Problem:    <A HREF="gui.html#GUI">GUI</A> <A HREF="windows.html#window">window</A> always resizes when adding/removing a scrollbar,
            toolbar, etc.
Solution:   Add the '<A HREF="motion.html#k">k</A>' flag in <A HREF="options.html#'guioptions'">'guioptions'</A> to keep the <A HREF="gui.html#GUI">GUI</A> <A HREF="windows.html#window">window</A> size and
            change the number of lines/columns instead. (Ychin, closes #703)
Files:      runtime/doc/options.txt, src/gui.c, src/gui_gtk_x11.c,
            src/gui_w32.c, src/option.h

Patch 8.0.1279
Problem:    Initializing <A HREF="gui.html#menus">menus</A> can be slow, especially when there are many
            keymaps, color schemes, etc.
Solution:   Do the globbing for runtime files lazily. (Ken Takata)
Files:      runtime/doc/gui.txt, runtime/menu.vim

Patch 8.0.1280
Problem:    <A HREF="if_pyth.html#Python">Python</A> <A HREF="eval.html#None">None</A> cannot be converted to a Vim type.
Solution:   Convert <A HREF="motion.html#it">it</A> to <A HREF="eval.html#v:none">v:none</A>. (Ken Takata)
Files:      src/if_py_both.h, src/testdir/test86.ok, src/testdir/test87.ok,
            runtime/doc/if_pyth.txt

Patch 8.0.1281
Problem:    Loading file type detection slows down <A HREF="starting.html#startup">startup</A>.
Solution:   Move <A HREF="eval.html#functions">functions</A> to an <A HREF="eval.html#autoload">autoload</A> <A HREF="usr_41.html#script">script</A>.
Files:      runtime/filetype.vim, runtime/autoload/filetype.vim,
            runtime/scripts.vim

Patch 8.0.1282 (after 8.0.1281)
Problem:    <A HREF="map.html#script-local">script-local</A> variable defined in the wrong <A HREF="usr_41.html#script">script</A>
Solution:   Move variable to autoload/filetype.vim.
Files:      runtime/filetype.vim, runtime/autoload/filetype.vim

Patch 8.0.1283
Problem:    Test 86 fails under ASAN.
Solution:   Fix that an item was added to a dictionary <A HREF="if_cscop.html#twice">twice</A>.
Files:      src/if_py_both.h

Patch 8.0.1284
Problem:    Loading file type detection slows down <A HREF="starting.html#startup">startup</A>.
Solution:   Store the last <A HREF="pattern.html#pattern">pattern</A> of an <A HREF="autocmd.html#autocommand">autocommand</A> event to make appending
            quicker.
Files:      src/fileio.c

Patch 8.0.1285
Problem:    Distributed <A HREF="eval.html#autoload">autoload</A> files may clash with user files. (Andy
            Wokula)
Solution:   Use the &quot;autoload/dist&quot; directory.
Files:      runtime/filetype.vim, runtime/autoload/filetype.vim,
            runtime/autoload/dist/ft.vim, runtime/scripts.vim, Filelist,
            src/Makefile, nsis/gvim.nsi

Patch 8.0.1286
Problem:    Occasional crash when using a <A HREF="channel.html#channel">channel</A>. (Marek)
Solution:   Decrement reference <A HREF="intro.html#count">count</A> later. (closes #2315)
Files:      src/channel.c

Patch 8.0.1287
Problem:    The temp file used when updating the <A HREF="starting.html#viminfo">viminfo</A> file may have the
            wrong permissions if setting the group fails.
Solution:   Check if the group matches and reduce permissions if not.
Files:      src/ex_cmds.c

Patch 8.0.1288
Problem:    <A HREF="gui.html#GUI">GUI</A>: cannot drag the statusline of a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Handle the TERMINAL state. (Hirohito Higashi)
Files:      src/gui.c

Patch 8.0.1289
Problem:    Mkview always includes the local directory.
Solution:   Add the &quot;curdir&quot; value in <A HREF="options.html#'viewoptions'">'viewoptions'</A>. (Eric Roberts, closes
            #2316)
Files:      runtime/doc/options.txt, runtime/doc/starting.txt, src/ex_docmd.c,
            src/option.c

Patch 8.0.1290
Problem:    seq_cur of <A HREF="builtin.html#undotree()">undotree()</A> wrong after <A HREF="undo.html#undo">undo</A>.
Solution:   Get the actual sequence number instead of decrementing the current
            one. (Ozaki Kiichi, closes #2319)
Files:      src/undo.c, src/testdir/test_undo.vim

Patch 8.0.1291
Problem:    C indent wrong when &#42; immediately follows comment. (John Bowler)
Solution:   Do not see &quot;/*&quot; after &quot;*&quot; <A HREF="motion.html#as">as</A> a comment start. (closes #2321)
Files:      src/search.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 8.0.1292
Problem:    Quick clicks in the <A HREF="gui.html#WinBar">WinBar</A> start <A HREF="visual.html#Visual">Visual</A> mode.
Solution:   Use a double click in the <A HREF="gui.html#WinBar">WinBar</A> like a normal click.
Files:      src/ui.c

Patch 8.0.1293
Problem:    Setting a breakpoint in the <A HREF="terminal.html#terminal">terminal</A> debugger sometimes fails.
Solution:   Interrupt the program if needed.  Set the interface to async.
Files:      runtime/pack/dist/opt/termdebug/plugin/termdebug.vim,
            runtime/doc/terminal.txt

Patch 8.0.1294
Problem:    <A HREF="gui.html#GUI">GUI</A>: get stuck when splitting a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Stop blinking when values become zero. (Hirohito Higashi)
Files:      src/gui.c

Patch 8.0.1295
Problem:    Cannot automatically get a server name in a <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Add the --enable-autoservername flag to configure. (Cimbali,
            closes #2317)
Files:      runtime/doc/eval.txt, runtime/doc/various.txt, src/config.h.in,
            src/configure.ac, src/auto/configure, src/evalfunc.c,
            src/feature.h, src/main.c, src/version.c, src/Makefile

Patch 8.0.1296 (after 8.0.1294)
Problem:    Checking the same condition <A HREF="if_cscop.html#twice">twice</A>. (John Marriott)
Solution:   Check blinkwait.
Files:      src/gui.c

Patch 8.0.1297
Problem:    <A HREF="various.html#+autoservername">+autoservername</A> does not show enabled on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Always define the flag on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>. (Ken Takata)
Files:      src/feature.h

Patch 8.0.1298
Problem:    Missing test file.
Solution:   Add samples/test000. (Christian Brabandt)
Files:      src/testdir/samples/test000, Filelist

Patch 8.0.1299
Problem:    Bracketed paste does not work well in <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Send translated <A HREF="eval.html#string">string</A> to <A HREF="channel.html#job">job</A> right away. (Ozaki Kiichi, closes
            #2341)
Files:      src/terminal.c

Patch 8.0.1300
Problem:    File permissions may end up wrong when <A HREF="editing.html#writing">writing</A>.
Solution:   Use fchmod() instead of chmod() when possible.  Don't truncate
            until we know we can change the file.
Files:      src/os_unix.c, src/proto/os_unix.pro, src/configure.ac,
            src/auto/configure, src/config.h.in, src/fileio.c

Patch 8.0.1301
Problem:    Generated <A HREF="uganda.html#license">license</A> file for NSIS has a <A HREF="options.html#modeline">modeline</A>.
Solution:   Adjust the <A HREF="pattern.html#pattern">pattern</A> for sed. (Ken Takata)
Files:      runtime/doc/Makefile

Patch 8.0.1302
Problem:    Still too many old style tests.
Solution:   Convert a few more tests to new style. (Yegappan Lakshmanan,
            closes #2326)
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_ming.mak,
            src/testdir/Make_vms.mms, src/testdir/runtest.vim,
            src/testdir/test68.in, src/testdir/test68.ok,
            src/testdir/test73.in, src/testdir/test73.ok,
            src/testdir/test_close_count.in, src/testdir/test_close_count.ok,
            src/testdir/test_close_count.vim,
            src/testdir/test_erasebackword.in,
            src/testdir/test_erasebackword.ok,
            src/testdir/test_erasebackword.vim,
            src/testdir/test_find_complete.vim, src/testdir/test_fixeol.in,
            src/testdir/test_fixeol.ok, src/testdir/test_fixeol.vim,
            src/testdir/test_listchars.in, src/testdir/test_listchars.ok,
            src/testdir/test_listchars.vim, src/testdir/test_textformat.vim

Patch 8.0.1303
Problem:    <A HREF="options.html#'ttymouse'">'ttymouse'</A> is not set to &quot;sgr&quot; for Terminal.app and Iterm2.
Solution:   Recognize Iterm2 by the termresponse.
Files:      src/term.c

Patch 8.0.1304
Problem:    CTRL-G/CTRL-T don't work with incsearch and empty <A HREF="pattern.html#pattern">pattern</A>.
Solution:   Use the last search <A HREF="pattern.html#pattern">pattern</A>. (Christian Brabandt, closes #2292)
Files:      src/ex_getln.c, src/proto/search.pro, src/search.c,
            src/testdir/test_search.vim

Patch 8.0.1305
Problem:    <A HREF="builtin.html#writefile()">writefile()</A> never calls fsync().
Solution:   Follow the <A HREF="options.html#'fsync'">'fsync'</A> option with override to enable or disable.
Files:      src/fileio.c, src/evalfunc.c, runtime/doc/eval.txt, src/globals.h,
            src/testdir/test_writefile.vim

Patch 8.0.1306
Problem:    ASAN error stack trace is not useful.
Solution:   Add &quot;asan_symbolize&quot;. (James McCoy, closes #2344)
Files:      .travis.yml

Patch 8.0.1307 (after 8.0.1300)
Problem:    Compiler warning for ignoring return value of ftruncate(). (Tony
            Mechelynck)
Solution:   Assign returned value to &quot;ignore&quot;.
Files:      src/fileio.c

Patch 8.0.1308
Problem:    The &quot;Reading from stdin&quot; message may be undesired and there is no
            <A HREF="starting.html#easy">easy</A> way to skip <A HREF="motion.html#it">it</A>.
Solution:   Don't show the message with <A HREF="starting.html#--not-a-term">--not-a-term</A> was used.
Files:      src/fileio.c

Patch 8.0.1309
Problem:    Cannot use <A HREF="options.html#'balloonexpr'">'balloonexpr'</A> in a <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Add <A HREF="options.html#'balloonevalterm'">'balloonevalterm'</A> and add code to handle mouse movements in a
            <A HREF="terminal.html#terminal">terminal</A>. Initial implementation for <A HREF="os_unix.html#Unix">Unix</A> with <A HREF="gui.html#GUI">GUI</A>.
Files:      src/option.c, src/option.h, src/os_unix.c, src/proto/os_unix.pro,
            src/feature.h, src/misc2.c, src/keymap.h, src/edit.c,
            src/ex_getln.c, src/message.c, src/misc1.c, src/normal.c,
            src/terminal.c, src/getchar.c, src/ex_cmds2.c, src/gui_beval.c,
            src/proto/gui_beval.pro, src/evalfunc.c, src/popupmnu.c,
            src/proto/popupmnu.pro, src/version.c, src/globals.h, src/gui.c,
            runtime/doc/options.txt, src/term.c,
            runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.0.1310
Problem:    Cproto generates <A HREF="message.html#errors">errors</A> because of missing type.
Solution:   Define _Float128 when generating prototypes.
Files:      src/vim.h

Patch 8.0.1311
Problem:    No test for <A HREF="builtin.html#strpart()">strpart()</A>.
Solution:   Add a test. (Dominique Pelle, closes #2347)
Files:      src/testdir/test_functions.vim

Patch 8.0.1312 (after 8.0.1309)
Problem:    <A HREF="builtin.html#balloon_show()">balloon_show()</A> only works in <A HREF="terminal.html#terminal">terminal</A> when compiled with the <A HREF="gui.html#GUI">GUI</A>.
Solution:   Add FEAT_BEVAL_GUI and refactor to move common code out of the <A HREF="gui.html#GUI">GUI</A>
            specific file.
Files:      src/feature.h, src/evalfunc.c, src/gui.c, src/gui_athena.c,
            src/gui_beval.c, src/proto/gui_beval.pro, src/beval.c,
            src/proto/beval.pro, src/gui_motif.c, src/gui_w32.c,
            src/gui_x11.c, src/integration.c, src/workshop.c, src/menu.c,
            src/netbeans.c, src/option.c, src/os_unix.c, src/os_win32.c,
            src/syntax.c, src/version.c, src/gui.h, src/gui_beval.h,
            src/vim.h, src/beval.h, src/option.h, src/ex_cmds2.c, src/ui.c,
            src/getchar.c, src/normal.c, src/popupmnu.c, src/globals.h,
            src/Makefile, src/Make_cyg_ming.mak, src/Make_mvc.mak,
            src/Make_vms.mms, Filelist

Patch 8.0.1313 (after 8.0.1312)
Problem:    Missing dependencies cause parallel make to fail.
Solution:   Update dependencies.
Files:      src/Makefile

Patch 8.0.1314 (after 8.0.1312)
Problem:    Build fails on <A HREF="os_mac.html#Mac">Mac</A>. (chdiza)
Solution:   Add #ifdef around <A HREF="gui.html#GUI">GUI</A> fields.
Files:      src/beval.h

Patch 8.0.1315 (after 8.0.1312)
Problem:    Build still fails on <A HREF="os_mac.html#Mac">Mac</A>. (chdiza)
Solution:   Remove bogus typedef.
Files:      src/os_macosx.m

Patch 8.0.1316 (after 8.0.1312)
Problem:    Build still still fails on <A HREF="os_mac.html#Mac">Mac</A>. (chdiza)
Solution:   Remove another bogus typedef.
Files:      src/os_mac_conv.c

Patch 8.0.1317
Problem:    Accessing freed memory in <A HREF="terminal.html#term_wait()">term_wait()</A>. (Dominique Pelle)
Solution:   Check that the buffer still exists.
Files:      src/terminal.c

Patch 8.0.1318
Problem:    Terminal balloon only shows one line.
Solution:   Split into several lines in a clever way.  Add <A HREF="builtin.html#balloon_split()">balloon_split()</A>.
            Make <A HREF="builtin.html#balloon_show()">balloon_show()</A> accept a <A HREF="eval.html#list">list</A> in the <A HREF="terminal.html#terminal">terminal</A>.
Files:      src/popupmnu.c, src/proto/popupmnu.pro, src/evalfunc.c,
            src/beval.c, src/proto/beval.pro, src/testdir/test_popup.vim,
            runtime/doc/eval.txt,
            runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.0.1319
Problem:    Can't build <A HREF="gui.html#GUI">GUI</A> on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Don't define the <A HREF="builtin.html#balloon_split()">balloon_split()</A> function in a GUI-only build.
Files:      src/evalfunc.c, runtime/doc/eval.txt

Patch 8.0.1320
Problem:    Popup test fails on GUI-only build.
Solution:   Don't test <A HREF="builtin.html#balloon_split()">balloon_split()</A> when it's not available.
Files:      src/testdir/test_popup.vim

Patch 8.0.1321
Problem:    Can't build huge version with Athena. (Mark Kelly)
Solution:   Move including beval.h to before structs.h. Include beval.pro like
            other proto files.
Files:      src/vim.h, src/beval.h, src/proto.h

Patch 8.0.1322
Problem:    Textformat test isn't run. (Yegappan Lakshmanan)
Solution:   Add target to the <A HREF="eval.html#list">list</A> of tests.
Files:      src/testdir/Make_all.mak

Patch 8.0.1323
Problem:    Mouse events in a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> may cause endless loop.
Solution:   Adjust position computation.  Don't stuff a mouse event when
            coming from normal_cmd().
Files:      src/normal.c, src/terminal.c

Patch 8.0.1324
Problem:    Some xterm sends different mouse move codes.
Solution:   Also accept 0x80 <A HREF="motion.html#as">as</A> a move event.
Files:      src/term.c

Patch 8.0.1325
Problem:    More tests are not run.
Solution:   Add targets to the <A HREF="eval.html#list">list</A> of tests. (Yegappan Lakshmanan)
Files:      src/testdir/Make_all.mak

Patch 8.0.1326
Problem:    Largefile test fails on CI, glob test on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Remove largefile test from <A HREF="eval.html#list">list</A> of all tests. Don't run
            Test_glob() on non-unix systems.  More cleanup. (Yegappan
            Lakshmanan, closes #2354)
Files:      src/testdir/Make_all.mak, src/testdir/test_escaped_glob.vim,
            src/testdir/test_plus_arg_edit.vim

Patch 8.0.1327
Problem:    New proto file missing from <A HREF="intro.html#distribution">distribution</A>.
Solution:   Add <A HREF="motion.html#it">it</A>. (closes #2355)
Files:      Filelist

Patch 8.0.1328
Problem:    Trouble when using &quot;:term ++close&quot; with autocmd. (Gabriel Barta)
Solution:   Use aucmd_prepbuf() and aucmd_restbuf() instead of setting curbuf.
            (closes #2339)
Files:      src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.1329
Problem:    When a flaky test fails <A HREF="motion.html#it">it</A> also often fails the second time.
Solution:   Sleep a couple of seconds before the second try.
Files:      src/testdir/runtest.vim

Patch 8.0.1330
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="channel.html#job">job</A> in <A HREF="terminal.html#terminal">terminal</A> can't get back to Vim.
Solution:   set VIM_SERVERNAME in the environment. (Yasuhiro Matsumoto, closes
            #2360)
Files:      runtime/doc/terminal.txt, src/os_win32.c, src/proto/os_win32.pro,
            src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.1331
Problem:    Possible crash when <A HREF="windows.html#window">window</A> can be zero lines high. (Joseph
            Dornisch)
Solution:   Only set w_fraction if the <A HREF="windows.html#window">window</A> is at least two lines high.
Files:      src/window.c

Patch 8.0.1332
Problem:    Highlighting in <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="windows.html#window">window</A> could be better. (Axel Bender)
Solution:   Use the qfSeparator highlight item. (Yegappan Lakshmanan)
Files:      src/quickfix.c

Patch 8.0.1333
Problem:    Some tests are run <A HREF="if_cscop.html#twice">twice</A>.
Solution:   Invoked most <A HREF="mbyte.html#utf8">utf8</A> tests only from test_alot_utf8. (Yegappan
            Lakshmanan, closes #2369)
Files:      src/testdir/Make_all.mak, src/testdir/test_alot_utf8.vim,
            src/testdir/test_mksession_utf8.vim

Patch 8.0.1334
Problem:    Splitting a <A HREF="windows.html#window">window</A> with a <A HREF="gui.html#WinBar">WinBar</A> damages <A HREF="windows.html#window">window</A> layout.
            (Lifepillar)
Solution:   Take the winbar into account when computing the new <A HREF="windows.html#window">window</A>
            position.  Add WINBAR_HEIGHT().
Files:      src/vim.h, src/window.c

Patch 8.0.1335
Problem:    <A HREF="builtin.html#writefile()">writefile()</A> using fsync() may give an error for a device.
            (Yasuhiro Matsumoto)
Solution:   Ignore fsync() failing. (closes #2373)
Files:      src/evalfunc.c

Patch 8.0.1336
Problem:    Cannot use imactivatefunc() unless compiled with <A HREF="various.html#+xim">+xim</A>.
Solution:   Allow using imactivatefunc() when not compiled with <A HREF="various.html#+xim">+xim</A>.
            (Yasuhiro Matsumoto, closes #2349)
Files:      runtime/doc/options.txt, runtime/doc/mbyte.txt, src/mbyte.c,
            src/option.c, src/option.h, src/structs.h,
            src/testdir/test_iminsert.vim, src/Makefile,
            src/testdir/Make_all.mak, src/vim.h

Patch 8.0.1337 (after 8.0.1336)
Problem:    Typo in #ifdef.
Solution:   Fix the #if line.
Files:      src/mbyte.c

Patch 8.0.1338 (after 8.0.1337)
Problem:    USE_IM_CONTROL is confusing and incomplete.
Solution:   Just use FEAT_MBYTE.  Call <A HREF="options.html#'imactivatefunc'">'imactivatefunc'</A> also without <A HREF="gui.html#GUI">GUI</A>.
Files:      src/vim.h, src/edit.c, src/ex_getln.c, src/getchar.c, src/gui.c,
            src/gui_mac.c, src/gui_w32.c, src/mbyte.c, src/normal.c,
            src/option.c, src/ui.c, src/globals.h, src/option.h

Patch 8.0.1339
Problem:    No test for what 8.0.1335 fixes.
Solution:   Add a test. (Yasuhiro Matsumoto, closes #2373)
Files:      src/testdir/test_writefile.vim

Patch 8.0.1340
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: cannot build <A HREF="gui.html#GUI">GUI</A> without <A HREF="mbyte.html#IME">IME</A>.
Solution:   Define im_get_status() and im_set_active() when <A HREF="mbyte.html#IME">IME</A> is not used.
Files:      src/mbyte.c

Patch 8.0.1341
Problem:    <A HREF="options.html#'imactivatefunc'">'imactivatefunc'</A> test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Skip the text.
Files:      src/testdir/test_iminsert.vim, runtime/doc/options.txt

Patch 8.0.1342
Problem:    Cannot build with <A HREF="gui_x11.html#Motif">Motif</A> and <A HREF="mbyte.html#multibyte">multibyte</A>. (Mohamed Boughaba)
Solution:   Use the right input <A HREF="eval.html#method">method</A> status flag. (closes #2374)
Files:      src/mbyte.c

Patch 8.0.1343
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: does not show colored emojis.
Solution:   Implement colored emojis. Improve drawing speed. Make 'taamode'
            work. (Taro Muraoka, Yasuhiro Matsumoto, Ken Takata, close #2375)
Files:      appveyor.yml, runtime/doc/options.txt, src/gui_dwrite.cpp,
            src/gui_dwrite.h, src/gui_w32.c, src/proto/gui_w32.pro

Patch 8.0.1344
Problem:    Using <A HREF="options.html#'imactivatefunc'">'imactivatefunc'</A> in the <A HREF="gui.html#GUI">GUI</A> does not work.
Solution:   Do not use <A HREF="options.html#'imactivatefunc'">'imactivatefunc'</A> and <A HREF="options.html#'imstatusfunc'">'imstatusfunc'</A> in the <A HREF="gui.html#GUI">GUI</A>.
Files:      runtime/doc/options.txt, src/mbyte.c,
            src/testdir/test_iminsert.vim

Patch 8.0.1345
Problem:    Race condition between stat() and open() for the <A HREF="starting.html#viminfo">viminfo</A> temp
            file. (Simon Ruderich)
Solution:   use open() with O_EXCL to atomically check if the file exists.
            Don't try using a temp file, renaming <A HREF="motion.html#it">it</A> will fail anyway.
Files:      src/ex_cmds.c

Patch 8.0.1346
Problem:    Crash when passing 50 char <A HREF="eval.html#string">string</A> to <A HREF="builtin.html#balloon_split()">balloon_split()</A>.
Solution:   Fix off-by-one error.
Files:      src/testdir/test_popup.vim, src/popupmnu.c

Patch 8.0.1347
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: build broken by misplaced curly.
Solution:   Move curly after #endif.
Files:      src/ex_cmds.c

Patch 8.0.1348
Problem:    Make testclean deletes <A HREF="usr_41.html#script">script</A> file on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Rename file to avoid <A HREF="motion.html#it">it</A> starting with an &quot;<A HREF="change.html#x">x</A>&quot;.
Files:      src/testdir/xterm_ramp.vim, src/testdir/color_ramp.vim, Filelist

Patch 8.0.1349
Problem:    Options test fails when using <A HREF="gui_x11.html#Motif">Motif</A> or <A HREF="gui_x11.html#GTK">GTK</A> <A HREF="gui.html#GUI">GUI</A>.
Solution:   Use &quot;fixed&quot; instead of &quot;fixedsys&quot; for <A HREF="os_unix.html#Unix">Unix</A>. Don't try &quot;xxx&quot; for
            guifonteset.  Don't set <A HREF="options.html#'termencoding'">'termencoding'</A> to anything but &quot;<A HREF="mbyte.html#utf-8">utf-8</A>&quot; for
            <A HREF="gui_x11.html#GTK">GTK</A>.  Give an error if <A HREF="options.html#'termencoding'">'termencoding'</A> can't be converted.
Files:      src/testdir/gen_opt_test.vim, src/option.c

Patch 8.0.1350
Problem:    Cannot build with <A HREF="various.html#+eval">+eval</A> and -multi_byte.
Solution:   Adjust #ifdefs. (John Marriott)  Always include the multi_byte
            feature when an input <A HREF="eval.html#method">method</A> feature is enabled.
Files:      src/mbyte.c, src/feature.h

Patch 8.0.1351
Problem:    Warning for unused <A HREF="eval.html#variables">variables</A> building with MinGW.
Solution:   Change a few #ifdefs (suggested by John Marriott). Remove
            superfluous checks of FEAT_MBYTE.
Files:      src/gui_w32.c

Patch 8.0.1352
Problem:    Dead URLs in the help go unnoticed.
Solution:   Add a <A HREF="usr_41.html#script">script</A> to check URLs in the help files. (Christian Brabandt)
Files:      runtime/doc/Makefile, runtime/doc/test_urls.vim, Filelist

Patch 8.0.1353
Problem:    <A HREF="autocmd.html#QuickFixCmdPost">QuickFixCmdPost</A> is not used consistently.
Solution:   Invoke <A HREF="autocmd.html#QuickFixCmdPost">QuickFixCmdPost</A> consistently after <A HREF="autocmd.html#QuickFixCmdPre">QuickFixCmdPre</A>.
            (Yegappan Lakshmanan, closes #2377)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1354
Problem:    Shift-Insert doesn't always work in <A HREF="os_win32.html#MS-Windows">MS-Windows</A> console.
Solution:   Handle K_NUL differently. (Yasuhiro Matsumoto, closes #2381)
Files:      src/os_win32.c

Patch 8.0.1355 (after 8.0.1354)
Problem:    Cursor keys don't work in <A HREF="os_win32.html#MS-Windows">MS-Windows</A> console.
Solution:   Revert the previous patch.  Also delete dead code.
Files:      src/os_win32.c

Patch 8.0.1356
Problem:    Using simalt in a <A HREF="autocmd.html#GUIEnter">GUIEnter</A> <A HREF="autocmd.html#autocommand">autocommand</A> inserts strange characters.
            (Chih-Long Chang)
Solution:   Ignore K_NOP in <A HREF="insert.html#Insert">Insert</A> mode. (closes #2379)
Files:      src/edit.c, src/ex_getln.c

Patch 8.0.1357
Problem:    Startup test fails on OpenBSD. (Edd Barrett)
Solution:   Check for &quot;BSD&quot; instead of &quot;FreeBSD&quot; being defined. (James McCoy,
            closes #2376, closes #2378)
Files:      src/vim.h

Patch 8.0.1358
Problem:    Undercurl is not used in the <A HREF="terminal.html#terminal">terminal</A>. (Kovid Goyal)
Solution:   Only fall back to <A HREF="syntax.html#underline">underline</A> when <A HREF="syntax.html#undercurl">undercurl</A> highlighting is not
            defined. (closes #1306)
Files:      src/screen.c

Patch 8.0.1359
Problem:    Libvterm ANSI colors can not always be recognized from the RGB
            values. The default color is wrong when <A HREF="term.html#t_RB">t_RB</A> is empty.
Solution:   Add the ANSI color index to VTermColor.
Files:      src/libvterm/include/vterm.h, src/libvterm/src/pen.c,
            src/terminal.c

Patch 8.0.1360
Problem:    The Terminal highlighting doesn't work in a <A HREF="terminal.html#terminal">terminal</A>. (Ozaki
            Kiichi)
Solution:   Use the Terminal highlighting when the cterm index is zero.
Files:      src/terminal.c

Patch 8.0.1361
Problem:    Some users don't want to <A HREF="diff.html#diff">diff</A> with hidden <A HREF="windows.html#buffers">buffers</A>.
Solution:   Add the &quot;hiddenoff&quot; item to <A HREF="options.html#'diffopt'">'diffopt'</A>. (Alisue, closes #2394)
Files:      runtime/doc/options.txt, src/buffer.c, src/diff.c,
            src/proto/diff.pro, src/testdir/test_diffmode.vim

Patch 8.0.1362
Problem:    Terminal <A HREF="windows.html#window">window</A> colors wrong when using Terminal highlighting.
Solution:   Set ansi_index when setting the default color.  Also cache the
            color index for Terminal. (Ozaki Kiichi, closes #2393)
Files:      src/libvterm/src/pen.c, src/proto/terminal.pro, src/syntax.c,
            src/terminal.c

Patch 8.0.1363
Problem:    Recovering does not work when swap file ends in .stz.
Solution:   Check for all possible swap file names. (Elfling, closes #2395,
            closes #2396)
Files:      src/memline.c

Patch 8.0.1364
Problem:    There is no <A HREF="starting.html#easy">easy</A> way to get the <A HREF="windows.html#window">window</A> position.
Solution:   Add <A HREF="builtin.html#win_screenpos()">win_screenpos()</A>.
Files:      src/evalfunc.c, src/testdir/test_window_cmd.vim,
            runtime/doc/eval.txt

Patch 8.0.1365
Problem:    When one <A HREF="channel.html#channel">channel</A> test fails others fail <A HREF="motion.html#as">as</A> well.
Solution:   Stop the <A HREF="channel.html#job">job</A> after a failure.  Also add a couple of tests to the
            <A HREF="eval.html#list">list</A> of flaky tests.
Files:      src/testdir/test_channel.vim, src/testdir/runtest.vim

Patch 8.0.1366
Problem:    Balloon shows when cursor is in <A HREF="gui.html#WinBar">WinBar</A>.
Solution:   Don't show the balloon when row is negative.
Files:      src/beval.c

Patch 8.0.1367
Problem:    <A HREF="terminal.html#terminal">terminal</A> test hangs, executing abcde. (Stucki)
Solution:   Rename abcde to abxde.
Files:      src/testdir/test_terminal.vim

Patch 8.0.1368
Problem:    Cannot drag status line or vertical separator of new <A HREF="terminal.html#terminal">terminal</A>
            <A HREF="windows.html#window">window</A>. (UncleBill)
Solution:   Adjust mouse row and column computation. (Yasuhiro Matsumoto,
            closes #2410)
Files:      src/terminal.c

Patch 8.0.1369
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: drawing <A HREF="syntax.html#underline">underline</A>, curl and <A HREF="syntax.html#strikethrough">strikethrough</A> is slow,
            mFallbackDC not properly updated.
Solution:   Several performance improvements. (Ken Takata, Taro Muraoka,
            Yasuhiro Matsumoto, closes #2401)
Files:      runtime/doc/options.txt, src/gui_dwrite.cpp, src/gui_dwrite.h,
            src/gui_w32.c

Patch 8.0.1370
Problem:    <A HREF="eval.html#Channel">Channel</A> test for callback is flaky.
Solution:   Add the test to the <A HREF="eval.html#list">list</A> of flaky tests.
Files:      src/testdir/runtest.vim

Patch 8.0.1371
Problem:    Shift-Insert doesn't always work in <A HREF="os_win32.html#MS-Windows">MS-Windows</A> console.
Solution:   Handle K_NUL differently if the second character is more than one
            byte. (Yasuhiro Matsumoto, closes #2381)
Files:      src/os_win32.c

Patch 8.0.1372
Problem:    Profile log may be truncated halfway a character.
Solution:   Find the start of the character. (Ozaki Kiichi, closes #2385)
Files:      src/ex_cmds2.c, src/testdir/test_profile.vim

Patch 8.0.1373
Problem:    No error when setting <A HREF="options.html#'renderoptions'">'renderoptions'</A> to an invalid value before
            starting the <A HREF="gui.html#GUI">GUI</A>.
Solution:   Always check the value. (Ken Takata, closes #2413)
Files:      src/gui_w32.c, src/option.c

Patch 8.0.1374
Problem:    <A HREF="change.html#CTRL-A">CTRL-A</A> does not work with an empty line. (Alex)
Solution:   Decrement the end only once. (Hirohito Higashi, closes #2387)
Files:      src/ops.c, src/testdir/test_increment.vim

Patch 8.0.1375
Problem:    Window size wrong after maximizing with <A HREF="gui.html#WinBar">WinBar</A>. (Lifepillar)
Solution:   Fix height computations. Redraw <A HREF="windows.html#window">window</A> when <A HREF="motion.html#it">it</A> is zero height but
            has a <A HREF="gui.html#WinBar">WinBar</A>. (closes #2356)
Files:      src/window.c, src/screen.c, src/vim.h

Patch 8.0.1376
Problem:    Cursor in <A HREF="terminal.html#terminal">terminal</A> not always updated.
Solution:   Call gui_mch_flush(). (Ken Takata)
Files:      src/terminal.c

Patch 8.0.1377
Problem:    Cannot call a <A HREF="eval.html#dict">dict</A> function in autoloaded <A HREF="eval.html#dict">dict</A>.
Solution:   Call get_lval() passing the read-only flag.
Files:      src/userfunc.c, src/eval.c, src/testdir/sautest/autoload/foo.vim,
            src/testdir/sautest/autoload/globone.vim,
            src/testdir/sautest/autoload/globtwo.vim,
            src/testdir/test_escaped_glob.vim, src/Makefile,
            src/testdir/test_autoload.vim, src/Makefile,
            src/testdir/Make_all.mak

Patch 8.0.1378
Problem:    Autoload <A HREF="usr_41.html#script">script</A> sources itself when defining function.
Solution:   Pass TFN_NO_AUTOLOAD to trans_function_name(). (Yasuhiro
            Matsumoto, closes #2423)
Files:      src/userfunc.c, src/testdir/test_autoload.vim,
            src/testdir/sautest/autoload/sourced.vim

Patch 8.0.1379
Problem:    Configure check for selinux does not check for header file.
Solution:   Add an AC_CHECK_HEADER(). (Benny Siegert)
Files:      src/configure.ac, src/auto/configure

Patch 8.0.1380
Problem:    When recovering a file with &quot;vim <A HREF="starting.html#-r">-r</A> swapfile&quot; the <A HREF="message.html#hit-enter">hit-enter</A> prompt
            is at the top of the <A HREF="windows.html#window">window</A>.
Solution:   Invalidate the cursor position.
Files:      src/term.c

Patch 8.0.1381
Problem:    <A HREF="channel.html#ch_readraw()">ch_readraw()</A> waits for NL if <A HREF="channel.html#channel">channel</A> mode is NL.
Solution:   Pass a &quot;raw&quot; flag to channel_read_block(). (Yasuhiro Matsumoto)
Files:      src/channel.c, src/proto/channel.pro,
            src/testdir/test_channel.vim, src/testdir/test_channel_pipe.py

Patch 8.0.1382
Problem:    Get &quot;no write since last change&quot; message if a <A HREF="terminal.html#terminal">terminal</A> is open.
            (Fritz mehner)
Solution:   Don't consider a buffer changed if it's a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Files:      src/ex_cmds.c, src/undo.c, src/proto/undo.pro

Patch 8.0.1383
Problem:    Local additions in help skips some files. (joshklod)
Solution:   Check the base file name length equals.
Files:      src/ex_cmds.c, src/testdir/test_help.vim

Patch 8.0.1384
Problem:    Not enough <A HREF="quickfix.html#quickfix">quickfix</A> help; confusing <A HREF="windows.html#winid">winid</A>.
Solution:   Add more examples in the help. When the <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="windows.html#window">window</A> is not
            present, return zero for <A HREF="builtin.html#getqflist()">getqflist()</A> with '<A HREF="windows.html#winid">winid</A>'. Add more tests
            for jumping to <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A> entries. (Yegappan Lakshmanan, closes
            #2427)
Files:      runtime/doc/eval.txt, runtime/doc/quickfix.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.1385
Problem:    <A HREF="if_pyth.html#Python">Python</A> 3.5 is getting old.
Solution:   Make <A HREF="if_pyth.html#Python">Python</A> 3.6 the default. (Ken Takata, closes #2429)
Files:      runtime/doc/if_pyth.txt, src/INSTALLpc.txt, src/Make_cyg_ming.mak,
            src/Make_mvc.mak, src/bigvim.bat

Patch 8.0.1386
Problem:    Cannot select modified <A HREF="windows.html#buffers">buffers</A> with <A HREF="builtin.html#getbufinfo()">getbufinfo()</A>.
Solution:   Add the &quot;bufmodified&quot; flag. (Yegappan Lakshmanan, closes #2431)
Files:      runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_bufwintabinfo.vim

Patch 8.0.1387
Problem:    Wordcount test is old style.
Solution:   Change into a new style test. (Yegappan Lakshmanan, closes #2434)
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_ming.mak,
            src/testdir/Make_vms.mms, src/testdir/test_wordcount.in,
            src/testdir/test_wordcount.ok, src/testdir/test_wordcount.vim

Patch 8.0.1388
Problem:    Char not overwritten with ambiguous width char, if the ambiguous
            char is single width but we reserve double-width space.
Solution:   First clear the screen cells. (Ozaki Kiichi, closes #2436)
Files:      src/screen.c

Patch 8.0.1389
Problem:    <A HREF="builtin.html#getqflist()">getqflist()</A> items are missing if not set, that makes <A HREF="motion.html#it">it</A> more
            difficult to handle the values.
Solution:   When a value is not available return zero or another invalid
            value. (Yegappan Lakshmanan, closes #2430)
Files:      runtime/doc/eval.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.1390
Problem:    DirectX <A HREF="scroll.html#scrolling">scrolling</A> can be slow, vertical positioning is off.
Solution:   Make scroll slightly faster when using &quot;scrlines:1&quot;. Fix <A HREF="change.html#y">y</A>
            position of displayed text. Fix DirectX with non-utf8 encoding.
            (Ken Takata, closes #2440)
Files:      src/INSTALLpc.txt, src/Make_cyg_ming.mak, src/Make_mvc.mak,
            src/gui_dwrite.cpp, src/gui_w32.c

Patch 8.0.1391
Problem:    Encoding empty <A HREF="eval.html#string">string</A> to JSON sometimes gives &quot;<A HREF="vim9.html#null">null</A>&quot;.
Solution:   Handle NULL <A HREF="eval.html#string">string</A> <A HREF="motion.html#as">as</A> empty <A HREF="eval.html#string">string</A>. (closes #2446)
Files:      src/testdir/test_json.vim, src/json.c

Patch 8.0.1392
Problem:    Build fails with --with-features=huge --disable-channel.
Solution:   Don't enable the <A HREF="terminal.html#terminal">terminal</A> feature when the <A HREF="channel.html#channel">channel</A> feature is
            missing. (Dominique Pelle, closes #2453)
Files:      src/configure.ac, src/auto/configure

Patch 8.0.1393
Problem:    Too much highlighting with <A HREF="options.html#'hlsearch'">'hlsearch'</A> and <A HREF="options.html#'incsearch'">'incsearch'</A> set.
Solution:   Do not highlight matches when the <A HREF="pattern.html#pattern">pattern</A> matches everything.
Files:      src/ex_getln.c

Patch 8.0.1394
Problem:    Cannot intercept a <A HREF="change.html#yank">yank</A> command.
Solution:   Add the <A HREF="autocmd.html#TextYankPost">TextYankPost</A> <A HREF="autocmd.html#autocommand">autocommand</A> event. (Philippe Vaucher et al.,
            closes #2333)
Files:      runtime/doc/autocmd.txt, runtime/doc/eval.txt, src/dict.c,
            src/eval.c, src/fileio.c, src/ops.c, src/proto/dict.pro,
            src/proto/eval.pro, src/proto/fileio.pro,
            src/testdir/test_autocmd.vim, src/vim.h

Patch 8.0.1395
Problem:    It is not <A HREF="starting.html#easy">easy</A> to see if a colorscheme is well written.
Solution:   Add a <A HREF="usr_41.html#script">script</A> that checks for common mistakes. (Christian Brabandt)
Files:      runtime/colors/check_colors.vim, runtime/colors/README.txt

Patch 8.0.1396
Problem:    Memory leak when <A HREF="editing.html#CTRL-G">CTRL-G</A> in search command line fails.
Solution:   Move restore_last_search_pattern to after &quot;if&quot;.
Files:      src/ex_getln.c

Patch 8.0.1397
Problem:    <A HREF="pattern.html#Pattern">Pattern</A> with \&amp; following nothing gives an error.
Solution:   Emit an empty node when needed.
Files:      src/regexp_nfa.c, src/testdir/test_search.vim

Patch 8.0.1398
Problem:    <A HREF="repeat.html#:packadd">:packadd</A> does not load <A HREF="repeat.html#packages">packages</A> from the &quot;start&quot; directory.
            (Alejandro Hernandez)
Solution:   Make <A HREF="repeat.html#:packadd">:packadd</A> look in the &quot;start&quot; directory if those <A HREF="repeat.html#packages">packages</A> were
            not loaded on <A HREF="starting.html#startup">startup</A>.
Files:      src/ex_cmds2.c, src/testdir/test_packadd.vim

Patch 8.0.1399
Problem:    Warnings and <A HREF="message.html#errors">errors</A> when building tiny version. (Tony Mechelynck)
Solution:   Add #ifdefs.
Files:      src/ex_getln.c, src/ops.c

Patch 8.0.1400
Problem:    Color scheme check <A HREF="usr_41.html#script">script</A> shows up <A HREF="motion.html#as">as</A> color scheme.
Solution:   Move <A HREF="motion.html#it">it</A> to the &quot;tools&quot; subdirectory. (closes #2457)
Files:      Filelist, runtime/colors/check_colors.vim,
            runtime/colors/tools/check_colors.vim, runtime/colors/README.txt

Patch 8.0.1401
Problem:    Cannot build with <A HREF="gui_x11.html#GTK">GTK</A> but without <A HREF="mbyte.html#XIM">XIM</A>. (Guido)
Solution:   Adjust #ifdef. (closes #2461)
Files:      src/gui.c

Patch 8.0.1402
Problem:    Crash with nasty <A HREF="autocmd.html#autocommand">autocommand</A>. (gy741, Dominique Pelle)
Solution:   Check that the new current buffer isn't wiped out. (closes #2447)
Files:      src/buffer.c, src/testdir/test_autocmd.vim

Patch 8.0.1403
Problem:    Using freed buffer in <A HREF="quickfix.html#grep">grep</A> command. (gy741, Dominique Pelle)
Solution:   Lock the dummy buffer to avoid <A HREF="autocmd.html#autocommands">autocommands</A> wiping <A HREF="motion.html#it">it</A> out.
Files:      src/quickfix.c, src/testdir/test_autocmd.vim

Patch 8.0.1404
Problem:    Invalid memory access on exit when <A HREF="autocmd.html#autocommands">autocommands</A> wipe out a buffer.
            (gy741, Dominique Pelle)
Solution:   Check if the buffer is still valid. (closes #2449)
Files:      src/main.c

Patch 8.0.1405
Problem:    Duplicated code for getting a typed character. <A HREF="autocmd.html#CursorHold">CursorHold</A> is
            called too often in the <A HREF="gui.html#GUI">GUI</A>. (lilydjwg)
Solution:   Refactor code to move code up from mch_inchar().  Don't fire
            <A HREF="autocmd.html#CursorHold">CursorHold</A> if <A HREF="builtin.html#feedkeys()">feedkeys()</A> was used. (closes #2451)
Files:      src/gui.c, src/proto/gui.pro, src/main.c, src/ui.c,
            src/proto/ui.pro, src/os_unix.c

Patch 8.0.1406
Problem:    Difficult to track changes to a <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A>.
Solution:   Add a &quot;changedtick&quot; value. (Yegappan Lakshmanan, closes #2460)
Files:      runtime/doc/eval.txt, runtime/doc/quickfix.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.1407
Problem:    <A HREF="gui.html#GUI">GUI</A>: <A HREF="autocmd.html#CursorHold">CursorHold</A> may trigger before <A HREF="options.html#'updatetime'">'updatetime'</A> when using <A HREF="builtin.html#timers">timers</A>.
Solution:   Check that <A HREF="options.html#'updatetime'">'updatetime'</A> has passed.
Files:      src/gui.c

Patch 8.0.1408
Problem:    Crash in <A HREF="builtin.html#setqflist()">setqflist()</A>.
Solution:   Check for <A HREF="eval.html#string">string</A> to be NULL. (Dominique Pelle, closes #2464)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1409
Problem:    Buffer overflow in <A HREF="tagsrch.html#:tags">:tags</A> command.
Solution:   Use vim_snprintf(). (Dominique Pelle, closes #2471, closes #2475)
            Add a test.
Files:      src/testdir/test_taglist.vim, src/tag.c

Patch 8.0.1410
Problem:    Hang when using <A HREF="builtin.html#count()">count()</A> with an empty <A HREF="eval.html#string">string</A>.
Solution:   Return zero for an empty <A HREF="eval.html#string">string</A>. (Dominique Pelle, closes #2465)
Files:      runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_functions.vim

Patch 8.0.1411
Problem:    Reading invalid memory with <A HREF="index.html#CTRL-W">CTRL-W</A> <A HREF="cmdline.html#:.">:.</A>
Solution:   Correct the command characters. (closes #2469)
Files:      src/normal.c, src/testdir/test_window_cmd.vim, src/ops.c

Patch 8.0.1412
Problem:    Using free memory using <A HREF="builtin.html#setloclist()">setloclist()</A>. (Dominique Pelle)
Solution:   <A HREF="motion.html#Mark">Mark</A> location <A HREF="eval.html#list">list</A> context <A HREF="motion.html#as">as</A> still in use when needed. (Yegappan
            Lakshmanan, closes #2462)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1413
Problem:    Accessing freed memory in <A HREF="quickfix.html#:cbuffer">:cbuffer</A>.
Solution:   Get <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A> after executing autocmds. (closes #2470)
Files:      src/quickfix.c, src/testdir/test_autocmd.vim

Patch 8.0.1414
Problem:    Accessing freed memory in <A HREF="quickfix.html#:lfile">:lfile</A>.
Solution:   Get the current <A HREF="windows.html#window">window</A> after executing <A HREF="autocmd.html#autocommands">autocommands</A>. (Yegappan
            Lakshmanan, closes #2473)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1415
Problem:    Warning for unused function without <A HREF="builtin.html#timers">timers</A> feature.
Solution:   Add #ifdef. (John Marriott)
Files:      src/gui.c

Patch 8.0.1416
Problem:    Crash when searching for a <A HREF="motion.html#sentence">sentence</A>.
Solution:   Return NUL when getting character at MAXCOL. (closes #2468)
Files:      src/misc1.c, src/misc2.c, src/testdir/test_search.vim,
            src/ex_docmd.c

Patch 8.0.1417
Problem:    Test doesn't search for a <A HREF="motion.html#sentence">sentence</A>. Still fails when searching for
            start of <A HREF="motion.html#sentence">sentence</A>. (Dominique Pelle)
Solution:   Add paren. Check for MAXCOL in dec().
Files:      src/testdir/test_search.vim, src/misc2.c

Patch 8.0.1418
Problem:    No test for expanding backticks.
Solution:   Add a test. (Dominique Pelle, closes #2479)
Files:      src/testdir/test_normal.vim

Patch 8.0.1419
Problem:    Cursor column is not updated after <A HREF="spell.html#]s">]s</A>. (Gary Johnson)
Solution:   Set the curswant flag.
Files:      src/testdir/test_spell.vim, src/normal.c, src/evalfunc.c

Patch 8.0.1420
Problem:    Accessing freed memory in vimgrep.
Solution:   Check that the <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A> is still valid. (Yegappan Lakshmanan,
            closes #2474)
Files:      src/quickfix.c, src/testdir/test_autocmd.vim,
            src/testdir/test_quickfix.vim

Patch 8.0.1421
Problem:    Accessing invalid memory with overlong byte sequence.
Solution:   Check for NUL character. (test by Dominique Pelle, closes #2485)
Files:      src/misc2.c, src/testdir/test_functions.vim

Patch 8.0.1422
Problem:    No fallback to <A HREF="syntax.html#underline">underline</A> when <A HREF="syntax.html#undercurl">undercurl</A> is not set. (Ben Jackson)
Solution:   Check for the value to be empty instead of NULL. (closes #2424)
Files:      src/screen.c

Patch 8.0.1423
Problem:    Error in return not caught by try/catch.
Solution:   Call update_force_abort(). (Yasuhiro Matsumoto, closes #2483)
Files:      src/testdir/test_eval.in, src/testdir/test_eval_stuff.vim,
            src/Makefile, src/testdir/Make_all.mak, src/userfunc.c

Patch 8.0.1424
Problem:    The timer_pause test is flaky on Travis.
Solution:   Accept a longer sleep time on <A HREF="os_mac.html#Mac">Mac</A>.
Files:      src/testdir/test_timers.vim

Patch 8.0.1425
Problem:    <A HREF="builtin.html#execute()">execute()</A> does not work in completion of user command. (thinca)
Solution:   Switch off redir_off and restore <A HREF="motion.html#it">it</A>. (Ozaki Kiichi, closes #2492)
Files:      src/evalfunc.c, src/testdir/test_usercommands.vim

Patch 8.0.1426
Problem:    &quot;<A HREF="editing.html#gf">gf</A>&quot; and <A HREF="cmdline.html#&lt;cfile&gt;">&lt;cfile&gt;</A> don't accept ? and <A HREF="change.html#&amp;">&amp;</A> in URL. (Dmitrii Tcyganok)
Solution:   Check for a URL and allow for extra characters. (closes #2493)
Files:      src/window.c, src/testdir/test_gf.vim

Patch 8.0.1427
Problem:    The <A HREF="windows.html#:leftabove">:leftabove</A> modifier doesn't work for <A HREF="quickfix.html#:copen">:copen</A>.
Solution:   Respect the split modifier. (Yegappan Lakshmanan, closes #2496)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1428
Problem:    Compiler warning on 64 bit <A HREF="os_win32.html#MS-Windows">MS-Windows</A> system.
Solution:   Change type from &quot;int&quot; to &quot;size_t&quot;. (Mike Williams)
Files:      src/ex_getln.c

Patch 8.0.1429
Problem:    Crash when calling <A HREF="terminal.html#term_start()">term_start()</A> with empty argument.
Solution:   Check for invalid argument. (Yasuhiro Matsumoto, closes #2503)
            Fix memory leak.
Files:      src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.1430 (after 8.0.1429)
Problem:    Crash when <A HREF="terminal.html#term_start()">term_start()</A> fails.
Solution:   Initialize winpty_err.
Files:      src/terminal.c

Patch 8.0.1431
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="usr_01.html#vimtutor">vimtutor</A> fails if &#37;TMP&#37; has special chars.
Solution:   Add <A HREF="quotes.html#quotes">quotes</A>. (Tamce, closes #2561)
Files:      vimtutor.bat

Patch 8.0.1432
Problem:    After &quot;<A HREF="quickfix.html#:copen">:copen</A>&quot; can't get the <A HREF="windows.html#window-ID">window-ID</A> of the <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="windows.html#window">window</A>.
            (FalacerSelene)
Solution:   Make <A HREF="motion.html#it">it</A> work without a <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A>.  Add a test. (Yegappan
            Lakshmanan, closes #2541)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1433
Problem:    Illegal memory access after <A HREF="undo.html#undo">undo</A>. (Dominique Pelle)
Solution:   Avoid the column becomes negative. (Christian Brabandt,
            closes #2533)
Files:      src/mbyte.c, src/testdir/test_undo.vim

Patch 8.0.1434
Problem:    <A HREF="gui_x11.html#GTK">GTK</A>: :promtfind does not put focus on text input. (Adam Novak)
Solution:   When re-opening the <A HREF="gui_w32.html#dialog">dialog</A> put focus on the text input. (Kazunobu
            Kuriyama, closes #2563)
Files:      src/gui_gtk.c

Patch 8.0.1435
Problem:    Memory leak in test_arabic.
Solution:   Free the from and to parts. (Christian Brabandt, closes #2569)
Files:      src/buffer.c, src/digraph.c, src/proto/digraph.pro

Patch 8.0.1436
Problem:    Not enough information about what <A HREF="if_pyth.html#Python">Python</A> version may work.
Solution:   Add &quot;python_compiled&quot;, &quot;python3_compiled&quot;, &quot;python_dynamic&quot; and
            &quot;python3_dynamic&quot; values for <A HREF="builtin.html#has()">has()</A>.
Files:      src/evalfunc.c, runtime/doc/eval.txt

Patch 8.0.1437
Problem:    Pkg-config doesn't work with cross compiling.
Solution:   Use AC_PATH_TOOL() instead of AC_PATH_PROG(). (James McCoy,
            closes #2513)
Files:      src/configure.ac, src/auto/configure

Patch 8.0.1438
Problem:    Filetype detection test not updated for change.
Solution:   Update the test.
Files:      src/testdir/test_filetype.vim

Patch 8.0.1439
Problem:    If <A HREF="if_cscop.html#cscope">cscope</A> fails a search Vim may hang.
Solution:   Bail out when a search error is encountered. (Safouane Baroudi,
            closes #2598)
Files:      src/if_cscope.c

Patch 8.0.1440
Problem:    Terminal <A HREF="windows.html#window">window</A>: some vterm responses are delayed.
Solution:   After <A HREF="editing.html#writing">writing</A> input. check if there is output to read. (Ozaki
            Kiichi, closes #2594)
Files:      src/terminal.c, src/testdir/test_search.vim,
            src/testdir/test_terminal.vim

Patch 8.0.1441
Problem:    Using &quot;<A HREF="undo.html#:undo">:undo</A> 0&quot; leaves <A HREF="undo.html#undo">undo</A> in wrong state.
Solution:   Instead of searching for state 1 and go above, just use the start.
            (Ozaki Kiichi, closes #2595)
Files:      src/undo.c, src/testdir/test_undo.vim

Patch 8.0.1442 (after 8.0.1439)
Problem:    Using pointer before <A HREF="motion.html#it">it</A> is set.
Solution:   Search in whole buffer instead of next token.
Files:      src/if_cscope.c

Patch 8.0.1443 (after 8.0.1441)
Problem:    Compiler complains about uninitialized variable. (Tony Mechelynck)
Solution:   Assign a value to the variable.
Files:      src/undo.c

Patch 8.0.1444
Problem:    Missing -D_FILE_OFFSET_BITS=64 may cause problems if a library is
            compiled with <A HREF="motion.html#it">it</A>.
Solution:   Include -D_FILE_OFFSET_BITS if some CFLAGS has <A HREF="motion.html#it">it</A>. (James McCoy,
            closes #2600)
Files:      src/configure.ac, src/auto/configure

Patch 8.0.1445
Problem:    Cannot act on edits in the command line.
Solution:   Add the <A HREF="autocmd.html#CmdlineChanged">CmdlineChanged</A> <A HREF="autocmd.html#autocommand">autocommand</A> event. (xtal8, closes #2603,
            closes #2524)
Files:      runtime/doc/autocmd.txt, src/ex_getln.c, src/fileio.c,
            src/testdir/test_autocmd.vim, src/vim.h

Patch 8.0.1446
Problem:    Accessing freed memory after <A HREF="windows.html#window">window</A> command in auto command.
            (gy741)
Solution:   Adjust the pointer in the parent frame. (Christian Brabandt,
            closes #2467)
Files:      src/window.c, src/testdir/test_window_cmd.vim

Patch 8.0.1447
Problem:    Still too many old style tests.
Solution:   Turn a few tests into new style. (Yegappan Lakshmanan,
            closes #2509)
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/main.aap, src/testdir/test15.in,
            src/testdir/test15.ok, src/testdir/test36.in,
            src/testdir/test36.ok, src/testdir/test50.in,
            src/testdir/test50.ok, src/testdir/test_regex_char_classes.vim,
            src/testdir/test_shortpathname.vim,
            src/testdir/test_textformat.vim

Patch 8.0.1448
Problem:    Segmentation fault when <A HREF="if_ruby.html#Ruby">Ruby</A> throws an exception inside <A HREF="if_ruby.html#:rubyfile">:rubyfile</A>
            command.
Solution:   Use rb_protect() instead of rb_load_protect(). (ujihisa,
            closes #2147, greywolf, closes #2512, #2511)
Files:      src/if_ruby.c, src/testdir/test_ruby.vim

Patch 8.0.1449
Problem:    Slow redrawing with DirectX.
Solution:   Avoid calling gui_mch_flush() unnecessarily, especially when
            updating the cursor. (Ken Takata, closes #2560)
Files:      runtime/doc/options.txt, src/channel.c, src/edit.c, src/getchar.c,
            src/gui.c, src/gui_dwrite.cpp, src/gui_dwrite.h, src/gui_w32.c,
            src/macros.h, src/main.c, src/message.c, src/netbeans.c,
            src/proto/gui.pro, src/proto/term.pro, src/screen.c, src/search.c,
            src/term.c, src/ui.c

Patch 8.0.1450
Problem:    Endless loop when gui_mch_stop_blink() is called while blink_state
            is BLINK_OFF. (zdohnal)
Solution:   Avoid calling gui_update_cursor() recursively.
Files:      src/gui.c, src/gui_gtk_x11.c, src/proto/gui_gtk_x11.pro,
            src/gui_mac.c, src/proto/gui_mac.pro, src/gui_photon.c,
            src/proto/gui_photon.pro, src/gui_w32.c, src/proto/gui_w32.pro,
            src/gui_x11.c, src/proto/gui_x11.pro

Patch 8.0.1451
Problem:    It is difficult to set the <A HREF="if_pyth.html#python">python</A> home directory properly for
            <A HREF="if_pyth.html#Python">Python</A> 2.7 and 3.5 since both use $PYTHONHOME.
Solution:   Add the <A HREF="options.html#'pythonhome'">'pythonhome'</A> and <A HREF="options.html#'pythonthreehome'">'pythonthreehome'</A> <A HREF="options.html#options">options</A>. (Kazuki
            Sakamoto, closes #1266)
Files:      runtime/doc/options.txt, runtime/doc/quickref.txt,
            runtime/optwin.vim, src/if_python.c, src/if_python3.c,
            src/option.c, src/option.h

Patch 8.0.1452
Problem:    Terminal test fails on some systems. (jonathonf)
Solution:   Use &quot;cat&quot; instead of <A HREF="if_pyth.html#Python">Python</A> to produce the input.  Add a delay.
            (closes #2607)
Files:      src/testdir/test_terminal.vim

Patch 8.0.1453
Problem:    Terminal test fails on some slow terminals.
Solution:   Increase timeout to 10 seconds.
Files:      src/testdir/test_terminal.vim

Patch 8.0.1454
Problem:    When in silent mode too much output is buffered.
Solution:   Use line buffering instead of fully buffered. (Brian <A HREF="motion.html#M">M</A>. Carlson,
            closes #2537)
Files:      src/main.c

Patch 8.0.1455
Problem:    If $SHELL contains a space then the default value of <A HREF="options.html#'shell'">'shell'</A> is
            incorrect. (Matthew Horan)
Solution:   Escape spaces in $SHELL. (Christian Brabandt, closes #459)
Files:      src/option.c, runtime/doc/options.txt,
            src/testdir/test_startup.vim

Patch 8.0.1456
Problem:    Timer test on travis <A HREF="os_mac.html#Mac">Mac</A> is still flaky.
Solution:   Increase time range a bit more.
Files:      src/testdir/test_timers.vim

Patch 8.0.1457
Problem:    Clojure now supports a shebang line.
Solution:   Detect clojure <A HREF="usr_41.html#script">script</A> from the shebang line. (David Burgin,
            closes #2570)
Files:      runtime/scripts.vim

Patch 8.0.1458
Problem:    Filetype detection test does not check all scripts.
Solution:   Add most scripts to the test
Files:      src/testdir/test_filetype.vim

Patch 8.0.1459
Problem:    Cannot handle change of directory.
Solution:   Add the <A HREF="autocmd.html#DirChanged">DirChanged</A> <A HREF="autocmd.html#autocommand">autocommand</A> event. (Andy Massimino,
            closes #888)  Avoid <A HREF="change.html#changing">changing</A> directory for <A HREF="options.html#'autochdir'">'autochdir'</A> too often.
Files:      runtime/doc/autocmd.txt, src/buffer.c, src/ex_docmd.c,
            src/fileio.c, src/main.c, src/vim.h, src/proto/misc2.pro,
            src/gui_mac.c, src/netbeans.c, src/os_win32.c,
            src/testdir/test_autocmd.vim

Patch 8.0.1460 (after 8.0.1459)
Problem:    Missing file in patch.
Solution:   Add changes to missing file.
Files:      src/misc2.c

Patch 8.0.1461 (after 8.0.1459)
Problem:    Missing another file in patch.
Solution:   Add changes to missing file.
Files:      src/ex_cmds.c

Patch 8.0.1462 (after 8.0.1459)
Problem:    Missing yet another file in patch.
Solution:   Add changes to missing file.
Files:      src/gui.c

Patch 8.0.1463
Problem:    Test fails without <A HREF="options.html#'autochdir'">'autochdir'</A> option.
Solution:   Skip test if <A HREF="options.html#'autochdir'">'autochdir'</A> is not supported.
Files:      src/testdir/test_autocmd.vim

Patch 8.0.1464
Problem:    Completing directory after <A HREF="editing.html#:find">:find</A> does not add slash.
Solution:   Adjust the flags for <A HREF="builtin.html#globpath()">globpath()</A>. (Genki Sky)
Files:      src/misc1.c, src/testdir/test_find_complete.vim

Patch 8.0.1465
Problem:    Python2 and <A HREF="if_pyth.html#python3">python3</A> detection not tested. (Matej Cepl)
Solution:   Add test for detecting python2 and <A HREF="if_pyth.html#python3">python3</A>.  Also detect a <A HREF="usr_41.html#script">script</A>
            using &quot;js&quot; <A HREF="motion.html#as">as</A> javascript.
Files:      runtime/scripts.vim, src/testdir/test_filetype.vim

Patch 8.0.1466
Problem:    Older <A HREF="gui_x11.html#GTK">GTK</A> versions don't have gtk_entry_get_text_length().
Solution:   Add a function with #ifdefs to take care of <A HREF="gui_x11.html#GTK">GTK</A> version
            differences. (Kazunobu Kuriyama, closes #2605)
Files:      src/gui_gtk.c

Patch 8.0.1467
Problem:    Libvterm doesn't handle illegal byte sequence correctly.
Solution:   After the invalid code check if there is space to store another
            character.  Allocate one more character. (zhykzhykzhyk, closes
            #2614, closes #2613)
Files:      src/libvterm/src/encoding.c, src/libvterm/src/state.c

Patch 8.0.1468
Problem:    Illegal memory access in del_bytes().
Solution:   Check for negative byte <A HREF="intro.html#count">count</A>. (Christian Brabandt, closes #2466)
Files:      src/message.c, src/misc1.c

Patch 8.0.1469
Problem:    When package path is a symlink adding <A HREF="motion.html#it">it</A> to <A HREF="options.html#'runtimepath'">'runtimepath'</A> happens
            at the end.
Solution:   Do not resolve symlinks before locating the position in
            <A HREF="options.html#'runtimepath'">'runtimepath'</A>. (Ozaki Kiichi, closes #2604)
Files:      src/ex_cmds2.c, src/testdir/test_packadd.vim

Patch 8.0.1470
Problem:    <A HREF="eval.html#Integer">Integer</A> overflow when using <A HREF="pattern.html#regexp">regexp</A> <A HREF="pattern.html#pattern">pattern</A>. (geeknik)
Solution:   Use a long instead of int. (Christian Brabandt, closes #2251)
Files:      src/regexp_nfa.c

Patch 8.0.1471 (after 8.0.1401)
Problem:    On <A HREF="os_win32.html#MS-Windows">MS-Windows</A> <A HREF="mbyte.html#CursorIM">CursorIM</A> highlighting no longer works.
Solution:   Adjust #if statements. (Ken Takata)
Files:      src/gui.c

Patch 8.0.1472
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: nsis installer is a bit slow.
Solution:   Use ReserveFile for vimrc.ini. (Ken Takata, closes #2522)
Files:      nsis/gvim.nsi

Patch 8.0.1473
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: D&amp;D fails between 32 and 64 bit apps.
Solution:   Add the /HIGHENTROPYVA:NO linker option. (Ken Takata, closes #2504)
Files:      src/Make_mvc.mak

Patch 8.0.1474
Problem:    <A HREF="visual.html#Visual">Visual</A> C 2017 has multiple MSVCVER numbers.
Solution:   Assume the 2017 version if MSVCVER &gt;= 1910. (Leonardo Valeri
            Manera, closes #2619)
Files:      src/Make_mvc.mak

Patch 8.0.1475
Problem:    Invalid memory access in read_redo(). (gy741)
Solution:   Convert the replacement character back from a negative number to
            CR or NL. (hint by Dominique Pelle, closes #2616)
Files:      src/testdir/test_undo.vim, src/normal.c, src/vim.h, src/ops.c

Patch 8.0.1476
Problem:    Screen isn't always updated right away.
Solution:   Adjust #ifdef: Call out_flush() when not running the <A HREF="gui.html#GUI">GUI</A>.
Files:      src/screen.c

Patch 8.0.1477
Problem:    Redraw flicker when moving the mouse outside of <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Instead of updating the cursor color and shape every time leaving
            and entering a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>, only update when different from
            the previously used cursor.
Files:      src/terminal.c

Patch 8.0.1478
Problem:    Unnecessary condition for &quot;len&quot; being zero.
Solution:   Remove the condition. (Dominique Pelle)
Files:      src/regexp_nfa.c

Patch 8.0.1479
Problem:    <A HREF="insert.html#Insert">Insert</A> mode completion state is confusing.
Solution:   Move ctrl_x_mode into edit.c.  Add CTRL_X_NORMAL for zero.
Files:      src/edit.c, src/globals.h, src/proto/edit.pro, src/search.c,
            src/getchar.c

Patch 8.0.1480 (after 8.0.1479)
Problem:    Patch missing change.
Solution:   Add missing change.
Files:      src/evalfunc.c

Patch 8.0.1481
Problem:    Clearing a pointer takes two lines.
Solution:   Add vim_clear() to free and clear the pointer.
Files:      src/misc2.c, src/proto/misc2.pro, src/edit.c

Patch 8.0.1482
Problem:    Using <A HREF="builtin.html#feedkeys()">feedkeys()</A> does not work to test <A HREF="insert.html#Insert">Insert</A> mode completion.
            (Lifepillar)
Solution:   Do not check for typed keys when executing <A HREF="various.html#:normal">:normal</A> or <A HREF="builtin.html#feedkeys()">feedkeys()</A>.
            Fix thesaurus completion not working when <A HREF="options.html#'complete'">'complete'</A> is empty.
Files:      src/edit.c, src/testdir/test_ins_complete.vim,
            src/testdir/test_popup.vim, src/testdir/test_edit.vim

Patch 8.0.1483
Problem:    <A HREF="builtin.html#searchpair()">searchpair()</A> might return an invalid value on timeout.
Solution:   When the second search times out, <A HREF="diff.html#do">do</A> not accept a match from the
            first search. (Daniel Hahler, closes #2552)
Files:      src/search.c

Patch 8.0.1484
Problem:    Redundant conditions.
Solution:   Remove them. (Dominique Pelle)
Files:      src/terminal.c

Patch 8.0.1485
Problem:    Weird autocmd may cause <A HREF="editing.html#arglist">arglist</A> to be changed recursively.
Solution:   Prevent recursively <A HREF="change.html#changing">changing</A> the argument <A HREF="eval.html#list">list</A>. (Christian
            Brabandt, closes #2472)
Files:      src/ex_docmd.c, src/globals.h

Patch 8.0.1486
Problem:    Accessing invalid memory with &quot;<A HREF="motion.html#it">it</A>&quot;. (Dominique Pelle)
Solution:   Avoid going over the end of the line. (Christian Brabandt,
            closes #2532)
Files:      src/search.c, src/testdir/test_textobjects.vim

Patch 8.0.1487 (after 8.0.1486)
Problem:    Test 14 fails.
Solution:   Fix of-by-one error.
Files:      src/search.c

Patch 8.0.1488 (after 8.0.1218)
Problem:    Emacs <A HREF="tagsrch.html#tags">tags</A> no longer work. (zdohnal)
Solution:   Do not skip over end of line.
Files:      src/tag.c, src/testdir/test_tagjump.vim

Patch 8.0.1489
Problem:    There is no <A HREF="starting.html#easy">easy</A> way to get the global directory, esp. if some
            <A HREF="windows.html#windows">windows</A> have a local directory.
Solution:   Make getcwd(-1) return the global directory. (Andy Massimino,
            closes #2606)
Files:      runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_getcwd.vim

Patch 8.0.1490
Problem:    <A HREF="eval.html#Number">Number</A> of <A HREF="spell.html#spell">spell</A> regions is spread out through the code.
Solution:   Define MAXREGIONS.
Files:      src/spell.h, src/spellfile.c

Patch 8.0.1491
Problem:    The minimum width of the <A HREF="popup.html#popup">popup</A> menu is hard coded.
Solution:   Add the <A HREF="options.html#'pumwidth'">'pumwidth'</A> option. (Christian Brabandt, James McCoy,
            closes #2314)
Files:      runtime/doc/options.txt, src/option.c, src/option.h,
            src/popupmnu.c

Patch 8.0.1492
Problem:    Memory leak in <A HREF="builtin.html#balloon_split()">balloon_split()</A>.
Solution:   Free the balloon lines. Free the balloon when <A HREF="starting.html#exiting">exiting</A>.
Files:      src/misc2.c, src/evalfunc.c

Patch 8.0.1493
Problem:    Completion items cannot be annotated.
Solution:   Add a &quot;user_data&quot; entry to the completion item. (Ben Jackson,
            closes #2608, closes #2508)
Files:      runtime/doc/insert.txt, src/edit.c, src/structs.h,
            src/testdir/test_ins_complete.vim

Patch 8.0.1494
Problem:    No autocmd triggered in <A HREF="insert.html#Insert">Insert</A> mode with visible <A HREF="popup.html#popup">popup</A> menu.
Solution:   Add <A HREF="autocmd.html#TextChangedP">TextChangedP</A>. (Prabir Shrestha, Christian Brabandt,
            closes #2372, closes #1691)
            Fix that the <A HREF="autocmd.html#TextChanged">TextChanged</A> <A HREF="autocmd.html#autocommands">autocommands</A> are not always triggered
            when sourcing a <A HREF="usr_41.html#script">script</A>.
Files:      runtime/doc/autocmd.txt, src/edit.c, src/globals.h, src/structs.h,
            src/fileio.c, src/proto/fileio.pro, src/vim.h, src/main.c,
            src/testdir/test_autocmd.vim

Patch 8.0.1495
Problem:    Having <A HREF="options.html#'pumwidth'">'pumwidth'</A> default to zero has no merit.
Solution:   Make the default 15, <A HREF="motion.html#as">as</A> the actual default value.
Files:      src/popupmnu.c, src/option.c

Patch 8.0.1496
Problem:    Clearing a pointer takes two lines.
Solution:   Add VIM_CLEAR() and replace vim_clear(). (Hirohito Higashi,
            closes #2629)
Files:      src/buffer.c, src/channel.c, src/crypt.c, src/edit.c, src/eval.c,
            src/evalfunc.c, src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c,
            src/ex_getln.c, src/fileio.c, src/gui_gtk_x11.c, src/gui_photon.c,
            src/gui_w32.c, src/gui_x11.c, src/hardcopy.c, src/if_cscope.c,
            src/macros.h, src/main.c, src/mark.c, src/mbyte.c, src/memfile.c,
            src/memline.c, src/menu.c, src/message.c, src/misc1.c,
            src/misc2.c, src/netbeans.c, src/normal.c, src/ops.c,
            src/option.c, src/os_amiga.c, src/os_mac_conv.c, src/os_mswin.c,
            src/os_unix.c, src/os_win32.c, src/popupmnu.c,
            src/proto/misc2.pro, src/quickfix.c, src/regexp.c,
            src/regexp_nfa.c, src/screen.c, src/search.c, src/spell.c,
            src/spellfile.c, src/syntax.c, src/tag.c, src/term.c,
            src/terminal.c, src/ui.c, src/undo.c, src/userfunc.c, src/window.c

Patch 8.0.1497
Problem:    Getting the jump <A HREF="eval.html#list">list</A> requires parsing the output of <A HREF="motion.html#:jumps">:jumps</A>.
Solution:   Add <A HREF="builtin.html#getjumplist()">getjumplist()</A>. (Yegappan Lakshmanan, closes #2609)
Files:      runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/Makefile,
            src/evalfunc.c, src/list.c, src/proto/list.pro,
            src/testdir/Make_all.mak, src/testdir/test_jumplist.vim

Patch 8.0.1498 (after 8.0.1497)
Problem:    <A HREF="builtin.html#getjumplist()">getjumplist()</A> returns duplicate entries. (lacygoill)
Solution:   Call cleanup_jumplist(). (Yegappan Lakshmanan)
Files:      src/evalfunc.c, src/mark.c, src/proto/mark.pro,
            src/testdir/test_jumplist.vim

Patch 8.0.1499
Problem:    Out-of-memory situation not correctly handled. (Coverity)
Solution:   Check for NULL value.
Files:      src/terminal.c

Patch 8.0.1500
Problem:    Possible NULL pointer dereference. (Coverity)
Solution:   Check for the pointer not being NULL.
Files:      src/quickfix.c

Patch 8.0.1501
Problem:    Out-of-memory situation not correctly handled. (Coverity)
Solution:   Check for NULL value.
Files:      src/ops.c

Patch 8.0.1502
Problem:    In out-of-memory situation character is not restored. (Coverity)
Solution:   Restore the character in all situations.
Files:      src/ex_getln.c

Patch 8.0.1503
Problem:    Access memory beyond end of <A HREF="eval.html#string">string</A>. (Coverity)
Solution:   Keep allocated memory in separate pointer.  Avoid outputting the
            NUL character.
Files:      src/hardcopy.c

Patch 8.0.1504
Problem:    <A HREF="os_win32.html#Win32">Win32</A>: the screen may be cleared on <A HREF="starting.html#startup">startup</A>.
Solution:   Only call shell_resized() when the size actually changed. (Ken
            Takata, closes #2527)
Files:      src/os_win32.c

Patch 8.0.1505
Problem:    Debugger can't break on a condition. (Charles Campbell)
Solution:   Add &quot;<A HREF="repeat.html#:breakadd">:breakadd</A> expr&quot;. (Christian Brabandt, closes #859)
Files:      runtime/doc/repeat.txt, src/eval.c, src/evalfunc.c,
            src/userfunc.c, src/ex_cmds2.c, src/ex_docmd.c,
            src/proto/eval.pro, src/proto/ex_cmds2.pro, src/structs.h

Patch 8.0.1506
Problem:    New version of HP NonStop (Tandem) doesn't like the default header
            for <A HREF="builtin.html#setenv()">setenv()</A>.
Solution:   Put a #ifdef around the <A HREF="builtin.html#setenv()">setenv()</A> entry. (Joachim Schmitz)
Files:      src/osdef2.h.in

Patch 8.0.1507
Problem:    Timer test is a bit flaky.
Solution:   Add <A HREF="motion.html#it">it</A> to the <A HREF="eval.html#list">list</A> of flaky tests.
Files:      src/testdir/runtest.vim

Patch 8.0.1508
Problem:    The <A HREF="windows.html#:drop">:drop</A> command is not always available.
Solution:   Include <A HREF="windows.html#:drop">:drop</A> in all builds. (Yasuhiro Matsumoto, closes #2639)
Files:      runtime/doc/windows.txt, src/ex_cmds.c, src/ex_cmds2.c,
            src/ex_docmd.c, src/testdir/test_normal.vim,
            src/testdir/test_tabpage.vim

Patch 8.0.1509 (after 8.0.1508)
Problem:    Test for failing <A HREF="gui.html#drag-n-drop">drag-n-drop</A> command no longer fails.
Solution:   Check for the &quot;dnd&quot; feature.
Files:      src/testdir/test_normal.vim

Patch 8.0.1510
Problem:    Cannot test if a command causes a beep.
Solution:   Add <A HREF="testing.html#assert_beeps()">assert_beeps()</A>.
Files:      runtime/doc/eval.txt, src/evalfunc.c, src/eval.c,
            src/proto/eval.pro, src/misc1.c, src/globals.h,
            src/testdir/test_normal.vim, src/testdir/test_assert.vim

Patch 8.0.1511 (after 8.0.1505)
Problem:    Some code for the debugger watch <A HREF="eval.html#expression">expression</A> is clumsy.
Solution:   Clean up the code.
Files:      src/ex_cmds2.c, src/eval.c, src/proto/eval.pro

Patch 8.0.1512
Problem:    Warning for possibly using NULL pointer. (Coverity)
Solution:   Skip using the pointer if it's NULL.
Files:      src/ex_cmds.c

Patch 8.0.1513
Problem:    The <A HREF="motion.html#jumplist">jumplist</A> is not always properly cleaned up.
Solution:   Call fname2fnum() before cleanup_jumplist(). (Yegappan Lakshmanan)
Files:      src/evalfunc.c, src/mark.c, src/proto/mark.pro

Patch 8.0.1514
Problem:    Getting the <A HREF="eval.html#list">list</A> of changes is not <A HREF="starting.html#easy">easy</A>.
Solution:   Add the <A HREF="builtin.html#getchangelist()">getchangelist()</A> function. (Yegappan Lakshmanan,
            closes #2634)
Files:      runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/evalfunc.c,
            src/testdir/Make_all.mak, src/testdir/test_changelist.vim,
            src/Makefile

Patch 8.0.1515
Problem:    <A HREF="autocmd.html#BufWinEnter">BufWinEnter</A> event fired when opening hidden <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Do not fire <A HREF="autocmd.html#BufWinEnter">BufWinEnter</A> when the <A HREF="terminal.html#terminal">terminal</A> is hidden and does not
            open a <A HREF="windows.html#window">window</A>. (Kenta Sato, closes #2636)
Files:      src/terminal.c

Patch 8.0.1516
Problem:    Errors for <A HREF="channel.html#job">job</A> <A HREF="options.html#options">options</A> are not very specific.
Solution:   Add more specific error <A HREF="message.html#messages">messages</A>.
Files:      src/channel.c, src/globals.h

Patch 8.0.1517
Problem:    Invalid memory access with <A HREF="pattern.html#pattern">pattern</A> using look-behind match.
            (Dominique Pelle)
Solution:   Get a pointer to the right line.
Files:      src/regexp.c

Patch 8.0.1518
Problem:    Error <A HREF="message.html#messages">messages</A> suppressed after &quot;<A HREF="various.html#:silent!">:silent!</A> try&quot;. (Ben Reilly)
Solution:   Restore emsg_silent before executing <A HREF="eval.html#:try">:try</A>. (closes #2531)
Files:      src/ex_docmd.c, src/testdir/test_eval_stuff.vim

Patch 8.0.1519
Problem:    <A HREF="builtin.html#getchangelist()">getchangelist()</A> does not use argument <A HREF="motion.html#as">as</A> <A HREF="builtin.html#bufname()">bufname()</A>.
Solution:   Use get_buf_tv(). (Yegappan Lakshmanan, closes #2641)
Files:      src/evalfunc.c, src/testdir/test_changelist.vim

Patch 8.0.1520
Problem:    Cursor is in the wrong line when using a <A HREF="gui.html#WinBar">WinBar</A> in a Terminal
            <A HREF="windows.html#window">window</A>.
Solution:   Adjust the row number. (Christian Brabandt, closes #2362)
Files:      src/screen.c, src/terminal.c

Patch 8.0.1521
Problem:    Shift-Tab does not work in a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Recognize Shift-Tab key press. (Jsees Luehrs, closes #2644)
Files:      src/terminal.c

Patch 8.0.1522 (after 8.0.1491)
Problem:    Popup menu is positioned in the wrong place. (Davit Samvelyan,
            Boris Staletic)
Solution:   Correct computation of the column and the conditions for that.
            (Hirohito Higashi, closes #2640)
Files:      src/popupmnu.c

Patch 8.0.1523
Problem:    Cannot write and read <A HREF="terminal.html#terminal">terminal</A> screendumps.
Solution:   Add <A HREF="terminal.html#term_dumpwrite()">term_dumpwrite()</A>, term_dumpread() and <A HREF="terminal.html#term_dumpdiff()">term_dumpdiff()</A>.
            Also add <A HREF="testing.html#assert_equalfile()">assert_equalfile()</A>.
Files:      src/terminal.c, src/proto/terminal.pro, src/evalfunc.c,
            src/normal.c, src/eval.c, src/proto/eval.pro,
            runtime/doc/eval.txt, src/testdir/test_assert.vim

Patch 8.0.1524 (after 8.0.1523)
Problem:    Compiler warnings for uninitialized <A HREF="eval.html#variables">variables</A>. (Tony Mechelynck)
Solution:   Initialize <A HREF="eval.html#variables">variables</A>.
Files:      src/terminal.c

Patch 8.0.1525
Problem:    Using <A HREF="editing.html#:wqa">:wqa</A> exits even if a <A HREF="channel.html#job">job</A> runs in a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>. (Jason
            Felice)
Solution:   Check if a <A HREF="terminal.html#terminal">terminal</A> has a running <A HREF="channel.html#job">job</A>. (closes #2654)
Files:      src/ex_cmds2.c, src/buffer.c, src/proto/buffer.pro, src/ex_cmds.c,
            src/testdir/test_terminal.vim

Patch 8.0.1526
Problem:    No test using a screen dump yet.
Solution:   Add a test for C <A HREF="syntax.html#syntax">syntax</A> highlighting.  Add helper <A HREF="eval.html#functions">functions</A>.
Files:      src/terminal.c, src/testdir/test_syntax.vim,
            src/testdir/shared.vim, src/testdir/screendump.vim,
            src/testdir/dumps/Test_syntax_c_01.dump, runtime/doc/terminal.txt,
            src/testdir/README.txt

Patch 8.0.1527 (after 8.0.1526)
Problem:    Screen dump test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Skip dump test on <A HREF="os_win32.html#MS-Windows">MS-Windows</A> for now.
Files:      src/testdir/test_syntax.vim

Patch 8.0.1528
Problem:    Dead code found.
Solution:   Remove the useless lines. (CodeAi, closes #2656)
Files:      src/screen.c, src/spell.c, src/syntax.c, src/window.c

Patch 8.0.1529
Problem:    Assert_equalfile() does not close file descriptors. (Coverity)
Solution:   Close the file descriptors.
Files:      src/eval.c

Patch 8.0.1530
Problem:    Dump test fails when using a shadow directory.
Solution:   Add the directory to the <A HREF="eval.html#list">list</A> of symlinks to make (Elimar
            Riesebieter)
Files:      src/Makefile

Patch 8.0.1531
Problem:    Cannot use 24 bit colors in <A HREF="os_win32.html#MS-Windows">MS-Windows</A> console.
Solution:   Add support for vcon. (Nobuhiro Takasaki, Ken Takata,
            fixes #1270, fixes #2060)
Files:      runtime/doc/options.txt, src/misc1.c, src/option.c,
            src/evalfunc.c, src/os_win32.c, src/proto/os_win32.pro,
            src/feature.h, src/proto/term.pro, src/screen.c, src/syntax.c,
            src/term.c, src/testdir/gen_opt_test.vim, src/version.c

Patch 8.0.1532
Problem:    Compiler warnings without termguicolors feature.
Solution:   Add #ifdef. (John Marriott)  Cleanup the code a bit.
Files:      src/term.c

Patch 8.0.1533
Problem:    Libterm doesn't support requesting fg and bg color.
Solution:   Implement <A HREF="term.html#t_RF">t_RF</A> and <A HREF="term.html#t_RB">t_RB</A>.
Files:      src/libvterm/src/vterm_internal.h, src/libvterm/src/state.c,
            src/libvterm/src/vterm.c

Patch 8.0.1534
Problem:    C <A HREF="syntax.html#syntax">syntax</A> test fails when using <A HREF="starting.html#gvim">gvim</A>
Solution:   Force running in a <A HREF="terminal.html#terminal">terminal</A>.  Check that <A HREF="options.html#'background'">'background'</A> is correct
            even when $COLORFGBG is set.
Files:      src/testdir/test_syntax.vim, src/testdir/screendump.vim

Patch 8.0.1535 (after 8.0.1534)
Problem:    C <A HREF="syntax.html#syntax">syntax</A> test still fails when using <A HREF="starting.html#gvim">gvim</A>.
Solution:   Clear <A HREF="intro.html#Normal">Normal</A> cterm highlighting instead of setting <A HREF="motion.html#it">it</A>.
Files:      src/testdir/test_syntax.vim, src/testdir/screendump.vim,
            src/testdir/dumps/Test_syntax_c_01.dump

Patch 8.0.1536
Problem:    Quotestar test is flaky when using the <A HREF="gui.html#GUI">GUI</A>.
Solution:   Add check that the <A HREF="pattern.html#star">star</A> <A HREF="sponsor.html#register">register</A> arrived at the server.  Increase
            timeouts.
Files:      src/testdir/test_quotestar.vim

Patch 8.0.1537
Problem:    Xxd does not skip NUL lines when using ebcdic.
Solution:   Check for a NUL before converting a character for ebcdic. (Tim
            Sell, closes #2668)
Files:      src/xxd/xxd.c

Patch 8.0.1538
Problem:    Popupmenu is too far left when completion is long. (Linwei)
Solution:   Adjust column computations. (Hirohito Higashi, closes #2661)
Files:      src/popupmnu.c

Patch 8.0.1539
Problem:    No test for the <A HREF="popup.html#popup">popup</A> menu positioning.
Solution:   Add a screendump test for the <A HREF="popup.html#popup">popup</A> menu.
Files:      src/terminal.c, src/testdir/test_syntax.vim,
            src/testdir/screendump.vim,
            src/testdir/test_popup.vim,
            src/testdir/dumps/Test_popup_position_01.dump,
            src/testdir/dumps/Test_popup_position_02.dump,
            src/testdir/dumps/Test_popup_position_03.dump,
            runtime/doc/eval.txt

Patch 8.0.1540
Problem:    Popup menu positioning fails with longer <A HREF="eval.html#string">string</A>.
Solution:   Only align with right side of <A HREF="windows.html#window">window</A> when width is <A HREF="various.html#less">less</A> than
            <A HREF="options.html#'pumwidth'">'pumwidth'</A> (closes #2661)
Files:      src/popupmnu.c, src/testdir/screendump.vim,
            src/testdir/test_popup.vim,
            src/testdir/dumps/Test_popup_position_04.dump

Patch 8.0.1541
Problem:    synpat_T is taking too much memory.
Solution:   Reorder members to reduce padding. (Dominique Pelle, closes #2671)
Files:      src/syntax.c

Patch 8.0.1542
Problem:    Terminal screen dump does not include cursor position.
Solution:   <A HREF="motion.html#Mark">Mark</A> the cursor position in the dump.
Files:      src/terminal.c,
            src/testdir/dumps/Test_popup_position_01.dump,
            src/testdir/dumps/Test_popup_position_02.dump,
            src/testdir/dumps/Test_popup_position_03.dump,
            src/testdir/dumps/Test_popup_position_04.dump,
            src/testdir/dumps/Test_syntax_c_01.dump

Patch 8.0.1543
Problem:    With <A HREF="options.html#'termguicolors'">'termguicolors'</A> <A HREF="intro.html#Normal">Normal</A> color doesn't work correctly.
Solution:   Set cterm_normal_bg_gui_color and cterm_normal_fg_color always.
            (Kazunobu Kuriyama, closes #981, closes #2332)
Files:      src/syntax.c

Patch 8.0.1544
Problem:    When using <A HREF="options.html#'termguicolors'">'termguicolors'</A> SpellBad doesn't show.
Solution:   When the <A HREF="gui.html#GUI">GUI</A> colors are not set fall back to the cterm colors.
Files:      src/syntax.c, src/screen.c, src/gui.h, src/structs.h

Patch 8.0.1545
Problem:    Screen dumps not included in <A HREF="intro.html#distribution">distribution</A>.
Solution:   Add dumps to the <A HREF="eval.html#list">list</A> of distributed files.
Files:      Filelist

Patch 8.0.1546
Problem:    Using <A HREF="builtin.html#feedkeys()">feedkeys()</A> in a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> may trigger mappings.
            (Charles Sheridan)
Solution:   Avoid triggering a <A HREF="map.html#mapping">mapping</A> when peeking for a key.
Files:      src/getchar.c, src/terminal.c

Patch 8.0.1547
Problem:    Undo in the <A HREF="options.html#options">options</A> <A HREF="windows.html#window">window</A> makes <A HREF="motion.html#it">it</A> empty.
Solution:   Set <A HREF="options.html#'undolevels'">'undolevels'</A> while filling the buffer. (Yasuhiro Matsumoto,
            closes #2645)
Files:      runtime/optwin.vim

Patch 8.0.1548
Problem:    Screen dump test <A HREF="usr_41.html#script">script</A> not included in <A HREF="intro.html#distribution">distribution</A>.
Solution:   Add the <A HREF="usr_41.html#script">script</A> to the <A HREF="eval.html#list">list</A> of distributed files.
Files:      Filelist

Patch 8.0.1549
Problem:    Various small problems in test files.
Solution:   Include small changes.
Files:      src/testdir/test_channel.py, src/testdir/shared.vim,
            src/testdir/test_gui.vim, src/testdir/test_gui_init.vim

Patch 8.0.1550
Problem:    Various small problems in source files.
Solution:   Fix the problems.
Files:      src/README.txt, src/beval.c, src/json_test.c, src/mbyte.c,
            src/libvterm/include/vterm_keycodes.h, src/Makefile,
            src/gui_gtk.c, src/if_xcmdsrv.c, src/pty.c, src/if_python.c,
            src/if_py_both.h, uninstal.txt, src/dosinst.c, src/iscygpty.c,
            src/vimrun.c, src/os_vms.c

Patch 8.0.1551
Problem:    On <A HREF="os_mac.html#Mac">Mac</A> <A HREF="options.html#'maxmemtot'">'maxmemtot'</A> is set to a weird value.
Solution:   For <A HREF="os_mac.html#Mac">Mac</A> use total memory and subtract system memory. For other
            systems accept both a 32 bit and 64 bit result. (Ozaki Kiichi,
            closes #2646)
Files:      src/os_unix.c

Patch 8.0.1552
Problem:    May leak file descriptors when executing <A HREF="channel.html#job">job</A>.
Solution:   Close more file descriptors. (Ozaki Kiichi, closes #2651)
Files:      src/os_unix.c, src/testdir/test_channel.vim

Patch 8.0.1553
Problem:    Cannot see what <A HREF="digraph.html#digraph">digraph</A> is used to insert a character.
Solution:   Show the <A HREF="digraph.html#digraph">digraph</A> with the &quot;<A HREF="various.html#ga">ga</A>&quot; command. (Christian Brabandt)
Files:      runtime/doc/various.txt, src/digraph.c, src/ex_cmds.c,
            src/proto/digraph.pro, src/testdir/shared.vim,
            src/testdir/test_matchadd_conceal.vim,
            src/testdir/test_digraph.vim, src/testdir/test_ga.vim,
            src/testdir/test_arabic.vim

Patch 8.0.1554
Problem:    Custom plugins loaded with <A HREF="starting.html#--clean">--clean</A>.
Solution:   Do not include the home directory in <A HREF="options.html#'runtimepath'">'runtimepath'</A>.
Files:      src/option.c, src/main.c, src/proto/option.pro, src/structs.h,
            src/os_unix.h, src/os_amiga.h, src/os_dos.h, src/os_mac.h,
            runtime/doc/starting.txt

Patch 8.0.1555
Problem:    Build error for some combination of features.
Solution:   Declare variable in more situations.
Files:      src/main.c

Patch 8.0.1556
Problem:    May not parse the <A HREF="term.html#t_RS">t_RS</A> response correctly, resulting in wrong
            characters in the input stream.
Solution:   When the <A HREF="term.html#t_RS">t_RS</A> response is partly received wait for more
            characters.
Files:      src/term.c

Patch 8.0.1557
Problem:    <A HREF="builtin.html#printf()">printf()</A> does not work with only one argument. (Daniel Hahler)
Solution:   Allow using just the format. (Ken Takata, closes #2687)
Files:      src/evalfunc.c, src/testdir/test_expr.vim

Patch 8.0.1558
Problem:    No right-click menu in a <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Implement the right click menu for the <A HREF="terminal.html#terminal">terminal</A>.
Files:      src/popupmnu.c, src/proto/popupmnu.pro, src/normal.c, src/menu.c,
            src/proto/menu.pro, src/feature.h

Patch 8.0.1559
Problem:    Build failure without <A HREF="gui.html#GUI">GUI</A>.
Solution:   Adjust #ifdef for get_fpos_of_mouse().
Files:      src/ui.c

Patch 8.0.1560
Problem:    Build failure without <A HREF="gui.html#GUI">GUI</A> on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Adjust #ifdef for vcol2col().
Files:      src/ui.c

Patch 8.0.1561
Problem:    Crash with <A HREF="ft_rust.html#rust">rust</A> <A HREF="syntax.html#syntax">syntax</A> highlighting. (Edd Barrett)
Solution:   Avoid going past the end of an empty line.
Files:      src/syntax.c

Patch 8.0.1562
Problem:    The <A HREF="terminal.html#terminal">terminal</A> debugger can't set a breakpoint with the mouse.
Solution:   Add <A HREF="popup.html#popup">popup</A> menu entries.
Files:      runtime/pack/dist/opt/termdebug/plugin/termdebug.vim,
            runtime/doc/terminal.txt

Patch 8.0.1563
Problem:    Timeout of <A HREF="builtin.html#getwinposx()">getwinposx()</A> can be too short. (lilydjwg)
Solution:   Add <A HREF="builtin.html#getwinpos()">getwinpos()</A>. (closes #2689)
Files:      src/evalfunc.c, src/term.c, src/proto/term.pro, runtime/doc/eval.txt

Patch 8.0.1564
Problem:    Too many #ifdefs.
Solution:   Graduate the <A HREF="various.html#+autocmd">+autocmd</A> feature. Takes away 450 #ifdefs and
            increases code size of tiny Vim by only 40 Kbyte.
Files:      src/buffer.c, src/diff.c, src/edit.c, src/eval.c, src/evalfunc.c,
            src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c, src/ex_getln.c,
            src/fileio.c, src/getchar.c, src/globals.h, src/gui.c,
            src/if_cscope.c, src/if_xcmdsrv.c, src/main.c, src/mbyte.c,
            src/memline.c, src/menu.c, src/misc1.c, src/gui_mac.c,
            src/misc2.c, src/move.c, src/netbeans.c, src/normal.c, src/ops.c,
            src/option.c, src/option.h, src/feature.h, src/vim.h,
            src/os_amiga.c, src/os_mswin.c, src/os_unix.c, src/os_win32.c,
            src/quickfix.c, src/screen.c, src/search.c, src/spell.c,
            src/structs.h, src/syntax.c, src/tag.c, src/term.c,
            src/terminal.c, src/ui.c, src/undo.c, src/userfunc.c,
            src/version.c, src/window.c

Patch 8.0.1565
Problem:    Can't build <A HREF="os_mac.html#Mac">Mac</A> version without <A HREF="gui.html#GUI">GUI</A>.
Solution:   Adjust when IME_WITHOUT_XIM is defined.
Files:      src/vim.h

Patch 8.0.1566
Problem:    Too many #ifdefs.
Solution:   Graduate FEAT_SCROLLBIND and FEAT_CURSORBIND.
Files:      src/buffer.c, src/diff.c, src/edit.c, src/evalfunc.c,
            src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c, src/gui.c,
            src/main.c, src/move.c, src/normal.c, src/option.c, src/term.c,
            src/version.c, src/window.c, src/globals.h, src/macros.h,
            src/option.h, src/structs.h

Patch 8.0.1567
Problem:    Cannot build <A HREF="os_win32.html#Win32">Win32</A> <A HREF="gui.html#GUI">GUI</A> without <A HREF="mbyte.html#IME">IME</A>. (John Marriott)
Solution:   Adjust when IME_WITHOUT_XIM and HAVE_INPUT_METHOD are defined and
            use <A HREF="motion.html#it">it</A> in a few more places.
Files:      src/vim.h, src/gui.c

Patch 8.0.1568
Problem:    Can't build on older <A HREF="os_mac.html#Mac">Mac</A>, header file is missing.
Solution:   Remove the header file. (Ozaki Kiichi, closes #2691)
Files:      src/os_unix.c

Patch 8.0.1569
Problem:    Warning for uninitialized variable from gcc.
Solution:   Initialize the variable.
Files:      src/quickfix.c

Patch 8.0.1570
Problem:    Can't use <A HREF="gui.html#:popup">:popup</A> for a menu in the <A HREF="terminal.html#terminal">terminal</A>. (Wei Zhang)
Solution:   Make <A HREF="gui.html#:popup">:popup</A> work in the <A HREF="terminal.html#terminal">terminal</A>.  Also fix that entries were
            included that don't work in the current state.
Files:      src/ex_docmd.c, src/popupmnu.c, src/proto/popupmnu.pro,
            src/menu.c, src/proto/menu.pro

Patch 8.0.1571 (after 8.0.1571)
Problem:    Can't build without <A HREF="gui.html#GUI">GUI</A>.
Solution:   Adjust #ifdef for gui_find_menu().
Files:      src/menu.c

Patch 8.0.1572
Problem:    <A HREF="os_mac.html#Mac">Mac</A>: getting memory size doesn't work everywhere.
Solution:   Use MACOS_X instead of MACOS_X_DARWIN. (Kazunobu Kuriyama)
Files:      src/os_unix.c

Patch 8.0.1573
Problem:    getwinpos(1) may cause response to be handled <A HREF="motion.html#as">as</A> command.
Solution:   Handle any cursor position report once one was requested. (partly
	    by Hirohito Higashi)
Files:      src/term.c

Patch 8.0.1574
Problem:    Show cursor in wrong place when using <A HREF="popup.html#popup">popup</A> menu. (Wei Zhang)
Solution:   Force updating the cursor position.  Fix skipping over unused
            entries.
Files:      src/screen.c, src/proto/screen.pro, src/popupmnu.c

Patch 8.0.1575
Problem:    Crash when using virtual replace.
Solution:   Adjust orig_line_count.  Add more tests. (Christian Brabandt)
Files:      src/edit.c, src/testdir/test_visual.vim

Patch 8.0.1576
Problem:    <A HREF="if_perl.html#Perl">Perl</A> VIM::Buffers() does not find every buffer.
Solution:   Also find unlisted buffer by number or name. (Chris Weyl,
            closes #2692)
Files:      src/if_perl.xs

Patch 8.0.1577
Problem:    Virtual replace test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Make adding a <A HREF="term.html#termcap">termcap</A> entry work for a builtin <A HREF="terminal.html#terminal">terminal</A>.
            Restore <A HREF="terminal.html#terminal">terminal</A> keys in a better way.
Files:      src/term.c, src/testdir/test_visual.vim

Patch 8.0.1578
Problem:    No test for <A HREF="gui.html#:popup">:popup</A> in <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Add a screen dump test.
Files:      src/testdir/test_popup.vim,
            src/testdir/dumps/Test_popup_command_01.dump,
            src/testdir/dumps/Test_popup_command_02.dump,
            src/testdir/dumps/Test_popup_command_03.dump

Patch 8.0.1579
Problem:    Virtual replace test fails in <A HREF="gui.html#GUI">GUI</A>.
Solution:   Don't save key <A HREF="options.html#options">options</A> if they were not set.
Files:      src/testdir/test_visual.vim

Patch 8.0.1580
Problem:    FEAT_CURSORBIND and FEAT_SCROLLBIND are unused.
Solution:   Delete them.
Files:      src/feature.h

Patch 8.0.1581
Problem:    Cannot build <A HREF="os_win32.html#Win32">Win32</A> <A HREF="gui.html#GUI">GUI</A> without <A HREF="various.html#+eval">+eval</A>.
Solution:   Define HAVE_INPUT_METHOD without <A HREF="various.html#+eval">+eval</A>. (Ken Takata)
Files:      src/vim.h

Patch 8.0.1582
Problem:    In the <A HREF="os_win32.html#MS-Windows">MS-Windows</A> console mouse <A HREF="intro.html#movement">movement</A> is not used.
Solution:   Pass mouse <A HREF="intro.html#movement">movement</A> events when useful.
Files:      src/os_win32.c, src/proto/os_win32.pro, src/feature.h

Patch 8.0.1583
Problem:    Using <A HREF="develop.html#C99">C99</A> comment.
Solution:   Use old style comment. (Kazunobu Kuriyama)
Files:      src/quickfix.c

Patch 8.0.1584
Problem:    Using <A HREF="develop.html#C99">C99</A> in <A HREF="os_mac.html#Mac">Mac</A> file gives compiler warning <A HREF="message.html#messages">messages</A>.
Solution:   Add #pragmas to avoid the warnings. (Kazunobu Kuriyama)
Files:      src/os_macosx.m

Patch 8.0.1585
Problem:    Enabling beval_term feature in <A HREF="os_win32.html#Win32">Win32</A> <A HREF="gui.html#GUI">GUI</A>.
Solution:   Only enable beval_term in <A HREF="os_win32.html#Win32">Win32</A> console.
Files:      src/feature.h

Patch 8.0.1586
Problem:    Imactivatefunc does not work on non-GUI <A HREF="os_mac.html#Mac">Mac</A>.
Solution:   Fix logic in #ifdef.
Files:      src/vim.h

Patch 8.0.1587
Problem:    <A HREF="insert.html#inserting">inserting</A> from the <A HREF="gui.html#clipboard">clipboard</A> doesn't work literally
Solution:   When pasting from the &#42; or + <A HREF="sponsor.html#register">register</A> always assume literally.
Files:      src/ops.c, src/proto/ops.pro, src/testdir/test_paste.vim

Patch 8.0.1588
Problem:    Popup menu hangs after typing <A HREF="pattern.html#CTRL-C">CTRL-C</A>.
Solution:   Make <A HREF="pattern.html#CTRL-C">CTRL-C</A> exit the loop. (Ozaki Kiichi, closes #2697)
Files:      src/popupmnu.c

Patch 8.0.1589
Problem:    Error for setting <A HREF="options.html#'modifiable'">'modifiable'</A> when resetting <A HREF="motion.html#it">it</A>.
Solution:   Check if <A HREF="options.html#'modifiable'">'modifiable'</A> was actually set.
Files:      src/option.c

Patch 8.0.1590
Problem:    Padding in <A HREF="eval.html#list">list</A> type wastes memory.
Solution:   Reorder struct members to optimize padding. (Dominique Pelle,
            closes #2704)
Files:      src/structs.h

Patch 8.0.1591
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: when reparsing the arguments <A HREF="options.html#'wildignore'">'wildignore'</A> matters.
Solution:   Save and reset <A HREF="options.html#'wildignore'">'wildignore'</A>. (Yasuhiro Matsumoto, closes #2702)
Files:      src/os_win32.c

Patch 8.0.1592
Problem:    Terminal <A HREF="windows.html#windows">windows</A> in a session are not properly restored.
Solution:   Add &quot;<A HREF="terminal.html#terminal">terminal</A>&quot; in <A HREF="options.html#'sessionoptions'">'sessionoptions'</A>.  When possible restore the
            command running in a <A HREF="terminal.html#terminal">terminal</A>.
Files:      src/option.c, src/option.h, src/ex_docmd.c, src/terminal.c,
            src/proto/terminal.pro, src/evalfunc.c, src/structs.h,
            src/channel.c, src/testdir/test_terminal.vim,
            src/testdir/shared.vim, src/testdir/test_mksession.vim

Patch 8.0.1593
Problem:    <A HREF="editing.html#:qall">:qall</A> never exits with an active <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Add a way to kill a <A HREF="channel.html#job">job</A> in a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Files:      src/ex_cmds2.c, src/terminal.c, src/proto/terminal.pro,
            src/structs.h, src/channel.c, src/evalfunc.c,
            src/testdir/test_terminal.vim, runtime/doc/terminal.txt,
            runtime/doc/eval.txt

Patch 8.0.1594
Problem:    <A HREF="editing.html#:confirm">:confirm</A> qall not tested with active <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Add a test.
Files:      src/testdir/test_terminal.vim

Patch 8.0.1595
Problem:    No <A HREF="autocmd.html#autocommand">autocommand</A> triggered before <A HREF="starting.html#exiting">exiting</A>.
Solution:   Add the <A HREF="autocmd.html#ExitPre">ExitPre</A> <A HREF="autocmd.html#autocommand">autocommand</A> event.
Files:      src/ex_docmd.c, src/fileio.c, src/vim.h,
            src/testdir/test_exit.vim, src/Makefile, src/testdir/Make_all.mak,
            runtime/doc/autocmd.txt

Patch 8.0.1596
Problem:    No <A HREF="autocmd.html#autocommand">autocommand</A> specifically for opening a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Add <A HREF="autocmd.html#TerminalOpen">TerminalOpen</A>. (Yasuhiro Matsumoto, closes #2484)
Files:      runtime/doc/autocmd.txt, src/fileio.c, src/terminal.c,
            src/testdir/test_terminal.vim, src/vim.h

Patch 8.0.1597
Problem:    Autocommand events are not sorted.
Solution:   Sort the <A HREF="autocmd.html#autocommand">autocommand</A> events.
Files:      src/vim.h

Patch 8.0.1598
Problem:    Cannot select text in a <A HREF="terminal.html#terminal">terminal</A> with the mouse.
Solution:   When a <A HREF="channel.html#job">job</A> in a <A HREF="terminal.html#terminal">terminal</A> is not consuming mouse events, use them
            for modeless selection.  Also stop <A HREF="insert.html#Insert">Insert</A> mode when clicking in a
            <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Files:      src/libvterm/include/vterm.h, src/libvterm/src/state.c,
            src/libvterm/src/vterm_internal.h, src/terminal.c,
            src/proto/terminal.pro, src/ui.c

Patch 8.0.1599
Problem:    No error message when <A HREF="debug.html#gdb">gdb</A> does not support the <A HREF="terminal.html#terminal">terminal</A> debugger.
Solution:   Check for the response to open the Machine Interface.
Files:      runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.0.1600
Problem:    Crash when setting <A HREF="term.html#t_Co">t_Co</A> to zero when <A HREF="options.html#'termguicolors'">'termguicolors'</A> is set.
Solution:   Use IS_CTERM instead of checking the number of colors.
            (closes #2710)
Files:      src/screen.c, src/testdir/test_highlight.vim

Patch 8.0.1601
Problem:    Highlight test fails on <A HREF="os_win32.html#Win32">Win32</A>.
Solution:   Check for vtp and vcon support.
Files:      src/evalfunc.c, src/testdir/test_highlight.vim

Patch 8.0.1602
Problem:    Crash in parsing JSON.
Solution:   Fail when using array or <A HREF="eval.html#dict">dict</A> <A HREF="motion.html#as">as</A> <A HREF="eval.html#dict">dict</A> key. (Damien)
Files:      src/json.c, src/testdir/test_json.vim

Patch 8.0.1603
Problem:    Cannot build with <A HREF="various.html#+terminal">+terminal</A> but without <A HREF="various.html#+menu">+menu</A>.
Solution:   Add #ifdef. (Damien)
Files:      src/terminal.c

Patch 8.0.1604
Problem:    Paste test may fail if $DISPLAY is not set.
Solution:   Add WorkingClipboard() and use <A HREF="motion.html#it">it</A> in the paste test.
Files:      src/testdir/shared.vim, src/testdir/test_paste.vim

Patch 8.0.1605
Problem:    Terminal test is a bit flaky.
Solution:   Check for the shell prompt.  Use more <A HREF="eval.html#lambda">lambda</A> <A HREF="eval.html#functions">functions</A>.
Files:      src/testdir/test_terminal.vim

Patch 8.0.1606
Problem:    Singular/plural variants not translated.
Solution:   Add NGETTEXT argument to xgettext. (Sergey Alyoshin)
Files:      src/po/Make_cyg.mak, src/po/Make_ming.mak, src/po/Make_mvc.mak,
            src/po/Makefile

Patch 8.0.1607
Problem:    <A HREF="starting.html#--clean">--clean</A> loads user settings from <A HREF="gui.html#.gvimrc">.gvimrc</A>.
Solution:   Behave like &quot;<A HREF="starting.html#-U">-U</A> NONE&quot; was used. (Ken Takata)
Files:      src/main.c, runtime/doc/starting.txt

Patch 8.0.1608
Problem:    <A HREF="os_win32.html#Win32">Win32</A>: directx not enabled by default.
Solution:   Change Makefile to enable directx by default. (Ken Takata)
Files:      runtime/doc/various.txt, src/Make_cyg_ming.mak,
            src/Make_mvc.mak

Patch 8.0.1609
Problem:    Shell commands in the <A HREF="gui.html#GUI">GUI</A> use a dumb <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Add the &quot;<A HREF="change.html#!">!</A>&quot; flag to <A HREF="options.html#'guioptions'">'guioptions'</A> to execute system commands in a
            special <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.  Only for <A HREF="os_unix.html#Unix">Unix</A> now.
Files:      src/os_unix.c, src/option.h, src/evalfunc.c, src/terminal.c,
            src/proto/terminal.pro, src/channel.c, src/proto/channel.pro,
            src/vim.h, runtime/doc/options.txt

Patch 8.0.1610 (after 8.0.1609)
Problem:    Cannot build without <A HREF="gui.html#GUI">GUI</A>.
Solution:   Add #ifdef.
Files:      src/terminal.c

Patch 8.0.1611
Problem:    <A HREF="index.html#CTRL-W">CTRL-W</A> in system <A HREF="terminal.html#terminal">terminal</A> does not go to <A HREF="channel.html#job">job</A>.
Solution:   Do not use <A HREF="index.html#CTRL-W">CTRL-W</A> <A HREF="motion.html#as">as</A> a <A HREF="terminal.html#terminal">terminal</A> command in a system <A HREF="terminal.html#terminal">terminal</A>.
Files:      src/terminal.c

Patch 8.0.1612
Problem:    Need to close <A HREF="terminal.html#terminal">terminal</A> after shell stopped.
Solution:   Make <A HREF="terminal.html#:terminal">:terminal</A> without argument close the <A HREF="windows.html#window">window</A> by default.
Files:      src/terminal.c, src/testdir/test_terminal.vim,
            runtime/doc/terminal.txt

Patch 8.0.1613
Problem:    Warning for unused variable in tiny build. (Tony Mechelynck)
Solution:   Move declaration to inner block.
Files:      src/os_unix.c

Patch 8.0.1614
Problem:    &quot;make tags&quot; doesn't include libvterm.
Solution:   Add the libvterm sources to the <A HREF="tagsrch.html#tags">tags</A> command.
Files:      src/Makefile

Patch 8.0.1615
Problem:    <A HREF="terminal.html#term_dumpload()">term_dumpload()</A> does not use the right colors.
Solution:   Initialize colors when not using create_vterm().
Files:      src/terminal.c

Patch 8.0.1616
Problem:    <A HREF="os_win32.html#Win32">Win32</A>: shell commands in the <A HREF="gui.html#GUI">GUI</A> open a new console.
Solution:   Use a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> for interactive use when <A HREF="options.html#'guioptions'">'guioptions'</A>
            contains &quot;<A HREF="change.html#!">!</A>&quot;.
Files:      src/os_win32.c

Patch 8.0.1617 (after 8.0.1616)
Problem:    <A HREF="os_win32.html#Win32">Win32</A>: <A HREF="various.html#:shell">:shell</A> command in the <A HREF="gui.html#GUI">GUI</A> crashes.
Solution:   Handle the situation that &quot;cmd&quot; is NULL. (Yasuhiro Matsumoto,
            closes #2721)
Files:      src/os_win32.c

Patch 8.0.1618
Problem:    Color Grey50, used for ToolbarLine, is missing in the compiled-in
            table.
Solution:   Add the color to the <A HREF="eval.html#list">list</A>. (Kazunobu Kuriyama)
Files:      src/term.c

Patch 8.0.1619
Problem:    <A HREF="os_win32.html#Win32">Win32</A> <A HREF="gui.html#GUI">GUI</A>: crash when winpty is not installed and trying to use
            <A HREF="various.html#:shell">:shell</A> in a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Check for NULL return form <A HREF="terminal.html#term_start()">term_start()</A>. (Yasuhiro Matsumoto,
            closes #2727)
Files:      src/os_win32.c

Patch 8.0.1620
Problem:    Reading <A HREF="spell.html#spell">spell</A> file has no good EOF detection.
Solution:   Check for EOF at every character read for a length field.
Files:      src/misc2.c

Patch 8.0.1621
Problem:    Using invalid default value for highlight attribute.
Solution:   Use zero instead of -1.
Files:      src/syntax.c

Patch 8.0.1622
Problem:    Possible NULL pointer dereference. (Coverity)
Solution:   Reverse the check for a NULL pointer.
Files:      src/quickfix.c

Patch 8.0.1623
Problem:    Terminal kill tests are flaky.
Solution:   Instead of running Vim in a <A HREF="terminal.html#terminal">terminal</A>, run <A HREF="motion.html#it">it</A> <A HREF="motion.html#as">as</A> a normal command.
Files:      src/testdir/test_terminal.vim

Patch 8.0.1624
Problem:    Options for <A HREF="terminal.html#term_dumpdiff()">term_dumpdiff()</A> and <A HREF="terminal.html#term_dumpload()">term_dumpload()</A> not implemented
            yet.
Solution:   Implement the relevant <A HREF="options.html#options">options</A>.
Files:      src/terminal.c, runtime/doc/eval.txt

Patch 8.0.1625
Problem:    Test_quotestar is flaky when run in <A HREF="gui_x11.html#GTK">GTK</A> <A HREF="gui.html#GUI">GUI</A>.
Solution:   Do not call lose_selection when invoked from
            selection_clear_event().
Files:      src/gui_gtk_x11.c

Patch 8.0.1626
Problem:    Compiler warning for possible loss of data.
Solution:   Use size_t instead of int. (Christian Brabandt)
Files:      src/terminal.c

Patch 8.0.1627
Problem:    Compiler warning for visibility attribute not supported on MinGW
            builds.
Solution:   Don't add the attribute when we don't expect <A HREF="motion.html#it">it</A> to work.
            (Christian Brabandt)
Files:      src/libvterm/src/vterm_internal.h

Patch 8.0.1628
Problem:    <A HREF="eval.html#Channel">Channel</A> log doesn't mention <A HREF="starting.html#exiting">exiting</A>.
Solution:   Add a <A HREF="channel.html#ch_log()">ch_log()</A> call in getout().
Files:      src/main.c

Patch 8.0.1629
Problem:    <A HREF="os_mac.html#Mac">Mac</A>: getpagesize() is deprecated.
Solution:   Use sysconf() instead. (Ozaki Kiichi, closes #2741)
Files:      src/os_unix.c

Patch 8.0.1630
Problem:    Trimming white space is not that <A HREF="starting.html#easy">easy</A>.
Solution:   Add the <A HREF="builtin.html#trim()">trim()</A> function. (Bukn, Yasuhiro Matsumoto, closes #1280)
Files:      src/evalfunc.c, runtime/doc/eval.txt,
            src/testdir/test_functions.vim

Patch 8.0.1631
Problem:    Testing with Vim running in <A HREF="terminal.html#terminal">terminal</A> is a bit flaky.
Solution:   Delete any .swp file so that later tests don't fail.
Files:      src/testdir/screendump.vim

Patch 8.0.1632
Problem:    In a <A HREF="terminal.html#terminal">terminal</A> dump NUL and space considered are different,
            although they are displayed the same.
Solution:   When encountering NUL handle <A HREF="motion.html#it">it</A> like space.
Files:      src/terminal.c

Patch 8.0.1633
Problem:    A <A HREF="autocmd.html#TextChanged">TextChanged</A> autocmd triggers when <A HREF="motion.html#it">it</A> is defined after creating a
            buffer.
Solution:   Set b_last_changedtick when opening a buffer. (Hirohito Higashi,
            closes #2742)
Files:      src/buffer.c, src/testdir/test_autocmd.vim

Patch 8.0.1634
Problem:    The ex_vimgrep() function is too long.
Solution:   Split <A HREF="motion.html#it">it</A> in smaller <A HREF="eval.html#functions">functions</A>. (Yegappan Lakshmanan)
Files:      src/quickfix.c

Patch 8.0.1635
Problem:    Undefining _POSIX_THREADS causes problems with <A HREF="if_pyth.html#Python">Python</A> 3. (Micah
            Bucy, closes #2748)
Solution:   Remove the lines.
Files:      src/if_python3.c

Patch 8.0.1636
Problem:    No test for <A HREF="terminal.html#term_dumpload()">term_dumpload()</A> and <A HREF="terminal.html#term_dumpdiff()">term_dumpdiff()</A>.
Solution:   Add tests.
Files:      src/testdir/test_terminal.vim

Patch 8.0.1637
Problem:    No test for <A HREF="terminal.html#term_dumpdiff()">term_dumpdiff()</A> <A HREF="options.html#options">options</A> argument.
Solution:   Add a test.
Files:      src/testdir/test_terminal.vim

Patch 8.0.1638
Problem:    Popup test fails depending on environment variable.
Solution:   Reset $COLORFGBG when running Vim in a <A HREF="terminal.html#terminal">terminal</A>. (closes #2693)
Files:      src/testdir/screendump.vim

Patch 8.0.1639
Problem:    Libvterm code lags behind master.
Solution:   Sync to head, solve <A HREF="diff.html#merge">merge</A> problems.
Files:      src/libvterm/README, src/libvterm/bin/unterm.c,
            src/libvterm/bin/vterm-ctrl.c, src/libvterm/bin/vterm-dump.c,
            src/libvterm/doc/URLs, src/libvterm/doc/seqs.txt,
            src/libvterm/include/vterm.h,
            src/libvterm/include/vterm_keycodes.h, src/libvterm/src/mouse.c,
            src/libvterm/src/parser.c, src/libvterm/src/pen.c,
            src/libvterm/src/screen.c, src/libvterm/src/state.c,
            src/libvterm/src/vterm.c, src/libvterm/src/vterm_internal.h,
            src/libvterm/t/10state_putglyph.test,
            src/libvterm/t/25state_input.test, src/libvterm/t/harness.c,
            src/libvterm/t/26state_query.test

Patch 8.0.1640
Problem:    Test_cwd() is flaky.
Solution:   Add to <A HREF="eval.html#list">list</A> of flaky tests.
Files:      src/testdir/runtest.vim

Patch 8.0.1641
Problem:    <A HREF="eval.html#Job">Job</A> in <A HREF="terminal.html#terminal">terminal</A> can't communicate with Vim.
Solution:   Add the <A HREF="terminal.html#terminal">terminal</A> API.
Files:      src/terminal.c, src/buffer.c, src/testdir/test_terminal.vim,
            src/testdir/screendump.vim, runtime/doc/terminal.txt

Patch 8.0.1642
Problem:    Running Vim in <A HREF="terminal.html#terminal">terminal</A> fails with two <A HREF="windows.html#windows">windows</A>.
Solution:   Pass the number of rows to RunVimInTerminal().
Files:      src/testdir/screendump.vim, src/testdir/test_terminal.vim

Patch 8.0.1643
Problem:    Terminal API tests fail.
Solution:   Explicitly set <A HREF="options.html#'title'">'title'</A>.
Files:      src/testdir/test_terminal.vim

Patch 8.0.1644
Problem:    Terminal API tests still fail.
Solution:   Explicitly set <A HREF="options.html#'title'">'title'</A> in the <A HREF="terminal.html#terminal">terminal</A> <A HREF="channel.html#job">job</A>. (Ozaki Kiichi,
            closes #2750)
Files:      src/testdir/test_terminal.vim, src/testdir/screendump.vim

Patch 8.0.1645
Problem:    Test for <A HREF="terminal.html#terminal">terminal</A> response to <A HREF="intro.html#escape">escape</A> sequence fails for some
            people. (toothpik)
Solution:   Run &quot;cat&quot; and let <A HREF="motion.html#it">it</A> echo the characters.
Files:      src/testdir/test_terminal.vim

Patch 8.0.1646
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: executable contains unreferenced <A HREF="eval.html#functions">functions</A> and data.
Solution:   Add /opt:ref to the compiler command. (Ken Takata)
Files:      src/Make_mvc.mak

Patch 8.0.1647
Problem:    Terminal API may call a function not meant to be called by this
            API.
Solution:   Require the function to start with Tapi_.
Files:      runtime/doc/terminal.txt, src/terminal.c,
            src/testdir/test_terminal.vim

Patch 8.0.1648
Problem:    Resource <A HREF="os_unix.html#fork">fork</A> tool doesn't work on <A HREF="if_pyth.html#Python">Python</A> 3.
Solution:   Use &quot;print()&quot; instead of &quot;print&quot;. (Marius Gedminas)
Files:      src/dehqx.py

Patch 8.0.1649
Problem:    No completion for argument <A HREF="eval.html#list">list</A> commands.
Solution:   Add <A HREF="editing.html#arglist">arglist</A> completion. (Yegappan Lakshmanan, closes #2706)
Files:      runtime/doc/eval.txt, runtime/doc/map.txt, src/ex_cmds2.c,
            src/ex_docmd.c, src/ex_getln.c, src/proto/ex_cmds2.pro,
            src/testdir/test_cmdline.vim, src/vim.h

Patch 8.0.1650
Problem:    Too many #ifdefs.
Solution:   Graduate FEAT_LISTCMDS, no reason to leave out buffer commands.
Files:      runtime/doc/various.txt, src/buffer.c, src/charset.c,
            src/evalfunc.c, src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c,
            src/version.c, src/feature.h

Patch 8.0.1651
Problem:    Cannot <A HREF="change.html#filter">filter</A> <A HREF="windows.html#:ls">:ls</A> output for <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#buffers">buffers</A>.
Solution:   Add flags for <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#buffers">buffers</A>. (Marcin Szamotulski, closes #2751)
Files:      runtime/doc/windows.txt, src/buffer.c,
            src/testdir/test_terminal.vim

Patch 8.0.1652
Problem:    <A HREF="terminal.html#term_dumpwrite()">term_dumpwrite()</A> does not output composing characters.
Solution:   Use the cell index.
Files:      src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.1653
Problem:    Screen dump is made too soon.
Solution:   Wait until the ruler is displayed. (Ozaki Kiichi, closes #2755)
Files:      src/testdir/dumps/Test_popup_command_01.dump,
            src/testdir/dumps/Test_popup_command_02.dump,
            src/testdir/screendump.vim, src/testdir/test_autocmd.vim,
            src/testdir/test_terminal.vim

Patch 8.0.1654
Problem:    Warnings for conversion of void to function pointer.
Solution:   Use a temp variable that is a function pointer.
Files:      src/if_python.c, src/if_python3.c

Patch 8.0.1655
Problem:    Outdated <A HREF="debug.html#gdb">gdb</A> message in <A HREF="terminal.html#terminal">terminal</A> debugger unclear.
Solution:   Specifically mention the required <A HREF="debug.html#gdb">gdb</A> version.  Avoid getting
            stuck on pagination.
Files:      runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.0.1656
Problem:    No option to have xxd produce upper <A HREF="change.html#case">case</A> variable names.
Solution:   Add the <A HREF="starting.html#-C">-C</A> argument. (Matt Panaro, closes #2772)
Files:      src/xxd/xxd.c

Patch 8.0.1657
Problem:    Crash when reading a <A HREF="channel.html#channel">channel</A>.
Solution:   Clear the write flag before <A HREF="editing.html#writing">writing</A>. (idea by Shinya Ohyanagi,
            closes #2769).
Files:      src/channel.c

Patch 8.0.1658
Problem:    Capitalize argument not available in long form.
Solution:   Recognize -capitalize.  Update man page.
Files:      src/xxd/xxd.c, runtime/doc/xxd.1, runtime/doc/xxd.man

Patch 8.0.1659
Problem:    Scroll events not recognized for some xterm emulators.
Solution:   Recognize mouse codes 0x40 and 0x41 <A HREF="motion.html#as">as</A> scroll events.
Files:      src/term.c

Patch 8.0.1660
Problem:    The <A HREF="terminal.html#terminal">terminal</A> API &quot;drop&quot; command doesn't support <A HREF="options.html#options">options</A>.
Solution:   Implement the <A HREF="options.html#options">options</A>.
Files:      src/terminal.c, src/ex_docmd.c, src/proto/ex_docmd.pro,
            src/ex_cmds.h, src/eval.c, src/misc2.c, src/fileio.c,
            src/testdir/test_terminal.vim, runtime/doc/terminal.txt

Patch 8.0.1661
Problem:    Warnings from 64 bit compiler.
Solution:   Add type casts. (Mike Williams)
Files:      src/terminal.c

Patch 8.0.1662
Problem:    Showing dump <A HREF="diff.html#diff">diff</A> doesn't mention both file names.
Solution:   Add the file name in the separator line.
Files:      src/terminal.c

Patch 8.0.1663 (after 8.0.1660)
Problem:    Cannot build without <A HREF="mbyte.html#multibyte">multibyte</A> feature.
Solution:   Add #ifdef.
Files:      src/ex_docmd.c

Patch 8.0.1664
Problem:    Test failure because of not allocating enough space.
Solution:   Allocate more bytes.
Files:      src/terminal.c

Patch 8.0.1665
Problem:    When running a <A HREF="terminal.html#terminal">terminal</A> from the <A HREF="gui.html#GUI">GUI</A> <A HREF="options.html#'term'">'term'</A> is not useful.
Solution:   Use $TERM in the <A HREF="gui.html#GUI">GUI</A> if <A HREF="motion.html#it">it</A> starts with &quot;xterm&quot;. (closes #2776)
Files:      src/os_unix.c, runtime/doc/terminal.txt

Patch 8.0.1666
Problem:    <A HREF="motion.html#&#37;">&#37;</A> argument in <A HREF="channel.html#ch_log()">ch_log()</A> causes trouble.
Solution:   Use <A HREF="eval.html#string">string</A> <A HREF="motion.html#as">as</A> third argument in internal <A HREF="channel.html#ch_log()">ch_log()</A>. (Dominique
            Pelle, closes #2784)
Files:      src/evalfunc.c, src/testdir/test_channel.vim

Patch 8.0.1667
Problem:    Terminal <A HREF="windows.html#window">window</A> tests are flaky.
Solution:   Increase the waiting time for Vim to start.
Files:      src/testdir/screendump.vim

Patch 8.0.1668
Problem:    Terminal debugger: can't re-open source code <A HREF="windows.html#window">window</A>.
Solution:   Add the <A HREF="terminal.html#:Source">:Source</A> command.  Also create the <A HREF="windows.html#window">window</A> if needed when
            <A HREF="debug.html#gdb">gdb</A> stops at a source line.
Files:      runtime/pack/dist/opt/termdebug/plugin/termdebug.vim,
            runtime/doc/terminal.txt

Patch 8.0.1669
Problem:    <A HREF="quickfix.html#:vimgrep">:vimgrep</A> may add entries to the wrong <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A>.
Solution:   Use the <A HREF="eval.html#list">list</A> identifier. (Yegappan Lakshmanan)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1670
Problem:    Terminal <A HREF="windows.html#window">window</A> tests are still a bit flaky.
Solution:   Increase the waiting time for the buffer to be created.
Files:      src/testdir/test_terminal.vim

Patch 8.0.1671
Problem:    Crash when passing non-dict argument <A HREF="motion.html#as">as</A> env to <A HREF="channel.html#job_start()">job_start()</A>.
Solution:   Check for valid argument. (Ozaki Kiichi, closes #2765)
Files:      src/channel.c, src/testdir/test_channel.vim

Patch 8.0.1672
Problem:    Error during completion causes command to be cancelled.
Solution:   Reset did_emsg before waiting for another character. (Tom <A HREF="motion.html#M">M</A>.)
Files:      src/ex_getln.c, src/testdir/test_cmdline.vim

Patch 8.0.1673
Problem:    Terminal <A HREF="windows.html#window">window</A> tests are still a bit flaky.
Solution:   Increase the waiting time even more. (Elimar Riesebieter)
Files:      src/testdir/test_terminal.vim

Patch 8.0.1674
Problem:    Libvterm can't handle a long OSC <A HREF="eval.html#string">string</A> that is split.
Solution:   When an incomplete OSC <A HREF="eval.html#string">string</A> is received copy <A HREF="motion.html#it">it</A> to the parser
            buffer. Increase the size of the parser buffer to be able to
            handle longer strings.
Files:      src/libvterm/src/parser.c, src/libvterm/src/vterm.c

Patch 8.0.1675
Problem:    Unused <A HREF="map.html#macro">macro</A> argument in libvterm. (Randall <A HREF="motion.html#W">W</A>. Morris)
Solution:   Remove the argument.
Files:      src/libvterm/src/parser.c

Patch 8.0.1676
Problem:    No compiler warning for wrong printf format.
Solution:   Add a printf attribute for gcc. Fix reported problems. (Dominique
            Pelle, closes #2789)
Files:      src/channel.c, src/vim.h, src/proto/channel.pro

Patch 8.0.1677
Problem:    No compiler warning for wrong format in vim_snprintf().
Solution:   Add printf attribute for gcc.  Fix reported problems.
Files:      src/vim.h, src/proto.h, src/eval.c, src/fileio.c, src/mbyte.c,
            src/ops.c, src/spellfile.c, src/undo.c, src/json.c

Patch 8.0.1678
Problem:    Errorformat &quot;&#37;r&quot; implies &quot;&#37;&gt;&quot;. (Jan Gosmann)
Solution:   Jump to before setting fmt_ptr. (Yegappan Lakshmanan,
            closes #2785)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1679
Problem:    Compiler warning for printf format. (Chdiza)
Solution:   Change type to &quot;long long&quot;. (closes #2791)
Files:      src/ops.c

Patch 8.0.1680
Problem:    Memory allocated by libvterm does not show up in <A HREF="repeat.html#profile">profile</A>.
Solution:   Pass allocator <A HREF="eval.html#functions">functions</A> to vterm_new().
Files:      src/terminal.c

Patch 8.0.1681
Problem:    The format attribute fails with MinGW. (John Marriott)
Solution:   Don't use the format attribute with MinGW.
Files:      src/vim.h, src/proto.h, src/channel.c

Patch 8.0.1682
Problem:    Auto indenting breaks <A HREF="insert.html#inserting">inserting</A> a block.
Solution:   Do not check for cursor <A HREF="intro.html#movement">movement</A> if indent was changed. (Christian
            Brabandt, closes #2778)
Files:      src/testdir/test_blockedit.vim, src/testdir/Make_all.mak,
            src/Makefile, src/ops.c

Patch 8.0.1683
Problem:    <A HREF="if_pyth.html#Python">Python</A> upgrade breaks Vim when defining PYTHON_HOME.
Solution:   Do not define PYTHON_HOME and PYTHON3_HOME in configure. (Naoki
            Inada, closes #2787)
Files:      src/configure.ac, src/auto/configure

Patch 8.0.1684
Problem:    ml_get <A HREF="message.html#errors">errors</A> when using <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> for shell command.
            (Blay263)
Solution:   Do not change the size of the current <A HREF="windows.html#window">window</A>.
Files:      src/terminal.c

Patch 8.0.1685
Problem:    Can't set ANSI colors of a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Add <A HREF="terminal.html#term_setansicolors()">term_setansicolors()</A>, <A HREF="terminal.html#term_getansicolors()">term_getansicolors()</A> and
            g:term_ansi_colors. (Andy Massimino, closes #2747)
Files:      runtime/doc/eval.txt, runtime/doc/terminal.txt, src/channel.c,
            src/evalfunc.c, src/proto/terminal.pro, src/structs.h,
            src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.1686 (after 8.0.1683)
Problem:    <A HREF="if_pyth.html#Python">Python</A> does not work when configuring with specific dir. (Rajdeep)
Solution:   Do define PYTHON_HOME and PYTHON3_HOME in configure if the <A HREF="if_pyth.html#Python">Python</A>
            config dir was specified.
Files:      src/configure.ac, src/auto/configure

Patch 8.0.1687
Problem:    64 bit compiler warnings.
Solution:   change type, add type cast. (Mike Williams)
Files:      src/terminal.c

Patch 8.0.1688
Problem:    Some macros are used without a semicolon, causing auto-indent to be
            wrong.
Solution:   Use the do-while(0) trick. (Ozaki Kiichi, closes #2729)
Files:      src/buffer.c, src/dosinst.c, src/ex_cmds.c, src/gui_at_sb.c,
            src/macros.h, src/main.c, src/memline.c, src/option.c,
            src/os_vms.c, src/screen.c, src/window.c

Patch 8.0.1689
Problem:    No tests for xxd.
Solution:   Add a test. (Christian Brabandt)
Files:      src/Makefile, src/testdir/Make_all.mak, src/testdir/Makefile,
            src/testdir/test_xxd.vim, src/testdir/runtest.vim

Patch 8.0.1690
Problem:    Not <A HREF="starting.html#easy">easy</A> to run one test with <A HREF="starting.html#gvim">gvim</A> instead of vim.
Solution:   Add VIMTESTTARGET in Makefile.
Files:      src/Makefile

Patch 8.0.1691
Problem:    Xxd test sometimes fails.
Solution:   Wipe out the XXDfile buffer.
Files:      src/testdir/test_xxd.vim

Patch 8.0.1692 (after 8.0.1686)
Problem:    <A HREF="if_pyth.html#Python">Python</A> may not work when using statically linked library.
Solution:   Do not define PYTHON_HOME and PYTHON3_HOME in configure if the
            <A HREF="if_pyth.html#Python">Python</A> library is linked statically.
Files:      src/configure.ac, src/auto/configure

Patch 8.0.1693
Problem:    Xxd is excluded from coverage statistics.
Solution:   Don't skip the xxd directory. (Christian Brabandt)
Files:      .travis.yml

Patch 8.0.1694
Problem:    Terminal API test is a bit flaky.
Solution:   Wait longer for Vim to stop.
Files:      src/testdir/screendump.vim

Patch 8.0.1695
Problem:    Xxd test not run on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Use xxd.exe if <A HREF="motion.html#it">it</A> exists.
Files:      src/testdir/test_xxd.vim

Patch 8.0.1696
Problem:    Coverage statistics don't work.
Solution:   Include the xxd directory. (Christian Brabandt)
Files:      .travis.yml

Patch 8.0.1697
Problem:    Various tests are still a bit flaky.
Solution:   Increase the default wait time to five seconds.
Files:      src/testdir/shared.vim, src/testdir/screendump.vim,
            src/testdir/test_channel.vim, src/testdir/test_clientserver.vim,
            src/testdir/test_quotestar.vim, src/testdir/test_terminal.vim

Patch 8.0.1698
Problem:    Coverage statistics don't work on coveralls.
Solution:   Use curly braces for $SRCDIR.
Files:      .travis.yml

Patch 8.0.1699
Problem:    Leftover stuff for <A HREF="if_pyth.html#Python">Python</A> 1.4.
Solution:   Remove outdated <A HREF="if_pyth.html#Python">Python</A> 1.4 stuff. (Naoki Inada, closes #2794)
Files:      src/Makefile, src/config.aap.in, src/config.mk.in,
            src/configure.ac, src/auto/configure

Patch 8.0.1700
Problem:    Coverage statistics still don't work on coveralls.
Solution:   Exclude the xxd directory again.
Files:      .travis.yml

Patch 8.0.1701
Problem:    Can disable COLOR_EMOJI with MSVC but not MinGW.
Solution:   Add COLOR_EMOJI flag.  Also add some empty lines for readability.
Files:      src/Make_cyg_ming.mak

Patch 8.0.1702
Problem:    Leaking memory when <A HREF="autocmd.html#autocommands">autocommands</A> make a <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A> invalid.
Solution:   Call FreeWild(). (Yegappan Lakshmanan)
Files:      src/quickfix.c

Patch 8.0.1703
Problem:    In the <A HREF="usr_01.html#tutor">tutor</A> <A HREF="options.html#'showcmd'">'showcmd'</A> is not set.
Solution:   Set <A HREF="options.html#'showcmd'">'showcmd'</A> in the <A HREF="usr_01.html#vimtutor">vimtutor</A> <A HREF="usr_41.html#script">script</A>. (Ken Takata, closes #2792)
Files:      src/vimtutor

Patch 8.0.1704
Problem:    <A HREF="options.html#'backupskip'">'backupskip'</A> default doesn't work for <A HREF="os_mac.html#Mac">Mac</A>.
Solution:   Use &quot;/private/tmp&quot;. (Rainer Mller, closes #2793)
Files:      src/option.c, src/testdir/test_options.vim,
            runtime/doc/options.txt

Patch 8.0.1705
Problem:    When making a vertical split the mode message isn't always
            updated, &quot;VISUAL&quot; remains. (Alexei Averchenko)
Solution:   Only reset clear_cmdline when filling all columns of the last
            screen line. (Tom <A HREF="motion.html#M">M</A>. closes #2611)
Files:      src/screen.c, src/testdir/test_window_cmd.vim

Patch 8.0.1706
Problem:    Cannot send CTRL-\ to a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Make <A HREF="index.html#CTRL-W">CTRL-W</A> CTRL-\ send CTRL-\ to a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Files:      src/terminal.c, runtime/doc/terminal.txt

Patch 8.0.1707
Problem:    When <A HREF="options.html#'wfh'">'wfh'</A> is set &quot;<A HREF="windows.html#:bel">:bel</A> 10new&quot; scrolls <A HREF="windows.html#window">window</A>. (Andrew Pyatkov)
Solution:   Set the fraction before <A HREF="change.html#changing">changing</A> the <A HREF="windows.html#window">window</A> height. (closes #2798)
Files:      src/window.c

Patch 8.0.1708
Problem:    Mkdir with '<A HREF="change.html#p">p</A>' flag fails on existing directory, which is
            different from the mkdir shell command.
Solution:   Don't fail if the directory already exists. (James McCoy,
            closes #2775)
Files:      src/evalfunc.c, src/testdir/test_eval_stuff.vim,
            runtime/doc/eval.txt

Patch 8.0.1709
Problem:    Some non-C89 code may slip through.
Solution:   Enforce <A HREF="develop.html#C89">C89</A> in configure. Fix detected problems. (James McCoy,
            closes #2735)
Files:      src/channel.c, src/configure.ac, src/auto/configure,
            src/gui_gtk_x11.c, src/if_python3.c

Patch 8.0.1710
Problem:    Building with <A HREF="if_ruby.html#Ruby">Ruby</A> fails.
Solution:   Don't add -ansi when building with <A HREF="if_ruby.html#Ruby">Ruby</A>.
Files:      src/configure.ac, src/auto/configure

Patch 8.0.1711
Problem:    Term_setsize() is not implemented yet.
Solution:   Implement <A HREF="motion.html#it">it</A>.
Files:      src/evalfunc.c, src/terminal.c, src/proto/terminal.pro,
            src/testdir/test_terminal.vim, runtime/doc/eval.txt

Patch 8.0.1712
Problem:    Terminal scrollback is not limited.
Solution:   Add the 'terminalscroll' option.
Files:      src/terminal.c, src/option.h, src/option.c,
            runtime/doc/options.txt, runtime/doc/terminal.txt

Patch 8.0.1713
Problem:    Terminal debugger doesn't handle arguments.
Solution:   Use <A HREF="map.html#&lt;f-args&gt;">&lt;f-args&gt;</A> and pass all the arguments to <A HREF="debug.html#gdb">gdb</A>, e.g. the core file
            or process number. (suggested by Christian Brabandt) Disallow
            starting the debugger <A HREF="if_cscop.html#twice">twice</A>.
Files:      runtime/pack/dist/opt/termdebug/plugin/termdebug.vim,
            runtime/doc/terminal.txt

Patch 8.0.1714
Problem:    Term_setsize() does not give an error in a normal buffer.
Solution:   Add an error message.
Files:      src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.1715
Problem:    Terminal buffer can be 1 more than 'terminalscroll' lines.
Solution:   Change <A HREF="change.html#&gt;">&gt;</A> to &gt;=.
Files:      src/terminal.c

Patch 8.0.1716
Problem:    Test for <A HREF="terminal.html#term_setsize()">term_setsize()</A> does not give a good error message.
Solution:   use <A HREF="testing.html#assert_inrange()">assert_inrange()</A>.
Files:      src/testdir/test_terminal.vim

Patch 8.0.1717
Problem:    <A HREF="develop.html#C89">C89</A> check causes too much trouble.
Solution:   Remove enforcing <A HREF="develop.html#C89">C89</A> for now.
Files:      src/configure.ac, src/auto/configure

Patch 8.0.1718
Problem:    Terminal scrollback test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Check for the last line of output anticipating there might be an
            empty line below <A HREF="motion.html#it">it</A>.
Files:      src/testdir/test_terminal.vim

Patch 8.0.1719
Problem:    Cannot specify which <A HREF="if_pyth.html#Python">Python</A> executable configure should use.
Solution:   Add --with-python-command and --with-python3-command.
Files:      src/configure.ac, src/auto/configure

Patch 8.0.1720
Problem:    When a <A HREF="builtin.html#timer">timer</A> is running a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> may not close after a
            shell has exited.
Solution:   Call <A HREF="channel.html#job_status()">job_status()</A> more often.
Files:      src/terminal.c

Patch 8.0.1721
Problem:    No test for using the 'termsize' option.
Solution:   Add a test.
Files:      src/testdir/screendump.vim, src/testdir/test_terminal.vim

Patch 8.0.1722
Problem:    Cannot specify a minimal size for a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Support the &quot;rows*cols&quot; format for 'winsize'.
Files:      src/terminal.c, src/testdir/test_terminal.vim, src/option.c,
            runtime/doc/options.txt

Patch 8.0.1723
Problem:    Using one item array size declaration is misleading.
Solution:   Instead of using &quot;[1]&quot; and actually using a larger array, use
            &quot;<A HREF="motion.html#[]">[]</A>&quot;.  This is to verify that this <A HREF="develop.html#C99">C99</A> feature works for all
            compilers.
Files:      src/structs.h, src/getchar.c

Patch 8.0.1724
Problem:    Declarations cannot be halfway a block.
Solution:   Move one declaration to check if this works for all compilers.
Files:      src/main.c

Patch 8.0.1725
Problem:    Terminal debugger doesn't handle command arguments.
Solution:   Add the <A HREF="terminal.html#:TermdebugCommand">:TermdebugCommand</A> command.  Use a ! to execute right away.
            (Christian Brabandt)
Files:      runtime/pack/dist/opt/termdebug/plugin/termdebug.vim,
            runtime/doc/terminal.txt

Patch 8.0.1726 (after 8.0.1724)
Problem:    Older MSVC doesn't support declarations halfway a block.
Solution:   Move the declaration back to the start of the block.
Files:      src/main.c

Patch 8.0.1727
Problem:    qf_get_properties() function is too long.
Solution:   Refactor the code. (Yegappan Lakshmanan, closes #2807)
Files:      src/quickfix.c

Patch 8.0.1728
Problem:    Condition always <A HREF="vim9.html#false">false</A>, useless code.
Solution:   Remove the code. (Nikolai Pavlov, closes #2808)
Files:      src/message.c

Patch 8.0.1729
Problem:    No comma after last enum item.
Solution:   Add a few commas to check if this works for all compilers.  Also
            add a few <A HREF="version7.html#//">//</A> comments.
Files:      src/structs.h

Patch 8.0.1730
Problem:    No configure check for the used <A HREF="develop.html#C99">C99</A> features.
Solution:   Add a compilation check.  Tentatively document <A HREF="develop.html#C99">C99</A> features.
Files:      src/configure.ac, src/auto/configure, runtime/doc/develop.txt

Patch 8.0.1731
Problem:    Characters deleted on completion. (Adri Farrs)
Solution:   Also check the last item for the ORIGINAL_TEXT flag. (Christian
            Brabandt, closes #1645)
Files:      src/edit.c, src/testdir/test_popup.vim

Patch 8.0.1732
Problem:    Crash when <A HREF="terminal.html#terminal">terminal</A> API call deletes the buffer.
Solution:   Lock the buffer while calling a function. (closes #2813)
Files:      src/buffer.c, src/terminal.c, src/testdir/test_terminal.vim,
            src/testdir/test_autocmd.vim

Patch 8.0.1733
Problem:    Incomplete <A HREF="testing.html#testing">testing</A> for completion fix. (Lifepillar)
Solution:   Add a test with <A HREF="motion.html#CTRL-P">CTRL-P</A>.
Files:      src/testdir/test_popup.vim

Patch 8.0.1734
Problem:    Package directory not added to <A HREF="options.html#'rtp'">'rtp'</A> if prefix matches.
Solution:   Check the match is a full match. (Ozaki Kiichi, closes #2817)
            Also handle different ways of spelling a path.
Files:      src/testdir/test_packadd.vim, src/ex_cmds2.c

Patch 8.0.1735 (after 8.0.1723 and 8.0.1730)
Problem:    Flexible array member feature not supported by HP-UX. (John
            Marriott)
Solution:   Do not use the flexible array member feature of <A HREF="develop.html#C99">C99</A>.
Files:      src/configure.ac, src/auto/configure, src/structs.h,
            src/getchar.c, runtime/doc/develop.txt

Patch 8.0.1736
Problem:    Check for <A HREF="develop.html#C99">C99</A> features is incomplete.
Solution:   Use AC_PROG_CC_C99 and when <A HREF="develop.html#C99">C99</A> isn't fully supported check the
            features we need. (James McCoy, closes #2820)
Files:      src/configure.ac, src/auto/configure

Patch 8.0.1737
Problem:    fchown() used when <A HREF="motion.html#it">it</A> is not supported.
Solution:   Add #ifdef.
Files:      src/fileio.c

Patch 8.0.1738
Problem:    &quot;<A HREF="editing.html#:args">:args</A>&quot; output is hard to read.
Solution:   Make columns with the names if the output is more than one line.
Files:      src/ex_cmds2.c, src/version.c, src/proto/version.pro,
            src/testdir/test_arglist.vim

Patch 8.0.1739
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> with msys2 cannot build <A HREF="if_ruby.html#Ruby">Ruby</A> statically.
Solution:   Define RUBY_VERSION. (Gray Wolf, closes #2826)
Files:      src/Make_cyg_ming.mak

Patch 8.0.1740
Problem:    Warning for signed-unsigned incompatibility.
Solution:   Change type from &quot;char *&quot; to &quot;char_u *&quot;. (John Marriott)
Files:      src/ex_cmds2.c

Patch 8.0.1741
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> with msys2 cannot build <A HREF="if_ruby.html#Ruby">Ruby</A> statically.
Solution:   Add RUBY_VERSION to CFLAGS later. (Gray Wolf, closes #2833)
Files:      src/Make_cyg_ming.mak

Patch 8.0.1742
Problem:    Cannot get a <A HREF="eval.html#list">list</A> of all the jobs.  Cannot get the command of
            the <A HREF="channel.html#job">job</A>.
Solution:   When <A HREF="channel.html#job_info()">job_info()</A> is called without an argument return a <A HREF="eval.html#list">list</A> of
            jobs.  Otherwise, include the command that the <A HREF="channel.html#job">job</A> is running.
            (Yegappan Lakshmanan)
Files:      runtime/doc/eval.txt, src/channel.c, src/evalfunc.c,
            src/proto/channel.pro, src/structs.h, src/testdir/test_channel.vim

Patch 8.0.1743
Problem:    Terminal <A HREF="windows.html#window">window</A> <A HREF="options.html#options">options</A> are named inconsistently.
Solution:   prefix <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> <A HREF="options.html#options">options</A> with &quot;termwin&quot;.  Keep the old names
            for now <A HREF="motion.html#as">as</A> an alias.
Files:      src/option.c, src/option.h, src/structs.h, src/terminal.c,
            src/testdir/test_terminal.vim, src/testdir/gen_opt_test.vim,
            runtime/doc/options.txt, runtime/doc/quickref.txt,
            runtime/doc/terminal.txt, runtime/optwin.vim

Patch 8.0.1744
Problem:    On some systems /dev/stdout isn't writable.
Solution:   Skip test if <A HREF="editing.html#writing">writing</A> is not possible. (James McCoy, closes #2830)
Files:      src/testdir/test_writefile.vim

Patch 8.0.1745
Problem:    Build failure on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Build <A HREF="channel.html#job">job</A> arguments for <A HREF="os_win32.html#MS-Windows">MS-Windows</A>. Fix allocating <A HREF="channel.html#job">job</A> <A HREF="if_cscop.html#twice">twice</A>.
Files:      src/structs.h, src/channel.c, src/os_unix.c, src/misc2.c,
            src/terminal.c, src/proto/misc2.pro

Patch 8.0.1746
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="channel.html#channel">channel</A> tests fail.
Solution:   Make a copy of the command before splitting <A HREF="motion.html#it">it</A>.
Files:      src/channel.c

Patch 8.0.1747
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="terminal.html#term_start()">term_start()</A> does not set <A HREF="channel.html#job_info()">job_info()</A> cmd.
Solution:   Share the code from <A HREF="channel.html#job_start()">job_start()</A> to set jv_argv.
Files:      src/testdir/test_terminal.vim, src/channel.c, src/misc2.c,
            src/proto/misc2.pro, src/terminal.c

Patch 8.0.1748
Problem:    <A HREF="autocmd.html#CmdlineEnter">CmdlineEnter</A> command uses <A HREF="intro.html#backslash">backslash</A> instead of slash.
Solution:   Don't treat the character <A HREF="motion.html#as">as</A> a file name. (closes #2837)
Files:      src/fileio.c, src/testdir/test_autocmd.vim

Patch 8.0.1749
Problem:    <A HREF="os_vms.html#VMS">VMS</A>: 100&#37; CPU use, redefining mch_open() and mch_fopen() fails.
Solution:   Do not wait indefinitely in RealWaitForChar(). (Neil Rieck)
            Do not redefine mch_open() and mch_fopen() on <A HREF="os_vms.html#VMS">VMS</A>. (Zoltan
            Arpadffy)
Files:      src/os_vms.c, src/vim.h

Patch 8.0.1750
Problem:    Crash when clearing location <A HREF="eval.html#list">list</A> in <A HREF="autocmd.html#autocommand">autocommand</A>.
Solution:   Check if &quot;qi&quot; equals &quot;ql_info&quot;. (Yegappan Lakshmanan)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1751
Problem:    #ifdef causes bad highlighting.
Solution:   Move code around. (Ozaki Kiichi, closes #2731)
Files:      src/ui.c

Patch 8.0.1752
Problem:    qf_set_properties() is to long.
Solution:   Refactor the function.  Define INVALID_QFIDX. (Yegappan
            Lakshmanan, closes #2812)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1753
Problem:    Various warnings from a static analyser
Solution:   Add type casts, remove unneeded conditions. (Christian Brabandt,
            closes #2770)
Files:      src/evalfunc.c, src/ex_cmds2.c, src/fileio.c, src/getchar.c,
            src/normal.c, src/os_unix.c, src/search.c, src/term.c

Patch 8.0.1754
Problem:    ex_helpgrep() is too long.
Solution:   Refactor the function. (Yegappan Lakshmanan, closes #2766)
Files:      src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1755
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> <A HREF="gui.html#GUI">GUI</A>: high <A HREF="mbyte.html#unicode">unicode</A> char received <A HREF="motion.html#as">as</A> two utf-16 words.
Solution:   Keep the first <A HREF="motion.html#word">word</A> until the second <A HREF="motion.html#word">word</A> is received. (Chris
            Morgan, closes #2800)
Files:      src/gui_w32.c

Patch 8.0.1756
Problem:    <A HREF="gui.html#GUI">GUI</A>: after prompting for a number the mouse shape is sometimes
            wrong.
Solution:   Call setmouse() after setting &quot;State&quot;. (Hirohito Higashi,
            closes #2709)
Files:      src/misc1.c

Patch 8.0.1757
Problem:    Unnecessary changes in libvterm.
Solution:   Bring back <A HREF="version7.html#//">//</A> comments and trailing comma in enums.
Files:      src/libvterm/bin/unterm.c, src/libvterm/bin/vterm-ctrl.c,
            src/libvterm/bin/vterm-dump.c, src/libvterm/include/vterm.h,
            src/libvterm/include/vterm_keycodes.h,
            src/libvterm/src/encoding.c, src/libvterm/src/keyboard.c,
            src/libvterm/src/parser.c, src/libvterm/src/pen.c,
            src/libvterm/src/screen.c, src/libvterm/src/state.c,
            src/libvterm/src/unicode.c, src/libvterm/src/utf8.h,
            src/libvterm/src/vterm.c, src/libvterm/src/vterm_internal.h

Patch 8.0.1758
Problem:    open_line() returns TRUE/FALSE for success/failure.
Solution:   Return OK or FAIL.
Files:      src/misc1.c, src/normal.c, src/edit.c

Patch 8.0.1759
Problem:    Memory leak from duplicate <A HREF="options.html#options">options</A>. (Yegappan Lakshmanan)
Solution:   Don't set the default value <A HREF="if_cscop.html#twice">twice</A>.
Files:      src/option.c

Patch 8.0.1760
Problem:    Wrong number of arguments to vms_read().
Solution:   Drop the first argument. (Ozaki Kiichi)
Files:      src/ui.c

Patch 8.0.1761
Problem:    <A HREF="eval.html#Job">Job</A> in <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> with no output <A HREF="channel.html#channel">channel</A> is killed.
Solution:   Keep the <A HREF="channel.html#job">job</A> running when the input is a tty. (Ozaki Kiichi,
            closes #2734)
Files:      src/channel.c, src/os_unix.c, src/testdir/test_channel.vim

Patch 8.0.1762
Problem:    Terminal debug logging is a bit complicated.
Solution:   Make log_tr() use variable arguments (Ozaki Kiichi, closes #2730)
Files:      src/term.c

Patch 8.0.1763
Problem:    <A HREF="editing.html#:argedit">:argedit</A> does not reuse an empty unnamed buffer.
Solution:   Add the BLN_CURBUF flag and fix all the side effects. (Christian
            Brabandt, closes #2713)
Files:      src/buffer.c, src/ex_cmds2.c, src/proto/buffer.pro,
            src/testdir/test_arglist.vim, src/testdir/test_command_count.vim

Patch 8.0.1764
Problem:    Lgtm considers tutor.es to be EcmaScript.
Solution:   Add a config file for lgtm. (Bas van Schaik, closes #2844)
Files:      .lgtm.yml, Filelist

Patch 8.0.1765
Problem:    <A HREF="editing.html#CTRL-G">CTRL-G</A> <A HREF="motion.html#j">j</A> in <A HREF="insert.html#Insert">Insert</A> mode is incorrect when <A HREF="options.html#'virtualedit'">'virtualedit'</A> is set.
Solution:   Take coladd into account. (Christian Brabandt, closes #2743)
Files:      src/charset.c, src/testdir/test_virtualedit.vim

Patch 8.0.1766 (after 8.0.1758)
Problem:    Expanding abbreviation doesn't work. (Tooth Pik)
Solution:   Return OK instead of <A HREF="eval.html#FALSE">FALSE</A> and FAIL instead of <A HREF="eval.html#TRUE">TRUE</A>. (Christian
            Brabandt)
Files:      src/edit.c, src/testdir/test_mapping.vim

Patch 8.0.1767
Problem:    With <A HREF="options.html#'incsearch'">'incsearch'</A> text may jump up and down. ()
Solution:   Besides w_botline also save and restore w_empty_rows.
            (closes #2530)
Files:      src/ex_getln.c, src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_scrolling_01.dump

Patch 8.0.1768
Problem:    SET_NO_HLSEARCH() used in a wrong way.
Solution:   Make <A HREF="motion.html#it">it</A> a function. (suggested by Dominique Pelle,
            closes #2850)
Files:      src/vim.h, src/ex_docmd.c, src/proto/ex_docmd.pro, src/search.c,
            src/ex_getln.c, src/option.c, src/screen.c, src/tag.c

Patch 8.0.1769
Problem:    Repeated saving and restoring viewstate for <A HREF="options.html#'incsearch'">'incsearch'</A>.
Solution:   Use a structure.
Files:      src/ex_getln.c

Patch 8.0.1770
Problem:    Assert <A HREF="eval.html#functions">functions</A> don't return anything.
Solution:   Return non-zero when the assertion fails.
Files:      src/evalfunc.c, src/eval.c, src/proto/eval.pro,
            src/testdir/test_assert.vim, runtime/doc/eval.txt

Patch 8.0.1771
Problem:    In tests, when WaitFor() fails <A HREF="motion.html#it">it</A> doesn't say why. (James McCoy)
Solution:   Add WaitForAssert(), which produces an assert error when <A HREF="motion.html#it">it</A> fails.
Files:      src/testdir/shared.vim, src/testdir/test_terminal.vim,
            src/testdir/screendump.vim, src/testdir/test_autocmd.vim,
            src/testdir/test_channel.vim, src/testdir/test_clientserver.vim,
            src/testdir/test_job_fails.vim

Patch 8.0.1772
Problem:    <A HREF="quickfix.html#Quickfix">Quickfix</A>: mixup of <A HREF="eval.html#FALSE">FALSE</A> and FAIL, returning -1.
Solution:   Use FAIL and INVALID_QFIDX. (Yegappan Lakshmanan)
Files:      src/quickfix.c

Patch 8.0.1773
Problem:    Dialog <A HREF="message.html#messages">messages</A> are not translated.
Solution:   Add N_() and _() where needed. (Sergey Alyoshin)
Files:      src/diff.c, src/ex_cmds2.c, src/ex_docmd.c, src/message.c,
            src/po/Make_cyg.mak, src/po/Make_ming.mak, src/po/Make_mvc.mak,
            src/po/Makefile, src/quickfix.c, src/vim.h

Patch 8.0.1774
Problem:    Reading very long lines can be slow.
Solution:   Read up to 1 Mbyte at a time to avoid a lot of <A HREF="uganda.html#copying">copying</A>.  Add a
            check for going over the column limit.
Files:      src/fileio.c

Patch 8.0.1775
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: warning for unused variable.
Solution:   Move declaration inside #ifdef. (Mike Williams)
Files:      src/channel.c

Patch 8.0.1776
Problem:    In tests, when WaitFor() fails <A HREF="motion.html#it">it</A> doesn't say why.
Solution:   Turn a few more WaitFor() into WaitForAssert().
Files:      src/testdir/test_popup.vim, src/testdir/test_quotestar.vim,
            src/testdir/test_search.vim, src/testdir/test_terminal.vim,
            src/testdir/test_timers.vim

Patch 8.0.1777
Problem:    Cannot cleanup before loading another colorscheme.
Solution:   Add the <A HREF="autocmd.html#ColorSchemePre">ColorSchemePre</A> <A HREF="autocmd.html#autocommand">autocommand</A> event.
Files:      src/fileio.c, src/syntax.c, src/vim.h, src/testdir/test_gui.vim,
            runtime/colors/README.txt

Patch 8.0.1778
Problem:    Script to check translations does not always work.
Solution:   Go to first line before searching for MIME.
Files:      src/po/check.vim

Patch 8.0.1779
Problem:    Deleting in a block selection causes problems.
Solution:   Check the length of the line before adding bd.textcol and
            bd.textlen. (Christian Brabandt, closes #2825)
Files:      src/ops.c, src/testdir/test_blockedit.vim

Patch 8.0.1780
Problem:    Test fails because Vim in a <A HREF="terminal.html#terminal">terminal</A> uses wrong <A HREF="options.html#'encoding'">'encoding'</A>.
Solution:   Set encoding in the test where <A HREF="motion.html#it">it</A> matters. (James McCoy,
            closes #2847)
Files:      src/testdir/test_terminal.vim

Patch 8.0.1781
Problem:    File names in <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="windows.html#window">window</A> are not always shortened.
Solution:   Shorten the file name when opening the <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="windows.html#window">window</A>. (Yegappan
            Lakshmanan, closes #2851, closes #2846)
Files:      src/testdir/test_quickfix.vim, src/fileio.c, src/proto/fileio.pro,
            src/quickfix.c

Patch 8.0.1782
Problem:    No simple way to label <A HREF="quickfix.html#quickfix">quickfix</A> entries.
Solution:   Add the &quot;module&quot; item, to be used instead of the file name for
            display purposes. (Marcin Szamotulski, closes #1757)
Files:      runtime/doc/eval.txt, runtime/doc/quickfix.txt, src/alloc.h,
            src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1783
Problem:    Cannot use 256 colors in a <A HREF="os_win32.html#MS-Windows">MS-Windows</A> console.
Solution:   Add 256 color support. (Nobuhiro Takasaki, closes #2821)
Files:      src/misc1.c, src/option.c, src/os_win32.c, src/proto/os_win32.pro,
            src/term.c, src/proto/term.pro, src/terminal.c

Patch 8.0.1784 (after 8.0.1782)
Problem:    Gvim test gets stuck in <A HREF="gui_w32.html#dialog">dialog</A>.
Solution:   Rename the file used.
Files:      src/testdir/test_quickfix.vim

Patch 8.0.1785 (after 8.0.1783)
Problem:    Missing symbol in <A HREF="os_win32.html#Win32">Win32</A> small build.
Solution:   Define VTERM_ANSI_INDEX_NONE without the <A HREF="terminal.html#terminal">terminal</A> feature. Also
            fix unused function with #ifdef.
Files:      src/term.c, src/os_win32.c

Patch 8.0.1786
Problem:    No test for <A HREF="options.html#'termwinkey'">'termwinkey'</A>.
Solution:   Add a test.  Make <A HREF="builtin.html#feedkeys()">feedkeys()</A> handle terminal_loop() returning
            before characters are consumed.
Files:      src/testdir/test_terminal.vim, src/terminal.c, src/evalfunc.c,
            src/ex_docmd.c, src/getchar.c, src/keymap.h

Patch 8.0.1787
Problem:    Cannot insert the whole cursor line.
Solution:   Make <A HREF="undo.html#CTRL-R">CTRL-R</A> <A HREF="various.html#CTRL-L">CTRL-L</A> work. (Andy Massimino, closes #2857)
Files:      runtime/doc/cmdline.txt, src/ex_getln.c, src/ops.c,
            src/testdir/test_cmdline.vim

Patch 8.0.1788
Problem:    Tool to check a color scheme is not installed.
Solution:   Update the <A HREF="usr_90.html#install">install</A> rule. (Christian Brabandt)
Files:      src/Makefile

Patch 8.0.1789
Problem:    <A HREF="autocmd.html#BufWinEnter">BufWinEnter</A> does not work well for a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Do not trigger <A HREF="autocmd.html#BufWinEnter">BufWinEnter</A> when opening a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Files:      src/terminal.c, runtime/doc/autocmd.txt,
            src/testdir/test_terminal.vim

Patch 8.0.1790
Problem:    <A HREF="options.html#'winfixwidth'">'winfixwidth'</A> is not always respected by <A HREF="windows.html#:close">:close</A>.
Solution:   Prefer a frame without <A HREF="options.html#'winfixwidth'">'winfixwidth'</A> or <A HREF="options.html#'winfixheight'">'winfixheight'</A>. (Jason
            Franklin)
Files:      src/window.c, src/testdir/test_winbuf_close.vim

Patch 8.0.1791
Problem:    Using uint8_t does not work everywhere.
Solution:   Use char_u instead.
Files:      src/term.c, src/proto/term.pro, src/os_win32.c

Patch 8.0.1792
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> users expect <A HREF="starting.html#-?">-?</A> to work like <A HREF="starting.html#--help">--help</A>.
Solution:   Add <A HREF="starting.html#-?">-?</A>. (Christian Brabandt, closes #2867)
Files:      src/main.c

Patch 8.0.1793
Problem:    No test for &quot;vim -g&quot;.
Solution:   Add a test for &quot;<A HREF="starting.html#-g">-g</A>&quot; and &quot;<A HREF="starting.html#-y">-y</A>&quot;.
Files:      src/testdir/shared.vim, src/testdir/test_gui.vim

Patch 8.0.1794
Problem:    Duplicate term <A HREF="options.html#options">options</A> after renaming.
Solution:   Remove the old names 'termkey', 'termsize' and 'terminalscroll'.
Files:      src/option.c, src/terminal.c, src/option.h,
            src/testdir/gen_opt_test.vim, src/testdir/screendump.vim

Patch 8.0.1795
Problem:    Lose contact with jobs when <A HREF="gui_x11.html#:gui">:gui</A> forks.
Solution:   Don't <A HREF="os_unix.html#fork">fork</A> when there is a running <A HREF="channel.html#job">job</A>. Make log message for a
            died <A HREF="channel.html#job">job</A> clearer.  Also close the <A HREF="terminal.html#terminal">terminal</A> when stderr and stdout
            are the same FD.
Files:      src/gui.h, src/gui.c, src/channel.c, src/proto/channel.pro,
            src/os_unix.c, src/terminal.c

Patch 8.0.1796
Problem:    <A HREF="gui.html#GUI">GUI</A>: click on <A HREF="intro.html#tab">tab</A> fails when the focus is in a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Handle K_TABLINE.
Files:      src/terminal.c

Patch 8.0.1797
Problem:    Terminal <A HREF="windows.html#window">window</A> is redrawn too often and <A HREF="scroll.html#scrolling">scrolling</A> is repeated.
Solution:   Don't scroll immediately but only when redrawing.  Avoid redrawing
            the whole <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> on every change.
Files:      src/terminal.c, src/screen.c, src/proto/terminal.pro

Patch 8.0.1798
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: file considered read-only when another program has
            opened <A HREF="motion.html#it">it</A>.
Solution:   Pass file sharing flag to CreateFile(). (Linwei, closes #2860)
Files:      src/os_win32.c

Patch 8.0.1799
Problem:    No test for <A HREF="change.html#:registers">:registers</A> command.
Solution:   Add a test. (Dominique Pelle, closes #2880)
Files:      src/testdir/test_registers.vim

Patch 8.0.1800
Problem:    <A HREF="options.html#X11">X11</A>: getting color is slow.
Solution:   Avoid using sprintf() and XParseColor(), put the RGB values in
            XColor directly.
Files:      src/gui_x11.c

Patch 8.0.1801
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: redirecting <A HREF="terminal.html#terminal">terminal</A> output does not work.
Solution:   Intercept the text written to the <A HREF="terminal.html#terminal">terminal</A> and write <A HREF="motion.html#it">it</A> to the
            file.
Files:      src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.1802 (after 8.0.1802)
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="terminal.html#terminal">terminal</A> test fails.
Solution:   Close redirected output file earlier.
Files:      src/terminal.c

Patch 8.0.1803
Problem:    Warning for uninitialized variable. (Tony Mechelynck)
Solution:   Initialize <A HREF="motion.html#it">it</A>.
Files:      src/terminal.c

Patch 8.0.1804
Problem:    Using <A HREF="various.html#:normal">:normal</A> in <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> causes problems. (Dominique
            Pelle)
Solution:   Don't call terminal_loop() for <A HREF="various.html#:normal">:normal</A>. (closes #2886)
Files:      src/ex_docmd.c, src/proto/ex_docmd.pro, src/evalfunc.c

Patch 8.0.1805
Problem:    qf_parse_line() is too long.
Solution:   Split <A HREF="motion.html#it">it</A> in parts.  Properly handle vim_realloc() failing.
            (Yegappan Lakshmanan, closes #2881)
Files:      src/quickfix.c

Patch 8.0.1806
Problem:    <A HREF="autocmd.html#InsertCharPre">InsertCharPre</A> causes problems for autocomplete. (Lifepillar)
Solution:   Check for <A HREF="autocmd.html#InsertCharPre">InsertCharPre</A> before calling vpeekc(). (Christian
            Brabandt, closes #2876)
Files:      src/edit.c, src/testdir/test_popup.vim

Patch 8.0.1807
Problem:    Function to set <A HREF="terminal.html#terminal">terminal</A> name is too long.
Solution:   Refactor the function.  Fix typo in test.
Files:      src/term.c, src/testdir/test_options.vim

Patch 8.0.1808 (after 8.0.1807)
Problem:    Can't build without TGETENT.
Solution:   Add #ifdef
Files:      src/term.c

Patch 8.0.1809
Problem:    Various typos.
Solution:   Correct the mistakes, change &quot;cursur&quot; to &quot;cursor&quot;. (closes #2887)
Files:      src/edit.c, src/normal.c, src/screen.c, src/proto/screen.pro,
            src/ui.c

Patch 8.0.1810
Problem:    Buffer of a <A HREF="terminal.html#terminal">terminal</A> only updated in <A HREF="terminal.html#Terminal-Normal">Terminal-Normal</A> mode.
Solution:   Copy the <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> content to the buffer when in
            <A HREF="terminal.html#Terminal-Job">Terminal-Job</A> mode.
Files:      src/terminal.c, src/proto/terminal.pro, src/ex_cmds2.c,
            src/proto/ex_cmds2.pro

Patch 8.0.1811
Problem:    No test for <A HREF="builtin.html#winrestcmd()">winrestcmd()</A>.
Solution:   Add a test. (Dominique Pelle, closes #2894)
Files:      src/testdir/test_window_cmd.vim

Patch 8.0.1812
Problem:    The qf_jump_to_usable_window() function is too long.
Solution:   Split <A HREF="motion.html#it">it</A> in parts. (Yegappan Lakshmanan, closes #2891)
Files:      src/quickfix.c

Patch 8.0.1813
Problem:    Windows installer doesn't <A HREF="usr_90.html#install">install</A> <A HREF="terminal.html#terminal">terminal</A> debugger.
Solution:   Add the package to the <A HREF="eval.html#list">list</A> of files to <A HREF="usr_90.html#install">install</A>.
Files:      nsis/gvim.nsi

Patch 8.0.1814
Problem:    Crash with <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> and with <A HREF="options.html#'lazyredraw'">'lazyredraw'</A> set. (Antoine)
Solution:   Check the <A HREF="terminal.html#terminal">terminal</A> still exists after update_screen().
Files:      src/terminal.c

Patch 8.0.1815 (after 8.0.1814)
Problem:    Still a crash with <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> and with <A HREF="options.html#'lazyredraw'">'lazyredraw'</A> set.
            (Antoine)
Solution:   Do not wipe out the buffer when updating the screen.
Files:      src/terminal.c, src/proto/terminal.pro, src/screen.c,
            src/proto/screen.pro, src/ui.c

Patch 8.0.1816
Problem:    No test for <A HREF="builtin.html#setcmdpos()">setcmdpos()</A>.
Solution:   Add a test. (Dominique Pelle, closes #2901)
Files:      src/testdir/test_cmdline.vim

Patch 8.0.1817
Problem:    A <A HREF="builtin.html#timer">timer</A> may change <A HREF="eval.html#v:count">v:count</A> unexpectedly.
Solution:   Save and restore <A HREF="eval.html#v:count">v:count</A> and similar <A HREF="eval.html#variables">variables</A> when a <A HREF="builtin.html#timer">timer</A>
            callback is invoked. (closes #2897)
Files:      src/eval.c, src/proto/eval.pro, src/ex_cmds2.c, src/structs.h,
            src/testdir/test_timers.vim

Patch 8.0.1818 (after 8.0.1810)
Problem:    Lines remove from wrong buffer when using <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Make sure to use tl_buffer.
Files:      src/terminal.c

Patch 8.0.1819
Problem:    Swap file warning for a file in a non-existing directory, if there
            is another with the same file name. (Juergen Weigert)
Solution:   When expanding the file name fails compare the file names.
Files:      src/testdir/test_swap.vim, src/memline.c

Patch 8.0.1820
Problem:    Terminal <A HREF="windows.html#window">window</A> redirecting stdout does not show stderr. (Mato
            Zanibelli)
Solution:   When stdout is not connected to pty_master_fd then use <A HREF="motion.html#it">it</A> for
            stderr. (closes #2903)
Files:      src/os_unix.c, src/testdir/test_terminal.vim

Patch 8.0.1821
Problem:    Cursor in <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> moves when pressing <A HREF="index.html#CTRL-W">CTRL-W</A>. (Dominique
            Pelle)
Solution:   Do not more the cursor or redraw when not in <A HREF="terminal.html#Terminal-Normal">Terminal-Normal</A> mode.
            (closes #2904)
Files:      src/terminal.c

Patch 8.0.1822
Problem:    Make uninstall does not remove colors/tools.
Solution:   Add a line to delete the tools directory. (Kazunobu Kuriyama)
Files:      src/Makefile

Patch 8.0.1823
Problem:    Test for <A HREF="terminal.html#terminal">terminal</A> stdout redirection is flaky.
Solution:   Wait for the <A HREF="channel.html#job">job</A> to finish.
Files:      src/testdir/test_terminal.vim

Patch 8.0.1824
Problem:    Coverity warns for variable that may be uninitialized.
Solution:   Initialize the variable.
Files:      src/terminal.c

Patch 8.0.1825
Problem:    Might use NULL pointer when out of memory. (Coverity)
Solution:   Handle NULL pointer better.
Files:      src/getchar.c

Patch 8.0.1826
Problem:    Configure uses old compiler flag.
Solution:   Remove _DARWIN_C_SOURCE. (Kazunobu Kuriyama)
Files:      src/configure.ac, src/auto/configure

Patch 8.0.1827
Problem:    Compiler warning for signed/unsigned char pointers. (Cesar Romani)
Solution:   Change the type of jv_argv.
Files:      src/channel.c, src/structs.h

Patch 8.0.1828
Problem:    Get no clue why <A HREF="gui_x11.html#:gui">:gui</A> does not <A HREF="os_unix.html#fork">fork</A>.
Solution:   Add a <A HREF="channel.html#channel">channel</A> log message.
Files:      src/channel.c

Patch 8.0.1829
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="usr_41.html#script">script</A> for <A HREF="diff.html#vimdiff">vimdiff</A> can't handle ! chars.
Solution:   Escape the ! chars. (Hans Ginzel, closes #2896)
Files:      src/dosinst.c

Patch 8.0.1830
Problem:    Switching to <A HREF="terminal.html#Terminal-Normal">Terminal-Normal</A> mode does not redraw. (Dominique
            Pelle)
Solution:   Also redraw when not updating the snapshot. (closes #2904)
Files:      src/terminal.c

Patch 8.0.1831
Problem:    Sometimes the <A HREF="quickfix.html#quickfix">quickfix</A> title is incorrectly prefixed with '<A HREF="cmdline.html#:">:</A>'.
Solution:   Prepend the colon in another way. (Yegappan Lakshmanan, closes
            #2905)
Files:      src/evalfunc.c, src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1832
Problem:    Cannot use <A HREF="eval.html#:unlet">:unlet</A> for an environment variable.
Solution:   Make <A HREF="motion.html#it">it</A> work.  Use unsetenv() if available. (Yasuhiro Matsumoto,
            closes #2855)
Files:      runtime/doc/eval.txt, src/config.h.in, src/configure.ac,
            src/auto/configure, src/eval.c, src/misc1.c, src/proto/misc1.pro,
            src/testdir/test_unlet.vim

Patch 8.0.1833
Problem:    <A HREF="options.html#X11">X11</A>: &quot;<A HREF="eval.html#:echo">:echo</A> 3.14&quot; gives <A HREF="eval.html#E806">E806</A>.
Solution:   set LC_NUMERIC to &quot;<A HREF="change.html#C">C</A>&quot;. (Dominique Pelle, closes #2368)
Files:      src/gui_x11.c

Patch 8.0.1834
Problem:    <A HREF="gui.html#GUI">GUI</A>: find/replace <A HREF="gui_w32.html#dialog">dialog</A> does not handle some chars properly.
Solution:   Escape '<A HREF="pattern.html#?">?</A>' when needed.  Always <A HREF="intro.html#escape">escape</A> <A HREF="intro.html#backslash">backslash</A>. (closes #2418,
            closes #2435)
Files:      src/gui.c

Patch 8.0.1835
Problem:    Print document name does not support <A HREF="mbyte.html#multibyte">multibyte</A>.
Solution:   Use StartDocW() if needed. (Yasuhiro Matsumoto, closes #2478)
Files:      src/os_mswin.c

Patch 8.0.1836
Problem:    Buffer-local <A HREF="windows.html#window">window</A> <A HREF="options.html#options">options</A> may not be recent if the buffer is
            still open in another <A HREF="windows.html#window">window</A>.
Solution:   Copy the <A HREF="options.html#options">options</A> from the <A HREF="windows.html#window">window</A> instead of the outdated <A HREF="windows.html#window">window</A>
            <A HREF="options.html#options">options</A>. (Bjorn Linse, closes #2336)
Files:      src/buffer.c, src/testdir/test_options.vim

Patch 8.0.1837
Problem:    One character cmdline abbreviation not triggered after '&lt;,'&gt;.
Solution:   Skip over the special range. (Christian Brabandt, closes #2320)
Files:      src/ex_getln.c, src/testdir/test_mapping.vim

Patch 8.0.1838
Problem:    Cursor in wrong position when switching to <A HREF="terminal.html#Terminal-Normal">Terminal-Normal</A> mode.
            (Dominique Pelle)
Solution:   Move to the end of the line if coladvance() fails.  Do not take a
            snapshot a second time.
Files:      src/terminal.c

Patch 8.0.1839
Problem:    Script to check .po file doesn't check for plural header.
Solution:   Add a check that the plural header is present when needed.
Files:      src/po/check.vim

Patch 8.0.1840
Problem:    <A HREF="builtin.html#getwinpos()">getwinpos()</A> is not tested.
Solution:   Add a test. (Dominique Pelle, closes #2911)
Files:      src/testdir/test_gui.vim

Patch 8.0.1841
Problem:    HP-UX does not have <A HREF="builtin.html#setenv()">setenv()</A>.
Solution:   Use vim_setenv(). (John Marriott)
Files:      src/misc1.c

Patch 8.0.1842
Problem:    Popup menu inside <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> isn't cleared.
Solution:   Use NOT_VALID in pum_undisplay(). (suggested by Christian
            Brabandt, closes #2908)
Files:      src/popupmnu.c

Patch 8.0.1843
Problem:    Entry for <A HREF="options.html#'wrap'">'wrap'</A> in <A HREF="options.html#options">options</A> <A HREF="windows.html#window">window</A> is wrong. (John Little)
Solution:   Make the change apply locally.
Files:      runtime/optwin.vim

Patch 8.0.1844
Problem:    Superfluous <A HREF="quickfix.html#quickfix">quickfix</A> code, missing examples.
Solution:   Remove unneeded code.  Add a few examples.  Add a bit more
            <A HREF="testing.html#testing">testing</A>. (Yegappan Lakshmanan, closes #2916)
Files:      runtime/doc/quickfix.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.1845
Problem:    Various comment updates needed, missing white space.
Solution:   Update comments, add white space.
Files:      src/getchar.c, src/testdir/test_cscope.vim, src/gui_mac.c

Patch 8.0.1846
Problem:    <A HREF="if_pyth.html#Python">Python</A> interface is incompatible with lldb.
Solution:   For OutputType set the base to be PyFile_Type. (Boxu Zhang)
            Partly disabled to avoid a crash.
Files:      src/if_py_both.h, src/if_python.c, src/if_python3.c

Patch 8.0.1847
Problem:    Some build <A HREF="options.html#options">options</A> don't have an example.
Solution:   Add a couple more examples and compiler flags.
Files:      src/Makefile

Patch 8.0.1848
Problem:    <A HREF="options.html#'termwinscroll'">'termwinscroll'</A> does not work properly. (Dominique Pelle)
Solution:   Subtract removed scrollback from the scrollback <A HREF="intro.html#count">count</A>.  Add a test
            for <A HREF="options.html#'termwinscroll'">'termwinscroll'</A>. (closes #2909)
Files:      src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.1849
Problem:    Compiler warning for unused arguments and missing prototype.
Solution:   Add UNUSED.  Add static.
Files:      src/mbyte.c, src/if_ruby.c

Patch 8.0.1850
Problem:    Todo items in source code not visible for users.
Solution:   Move the <A HREF="todo.html#todo">todo</A> items to the help file.
Files:      src/terminal.c


==============================================================================

VERSION 8.2				*<A NAME="version-8.2"></A><B>version-8.2</B>* *<A NAME="version8.2"></A><B>version8.2</B>* *<A NAME="vim-8.2"></A><B>vim-8.2</B>*

This section is about improvements made between version 8.1 and 8.2.

This release has hundreds of bug fixes, there are several new features and
there are many minor improvements.



Popup <A HREF="windows.html#windows">windows</A>					*<A NAME="new-popup-window"></A><B>new-popup-window</B>*

Popup <A HREF="windows.html#windows">windows</A> can be used to display text on top of other <A HREF="windows.html#windows">windows</A>.  This can
be for a simple message such <A HREF="motion.html#as">as</A> &quot;Build finished successfully&quot;, showing a
function prototype while editing a function call, a flexible <A HREF="popup.html#popup">popup</A> menu and
many other purposes.  See |<A HREF="popup.html#popup-window">popup-window</A>|.

Popup <A HREF="windows.html#windows">windows</A> are very flexible: they can be positioned relative to text, an
absolute position or just in the middle of the screen.  The size can be fixed
or adjusts to fit the text.  A &quot;zindex&quot; value specifies what <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> goes
on top of others.

The new <A HREF="options.html#'wincolor'">'wincolor'</A> option allows for setting the color for the whole <A HREF="popup.html#popup">popup</A>
<A HREF="windows.html#window">window</A>.  This also works for normal <A HREF="windows.html#windows">windows</A>.



Text properties					*<A NAME="new-text-properties"></A><B>new-text-properties</B>*

Text properties give a <A HREF="usr_05.html#plugin">plugin</A> <A HREF="intro.html#author">author</A> flexibility about what to highlight.
This can be used with an external asynchronous parser to <A HREF="diff.html#do">do</A> <A HREF="syntax.html#syntax">syntax</A>
highlighting.  Or to highlight text in a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.  The text properties
stick with the text when characters are deleted or inserted, which makes them
also useful <A HREF="motion.html#as">as</A> text markers. See |<A HREF="textprop.html#text-properties">text-properties</A>|.

The listener <A HREF="eval.html#functions">functions</A> have been added to report text changes to a server so
that <A HREF="motion.html#it">it</A> can dynamically update highlighting, <A HREF="motion.html#mark">mark</A> <A HREF="syntax.html#syntax">syntax</A> <A HREF="message.html#errors">errors</A> and the like.
See |<A HREF="builtin.html#listener_add()">listener_add()</A>|.



Vim <A HREF="usr_41.html#script">script</A> improvements				*<A NAME="new-vimscript-8.2"></A><B>new-vimscript-8.2</B>*

Functions can now be called in a chain, using &quot;<A HREF="eval.html#-&gt;">-&gt;</A>&quot;:
<B>	mylist-&gt;filter(filterexpr)-&gt;map(mapexpr)-&gt;sort()-&gt;join()</B>
The new `:eval` command can be used if the chain has no result.

Function arguments can be made optional by giving them a default value
YXXYoptional-function-argument|:
<B>	function Something(key, value = 10)</B>

The `:scriptversion` command was added to allow for changes that are not
backwards compatible. E.g. to only use &quot;..&quot; for <A HREF="eval.html#string">string</A> concatenation, so that
&quot;<A HREF="repeat.html#.">.</A>&quot; can be used to access a dictionary member consistently.

`:const` was added to allow for declaring a variable that cannot change:
<B>	const TIMER_DELAY = 400</B>

A heredoc-style assignment was added to easily assign a <A HREF="eval.html#list">list</A> of lines to a
variable without quoting or line continuation:
<B>	let lines =&lt;&lt; trim END</B>
<B>	   line one</B>
<B>	   line two</B>
<B>	END</B>

The |<A HREF="eval.html#Blob">Blob</A>| type was added. This makes <A HREF="motion.html#it">it</A> <A HREF="starting.html#easy">easy</A> to deal with binary data.

The /= and &#37;= assignment operators were added.

A <A HREF="eval.html#Dictionary">Dictionary</A> can be defined with literal keys using <A HREF="eval.html##{}">#{}</A>.  This avoids having
to use a lot of <A HREF="quotes.html#quotes">quotes</A>: 
<B>	let options = #{width: 30, height: 24}</B>



Other improvements					*<A NAME="new-other-8.2"></A><B>new-other-8.2</B>*

- When <A HREF="options.html#'incsearch'">'incsearch'</A> is set <A HREF="motion.html#it">it</A> also applies to `:substitute`.
- |<A HREF="map.html#modifyOtherKeys">modifyOtherKeys</A>| was added to allow <A HREF="map.html#mapping">mapping</A> more key combinations.
- <A HREF="terminal.html#ConPTY">ConPTY</A> support was added for Windows 10, supports full color in the <A HREF="terminal.html#terminal">terminal</A>.
- The <A HREF="os_win32.html#MS-Windows">MS-Windows</A> installer supports translations, silent <A HREF="usr_90.html#install">install</A> and looks
  much better.



Changed							*<A NAME="changed-8.2"></A><B>changed-8.2</B>*

The xdiff library was included to avoid the need for an external <A HREF="diff.html#diff">diff</A> program
and to make updating diffs much faster.

The code is using a few more modern C features, such <A HREF="motion.html#as">as</A> <A HREF="version7.html#//">//</A> comments.

Support for old compilers has been dropped: Borland C++, MSVC 2008.

Hangul input support was removed, <A HREF="motion.html#it">it</A> actually didn't work anymore.

Makefiles for old <A HREF="os_amiga.html#Amiga">Amiga</A> compilers were removed: Dice, Manx and SAS.

If a swap file is found without any changes <A HREF="motion.html#it">it</A> is automatically deleted.

The FEAT_TAG_OLDSTATIC code was removed, <A HREF="motion.html#it">it</A> slowed down <A HREF="tagsrch.html#tag">tag</A> searches.
The FEAT_TAG_ANYWHITE code was removed, <A HREF="motion.html#it">it</A> was not enabled in any build.
The UNICODE16 code was removed, <A HREF="motion.html#it">it</A> was not useful.
Workshop support was removed, nobody was using <A HREF="motion.html#it">it</A>.
The Aap build files were removed, they were outdated.
<A HREF="farsi.html#Farsi">Farsi</A> support was removed, <A HREF="motion.html#it">it</A> was outdated and unused.

VIMDLL was re-implemented, this shares the common parts between vim and <A HREF="starting.html#gvim">gvim</A>
to reduce the total <A HREF="usr_90.html#install">install</A> size.

The following features are now included in all versions: |<A HREF="various.html#+multi_byte">+multi_byte</A>|,
|<A HREF="various.html#+virtualedit">+virtualedit</A>|, |<A HREF="various.html#+vreplace">+vreplace</A>|, |<A HREF="various.html#+localmap">+localmap</A>|, |<A HREF="various.html#+cmdline_hist">+cmdline_hist</A>|, |<A HREF="various.html#+cmdline_compl">+cmdline_compl</A>|,
|<A HREF="various.html#+insert_expand">+insert_expand</A>|, |<A HREF="various.html#+modify_fname">+modify_fname</A>|, |<A HREF="various.html#+comments">+comments</A>|



Added							*<A NAME="added-8.2"></A><B>added-8.2</B>*

Added <A HREF="eval.html#functions">functions</A>:
	All the popup_ <A HREF="eval.html#functions">functions</A>.
	All the prop_ <A HREF="eval.html#functions">functions</A>.
	All the sign_ <A HREF="eval.html#functions">functions</A>.
	All the sound_ <A HREF="eval.html#functions">functions</A>.

	|<A HREF="builtin.html#appendbufline()">appendbufline()</A>|
	|<A HREF="builtin.html#balloon_gettext()">balloon_gettext()</A>|
	|<A HREF="builtin.html#bufadd()">bufadd()</A>|
	|<A HREF="builtin.html#bufload()">bufload()</A>|
	|<A HREF="channel.html#ch_readblob()">ch_readblob()</A>|
	|<A HREF="builtin.html#chdir()">chdir()</A>|
	|<A HREF="builtin.html#debugbreak()">debugbreak()</A>|
	|<A HREF="builtin.html#deletebufline()">deletebufline()</A>|
	|<A HREF="builtin.html#environ()">environ()</A>|
	|<A HREF="builtin.html#expandcmd()">expandcmd()</A>|
	|<A HREF="builtin.html#getenv()">getenv()</A>|
	|<A HREF="builtin.html#getimstatus()">getimstatus()</A>|
	|<A HREF="builtin.html#getmousepos()">getmousepos()</A>|
	|<A HREF="builtin.html#gettagstack()">gettagstack()</A>|
	|<A HREF="builtin.html#interrupt()">interrupt()</A>|
	|<A HREF="builtin.html#isinf()">isinf()</A>|
	|<A HREF="builtin.html#list2str()">list2str()</A>|
	|<A HREF="builtin.html#listener_add()">listener_add()</A>|
	|<A HREF="builtin.html#listener_flush()">listener_flush()</A>|
	|<A HREF="builtin.html#listener_remove()">listener_remove()</A>|
	|<A HREF="builtin.html#prompt_setcallback()">prompt_setcallback()</A>|
	|<A HREF="builtin.html#prompt_setinterrupt()">prompt_setinterrupt()</A>|
	|<A HREF="builtin.html#prompt_setprompt()">prompt_setprompt()</A>|
	|<A HREF="builtin.html#pum_getpos()">pum_getpos()</A>|
	|<A HREF="builtin.html#rand()">rand()</A>|
	|<A HREF="builtin.html#readdir()">readdir()</A>|
	|<A HREF="builtin.html#reg_executing()">reg_executing()</A>|
	|<A HREF="builtin.html#reg_recording()">reg_recording()</A>|
	|<A HREF="builtin.html#rubyeval()">rubyeval()</A>|
	|<A HREF="builtin.html#screenchars()">screenchars()</A>|
	|<A HREF="builtin.html#screenpos()">screenpos()</A>|
	|<A HREF="builtin.html#screenstring()">screenstring()</A>|
	|<A HREF="builtin.html#setenv()">setenv()</A>|
	|<A HREF="builtin.html#settagstack()">settagstack()</A>|
	|<A HREF="builtin.html#srand()">srand()</A>|
	|<A HREF="builtin.html#state()">state()</A>|
	|<A HREF="builtin.html#str2list()">str2list()</A>|
	|<A HREF="builtin.html#strptime()">strptime()</A>|
	|<A HREF="builtin.html#swapinfo()">swapinfo()</A>|
	|<A HREF="builtin.html#swapname()">swapname()</A>|
	|<A HREF="terminal.html#term_setapi()">term_setapi()</A>|
	|<A HREF="testing.html#test_getvalue()">test_getvalue()</A>|
	|<A HREF="testing.html#test_null_blob()">test_null_blob()</A>|
	|<A HREF="testing.html#test_refcount()">test_refcount()</A>|
	test_scrollbar() (later replaced with |<A HREF="testing.html#test_gui_event()">test_gui_event()</A>|)
	|<A HREF="testing.html#test_setmouse()">test_setmouse()</A>|
	|<A HREF="builtin.html#win_execute()">win_execute()</A>|
	|<A HREF="builtin.html#win_splitmove()">win_splitmove()</A>|
	|<A HREF="builtin.html#winlayout()">winlayout()</A>|

Added <A HREF="autocmd.html#autocommands">autocommands</A>:
	|<A HREF="autocmd.html#CompleteChanged">CompleteChanged</A>|
	|<A HREF="autocmd.html#DiffUpdated">DiffUpdated</A>|
	|<A HREF="autocmd.html#SafeState">SafeState</A>|
	|<A HREF="autocmd.html#SafeStateAgain">SafeStateAgain</A>|
	|<A HREF="autocmd.html#SourcePost">SourcePost</A>|
	|<A HREF="autocmd.html#TerminalWinOpen">TerminalWinOpen</A>|

Added commands:
    Jumping to <A HREF="message.html#errors">errors</A> relative to the cursor position:
	`:cabove`
	`:cafter`
	`:cbefore`
	`:cbelow`
	`:labove`
	`:lbefore`
	`:lbelow`
	`:lafter`
    Tab-local directory:
	`:tcd`
	`:tchdir`
    Others:
	`:const`
	`:eval`
	`:redrawtabline`
	`:scriptversion`
	`:spellrare`
	`:tlmenu`
	`:tlnoremenu`
	`:tlunmenu`
	`:xrestore`

Added <A HREF="options.html#options">options</A>:
	<A HREF="options.html#'completepopup'">'completepopup'</A>
	<A HREF="options.html#'completeslash'">'completeslash'</A>
	<A HREF="options.html#'cursorlineopt'">'cursorlineopt'</A>
	<A HREF="options.html#'modelineexpr'">'modelineexpr'</A>
	<A HREF="options.html#'previewpopup'">'previewpopup'</A>
	<A HREF="options.html#'scrollfocus'">'scrollfocus'</A>
	<A HREF="options.html#'tagfunc'">'tagfunc'</A>
	<A HREF="options.html#'termwintype'">'termwintype'</A>
	<A HREF="options.html#'varsofttabstop'">'varsofttabstop'</A>
	<A HREF="options.html#'vartabstop'">'vartabstop'</A>
	<A HREF="options.html#'wincolor'">'wincolor'</A>



Patches							*<A NAME="patches-8.2"></A><B>patches-8.2</B>*

These patches were applied after the 8.1 release and are included in the 8.2
release.

Patch 8.1.0001
Problem:    The <A HREF="pi_netrw.html#netrw">netrw</A> <A HREF="usr_05.html#plugin">plugin</A> does not work.
Solution:   Make <A HREF="motion.html#it">it</A> accept version 8.x.
Files:      runtime/autoload/netrw.vim

Patch 8.1.0002
Problem:    <A HREF="insert.html#:stopinsert">:stopinsert</A> changes the message position.
Solution:   Save and restore msg_col and msg_row in clearmode(). (Jason
            Franklin)
Files:	    src/screen.c, src/testdir/test_messages.vim

Patch 8.1.0003
Problem:    The <A HREF="quickfix.html#:compiler">:compiler</A> command is not tested.
Solution:   Add a test. (Dominique Pelle, closes #2930)
Files:	    src/Makefile, src/testdir/test_alot.vim,
            src/testdir/test_compiler.vim

Patch 8.1.0004
Problem:    Test for <A HREF="quickfix.html#:compiler">:compiler</A> command sometimes fails.
Solution:   Be <A HREF="various.html#less">less</A> strict about the error message. (Dominique Pelle)
Files:	    src/testdir/test_compiler.vim

Patch 8.1.0005
Problem:    Test for <A HREF="quickfix.html#:compiler">:compiler</A> command fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Ignore difference in path.
Files:	    src/testdir/test_compiler.vim

Patch 8.1.0006
Problem:    syn_id2cterm_bg() may be undefined. (Axel Bender)
Solution:   Adjust #ifdef.
Files:	    src/syntax.c

Patch 8.1.0007
Problem:    No test for &quot;<A HREF="insert.html#o">o</A>&quot; and &quot;<A HREF="insert.html#O">O</A>&quot; in <A HREF="visual.html#Visual">Visual</A> block mode.
Solution:   Add a test. (Dominique Pelle, closes #2932)
Files:	    src/testdir/test_visual.vim

Patch 8.1.0008
Problem:    No test for <A HREF="builtin.html#strwidth()">strwidth()</A>.
Solution:   Add a test. (Dominique Pelle, closes #2931)
Files:	    src/testdir/test_functions.vim

Patch 8.1.0009
Problem:    Tabpages insufficiently tested.
Solution:   Add more test coverage. (Dominique Pelle, closes #2934)
Files:	    src/testdir/test_tabpage.vim

Patch 8.1.0010
Problem:    efm_to_regpat() is too long.
Solution:   Split off three <A HREF="eval.html#functions">functions</A>. (Yegappan Lakshmanan, closes #2924)
Files:	    src/quickfix.c

Patch 8.1.0011
Problem:    <A HREF="builtin.html#maparg()">maparg()</A> and <A HREF="builtin.html#mapcheck()">mapcheck()</A> confuse empty and non-existing.
Solution:   Return <A HREF="map.html#&lt;Nop&gt;">&lt;Nop&gt;</A> for an existing non-empty <A HREF="map.html#mapping">mapping</A>. (closes #2940)
Files:	    src/evalfunc.c, src/testdir/test_maparg.vim

Patch 8.1.0012
Problem:    Misplaced #endif.
Solution:   Move the #endif to after the <A HREF="eval.html#expression">expression</A>. (David Binderman)
Files:	    src/fileio.c

Patch 8.1.0013
Problem:    Using freed memory when <A HREF="change.html#changing">changing</A> <A HREF="terminal.html#terminal">terminal</A> cursor color.
Solution:   Make a copy of the color. (Dominique Pelle, closes #2938,
            closes #2941)
Files:	    src/terminal.c

Patch 8.1.0014
Problem:    qf_init_ext() is too long.
Solution:   Split <A HREF="motion.html#it">it</A> into multiple <A HREF="eval.html#functions">functions</A>. (Yegappan Lakshmanan,
            closes #2939)
Files:	    src/quickfix.c

Patch 8.1.0015
Problem:    Cursor color wrong when closing a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>, ending up in
            another <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>. (Dominique Pelle)
Solution:   Bail out of terminal_loop() when the buffer changes.
            (closes #2942)
Files:	    src/terminal.c

Patch 8.1.0016
Problem:    Possible crash in <A HREF="terminal.html#term_wait()">term_wait()</A>. (Dominique Pelle)
Solution:   Check for a valid buffer after ui_delay(). (closes #2944)
Files:	    src/terminal.c

Patch 8.1.0017
Problem:    Shell command completion has duplicates. (Yegappan Lakshmanan)
Solution:   Use a hash table to avoid duplicates. (Ozaki Kiichi, closes #539,
            closes #2733)
Files:	    src/ex_getln.c, src/testdir/test_cmdline.vim

Patch 8.1.0018
Problem:    Using &quot;<A HREF="visual.html#gn">gn</A>&quot; may select wrong text when wrapping.
Solution:   Avoid wrapping when searching forward. (Christian Brabandt)
Files:	    src/search.c, src/testdir/test_gn.vim

Patch 8.1.0019
Problem:    Error when defining a Lambda with index of a function result.
Solution:   When not evaluating an <A HREF="eval.html#expression">expression</A> and skipping a function call,
            set the return value to VAR_UNKNOWN.
Files:	    src/userfunc.c, src/testdir/test_lambda.vim

Patch 8.1.0020
Problem:    Cannot tell whether a <A HREF="sponsor.html#register">register</A> is being used for executing or
            <A HREF="repeat.html#recording">recording</A>.
Solution:   Add <A HREF="builtin.html#reg_executing()">reg_executing()</A> and <A HREF="builtin.html#reg_recording()">reg_recording()</A>. (Hirohito Higashi,
            closes #2745)  Rename the global <A HREF="eval.html#variables">variables</A> for consistency.  Store
            the <A HREF="sponsor.html#register">register</A> name in reg_executing.
Files:	    runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/evalfunc.c,
            src/testdir/test_functions.vim, src/getchar.c, src/normal.c,
            src/ops.c, src/globals.h, src/edit.c, src/fileio.c, src/message.c,
            src/screen.c

Patch 8.1.0021
Problem:    Clang warns for undefined behavior.
Solution:   Move #ifdef outside of sprintf() call. (suggestion by Michael
            Jarvis, closes #2946)
Files:	    src/term.c

Patch 8.1.0022
Problem:    Repeating put from <A HREF="eval.html#expression">expression</A> <A HREF="sponsor.html#register">register</A> fails.
Solution:   Re-evaluate the <A HREF="eval.html#expression">expression</A> <A HREF="sponsor.html#register">register</A>. (Andy Massimino,
            closes #2945)
Files:	    src/getchar.c, src/testdir/test_put.vim

Patch 8.1.0023
Problem:    gcc 8.1 warns for use of strncpy(). (John Marriott)
Solution:   Use mch_memmove() instead of STRNCPY().
Files:	    src/memline.c

Patch 8.1.0024
Problem:    <A HREF="motion.html#&#37;">&#37;</A> command not tested on #ifdef and comment.
Solution:   Add tests. (Dominique Pelle, closes #2956)
Files:	    src/testdir/test_goto.vim

Patch 8.1.0025
Problem:    No test for the <A HREF="builtin.html#undofile()">undofile()</A> function.
Solution:   Add test. (Dominique Pelle, closes #2958)
Files:	    src/testdir/test_undo.vim

Patch 8.1.0026
Problem:    Terminal test fails with very tall <A HREF="terminal.html#terminal">terminal</A>. (Tom)
Solution:   Fix the <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> size in the test.
Files:	    src/testdir/test_terminal.vim

Patch 8.1.0027
Problem:    Difficult to make a <A HREF="usr_05.html#plugin">plugin</A> that feeds a line to a <A HREF="channel.html#job">job</A>.
Solution:   Add the initial code for the &quot;prompt&quot; buftype.
Files:	    runtime/doc/channel.txt, runtime/doc/eval.txt,
            runtime/doc/options.txt, runtime/doc/tags, runtime/doc/todo.txt,
            src/Makefile, src/buffer.c, src/channel.c, src/diff.c, src/edit.c,
            src/evalfunc.c, src/normal.c, src/ops.c, src/option.c,
            src/proto/buffer.pro, src/proto/channel.pro, src/proto/edit.pro,
            src/proto/ops.pro, src/structs.h, src/testdir/Make_all.mak,
            src/testdir/screendump.vim, src/testdir/test_prompt_buffer.vim

Patch 8.1.0028 (after 8.1.0027)
Problem:    Prompt buffer test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Disable the test for now. Remove stray assert.
Files:	    src/testdir/test_prompt_buffer.vim

Patch 8.1.0029
Problem:    Terminal test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A> when &quot;wc&quot; exists.
Solution:   Skip test with redirection on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Files:	    src/testdir/test_terminal.vim

Patch 8.1.0030
Problem:    Stopping Vim running in a <A HREF="terminal.html#terminal">terminal</A> may not work.
Solution:   Instead of sending <A HREF="intro.html#&lt;Esc&gt;">&lt;Esc&gt;</A> send <A HREF="motion.html#CTRL-O">CTRL-O</A>.
Files:	    src/testdir/screendump.vim, src/testdir/test_prompt_buffer.vim

Patch 8.1.0031
Problem:    Terminal test aucmd_on_close is flaky.
Solution:   Wait a bit longer.
Files:	    src/testdir/test_terminal.vim

Patch 8.1.0032
Problem:    BS in prompt buffer starts new line.
Solution:   Do not allow BS over the prompt.  Make <A HREF="terminal.html#term_sendkeys()">term_sendkeys()</A> handle
            special keys. Add a test.
Files:	    src/option.c, src/terminal.c, src/testdir/test_prompt_buffer.vim

Patch 8.1.0033
Problem:    Keys to stop Vim in <A HREF="terminal.html#terminal">terminal</A> are wrong. (Marius Gedminas)
Solution:   Move &quot;<A HREF="cmdline.html#:">:</A>&quot; to before <A HREF="scroll.html#CTRL-U">CTRL-U</A>.
Files:	    src/testdir/screendump.vim

Patch 8.1.0034
Problem:    Cursor not restored with &quot;<A HREF="editing.html#:edit">:edit</A> #&quot;.
Solution:   Don't assume <A HREF="autocmd.html#autocommands">autocommands</A> moved the cursor when <A HREF="motion.html#it">it</A> was moved to
            the first non-blank.
Files:	    src/ex_cmds.c, src/testdir/test_edit.vim

Patch 8.1.0035
Problem:    Not <A HREF="starting.html#easy">easy</A> to switch between prompt buffer and other <A HREF="windows.html#windows">windows</A>.
Solution:   Accept <A HREF="index.html#CTRL-W">CTRL-W</A> commands in <A HREF="insert.html#Insert">Insert</A> mode.  Start and stop <A HREF="insert.html#Insert">Insert</A> mode
            <A HREF="motion.html#as">as</A> one would expect.
Files:	    src/edit.c, src/ex_docmd.c, src/structs.h, src/window.c

Patch 8.1.0036
Problem:    Not restoring <A HREF="insert.html#Insert">Insert</A> mode if leaving a prompt buffer by using a
            mouse click.
Solution:   Set b_prompt_insert appropriately. Also correct cursor position
            when moving cursor to last line.
Files:	    src/buffer.c, src/edit.c, src/window.c

Patch 8.1.0037
Problem:    Cannot easily append lines to another buffer.
Solution:   Add <A HREF="builtin.html#appendbufline()">appendbufline()</A>.
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_bufline.vim, src/testdir/test_edit.vim

Patch 8.1.0038
Problem:    Popup test causes Vim to exit.
Solution:   Disable the broken part of the test for now.
Files:	    src/testdir/test_popup.vim

Patch 8.1.0039
Problem:    Cannot easily delete lines in another buffer.
Solution:   Add <A HREF="builtin.html#deletebufline()">deletebufline()</A>.
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_bufline.vim

Patch 8.1.0040
Problem:    Warnings from 64-bit compiler.
Solution:   Add type casts. (Mike Williams)
Files:	    src/edit.c

Patch 8.1.0041
Problem:    Attribute &quot;width&quot; missing from <A HREF="if_pyth.html#python">python</A> <A HREF="windows.html#window">window</A> attribute <A HREF="eval.html#list">list</A>.
Solution:   Add the item. (Ken Takata) Order the <A HREF="eval.html#list">list</A> like the items are used
            in the WindowAttr() function.
Files:	    src/if_py_both.h, src/testdir/test86.ok, src/testdir/test87.ok

Patch 8.1.0042
Problem:    If omni completion opens a <A HREF="windows.html#window">window</A> <A HREF="insert.html#Insert">Insert</A> mode is stopped.
            (Hirohito Higashi)
Solution:   Only set stop_insert_mode in a prompt buffer <A HREF="windows.html#window">window</A>.
Files:	    src/window.c

Patch 8.1.0043
Problem:    <A HREF="editing.html#++bad">++bad</A> argument of <A HREF="editing.html#:edit">:edit</A> does not work properly.
Solution:   Return FAIL from get_bad_opt() only when there is no valid
            argument. (Dominique Pelle, Christian Brabandt, closes #2966,
            closes #2947)
Files:	    src/ex_docmd.c, src/testdir/test_plus_arg_edit.vim

Patch 8.1.0044
Problem:    If a test function exits Vim this may go unnoticed.
Solution:   Check for a test function quitting Vim.  Fix tests that did exit
            Vim.
Files:	    src/testdir/runtest.vim, src/testdir/test_assert.vim

Patch 8.1.0045 (after 8.1.0038)
Problem:    Popup test isn't run completely.
Solution:   Remove &quot;finish&quot;.  Clean up function <A HREF="intro.html#definitions">definitions</A>.
Files:	    src/testdir/test_popup.vim

Patch 8.1.0046
Problem:    Loading a session file fails if <A HREF="options.html#'winheight'">'winheight'</A> is a big number.
Solution:   Set 'minwinheight' to zero at first.  Don't give an error when
            setting 'minwinheight' while <A HREF="options.html#'winheight'">'winheight'</A> is a big number.
            Fix using vertical splits. Fix setting 'minwinwidth'.
            (closes #2970)
Files:	    src/testdir/test_mksession.vim, src/option.c, src/window.c,
            src/proto/window.pro

Patch 8.1.0047
Problem:    No completion for <A HREF="eval.html#:unlet">:unlet</A> $VAR.
Solution:   Add completion. (Jason Franklin)
Files:	    src/ex_docmd.c, src/testdir/test_unlet.vim

Patch 8.1.0048
Problem:    vim_str2nr() does not handle numbers close to the maximum.
Solution:   Check for overflow more precisely. (Ken Takata, closes #2746)
Files:	    src/charset.c

Patch 8.1.0049
Problem:    Shell cannot tell running in a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Add the VIM_TERMINAL environment variable. (Christian Brabandt)
Files:	    runtime/doc/terminal.txt, src/os_unix.c, src/os_win32.c,
            src/testdir/test_terminal.vim

Patch 8.1.0050 (after 8.1.0049)
Problem:    $VIM_TERMINAL is also set when not in a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Pass a flag to indicate whether the <A HREF="channel.html#job">job</A> runs in a <A HREF="terminal.html#terminal">terminal</A>.
Files:	    src/channel.c, src/proto/channel.pro, src/evalfunc.c,
            src/terminal.c, src/os_unix.c, src/proto/os_unix.pro,
            src/os_win32.c

Patch 8.1.0051 (after 8.1.0050)
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: missing #endif.
Solution:   Add the #endif.
Files:	    src/os_win32.c

Patch 8.1.0052
Problem:    When a <A HREF="map.html#mapping">mapping</A> to <A HREF="map.html#&lt;Nop&gt;">&lt;Nop&gt;</A> times out the next <A HREF="map.html#mapping">mapping</A> is skipped.
Solution:   Reset &quot;timedout&quot; when waiting for a character. (Christian
            Brabandt, closes #2921)
Files:	    src/getchar.c

Patch 8.1.0053
Problem:    The first argument given to <A HREF="options.html#'completefunc'">'completefunc'</A> can be <A HREF="eval.html#Number">Number</A> or
            <A HREF="eval.html#String">String</A>, depending on the value.
Solution:   Avoid guessing the type of an argument, use typval_T in the
            callers of call_vim_function(). (Ozaki Kiichi, closes #2993)
Files:	    src/edit.c, src/eval.c, src/ex_getln.c, src/mbyte.c, src/normal.c,
            src/proto/eval.pro, src/testdir/test_ins_complete.vim

Patch 8.1.0054
Problem:    Compiler warning for using &#37;ld for &quot;long long&quot;.
Solution:   Add a type cast. (closes #3002)
Files:	    src/os_unix.c

Patch 8.1.0055 (after 8.1.0053)
Problem:    Complete test has wrong order of arguments. Wrong type for
            sentinel variable.
Solution:   Swap arguments, use VAR_UNKNOWN. (Ozaki Kiichi)
Files:	    src/mbyte.c, src/testdir/test_ins_complete.vim

Patch 8.1.0056
Problem:    Crash when using <A HREF="print.html#:hardcopy">:hardcopy</A> with illegal byte.
Solution:   Check for string_convert() returning NULL. (Dominique Pelle)
Files:	    src/hardcopy.c, src/testdir/test_hardcopy.vim

Patch 8.1.0057
Problem:    Popup menu displayed wrong when using autocmd.
Solution:   Use aucmd_prepbuf().  Force updating status line if the <A HREF="popup.html#popup">popup</A> menu
            is going to be redrawn anyway. (Christian Brabandt, closes #3009)
Files:	    src/edit.c, src/screen.c, src/proto/screen.pro

Patch 8.1.0058
Problem:    Display problem with margins and <A HREF="scroll.html#scrolling">scrolling</A>.
Solution:   Place the cursor in the right column. (Kouichi Iwamoto,
            closes #3016)
Files:	    src/screen.c

Patch 8.1.0059
Problem:    Displayed <A HREF="digraph.html#digraph">digraph</A> for &quot;<A HREF="various.html#ga">ga</A>&quot; wrong with <A HREF="options.html#'encoding'">'encoding'</A> &quot;cp1251&quot;.
Solution:   Convert from <A HREF="options.html#'encoding'">'encoding'</A> to &quot;<A HREF="mbyte.html#utf-8">utf-8</A>&quot; if needed. (closes #3015)
Files:	    src/digraph.c, src/testdir/test_digraph.vim

Patch 8.1.0060
Problem:    Crash when <A HREF="autocmd.html#autocommands">autocommands</A> delete the current buffer. (Dominique
            Pelle)
Solution:   Check that <A HREF="autocmd.html#autocommands">autocommands</A> don't change the buffer.
Files:	    src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.0061
Problem:    Window title is wrong after resetting and setting <A HREF="options.html#'title'">'title'</A>.
Solution:   Move resetting the title into maketitle(). (Jason Franklin)
Files:	    src/option.c, src/buffer.c

Patch 8.1.0062
Problem:    Popup menu broken if a callback changes the <A HREF="windows.html#window">window</A> layout. (Qiming
            Zhao)
Solution:   Recompute the <A HREF="popup.html#popup">popup</A> menu position if needed.  Redraw the ruler
            even when the <A HREF="popup.html#popup">popup</A> menu is displayed.
Files:	    src/popupmnu.c, src/proto/popupmnu.pro, src/screen.c

Patch 8.1.0063
Problem:    <A HREF="os_mac.html#Mac">Mac</A>: NSStringPboardType is deprecated.
Solution:   Use NSPasteboardTypeString. (Akshay Hegde, closes #3022)
Files:	    src/os_macosx.m

Patch 8.1.0064
Problem:    Typing <A HREF="index.html#CTRL-W">CTRL-W</A> in a prompt buffer shows mode &quot;<A HREF="starting.html#--">--</A> --&quot;.
Solution:   Set restart_edit to '<A HREF="insert.html#A">A</A>' and check for <A HREF="motion.html#it">it</A>.
Files:	    src/edit.c, src/window.c, src/screen.c

Patch 8.1.0065 (after 8.1.0062)
Problem:    Balloon displayed at the wrong position.
Solution:   Do not reposition the <A HREF="popup.html#popup">popup</A> menu at the cursor position.
Files:	    src/popupmnu.c

Patch 8.1.0066
Problem:    Nasty <A HREF="autocmd.html#autocommand">autocommand</A> causes using freed memory. (Dominique Pelle)
Solution:   Do not force executing <A HREF="autocmd.html#autocommands">autocommands</A> if the value of <A HREF="options.html#'syntax'">'syntax'</A> or
            <A HREF="options.html#'filetype'">'filetype'</A> did not change.
Files:	    src/option.c

Patch 8.1.0067
Problem:    <A HREF="autocmd.html#Syntax">Syntax</A> highlighting not working when re-entering a buffer.
Solution:   Do force executing <A HREF="autocmd.html#autocommands">autocommands</A> when not called recursively.
Files:	    src/option.c

Patch 8.1.0068
Problem:    Nasty <A HREF="autocmd.html#autocommands">autocommands</A> can still cause using freed memory.
Solution:   Disallow using <A HREF="builtin.html#setloclist()">setloclist()</A> and <A HREF="builtin.html#setqflist()">setqflist()</A> recursively.
Files:	    src/evalfunc.c

Patch 8.1.0069
Problem:    Cannot handle pressing <A HREF="pattern.html#CTRL-C">CTRL-C</A> in a prompt buffer.
Solution:   Add <A HREF="builtin.html#prompt_setinterrupt()">prompt_setinterrupt()</A>.
Files:	    runtime/doc/eval.txt, src/edit.c, src/evalfunc.c, src/channel.c,
            src/proto/channel.pro

Patch 8.1.0070
Problem:    Missing part of the changes for <A HREF="builtin.html#prompt_setinterrupt()">prompt_setinterrupt()</A>.
Solution:   Add the missing changes.
Files:	    src/structs.h

Patch 8.1.0071
Problem:    Terminal debugger only works with the <A HREF="terminal.html#terminal">terminal</A> feature.
Solution:   Make <A HREF="motion.html#it">it</A> also work with a prompt buffer.  Makes <A HREF="motion.html#it">it</A> possible to use
            on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>. Various other improvements. (closes #3012)
Files:	    runtime/doc/terminal.txt,
            runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.0072
Problem:    Use of <A HREF="options.html#'termwinkey'">'termwinkey'</A> is inconsistent.
Solution:   Change the documentation and the behavior. (Ken Takata)
Files:	    src/terminal.c, runtime/doc/terminal.txt

Patch 8.1.0073
Problem:    Crash when <A HREF="autocmd.html#autocommands">autocommands</A> call <A HREF="builtin.html#setloclist()">setloclist()</A>. (Dominique Pelle)
Solution:   If the <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A> changes then don't jump to the error.
Files:	    src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.0074 (after 8.1.0073)
Problem:    Crash when running <A HREF="quickfix.html#quickfix">quickfix</A> tests.
Solution:   Do not alloc a new location <A HREF="eval.html#list">list</A> when checking for the reference
            to be still valid.
Files:	    src/quickfix.c

Patch 8.1.0075
Problem:    No Vim logo in README file.
Solution:   Add one. (rni Dagur, closes #3024)
Files:      README.md

Patch 8.1.0076
Problem:    Command getting cleared with <A HREF="index.html#CTRL-W">CTRL-W</A> : in a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>. (Jason
            Franklin)
Solution:   Call redraw_after_callback() when editing the command line.
Files:	    src/terminal.c

Patch 8.1.0077
Problem:    Header of README file is not nice.
Solution:   Move text to the bottom.
Files:      README.md

Patch 8.1.0078
Problem:    &quot;<A HREF="eval.html#...">...</A>&quot; used inconsistently in <A HREF="message.html#messages">messages</A>.
Solution:   Drop the space before &quot; ...&quot;.
Files:	    src/spellfile.c, src/regexp_nfa.c

Patch 8.1.0079
Problem:    Superfluous space in <A HREF="message.html#messages">messages</A>.
Solution:   Remove the spaces. (closes #3030)
Files:	    src/gui_w32.c

Patch 8.1.0080
Problem:    Can't see the breakpoint number in the <A HREF="terminal.html#terminal">terminal</A> debugger.
Solution:   Use the breakpoint number for the sign. (Christian Brabandt)
Files:	    runtime/doc/terminal.txt,
            runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.0081
Problem:    The <A HREF="terminal.html#terminal">terminal</A> debugger doesn't adjust to changed <A HREF="options.html#'background'">'background'</A>.
Solution:   Add an <A HREF="autocmd.html#OptionSet">OptionSet</A> <A HREF="autocmd.html#autocommand">autocommand</A>. (Christian Brabandt)
Files:	    runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.0082
Problem:    In <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>, typing : at more prompt, inserts '<A HREF="cmdline.html#:">:</A>' instead
            of starting another <A HREF="intro.html#Ex">Ex</A> command.
Solution:   Add skip_term_loop and set <A HREF="motion.html#it">it</A> when putting '<A HREF="cmdline.html#:">:</A>' in the typeahead
            buffer.
Files:	    src/globals.h, src/main.c, src/message.c

Patch 8.1.0083
Problem:    &quot;is&quot; and &quot;<A HREF="motion.html#as">as</A>&quot; have trouble with quoted punctuation.
Solution:   Check for punctuation before a <A HREF="change.html#quote.">quote.</A> (Jason Franklin)
Files:	    src/search.c, src/testdir/test_textobjects.vim

Patch 8.1.0084
Problem:    <A HREF="autocmd.html#User">User</A> name completion does not work on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Use NetUserEnum() to get user names. (Yasuhiro Matsumoto)
Files:	    src/Make_ivc.mak, src/Make_cyg_ming.mak, src/Make_mvc.mak,
            src/misc1.c

Patch 8.1.0085
Problem:    No test for completing user name and language.
Solution:   Add tests. (Dominique Pelle, closes #2978)
Files:	    src/testdir/test_cmdline.vim

Patch 8.1.0086
Problem:    No tests for <A HREF="builtin.html#libcall()">libcall()</A> and <A HREF="builtin.html#libcallnr()">libcallnr()</A>.
Solution:   Add tests. (Dominique Pelle, closes #2982)
Files:	    src/testdir/test_functions.vim

Patch 8.1.0087
Problem:    <A HREF="eval.html#v:shell_error">v:shell_error</A> is always zero when using <A HREF="terminal.html#terminal">terminal</A> for &quot;!cmd&quot;.
Solution:   Use &quot;exitval&quot; of terminal-job. (Ozaki Kiichi, closes #2994)
Files:	    src/os_unix.c, src/os_win32.c, src/proto/terminal.pro,
            src/terminal.c, src/testdir/test_terminal.vim

Patch 8.1.0088
Problem:    Terminal test for stdout and stderr is a bit flaky.
Solution:   Wait for both stdout and stderr to have been processed. (Ozaki
            Kiichi, closes #2991)
Files:	    src/testdir/test_terminal.vim

Patch 8.1.0089
Problem:    error when ending the <A HREF="terminal.html#terminal">terminal</A> debugger
Solution:   Fix <A HREF="change.html#deleting">deleting</A> defined <A HREF="sign.html#signs">signs</A> for breakpoints.  Make the debugger
            work better on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Files:	    runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.0090
Problem:    &quot;<A HREF="eval.html#...">...</A>&quot; used inconsistently in a message.
Solution:   Define the message with &quot; ...&quot; once. (hint by Ken Takata)
Files:	    src/regexp_nfa.c

Patch 8.1.0091
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: Cannot interrupt <A HREF="debug.html#gdb">gdb</A> when program is running.
Solution:   Add <A HREF="builtin.html#debugbreak()">debugbreak()</A> and use <A HREF="motion.html#it">it</A> in the <A HREF="terminal.html#terminal">terminal</A> debugger.
            Respect <A HREF="options.html#'modified'">'modified'</A> in a prompt buffer.
Files:	    src/evalfunc.c, runtime/doc/eval.txt, src/undo.c,
	    runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.0092 (after 8.1.0091)
Problem:    Prompt buffer test fails.
Solution:   Set <A HREF="options.html#'nomodified'">'nomodified'</A> before closing the <A HREF="windows.html#window">window</A>. (Ozaki Kiichi,
            closes #3051)
Files:	    src/testdir/test_prompt_buffer.vim

Patch 8.1.0093
Problem:    non-MS-Windows: Cannot interrupt <A HREF="debug.html#gdb">gdb</A> when program is running.
Solution:   Only use <A HREF="builtin.html#debugbreak()">debugbreak()</A> on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Files:	    runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.0094
Problem:    Help text &quot;usage:&quot; is not capitalized.
Solution:   Make <A HREF="motion.html#it">it</A> &quot;Usage:&quot;. (closes #3044)
Files:	    src/main.c

Patch 8.1.0095
Problem:    Dialog for &quot;<A HREF="editing.html#:browse">:browse</A> tabnew&quot; says &quot;new window&quot;.
Solution:   Use &quot;new <A HREF="intro.html#tab">tab</A> page&quot;. (closes #3053)
Files:	    src/ex_docmd.c

Patch 8.1.0096
Problem:    Inconsistent use of the <A HREF="motion.html#word">word</A> <A HREF="autocmd.html#autocommands">autocommands</A>.
Solution:   Don't use auto-commands or &quot;auto commands&quot;.
Files:	    src/fileio.c

Patch 8.1.0097
Problem:    Superfluous space before exclamation <A HREF="motion.html#mark">mark</A>.
Solution:   Remove the space.  Don't translate debug message.
Files:	    src/regexp_nfa.c

Patch 8.1.0098
Problem:    Segfault when <A HREF="pattern.html#pattern">pattern</A> with \z() is very slow.
Solution:   Check for NULL regprog.  Add &quot;nfa_fail&quot; to <A HREF="testing.html#test_override()">test_override()</A> to be
            able to test this.  Fix that 'searchhl' resets called_emsg.
Files:	    src/syntax.c, runtime/doc/eval.txt, src/evalfunc.c, src/vim.h,
            src/testdir/test_syntax.vim, src/globals.h, src/screen.c,
            src/regexp.c, src/regexp_nfa.c

Patch 8.1.0099
Problem:    Exclamation <A HREF="motion.html#mark">mark</A> in error message not needed.
Solution:   Remove the exclamation <A HREF="motion.html#mark">mark</A>.
Files:	    src/regexp_nfa.c

Patch 8.1.0100
Problem:    Terminal debugger: error when setting a watch point.
Solution:   Don't try defining a sign for a watch point.
Files:	    runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.0101
Problem:    No test for <A HREF="builtin.html#getcmdwintype()">getcmdwintype()</A>.
Solution:   Add a test. (Dominique Pelle, closes #3068)
Files:	    src/testdir/test_cmdline.vim

Patch 8.1.0102
Problem:    Cannot build without <A HREF="syntax.html#syntax">syntax</A> highlighting.
Solution:   Add #ifdef around using reg_do_extmatch.
Files:	    src/regexp.c

Patch 8.1.0103
Problem:    Long version <A HREF="eval.html#string">string</A> cannot be translated.
Solution:   Build the <A HREF="eval.html#string">string</A> in init_longVersion().
Files:	    src/globals.h, src/version.h, src/version.c,
            src/proto/version.pro, src/main.c

Patch 8.1.0104
Problem:    Can't build without the <A HREF="various.html#+eval">+eval</A> feature.
Solution:   Add #ifdef.
Files:	    src/regexp_nfa.c

Patch 8.1.0105
Problem:    All <A HREF="intro.html#tab">tab</A> stops are the same.
Solution:   Add the variable tabstop feature. (Christian Brabandt,
            closes #2711)
Files:	    runtime/doc/change.txt, runtime/doc/options.txt,
            runtime/doc/various.txt, runtime/optwin.vim, src/beval.c,
            src/beval.h, src/buffer.c, src/charset.c, src/edit.c,
            src/evalfunc.c, src/ex_cmds.c, src/feature.h, src/gui_beval.c,
            src/gui_w32.c, src/hardcopy.c, src/message.c, src/misc1.c,
            src/ops.c, src/option.c, src/option.h, src/proto/misc1.pro,
            src/proto/option.pro, src/screen.c, src/structs.h,
            src/testdir/Make_all.mak, src/testdir/gen_opt_test.vim,
            src/testdir/test_breakindent.vim, src/testdir/test_vartabs.vim,
            src/version.c, src/workshop.c, src/Makefile

Patch 8.1.0106 (after 8.1.0103)
Problem:    Build fails when HAVE_DATE_TIME is undefined.
Solution:   Always define init_longVersion(). (Christian Brabandt,
            closes #3075)
Files:	    src/version.c

Patch 8.1.0107
Problem:    <A HREF="if_pyth.html#Python">Python</A>: getting buffer option clears message. (Jacob Niehus)
Solution:   Don't use aucmd_prepbuf(). (closes #3079)
Files:	    src/option.c

Patch 8.1.0108
Problem:    No Danish translations.
Solution:   Add Danish message translations. (closes #3073)  Move <A HREF="eval.html#list">list</A> of
            languages to a common makefile.
Files:	    src/po/Makefile, src/po/Make_cyg.mak, src/po/Make_mvc.mak,
            src/po/Make_ming.mak, src/po/Make_all.mak, src/po/da.po

Patch 8.1.0109
Problem:    New po makefile missing from <A HREF="intro.html#distribution">distribution</A>.
Solution:   Add <A HREF="motion.html#it">it</A> to the file <A HREF="eval.html#list">list</A>.
Files:	    Filelist

Patch 8.1.0110
Problem:    File name not displayed with &quot;<A HREF="editing.html#:file">:file</A>&quot; when '<A HREF="motion.html#F">F</A>' is in <A HREF="options.html#'shortmess'">'shortmess'</A>.
Solution:   Always display the file name when there is no argument (Christian
            Brabandt, closes #3070)
Files:	    src/ex_cmds.c, src/testdir/test_options.vim

Patch 8.1.0111
Problem:    .po files <A HREF="diff.html#do">do</A> not use recommended names.
Solution:   Give a warning if the recommended name is not used.  Accept the
            recommended name for conversion. (Christian Brabandt, Ken Takata)
Files:	    src/po/Makefile, src/po/sjiscorr.c, src/po/check.vim

Patch 8.1.0112
Problem:    No error when using bad arguments with <A HREF="builtin.html#searchpair()">searchpair()</A>.
Solution:   Add error <A HREF="message.html#messages">messages</A>.
Files:	    src/evalfunc.c, src/testdir/test_search.vim

Patch 8.1.0113
Problem:    Compiler warning for unused variable. (Yegappan Lakshmanan)
Solution:   Add UNUSED. (Christian Brabandt)
Files:	    src/screen.c

Patch 8.1.0114
Problem:    Confusing variable name.
Solution:   Rename new_ts to new_vts_array.  Change zero to NULL.
Files:	    src/ex_cmds.c, src/option.c

Patch 8.1.0115
Problem:    The <A HREF="pi_paren.html#matchparen">matchparen</A> <A HREF="usr_05.html#plugin">plugin</A> may throw an error.
Solution:   Change the skip argument from zero to &quot;<A HREF="motion.html#0">0</A>&quot;.
Files:	    runtime/plugin/matchparen.vim

Patch 8.1.0116
Problem:    Display problem with <A HREF="options.html#'vartabstop'">'vartabstop'</A> and <A HREF="options.html#'linebreak'">'linebreak'</A>. (Chauca
            Fuentes)
Solution:   Call tabstop_padding(). (Christian Brabandt, closes #3076)
Files:	    src/screen.c, src/testdir/test_vartabs.vim

Patch 8.1.0117
Problem:    URL in <A HREF="usr_90.html#install">install</A> program still points to SourceForge.
Solution:   Change <A HREF="motion.html#it">it</A> to www.vim.org. (closes #3100)
Files:	    src/dosinst.c

Patch 8.1.0118
Problem:    Duplicate error message for put command.
Solution:   Check return value of u_save(). (Jason Franklin)
Files:	    src/ops.c, src/testdir/test_messages.vim src/testdir/test_put.vim

Patch 8.1.0119
Problem:    Failing test goes unnoticed because testdir/messages is not
            written.
Solution:   Set <A HREF="options.html#'nomodifiable'">'nomodifiable'</A> only local to the buffer.
Files:	    src/testdir/test_put.vim

Patch 8.1.0120
Problem:    Buffer <A HREF="options.html#'modified'">'modified'</A> set even when <A HREF="change.html#:sort">:sort</A> has no changes.
Solution:   Only set <A HREF="options.html#'modified'">'modified'</A> when lines are moved. (Jason Franklin)
Files:	    src/ex_cmds.c, src/testdir/test_sort.vim

Patch 8.1.0121
Problem:    Crash when using ballooneval related to <A HREF="options.html#'vartabstop'">'vartabstop'</A>.
Solution:   Initialize balloonEval-&gt;vts to NULL. (Markus Braun)
Files:	    src/ex_cmds2.c, src/gui_beval.c, src/gui_w32.c, src/gui.c

Patch 8.1.0122
Problem:    Translators don't always understand the maintainer message.
Solution:   Add a comment that ends up in the generated po file. (Christian
            Brabandt, closes #3037)
Files:	    src/message.c

Patch 8.1.0123
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: colors are wrong after setting 'notgc'.
Solution:   Only call control_console_color_rgb() for the <A HREF="os_win32.html#win32">win32</A> <A HREF="terminal.html#terminal">terminal</A>.
            (Nobuhiro Takasaki, closes #3107)
Files:	    src/option.c

Patch 8.1.0124
Problem:    has('vcon') returns <A HREF="vim9.html#true">true</A> even for non-win32 <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Check the <A HREF="terminal.html#terminal">terminal</A> type. (Nobuhiro Takasaki, closes #3106)
Files:	    src/evalfunc.c

Patch 8.1.0125
Problem:    Virtual edit replace with <A HREF="mbyte.html#multibyte">multibyte</A> fails at end of line. (Lukas
            Werling)
Solution:   use ins_char() to add the character. (Christian Brabandt,
            closes #3114)  Rename PCHAR() to PBYTE() to avoid mistakes like
            this.
Files:	    src/ops.c, src/testdir/test_virtualedit.vim, src/macros.h

Patch 8.1.0126
Problem:    Various problems with <A HREF="options.html#'vartabstop'">'vartabstop'</A>.
Solution:   Fix memory leak.  Fix crash. Add a few more tests. (Christian
            Brabandt, closes #3076)
Files:	    src/ex_cmds.c, src/option.c, src/screen.c,
            src/testdir/test_vartabs.vim

Patch 8.1.0127
Problem:    Build failure when disabling the session feature. (Pawel Slowik)
Solution:   Adjust #ifdef for vim_chdirfile().
Files:	    src/misc2.c

Patch 8.1.0128
Problem:    Building with MinGW does not work out-of-the-box.
Solution:   Add instructions for MSYS2.  Set default WINVER.  Add batch files
            to set $PATH for MSYS2.
Files:	    src/Make_cyg_ming.mak, src/INSTALLpc.txt, src/msys32.bat,
            src/msys64.bat, Filelist

Patch 8.1.0129
Problem:    Still some xterm-like terminals get a stray &quot;<A HREF="change.html#p">p</A>&quot; on <A HREF="starting.html#startup">startup</A>.
Solution:   Consider all terminals that reply with a version smaller than 95
            <A HREF="motion.html#as">as</A> not an xterm. (James McCoy)
Files:	    src/term.c

Patch 8.1.0130
Problem:    &quot;<A HREF="repeat.html#:profdel">:profdel</A> func&quot; does not work if func was called already.
            (Dominique Pelle)
Solution:   Reset uf_profiling and add a flag to indicate <A HREF="starting.html#initialization">initialization</A> was
            done.
Files:	    src/structs.h, src/userfunc.c

Patch 8.1.0131
Problem:    <A HREF="repeat.html#:profdel">:profdel</A> is not tested.
Solution:   Add a test. (Dominique Pelle, closes #3123)
Files:	    src/testdir/test_profile.vim

Patch 8.1.0132
Problem:    <A HREF="if_lua.html#Lua">Lua</A> tests are old style.
Solution:   Convert to new style tests.  Improve coverage. (Dominique Pelle,
            closes #3091)
Files:	    src/Makefile, src/testdir/Make_all.mak,
            src/testdir/Make_amiga.mak, src/testdir/Make_vms.mms,
            src/testdir/test85.in, src/testdir/test_lua.vim

Patch 8.1.0133
Problem:    <A HREF="builtin.html#tagfiles()">tagfiles()</A> can have duplicate entries.
Solution:   Simplify the filename to make checking for duplicates work better.
            Add a test. (Dominique Pelle, closes #2979)
Files:	    src/tag.c, src/testdir/test_taglist.vim

Patch 8.1.0134
Problem:    <A HREF="if_lua.html#Lua">Lua</A> interface does not support funcref.
Solution:   Add funcref support. (Luis Carvalho)
Files:	    src/if_lua.c, src/testdir/test_lua.vim

Patch 8.1.0135
Problem:    Undo message delays screen update for <A HREF="motion.html#CTRL-O">CTRL-O</A> <A HREF="undo.html#u">u</A>.
Solution:   Add smsg_attr_keep(). (closes #3125)
Files:	    src/message.c, src/proto.h, src/undo.c

Patch 8.1.0136
Problem:    <A HREF="if_lua.html#Lua">Lua</A> tests don't cover new features.
Solution:   Add more tests. (Dominique Pelle, closes #3130)
Files:	    runtime/doc/if_lua.txt, src/testdir/test_lua.vim

Patch 8.1.0137
Problem:    CI does not run with <A HREF="if_tcl.html#TCL">TCL</A>.
Solution:   Add <A HREF="if_tcl.html#TCL">TCL</A> to the travis config. (Dominique Pelle, closes #3133)
Files:	    .travis.yml

Patch 8.1.0138
Problem:    Negative value of <A HREF="options.html#'softtabstop'">'softtabstop'</A> not used correctly.
Solution:   Use get_sts_value(). (Tom Ryder)
Files:	    src/edit.c, src/option.c, src/Makefile, src/testdir/test_tab.vim

Patch 8.1.0139
Problem:    <A HREF="if_lua.html#Lua">Lua</A> tests fail on some platforms.
Solution:   Accept a hex number with and without &quot;<A HREF="eval.html#0x">0x</A>&quot;. (Ken Takata,
            closes #3137)
Files:	    src/testdir/test_lua.vim

Patch 8.1.0140
Problem:    Recording into a <A HREF="sponsor.html#register">register</A> has focus events. (Michael Naumann)
Solution:   Don't record K_FOCUSGAINED and K_FOCUSLOST. (closes #3143)
Files:	    src/getchar.c

Patch 8.1.0141
Problem:    <A HREF="quickfix.html#:cexpr">:cexpr</A> no longer jumps to the first error.
Solution:   Use the <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A> identifier. (Yegappan Lakshmanan,
            closes #3092)
Files:	    src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.0142
Problem:    Xterm and vt320 builtin <A HREF="term.html#termcap">termcap</A> missing keypad keys.
Solution:   Add the <A HREF="intro.html#escape">escape</A> sequences. (Kouichi Iwamoto, closes #2973)
Files:	    src/term.c

Patch 8.1.0143
Problem:    Matchit and <A HREF="pi_paren.html#matchparen">matchparen</A> don't handle <A HREF="options.html#E363">E363</A>.
Solution:   Catch the <A HREF="options.html#E363">E363</A> error. (Christian Brabandt)
Files:	    runtime/pack/dist/opt/matchit/plugin/matchit.vim,
            runtime/plugin/matchparen.vim

Patch 8.1.0144
Problem:    The <A HREF="editing.html#:cd">:cd</A> command does not have good test coverage.
Solution:   Add more tests. (Dominique Pelle, closes #2972)
Files:	    src/testdir/test_cd.vim

Patch 8.1.0145
Problem:    Test with <A HREF="quickfix.html#grep">grep</A> is failing on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Skip the test.
Files:	    src/testdir/test_quickfix.vim

Patch 8.1.0146
Problem:    When $LANG is set the compiler test may fail.
Solution:   Unset $LANG.
Files:	    src/testdir/test_compiler.vim

Patch 8.1.0147
Problem:    Compiler warning when building with <A HREF="if_pyth.html#Python">Python</A> 3.7.
Solution:   #undef PySlice_GetIndicesEx before redefining <A HREF="motion.html#it">it</A>. (Ozaki Kiichi,
            closes #3153)
Files:	    src/if_python3.c

Patch 8.1.0148
Problem:    Memory leak when using <A HREF="if_tcl.html#:tcl">:tcl</A> <A HREF="eval.html#expr">expr</A> command.
Solution:   Free the result of <A HREF="eval.html#expression">expression</A> evaluation. (Dominique Pelle,
            closes #3150)
Files:	    src/if_tcl.c

Patch 8.1.0149
Problem:    The generated sessions file does not restore tabs properly if <A HREF="editing.html#:lcd">:lcd</A>
            was used in one of them.
Solution:   Create the <A HREF="intro.html#tab">tab</A> pages before setting the directory. (Yee Cheng
            Chin, closes #3152)
Files:	    src/ex_docmd.c, src/testdir/test_mksession.vim

Patch 8.1.0150
Problem:    Insufficient test coverage for <A HREF="if_tcl.html#Tcl">Tcl</A>.
Solution:   Add more tests. (Dominique Pelle, closes #3140)
Files:	    src/testdir/test_tcl.vim

Patch 8.1.0151
Problem:    Mksession test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Always use an argument for <A HREF="editing.html#:lcd">:lcd</A>.
Files:	    src/testdir/test_mksession.vim

Patch 8.1.0152
Problem:    Cannot easily run individual tests on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Move the <A HREF="eval.html#list">list</A> of tests to a separate file.  Add a build rule in
            the MSVC makefile.
Files:	    Filelist, src/Makefile, src/Make_all.mak, src/Make_mvc.mak

Patch 8.1.0153 (after 8.1.0152)
Problem:    Build with SHADOWDIR fails. (Elimar Riesebieter)
Solution:   Create a link for Make_all.mak. (Tony Mechelynck)
Files:	    src/Makefile

Patch 8.1.0154
Problem:    Crash with &quot;set smarttab shiftwidth=0 softtabstop=-1&quot;.
Solution:   Fall back to using <A HREF="options.html#'tabstop'">'tabstop'</A>. (closes #3155)
Files:	    src/edit.c, src/testdir/test_tab.vim

Patch 8.1.0155
Problem:    Evim.man missing from the <A HREF="intro.html#distribution">distribution</A>.
Solution:   Add <A HREF="motion.html#it">it</A> to the <A HREF="eval.html#list">list</A>.
Files:	    Filelist

Patch 8.1.0156
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> compiler warning.
Solution:   Add a type cast. (Mike Williams)
Files:	    src/version.c

Patch 8.1.0157
Problem:    Old iTerm2 is not recognized, resulting in stray output.
Solution:   Recognize the termresponse.
Files:	    src/term.c

Patch 8.1.0158
Problem:    <A HREF="gui.html#GUI">GUI</A>: <A HREF="builtin.html#input()">input()</A> fails if <A HREF="pattern.html#CTRL-C">CTRL-C</A> was pressed before. (Michael Naumann)
Solution:   call vpeekc() to drop the <A HREF="pattern.html#CTRL-C">CTRL-C</A> from the input stream.
Files:	    src/ex_docmd.c

Patch 8.1.0159
Problem:    Completion for user names does not work if a prefix is also a full
            matching name. (Nazri Ramliy)
Solution:   Accept both full and <A HREF="builtin.html#partial">partial</A> matches. (Dominique Pelle)
Files:	    src/misc1.c, src/ex_docmd.c

Patch 8.1.0160
Problem:    No Danish manual translations.
Solution:   Add the Danish manual translations to the file <A HREF="eval.html#list">list</A>.
Files:	    Filelist

Patch 8.1.0161
Problem:    Buffer not updated with <A HREF="options.html#'autoread'">'autoread'</A> set if file was deleted.
            (Michael Naumann)
Solution:   Don't set the <A HREF="editing.html#timestamp">timestamp</A> to zero. (closes #3165)
Files:	    src/fileio.c, src/testdir/test_stat.vim

Patch 8.1.0162
Problem:    Danish and German man pages are not installed. (Tony Mechelynck)
Solution:   Adjust the makefile
Files:	    src/Makefile

Patch 8.1.0163
Problem:    Insufficient <A HREF="testing.html#testing">testing</A> for <A HREF="if_tcl.html#Tcl">Tcl</A>.
Solution:   Add a few more tests. (Dominique Pelle, closes #3166)
Files:	    src/testdir/test_tcl.vim

Patch 8.1.0164
Problem:    luaeval('vim.buffer().name') returns an error.
Solution:   Return an empty <A HREF="eval.html#string">string</A>. (Dominique Pelle, closes #3167)
Files:	    src/if_lua.c, src/testdir/test_lua.vim

Patch 8.1.0165
Problem:    <A HREF="quickfix.html#:clist">:clist</A> output can be very long.
Solution:   Support filtering <A HREF="quickfix.html#:clist">:clist</A> entries. (Yegappan Lakshmanan)
Files:	    src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.0166
Problem:    Using dict_add_nr_str() is clumsy.
Solution:   Split into two <A HREF="eval.html#functions">functions</A>. (Ozaki Kiichi, closes #3154)
Files:	    src/channel.c, src/dict.c, src/edit.c, src/evalfunc.c,
            src/ex_cmds2.c, src/ops.c, src/option.c, src/proto/dict.pro,
            src/quickfix.c, src/tag.c, src/terminal.c, src/undo.c

Patch 8.1.0167
Problem:    Lock flag in new dictitem is reset in many places.
Solution:   Always reset the lock flag.
Files:	    src/dict.c, src/channel.c, src/ex_cmds2.c, src/userfunc.c,
            src/if_perl.xs, src/if_py_both.h

Patch 8.1.0168
Problem:    Output of <A HREF="motion.html#:marks">:marks</A> is too short with <A HREF="mbyte.html#multibyte">multibyte</A> chars. (Tony
            Mechelynck)
Solution:   Get more bytes from the text line.
Files:	    src/mark.c, src/testdir/test_marks.vim

Patch 8.1.0169 (after 8.1.0165)
Problem:    Calling message_filtered() a bit too often.
Solution:   Only call message_filtered() when filtering is already <A HREF="vim9.html#false">false</A>.
Files:	    src/quickfix.c, runtime/doc/quickfix.txt

Patch 8.1.0170
Problem:    Invalid memory use with complicated <A HREF="pattern.html#pattern">pattern</A>. (Andy Massimino)
Solution:   Reallocate the <A HREF="eval.html#list">list</A> of listids when needed. (closes #3175)
            Remove unnecessary function prototypes.
Files:	    src/regexp_nfa.c

Patch 8.1.0171
Problem:    Typing <A HREF="index.html#CTRL-W">CTRL-W</A> <A HREF="pattern.html#n">n</A> in a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> causes ml_get error.
Solution:   When resizing the <A HREF="terminal.html#terminal">terminal</A> outside of terminal_loop() make sure
            the snapshot is complete.
Files:	    src/terminal.c, src/testdir/test_terminal.vim

Patch 8.1.0172
Problem:    <A HREF="options.html#'viminfofile'">'viminfofile'</A> option does not behave like a file name.
Solution:   Add the P_EXPAND flag. (closes #3178)
Files:	    src/option.c

Patch 8.1.0173
Problem:    Compiler warning on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Add type cast. (Mike Williams)
Files:	    src/libvterm/src/state.c

Patch 8.1.0174
Problem:    After paging up and down fold line is wrong.
Solution:   Correct the computation of w_topline and w_botline. (Hirohito
            Higashi)
Files:	    src/move.c, src/testdir/test_fold.vim

Patch 8.1.0175
Problem:    Marks test fails in very wide <A HREF="windows.html#window">window</A>. (Vladimir Lomov)
Solution:   Extend the text to match <A HREF="options.html#'columns'">'columns'</A>. (closes #3180, closes #3181)
Files:	    src/testdir/test_marks.vim

Patch 8.1.0176
Problem:    Overlapping <A HREF="eval.html#string">string</A> argument for strcpy(). (Coverity)
Solution:   Use STRMOVE() instead of STRCPY(). (Dominique Pelle, closes #3187)
Files:	    src/term.c

Patch 8.1.0177
Problem:    Defining function in <A HREF="eval.html#sandbox">sandbox</A> is inconsistent, cannot use <A HREF="eval.html#:function">:function</A>
            but can define a <A HREF="eval.html#lambda">lambda</A>.
Solution:   Allow defining a function in the <A HREF="eval.html#sandbox">sandbox</A>, but also use the <A HREF="eval.html#sandbox">sandbox</A>
            when executing <A HREF="motion.html#it">it</A>. (closes #3182)
Files:	    src/userfunc.c, src/ex_cmds.h

Patch 8.1.0178
Problem:    Warning for passing pointer to non-pointer argument.
Solution:   Use zero instead of NULL.
Files:	    src/if_ole.cpp

Patch 8.1.0179
Problem:    Redundant condition for boundary check.
Solution:   Remove the condition. (Dominique Pelle). Change <A HREF="eval.html#FALSE">FALSE</A> to FAIL.
Files:	    src/undo.c

Patch 8.1.0180
Problem:    Static analysis <A HREF="message.html#errors">errors</A> in <A HREF="if_lua.html#Lua">Lua</A> interface. (Coverity)
Solution:   Check for NULL pointers.
Files:	    src/if_lua.c

Patch 8.1.0181
Problem:    Memory leak with trailing characters in skip <A HREF="eval.html#expression">expression</A>.
Solution:   Free the return value.
Files:	    src/eval.c, src/testdir/test_search.vim

Patch 8.1.0182
Problem:    <A HREF="mbyte.html#Unicode">Unicode</A> standard was updated.
Solution:   Include the changes. (Christian Brabandt)
Files:	    src/mbyte.c

Patch 8.1.0183
Problem:    <A HREF="if_lua.html#Lua">Lua</A> API changed, breaking the build.
Solution:   Adjust prototype of lua_rawgeti(). (Ken Takata,
            closes #3157, closes #3144)
Files:	    src/if_lua.c

Patch 8.1.0184
Problem:    Not <A HREF="starting.html#easy">easy</A> to figure out the <A HREF="windows.html#window">window</A> layout.
Solution:   Add &quot;wincol&quot; and &quot;winrow&quot; to what <A HREF="builtin.html#getwininfo()">getwininfo()</A> returns.
Files:	    src/evalfunc.c, src/testdir/test_bufwintabinfo.vim,
            runtime/doc/eval.txt

Patch 8.1.0185
Problem:    Running tests writes <A HREF="syntax.html#lua.vim">lua.vim</A> even though <A HREF="motion.html#it">it</A> is not used.
Solution:   Stop <A HREF="editing.html#writing">writing</A> <A HREF="syntax.html#lua.vim">lua.vim</A>.
Files:	    src/testdir/test1.in, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_vms.mms,
            src/testdir/Makefile

Patch 8.1.0186
Problem:    Test for <A HREF="builtin.html#getwininfo()">getwininfo()</A> fails in <A HREF="gui.html#GUI">GUI</A>.
Solution:   Account for missing tabline.
Files:	    src/testdir/test_bufwintabinfo.vim

Patch 8.1.0187 (after 8.1.0184)
Problem:    <A HREF="builtin.html#getwininfo()">getwininfo()</A> and <A HREF="builtin.html#win_screenpos()">win_screenpos()</A> return different numbers.
Solution:   Add one to &quot;wincol&quot; and &quot;winrow&quot; from <A HREF="builtin.html#getwininfo()">getwininfo()</A>.
Files:	    src/evalfunc.c, src/testdir/test_bufwintabinfo.vim,
            runtime/doc/eval.txt

Patch 8.1.0188
Problem:    No test for &quot;<A HREF="if_cscop.html#:cscope">:cscope</A> add&quot;.
Solution:   Add a test. (Dominique Pelle, closes #3212)
Files:	    src/testdir/test_cscope.vim

Patch 8.1.0189
Problem:    Function defined in <A HREF="eval.html#sandbox">sandbox</A> not tested.
Solution:   Add a text.
Files:	    src/testdir/test_functions.vim

Patch 8.1.0190
Problem:    <A HREF="if_perl.html#Perl">Perl</A> refcounts are wrong.
Solution:   Improve refcounting.  Add a test. (Damien)
Files:	    src/if_perl.xs, src/testdir/test_perl.vim

Patch 8.1.0191 (after 8.1.0190)
Problem:    <A HREF="if_perl.html#Perl">Perl</A> test fails in 24 line <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Create fewer <A HREF="windows.html#windows">windows</A>.
Files:	    src/testdir/test_perl.vim

Patch 8.1.0192
Problem:    Executing <A HREF="pattern.html#regexp">regexp</A> recursively fails with a crash.
Solution:   Move global <A HREF="eval.html#variables">variables</A> into &quot;rex&quot;.
Files:	    src/regexp.c, src/regexp.h, src/regexp_nfa.c

Patch 8.1.0193
Problem:    Terminal debugger buttons don't always work. (Dominique Pelle)
Solution:   Set <A HREF="options.html#'cpo'">'cpo'</A> to its default value.
Files:	    runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.0194
Problem:    Possibly use of NULL pointer. (Coverity)
Solution:   Reset the re_in_use flag earlier.
Files:	    src/regexp.c

Patch 8.1.0195
Problem:    Terminal debugger commands don't always work. (Dominique Pelle)
Solution:   Set <A HREF="options.html#'cpo'">'cpo'</A> to its default value when defining commands. (Christian
            Brabandt)
Files:	    runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.0196
Problem:    Terminal debugger error with .gdbinit file.
Solution:   Check two lines for the &quot;new ui&quot; response. (hint from Hirohito
            Higashi)
Files:	    runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.0197
Problem:    Windows <A HREF="gui.html#GUI">GUI</A>: title for search/replace is wrong.
Solution:   Remove remark about doubling <A HREF="intro.html#backslash">backslash</A>. (closes #3230)
Files:	    src/gui_win32.c

Patch 8.1.0198
Problem:    There is no hint that <A HREF="syntax.html#syntax">syntax</A> is disabled for <A HREF="options.html#'redrawtime'">'redrawtime'</A>.
Solution:   Add a message.
Files:	    src/syntax.c

Patch 8.1.0199
Problem:    <A HREF="builtin.html#spellbadword()">spellbadword()</A> does not check for caps error. (Dominique Pelle)
Solution:   Adjust capcol when advancing.
Files:	    src/userfunc.c

Patch 8.1.0200
Problem:    <A HREF="builtin.html#spellbadword()">spellbadword()</A> not tested.
Solution:   Add a test. (Dominique Pelle, closes #3235)
Files:	    src/testdir/test_spell.vim

Patch 8.1.0201
Problem:    Newer <A HREF="if_pyth.html#Python">Python</A> uses &quot;importlib&quot; instead of &quot;imp&quot;.
Solution:   Use &quot;importlib&quot; for newer <A HREF="if_pyth.html#Python">Python</A> versions. (Ozaki Kiichi,
            closes #3163)
Files:	    src/if_py_both.h, src/testdir/test87.in

Patch 8.1.0202
Problem:    <A HREF="various.html#:version">:version</A> always shows <A HREF="various.html#+packages">+packages</A>. (Takuya Fujiwara)
Solution:   Add #ifdef (closes #3198) Also for <A HREF="builtin.html#has()">has()</A>.
Files:	    src/version.c, src/evalfunc.c

Patch 8.1.0203
Problem:    Building with <A HREF="if_perl.html#Perl">Perl</A> 5.28 fails on Windows.
Solution:   Define Perl_mg_get. (closes #3196)
Files:	    src/if_perl.xs

Patch 8.1.0204
Problem:    <A HREF="builtin.html#inputlist()">inputlist()</A> is not tested.
Solution:   Add a test. (Dominique Pelle, closes #3240)
Files:	    src/testdir/test_functions.vim

Patch 8.1.0205
Problem:    Invalid memory access with invalid <A HREF="options.html#modeline">modeline</A>.
Solution:   Pass pointer limit. Add a test. (closes #3241)
Files:	    src/Make_all.mak, src/testdir/test_alot.vim,
            src/testdir/test_modeline.vim, src/option.c

Patch 8.1.0206 (after 8.1.0205)
Problem:    Duplicate test function name.
Solution:   Rename both <A HREF="eval.html#functions">functions</A>.
Files:	    src/testdir/test_modeline.vim, src/testdir/test_glob2regpat.vim

Patch 8.1.0207
Problem:    Need many menu translation files to cover regions.
Solution:   When there is no region match, try without. (Christian Brabandt)
Files:	    runtime/menu.vim

Patch 8.1.0208 (after 8.1.0205)
Problem:    File left behind after running individual test.
Solution:   Delete the file.
Files:	    src/testdir/test_modeline.vim

Patch 8.1.0209
Problem:    Stderr output from <A HREF="if_ruby.html#Ruby">Ruby</A> messes up display.
Solution:   Turn the stderr output into a Vim message. (Masataka Pocke
            Kuwabara, closes #3238)
Files:	    src/if_ruby.c

Patch 8.1.0210
Problem:    Still a few K&amp;R function declarations.
Solution:   Use ANSI function declarations (Hirohito Higashi)
Files:	    src/eval.c, src/evalfunc.c, src/list.c

Patch 8.1.0211
Problem:    Expanding a file name &quot;<A HREF="change.html#~">~</A>&quot; results in <A HREF="options.html#$HOME">$HOME</A>. (Aidan Shafran)
Solution:   Change &quot;<A HREF="change.html#~">~</A>&quot; to &quot;./~&quot; before expanding. (closes #3072)
Files:	    src/testdir/test_expand.vim, src/ex_docmd.c, src/eval.c,
            src/proto/eval.pro, src/evalfunc.c, src/if_cscope.c, src/misc1.c

Patch 8.1.0212
Problem:    Preferred cursor column not set in interfaces.
Solution:   Set w_set_curswant when setting the cursor. (David Hotham,
            closes #3060)
Files:	    src/if_lua.c, src/if_mzsch.c, src/if_perl.xs, src/if_py_both.h,
            src/if_ruby.c, src/if_tcl.c, src/testdir/test_lua.vim,
            src/testdir/test_perl.vim, src/testdir/test_python2.vim,
            src/testdir/test_python3.vim, src/testdir/test_ruby.vim,
            src/testdir/test_tcl.vim

Patch 8.1.0213
Problem:    <A HREF="index.html#CTRL-W">CTRL-W</A> CR does not work properly in a <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="windows.html#window">window</A>.
Solution:   Split the <A HREF="windows.html#window">window</A> if needed. (Jason Franklin)
Files:	    src/normal.c, src/proto/quickfix.pro, src/quickfix.c,
            src/testdir/test_quickfix.vim, src/window.c

Patch 8.1.0214
Problem:    <A HREF="various.html#+autochdir">+autochdir</A> feature not reported by <A HREF="builtin.html#has()">has()</A> or <A HREF="various.html#:version">:version</A>.
Solution:   Add the feature in the <A HREF="eval.html#list">list</A>.
Files:	    src/evalfunc.c, src/version.c

Patch 8.1.0215
Problem:    No error if configure --with-x cannot configure X.
Solution:   Check that when --with-x is used X can be configured.
Files:	    src/configure.ac, src/auto/configure

Patch 8.1.0216
Problem:    Part of file not indented properly.
Solution:   Adjust the indent. (Ken Takata)
Files:	    src/getchar.c

Patch 8.1.0217
Problem:    Compiler warning for variable set but not used.
Solution:   Move tilde_file inside #ifdef. (Hirohito Higashi, closes #3255)
Files:	    src/ex_docmd.c

Patch 8.1.0218
Problem:    Cannot add matches to another <A HREF="windows.html#window">window</A>. (Qiming Zhao)
Solution:   Add the &quot;<A HREF="windows.html#window">window</A>&quot; argument to <A HREF="builtin.html#matchadd()">matchadd()</A> and <A HREF="builtin.html#matchaddpos()">matchaddpos()</A>.
            (closes #3260)
Files:	    src/evalfunc.c, runtime/doc/eval.txt, src/testdir/test_match.vim

Patch 8.1.0219
Problem:    Expanding ## fails to <A HREF="intro.html#escape">escape</A> backtick.
Solution:   Escape a backtick in a file name. (closes #3257)
Files:	    src/ex_docmd.c, src/testdir/test_edit.vim

Patch 8.1.0220
Problem:    <A HREF="if_ruby.html#Ruby">Ruby</A> converts <A HREF="eval.html#v:true">v:true</A> and <A HREF="eval.html#v:false">v:false</A> to a number.
Solution:   Use Qtrue and Qfalse instead. (Masataka Pocke Kuwabara,
            closes #3259)
Files:	    src/if_ruby.c, src/testdir/test_ruby.vim

Patch 8.1.0221
Problem:    Not enough <A HREF="testing.html#testing">testing</A> for the <A HREF="if_ruby.html#Ruby">Ruby</A> interface.
Solution:   Add more tests. (Dominique Pelle, closes #3252)
Files:	    runtime/doc/if_ruby.txt, src/testdir/test_ruby.vim

Patch 8.1.0222
Problem:    Errors are reported for &quot;make install&quot;.
Solution:   Skip missing language files. (Christian Brabandt, closes #3254)
Files:	    src/installman.sh

Patch 8.1.0223
Problem:    Completing shell command finds sub-directories in $PATH.
Solution:   Remove EW_DIR when completing an item in $PATH. (Jason Franklin)
Files:	    src/ex_getln.c, src/testdir/test_cmdline.vim

Patch 8.1.0224
Problem:    Hang in bracketed paste mode when <A HREF="term.html#t_PE">t_PE</A> not encountered.
Solution:   Break out of the loop when got_int is set. (suggested by Christian
            Brabandt, closes #3146)
Files:	    src/edit.c

Patch 8.1.0225
Problem:    Mode() does not indicate using <A HREF="motion.html#CTRL-O">CTRL-O</A> from <A HREF="insert.html#Insert">Insert</A> mode.
Solution:   Add &quot;niI&quot;, &quot;niR&quot; and &quot;niV&quot; to <A HREF="builtin.html#mode()">mode()</A> result. (closes #3000)
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_functions.vim

Patch 8.1.0226
Problem:    Too many #ifdefs.
Solution:   Graduate the <A HREF="various.html#+vreplace">+vreplace</A> feature, it's not much code and quite a few
            #ifdefs.
Files:	    runtime/doc/change.txt, runtime/doc/various.txt, src/edit.c,
            src/evalfunc.c, src/gui.c, src/misc1.c, src/misc2.c, src/normal.c,
            src/ops.c, src/screen.c, src/version.c, src/feature.h,
            src/globals.h, src/macros.h, src/vim.h

Patch 8.1.0227
Problem:    Spaces instead of tabs in makefile.
Solution:   Use tabs and fix <A HREF="change.html#sorting">sorting</A>. (Ken Takata)
Files:	    src/po/Make_all.mak

Patch 8.1.0228
Problem:    Dropping files is ignored while Vim is busy.
Solution:   Postpone the effect of dropping files until it's safe.
Files:	    src/ex_docmd.c, src/proto/ex_docmd.pro, src/gui.c, src/gui.h,
            src/screen.c, src/main.c, src/gui_mac.c

Patch 8.1.0229
Problem:    Crash when dumping <A HREF="repeat.html#profiling">profiling</A> data.
Solution:   Reset flag indicating that <A HREF="starting.html#initialization">initialization</A> was done.
Files:	    src/userfunc.c

Patch 8.1.0230
Problem:    Directly checking <A HREF="options.html#'buftype'">'buftype'</A> value.
Solution:   Add the bt_normal() function. (Yegappan Lakshmanan)
Files:	    src/buffer.c, src/ex_docmd.c, src/fileio.c, src/proto/buffer.pro,
            src/quickfix.c

Patch 8.1.0231
Problem:    <A HREF="helphelp.html#:help">:help</A> <A HREF="starting.html#-?">-?</A> goes to help for <A HREF="starting.html#-+">-+</A>.
Solution:   Add <A HREF="starting.html#-?">-?</A> to <A HREF="eval.html#list">list</A> of special cases. (Hirohito Higashi)
Files:	    src/ex_cmds.c, src/testdir/test_help_tagjump.vim

Patch 8.1.0232
Problem:    <A HREF="if_ruby.html#Ruby">Ruby</A> error does not include backtrace.
Solution:   Add an error backtrace. (Masataka Pocke Kuwabara, closes #3267)
Files:	    src/if_ruby.c

Patch 8.1.0233
Problem:    &quot;safe&quot; argument of call_vim_function() is always <A HREF="eval.html#FALSE">FALSE</A>.
Solution:   Remove the argument.
Files:	    src/eval.c, src/proto/eval.pro, src/edit.c, src/mbyte.c,
            src/normal.c, src/ex_getln.c

Patch 8.1.0234
Problem:    Incorrect reference counting in <A HREF="if_perl.html#Perl">Perl</A> interface.
Solution:   Call SvREFCNT_inc more often, add a test. (Damien)
Files:	    src/if_perl.xs, src/testdir/test_perl.vim

Patch 8.1.0235 (after 8.1.0231)
Problem:    More help <A HREF="tagsrch.html#tags">tags</A> that jump to the wrong location.
Solution:   Add more exceptions and a table for &quot;expr-&quot; <A HREF="tagsrch.html#tags">tags</A>. (Hirohito
            Higashi)
Files:	    src/ex_cmds.c, src/testdir/test_help_tagjump.vim

Patch 8.1.0236 (after 8.1.0232)
Problem:    <A HREF="if_ruby.html#Ruby">Ruby</A> build fails when ruby_intern is missing.
Solution:   Do not use ruby_intern2. (Ken Takata)
Files:	    src/if_ruby.c

Patch 8.1.0237
Problem:    <A HREF="if_ruby.html#Ruby">Ruby</A> on Cygwin doesn't always work.
Solution:   Use LIBRUBY_SO if LIBRUBY_ALIASES isn't set. (Ken Takata)
Files:	    src/configure.ac, src/auto/configure

Patch 8.1.0238
Problem:    <A HREF="options.html#'buftype'">'buftype'</A> is cleared when using &quot;:term ++hidden cat&quot;. (Marcin
            Szamotulski)
Solution:   Set the &quot;<A HREF="options.html#options">options</A> initialized&quot; flag earlier. (closes #3278)
Files:	    src/terminal.c, src/testdir/test_terminal.vim

Patch 8.1.0239 (after 8.1.0236)
Problem:    Now <A HREF="if_ruby.html#Ruby">Ruby</A> build fails on other systems.
Solution:   Always define rb_intern. (Ken Takata, closes #3275)
Files:	    src/if_ruby.c

Patch 8.1.0240
Problem:    <A HREF="options.html#g:actual_curbuf">g:actual_curbuf</A> set in wrong scope. (Daniel Hahler)
Solution:   Prepend the &quot;<A HREF="eval.html#g:">g:</A>&quot; name space. (closes #3279)
Files:	    src/buffer.c

Patch 8.1.0241
Problem:    Effect of &quot;<A HREF="tabpage.html#:tabmove">:tabmove</A> N&quot; is not clear.
Solution:   Add a test that shows the behavior. (Christian Brabandt,
            closes #3288)
Files:	    src/testdir/test_tabpage.vim

Patch 8.1.0242
Problem:    <A HREF="insert.html#Insert">Insert</A> mode completion may use an invalid buffer pointer. (Akib
            Nizam)
Solution:   Check for ins_buf to be valid. (closes #3290)
Files:	    src/edit.c

Patch 8.1.0243
Problem:    Using :term ++close ++hidden closes a <A HREF="windows.html#window">window</A>. (Marcin Szamotulski)
Solution:   Don't close the <A HREF="windows.html#window">window</A> if only using <A HREF="motion.html#it">it</A> temporarily for unloading
            the <A HREF="terminal.html#terminal">terminal</A> buffer. (closes #3287)
Files:	    src/terminal.c, src/testdir/test_terminal.vim

Patch 8.1.0244
Problem:    No redraw when using a STOP signal on Vim and then a CONT signal.
Solution:   Catch the CONT signal and force a redraw. (closes #3285)
Files:	    src/os_unix.c, src/term.c, src/proto/term.pro

Patch 8.1.0245
Problem:    Calling <A HREF="builtin.html#setline()">setline()</A> in <A HREF="autocmd.html#TextChangedI">TextChangedI</A> autocmd breaks <A HREF="undo.html#undo">undo</A>. (Jason
            Felice)
Solution:   Don't save lines for <A HREF="undo.html#undo">undo</A> when already saved. (closes #3291)
Files:	    src/edit.c, src/testdir/test_autocmd.vim

Patch 8.1.0246 (after 8.1.0245)
Problem:    Build failure without the <A HREF="various.html#+eval">+eval</A> feature.
Solution:   Add #ifdef
Files:	    src/edit.c

Patch 8.1.0247
Problem:    <A HREF="if_pyth.html#Python">Python</A>: error message for failing import is incorrect.
Solution:   Adjust how modules are loaded. (Ozaki Kiichi, closes #3162)
Files:	    src/if_py_both.h, src/testdir/test86.ok, src/testdir/test87.ok

Patch 8.1.0248
Problem:    duplicated <A HREF="quickfix.html#quickfix">quickfix</A> code.
Solution:   Move the code to a function.
Files:	    src/quickfix.c

Patch 8.1.0249
Problem:    <A HREF="gui_x11.html#GTK">GTK</A>: when screen DPI changes Vim does not handle <A HREF="motion.html#it">it</A>.
Solution:   Handle the gtk-xft-dpi signal. (Roel van de Kraats,
            closes #2357)
Files:	    src/gui_gtk_x11.c

Patch 8.1.0250
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> using VTP: <A HREF="windows.html#windows">windows</A> size change incorrect.
Solution:   Call SetConsoleScreenBufferSize() first. (Nobuhiro Takasaki,
            closes #3164)
Files:	    src/os_win32.c

Patch 8.1.0251
Problem:    Using a full path is supported for <A HREF="options.html#'directory'">'directory'</A> but not for
            <A HREF="options.html#'backupdir'">'backupdir'</A>. (Mikolaj Machowski)
Solution:   Support <A HREF="options.html#'backupdir'">'backupdir'</A> <A HREF="motion.html#as">as</A> well. (Christian Brabandt, closes #179)
Files:	    runtime/doc/options.txt, src/fileio.c, src/memline.c,
            src/proto/memline.pro, src/testdir/test_alot.vim,
            src/testdir/test_backup.vim, src/Make_all.mak

Patch 8.1.0252
Problem:    <A HREF="quickfix.html#Quickfix">Quickfix</A> <A HREF="eval.html#functions">functions</A> are too long.
Solution:   Refactor. (Yegappan Lakshmanan, closes #2950)
Files:	    src/quickfix.c

Patch 8.1.0253
Problem:    Saving and restoring <A HREF="windows.html#window">window</A> title does not always work.
Solution:   Use the stack push and pop commands. (Kouichi Iwamoto,
            closes #3059)
Files:	    runtime/doc/term.txt, src/main.c, src/option.c, src/os_unix.c,
            src/proto/term.pro, src/term.c, src/term.h, src/vim.h,
            src/buffer.c, src/ex_docmd.c, src/option.c, src/os_amiga.c,
            src/os_mswin.c, src/os_win32.c

Patch 8.1.0254 (after 8.1.0253)
Problem:    Cannot build on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>; Unused <A HREF="map.html#macro">macro</A> HAVE_HANDLE_DROP.
Solution:   Adjust #ifdef. Delete the <A HREF="map.html#macro">macro</A>.
Files:	    src/main.c, src/vim.h

Patch 8.1.0255 (after 8.1.0251)
Problem:    Backup test fails when using shadow directory.
Solution:   Remove check for &quot;src&quot;.
Files:	    src/testdir/test_backup.vim

Patch 8.1.0256 (after 8.1.0245)
Problem:    Using <A HREF="builtin.html#setline()">setline()</A> in <A HREF="autocmd.html#TextChangedI">TextChangedI</A> splits <A HREF="undo.html#undo">undo</A>.
Solution:   Use another solution for <A HREF="undo.html#undo">undo</A> not working properly.
Files:	    src/edit.c, src/testdir/test_autocmd.vim

Patch 8.1.0257
Problem:    No test for <A HREF="builtin.html#pathshorten()">pathshorten()</A>.
Solution:   Add a test. (Dominique Pelle, closes #3295)
Files:	    src/testdir/test_functions.vim

Patch 8.1.0258
Problem:    Not enough <A HREF="testing.html#testing">testing</A> for the <A HREF="autocmd.html#CompleteDone">CompleteDone</A> event.
Solution:   Add a test. (closes #3297)
Files:	    src/testdir/test_ins_complete.vim

Patch 8.1.0259
Problem:    No test for fixed <A HREF="quickfix.html#quickfix">quickfix</A> issue.
Solution:   Add a test.  Clean up the code a bit. (Yegappan Lakshmanan)
Files:	    src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.0260
Problem:    No LGTM logo in README file.
Solution:   Add one. (Bas van Schaik, closes #3305)
Files:      README.md

Patch 8.1.0261
Problem:    Coverity complains about a negative array index.
Solution:   When qf_id2nr() cannot find the <A HREF="eval.html#list">list</A> then don't set qf_curlist.
Files:	    src/quickfix.c

Patch 8.1.0262
Problem:    Not enough <A HREF="testing.html#testing">testing</A> for <A HREF="builtin.html#getftype()">getftype()</A>.
Solution:   Add a test. (Dominique Pelle, closes #3300)
Files:	    src/evalfunc.c, src/testdir/test_stat.vim

Patch 8.1.0263
Problem:    <A HREF="eval.html#Channel">Channel</A> log doesn't show part of <A HREF="channel.html#channel">channel</A>.
Solution:   Add &quot;sock&quot;, &quot;out&quot;, &quot;err&quot; or &quot;in&quot;. (Ozaki Kiichi, closes #3303)
Files:	    src/channel.c

Patch 8.1.0264
Problem:    Backup tests fail when CWD is in /tmp.
Solution:   Make <A HREF="options.html#'backupskip'">'backupskip'</A> empty. (Christian Brabandt, closes #3301)
Files:	    src/testdir/test_backup.vim

Patch 8.1.0265
Problem:    The <A HREF="builtin.html#getcmdline()">getcmdline()</A> function is way too big.
Solution:   Factor out the incremental search highlighting.
Files:	    src/ex_getln.c

Patch 8.1.0266
Problem:    Parsing <A HREF="intro.html#Ex">Ex</A> address range is not a separate function.
Solution:   Refactor do_one_cmd() to separate address parsing.
Files:	    src/ex_docmd.c, src/proto/ex_docmd.pro

Patch 8.1.0267
Problem:    No good check if restoring <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A> worked.
Solution:   Let qf_restore_list() return OK/FAIL. (Yegappan Lakshmanan)
Files:	    src/quickfix.c

Patch 8.1.0268
Problem:    File type checking has too many #ifdef.
Solution:   Always define the S_IF macros. (Ken Takata, closes #3306)
Files:	    src/buffer.c, src/evalfunc.c, src/fileio.c, src/if_cscope.c,
            src/os_unix.c, src/os_unix.h, src/vim.h

Patch 8.1.0269
Problem:    <A HREF="if_ruby.html#Ruby">Ruby</A> Kernel.#p <A HREF="eval.html#method">method</A> always returns nil.
Solution:   Copy <A HREF="change.html#p">p</A> <A HREF="eval.html#method">method</A> implementation from <A HREF="if_ruby.html#Ruby">Ruby</A> code. (Masataka Pocke
            Kuwabara, closes #3315)
Files:	    src/if_ruby.c, src/testdir/test_ruby.vim

Patch 8.1.0270
Problem:    Checking for a <A HREF="intro.html#Tab">Tab</A> in a line could be faster.
Solution:   Use <A HREF="builtin.html#strchr()">strchr()</A> instead of <A HREF="builtin.html#strrchr()">strrchr()</A>. (closes #3312)
Files:	    src/ex_cmds.c

Patch 8.1.0271
Problem:    <A HREF="options.html#'incsearch'">'incsearch'</A> doesn't work for <A HREF="change.html#:s">:s</A>, <A HREF="repeat.html#:g">:g</A> or <A HREF="repeat.html#:v">:v</A>.
Solution:   Also use <A HREF="options.html#'incsearch'">'incsearch'</A> for other commands that use a <A HREF="pattern.html#pattern">pattern</A>.
Files:	    src/ex_getln.c, src/globals.h, src/screen.c,
            src/testdir/test_search.vim

Patch 8.1.0272
Problem:    Options test fails if temp var ends in slash. (Tom Briden)
Solution:   Check for optional slash. (closes #3308)
Files:	    src/testdir/test_options.vim

Patch 8.1.0273
Problem:    Invalid memory access when using <A HREF="options.html#'incsearch'">'incsearch'</A>.
Solution:   Reset &quot;patlen&quot; when using previous search <A HREF="pattern.html#pattern">pattern</A>.
Files:	    src/ex_getln.c

Patch 8.1.0274
Problem:    <A HREF="options.html#'incsearch'">'incsearch'</A> triggers on &quot;<A HREF="repeat.html#:source">:source</A>&quot;.
Solution:   Check for the whole command name.
Files:	    src/ex_getln.c, src/testdir/test_search.vim

Patch 8.1.0275
Problem:    <A HREF="options.html#'incsearch'">'incsearch'</A> with <A HREF="change.html#:s">:s</A> doesn't start at cursor line.
Solution:   Set cursor before parsing address. (closes #3318)
            Also accept a match at the start of the first line.
Files:	    src/ex_getln.c, src/testdir/test_search.vim

Patch 8.1.0276
Problem:    No test for <A HREF="options.html#'incsearch'">'incsearch'</A> highlighting with <A HREF="change.html#:s">:s</A>.
Solution:   Add a screendump test.
Files:	    src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_substitute_01.dump

Patch 8.1.0277
Problem:    <A HREF="options.html#'incsearch'">'incsearch'</A> highlighting wrong in a few cases.
Solution:   Fix using last search <A HREF="pattern.html#pattern">pattern</A>.  Restore highlighting when <A HREF="change.html#changing">changing</A>
            command. (issue #3321)
Files:	    src/ex_getln.c, src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_substitute_02.dump,
            src/testdir/dumps/Test_incsearch_substitute_03.dump

Patch 8.1.0278
Problem:    <A HREF="options.html#'incsearch'">'incsearch'</A> highlighting does not accept reverse range.
Solution:   Swap the range when needed. (issue #3321)
Files:	    src/ex_getln.c, src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_substitute_04.dump

Patch 8.1.0279
Problem:    <A HREF="options.html#'incsearch'">'incsearch'</A> highlighting does not skip white space.
Solution:   Skip white space after the command. (issue #3321)
Files:	    src/ex_getln.c, src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_substitute_05.dump

Patch 8.1.0280
Problem:    <A HREF="options.html#'incsearch'">'incsearch'</A> highlighting does not work for &quot;:g!/&quot;.
Solution:   Skip the exclamation <A HREF="motion.html#mark">mark</A>. (Hirohito Higashi)
Files:	    src/ex_getln.c, src/testdir/test_search.vim

Patch 8.1.0281
Problem:    Parsing command modifiers is not separated.
Solution:   Move command modifier parsing to a separate function.
Files:	    src/ex_docmd.c, src/proto/ex_docmd.pro, src/ex_cmds.h,
            src/globals.h, src/feature.h

Patch 8.1.0282
Problem:    <A HREF="options.html#'incsearch'">'incsearch'</A> does not work with command modifiers.
Solution:   Skip command modifiers.
Files:	    src/ex_docmd.c, src/proto/ex_docmd.pro, src/ex_getln.c,
            src/testdir/test_search.vim

Patch 8.1.0283 (after 8.1.0282)
Problem:    Missing test dump.
Solution:   Add the dump file
Files:	    src/testdir/dumps/Test_incsearch_substitute_06.dump

Patch 8.1.0284
Problem:    <A HREF="options.html#'cursorline'">'cursorline'</A> highlighting wrong with <A HREF="options.html#'incsearch'">'incsearch'</A>.
Solution:   Move the cursor back if the match is outside the range.
Files:	    src/ex_getln.c, src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_substitute_07.dump
            src/testdir/dumps/Test_incsearch_substitute_08.dump

Patch 8.1.0285
Problem:    Compiler warning for conversion.
Solution:   Add a type cast. (Mike Williams)
Files:	    src/ex_getln.c

Patch 8.1.0286
Problem:    <A HREF="options.html#'incsearch'">'incsearch'</A> does not apply to <A HREF="change.html#:smagic">:smagic</A> and <A HREF="change.html#:snomagic">:snomagic</A>.
Solution:   Add support. (Hirohito Higashi)
Files:	    src/ex_getln.c, src/testdir/test_search.vim

Patch 8.1.0287
Problem:    MAX is not defined everywhere.
Solution:   Define MAX where needed.
Files:	    src/ex_getln.c

Patch 8.1.0288
Problem:    <A HREF="quickfix.html#Quickfix">Quickfix</A> code uses cmdidx too often.
Solution:   Add is_loclist_cmd(). (Yegappan Lakshmanan)
Files:	    src/ex_docmd.c, src/proto/ex_docmd.pro, src/quickfix.c

Patch 8.1.0289
Problem:    Cursor moves to wrong column after <A HREF="quickfix.html#quickfix">quickfix</A> jump.
Solution:   Set the curswant flag. (Andy Massimino, closes #3331)
Files:	    src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.0290
Problem:    &quot;cit&quot; on an empty HTML <A HREF="tagsrch.html#tag">tag</A> changes the whole <A HREF="tagsrch.html#tag">tag</A>.
Solution:   Only adjust the area in <A HREF="visual.html#Visual">Visual</A> mode. (Andy Massimino,
            closes #3332)
Files:	    src/search.c, src/testdir/test_textobjects.vim

Patch 8.1.0291
Problem:    <A HREF="options.html#'incsearch'">'incsearch'</A> highlighting not used for <A HREF="change.html#:sort">:sort</A>.
Solution:   Handle <A HREF="pattern.html#pattern">pattern</A> in <A HREF="change.html#:sort">:sort</A> command.
Files:	    src/ex_getln.c, src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_sort_01.dump

Patch 8.1.0292
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: the text &quot;self-installing&quot; confuses some users.
Solution:   Remove the text from the uninstall entry. (closes #3337)
Files:	    src/dosinst.c

Patch 8.1.0293
Problem:    Checks for type of stack is cryptic.
Solution:   Define IS_QF_STACK() and IS_LL_STACK(). (Yegappan Lakshmanan)
Files:	    src/quickfix.c

Patch 8.1.0294
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: sometimes uses short directory name.
Solution:   Expand to long file name with correct caps. (Nobuhiro Takasaki,
            closes #3334)
Files:	    src/os_win32.c

Patch 8.1.0295
Problem:    No <A HREF="options.html#'incsearch'">'incsearch'</A> highlighting for <A HREF="quickfix.html#:vimgrep">:vimgrep</A> and similar commands.
Solution:   Parse the <A HREF="quickfix.html#:vimgrep">:vimgrep</A> command and similar ones to locate the search
            <A HREF="pattern.html#pattern">pattern</A>. (Hirohito Higashi, closes #3344)
Files:	    src/ex_getln.c, src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_vimgrep_01.dump,
            src/testdir/dumps/Test_incsearch_vimgrep_02.dump,
            src/testdir/dumps/Test_incsearch_vimgrep_03.dump,
            src/testdir/dumps/Test_incsearch_vimgrep_04.dump,
            src/testdir/dumps/Test_incsearch_vimgrep_05.dump

Patch 8.1.0296
Problem:    Command parsing for <A HREF="options.html#'incsearch'">'incsearch'</A> is a bit ugly.
Solution:   Return when there is no <A HREF="pattern.html#pattern">pattern</A>.  Put common checks together.
Files:	    src/ex_getln.c

Patch 8.1.0297 (after 8.1.0294)
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: tests fail, Vim crashes.
Solution:   Fix long file name handling.
Files:	    src/os_win32.c

Patch 8.1.0298
Problem:    Window resize test sometimes fails on <A HREF="os_mac.html#Mac">Mac</A>.
Solution:   Add Test_popup_and_window_resize() to flaky tests.
Files:	    src/testdir/runtest.vim

Patch 8.1.0299 (after 8.1.0298)
Problem:    misplaced comment
Solution:   Remove comment
Files:	    src/testdir/runtest.vim

Patch 8.1.0300
Problem:    The old <A HREF="windows.html#window">window</A> title might be freed <A HREF="if_cscop.html#twice">twice</A>. (Dominique Pelle)
Solution:   Do not free &quot;oldtitle&quot; in a signal handler but set a flag to have
            <A HREF="motion.html#it">it</A> freed later.
Files:	    src/os_unix.c

Patch 8.1.0301
Problem:    <A HREF="gui_x11.html#GTK">GTK</A>: Input <A HREF="eval.html#method">method</A> <A HREF="popup.html#popup">popup</A> displayed on wrong screen.
Solution:   Add the screen position offset. (Ken Takata, closes #3268)
Files:	    src/gui_beval.c, src/gui_gtk_x11.c, src/mbyte.c,
            src/proto/gui_gtk_x11.pro

Patch 8.1.0302
Problem:    Crash when using <A HREF="starting.html#:suspend">:suspend</A> and &quot;fg&quot;.
Solution:   Undo patch 8.1.0244.
Files:	    src/os_unix.c, src/term.c, src/proto/term.pro

Patch 8.1.0303
Problem:    <A HREF="builtin.html#line2byte()">line2byte()</A> is wrong for last line with <A HREF="options.html#'noeol'">'noeol'</A> and <A HREF="options.html#'nofixeol'">'nofixeol'</A>.
Solution:   Fix off-by-one error. (Shane Harper, closes #3351)
Files:	    src/memline.c, src/testdir/test_functions.vim

Patch 8.1.0304
Problem:    No redraw when using a STOP signal on Vim and then a CONT signal.
Solution:   Catch the CONT signal and set the <A HREF="terminal.html#terminal">terminal</A> to raw mode.  This is
            like 8.1.0244 but without the screen redraw and a fix for
            multi-threading suggested by Dominique Pelle.
Files:	    src/os_unix.c, src/term.c, src/proto/term.pro

Patch 8.1.0305
Problem:    Missing support for <A HREF="if_lua.html#Lua">Lua</A> 5.4 32 bits on <A HREF="os_unix.html#Unix">Unix</A>.
Solution:   Define lua_newuserdatauv. (Kazunobu Kuriyama)
Files:	    src/if_lua.c

Patch 8.1.0306
Problem:    Plural <A HREF="message.html#messages">messages</A> are not translated properly.
Solution:   Add more usage of NGETTEXT(). (Sergey Alyoshin)
Files:	    src/vim.h, src/buffer.c, src/ex_cmds.c, src/ex_docmd.c,
            src/fileio.c, src/misc1.c, src/ops.c

Patch 8.1.0307
Problem:    There is no good way to get the <A HREF="windows.html#window">window</A> layout.
Solution:   Add the <A HREF="builtin.html#winlayout()">winlayout()</A> function. (Yegappan Lakshmanan)
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/proto/window.pro,
            src/window.c, src/testdir/test_window_id.vim

Patch 8.1.0308
Problem:    A quick <A HREF="undo.html#undo">undo</A> shows &quot;1 seconds ago&quot;. (Tony Mechelynck)
Solution:   Add singular/plural message.
Files:	    src/undo.c

Patch 8.1.0309
Problem:    Profiling does not show a <A HREF="intro.html#count">count</A> for condition lines. (Daniel
            Hahler)
Solution:   Count lines when not skipping. (Ozaki Kiichi, closes #2499)
Files:	    src/ex_docmd.c, src/testdir/test_profile.vim

Patch 8.1.0310
Problem:    File info message not always suppressed with '<A HREF="motion.html#F">F</A>' in <A HREF="options.html#'shortmess'">'shortmess'</A>.
            (Asheq Imran)
Solution:   Save and restore msg_silent. (Christian Brabandt, closes #3221)
Files:	    src/buffer.c, src/memline.c, src/testdir/test_options.vim

Patch 8.1.0311
Problem:    Filtering entries in a <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A> is not <A HREF="starting.html#easy">easy</A>.
Solution:   Add the cfilter <A HREF="usr_05.html#plugin">plugin</A>. (Yegappan Lakshmanan)
Files:	    runtime/pack/dist/opt/cfilter/plugin/cfilter.vim,
            runtime/doc/quickfix.txt

Patch 8.1.0312
Problem:    Wrong type for flags used in signal handlers.
Solution:   Use sig_atomic_t. (Dominique Pelle, closes #3356)
Files:	    src/globals.h, src/os_unix.c, src/os_win32.h

Patch 8.1.0313
Problem:    Information about a swap file is unavailable.
Solution:   Add <A HREF="builtin.html#swapinfo()">swapinfo()</A>. (Enzo Ferber)
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/memline.c,
            src/proto/memline.pro, src/testdir/test_swap.vim

Patch 8.1.0314 (after 8.1.0313)
Problem:    Build failure without the <A HREF="various.html#+eval">+eval</A> feature. (Brenton Horne)
Solution:   Add #ifdef.  Also add the &quot;dirty&quot; item.
Files:	    src/memline.c, runtime/doc/eval.txt, src/testdir/test_swap.vim

Patch 8.1.0315
Problem:    Helpgrep with language doesn't work properly. (Takuya Fujiwara)
Solution:   Check for the language earlier. (Hirohito Higashi)
Files:	    src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.0316
Problem:    <A HREF="builtin.html#swapinfo()">swapinfo()</A> test fails on Travis.
Solution:   Handle a long host name. (Ozaki Kiichi, closes #3361)
            Also make the version check flexible. (James McCoy)
Files:	    src/testdir/test_swap.vim

Patch 8.1.0317
Problem:    <A HREF="if_cscop.html#Cscope">Cscope</A> test fails when using shadow directory.
Solution:   Resolve symlink in Vim. (James McCoy, closes #3364)
Files:	    src/testdir/test_cscope.vim

Patch 8.1.0318
Problem:    The <A HREF="builtin.html#getftype()">getftype()</A> test may fail for char devices if the file
            disappeared in between the listing and the <A HREF="builtin.html#getftype()">getftype()</A> call.
Solution:   Ignore empty result. (Ozaki Kiichi, closes #3360)
Files:	    src/testdir/test_stat.vim

Patch 8.1.0319
Problem:    bzero() function prototype doesn't work for Android.
Solution:   Add an #ifdef. (Elliott Hughes, closes #3365)
Files:	    src/osdef1.h.in

Patch 8.1.0320
Problem:    Too much <A HREF="options.html#'incsearch'">'incsearch'</A> highlight for <A HREF="pattern.html#pattern">pattern</A> matching everything.
Solution:   Add the skiplen to the command and remove the line range.
            (Christian Brabandt)  Check for empty <A HREF="pattern.html#pattern">pattern</A> earlier.
Files:	    src/ex_getln.c, src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_substitute_09.dump

Patch 8.1.0321 (after 8.1.0320)
Problem:    <A HREF="options.html#'incsearch'">'incsearch'</A> regression: <A HREF="pattern.html#/\v">/\v</A> highlights everything.
Solution:   Put back the empty_pattern() check.
Files:	    src/ex_getln.c, src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_search_01.dump,
            src/testdir/dumps/Test_incsearch_search_02.dump

Patch 8.1.0322
Problem:    Test_copy_winopt() does not restore <A HREF="options.html#'hidden'">'hidden'</A>.
Solution:   Restore the option, fix indent. (Ozaki Kiichi, closes #3367)
Files:	    src/testdir/test_options.vim

Patch 8.1.0323
Problem:    Reverse order of VTP calls only needed the first time.
Solution:   Add a flag to remember the state. (Nobuhiro Takasaki, closes #3366)
Files:	    src/os_win32.c

Patch 8.1.0324
Problem:    Off-by-one error in cmdidx check. (Coverity)
Solution:   Use &quot;&gt;=&quot; instead of &quot;<A HREF="change.html#&gt;">&gt;</A>&quot;.
Files:	    src/ex_docmd.c

Patch 8.1.0325
Problem:    Strings in swap file may not be NUL terminated. (Coverity)
Solution:   Limit the length of the used <A HREF="eval.html#string">string</A>.
Files:	    src/memline.c

Patch 8.1.0326
Problem:    Screen dump does not consider NUL and space equal.
Solution:   Use temp <A HREF="eval.html#variables">variables</A> instead of character from cell.
Files:	    src/terminal.c, src/testdir/dumps/Test_syntax_c_01.dump

Patch 8.1.0327
Problem:    The &quot;g CTRL-G&quot; command isn't tested much.
Solution:   Add more tests. (Dominique Pelle, closes #3369)
Files:	    src/testdir/test_normal.vim

Patch 8.1.0328
Problem:    <A HREF="builtin.html#inputlist()">inputlist()</A> doesn't work with a <A HREF="builtin.html#timer">timer</A>. (Dominique Pelle)
Solution:   Don't redraw when cmdline_row is zero. (Hirohito Higashi,
            closes #3239)
Files:	    src/misc1.c, src/screen.c

Patch 8.1.0329
Problem:    Using <A HREF="builtin.html#inputlist()">inputlist()</A> during <A HREF="starting.html#startup">startup</A> results in garbage. (Dominique
            Pelle)
Solution:   Make sure the xterm tracing is stopped when disabling the mouse.
Files:	    src/os_unix.c

Patch 8.1.0330
Problem:    The qf_add_entries() function is too long.
Solution:   Split in two parts. (Yegappan Lakshmanan)
Files:	    src/quickfix.c

Patch 8.1.0331
Problem:    Insufficient test coverage for <A HREF="starting.html#:mkview">:mkview</A> and <A HREF="starting.html#:loadview">:loadview</A>.
Solution:   Add tests. (Dominique Pelle, closes #3385)
Files:	    src/testdir/test_mksession.vim

Patch 8.1.0332
Problem:    Get Gdk-Critical error on first balloon show.
Solution:   Get screen geometry using the draw area widget. (Davit Samvelyan,
            closes #3386)
Files:	    src/gui_beval.c

Patch 8.1.0333
Problem:    <A HREF="starting.html#:mkview">:mkview</A> does not restore cursor properly after &quot;<A HREF="motion.html#$">$</A>&quot;. (Dominique
            Pelle)
Solution:   Position the cursor with &quot;normal! $&quot;.
Files:	    src/ex_docmd.c, src/testdir/test_mksession.vim

Patch 8.1.0334
Problem:    <A HREF="options.html#'autowrite'">'autowrite'</A> takes effect when buffer is not to be written.
Solution:   Don't write <A HREF="windows.html#buffers">buffers</A> that are not supposed to be written. (Even <A HREF="intro.html#Q">Q</A>
            Jones, closes #3391)  Add tests for <A HREF="options.html#'autowrite'">'autowrite'</A>.
Files:	    src/ex_cmds2.c, src/testdir/test_writefile.vim

Patch 8.1.0335
Problem:    mkview test fails on CI.
Solution:   Attempt to force recomputing curswant after <A HREF="fold.html#folding">folding</A>.
Files:	    src/testdir/test_mksession.vim

Patch 8.1.0336
Problem:    mkview test still fails on CI.
Solution:   Ignore curswant, don't see another solution.
Files:	    src/testdir/test_mksession.vim

Patch 8.1.0337
Problem:    <A HREF="editing.html#:file">:file</A> fails in <A HREF="quickfix.html#quickfix">quickfix</A> command.
Solution:   Allow <A HREF="editing.html#:file">:file</A> without argument when curbuf_lock is set. (Jason
            Franklin)
Files:	    src/ex_docmd.c, src/testdir/test_quickfix.vim

Patch 8.1.0338
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: VTP doesn't work properly with PowerShell.
Solution:   Adjust the color index. (Nobuhiro Takasaki, closes #3347)
Files:	    src/os_win32.c

Patch 8.1.0339
Problem:    Wrong highlight when <A HREF="options.html#'incsearch'">'incsearch'</A> set and cancelling <A HREF="change.html#:s">:s</A>.
Solution:   Reset search line range. (Hirohito Higashi, Masamichi Abe)
Files:	    src/ex_getln.c, src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_substitute_10.dump

Patch 8.1.0340
Problem:    No test for <A HREF="spell.html#:spellinfo">:spellinfo</A>.
Solution:   Add a test. (Dominique Pelle, closes #3394)
Files:	    src/testdir/test_spell.vim

Patch 8.1.0341
Problem:    <A HREF="editing.html#:argadd">:argadd</A> in empty buffer changes the buffer name. (Pavol Juhas)
Solution:   Don't re-use the current buffer when not going to edit the file.
            (closes #3397)  Do re-use the current buffer for <A HREF="editing.html#:next">:next</A>.
Files:	    src/ex_cmds2.c, src/testdir/test_arglist.vim,
            src/testdir/test_command_count.vim

Patch 8.1.0342
Problem:    Crash when a callback deletes a <A HREF="windows.html#window">window</A> that is being used. (Ozaki
            Kiichi)
Solution:   Do not unload a buffer that is being displayed while redrawing the
            screen. Also avoid invoking callbacks while redrawing.
            (closes #2107)
Files:	    src/buffer.c, src/misc2.c

Patch 8.1.0343
Problem:    <A HREF="options.html#'shellslash'">'shellslash'</A> is not used for <A HREF="builtin.html#getcwd()">getcwd()</A> with local directory.
            (Daniel Hahler)
Solution:   Call slash_adjust() later. (closes #3399)
Files:	    src/evalfunc.c

Patch 8.1.0344
Problem:    <A HREF="options.html#'hlsearch'">'hlsearch'</A> highlighting has a gap after <A HREF="pattern.html#/$">/$</A>.
Solution:   Remove suspicious code. (Ricky Zhou, closes #3400)
Files:	    src/screen.c, src/testdir/test_hlsearch.vim

Patch 8.1.0345
Problem:    Cannot get the <A HREF="windows.html#window">window</A> id associated with the location <A HREF="eval.html#list">list</A>.
Solution:   Add the &quot;filewinid&quot; argument to <A HREF="builtin.html#getloclist()">getloclist()</A>. (Yegappan
            Lakshmanan, closes #3202)
Files:	    runtime/doc/eval.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.1.0346
Problem:    Building with Aap is outdated and unused.
Solution:   Remove the Aap build files.
Files:	    Filelist, src/main.aap, src/testdir/main.aap, src/config.aap.in,
            runtime/macros/maze/main.aap

Patch 8.1.0347
Problem:    Some tests fail on Solaris.
Solution:   Skip writefile test. Fix path to libc.so. Improve test for Turkish
            <A HREF="change.html#case">case</A> change. (Libor Bukata, Bjorn Linse, closes #3403)
Files:	    src/testdir/test_functions.vim, src/testdir/test_normal.vim,
            src/testdir/test_writefile.vim

Patch 8.1.0348
Problem:    On Travis the slowest build is run last. (Dominique Pelle)
Solution:   Reorder the build entries.
Files:	    .travis.yml

Patch 8.1.0349
Problem:    Crash when wiping buffer in a callback.
Solution:   Do not handle <A HREF="message.html#messages">messages</A> when only peeking for a character.
            (closes #2107)  Add &quot;redraw_flag&quot; to <A HREF="testing.html#test_override()">test_override()</A>.
Files:	    src/os_unix.c, src/os_win32.c, src/screen.c, src/evalfunc.c,
            src/globals.h, runtime/doc/eval.txt

Patch 8.1.0350
Problem:    Vim may block on <A HREF="channel.html#ch_sendraw()">ch_sendraw()</A> when the <A HREF="channel.html#job">job</A> is sending data back to
            Vim, which isn't read yet. (Nate Bosch)
Solution:   Add the &quot;noblock&quot; option to <A HREF="channel.html#job_start()">job_start()</A>. (closes #2548)
Files:	    src/channel.c, src/structs.h, src/testdir/test_channel.vim,
            runtime/doc/channel.txt

Patch 8.1.0351
Problem:    <A HREF="options.html#'incsearch'">'incsearch'</A> for :/foo/s//&lt;Esc&gt; changes last search <A HREF="pattern.html#pattern">pattern</A>.
Solution:   Save the last search <A HREF="pattern.html#pattern">pattern</A> earlier.
Files:	    src/ex_docmd.c, src/ex_getln.c, src/testdir/test_search.vim

Patch 8.1.0352
Problem:    Browsing compressed <A HREF="pi_tar.html#tar">tar</A> files does not always work.
Solution:   Use the &quot;file&quot; command to get the compression type.
Files:	    runtime/autoload/tar.vim

Patch 8.1.0353
Problem:    An &quot;after&quot; directory of a package is appended to <A HREF="options.html#'rtp'">'rtp'</A>, which
            will be after the user's &quot;after&quot; directory. ()
Solution:   <A HREF="insert.html#Insert">Insert</A> the package &quot;after&quot; directory before any other &quot;after&quot;
            directory in <A HREF="options.html#'rtp'">'rtp'</A>. (closes #3409)
Files:	    src/ex_cmds2.c, src/testdir/test_packadd.vim

Patch 8.1.0354 (after 8.1.0353)
Problem:    Packadd test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Ignore difference between forward and backward slashes.
Files:	    src/testdir/test_packadd.vim

Patch 8.1.0355
Problem:    Incorrect adjusting the <A HREF="popup.html#popup">popup</A> menu for the preview <A HREF="windows.html#window">window</A>.
Solution:   Compute position and height properly. (Ronan Pigott)  Also show at
            least ten items. (closes #3414)
Files:	    src/popupmnu.c

Patch 8.1.0356
Problem:    Using <A HREF="change.html#:s">:s</A> with <A HREF="options.html#'incsearch'">'incsearch'</A> prevents <A HREF="undo.html#CTRL-R">CTRL-R</A> <A HREF="index.html#CTRL-W">CTRL-W</A>. (Boris Staletic)
Solution:   When past the <A HREF="pattern.html#pattern">pattern</A> put cursor back in the start position.
            (closes #3413)
Files:	    src/ex_getln.c, src/testdir/test_search.vim

Patch 8.1.0357
Problem:    Instructions for tests are outdated. (Jason Franklin)
Solution:   Update the text.
Files:	    src/testdir/README.txt

Patch 8.1.0358
Problem:    Crash when using <A HREF="terminal.html#term_dumpwrite()">term_dumpwrite()</A> after the <A HREF="channel.html#job">job</A> finished.
Solution:   Check for a finished <A HREF="channel.html#job">job</A> and give an error message.
Files:	    src/terminal.c

Patch 8.1.0359
Problem:    No clue what test failed when using a screendump <A HREF="if_cscop.html#twice">twice</A>.
Solution:   Add an extra argument to VerifyScreenDump().
Files:	    src/testdir/screendump.vim

Patch 8.1.0360
Problem:    Using an external <A HREF="diff.html#diff">diff</A> program is slow and inflexible.
Solution:   Include the xdiff library. (Christian Brabandt, closes #2732)
            Use <A HREF="motion.html#it">it</A> by default.
Files:	    Filelist, runtime/doc/diff.txt, runtime/doc/options.txt,
            src/Make_cyg_ming.mak, src/Make_mvc.mak, src/Makefile, src/diff.c,
            src/structs.h, src/testdir/dumps/Test_diff_01.dump,
            src/testdir/dumps/Test_diff_02.dump,
            src/testdir/dumps/Test_diff_03.dump,
            src/testdir/dumps/Test_diff_04.dump,
            src/testdir/dumps/Test_diff_05.dump,
            src/testdir/dumps/Test_diff_06.dump,
            src/testdir/dumps/Test_diff_07.dump,
            src/testdir/dumps/Test_diff_08.dump,
            src/testdir/dumps/Test_diff_09.dump,
            src/testdir/dumps/Test_diff_10.dump,
            src/testdir/dumps/Test_diff_11.dump,
            src/testdir/dumps/Test_diff_12.dump,
            src/testdir/dumps/Test_diff_13.dump,
            src/testdir/dumps/Test_diff_14.dump,
            src/testdir/dumps/Test_diff_15.dump,
            src/testdir/dumps/Test_diff_16.dump,
            src/testdir/test_diffmode.vim, src/xdiff/COPYING,
            src/xdiff/xdiff.h, src/xdiff/xdiffi.c, src/xdiff/xdiffi.h,
            src/xdiff/xemit.c, src/xdiff/xemit.h, src/xdiff/xhistogram.c,
            src/xdiff/xinclude.h, src/xdiff/xmacros.h, src/xdiff/xpatience.c,
            src/xdiff/xprepare.c, src/xdiff/xprepare.h, src/xdiff/xtypes.h,
            src/xdiff/xutils.c, src/xdiff/xutils.h, src/xdiff/README.txt

Patch 8.1.0361
Problem:    Remote user not used for completion. (Stucki)
Solution:   Use $USER too. (Dominique Pelle, closes #3407)
Files:	    src/misc1.c

Patch 8.1.0362
Problem:    Cannot get the <A HREF="usr_41.html#script">script</A> line number when executing a function.
Solution:   Store the line number besides the <A HREF="usr_41.html#script">script</A> ID. (Ozaki Kiichi,
            closes #3362)  Also display the line number with &quot;<A HREF="various.html#:verbose">:verbose</A> set&quot;.
Files:	    runtime/doc/cmdline.txt, runtime/doc/eval.txt, src/Make_all.mak,
            src/buffer.c, src/eval.c, src/evalfunc.c, src/ex_cmds2.c,
            src/ex_docmd.c, src/ex_getln.c, src/fileio.c, src/getchar.c,
            src/globals.h, src/main.c, src/menu.c, src/option.c,
            src/proto/eval.pro, src/structs.h, src/syntax.c,
            src/testdir/test_alot.vim, src/testdir/test_expand_func.vim,
            src/testdir/test_maparg.vim, src/term.c src/userfunc.c

Patch 8.1.0363
Problem:    Internal <A HREF="diff.html#diff">diff</A> isn't used by default <A HREF="motion.html#as">as</A> advertised.
Solution:   Add &quot;internal&quot; to the default value of <A HREF="options.html#'diffopt'">'diffopt'</A>.
            Also add couple of files missing from the <A HREF="intro.html#distribution">distribution</A>.
Files:	    src/option.c, runtime/doc/options.txt, Filelist

Patch 8.1.0364
Problem:    Compiler warning in xdiff code. (Yegappan Lakshmanan)
Solution:   Initialize directly.
Files:	    src/xdiff/xemit.c, src/xdiff/README.txt

Patch 8.1.0365
Problem:    Function <A HREF="repeat.html#profile">profile</A> doesn't specify where <A HREF="motion.html#it">it</A> was defined.
Solution:   Show the <A HREF="usr_41.html#script">script</A> name and line number.
Files:	    src/userfunc.c, src/testdir/test_profile.vim

Patch 8.1.0366
Problem:    Pieces of the xdiff code are not used.
Solution:   Add &quot;#if 0&quot; to omit unused code.
Files:	    src/xdiff/xemit.c

Patch 8.1.0367
Problem:    getchar(1) no longer processes pending <A HREF="message.html#messages">messages</A>. (Yasuhiro
            Matsumoto)
Solution:   Call parse_queued_messages().
Files:	    src/evalfunc.c

Patch 8.1.0368
Problem:    <A HREF="gui_x11.html#GTK">GTK</A> code has too many #ifdefs and building fails with <A HREF="gui_x11.html#GTK">GTK</A> 2.10.
Solution:   Always use gtk_widget_get_window() and define <A HREF="motion.html#it">it</A> for older <A HREF="gui_x11.html#GTK">GTK</A>
            versions. (Ken Takata, closes #3421)
Files:	    src/gui_beval.c, src/gui_gtk.c, src/gui_gtk_f.c,
            src/gui_gtk_x11.c, src/mbyte.c, src/vim.h

Patch 8.1.0369
Problem:    Continuation lines cannot contain comments.
Solution:   Support using &quot;\ .
Files:	    src/ex_cmds2.c, src/testdir/test_eval_stuff.vim,
            runtime/indent/vim.vim, runtime/doc/repeat.txt

Patch 8.1.0370
Problem:    Not using internal <A HREF="diff.html#diff">diff</A> if <A HREF="options.html#'diffopt'">'diffopt'</A> is not changed.
Solution:   Correct <A HREF="starting.html#initialization">initialization</A> of diff_flags. (Christian Brabandt)
Files:	    src/diff.c

Patch 8.1.0371
Problem:    Argument types for select() may be wrong.
Solution:   Use a configure <A HREF="map.html#macro">macro</A>. (Tobias Ulmer)
Files:	    src/config.h.in, src/configure.ac, src/auto/configure,
            src/os_unix.c

Patch 8.1.0372
Problem:    Screen updating slow when <A HREF="options.html#'cursorline'">'cursorline'</A> is set.
Solution:   Only redraw the old and new cursor line, not all lines.
Files:	    src/edit.c, src/move.c, src/screen.c, src/proto/screen.pro

Patch 8.1.0373 (after 8.1.0372)
Problem:    Screen updating still slow when <A HREF="options.html#'cursorline'">'cursorline'</A> is set.
Solution:   Fix setting last_cursorline.
Files:	    src/move.c

Patch 8.1.0374
Problem:    Moving the cursor is slow when <A HREF="options.html#'relativenumber'">'relativenumber'</A> is set.
Solution:   Only redraw the number column, not all lines.
Files:	    src/screen.c, src/move.c

Patch 8.1.0375
Problem:    Cannot use <A HREF="diff.html#diff">diff</A> mode with Cygwin diff.exe. (Igor Forca)
Solution:   Skip over unrecognized lines in the <A HREF="diff.html#diff">diff</A> output.
Files:	    src/diff.c, src/testdir/test_diffmode.vim

Patch 8.1.0376
Problem:    Compiler warning for uninitialized variable. (Tony Mechelynck)
Solution:   Initialize the variable.
Files:	    src/screen.c

Patch 8.1.0377
Problem:    Xdiff doesn't use the Vim memory allocation <A HREF="eval.html#functions">functions</A>.
Solution:   Change the xdl_ defines.  Check for out-of-memory.  Rename
            &quot;ignored&quot; to &quot;vim_ignored&quot;.
Files:	    src/xdiff/xdiff.h, src/xdiff/xpatience.c, src/xdiff/xdiffi.c,
            src/channel.c, src/diff.c, src/evalfunc.c, src/ex_cmds.c,
            src/fileio.c, src/main.c, src/mbyte.c, src/netbeans.c,
            src/os_unix.c, src/os_win32.c, src/ui.c, src/window.c,
            src/globals.h, src/term.c

Patch 8.1.0378
Problem:    CI build failure.
Solution:   Include vim.h <A HREF="motion.html#as">as</A> ../vim.h.  Fix compiler warning.
Files:	    src/xdiff/xdiff.h, src/xdiff/xpatience.c

Patch 8.1.0379
Problem:    Build dependencies are incomplete.
Solution:   Update the build dependencies, mainly for xdiff.  Adjust object
            directory for libvterm and xdiff.
Files:	    src/Makefile, src/configure.ac, src/auto/configure,
            src/libvterm/src/screen.c, src/libvterm/src/termscreen.c,
            src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.1.0380
Problem:    &quot;make proto&quot; doesn't work well.
Solution:   Define a few more types for cproto.  Update proto files.  Fix that
            <A HREF="workshop.html#workshop">workshop</A> didn't build.
Files:	    src/vim.h, src/protodef.h, src/if_ruby.c, src/workshop.c,
            src/proto/digraph.pro, src/hardcopy.pro, src/proto/option.pro,
            src/proto/window.pro

Patch 8.1.0381
Problem:    Variable declaration not at start of block.
Solution:   Fix line ordering.
Files:	    src/xdiff/xpatience.c

Patch 8.1.0382
Problem:    Some make programs can't handle dependency on &quot;xdiff/../&quot;.
Solution:   Strip <A HREF="motion.html#it">it</A> out.
Files:	    src/Makefile

Patch 8.1.0383
Problem:    Missing source file rename.
Solution:   Update the dependency.
Files:	    src/Make_mvc.mak

Patch 8.1.0384
Problem:    Sign ordering depends on +netbeans feature.
Solution:   Also order <A HREF="sign.html#signs">signs</A> without +netbeans. (Christian Brabandt,
            closes #3224)
Files:	    src/structs.h, src/buffer.c

Patch 8.1.0385
Problem:    Coveralls badge doesn't update.
Solution:   Update the URL
Files:	    README.md

Patch 8.1.0386
Problem:    Cannot test with non-default option value.
Solution:   Add <A HREF="testing.html#test_option_not_set()">test_option_not_set()</A>.
Files:	    runtime/doc/eval.txt, src/option.c, src/proto/option.pro,
            src/evalfunc.c

Patch 8.1.0387
Problem:    No test for <A HREF="options.html#'ambiwidth'">'ambiwidth'</A> detection.
Solution:   Add a test.
Files:	    src/testdir/test_startup_utf8.vim

Patch 8.1.0388
Problem:    Coverity complains about possible NULL pointer use.
Solution:   Use get_tv_string() instead of get_tv_string_chk().
Files:	    src/evalfunc.c

Patch 8.1.0389
Problem:    <A HREF="gui.html#:behave">:behave</A> command is not tested.
Solution:   Add a test. (Dominique Pelle, closes #3429)
Files:	    src/Make_all.mak, src/testdir/test_alot.vim,
            src/testdir/test_behave.vim

Patch 8.1.0390
Problem:    Scrollbars are not tested.
Solution:   Add test_scrollbar() and a test.
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_gui.vim

Patch 8.1.0391
Problem:    Building in a shadow directory fails.
Solution:   Don't link the xdiff directory but what's in <A HREF="motion.html#it">it</A>. (closes #3428)
Files:	    src/Makefile

Patch 8.1.0392
Problem:    Error while typing :/foo/s// with <A HREF="options.html#'incsearch'">'incsearch'</A> enabled.
Solution:   Do not give search <A HREF="message.html#errors">errors</A> when highlighting matches.
Files:	    src/ex_docmd.c, src/proto/ex_docmd.pro, src/ex_getln.c,
            src/testdir/test_search.vim

Patch 8.1.0393
Problem:    Not all white space difference <A HREF="options.html#options">options</A> available.
Solution:   Add &quot;iblank&quot;, &quot;iwhiteall&quot; and &quot;iwhiteeol&quot; to <A HREF="options.html#'diffopt'">'diffopt'</A>.
Files:	    src/diff.c, src/testdir/test_diffmode.vim,
            src/testdir/dumps/Test_diff_17.dump,
            src/testdir/dumps/Test_diff_18.dump,
            src/testdir/dumps/Test_diff_19.dump,
            src/testdir/dumps/Test_diff_20.dump

Patch 8.1.0394
Problem:    Diffs are not always updated correctly.
Solution:   When using internal <A HREF="diff.html#diff">diff</A> update for any changes properly.
Files:	    src/structs.h, src/diff.c, src/proto/diff.pro, src/misc1.c,
            src/main.c

Patch 8.1.0395
Problem:    Compiler warning on 64-bit <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Add type cast. (Mike Williams)
Files:	    src/diff.c

Patch 8.1.0396
Problem:    Another compiler warning on 64-bit <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Add type cast. (Mike Williams)
Files:	    src/xdiff/xutils.c

Patch 8.1.0397
Problem:    No event triggered after updating diffs.
Solution:   Add the <A HREF="autocmd.html#DiffUpdated">DiffUpdated</A> event.
Files:	    src/vim.h, src/diff.c, src/fileio.c,
            src/testdir/test_diffmode.vim, runtime/doc/autocmd.txt

Patch 8.1.0398
Problem:    No test for <A HREF="starting.html#-o">-o</A> and <A HREF="starting.html#-O">-O</A> command line arguments.
Solution:   Add a test. (Dominique Pelle, closes #3438)
Files:	    src/testdir/test_startup.vim

Patch 8.1.0399
Problem:    <A HREF="options.html#'hlsearch'">'hlsearch'</A> highlight remains in other <A HREF="windows.html#window">window</A> after cancelling
            command.
Solution:   Redraw all <A HREF="windows.html#windows">windows</A>. Also remove unnecessary delays. (closes #3437)
Files:	    src/ex_getln.c, src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_substitute_11.dump,
            src/testdir/dumps/Test_incsearch_substitute_12.dump,
            src/testdir/dumps/Test_incsearch_substitute_13.dump

Patch 8.1.0400
Problem:    Using freed memory with <A HREF="diff.html#:diffget">:diffget</A>.
Solution:   Skip ex_diffupdate() while updating diffs. (closes #3442)
Files:	    src/diff.c

Patch 8.1.0401
Problem:    Can't get swap name of another buffer.
Solution:   Add <A HREF="builtin.html#swapname()">swapname()</A>. (Ozaki Kiichi, closes #3441)
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_swap.vim

Patch 8.1.0402
Problem:    The DiffUpdate event isn't triggered for <A HREF="diff.html#:diffput">:diffput</A>.
Solution:   Also trigger DiffUpdate for <A HREF="diff.html#:diffget">:diffget</A> and <A HREF="diff.html#:diffput">:diffput</A>.
Files:	    src/diff.c

Patch 8.1.0403
Problem:    Header file missing from <A HREF="intro.html#distribution">distribution</A>.
Solution:   Add src/protodef.h.
Files:	    Filelist

Patch 8.1.0404
Problem:    Accessing invalid memory with long argument name.
Solution:   Use item_count instead of checking for a terminating NULL.
            (Dominique Pelle, closes #3444)
Files:	    src/testdir/test_arglist.vim, src/version.c

Patch 8.1.0405
Problem:    Too many #ifdefs for <A HREF="gui_x11.html#GTK">GTK</A>.
Solution:   Define macros instead of using #ifdef. (Ken Takata, closes #3436)
Files:	    src/gui_beval.c, src/gui_gtk.c, src/gui_gtk_f.c,
            src/gui_gtk_x11.c, src/vim.h

Patch 8.1.0406
Problem:    Several command line arguments are not tested.
Solution:   Add tests for <A HREF="starting.html#-A">-A</A>, <A HREF="starting.html#-F">-F</A>, <A HREF="starting.html#-H">-H</A>, <A HREF="starting.html#-p">-p</A> and <A HREF="starting.html#-V">-V</A>. (Dominique Pelle,
            closes #3446)
Files:	    src/testdir/test_startup.vim

Patch 8.1.0407
Problem:    <A HREF="quickfix.html#Quickfix">Quickfix</A> code mixes using the stack and a <A HREF="eval.html#list">list</A> pointer.
Solution:   Use a <A HREF="eval.html#list">list</A> pointer in more places. (Yegappan Lakshmanan,
            closes #3443)
Files:	    src/quickfix.c

Patch 8.1.0408
Problem:    MSVC: cannot use the &quot;x64&quot; native compiler option.
Solution:   Ignore <A HREF="change.html#case">case</A> for &#37;Platform&#37;.  Improve documentation. (Ken Takata)
Files:	    src/INSTALLpc.txt, src/msvc2015.bat

Patch 8.1.0409 (after 8.1.0406)
Problem:    Startup test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Do the <A HREF="arabic.html#Arabic">Arabic</A> test in silent <A HREF="intro.html#Ex">Ex</A> mode.  Loosen the check for -V2.
Files:	    src/testdir/test_startup.vim

Patch 8.1.0410
Problem:    The ex_copen() function is too long.
Solution:   Refactor to split off two <A HREF="eval.html#functions">functions</A>. (Yegappan Lakshmanan)
Files:	    src/quickfix.c

Patch 8.1.0411
Problem:    Renamed file missing from <A HREF="intro.html#distribution">distribution</A>.
Solution:   Rename screen.c to termscreen.c (Zdenek Dohnal, closes #3449)
Files:	    Filelist

Patch 8.1.0412
Problem:    Cannot build with <A HREF="gui_x11.html#GTK">GTK</A> 2.4.
Solution:   Add back a few #ifdefs. (Ken Takata, closes #3447)
            Also support older <A HREF="gui_x11.html#GTK">GTK</A>. (Tom Christensen)
Files:	    src/gui_gtk_x11.c

Patch 8.1.0413
Problem:    Test output is duplicated or missing.
Solution:   Adjust the <A HREF="os_win32.html#MS-Windows">MS-Windows</A> and <A HREF="os_unix.html#Unix">Unix</A> test makefiles. (Ken Takata,
            closes #3452)
Files:	    src/testdir/Make_dos.mak, src/testdir/Makefile

Patch 8.1.0414
Problem:    <A HREF="eval.html#v:option_old">v:option_old</A> and <A HREF="eval.html#v:option_new">v:option_new</A> are cleared when using <A HREF="options.html#:set">:set</A> in
            <A HREF="autocmd.html#OptionSet">OptionSet</A> autocmd. (Gary Johnson)
Solution:   Don't trigger <A HREF="autocmd.html#OptionSet">OptionSet</A> recursively.
Files:	    src/option.c

Patch 8.1.0415
Problem:    Not actually using 16 colors with vtp.
Solution:   Always use 256 colors when vtp is used. (Nobuhiro Takasaki,
            closes #3432)
Files:	    src/option.c, src/term.c

Patch 8.1.0416
Problem:    Sort doesn't report deleted lines.
Solution:   Call msgmore(). (Christian Brabandt, closes #3454)
Files:	    src/ex_cmds.c, src/testdir/test_sort.vim

Patch 8.1.0417
Problem:    Several command line arguments are not tested.
Solution:   Add tests for <A HREF="starting.html#-m">-m</A>, <A HREF="starting.html#-M">-M</A>, <A HREF="starting.html#-R">-R</A> and -Vfile. (Dominique Pelle,
            closes #3458)
Files:	    src/testdir/test_startup.vim

Patch 8.1.0418
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: cannot separate <A HREF="if_lua.html#Lua">Lua</A> include and library directories.
Solution:   Add LUA_LIBDIR and LUA_INCDIR. (Ken Takata, closes #3464)
Files:	    src/Make_cyg_ming.mak

Patch 8.1.0419
Problem:    Cygwin: running cproto fails with -O2.
Solution:   Strip -O2 for cproto. (Ken Takata, closes #3465)
Files:	    src/Makefile

Patch 8.1.0420
Problem:    Generating vim.lib when using ActivePerl 5.20.3 or later.
Solution:   Redefine XS_EXTERNAL(). (Ken Takata, closes #3462)
Files:	    src/if_perl.xs

Patch 8.1.0421
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="if_ruby.html#Ruby">Ruby</A> path is wrong for <A HREF="if_ruby.html#Ruby">Ruby</A> 1.9 and later.
Solution:   Let -I argument depend on <A HREF="if_ruby.html#Ruby">Ruby</A> version. (Ken Takata, closes #3461)
Files:	    src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.1.0422
Problem:    Cannot create map file with MinGW.
Solution:   Add support for $MAP. (Ken Takata, closes #3460)
Files:	    src/Make_cyg_ming.mak

Patch 8.1.0423
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: using dup-close for flushing a file.
Solution:   Use _commit(). (Ken Takata, closes #3463)
Files:	    src/memfile.c, src/os_mac.h, src/os_win32.h

Patch 8.1.0424
Problem:    Test output is very <A HREF="starting.html#verbose">verbose</A>, loading CI log is slow.
Solution:   Redirect output to /dev/null. (Ken Takata, closes #3456)
Files:	    src/testdir/Makefile

Patch 8.1.0425
Problem:    ml_get error and crash with <A HREF="builtin.html#appendbufline()">appendbufline()</A>. (Masashi Iizuka)
Solution:   Set per-window buffer info. (Hirohito Higashi, closes #3455)
Files:	    src/buffer.c, src/testdir/test_bufline.vim

Patch 8.1.0426
Problem:    Accessing invalid memory in SmcOpenConnection().
Solution:   Reduce size of errorstring by one. (Dominique Pelle, closes #3469)
Files:	    src/os_unix.c, src/testdir/test_startup.vim

Patch 8.1.0427
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> <A HREF="gui.html#GUI">GUI</A>: using invalid encoded file name.
Solution:   Drop the file name and return NULL. (Ken Takata, closes #3467)
Files:	    src/gui_w32.c

Patch 8.1.0428
Problem:    The <A HREF="starting.html#:suspend">:suspend</A> command is not tested.
Solution:   Add a test. (Dominique Pelle, closes #3472)
Files:	    src/Make_all.mak, src/testdir/test_alot.vim,
            src/testdir/test_suspend.vim

Patch 8.1.0429 (after 8.1.0343)
Problem:    No test for <A HREF="editing.html#:lcd">:lcd</A> with <A HREF="options.html#'shellslash'">'shellslash'</A>.
Solution:   Add a test. (Daniel Hahler, closes #3475)
Files:	    src/testdir/test_getcwd.vim

Patch 8.1.0430
Problem:    Xargadd file left behind after running test.
Solution:   Delete the file. (Dominique Pelle)
Files:	    src/testdir/test_arglist.vim

Patch 8.1.0431
Problem:    The qf_jump() function is too long.
Solution:   Refactor to split <A HREF="motion.html#it">it</A> into several <A HREF="eval.html#functions">functions</A>. (Yegappan Lakshmanan)
Files:	    src/quickfix.c

Patch 8.1.0432
Problem:    Compiler warning for signed/unsigned.
Solution:   Add type cast. (Mike Williams)
Files:	    src/xdiff/xemit.c

Patch 8.1.0433
Problem:    Mapping can obtain text from <A HREF="builtin.html#inputsecret()">inputsecret()</A>. (Tommy Allen)
Solution:   Disallow <A HREF="undo.html#CTRL-R">CTRL-R</A> = and CTRL-\ <A HREF="motion.html#e">e</A> when using <A HREF="builtin.html#inputsecret()">inputsecret()</A>.
Files:	    src/ex_getln.c

Patch 8.1.0434
Problem:    copy_loclist() is too long.
Solution:   Split in multiple <A HREF="eval.html#functions">functions</A>. (Yegappan Lakshmanan)
Files:	    src/proto/quickfix.pro, src/quickfix.c, src/window.c

Patch 8.1.0435
Problem:    Cursorline highlight not removed in some situation. (Vitaly
            Yashin)
Solution:   Reset last_cursorline when resetting <A HREF="options.html#'cursorline'">'cursorline'</A>. (Christian
            Brabandt, closes #3481)
Files:	    src/move.c, src/proto/move.pro, src/option.c

Patch 8.1.0436
Problem:    Can get the text of <A HREF="builtin.html#inputsecret()">inputsecret()</A> with <A HREF="builtin.html#getcmdline()">getcmdline()</A>. (Tommy Allen)
Solution:   Don't return the text.
Files:	    src/ex_getln.c

Patch 8.1.0437
Problem:    May access freed memory when <A HREF="syntax.html#syntax">syntax</A> HL times out. (Philipp Gesang)
Solution:   Clear b_sst_first when clearing b_sst_array.
Files:	    src/syntax.c

Patch 8.1.0438
Problem:    The ex_make() function is too long.
Solution:   Split <A HREF="motion.html#it">it</A> into several <A HREF="eval.html#functions">functions</A>. (Yegappan Lakshmanan)
Files:	    src/quickfix.c

Patch 8.1.0439
Problem:    Recursive use of <A HREF="builtin.html#getcmdline()">getcmdline()</A> still not protected.
Solution:   Instead of saving the command buffer when making a call which may
            cause recursiveness, save the buffer when actually being called
            recursively.
Files:	    src/ex_getln.c, src/proto/ex_getln.pro, src/getchar.c, src/main.c

Patch 8.1.0440
Problem:    <A HREF="builtin.html#remove()">remove()</A> with a range not sufficiently tested.
Solution:   Add a test. (Dominique Pelle, closes #3497)
Files:	    src/testdir/test_listdict.vim

Patch 8.1.0441
Problem:    Build failure without command line <A HREF="cmdline.html#history">history</A>.
Solution:   Move cmdline_init() outside of #ifdef.
Files:	    src/ex_getln.c

Patch 8.1.0442
Problem:    <A HREF="gui.html#GUI">GUI</A>: Cursor not drawn after &quot;<A HREF="various.html#:redraw">:redraw</A> &#124; sleep&quot;.
Solution:   Flush the output. (closes #3496)
Files:	    src/ex_docmd.c

Patch 8.1.0443
Problem:    Unnecessary static function prototypes.
Solution:   Remove unnecessary prototypes.
Files:	    src/arabic.c, src/blowfish.c, src/buffer.c, src/charset.c,
            src/crypt_zip.c, src/digraph.c, src/edit.c, src/eval.c,
            src/evalfunc.c, src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c,
            src/ex_eval.c, src/ex_getln.c, src/fileio.c, src/getchar.c,
            src/gui.c, src/gui_at_fs.c, src/gui_athena.c, src/gui_gtk_x11.c,
            src/gui_mac.c, src/gui_motif.c, src/gui_photon.c, src/gui_w32.c,
            src/gui_x11.c, src/hangulin.c, src/hardcopy.c, src/if_cscope.c,
            src/if_mzsch.c, src/if_python3.c, src/if_xcmdsrv.c,
            src/integration.c, src/json.c, src/main.c, src/mbyte.c,
            src/memline.c, src/message.c, src/misc1.c, src/misc2.c,
            src/move.c, src/netbeans.c, src/normal.c, src/ops.c, src/option.c,
            src/os_unix.c, src/os_win32.c, src/pty.c, src/regexp.c,
            src/screen.c, src/search.c, src/sha256.c, src/spell.c,
            src/spellfile.c, src/syntax.c, src/tag.c, src/term.c, src/ui.c,
            src/undo.c, src/version.c, src/window.c, src/workshop.c

Patch 8.1.0444
Problem:    Unnecessary check for NULL pointer.
Solution:   Remove check and call vim_free() directly.
Files:	    src/beval.c

Patch 8.1.0445
Problem:    Setting <A HREF="options.html#'term'">'term'</A> does not store location for <A HREF="term.html#termcap">termcap</A> <A HREF="options.html#options">options</A>.
Solution:   Set the <A HREF="usr_41.html#script">script</A> context for <A HREF="term.html#termcap">termcap</A> <A HREF="options.html#options">options</A> that are changed when
            <A HREF="options.html#'term'">'term'</A> is set.
Files:	    src/option.c, src/proto/option.pro, src/term.c,
            src/testdir/test_options.vim

Patch 8.1.0446
Problem:    Options test fails in the <A HREF="gui.html#GUI">GUI</A>.
Solution:   Don't try <A HREF="change.html#changing">changing</A> <A HREF="options.html#'term'">'term'</A> in the <A HREF="gui.html#GUI">GUI</A>.
Files:	    src/testdir/test_options.vim

Patch 8.1.0447
Problem:    <A HREF="gui.html#GUI">GUI</A> scrollbar test fails with Athena and <A HREF="gui_x11.html#Motif">Motif</A>.
Solution:   When not using on-the-fly <A HREF="scroll.html#scrolling">scrolling</A> call normal_cmd().
Files:	    src/evalfunc.c, src/ex_docmd.c, src/proto/ex_docmd.pro

Patch 8.1.0448
Problem:    Cursorline not removed when using <A HREF="options.html#'cursorbind'">'cursorbind'</A>. (Justin Keyes)
Solution:   Store the last cursor line per <A HREF="windows.html#window">window</A>. (closes #3488)
Files:	    src/testdir/test_diffmode.vim,
            src/testdir/dumps/Test_diff_with_cursorline_01.dump,
            src/testdir/dumps/Test_diff_with_cursorline_02.dump,
            src/testdir/dumps/Test_diff_with_cursorline_03.dump,
            src/structs.h, src/move.c

Patch 8.1.0449
Problem:    When <A HREF="options.html#'rnu'">'rnu'</A> is set folded lines are not displayed correctly.
            (Vitaly Yashin)
Solution:   When only redrawing line numbers <A HREF="diff.html#do">do</A> draw folded lines.
            (closes #3484)
Files:	    src/screen.c, src/testdir/test_fold.vim,
            src/testdir/dumps/Test_folds_with_rnu_01.dump,
            src/testdir/dumps/Test_folds_with_rnu_02.dump

Patch 8.1.0450 (after patch 8.1.0449)
Problem:    Build failure without the +fold feature.
Solution:   Add #ifdef.
Files:	    src/screen.c

Patch 8.1.0451
Problem:    <A HREF="os_win32.html#Win32">Win32</A> console: keypad keys don't work.
Solution:   Use numbers instead of characters to avoid the value becoming
            negative. (Mike Williams)
Files:	    src/os_win32.c

Patch 8.1.0452
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: not finding intl.dll.
Solution:   Also find intl.dll next to libintl.dll. (Ken Takata)
Files:	    src/os_win32.c, runtime/doc/mlang.txt

Patch 8.1.0453
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="builtin.html#executable()">executable()</A> is not reliable.
Solution:   Use $PATHEXT properly. (Yasuhiro Matsumoto, closes #3512)
Files:	    src/os_win32.c, src/testdir/test_functions.vim

Patch 8.1.0454
Problem:    <A HREF="builtin.html#resolve()">resolve()</A> was not tested with a symlink cycle.
Solution:   Add a test. (Dominique Pelle, closes #3513)
Files:	    src/testdir/test_functions.vim

Patch 8.1.0455
Problem:    Checking for empty <A HREF="quickfix.html#quickfix">quickfix</A> stack is not consistent.
Solution:   Use qf_stack_empty(). (Yegappan Lakshmanan)
Files:	    src/quickfix.c

Patch 8.1.0456
Problem:    Running test hangs when the input file is being edited.
Solution:   Use a <A HREF="autocmd.html#SwapExists">SwapExists</A> <A HREF="autocmd.html#autocommand">autocommand</A> to ignore editing the test <A HREF="usr_41.html#script">script</A>.
Files:	    src/testdir/Makefile, src/testdir/runtest.vim

Patch 8.1.0457 (after 8.1.0451)
Problem:    <A HREF="os_win32.html#Win32">Win32</A> console: key mappings don't work.
Solution:   Use another solution for the keypad keys that doesn't break
            mappings. Some values will be negative. (Mike Williams)
Files:	    src/os_win32.c

Patch 8.1.0458
Problem:    Ml_get error and crash when using &quot;<A HREF="diff.html#do">do</A>&quot;.
Solution:   Adjust cursor position also when diffupdate is not needed.
            (Hirohito Higashi)
Files:	    src/diff.c, src/testdir/test_diffmode.vim

Patch 8.1.0459
Problem:    Test_executable fails when there is a dog in the system.
Solution:   Rename the dog. (Hirohito Higashi)
Files:	    src/testdir/test_functions.vim

Patch 8.1.0460
Problem:    <A HREF="testing.html#assert_fails()">assert_fails()</A> does not take a message argument
Solution:   Add the argument.
Files:	    src/evalfunc.c, src/eval.c, src/testdir/test_assert.vim

Patch 8.1.0461
Problem:    <A HREF="quickfix.html#Quickfix">Quickfix</A> code uses too many /* */ comments.
Solution:   Change to <A HREF="version7.html#//">//</A> comments. (Yegappan Lakshmanan)
Files:	    src/quickfix.c

Patch 8.1.0462
Problem:    When using <A HREF="terminal.html#ConPTY">ConPTY</A> Vim can be a child process.
Solution:   To find a Vim <A HREF="windows.html#window">window</A> use both EnumWindows() and
            EnumChildWindows(). (Nobuhiro Takasaki, closes #3521)
Files:	    src/os_mswin.c

Patch 8.1.0463
Problem:    &quot;simalt ~x&quot; in <A HREF="starting.html#.vimrc">.vimrc</A> blocks swap file prompt.
Solution:   Flush <A HREF="windows.html#buffers">buffers</A> before prompting. (Yasuhiro Matsumoto,
            closes #3518, closes #2192)
Files:	    src/memline.c

Patch 8.1.0464
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="channel.html#job_info()">job_info()</A> has cmd without backslashes. (Daniel
            Hahler)
Solution:   Use rem_backslash(). (closes #3517, closes #3404)  Add a test.
            (Yasuhiro Matsumoto)
Files:	    src/misc2.c, src/testdir/test_channel.vim

Patch 8.1.0465 (after 8.1.0452)
Problem:    Client-server test fails.
Solution:   Change logic in EnumWindows().
Files:	    src/os_mswin.c

Patch 8.1.0466 (after 8.1.0463)
Problem:    Autocmd test fails.
Solution:   Do call inchar() when flushing typeahead.
Files:	    src/vim.h, src/getchar.c, src/proto/getchar.pro, src/memline.c,
            src/message.c, src/misc1.c

Patch 8.1.0467 (after 8.1.0063)
Problem:    Cannot build with <A HREF="os_mac.html#Mac">Mac</A> OS X <A HREF="usr_10.html#10.5">10.5</A>.
Solution:   Change #ifdef into #if. (Akshay Hegde, closes #3022)
Files:	    src/os_macosx.m

Patch 8.1.0468
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: Filter command with pipe character fails. (Johannes
            Riecken)
Solution:   Find the pipe character outside of <A HREF="quotes.html#quotes">quotes</A>. (Yasuhiro Matsumoto,
            closes #1743, closes #3523)
Files:	    src/ex_cmds.c, src/testdir/test_filter_cmd.vim

Patch 8.1.0469
Problem:    Too often indexing in qf_lists[].
Solution:   Use a qf_list_T pointer. (Yegappan Lakshmanan)
Files:	    src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.0470
Problem:    Pointer ownership around fname_expand() is unclear.
Solution:   Allow b_ffname and b_sfname to point to the same allocated memory,
            only free one.  Update comments.
Files:	    src/buffer.c, src/structs.h, src/fileio.c, src/ex_cmds.c

Patch 8.1.0471
Problem:    Some tests are flaky or fail on some systems.
Solution:   Increase waiting time for port number. Use &quot;cmd /c&quot; to execute
            &quot;echo&quot; on <A HREF="os_win32.html#win32">win32</A>. (Ken Takata, closes #3534)
Files:	    src/testdir/shared.vim, src/testdir/test_channel.vim

Patch 8.1.0472
Problem:    Dosinst command has a few flaws.
Solution:   Register DisplayIcon, DisplayVersion and Publisher for the
            uninstaller. (closes #3485)  Don't set <A HREF="options.html#'diffexpr'">'diffexpr'</A> if internal <A HREF="diff.html#diff">diff</A>
            is supported. Allow for using <A HREF="intro.html#Vi">Vi</A> compatible from the command line.
            Remove needless sleeps.  Add comments in the generated <A HREF="starting.html#_vimrc">_vimrc</A>.
            (Ken Takata, closes #3525)
Files:	    src/dosinst.c

Patch 8.1.0473
Problem:    <A HREF="autocmd.html#User">User</A> doesn't notice file does not exist when swap file does.
Solution:   Add a note that the file cannot be found.  Make the &quot;still
            running&quot; notice stand out.
Files:	    src/memline.c

Patch 8.1.0474
Problem:    Directory where if_perl.c is written is inconsistent.
Solution:   use auto/if_perl.c for <A HREF="os_win32.html#MS-Windows">MS-Windows</A>. (Ken Takata, closes #3540)
Files:	    src/Make_bc5.mak, src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.1.0475
Problem:    Memory not freed on exit when quit in autocmd.
Solution:   Remember funccal stack when executing autocmd.
Files:	    src/structs.h, src/userfunc.c, src/proto/userfunc.pro,
            src/fileio.c, src/eval.c, src/ex_cmds2.c, src/main.c

Patch 8.1.0476
Problem:    Memory leaks in test_escaped_glob.
Solution:   Avoid failure when running the shell, use the <A HREF="eval.html#sandbox">sandbox</A>.
Files:	    src/testdir/test_escaped_glob.vim

Patch 8.1.0477 (after 8.1.0475)
Problem:    Tiny build fails.
Solution:   Add a dummy declaration for funccal_entry_T.
Files:	    src/structs.h

Patch 8.1.0478
Problem:    Cannot build with <A HREF="if_perl.html#perl">perl</A> using MinGW.
Solution:   Add -I. (Ken Takata, Cesar Romani)
Files:	    src/Make_cyg_ming.mak

Patch 8.1.0479
Problem:    Failure when setting <A HREF="options.html#'varsofttabstop'">'varsofttabstop'</A> to end in a comma. (Ralf
            Schandl)
Solution:   Reject value with trailing comma.  Add test for invalid values
            (closes #3544)
Files:	    src/testdir/test_vartabs.vim, src/option.c

Patch 8.1.0480
Problem:    MinGW build file uses different -I flags than MVC.
Solution:   Add -I to $CFLAGS. (Ken Takata)
Files:	    src/Make_cyg_ming.mak

Patch 8.1.0481
Problem:    When &quot;Terminal&quot; highlight is reverted cursor doesn't show.
Solution:   Get the colors of the &quot;Terminal&quot; group. (closes #3546)
Files:	    src/terminal.c

Patch 8.1.0482
Problem:    MinGW &quot;make clean&quot; deletes all .exe files.
Solution:   Only delete .exe files that <A HREF="motion.html#it">it</A> builds. (Ken Takata)
Files:	    src/Make_cyg_ming.mak

Patch 8.1.0483
Problem:    MinGW does not build tee.exe.
Solution:   Add build instructions. (Yasuhiro Matsumoto, closes #3548)
Files:	    src/Make_cyg_ming.mak, src/tee/Makefile

Patch 8.1.0484
Problem:    Some file types are not recognized.
Solution:   Update the file type detection.
Files:	    runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.1.0485
Problem:    <A HREF="terminal.html#term_start()">term_start()</A> does not check if directory is accessible.
Solution:   Add mch_access() call. (Jason Franklin)
Files:	    src/channel.c, src/testdir/test_terminal.vim

Patch 8.1.0486 (after 8.1.0485)
Problem:    Can't build in <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Put mch_access() call inside #ifdef
Files:	    src/channel.c

Patch 8.1.0487
Problem:    No <A HREF="gui.html#menus">menus</A> specifically for the <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Add <A HREF="gui.html#:tlmenu">:tlmenu</A>. (Yee Cheng Chin, closes #3439) Add a menu test.
Files:	    runtime/delmenu.vim, runtime/doc/autocmd.txt, runtime/doc/gui.txt,
            runtime/doc/index.txt, runtime/doc/terminal.txt,
            runtime/doc/usr_42.txt, runtime/menu.vim, src/ex_cmdidxs.h,
            src/ex_cmds.h, src/ex_docmd.c, src/menu.c, src/proto/menu.pro,
            src/popupmnu.c, src/structs.h, src/testdir/test_menu.vim

Patch 8.1.0488
Problem:    Using freed memory in <A HREF="quickfix.html#quickfix">quickfix</A> code. (Dominique Pelle)
Solution:   Add the quickfix_busy() flag to postpone <A HREF="change.html#deleting">deleting</A> <A HREF="quickfix.html#quickfix">quickfix</A> lists
            until <A HREF="motion.html#it">it</A> is safe. (Yegappan Lakshmanan, closes #3538)
Files:	    src/quickfix.c, src/proto/quickfix.pro, src/misc2.c,
            src/testdir/test_quickfix.vim

Patch 8.1.0489
Problem:    Crash when autocmd clears vimpgrep location <A HREF="eval.html#list">list</A>.
Solution:   Return from qf_jump_edit_buffer() early. (Yegappan Lakshmanan)
Files:	    src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.0490
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: doesn't handle missing libwinpthread-1.dll.
Solution:   Adjust Cygwin/MinGW build file. (Ken Takata, closes #2827)
Files:	    src/Make_cyg_ming.mak

Patch 8.1.0491
Problem:    If a <A HREF="terminal.html#terminal">terminal</A> dump has CR <A HREF="motion.html#it">it</A> is considered corrupt.
Solution:   Ignore CR characters. (Nobuhiro Takasaki, closes #3558)
Files:	    src/terminal.c

Patch 8.1.0492
Problem:    &quot;Edit with existing Vim&quot; <A HREF="eval.html#list">list</A> can get long.
Solution:   Move the <A HREF="eval.html#list">list</A> to a submenu. (Ken Takata, closes #3561)
Files:	    src/GvimExt/gvimext.cpp

Patch 8.1.0493
Problem:    <A HREF="builtin.html#argv()">argv()</A> and <A HREF="builtin.html#argc()">argc()</A> only work on the current argument <A HREF="eval.html#list">list</A>.
Solution:   Add a <A HREF="windows.html#window">window</A> ID argument. (Yegappan Lakshmanan, closes #832)
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_arglist.vim,
            src/eval.c, src/proto/eval.pro

Patch 8.1.0494
Problem:    Functions <A HREF="diff.html#do">do</A> not check for a <A HREF="windows.html#window">window</A> ID in other tabs.
Solution:   Also find the <A HREF="windows.html#window">window</A> ID in other than the current <A HREF="intro.html#tab">tab</A>.
Files:	    src/evalfunc.c

Patch 8.1.0495
Problem:    <A HREF="various.html#:filter">:filter</A> only supports some commands.
Solution:   Add <A HREF="various.html#:filter">:filter</A> support for more commands. (Marcin Szamotulski,
            closes #2856)
Files:	    runtime/doc/various.txt, src/eval.c, src/mark.c, src/option.c,
            src/syntax.c, src/testdir/test_filter_cmd.vim, src/userfunc.c

Patch 8.1.0496
Problem:    No tests for indent files.
Solution:   Add a mechanism for running indent file tests.  Add a first test
            for Vim indenting.
Files:	    runtime/indent/Makefile, runtime/indent/testdir/runtest.vim,
            runtime/indent/testdir/cleantest.vim, runtime/indent/README.txt,
            runtime/indent/testdir/README.txt, runtime/indent/testdir/vim.in,
            runtime/indent/testdir/vim.ok, Filelist

Patch 8.1.0497
Problem:    :&#37;diffput changes order of lines. (Markus Braun)
Solution:   Do adjust marks when using internal <A HREF="diff.html#diff">diff</A>.
Files:	    src/diff.c, src/testdir/test_diffmode.vim

Patch 8.1.0498
Problem:    /etc/gitconfig not recognized at a gitconfig file.
Solution:   Add <A HREF="pattern.html#pattern">pattern</A> to <A HREF="filetype.html#filetype">filetype</A> detection. (closes #3568)
Files:	    runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.1.0499
Problem:    :2vimgrep causes an ml_get error
Solution:   Pass tomatch pointer instead of value. (Yegappan Lakshmanan)
Files:	    src/ex_getln.c, src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.0500
Problem:    Cleaning up in src/tee may not always work.
Solution:   Use &quot;rm&quot; when appropriate. (Michael Soyka, closes #3571)
Files:	    src/tee/Makefile

Patch 8.1.0501
Problem:    Cppcheck warns for using array index before bounds check.
Solution:   Swap the conditions. (Dominique Pelle)
Files:	    src/memline.c

Patch 8.1.0502
Problem:    Internal <A HREF="diff.html#diff">diff</A> fails when diffing a context <A HREF="diff.html#diff">diff</A>. (Hirohito Higashi)
Solution:   Only use callback calls with one line. (closes #3581)
Files:	    src/diff.c, src/testdir/dumps/test_diff_of_diff_01.dump

Patch 8.1.0503
Problem:    Missing change to <A HREF="diff.html#diff">diff</A> test. (Hirohito Higashi)
Solution:   Add the missing test function.
Files:	    src/testdir/test_diffmode.vim

Patch 8.1.0504
Problem:    When <A HREF="pattern.html#CTRL-C">CTRL-C</A> is mapped <A HREF="motion.html#it">it</A> triggers <A HREF="autocmd.html#InsertLeave">InsertLeave</A>.
Solution:   Make <A HREF="pattern.html#CTRL-C">CTRL-C</A> behave the same way when typed or used in a <A HREF="map.html#mapping">mapping</A>.
Files:	    src/edit.c, src/testdir/test_edit.vim

Patch 8.1.0505
Problem:    Filter command test may fail if helplang is not set.
Solution:   Set <A HREF="options.html#'helplang'">'helplang'</A> for the test. (James McCoy, closes #3591)
Files:	    src/testdir/test_filter_cmd.vim

Patch 8.1.0506
Problem:    Modeline test fails when run by root.
Solution:   Set <A HREF="options.html#'modeline'">'modeline'</A> for the test. (James McCoy, closes #3592)
Files:	    src/testdir/test_modeline.vim

Patch 8.1.0507
Problem:    .raml files not properly detected.
Solution:   Recognize .raml <A HREF="motion.html#as">as</A> raml instead of yaml. (closes #3594)
Files:	    runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.1.0508
Problem:    Suspend test fails when run by root.
Solution:   Accept both '<A HREF="motion.html#$">$</A>' and '<A HREF="pattern.html##">#</A>' for the prompt. (James McCoy, closes #3590)
Files:	    src/testdir/test_suspend.vim

Patch 8.1.0509
Problem:    Checking cwd not accessible fails for root. (James McCoy)
Solution:   Skip this part of the test for root. (closes #3595)
Files:	    src/testdir/test_terminal.vim

Patch 8.1.0510
Problem:    Filter test fails when $LANG is C.UTF-8.
Solution:   Set <A HREF="options.html#'helplang'">'helplang'</A> to &quot;en&quot; for any C language. (Christian Brabandt,
            closes #3577)
Files:	    src/option.c

Patch 8.1.0511
Problem:    ml_get error when calling a function with a range.
Solution:   Don't position the cursor after the last line.
Files:	    src/userfunc.c, src/testdir/test_functions.vim

Patch 8.1.0512
Problem:    <A HREF="options.html#'helplang'">'helplang'</A> default is inconsistent for C and C.UTF-8.
Solution:   Don't accept a value unless <A HREF="motion.html#it">it</A> starts with two letters.
Files:	    src/ex_cmds2.c

Patch 8.1.0513
Problem:    No error for set diffopt+=algorithm:.
Solution:   Check for missing argument. (Hirohito Higashi, closes #3598)
Files:	    src/diff.c, src/testdir/gen_opt_test.vim

Patch 8.1.0514
Problem:    <A HREF="index.html#CTRL-W">CTRL-W</A> ^ does not work when alternate buffer has no name.
Solution:   Use another <A HREF="eval.html#method">method</A> to split and edit the alternate buffer. (Jason
            Franklin)
Files:	    src/testdir/test_normal.vim, src/testdir/test_window_cmd.vim,
            src/normal.c, src/window.c, runtime/doc/windows.txt

Patch 8.1.0515
Problem:    Reloading a <A HREF="usr_41.html#script">script</A> gives <A HREF="message.html#errors">errors</A> for existing <A HREF="eval.html#functions">functions</A>.
Solution:   Allow redefining a function once when reloading a <A HREF="usr_41.html#script">script</A>.
Files:	    src/testdir/test_functions.vim, src/userfunc.c, src/structs.h,
            src/globals.h, src/buffer.c, src/ex_cmds2.c, src/main.c,
            src/option.c, runtime/doc/eval.txt

Patch 8.1.0516
Problem:    <A HREF="change.html#:move">:move</A> command marks buffer modified when nothing changed.
Solution:   Do not set <A HREF="options.html#'modified'">'modified'</A>.  Add a test. (Jason Franklin)
Files:	    src/Make_all.mak, src/testdir/test_alot.vim,
            src/testdir/test_move.vim, src/ex_cmds.c

Patch 8.1.0517
Problem:    Test_window_split_edit_alternate() fails on AppVeyor.
Solution:   Disable the failing part for now.
Files:	    src/testdir/test_window_cmd.vim

Patch 8.1.0518
Problem:    Test_window_split_edit_bufnr() fails on AppVeyor.
Solution:   Disable the failing part for now.
Files:	    src/testdir/test_window_cmd.vim

Patch 8.1.0519
Problem:    Cannot save and restore the <A HREF="tagsrch.html#tag">tag</A> stack.
Solution:   Add <A HREF="builtin.html#gettagstack()">gettagstack()</A> and <A HREF="builtin.html#settagstack()">settagstack()</A>. (Yegappan Lakshmanan,
            closes #3604)
Files:	    runtime/doc/eval.txt, runtime/doc/tagsrch.txt,
            runtime/doc/usr_41.txt, src/alloc.h, src/dict.c, src/evalfunc.c,
            src/list.c, src/misc2.c, src/proto/dict.pro, src/proto/list.pro,
            src/proto/misc2.pro, src/proto/tag.pro, src/tag.c,
            src/testdir/test_tagjump.vim

Patch 8.1.0520
Problem:    Screen <A HREF="diff.html#diff">diff</A> test sometimes fails.
Solution:   Add to <A HREF="eval.html#list">list</A> of flaky tests.
Files:	    src/testdir/runtest.vim

Patch 8.1.0521
Problem:    Cannot build with <A HREF="various.html#+eval">+eval</A> but without <A HREF="various.html#+quickfix">+quickfix</A>.
Solution:   Remove #ifdef for e_stringreq. (John Marriott)
Files:	    src/evalfunc.c

Patch 8.1.0522
Problem:    <A HREF="terminal.html#:terminal">:terminal</A> does not show trailing empty lines.
Solution:   Add empty lines. (Hirohito Higashi, closes #3605)
Files:	    src/terminal.c, src/testdir/test_terminal.vim

Patch 8.1.0523
Problem:    Opening <A HREF="windows.html#window">window</A> from <A HREF="quickfix.html#quickfix">quickfix</A> leaves empty buffer behind.
Solution:   Add qf_jump_newwin(). (Yegappan Lakshmanan, closes #2574)
Files:	    src/proto/quickfix.pro, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.1.0524 (after 8.1.0522)
Problem:    Terminal test fails on Windows.
Solution:   Skip Test_terminal_does_not_truncate_last_newlines() for now.
Files:	    src/testdir/test_terminal.vim

Patch 8.1.0525 (after 8.1.0524)
Problem:    Terminal test skips part on Windows.
Solution:   Fix Test_terminal_does_not_truncate_last_newlines(). (Hirohito
            Higashi, closes #3606)
Files:	    src/Make_mvc.mak, src/testdir/test_terminal.vim

Patch 8.1.0526
Problem:    Running out of signal stack in RealWaitForChar. (Vladimir Marek)
Solution:   Make the fd_set <A HREF="eval.html#variables">variables</A> static.
Files:	    src/os_unix.c

Patch 8.1.0527
Problem:    Using <A HREF="options.html#'shiftwidth'">'shiftwidth'</A> from wrong buffer for <A HREF="fold.html#folding">folding</A>.
Solution:   Use &quot;buf&quot; instead of &quot;curbuf&quot;. (Christian Brabandt)
Files:	    src/fold.c

Patch 8.1.0528
Problem:    Various typos in comments.
Solution:   Fix the typos.
Files:	    src/fileio.c, src/gui.c, src/macros.h, src/screen.c, src/search.c,
            src/spell.c, src/spellfile.c, src/vim.h, src/testdir/README.txt,
            src/INSTALL, src/gui_athena.c, src/gui_gtk.c, src/gui_gtk_x11.c,
            src/gui_motif.c, src/gui_xmebw.c, src/if_tcl.c, src/os_amiga.c,
            src/gui_w32.c, src/os_win32.c, src/gui_mac.c, src/os_vms_fix.com

Patch 8.1.0529
Problem:    Flaky test sometimes fails in different ways.
Solution:   When the second run gives a different error, try running the test
            again, up to five times.
Files:	    src/testdir/runtest.vim

Patch 8.1.0530
Problem:    <A HREF="eval.html#Channel">Channel</A> and <A HREF="terminal.html#terminal">terminal</A> tests that start a server can be flaky.
Solution:   Add all <A HREF="channel.html#channel">channel</A> and <A HREF="terminal.html#terminal">terminal</A> tests that start a server to the <A HREF="eval.html#list">list</A>
            of flaky tests.
Files:	    src/testdir/runtest.vim

Patch 8.1.0531
Problem:    Flaky tests often fail with a common error message.
Solution:   Add a <A HREF="pattern.html#pattern">pattern</A> to match an error message indicating a flaky test.
Files:	    src/testdir/runtest.vim

Patch 8.1.0532
Problem:    Cannot distinguish between <A HREF="quickfix.html#quickfix">quickfix</A> and location <A HREF="eval.html#list">list</A>.
Solution:   Add an explicit type variable. (Yegappan Lakshmanan)
Files:	    src/quickfix.c

Patch 8.1.0533
Problem:    Screendump tests can be flaky.
Solution:   Add VerifyScreenDump to the <A HREF="pattern.html#pattern">pattern</A> of flaky tests.
Files:	    src/testdir/runtest.vim

Patch 8.1.0534
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> installer uses different <A HREF="options.html#$HOME">$HOME</A> than Vim.
Solution:   Use the Vim logic also in the <A HREF="os_win32.html#MS-Windows">MS-Windows</A> installer. (Ken Takata,
            closes #3564)
Files:	    src/dosinst.c, src/misc1.c

Patch 8.1.0535
Problem:    Increment/decrement might get interrupted by updating <A HREF="fold.html#folds">folds</A>.
Solution:   Disable fold updating for a moment. (Christian Brabandt,
            closes #3599)
Files:	    src/ops.c

Patch 8.1.0536
Problem:    File time test fails when using NFS.
Solution:   Use three file times instead of localtim(). (James McCoy,
            closes #3618)
Files:	    src/testdir/test_stat.vim

Patch 8.1.0537
Problem:    ui_breakcheck() may be called recursively, which doesn't work.
Solution:   When called recursively, just return. (James McCoy, closes #3617)
Files:	    src/ui.c

Patch 8.1.0538
Problem:    Evaluating a <A HREF="options.html#modeline">modeline</A> might invoke using a shell command. (Paul
            Huber)
Solution:   Set the <A HREF="eval.html#sandbox">sandbox</A> flag when setting <A HREF="options.html#options">options</A> from a <A HREF="options.html#modeline">modeline</A>.
Files:	    src/buffer.c

Patch 8.1.0539
Problem:    Cannot build without the <A HREF="eval.html#sandbox">sandbox</A>.
Solution:   Set the secure option instead of using the <A HREF="eval.html#sandbox">sandbox</A>.  Also restrict
            the characters from <A HREF="options.html#'spelllang'">'spelllang'</A> that are used for LANG.vim.
            (suggested by Yasuhiro Matsumoto)
Files:	    runtime/doc/options.txt, src/buffer.c, src/option.c

Patch 8.1.0540
Problem:    May evaluate insecure value when appending to option.
Solution:   Set the secure flag when <A HREF="change.html#changing">changing</A> an option that was previously
            set insecurely.  Also allow numbers for the characters from
            <A HREF="options.html#'spelllang'">'spelllang'</A> that are used for LANG.vim. (closes #3623)
Files:	    src/option.c

Patch 8.1.0541
Problem:    Help message in dosinst.c is outdated.
Solution:   Update the comment. (Ken Takata, closes #3626)
Files:	    src/dosinst.c

Patch 8.1.0542
Problem:    <A HREF="builtin.html#shiftwidth()">shiftwidth()</A> does not take <A HREF="options.html#'vartabstop'">'vartabstop'</A> into account.
Solution:   Use the cursor position or a position explicitly passed.
            Also make <A HREF="change.html#&gt;&gt;">&gt;&gt;</A> and <A HREF="change.html#&lt;&lt;">&lt;&lt;</A> work better with <A HREF="options.html#'vartabstop'">'vartabstop'</A>. (Christian
            Brabandt)
Files:	    runtime/doc/change.txt, runtime/doc/eval.txt, src/edit.c,
            src/evalfunc.c, src/normal.c, src/ops.c, src/option.c,
            src/proto/edit.pro, src/proto/option.pro,
            src/testdir/test_vartabs.vim

Patch 8.1.0543
Problem:    Coverity warns for leaking memory and using wrong struct.
Solution:   Free pointer when allocation fails. Change &quot;boff&quot; to &quot;loff&quot;.
            (closes #3634)
Files:	    src/ex_getln.c, src/move.c

Patch 8.1.0544 (after 8.1.0540)
Problem:    Setting <A HREF="options.html#'filetype'">'filetype'</A> in a <A HREF="options.html#modeline">modeline</A> causes an error (Hirohito
            Higashi).
Solution:   Don't add the P_INSECURE flag when setting <A HREF="options.html#'filetype'">'filetype'</A> from a
            <A HREF="options.html#modeline">modeline</A>.  Also for <A HREF="options.html#'syntax'">'syntax'</A>.
Files:	    src/option.c, src/testdir/test_modeline.vim

Patch 8.1.0545
Problem:    When executing indent tests user preferences interfere.
Solution:   Add &quot;<A HREF="starting.html#--clean">--clean</A>&quot;.
Files:	    runtime/indent/Makefile, runtime/indent/testdir/runtest.vim

Patch 8.1.0546
Problem:    Modeline test with keymap fails.
Solution:   Check that the keymap feature is available.
Files:	    src/testdir/test_modeline.vim

Patch 8.1.0547
Problem:    Modeline test with keymap still fails.
Solution:   Check that the keymap feature is available for the failure assert.
Files:	    src/testdir/test_modeline.vim

Patch 8.1.0548
Problem:    Crash when <A HREF="channel.html#job">job</A> callback unloads a buffer. (James McCoy)
Solution:   Don't round up the wait time to 10 msec in ui_inchar().
Files:	    src/ui.c

Patch 8.1.0549
Problem:    Netbeans test depends on README.txt contents.
Solution:   Use a generated file instead.
Files:	    src/testdir/test_netbeans.vim, src/testdir/test_netbeans.py

Patch 8.1.0550
Problem:    Expression evaluation may repeat an error message. (Jason
            Franklin)
Solution:   Increment did_emsg and check for the value when giving an error
            for the echo command.
Files:	    src/message.c, src/eval.c, src/testdir/test108.ok

Patch 8.1.0551 (after 8.1.0550)
Problem:    Expression evaluation may repeat an error message. (Jason
            Franklin)
Solution:   Check for the value of did_emsg when giving an error
            for the <A HREF="eval.html#:execute">:execute</A> command.
Files:	    src/eval.c

Patch 8.1.0552
Problem:    Saved last search <A HREF="pattern.html#pattern">pattern</A> may not be restored.
Solution:   Call restore_last_search_pattern().  Add a check for balancing
            saving and restoring the last search <A HREF="pattern.html#pattern">pattern</A>.
Files:	    src/ex_getln.c, src/search.c

Patch 8.1.0553
Problem:    It is not <A HREF="starting.html#easy">easy</A> to edit a <A HREF="usr_41.html#script">script</A> that was sourced.
Solution:   Add a <A HREF="intro.html#count">count</A> to &quot;<A HREF="repeat.html#:scriptnames">:scriptnames</A>&quot;, so that &quot;<A HREF="repeat.html#:script">:script</A> 40&quot; edits the
            <A HREF="usr_41.html#script">script</A> with <A HREF="usr_41.html#script">script</A> ID 40.
Files:	    src/ex_cmds.h, src/ex_cmds2.c, src/testdir/test_scriptnames.vim,
            src/Make_all.mak, src/testdir/Make_all.mak, runtime/doc/repeat.txt

Patch 8.1.0554
Problem:    Popup menu overlaps with preview <A HREF="windows.html#window">window</A>.
Solution:   Adjust the height computation. (Hirohito Higashi, closes #3414)
Files:	    src/popupmnu.c, src/testdir/test_popup.vim,
            src/testdir/dumps/Test_popup_and_previewwindow_01.dump

Patch 8.1.0555
Problem:    Crash when last search pat is set but not last substitute pat.
Solution:   Do not mix up last search <A HREF="pattern.html#pattern">pattern</A> and last substitute <A HREF="pattern.html#pattern">pattern</A>.
            (closes #3647)
Files:	    src/search.c, src/testdir/test_search.vim

Patch 8.1.0556
Problem:    Saving/restoring search patterns share saved last_idx.
Solution:   Use a separate saved last_idx for saving search patterns for
            <A HREF="eval.html#functions">functions</A> and incremental search.
Files:	    src/search.c

Patch 8.1.0557
Problem:    Termdebug: <A HREF="debug.html#gdb">gdb</A> may use X.Y for breakpoint number. (Ryou Ezoe)
Solution:   Handle X.Y breakpoint numbers. (Yasuhiro Matsumoto, close #3641)
Files:	    runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.0558
Problem:    Some <A HREF="os_win32.html#MS-Windows">MS-Windows</A> instructions are outdated.
Solution:   Update the uninstall instructions and the NSIS README. (Ken
            Takata, closes #3614)  Also update remark about diff.exe.
Files:	    nsis/README.txt, uninstal.txt

Patch 8.1.0559
Problem:    Command line completion not sufficiently tested.
Solution:   Add more tests. (Dominique Pelle, closes #3622)
Files:	    src/testdir/test_arglist.vim, src/testdir/test_filetype.vim,
            src/testdir/test_history.vim, src/testdir/test_messages.vim,
            src/testdir/test_syntax.vim

Patch 8.1.0560
Problem:    Cannot use address type &quot;other&quot; with user command.
Solution:   Add &quot;other&quot; to the <A HREF="eval.html#list">list</A>. (Daniel Hahler, closes #3655)  Also
            reject &quot;<A HREF="motion.html#&#37;">&#37;</A>&quot; for commands with &quot;other&quot;.  Add some more tests.
Files:	    src/ex_docmd.c, src/testdir/test_usercommands.vim

Patch 8.1.0561
Problem:    MSVC error format has changed.
Solution:   Make the space between the line number and colon optional.
Files:	    src/option.h

Patch 8.1.0562
Problem:    Parsing of <A HREF="options.html#'diffopt'">'diffopt'</A> is slightly wrong.
Solution:   Fix the parsing and add a test. (Jason Franklin, Christian
            Brabandt)
Files:	    src/diff.c, src/testdir/test_diffmode.vim,
            src/testdir/dumps/Test_diff_09.dump,
            src/testdir/dumps/Test_diff_11.dump, src/testdir/screendump.vim

Patch 8.1.0563
Problem:    Setting <A HREF="eval.html#v:errors">v:errors</A> to a <A HREF="eval.html#string">string</A> give confusing error. (Christian
            Brabandt)
Solution:   Change internal error into normal error message.
Files:	    src/eval.c

Patch 8.1.0564
Problem:    Setting <A HREF="eval.html#v:errors">v:errors</A> to wrong type still possible.
Solution:   Return after giving an error message. (Christian Brabandt)
Files:	    src/eval.c, src/testdir/test_eval_stuff.vim

Patch 8.1.0565
Problem:    Asan complains about reading before allocated block.
Solution:   Workaround: Avoid offset from becoming negative.
Files:	    src/gui.c

Patch 8.1.0566
Problem:    SGR not enabled for mintty because $TERM is &quot;xterm&quot;.
Solution:   Detect mintty by the termresponse. (Ken Takata, closes #3667)
Files:	    src/term.c

Patch 8.1.0567 (after 8.1.0565)
Problem:    Error for NUL byte in ScreenLines goes unnoticed.
Solution:   Add an internal error message.
Files:	    src/gui.c

Patch 8.1.0568 (after 8.1.0567)
Problem:    Error message for NUL byte in ScreenLines breaks Travis CI.
Solution:   Use a normal message fornow.
Files:	    src/gui.c

Patch 8.1.0569
Problem:    Execute() always resets display column to zero. (Sha Liu)
Solution:   Don't reset <A HREF="motion.html#it">it</A> to zero, restore the previous value. (closes #3669)
Files:	    src/evalfunc.c, src/testdir/test_execute_func.vim

Patch 8.1.0570
Problem:    <A HREF="options.html#'commentstring'">'commentstring'</A> not used when adding fold marker. (Maxim Kim)
Solution:   Only use empty <A HREF="options.html#'comments'">'comments'</A> middle when leader is empty. (Christian
            Brabandt, closes #3670)
Files:	    src/misc1.c, src/testdir/test_fold.vim

Patch 8.1.0571 (after 8.1.0569)
Problem:    Non-silent <A HREF="builtin.html#execute()">execute()</A> resets display column to zero.
Solution:   Keep the display column as-is.
Files:	    src/evalfunc.c, src/testdir/test_execute_func.vim

Patch 8.1.0572
Problem:    Stopping a <A HREF="channel.html#job">job</A> does not work properly on OpenBSD.
Solution:   Do not use getpgid() to check the process group of the <A HREF="channel.html#job">job</A>
            process ID, always pass the negative process ID to kill().
            (George Koehler, closes #3656)
Files:	    src/os_unix.c

Patch 8.1.0573
Problem:    Cannot redefine user command without ! in same <A HREF="usr_41.html#script">script</A>
Solution:   Allow redefining user command without ! in same <A HREF="usr_41.html#script">script</A>, like with
            <A HREF="eval.html#functions">functions</A>.
Files:	    src/ex_docmd.c, src/testdir/test_usercommands.vim,
            runtime/doc/map.txt

Patch 8.1.0574
Problem:    <A HREF="options.html#'commentstring'">'commentstring'</A> not used when adding fold marker in C.
Solution:   Require white space before middle comment part. (mostly by
            Hirohito Higashi)
Files:	    src/misc1.c, src/testdir/test_fold.vim

Patch 8.1.0575
Problem:    Termdebug: clearing multi-breakpoint does not work.
Solution:   Delete all X.Y breakpoints.  Keep more information about placed
            breakpoints. (Ozaki Kiichi, closes #3641)
Files:	    runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.0576
Problem:    Indent <A HREF="usr_41.html#script">script</A> tests pick up installed scripts.
Solution:   Use current runtime indent scripts.
Files:	    runtime/indent/Makefile

Patch 8.1.0577
Problem:    Tabpage right-click menu never shows &quot;Close tab&quot;.
Solution:   Always create the &quot;Close tab&quot; item but ignore the event if there
            is only one <A HREF="intro.html#tab">tab</A>.
Files:	    src/gui_gtk_x11.c, src/gui_mac.c, src/gui_motif.c, src/gui.c

Patch 8.1.0578
Problem:    Cannot disable arabic, rightleft and <A HREF="farsi.html#farsi">farsi</A> in configure.
Solution:   Add configure flags. (Diego Fernando Carrin, closes #1867)
Files:	    src/configure.ac, src/auto/configure, src/config.h.in,
            src/feature.h, src/Makefile

Patch 8.1.0579
Problem:    Cannot attach properties to text.
Solution:   First part of adding text properties.
Files:	    Filelist, runtime/doc/Makefile, runtime/doc/eval.txt,
            runtime/doc/textprop.txt, src/Make_all.mak, src/Make_cyg_ming.mak,
            src/Make_mvc.mak, src/Makefile, src/buffer.c, src/edit.c,
            src/evalfunc.c, src/feature.h, src/memline.c, src/misc1.c,
            src/misc2.c, src/proto.h, src/proto/memline.pro,
            src/proto/textprop.pro, src/screen.c, src/structs.h,
            src/testdir/Make_all.mak, src/testdir/test_textprop.vim,
            src/textprop.c, src/userfunc.c, src/version.c

Patch 8.1.0580
Problem:    Invalid memory access when using text properties.
Solution:   Disable text properties for now.
Files:	    src/feature.h

Patch 8.1.0581
Problem:    Double free without the text properties feature.
Solution:   Reset the dirty flag.
Files:	    src/memline.c

Patch 8.1.0582
Problem:    Text properties are not enabled.
Solution:   Fix sizeof argument and re-enable the text properties feature.
            Fix memory leak.
Files:	    src/feature.h, src/textprop.c

Patch 8.1.0583
Problem:    Using illogical name for get_dict_number()/get_dict_string().
Solution:   Rename to start with dict_.
Files:	    src/dict.c, src/proto/dict.pro, src/edit.c, src/eval.c,
            src/evalfunc.c, src/quickfix.c, src/tag.c, src/terminal.c,
            src/textprop.c

Patch 8.1.0584
Problem:    With search <A HREF="various.html#CTRL-L">CTRL-L</A> does not pick up composing characters.
Solution:   Check for composing characters. (Christian Brabandt, closes #3682)
            [code change was accidentally included in 8.1.0579]
Files:	    src/testdir/test_search.vim

Patch 8.1.0585
Problem:    Undo test may fail on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Also handle lower <A HREF="change.html#case">case</A> drive letters.
Files:	    src/testdir/test_undo.vim

Patch 8.1.0586
Problem:    :digraph output is not <A HREF="starting.html#easy">easy</A> to read.
Solution:   Add highlighting for <A HREF="digraph.html#:digraphs">:digraphs</A>. (Marcin Szamotulski, closes #3572)
            Also add section headers for :digraphs!.
Files:	    src/ex_docmd.c, src/digraph.c, src/proto/digraph.pro,
            src/ex_cmds.h, runtime/doc/digraph.txt

Patch 8.1.0587
Problem:    GvimExt: realloc() failing is not handled properly.
Solution:   Check for NULL return. (Jan-Jaap Korpershoek, closes #3689)
Files:	    src/GvimExt/gvimext.cpp

Patch 8.1.0588
Problem:    Cannot define a sign with space in the text.
Solution:   Allow for escaping characters. (Ben Jackson, closes #2967)
Files:	    src/ex_cmds.c, src/testdir/test_signs.vim

Patch 8.1.0589
Problem:    Compilation error in gvimext.cpp.
Solution:   Return a value.  Also fix using uninitialized variable.
Files:	    src/GvimExt/gvimext.cpp, src/dosinst.c

Patch 8.1.0590
Problem:    When a <A HREF="channel.html#job">job</A> ends the closed channels are not handled.
Solution:   When a <A HREF="channel.html#job">job</A> is detected to have ended, check the channels again.
            (closes #3530)
Files:	    src/channel.c, src/proto/channel.pro, src/misc2.c

Patch 8.1.0591
Problem:    <A HREF="eval.html#Channel">Channel</A> sort test is flaky.
Solution:   Do not check if the <A HREF="channel.html#job">job</A> is running, <A HREF="motion.html#it">it</A> may have be done very fast.
Files:	    src/testdir/test_channel.vim

Patch 8.1.0592
Problem:    The libvterm tests are not run <A HREF="motion.html#as">as</A> part of Vim tests.
Solution:   Add <A HREF="testing.html#testing">testing</A> libvterm.
Files:	    src/Makefile, src/libvterm/Makefile

Patch 8.1.0593
Problem:    Illegal memory access in libvterm test.
Solution:   Fix off-by-one error.
Files:	    src/libvterm/src/vterm.c, src/libvterm/Makefile,
            src/libvterm/t/run-test.pl

Patch 8.1.0594
Problem:    Libvterm tests fail to run on <A HREF="os_mac.html#Mac">Mac</A>.
Solution:   Only run libvterm tests on Linux.
Files:	    src/Makefile

Patch 8.1.0595
Problem:    Libvterm tests are not run with coverage.
Solution:   Adjust the Travis config.  Show the actually run commands.
Files:	    .travis.yml, src/libvterm/Makefile

Patch 8.1.0596
Problem:    Not all parts of <A HREF="builtin.html#printf()">printf()</A> are tested.
Solution:   Add a few more test cases. (Dominique Pelle, closes #3691)
Files:	    src/testdir/test_expr.vim

Patch 8.1.0597
Problem:    Cannot run test_libvterm from the top directory.
Solution:   Add test target in toplevel Makefile.
Files:	    Makefile

Patch 8.1.0598
Problem:    Indent tests may use the wrong Vim binary.
Solution:   Pass in the just built Vim binary.
Files:	    Makefile

Patch 8.1.0599
Problem:    Without the <A HREF="various.html#+eval">+eval</A> feature the indent tests don't work.
Solution:   Skip the body of the tests.
Files:	    runtime/indent/testdir/cleantest.vim,
            runtime/indent/testdir/runtest.vim

Patch 8.1.0600
Problem:    <A HREF="eval.html#Channel">Channel</A> test is flaky.
Solution:   Add test to <A HREF="eval.html#list">list</A> of flaky tests.
Files:	    src/testdir/runtest.vim

Patch 8.1.0601
Problem:    A few compiler warnings.
Solution:   Add type casts. (Mike Williams)
Files:	    src/GvimExt/gvimext.cpp, src/memline.c, src/textprop.c

Patch 8.1.0602
Problem:    <A HREF="autocmd.html#DirChanged">DirChanged</A> is also triggered when the directory didn't change.
            (Daniel Hahler)
Solution:   Compare the current with the new directory. (closes #3697)
Files:	    src/ex_docmd.c, src/testdir/test_autocmd.vim, src/misc2.c,
            src/testdir/test_autochdir.vim

Patch 8.1.0603
Problem:    The <A HREF="starting.html#:stop">:stop</A> command is not tested.
Solution:   Test <A HREF="starting.html#:stop">:stop</A> using a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Files:	    src/testdir/test_terminal.vim, src/testdir/shared.vim

Patch 8.1.0604
Problem:    Autocommand test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Use pathcmp() instead of strcmp() to check if a directory differs.
Files:	    src/ex_docmd.c, src/misc2.c

Patch 8.1.0605
Problem:    Running make in the top directory echoes a comment.
Solution:   Prefix with @. (closes #3698)
Files:	    Makefile

Patch 8.1.0606
Problem:    <A HREF="options.html#'cryptmethod'">'cryptmethod'</A> defaults to a very old <A HREF="eval.html#method">method</A>.
Solution:   Default to &quot;<A HREF="options.html#blowfish2">blowfish2</A>&quot;, <A HREF="motion.html#it">it</A> is now widely available.
Files:	    src/option.c, runtime/doc/options.txt

Patch 8.1.0607
Problem:    Proto files are not in sync with the source code.
Solution:   Update the proto files.
Files:	    src/os_mswin.c, src/proto/buffer.pro, src/proto/ex_cmds.pro,
            src/proto/ex_getln.pro, src/proto/misc2.pro,
            src/proto/userfunc.pro

Patch 8.1.0608
Problem:    Coveralls is not updating.
Solution:   Adjust path in Travis config.
Files:	    .travis.yml

Patch 8.1.0609
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: unused variable, depending on the <A HREF="if_ruby.html#Ruby">Ruby</A> version.
Solution:   Put ruby_sysinit and NtInitialize inside #ifdef and make them
            consistent. (Ken Takata)
Files:	    src/if_ruby.c

Patch 8.1.0610
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> <A HREF="tagsrch.html#ctags">ctags</A> file <A HREF="eval.html#list">list</A> differs from <A HREF="os_unix.html#Unix">Unix</A>.
Solution:   Define TAGS_FILES in the common makefile. (partly by Ken Takata)
Files:	    src/Make_all.mak, src/Makefile, src/Make_mvc.mak,
            src/Make_cyg_ming.mak

Patch 8.1.0611
Problem:    Crash when using <A HREF="terminal.html#terminal">terminal</A> with long composing characters.
Solution:   Make space for all characters. (Yasuhiro Matsumoto, closes #3619,
            closes #3703)
Files:	    src/terminal.c

Patch 8.1.0612
Problem:    Cannot use two global runtime dirs with configure.
Solution:   Support a comma in --with-global-runtime. (James McCoy,
            closes #3704)
Files:	    src/config.h.in, src/configure.ac, src/feature.h, src/os_unix.h,
            src/auto/configure, src/Makefile

Patch 8.1.0613
Problem:    When executing an insecure function the secure flag is stuck.
            (Gabriel Barta)
Solution:   Restore &quot;secure&quot; instead of decrementing <A HREF="motion.html#it">it</A>. (closes #3705)
Files:	    src/testdir/test_autocmd.vim, src/option.c, src/buffer.c

Patch 8.1.0614
Problem:    Placing <A HREF="sign.html#signs">signs</A> can be complicated.
Solution:   Add <A HREF="eval.html#functions">functions</A> for defining and placing <A HREF="sign.html#signs">signs</A>.  Introduce a group
            name to avoid different plugins using the same <A HREF="sign.html#signs">signs</A>. (Yegappan
            Lakshmanan, closes #3652)
Files:	    runtime/doc/eval.txt, runtime/doc/sign.txt,
            runtime/doc/usr_41.txt, src/alloc.h, src/buffer.c, src/evalfunc.c,
            src/ex_cmds.c, src/globals.h, src/list.c, src/misc2.c,
            src/netbeans.c, src/proto/buffer.pro, src/proto/ex_cmds.pro,
            src/proto/list.pro, src/proto/misc2.pro, src/structs.h,
            src/testdir/test_signs.vim, src/workshop.c

Patch 8.1.0615
Problem:    Get_tv function names are not consistent.
Solution:   Rename to tv_get.
Files:	    src/eval.c, src/proto/eval.pro, src/channel.c, src/dict.c,
            src/evalfunc.c, src/list.c, src/message.c, src/tag.c,
            src/terminal.c, src/textprop.c, src/window.c, src/ex_cmds.c,
            src/os_unix.c, src/os_win32.c, src/json.c, src/regexp.c,
            src/edit.c, src/misc2.c, src/popupmnu.c

Patch 8.1.0616
Problem:    NSIS installer is outdated.
Solution:   Use modern <A HREF="syntax.html#syntax">syntax</A>, MUI2 and make <A HREF="motion.html#it">it</A> work better. Add translations.
            (Guopeng Wen, Ken Takata, closes #3501)
Files:	    Filelist, nsis/gvim.nsi, nsis/icons/header.svg,
            nsis/icons/welcome.svg, nsis/icons/header.bmp,
            nsis/icons/un_header.bmp, nsis/icons/uninstall.bmp,
            nsis/icons/welcome.bmp, nsis/lang/danish.nsi, nsis/lang/dutch.nsi,
            nsis/lang/english.nsi, nsis/lang/german.nsi,
            nsis/lang/italian.nsi, nsis/lang/japanese.nsi,
            nsis/lang/simpchinese.nsi, nsis/lang/tradchinese.nsi,
            src/dosinst.c

Patch 8.1.0617 (after 8.1.0616)
Problem:    NSIS installer gets two files from the wrong directory.
Solution:   Change ${VIMRT} to &quot;..\&quot;.
Files:	    nsis/gvim.nsi

Patch 8.1.0618
Problem:    <A HREF="terminal.html#term_getjob()">term_getjob()</A> does not return <A HREF="eval.html#v:null">v:null</A> <A HREF="motion.html#as">as</A> documented.
Solution:   Do return <A HREF="eval.html#v:null">v:null</A>. (Damien)  Add a test.
Files:	    src/terminal.c, src/testdir/test_terminal.vim

Patch 8.1.0619
Problem:    <A HREF="eval.html#:echomsg">:echomsg</A> and <A HREF="eval.html#:echoerr">:echoerr</A> <A HREF="diff.html#do">do</A> not handle <A HREF="eval.html#List">List</A> and <A HREF="eval.html#Dict">Dict</A> like <A HREF="eval.html#:echo">:echo</A> does.
            (Daniel Hahler)
Solution:   Be more tolerant about the <A HREF="eval.html#expression">expression</A> result type.
Files:	    src/eval.c, src/proto/eval.pro, src/evalfunc.c,
            src/proto/evalfunc.pro, runtime/doc/eval.txt,
            src/testdir/test_messages.vim, src/message.c

Patch 8.1.0620
Problem:    Overruling CONF_ARGS from the environment no longer works. (Tony
            Mechelynck)
Solution:   Do not define any CONF_ARGS by default.
Files:	    src/Makefile

Patch 8.1.0621
Problem:    Terminal debugger does not handle unexpected debugger exit.
Solution:   Check for debugger <A HREF="channel.html#job">job</A> ended and close unused <A HREF="windows.html#buffers">buffers</A>. (Damien)
Files:	    runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.0622
Problem:    Adding <A HREF="quickfix.html#quickfix">quickfix</A> items marks items <A HREF="motion.html#as">as</A> valid <A HREF="message.html#errors">errors</A>. (Daniel Hahler)
Solution:   Check when items are valid. (Yegappan Lakshmanan, closes #3683,
            closes #3633)
Files:	    src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.0623
Problem:    Iterating through <A HREF="windows.html#window">window</A> frames is repeated.
Solution:   Define FOR_ALL_FRAMES. (Yegappan Lakshmanan)
Files:	    src/ex_docmd.c, src/globals.h, src/screen.c, src/window.c

Patch 8.1.0624 (after 8.1.0620)
Problem:    Overruling CONF_ARGS from the environment still does not work.
            (Tony Mechelynck)
Solution:   Add back CONF_ARGS next to the new numbered ones.
Files:	    src/Makefile

Patch 8.1.0625
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="terminal.html#terminal">terminal</A> test fails in white console.
Solution:   Accept both white and black background colors.
Files:	    src/testdir/test_terminal.vim

Patch 8.1.0626
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: no resize to fit parent when using <A HREF="starting.html#--windowid">--windowid</A>.
Solution:   Pass <A HREF="eval.html#FALSE">FALSE</A> for &quot;mustset&quot; in gui_set_shellsize(). (Agorgianitis
            Loukas, closes #3616)
Files:	    src/gui.c

Patch 8.1.0627
Problem:    <A HREF="if_pyth.html#Python">Python</A> cannot handle function name of <A HREF="map.html#script-local">script-local</A> function.
Solution:   Use <A HREF="map.html#&lt;SNR&gt;">&lt;SNR&gt;</A> instead of the special byte code. (Ozaki Kiichi, closes
            #3681)
Files:	    src/if_py_both.h, src/testdir/test_python2.vim,
            src/testdir/test_python3.vim

Patch 8.1.0628
Problem:    Compiler warning on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Add type cast. (Mike Williams)
Files:	    src/if_py_both.h

Patch 8.1.0629
Problem:    &quot;<A HREF="visual.html#gn">gn</A>&quot; selects the wrong text with a multi-line match.
Solution:   Get the end position from searchit() directly. (closes #3695)
Files:	    src/testdir/test_gn.vim, src/search.c, src/proto/search.pro,
            src/edit.c, src/evalfunc.c, src/ex_docmd.c, src/ex_getln.c,
            src/normal.c

Patch 8.1.0630
Problem:   &quot;wincmd p&quot; does not work after using an autocmd <A HREF="windows.html#window">window</A>.
Solution:   Store &quot;prevwin&quot; in aco_save_T. (Christian Brabandt, closes #3690)
Files:	    src/fileio.c, src/structs.h, src/testdir/test_window_cmd.vim

Patch 8.1.0631
Problem:    Test for <A HREF="starting.html#:stop">:stop</A> fails on Arch.
Solution:   Check five lines for the expected output. (closes #3714)
Files:	    src/testdir/test_terminal.vim

Patch 8.1.0632
Problem:    Using sign group names is inefficient.
Solution:   Store group names in a hash table and use a reference to them.
            Also remove unnecessary use of &quot;<A HREF="eval.html#:exe">:exe</A>&quot; from the tests.  (Yegappan
            Lakshmanan, closes #3715)
Files:	    src/buffer.c, src/ex_cmds.c, src/structs.h,
            src/testdir/test_signs.vim

Patch 8.1.0633
Problem:    Crash when out of memory while opening a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>.
Solution:   Handle out-of-memory more gracefully.
Files:	    src/terminal.c, src/libvterm/src/vterm.c,
            src/libvterm/src/state.c, src/libvterm/src/termscreen.c

Patch 8.1.0634
Problem:    Text properties cannot cross line boundaries.
Solution:   Support multi-line text properties.
Files:	    src/textprop.c, src/testdir/test_textprop.vim,
            runtime/doc/eval.txt

Patch 8.1.0635
Problem:    Coverity complains about <A HREF="vim9.html#null">null</A> pointer use.
Solution:   Avoid using a <A HREF="vim9.html#null">null</A> pointer.
Files:	    src/evalfunc.c

Patch 8.1.0636
Problem:    <A HREF="builtin.html#line2byte()">line2byte()</A> gives wrong values with text properties. (Bjorn Linse)
Solution:   Compute byte offsets differently when text properties were added.
            (closes #3718)
Files:	    src/structs.h, src/textprop.c, src/proto/textprop.pro,
            src/memline.c, src/testdir/test_textprop.vim

Patch 8.1.0637
Problem:    Nsis file no longer used.
Solution:   Remove the file. (Ken Takata)
Files:	    nsis/vimrc.ini, Filelist

Patch 8.1.0638
Problem:    Text property highlighting is off by one column. (Bjorn Linse)
Solution:   Update text property highlighting earlier.  Let <A HREF="motion.html#it">it</A> overrule <A HREF="syntax.html#syntax">syntax</A>
            highlighting.
Files:	    src/structs.h, src/screen.c

Patch 8.1.0639
Problem:    text properties test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>
Solution:   Set fileformat to &quot;<A HREF="os_unix.html#unix">unix</A>&quot;.
Files:	    src/testdir/test_textprop.vim

Patch 8.1.0640
Problem:    Get E14 while typing command <A HREF="tabpage.html#:tab">:tab</A> with <A HREF="options.html#'incsearch'">'incsearch'</A> set.
Solution:   Do not give an error when looking for the command. (Hirohito
            Higashi)
Files:	    src/testdir/test_search.vim, src/ex_docmd.c

Patch 8.1.0641
Problem:    No check for out-of-memory when converting <A HREF="pattern.html#regexp">regexp</A>.
Solution:   Bail out when lalloc() returns NULL. (John Marriott)
Files:	    src/regexp_nfa.c

Patch 8.1.0642
Problem:    <A HREF="builtin.html#swapinfo()">swapinfo()</A> leaks memory. (Christian Brabandt)
Solution:   Avoid allocating the strings <A HREF="if_cscop.html#twice">twice</A>.
Files:	    src/memline.c, src/dict.c, src/proto/dict.pro

Patch 8.1.0643
Problem:    Computing byte offset wrong. (Bjorn Linse)
Solution:   Use the right variable for array index.
Files:	    src/memline.c, src/testdir/test_textprop.vim

Patch 8.1.0644
Problem:    Finding next sign ID is inefficient.
Solution:   Add next_sign_id. (Yegappan Lakshmanan, closes #3717)
Files:	    runtime/doc/eval.txt, src/buffer.c, src/evalfunc.c, src/ex_cmds.c,
            src/globals.h, src/main.c, src/proto/buffer.pro, src/structs.h,
            src/testdir/test_signs.vim

Patch 8.1.0645
Problem:    Coverity warns for possible use of NULL pointer.
Solution:   Check return value of vterm_obtain_screen().
Files:	    src/terminal.c

Patch 8.1.0646
Problem:    Cannot build with <A HREF="if_ruby.html#Ruby">Ruby</A> 2.6.0.
Solution:   Add rb_ary_detransient(). (Ozaki Kiichi, closes #3724)
Files:	    src/if_ruby.c

Patch 8.1.0647
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="builtin.html#balloon_show()">balloon_show()</A> does not handle wide characters.
Solution:   Use CreateWindowExW(). (Yasuhiro Matsumoto, closes #3708)
Files:	    src/gui_w32.c

Patch 8.1.0648
Problem:    Custom operators can't act upon a forced motion. (Christian
            Wellenbrock)
Solution:   Add the forced motion to the <A HREF="builtin.html#mode()">mode()</A> result. (Christian Brabandt,
            closes #3490)
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/globals.h, src/normal.c,
            src/testdir/test_mapping.vim

Patch 8.1.0649
Problem:    setjmp() <A HREF="eval.html#variables">variables</A> defined globally are used in one file.
Solution:   Move the declarations to that file.
Files:	    src/globals.h, src/os_unix.c

Patch 8.1.0650
Problem:    Command line argument <A HREF="starting.html#-q">-q</A> [errorfile] is not tested.
Solution:   Add a test. (Dominique Pelle, closes #3730)
Files:	    src/testdir/test_startup.vim

Patch 8.1.0651
Problem:    <A HREF="editing.html#:args">:args</A> \&quot;foo works like <A HREF="editing.html#:args">:args</A> without argument.
Solution:   Fix check for empty argument. (closes #3728)
Files:	    src/ex_cmds2.c, src/testdir/test_arglist.vim

Patch 8.1.0652
Problem:    Freeing memory for balloon <A HREF="eval.html#eval">eval</A> too early.
Solution:   Store the pointer in BalloonEval and free <A HREF="motion.html#it">it</A> later. (Yasuhiro
            Matsumoto, closes #3725)
Files:	    src/beval.h, src/gui_w32.c

Patch 8.1.0653 (after 8.1.0651)
Problem:    Arglist test fails on MS-windows.
Solution:   Only use a file name with a double <A HREF="change.html#quote">quote</A> on <A HREF="os_unix.html#Unix">Unix</A>.
Files:	    src/testdir/test_arglist.vim

Patch 8.1.0654
Problem:    When <A HREF="change.html#deleting">deleting</A> a line text property flags are not adjusted.
Solution:   Adjust text property flags in preceding and following lines.
Files:	    src/memline.c, src/misc2.c, src/proto/misc2.pro,
            src/testdir/test_textprop.vim

Patch 8.1.0655
Problem:    When appending a line text property flags are not added.
Solution:   Add text properties to a newly added line.
Files:	    src/memline.c, src/testdir/test_textprop.vim, src/textprop.c

Patch 8.1.0656
Problem:    Trying to reconnect to X server may cause problems.
Solution:   Do no try reconnecting when <A HREF="starting.html#exiting">exiting</A>. (James McCoy)
Files:	    src/os_unix.c

Patch 8.1.0657 (after 8.1.0656)
Problem:    Get error for using <A HREF="pattern.html#regexp">regexp</A> recursively. (Dominique Pelle)
Solution:   Do no check if connection is desired.
Files:	    src/os_unix.c

Patch 8.1.0658
Problem:    Deleting <A HREF="sign.html#signs">signs</A> and completion for <A HREF="sign.html#:sign">:sign</A> is insufficient.
Solution:   Add <A HREF="change.html#deleting">deleting</A> <A HREF="sign.html#signs">signs</A> in a specified or any group from the current
            cursor location.  Add group and priority to sign command
            completion. Add tests for different sign unplace commands. Update
            help text.  Add tests for sign jump with group. Update help for
            sign jump. (Yegappan Lakshmanan, closes #3731)
Files:	    runtime/doc/sign.txt, src/buffer.c, src/evalfunc.c, src/ex_cmds.c,
            src/netbeans.c, src/proto/buffer.pro, src/proto/ex_cmds.pro,
            src/testdir/test_signs.vim

Patch 8.1.0659 (after 8.1.0658)
Problem:    Build failure without the sign feature.
Solution:   Put the sign struct declarations outside of the #ifdef.
Files:	    src/structs.h

Patch 8.1.0660
Problem:    <A HREF="sign.html#sign_unplace()">sign_unplace()</A> may leak memory.
Solution:   Free the group name before returning.  Add a few more tests.
            (Yegappan Lakshmanan)
Files:	    src/evalfunc.c, src/testdir/test_signs.vim

Patch 8.1.0661
Problem:    Clipboard <A HREF="pattern.html#regexp">regexp</A> might be used recursively.
Solution:   Check for recursive use and bail out.
Files:	    src/regexp.c, src/proto/regexp.pro, src/os_unix.c

Patch 8.1.0662
Problem:    Needlessly searching for tilde in <A HREF="eval.html#string">string</A>.
Solution:   Only check the first character. (James McCoy, closes #3734)
Files:	    src/misc1.c

Patch 8.1.0663
Problem:    Text property display wrong when <A HREF="options.html#'number'">'number'</A> is set. (Dominique
            Pelle)
Solution:   Compare with &quot;vcol&quot;  instead of &quot;col&quot;.
Files:	    src/screen.c

Patch 8.1.0664
Problem:    Configure &quot;fail-if-missing&quot; does not apply to the enable-gui
            argument. (Rhialto)
Solution:   Make configure fail if a <A HREF="gui.html#GUI">GUI</A> was specified and &quot;fail-if-missing&quot;
            is enabled and the <A HREF="gui.html#GUI">GUI</A> test fails.
Files:	    src/configure.ac, src/auto/configure

Patch 8.1.0665
Problem:    Text property display wrong when <A HREF="options.html#'spell'">'spell'</A> is set. (Dominique Pelle)
Solution:   Remove unnecessary assignment to char_attr.  Combine attributes if
            needed.  Add a screenshot test.
Files:	    src/screen.c, src/testdir/test_textprop.vim,
            src/testdir/dumps/Test_textprop_01.dump

Patch 8.1.0666 (after 8.1.0665)
Problem:    Text property test fails.
Solution:   Update screenshot.
Files:	    src/testdir/dumps/Test_textprop_01.dump

Patch 8.1.0667 (after 8.1.0665)
Problem:    Textprop test leaves file behind.
Solution:   Delete the file. (Dominique Pelle, closes #3743)
Files:	    src/testdir/test_textprop.vim

Patch 8.1.0668
Problem:    No test for overstrike mode in the command line.
Solution:   Add a test. (Dominique Pelle, closes #3742)
Files:	    src/testdir/test_cmdline.vim

Patch 8.1.0669
Problem:    The ex_sign() function is too long.
Solution:   Refactor the function.  Add a bit more <A HREF="testing.html#testing">testing</A>. (Yegappan
            Lakshmanan, closes #3745)
Files:	    src/testdir/test_signs.vim, src/ex_cmds.c

Patch 8.1.0670
Problem:    Macro for <A HREF="popup.html#popup">popup</A> menu width is unused.
Solution:   Remove <A HREF="motion.html#it">it</A>. (Hirohito Higashi)
Files:	    src/popupmnu.c

Patch 8.1.0671
Problem:    Cursor in the wrong column after auto-formatting.
Solution:   Check for <A HREF="change.html#deleting">deleting</A> more spaces than adding. (closes #3748)
Files:	    src/ops.c, src/testdir/test_textformat.vim, src/mark.c,
            src/proto/mark.pro, src/misc1.c

Patch 8.1.0672
Problem:    The <A HREF="if_lua.html#Lua">Lua</A> interface doesn't know about <A HREF="eval.html#v:null">v:null</A>.
Solution:   Add <A HREF="if_lua.html#Lua">Lua</A> support for <A HREF="eval.html#v:null">v:null</A>. (Uji, closes #3744)
Files:	    src/if_lua.c, src/testdir/test_lua.vim

Patch 8.1.0673
Problem:    Functionality for <A HREF="sign.html#signs">signs</A> is spread out over several files.
Solution:   Move most of the sign functionality into sign.c. (Yegappan
            Lakshmanan, closes #3751)
Files:	    Filelist, src/Make_bc5.mak, src/Make_cyg_ming.mak,
            src/Make_dice.mak, src/Make_ivc.mak, src/Make_manx.mak,
            src/Make_morph.mak, src/Make_mvc.mak, src/Make_sas.mak,
            src/Make_vms.mms, src/Makefile, src/README.txt, src/buffer.c,
            src/evalfunc.c, src/ex_cmds.c, src/proto.h, src/proto/buffer.pro,
            src/proto/ex_cmds.pro, src/proto/sign.pro, src/sign.c

Patch 8.1.0674
Problem:    Leaking memory when updating a single line.
Solution:   Do not call start_search_hl() <A HREF="if_cscop.html#twice">twice</A>.
Files:	    src/screen.c

Patch 8.1.0675
Problem:    Text property column is screen columns is not practical.
Solution:   Use byte values for the column.
Files:	    src/structs.h, src/textprop.c, src/proto/textprop.pro,
            runtime/doc/eval.txt, runtime/doc/textprop.txt,
            src/testdir/test_textprop.vim,
            src/testdir/dumps/Test_textprop_01.dump

Patch 8.1.0676
Problem:    Textprop screendump test fails.
Solution:   Add missing changes.
Files:	    src/screen.c

Patch 8.1.0677
Problem:    Look-behind match may use the wrong line number. (Dominique Pelle)
Solution:   Use the line number in regsave instead of the one in behind_pos,
            we may be looking at the previous line. (closes #3749)
Files:	    src/regexp.c

Patch 8.1.0678
Problem:    Text properties <A HREF="motion.html#as">as</A> not adjusted for inserted text.
Solution:   Adjust text properties when <A HREF="insert.html#inserting">inserting</A> text.
Files:	    src/misc1.c, src/proto/misc1.pro, src/textprop.c,
            src/testdir/test_textprop.vim,
            src/testdir/dumps/Test_textprop_01.dump

Patch 8.1.0679
Problem:    Sign <A HREF="eval.html#functions">functions</A> <A HREF="diff.html#do">do</A> not take buffer argument <A HREF="motion.html#as">as</A> documented.
Solution:   Use get_buf_tv(). (Yegappan Lakshmanan, closes #3755)
Files:	    src/evalfunc.c, src/testdir/test_signs.vim

Patch 8.1.0680
Problem:    Not <A HREF="starting.html#easy">easy</A> to see what features are unavailable.
Solution:   Highlight disabled features in the <A HREF="various.html#:version">:version</A> output. (Nazri Ramliy,
            closes #3756)
Files:	    src/version.c

Patch 8.1.0681
Problem:    Text properties <A HREF="motion.html#as">as</A> not adjusted for deleted text.
Solution:   Adjust text properties when backspacing to delete text.
Files:	    src/edit.c, src/misc1.c, src/testdir/test_textprop.vim,
            src/testdir/dumps/Test_textprop_01.dump

Patch 8.1.0682
Problem:    Text properties are not adjusted when backspacing replaced text.
Solution:   Keep text properties on text restored in replace mode.
Files:	    src/edit.c, src/textprop.c,  src/globals.h,
            src/testdir/test_textprop.vim

Patch 8.1.0683
Problem:    Spell highlighting does not always end. (Gary Johnson)
Solution:   Also reset char_attr when <A HREF="spell.html#spell">spell</A> <A HREF="message.html#errors">errors</A> are highlighted.
Files:	    src/screen.c

Patch 8.1.0684
Problem:    Warnings from 64-bit compiler.
Solution:   Add type casts. (Mike Williams)
Files:	    src/memline.c, src/textprop.c

Patch 8.1.0685
Problem:    get_buf_tv() is named inconsistently.
Solution:   Rename <A HREF="motion.html#it">it</A> to tv_get_buf(). (Yegappan Lakshmanan, closes #3759)
Files:	    src/evalfunc.c, src/proto/evalfunc.pro, src/terminal.c,
            src/textprop.c

Patch 8.1.0686
Problem:    When '<A HREF="change.html#y">y</A>' is in <A HREF="options.html#'cpoptions'">'cpoptions'</A> yanking for the <A HREF="gui.html#clipboard">clipboard</A> changes <A HREF="undo.html#redo">redo</A>.
Solution:   Do not use the '<A HREF="change.html#y">y</A>' flag when &quot;gui_yank&quot; is <A HREF="eval.html#TRUE">TRUE</A>. (Andy Massimino,
            closes #3760)
Files:	    src/normal.c

Patch 8.1.0687
Problem:    Sentence text object in <A HREF="visual.html#Visual">Visual</A> mode is not tested.
Solution:   Add a test. (Dominique Pelle, closes #3758)
Files:	    src/testdir/test_visual.vim

Patch 8.1.0688
Problem:    Text properties are not restored by <A HREF="undo.html#undo">undo</A>.
Solution:   Also save text properties for <A HREF="undo.html#undo">undo</A>.
Files:	    src/structs.h, src/undo.c, src/memline.c, src/proto/memline.pro

Patch 8.1.0689 (after 8.1.0688)
Problem:    Undo with text properties not tested.
Solution:   Add a test function.
Files:	    src/testdir/test_textprop.vim

Patch 8.1.0690
Problem:    <A HREF="builtin.html#setline()">setline()</A> and <A HREF="builtin.html#setbufline()">setbufline()</A> <A HREF="diff.html#do">do</A> not clear text properties.
Solution:   Clear text properties when setting the text.
Files:	    src/evalfunc.c, src/testdir/test_textprop.vim

Patch 8.1.0691
Problem:    Text properties are not adjusted for <A HREF="change.html#:substitute">:substitute</A>.
Solution:   Adjust text properties <A HREF="motion.html#as">as</A> well <A HREF="motion.html#as">as</A> possible.
Files:	    src/ex_cmds.c, src/textprop.c, src/proto/textprop.pro,
            src/testdir/test_textprop.vim

Patch 8.1.0692
Problem:    If a buffer was deleted a <A HREF="channel.html#channel">channel</A> can't write to <A HREF="motion.html#it">it</A>.
Solution:   When the buffer exists but was unloaded, prepare <A HREF="motion.html#it">it</A> for <A HREF="editing.html#writing">writing</A>.
            (closes #3764)
Files:	    src/channel.c, src/testdir/test_channel.vim

Patch 8.1.0693 (after 8.1.0692)
Problem:    <A HREF="eval.html#Channel">Channel</A> test fails sometimes.
Solution:   Avoid race condition.
Files:	    src/testdir/test_channel.vim

Patch 8.1.0694
Problem:    When using text props may free memory that is not allocated.
            (Andy Massimino)
Solution:   Allocate the line when adjusting text props. (closes #3766)
Files:	    src/textprop.c

Patch 8.1.0695
Problem:    Internal error when using <A HREF="gui.html#:popup">:popup</A>.
Solution:   When a menu only exists in Terminal mode give an error. (Naruhiko
            Nishino, closes #3765)
Files:	    runtime/doc/gui.txt, src/globals.h, src/menu.c, src/popupmnu.c,
            src/testdir/test_popup.vim

Patch 8.1.0696
Problem:    When test_edit fails <A HREF="options.html#'insertmode'">'insertmode'</A> may not be reset and the next
            test may get stuck. (James McCoy)
Solution:   Always reset <A HREF="options.html#'insertmode'">'insertmode'</A> after executing a test.  Avoid that an
            <A HREF="autocmd.html#InsertCharPre">InsertCharPre</A> <A HREF="autocmd.html#autocommand">autocommand</A> or a <A HREF="options.html#'complete'">'complete'</A> function can change the
            state. (closes #3768)
Files:	    src/testdir/runtest.vim, src/edit.c

Patch 8.1.0697
Problem:    &quot;<A HREF="sign.html#:sign">:sign</A> place&quot; requires the buffer argument.
Solution:   Make the argument optional.  Also update the help and clean up the
            sign test. (Yegappan Lakshmanan, closes #3767)
Files:	    runtime/doc/eval.txt, runtime/doc/sign.txt, src/sign.c,
            src/testdir/test_signs.vim

Patch 8.1.0698
Problem:    Clearing the <A HREF="windows.html#window">window</A> is used too often, causing the command line
            to be cleared when opening a <A HREF="intro.html#tab">tab</A>. (Miroslav Kokr)
Solution:   Use NOT_VALID instead of CLEAR.  (suggested by Jason Franklin,
            closes #630)  Also <A HREF="diff.html#do">do</A> this for a few other places where clearing
            the screen isn't really needed.
Files:	    src/window.c

Patch 8.1.0699
Problem:    Compiler warning for uninitialized variable. (Tony Mechelynck)
Solution:   Add a dummy init.
Files:	    src/edit.c

Patch 8.1.0700 (after 8.1.0698)
Problem:    Using &quot;<A HREF="tabpage.html#gt">gt</A>&quot; sometimes does not redraw a <A HREF="intro.html#tab">tab</A>. (Jason Franklin)
Solution:   Always set must_redraw in redraw_all_later().
Files:	    src/screen.c

Patch 8.1.0701
Problem:    Sign message not translated and inconsistent spacing.
Solution:   Add _() for translation.  Add a space. (Ken Takata)  Also use
            MSG_BUF_LEN instead of BUFSIZ.
Files:	    src/sign.c, src/testdir/test_signs.vim

Patch 8.1.0702
Problem:    &quot;<A HREF="sign.html#:sign">:sign</A> place&quot; only uses the current buffer.
Solution:   <A HREF="eval.html#List">List</A> <A HREF="sign.html#signs">signs</A> for all <A HREF="windows.html#buffers">buffers</A> when there is no buffer argument.
            Fix error message for invalid buffer name in <A HREF="sign.html#sign_place()">sign_place()</A>.
            (Yegappan Lakshmanan, closes #3774)
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/sign.c,
            src/testdir/test_signs.vim

Patch 8.1.0703
Problem:    Compiler warnings with 64-bit compiler.
Solution:   Change types, add type casts. (Mike Williams)
Files:	    src/textprop.c, src/undo.c

Patch 8.1.0704
Problem:    Building with <A HREF="if_ruby.html#Ruby">Ruby</A> 2.6 gives compiler warnings.
Solution:   Define a stub for rb_ary_detransient. (Ozaki Kiichi, closes #3779)
Files:	    src/if_ruby.c

Patch 8.1.0705
Problem:    <A HREF="syntax.html#:colorscheme">:colorscheme</A> isn't tested enough
Solution:   Improve test coverage of <A HREF="syntax.html#:colorscheme">:colorscheme</A>. (Dominique Pelle, closes
            #3777)  Remove unnecessary sleep.
Files:	    src/testdir/test_gui.vim

Patch 8.1.0706
Problem:    Tabline is not always redrawn when something that is used in
            <A HREF="options.html#'tabline'">'tabline'</A> changes.
Solution:   Add &quot;<A HREF="various.html#:redrawtabline">:redrawtabline</A>&quot; so that a <A HREF="usr_05.html#plugin">plugin</A> can at least cause the
            redraw when needed.
Files:	    runtime/doc/various.txt, runtime/doc/options.txt, src/ex_docmd.c,
            src/ex_cmds.h, src/screen.c, src/proto/screen.pro,
            src/ex_cmdidxs.h, src/testdir/test_tabline.vim

Patch 8.1.0707
Problem:    Text property columns are not adjusted for changed indent.
Solution:   Adjust text properties.
Files:	    src/misc1.c, src/testdir/test_textprop.vim

Patch 8.1.0708
Problem:    Third argument for redrawWinline() is always <A HREF="eval.html#FALSE">FALSE</A>.
Solution:   Drop the argument. (neovim #9479)
Files:	    src/edit.c, src/move.c, src/screen.c, src/proto/screen.pro

Patch 8.1.0709
Problem:    Windows are updated for every added/deleted sign.
Solution:   Do not call update_debug_sign().  Only redraw when the line with
            the sign is visible.  (idea from neovim #9479)
Files:	    src/sign.c, src/screen.c, src/proto/screen.pro

Patch 8.1.0710
Problem:    When using <A HREF="builtin.html#timers">timers</A> may wait for <A HREF="channel.html#job">job</A> exit quite long.
Solution:   Return from ui_wait_for_chars_or_timer() when a <A HREF="channel.html#job">job</A> or <A HREF="channel.html#channel">channel</A>
            needs to be handled. (Ozaki Kiichi, closes #3783)
Files:	    src/ui.c, src/testdir/test_channel.vim

Patch 8.1.0711
Problem:    Test files still use function!.
Solution:   Remove the exclamation <A HREF="motion.html#mark">mark</A>.  Fix overwriting a function.
Files:	    src/testdir/test49.vim, src/testdir/test_autocmd.vim,
            src/testdir/test_charsearch.vim,
            src/testdir/test_charsearch_utf8.vim,
            src/testdir/test_display.vim, src/testdir/test_edit.vim,
            src/testdir/test_eval_func.vim, src/testdir/test_fnameescape.vim,
            src/testdir/test_getcwd.vim, src/testdir/test_highlight.vim,
            src/testdir/test_hlsearch.vim, src/testdir/test_ins_complete.vim,
            src/testdir/test_lambda.vim, src/testdir/test_listdict.vim,
            src/testdir/test_listlbr.vim, src/testdir/test_listlbr_utf8.vim,
            src/testdir/test_marks.vim, src/testdir/test_matchadd_conceal.vim,
            src/testdir/test_matchadd_conceal_utf8.vim,
            src/testdir/test_messages.vim, src/testdir/test_number.vim,
            src/testdir/test_options.vim, src/testdir/test_partial.vim,
            src/testdir/test_smartindent.vim, src/testdir/test_substitute.vim,
            src/testdir/test_system.vim, src/testdir/test_terminal.vim,
            src/testdir/test_textobjects.vim, src/testdir/test_utf8.vim,
            src/testdir/test_utf8_comparisons.vim,
            src/testdir/test_vartabs.vim, src/testdir/test_vimscript.vim,
            src/testdir/test_window_cmd.vim, src/testdir/test_xxd.vim

Patch 8.1.0712
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> build instructions are a bit outdated.
Solution:   Update the instructions. (Ken Takata)
Files:	    src/INSTALLpc.txt

Patch 8.1.0713
Problem:    Images for NSIS take up too much space.
Solution:   Put the images in a <A HREF="pi_zip.html#zip">zip</A> file.
Files:	    nsis/icons.zip, nsis/icons/disabled.bmp, nsis/icons/enabled.bmp,
            nsis/icons/header.bmp, nsis/icons/header.svg,
            nsis/icons/un_header.bmp, nsis/icons/uninstall.bmp,
            nsis/icons/vim_16c.ico, nsis/icons/vim_uninst_16c.ico,
            nsis/icons/welcome.bmp, nsis/icons/welcome.svg,
            nsis/README.txt, Filelist, Makefile

Patch 8.1.0714
Problem:    Unnecessary #if lines in <A HREF="gui_x11.html#GTK">GTK</A> code.
Solution:   Remove the #if. (Ken Takata, closes #3785)
Files:	    src/gui_beval.c, src/if_mzsch.c

Patch 8.1.0715
Problem:    Superfluous call to redraw_win_later().
Solution:   Remove the call.
Files:	    src/move.c

Patch 8.1.0716
Problem:    Get warning message when <A HREF="options.html#'completefunc'">'completefunc'</A> returns nothing.
Solution:   Allow for returning <A HREF="eval.html#v:none">v:none</A> to suppress the warning message.
            (Yasuhiro Matsumoto, closes #3789)
Files:	    runtime/doc/insert.txt, src/edit.c,
            src/testdir/test_ins_complete.vim

Patch 8.1.0717
Problem:    There is no function for the &quot;<A HREF="sign.html#:sign">:sign</A> jump&quot; command.
Solution:   Add the <A HREF="sign.html#sign_jump()">sign_jump()</A> function. (Yegappan Lakshmanan, closes #3780)
Files:	    runtime/doc/eval.txt, runtime/doc/sign.txt,
            runtime/doc/usr_41.txt, src/evalfunc.c, src/proto/sign.pro,
            src/sign.c, src/testdir/test_signs.vim

Patch 8.1.0718
Problem:    A couple compiler warnings.
Solution:   Rename shadowed <A HREF="eval.html#variables">variables</A>.  Add UNUSED.
Files:	    src/misc1.c

Patch 8.1.0719
Problem:    Too many #ifdefs.
Solution:   Always build with the <A HREF="various.html#+visualextra">+visualextra</A> feature.
Files:	    src/evalfunc.c, src/version.c, src/normal.c, src/ops.c,
            src/feature.h, runtime/doc/various.txt

Patch 8.1.0720
Problem:    Cannot easily change the current <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="eval.html#list">list</A> index.
Solution:   Add the &quot;idx&quot; argument to <A HREF="builtin.html#setqflist()">setqflist()</A>. (Yegappan Lakshmanan,
            closes #3701)
Files:	    runtime/doc/eval.txt, runtime/doc/quickfix.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.1.0721
Problem:    Conceal mode is not sufficiently tested.
Solution:   Add screendump tests.  Check all <A HREF="options.html#'concealcursor'">'concealcursor'</A> values.
Files:	    src/testdir/test_conceal.vim, src/Make_all.mak,
            src/testdir/Make_all.mak
            src/testdir/dumps/Test_conceal_two_windows_01.dump,
            src/testdir/dumps/Test_conceal_two_windows_02.dump,
            src/testdir/dumps/Test_conceal_two_windows_03.dump,
            src/testdir/dumps/Test_conceal_two_windows_04.dump,
            src/testdir/dumps/Test_conceal_two_windows_05.dump,
            src/testdir/dumps/Test_conceal_two_windows_06i.dump,
            src/testdir/dumps/Test_conceal_two_windows_06v.dump,
            src/testdir/dumps/Test_conceal_two_windows_06c.dump,
            src/testdir/dumps/Test_conceal_two_windows_06n.dump,
            src/testdir/dumps/Test_conceal_two_windows_07i.dump,
            src/testdir/dumps/Test_conceal_two_windows_07v.dump,
            src/testdir/dumps/Test_conceal_two_windows_07c.dump,
            src/testdir/dumps/Test_conceal_two_windows_07n.dump,
            src/testdir/dumps/Test_conceal_two_windows_08i.dump,
            src/testdir/dumps/Test_conceal_two_windows_08v.dump,
            src/testdir/dumps/Test_conceal_two_windows_08c.dump,
            src/testdir/dumps/Test_conceal_two_windows_08n.dump,
            src/testdir/dumps/Test_conceal_two_windows_09i.dump,
            src/testdir/dumps/Test_conceal_two_windows_09v.dump,
            src/testdir/dumps/Test_conceal_two_windows_09c.dump,
            src/testdir/dumps/Test_conceal_two_windows_09n.dump

Patch 8.1.0722
Problem:    Cannot build without the virtualedit feature.
Solution:   Make getviscol2() always available.
Files:	    src/misc2.c, src/proto/misc2.pro, src/ops.c

Patch 8.1.0723
Problem:    Cannot run specific test when in src/testdir the same was <A HREF="motion.html#as">as</A> in
            the src directory.
Solution:   Move build rule to src/testdir/Makefile.
Files:	    src/testdir/Make_all.mak, src/testdir/Make_amiga.mak,
            src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
            src/Makefile, src/Make_all.mak, src/testdir/Makefile,
            src/testdir/README.txt, src/Make_mvc.mak

Patch 8.1.0724
Problem:    Build for MinGW fails.
Solution:   Avoid specifying dependencies in included makefile.
Files:	    src/testdir/Make_all.mak, src/testdir/Makefile,
            src/testdir/Make_dos.mak, src/testdir/Make_ming.mak

Patch 8.1.0725
Problem:    Conceal mode is not completely tested.
Solution:   Add tests for moving the cursor in <A HREF="insert.html#Insert">Insert</A> mode.
Files:	    src/testdir/test_conceal.vim,
            src/testdir/dumps/Test_conceal_two_windows_10.dump,
            src/testdir/dumps/Test_conceal_two_windows_11.dump,
            src/testdir/dumps/Test_conceal_two_windows_12.dump,
            src/testdir/dumps/Test_conceal_two_windows_13.dump

Patch 8.1.0726
Problem:    Redrawing specifically for <A HREF="syntax.html#conceal">conceal</A> feature.
Solution:   Use generic redrawing methods.
Files:	    src/edit.c, src/gui.c, src/main.c, src/normal.c, src/screen.c,
            src/proto/screen.pro, src/window.c

Patch 8.1.0727
Problem:    Compiler warning for sprintf() argument.
Solution:   Add type cast.
Files:	    src/dosinst.c

Patch 8.1.0728
Problem:    Cannot avoid breaking after a single space.
Solution:   Add the '<A HREF="change.html#p">p</A>' flag to <A HREF="options.html#'formatoptions'">'formatoptions'</A>. (Tom Ryder)
Files:	    runtime/doc/change.txt, src/edit.c, src/option.h,
            src/testdir/test_textformat.vim

Patch 8.1.0729
Problem:    There is a <A HREF="autocmd.html#SourcePre">SourcePre</A> <A HREF="autocmd.html#autocommand">autocommand</A> event but not a <A HREF="autocmd.html#SourcePost">SourcePost</A>.
Solution:   Add the <A HREF="autocmd.html#SourcePost">SourcePost</A> <A HREF="autocmd.html#autocommand">autocommand</A> event. (closes #3739)
Files:	    src/vim.h, src/fileio.c, src/ex_cmds2.c, runtime/doc/autocmd.txt,
            src/testdir/test_source.vim, src/testdir/Make_all.mak

Patch 8.1.0730
Problem:    Compiler warning for get_buf_arg() unused.
Solution:   Add #ifdef. (John Marriott)
Files:	    src/evalfunc.c

Patch 8.1.0731
Problem:    JS encoding does not handle negative infinity.
Solution:   Add support for negative infinity for JS encoding. (Dominique
            Pelle, closes #3792)
Files:	    runtime/doc/eval.txt, src/json.c, src/testdir/test_json.vim

Patch 8.1.0732
Problem:    Cannot build without the <A HREF="eval.html#eval">eval</A> feature.
Solution:   Make a copy of the sourced file name.
Files:	    src/ex_cmds2.c

Patch 8.1.0733
Problem:    Too many #ifdefs for the <A HREF="mbyte.html#multibyte">multibyte</A> feature.
Solution:   Tentatively always enable the <A HREF="mbyte.html#multibyte">multibyte</A> feature.  If you have a
            problem with this, please discuss on the Vim <A HREF="intro.html#maillist">maillist</A>.
Files:	    src/configure.ac, src/auto/configure, src/feature.h, src/Makefile,
            src/Make_bc5.mak, src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.1.0734
Problem:    The hlsearch state is not stored in a session file.
Solution:   Add &quot;nohlsearch&quot; if appropriate. (Jason Franklin)
Files:	    src/ex_docmd.c, src/testdir/test_mksession.vim

Patch 8.1.0735
Problem:    Cannot handle binary data.
Solution:   Add the <A HREF="eval.html#Blob">Blob</A> type. (Yasuhiro Matsumoto, closes #3638)
Files:	    runtime/doc/eval.txt, runtime/doc/if_perl.txt,
            runtime/doc/if_ruby.txt, src/Make_cyg_ming.mak, src/Make_mvc.mak,
            src/Makefile, src/blob.c, src/channel.c, src/eval.c,
            src/evalfunc.c, src/if_perl.xs, src/if_py_both.h, src/if_python.c,
            src/if_python3.c, src/if_ruby.c, src/json.c, src/netbeans.c,
            src/proto.h, src/proto/blob.pro, src/proto/channel.pro,
            src/structs.h, src/testdir/Make_all.mak, src/vim.h, src/globals.h,
            src/testdir/test_blob.vim, src/testdir/test_channel.vim

Patch 8.1.0736
Problem:    Code for <A HREF="eval.html#Blob">Blob</A> not sufficiently tested.
Solution:   Add more tests.  Fix uncovered crash.  Add <A HREF="testing.html#test_null_blob()">test_null_blob()</A>.
Files:	    src/testdir/test_blob.vim, src/testdir/test_assign.vim, src/eval.c,
            src/testdir/test_eval_stuff.vim, src/testdir/test_lambda.vim,
            runtime/doc/eval.txt, src/evalfunc.c, src/blob.c,
            src/testdir/test49.vim

Patch 8.1.0737
Problem:    Compiler warning for uninitialized variable.
Solution:   Add <A HREF="starting.html#initialization">initialization</A>. (John Marriott)
Files:	    src/eval.c

Patch 8.1.0738
Problem:    Using freed memory, for loop over <A HREF="eval.html#blob">blob</A> leaks memory.
Solution:   Clear pointer after freeing memory.  Decrement reference <A HREF="intro.html#count">count</A>
            after for loop over <A HREF="eval.html#blob">blob</A>.
Files:	    src/eval.c

Patch 8.1.0739
Problem:    Text <A HREF="index.html#objects">objects</A> in not sufficiently tested.
Solution:   Add a few more test cases. (Dominique Pelle, closes #3795)
Files:	    src/testdir/test_visual.vim

Patch 8.1.0740
Problem:    <A HREF="if_tcl.html#Tcl">Tcl</A> test fails.
Solution:   When the argument is empty don't give an error, instead rely on
            the error reporting higher up.
Files:	    src/eval.c

Patch 8.1.0741
Problem:    Viminfo with <A HREF="eval.html#Blob">Blob</A> is not tested.
Solution:   Extend the <A HREF="starting.html#viminfo">viminfo</A> test.  Fix reading a <A HREF="eval.html#blob">blob</A>.  Fixed storing a
            special variable value.
Files:	    src/testdir/test_viminfo.vim, src/eval.c, src/blob.c,
            src/proto/blob.pro

Patch 8.1.0742
Problem:    Not all <A HREF="eval.html#Blob">Blob</A> operations are tested.
Solution:   Add more <A HREF="testing.html#testing">testing</A> for <A HREF="eval.html#Blob">Blob</A>.
Files:	    src/testdir/test_blob.vim, src/evalfunc.c,
            src/testdir/test_eval_stuff.vim

Patch 8.1.0743
Problem:    Giving error <A HREF="message.html#messages">messages</A> is not flexible.
Solution:   Add semsg().  Change argument from &quot;char_u *&quot; to &quot;char *&quot;, also
            for msg() and get rid of most MSG macros. (Ozaki Kiichi, closes
            #3302)  Also make emsg() accept a &quot;char *&quot; argument.  Get rid of
            an enormous number of type casts.
Files:	    src/blob.c, src/blowfish.c, src/buffer.c, src/channel.c,
            src/crypt.c, src/dict.c, src/diff.c, src/digraph.c, src/edit.c,
            src/eval.c, src/evalfunc.c, src/ex_cmds.c, src/ex_cmds.h,
            src/ex_cmds2.c, src/ex_docmd.c, src/ex_eval.c, src/ex_getln.c,
            src/farsi.h, src/fileio.c, src/fold.c, src/getchar.c,
            src/globals.h, src/gui.c, src/gui_at_fs.c, src/gui_at_sb.c,
            src/gui_beval.c, src/gui_gtk_x11.c, src/gui_mac.c,
            src/gui_photon.c, src/gui_w32.c, src/gui_x11.c, src/hangulin.c,
            src/hardcopy.c, src/hashtab.c, src/if_cscope.c, src/if_lua.c,
            src/if_mzsch.c, src/if_perl.xs, src/if_py_both.h, src/if_python.c,
            src/if_python3.c, src/if_ruby.c, src/if_tcl.c, src/if_xcmdsrv.c,
            src/json.c, src/list.c, src/main.c, src/mark.c, src/mbyte.c,
            src/memfile.c, src/memline.c, src/menu.c, src/message.c,
            src/misc1.c, src/misc2.c, src/netbeans.c, src/normal.c, src/ops.c,
            src/option.c, src/os_amiga.c, src/os_mswin.c, src/os_unix.c,
            src/os_win32.c, src/popupmnu.c, src/proto.h, src/proto/buffer.pro,
            src/proto/digraph.pro, src/proto/ex_docmd.pro,
            src/proto/ex_eval.pro, src/proto/ex_getln.pro,
            src/proto/hardcopy.pro, src/proto/mbyte.pro,
            src/proto/message.pro, src/proto/misc2.pro, src/proto/option.pro,
            src/proto/spell.pro, src/quickfix.c, src/regexp.c,
            src/regexp_nfa.c, src/search.c, src/sign.c, src/spell.c,
            src/spellfile.c, src/structs.h, src/syntax.c, src/tag.c,
            src/term.c, src/terminal.c, src/textprop.c, src/ui.c, src/undo.c,
            src/userfunc.c, src/version.c, src/vim.h, src/window.c,

Patch 8.1.0744 (after 8.1.0743)
Problem:    Compiler warnings for signed/unsigned strings.
Solution:   A few more type cast fixes.
Files:	    src/option.c, src/if_perl.xs, src/if_py_both.h, src/integration.c

Patch 8.1.0745
Problem:    Compiler warnings for signed/unsigned <A HREF="eval.html#string">string</A>.
Solution:   Remove type casts. (John Marriott)
Files:	    src/ex_docmd.c, src/mbyte.c

Patch 8.1.0746
Problem:    Highlighting not updated with <A HREF="syntax.html#conceal">conceal</A> and <A HREF="options.html#'cursorline'">'cursorline'</A>. (Jason
            Franklin)
Solution:   Do not use a zero line number.  Check if <A HREF="options.html#'conceallevel'">'conceallevel'</A> is set for
            the current <A HREF="windows.html#window">window</A>.
Files:	    src/main.c, src/testdir/test_conceal.vim,
            src/testdir/dumps/Test_conceal_cul_01.dump,
            src/testdir/dumps/Test_conceal_cul_02.dump,
            src/testdir/dumps/Test_conceal_cul_03.dump

Patch 8.1.0747
Problem:    <A HREF="builtin.html#map()">map()</A> with a bad <A HREF="eval.html#expression">expression</A> doesn't give an error. (Ingo Karkat)
Solution:   Check for giving an error message. (closes #3800)
Files:	    src/eval.c, src/testdir/test_filter_map.vim

Patch 8.1.0748
Problem:    Using sprintf() instead of semsg().
Solution:   Use semsg().  Fix bug with <A HREF="pattern.html#E888">E888</A>. (Ozaki Kiichi, closes #3801)
Files:	    src/regexp.c

Patch 8.1.0749 (after 8.1.0747)
Problem:    Error message contains garbage. (Dominique Pelle)
Solution:   Use correct pointer to failed <A HREF="eval.html#expression">expression</A>.
Files:	    src/eval.c

Patch 8.1.0750
Problem:    When the last sign is deleted the signcolumn may not be removed
            even though <A HREF="options.html#'signcolumn'">'signcolumn'</A> is &quot;auto&quot;.
Solution:   When <A HREF="change.html#deleting">deleting</A> the last sign redraw the buffer. (Dominique Pelle,
            closes #3803, closes #3804)
Files:	    src/sign.c

Patch 8.1.0751
Problem:    Some <A HREF="pattern.html#regexp">regexp</A> <A HREF="message.html#errors">errors</A> are not tested.
Solution:   Add a test function.
Files:	    src/testdir/test_regexp_latin.vim

Patch 8.1.0752
Problem:    One more compiler warning for signed/unsigned <A HREF="eval.html#string">string</A>. (Tony
            Mechelynck)
Solution:   Remove type cast.
Files:	    src/ex_docmd.c

Patch 8.1.0753
Problem:    printf format not checked for semsg().
Solution:   Add GNUC attribute and fix reported problems. (Dominique Pelle,
            closes #3805)
Files:	    src/buffer.c, src/diff.c, src/eval.c, src/evalfunc.c,
            src/ex_docmd.c, src/if_cscope.c, src/netbeans.c, src/proto.h,
            src/proto/message.pro, src/quickfix.c, src/regexp_nfa.c,
            src/sign.c, src/spellfile.c, src/window.c, src/gui_x11.c

Patch 8.1.0754
Problem:    Preferred column is lost when setting <A HREF="options.html#'cursorcolumn'">'cursorcolumn'</A>.
Solution:   Change option flag to P_RWINONLY. (Takayuki Kurosawa,
            closes #3806)
Files:	    src/option.c, src/testdir/test_cursor_func.vim

Patch 8.1.0755
Problem:    Error message for <A HREF="builtin.html#get()">get()</A> on a <A HREF="eval.html#Blob">Blob</A> with invalid index.
Solution:   Return an empty <A HREF="eval.html#Blob">Blob</A>, like <A HREF="builtin.html#get()">get()</A> on a <A HREF="eval.html#List">List</A> does.
Files:	    src/evalfunc.c, src/testdir/test_blob.vim

Patch 8.1.0756
Problem:    <A HREF="builtin.html#copy()">copy()</A> does not make a copy of a <A HREF="eval.html#Blob">Blob</A>.
Solution:   Make a copy.
Files:	    src/eval.c, src/testdir/test_blob.vim

Patch 8.1.0757
Problem:    Not enough documentation for <A HREF="eval.html#Blobs">Blobs</A>.
Solution:   Add a section about <A HREF="eval.html#Blobs">Blobs</A>.
Files:	    runtime/doc/eval.txt

Patch 8.1.0758
Problem:    Font number is always one instead of the actual.
Solution:   Use &quot;&#37;d&quot; instead of &quot;1&quot;. (Ken Takata)
Files:	    src/gui_x11.c

Patch 8.1.0759
Problem:    Showing two characters for <A HREF="intro.html#tab">tab</A> is limited.
Solution:   Allow for a third character for &quot;tab:&quot; in <A HREF="options.html#'listchars'">'listchars'</A>. (Nathaniel
            Braun, Ken Takata, closes #3810)
Files:	    runtime/doc/options.txt, src/globals.h, src/message.c,
            src/option.c, src/screen.c, src/testdir/test_listchars.vim

Patch 8.1.0760
Problem:    No proper test for using <A HREF="options.html#'termencoding'">'termencoding'</A>.
Solution:   Add a screendump test.  Fix using double width characters in a
            screendump.
Files:	    src/terminal.c, src/testdir/test_termencoding.vim,
            src/testdir/Make_all.mak,
            src/testdir/dumps/Test_tenc_euc_jp_01.dump

Patch 8.1.0761
Problem:    Default value for brief_wait is wrong.
Solution:   Make the default <A HREF="eval.html#FALSE">FALSE</A>. (Ozaki Kiichi, closes #3812, closes #3799)
Files:	    src/ui.c

Patch 8.1.0762
Problem:    Compiler warning.
Solution:   Add type cast. (Mike Williams)
Files:	    src/channel.c

Patch 8.1.0763
Problem:    Nobody is using the Sun Workshop support.
Solution:   Remove the Workshop support.
Files:	    runtime/doc/workshop.txt, runtime/doc/help.txt,
            runtime/doc/netbeans.txt, src/Makefile, src/auto/configure,
            src/beval.c, src/buffer.c, src/config.h.in, src/config.mk.in,
            src/configure.ac, src/evalfunc.c, src/ex_cmds.c, src/ex_cmds.h,
            src/ex_docmd.c, src/feature.h, src/fileio.c, src/globals.h,
            src/gui.c, src/gui_beval.c, src/gui_motif.c, src/gui_x11.c,
            src/integration.c, src/integration.h, src/main.c, src/misc2.c,
            src/nbdebug.c, src/netbeans.c, src/proto.h,
            src/proto/workshop.pro, src/ui.c, src/version.c, src/vim.h,
            src/workshop.c, src/workshop.h, src/wsdebug.c, src/wsdebug.h,
            src/ex_cmdidxs.h

Patch 8.1.0764
Problem:    <A HREF="eval.html#List">List</A> of distributed files is outdated.
Solution:   Remove <A HREF="workshop.html#workshop">workshop</A> files.  Add <A HREF="eval.html#blob">blob</A> files.
Files:	    Filelist

Patch 8.1.0765
Problem:    <A HREF="eval.html#String">String</A> format of a <A HREF="eval.html#Blob">Blob</A> can't be parsed back.
Solution:   Use 0z format.
Files:	    src/blob.c, src/eval.c, src/testdir/test_blob.vim

Patch 8.1.0766
Problem:    Various problems when using Vim on <A HREF="os_vms.html#VMS">VMS</A>.
Solution:   Various fixes. Define long_long_T. (Zoltan Arpadffy)
Files:	    src/eval.c, src/feature.h, src/fileio.c, src/gui_motif.c,
            src/gui_x11.c, src/gui_xmebw.c, src/json.c, src/Make_vms.mms,
            src/ops.c, src/os_vms_conf.h, src/vim.h, src/xdiff/xdiff.h,
            src/xdiff/xinclude.h

Patch 8.1.0767
Problem:    When <A HREF="change.html#deleting">deleting</A> lines at the bottom <A HREF="sign.html#signs">signs</A> are misplaced.
Solution:   Properly update the line number of <A HREF="sign.html#signs">signs</A> at the end of a buffer
            after a delete/undo operation. (Yegappan Lakshmanan, closes #3798)
Files:	    src/sign.c, src/testdir/test_signs.vim

Patch 8.1.0768
Problem:    Updating completions may cause the <A HREF="popup.html#popup">popup</A> menu to flicker.
Solution:   Avoid updating the text below the <A HREF="popup.html#popup">popup</A> menu before drawing the
            <A HREF="popup.html#popup">popup</A> menu.
Files:	    src/popupmnu.c, src/proto/popupmnu.pro, src/edit.c, src/screen.c

Patch 8.1.0769
Problem:    <A HREF="starting.html#:stop">:stop</A> is covered in two tests.
Solution:   Remove Test_stop_in_terminal().  Make other test exit Vim cleanly.
            (Ozaki Kiichi, closes #3814)
Files:	    src/testdir/test_terminal.vim, src/testdir/test_suspend.vim

Patch 8.1.0770
Problem:    Inconsistent use of ELAPSED_FUNC.
Solution:   Consistently use ELAPSED_FUNC.  Also turn ELAPSED_TYPE into a
            typedef. (Ozaki Kiichi, closes #3815)
Files:	    src/channel.c, src/gui.c, src/misc1.c, src/os_unix.c, src/vim.h

Patch 8.1.0771
Problem:    Some shell <A HREF="filetype.html#filetype">filetype</A> patterns end in a <A HREF="pattern.html#star">star</A>.
Solution:   Make sure that patterns not ending in a <A HREF="pattern.html#star">star</A> are preferred.
Files:	    runtime/filetype.vim, runtime/autoload/dist/ft.vim

Patch 8.1.0772
Problem:    The sign_define_by_name() function is too long.
Solution:   Split <A HREF="motion.html#it">it</A> into smaller <A HREF="eval.html#functions">functions</A>. (Yegappan Lakshmanan,
            closes #3819)
Files:	    src/sign.c

Patch 8.1.0773
Problem:    Not all crypt code is tested.
Solution:   Disable unused crypt code.  Add more test coverage.
Files:	    src/structs.h, src/crypt.c, src/testdir/test_crypt.vim,
            src/proto/crypt.pro, src/fileio.c

Patch 8.1.0774
Problem:    <A HREF="os_vms.html#VMS">VMS</A> build is missing the <A HREF="eval.html#blob">blob</A> file.
Solution:   Add the <A HREF="eval.html#blob">blob</A> file to the build rules. (Zoltan Arpadffy)
Files:	    src/Make_vms.mms, runtime/doc/os_vms.txt

Patch 8.1.0775
Problem:    Matching too many files <A HREF="motion.html#as">as</A> zsh. (Danek Duvall)
Solution:   Be more specific with zsh <A HREF="filetype.html#filetype">filetype</A> patterns.
Files:	    runtime/filetype.vim

Patch 8.1.0776
Problem:    Travis does not build a version without <A HREF="gui.html#GUI">GUI</A> on Linux.
Solution:   Add an environment for tiny features without <A HREF="gui.html#GUI">GUI</A>.
Files:	    .travis.yml

Patch 8.1.0777
Problem:    <A HREF="os_win32.html#Win32">Win32</A>: using pipes for <A HREF="channel.html#channel">channel</A> does not work well.
Solution:   Use a larger buffer and handle overlaps. (Yasuhiro Matsumoto,
            closes #3782)
Files:	    src/channel.c, src/os_win32.c

Patch 8.1.0778
Problem:    Terminal test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Temporarily skip the test on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.  Do run <A HREF="motion.html#it">it</A> both in
            <A HREF="terminal.html#terminal">terminal</A> and <A HREF="gui.html#GUI">GUI</A> on other systems.
Files:	    src/testdir/test_terminal.vim

Patch 8.1.0779
Problem:    Argument for message <A HREF="eval.html#functions">functions</A> is inconsistent.
Solution:   Make first argument to msg() &quot;char *&quot;.
Files:      src/buffer.c, src/crypt.c, src/edit.c, src/ex_cmds.c, src/eval.c,
            src/ex_cmds2.c, src/ex_docmd.c, src/ex_getln.c, src/farsi.c,
            src/if_cscope.c, src/fileio.c, src/getchar.c, src/globals.h,
            src/gui.c, src/if_perl.xs, src/netbeans.c, src/gui_w32.c,
            src/hardcopy.c, src/if_mzsch.c, src/if_py_both.h, src/if_ruby.c,
            src/if_tcl.c, src/mark.c, src/mbyte.c, src/menu.c, src/memline.c,
            src/message.c, src/misc1.c, src/misc2.c, src/normal.c, src/ops.c,
            src/option.c, src/os_amiga.c, src/os_unix.c, src/os_win32.c,
            src/proto/message.pro, src/quickfix.c, src/sign.c, src/regexp.c,
            src/ui.c, src/screen.c, src/search.c, src/spell.c,
            src/spellfile.c, src/syntax.c, src/tag.c, src/term.c, src/undo.c,
            src/userfunc.c, src/version.c, src/vim.h, src/window.c,
            src/proto/eval.pro, src/evalfunc.c, src/ex_eval.c, src/farsi.h

Patch 8.1.0780
Problem:    Terminal test fails on <A HREF="os_mac.html#Mac">Mac</A>.
Solution:   Skip the test on <A HREF="os_mac.html#Mac">Mac</A>.
Files:	    src/testdir/test_terminal.vim

Patch 8.1.0781
Problem:    Build error when using if_xcmdsrv.c.
Solution:   Add missing part of 8.1.0779.
Files:	    src/if_xcmdsrv.c

Patch 8.1.0782
Problem:    <A HREF="os_win32.html#Win32">Win32</A>: cursor blinks when Vim is not active.
Solution:   Remove call to setActiveWindow(). (Yasuhiro Matsumoto,
            closes #3778)
Files:	    src/gui_w32.c, src/proto/gui_w32.pro, src/menu.c

Patch 8.1.0783
Problem:    Compiler warning for signed/unsigned.
Solution:   Add type cast.  Change type of buffer. (Ozaki Kiichi, closes #3827)
Files:	    src/main.c, src/message.c

Patch 8.1.0784
Problem:    Messy indent in if statement.
Solution:   Improve structure of if statement. (Ozaki Kiichi, closes #3826)
Files:	    src/os_win32.c

Patch 8.1.0785
Problem:    Depending on the configuration some <A HREF="eval.html#functions">functions</A> are unused.
Solution:   Add more #ifdefs, remove unused <A HREF="eval.html#functions">functions</A>. (Dominique Pelle,
            closes #3822)
Files:	    src/buffer.c, src/channel.c, src/ex_cmds2.c, src/ex_docmd.c,
            src/fileio.c, src/getchar.c, src/gui_gtk_x11.c, src/hashtab.c,
            src/json.c, src/mbyte.c, src/message.c, src/misc1.c, src/misc2.c,
            src/ops.c, src/option.c, src/os_unix.c, src/proto/os_unix.pro,
            src/proto/regexp.pro, src/proto/terminal.pro, src/regexp.c,
            src/screen.c, src/search.c, src/syntax.c, src/term.c,
            src/terminal.c, src/ui.c, src/userfunc.c

Patch 8.1.0786
Problem:    ml_get error when updating the status line and a <A HREF="terminal.html#terminal">terminal</A> had its
            scrollback cleared.  (Chris Patuzzo)
Solution:   Check the cursor position when drawing the status line.
            (closes #3830)
Files:	    src/buffer.c, src/testdir/test_terminal.vim

Patch 8.1.0787
Problem:    Compiler warning for unused function. (Tony Mechelynck)
Solution:   Tune #ifdef around setjmp <A HREF="eval.html#functions">functions</A>.
Files:	    src/os_unix.c

Patch 8.1.0788
Problem:    Cannot build with tiny features.
Solution:   Adjust #ifdefs.
Files:	    src/os_unix.c

Patch 8.1.0789
Problem:    Sourcing a session sets <A HREF="eval.html#v:errmsg">v:errmsg</A>.
Solution:   Use &quot;&#37;argdel&quot; instead of &quot;argdel *&quot;. (Jason Franklin)
Files:	    src/ex_docmd.c, src/testdir/test_mksession.vim

Patch 8.1.0790
Problem:    Code for creating tabpages in session is too complex.
Solution:   Simplify the code. (Jason Franklin)
Files:	    src/ex_docmd.c

Patch 8.1.0791
Problem:    A few compiler warnings on <A HREF="os_vms.html#VMS">VMS</A>.
Solution:   Remove type cast.  Adjust #ifdef. (Zoltan Arpadffy)
Files:	    src/os_unix.c, src/proto.h

Patch 8.1.0792
Problem:    Popup menu is displayed on top of the cmdline <A HREF="windows.html#window">window</A> if <A HREF="motion.html#it">it</A> is
            opened from <A HREF="insert.html#Insert">Insert</A> completion. (Bjorn Linse)
Solution:   Remove the <A HREF="popup.html#popup">popup</A> menu.  Restore the cursor position.
            (closes #3838)
Files:	    src/edit.c, src/ex_getln.c

Patch 8.1.0793
Problem:    Incorrect error <A HREF="message.html#messages">messages</A> for <A HREF="eval.html#functions">functions</A> that now take a <A HREF="eval.html#Blob">Blob</A>
            argument.
Solution:   Adjust the error <A HREF="message.html#messages">messages</A>. (Dominique Pelle, closes #3846)
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/globals.h,
            src/testdir/test_blob.vim, src/testdir/test_listdict.vim

Patch 8.1.0794
Problem:    White space before &quot; -Ntabmove&quot; causes problems.
Solution:   Skip <A HREF="pattern.html#whitespace">whitespace</A>. (Ozaki Kiichi, closes #3841)
Files:	    src/ex_docmd.c, src/testdir/test_tabpage.vim

Patch 8.1.0795 (after 8.1.0792)
Problem:    Cannot build without <A HREF="popup.html#popup">popup</A> menu.
Solution:   Add #ifdef
Files:	    src/ex_getln.c

Patch 8.1.0796
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> 7: problem with named pipe on <A HREF="channel.html#channel">channel</A>.
Solution:   Put back the disconnect/connect calls. (Yasuhiro Matsumoto,
            closes #3833)
Files:	    src/channel.c, src/testdir/test_terminal.vim

Patch 8.1.0797
Problem:    Error <A HREF="channel.html#E898">E898</A> is used <A HREF="if_cscop.html#twice">twice</A>.
Solution:   Rename the <A HREF="eval.html#Blob">Blob</A> error to <A HREF="eval.html#E899">E899</A>. (closes #3853)
Files:	    src/evalfunc.c, runtime/doc/eval.txt,
            src/testdir/test_listdict.vim

Patch 8.1.0798
Problem:    Changing a <A HREF="eval.html#blob">blob</A> while iterating over <A HREF="motion.html#it">it</A> works strangely.
Solution:   Make a copy of the <A HREF="eval.html#Blob">Blob</A> before iterating.
Files:	    src/blob.c, src/proto/blob.pro, src/eval.c,
            src/testdir/test_blob.vim

Patch 8.1.0799
Problem:    Calling deleted function; test doesn't work on <A HREF="os_mac.html#Mac">Mac</A>.
Solution:   Wait for the function to be called before <A HREF="change.html#deleting">deleting</A> <A HREF="motion.html#it">it</A>. Use a <A HREF="channel.html#job">job</A>
            to write to the pty, unless in the <A HREF="gui.html#GUI">GUI</A>. (Ozaki Kiichi,
            closes #3854)
Files:	    src/testdir/test_channel.vim, src/testdir/test_terminal.vim

Patch 8.1.0800
Problem:    May use a lot of memory when a function creates a cyclic
            reference.
Solution:   After saving a funccal many times, invoke the garbage collector.
            (closes #3835)
Files:	    src/userfunc.c

Patch 8.1.0801
Problem:    MinGW: no hint that tests fail because of small <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Add a rule for test1 that checks for &quot;wrongtermsize&quot;.
            (msoyka-of-wharton)
Files:	    src/testdir/Make_ming.mak

Patch 8.1.0802
Problem:    Negative index doesn't work for <A HREF="eval.html#Blob">Blob</A>.
Solution:   Make <A HREF="motion.html#it">it</A> work, add a test. (closes #3856)
Files:	    src/blob.c, src/proto/blob.pro, src/eval.c,
            src/testdir/test_blob.vim

Patch 8.1.0803
Problem:    <A HREF="starting.html#Session">Session</A> file has problem with single <A HREF="change.html#quote">quote</A> in file name. (Jon
            Crowe)
Solution:   Use a double quoted <A HREF="eval.html#string">string</A>.  Add a test.
Files:	    src/ex_docmd.c, src/testdir/test_mksession.vim

Patch 8.1.0804
Problem:    Crash when setting <A HREF="eval.html#v:errmsg">v:errmsg</A> to empty <A HREF="eval.html#list">list</A>. (Jason Franklin)
Solution:   Separate getting value and assigning result.
Files:	    src/eval.c, src/testdir/test_eval_stuff.vim

Patch 8.1.0805
Problem:    Too many #ifdefs.
Solution:   Graduate FEAT_MBYTE, part 1.
Files:	    src/buffer.c, src/charset.c, src/diff.c, src/digraph.c,
            src/edit.c, src/eval.c, src/evalfunc.c, src/ex_cmds.c,
            src/ex_cmds2.c, src/ex_docmd.c, src/ex_getln.c, src/fileio.c,
            src/fold.c, src/gui.c, src/gui_mac.c, src/gui_photon.c,
            src/gui_w32.c

Patch 8.1.0806
Problem:    Too many #ifdefs.
Solution:   Graduate FEAT_MBYTE, part 2.
Files:	    src/ex_cmds2.c, src/ex_docmd.c, src/ex_getln.c, src/gui_w32.c,
            src/gui_x11.c, src/hardcopy.c, src/if_xcmdsrv.c, src/json.c,
            src/kword_test.c, src/main.c, src/mbyte.c, src/memline.c,
            src/message.c, src/misc1.c, src/misc2.c, src/move.c, src/normal.c,
            src/ops.c, src/option.c, src/charset.c

Patch 8.1.0807
Problem:    <A HREF="starting.html#Session">Session</A> test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Don't try creating file with illegal name.
Files:	    src/testdir/test_mksession.vim

Patch 8.1.0808
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: build error with <A HREF="gui.html#GUI">GUI</A>.
Solution:   Remove &quot;static&quot;.
Files:	    src/gui_w32.c

Patch 8.1.0809
Problem:    Too many #ifdefs.
Solution:   Graduate FEAT_MBYTE, part 3.
Files:	    src/os_amiga.c, src/os_mswin.c, src/os_unix.c, src/os_w32exe.c,
            src/os_win32.c, src/quickfix.c, src/regexp.c, src/regexp_nfa.c,
            src/screen.c

Patch 8.1.0810
Problem:    Too many #ifdefs.
Solution:   Graduate FEAT_MBYTE, part 4.
Files:	    src/getchar.c, src/search.c, src/sign.c, src/spell.c,
            src/spellfile.c, src/syntax.c, src/tag.c, src/term.c, src/ui.c,
            src/version.c, src/winclip.c, src/window.c, src/glbl_ime.cpp,
            src/ex_cmds.h, src/globals.h, src/gui.h, src/if_py_both.h,
            src/macros.h, src/option.h, src/os_mac.h, src/os_win32.h,
            src/proto.h, src/spell.h, src/structs.h, src/vim.h

Patch 8.1.0811
Problem:    Too many #ifdefs.
Solution:   Graduate FEAT_MBYTE, the final chapter.
Files:	    src/feature.h, src/vim.h, src/crypt_zip.c, src/fileio.c,
            src/message.c, src/spell.h, src/structs.h, src/config.h.in,
            src/configure.ac, src/auto/configure, src/testdir/runtest.vim,
            src/testdir/test_alot_utf8.vim, src/testdir/test_arabic.vim,
            src/testdir/test_charsearch_utf8.vim,
            src/testdir/test_cmdline.vim, src/testdir/test_digraph.vim,
            src/testdir/test_display.vim, src/testdir/test_edit.vim,
            src/testdir/test_erasebackword.vim,
            src/testdir/test_expr_utf8.vim, src/testdir/test_functions.vim,
            src/testdir/test_ga.vim, src/testdir/test_iminsert.vim,
            src/testdir/test_increment_dbcs.vim, src/testdir/test_json.vim,
            src/testdir/test_makeencoding.vim, src/testdir/test_maparg.vim,
            src/testdir/test_mapping.vim, src/testdir/test_marks.vim,
            src/testdir/test_match.vim,
            src/testdir/test_matchadd_conceal_utf8.vim,
            src/testdir/test_mksession_utf8.vim, src/testdir/test_normal.vim,
            src/testdir/test_plus_arg_edit.vim, src/testdir/test_profile.vim,
            src/testdir/test_put.vim, src/testdir/test_regex_char_classes.vim,
            src/testdir/test_regexp_utf8.vim, src/testdir/test_search.vim,
            src/testdir/test_source_utf8.vim, src/testdir/test_spell.vim,
            src/testdir/test_startup_utf8.vim,
            src/testdir/test_termencoding.vim, src/testdir/test_terminal.vim,
            src/testdir/test_utf8.vim, src/testdir/test_utf8_comparisons.vim,
            src/testdir/test_viminfo.vim, src/testdir/test_virtualedit.vim,
            src/testdir/test_visual.vim, src/testdir/test_wordcount.vim,
            src/testdir/test_writefile.vim, src/appveyor.bat, src/os_macosx.m

Patch 8.1.0812
Problem:    <A HREF="mbyte.html#Unicode">Unicode</A> 16 feature is not useful and cannot be detected.
Solution:   Remove UNICODE16.
Files:	    src/screen.c, src/vim.h, src/feature.h

Patch 8.1.0813
Problem:    <A HREF="autocmd.html#FileChangedShell">FileChangedShell</A> not sufficiently tested.
Solution:   Add a more comprehensive test <A HREF="change.html#case">case</A>.
Files:	    src/testdir/test_autocmd.vim

Patch 8.1.0814
Problem:    <A HREF="starting.html#:mksession">:mksession</A> cannot handle a very long <A HREF="options.html#'runtimepath'">'runtimepath'</A>. (Timothy
            Madden)
Solution:   Expand each part separately, instead of the whole option at once.
            (Christian Brabandt, closes #3466)
Files:	    src/option.c, src/testdir/test_mksession.vim

Patch 8.1.0815
Problem:    Dialog for file changed outside of Vim not tested.
Solution:   Add a test.  Move <A HREF="autocmd.html#FileChangedShell">FileChangedShell</A> test.  Add '<A HREF="motion.html#L">L</A>' flag to
            <A HREF="builtin.html#feedkeys()">feedkeys()</A>.
Files:	    src/testdir/test_autocmd.vim, src/testdir/test_filechanged.vim,
            src/testdir/Make_all.mak, src/evalfunc.c, runtime/doc/eval.txt

Patch 8.1.0816
Problem:    Test for <A HREF="options.html#'runtimepath'">'runtimepath'</A> in session fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Skip the test for now.
Files:	    src/testdir/test_mksession.vim

Patch 8.1.0817
Problem:    &quot;<A HREF="various.html#:=">:=</A>&quot; command is not tested.
Solution:   Add a test. (Dominique Pelle, closes #3859)
Files:	    src/testdir/Make_all.mak, src/testdir/test_alot.vim,
            src/testdir/test_ex_equal.vim

Patch 8.1.0818
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: cannot send large data with <A HREF="channel.html#ch_sendraw()">ch_sendraw()</A>.
Solution:   Split write into several WriteFile() calls. (Yasuhiro Matsumoto,
            closes #3823)
Files:	    src/channel.c, src/os_win32.c, src/testdir/test_channel.vim,
            src/testdir/test_channel_pipe.py, src/vim.h

Patch 8.1.0819
Problem:    A failed assert with a long <A HREF="eval.html#string">string</A> is hard to read.
Solution:   Shorten the assert message.
Files:	    src/eval.c, src/testdir/test_assert.vim

Patch 8.1.0820
Problem:    Test for sending large data over <A HREF="channel.html#channel">channel</A> sometimes fails.
Solution:   Handle that the <A HREF="channel.html#job">job</A> may have finished early.  Also fix that file
            changed test doesn't work in the <A HREF="gui.html#GUI">GUI</A> and reduce flakiness. (Ozaki
            Kiichi, closes #3861)
Files:	    src/testdir/test_channel.vim, src/testdir/test_filechanged.vim

Patch 8.1.0821
Problem:    Xxd &quot;usage&quot; output and other arguments not tested.
Solution:   Add a test to trigger the usage output in various ways.  Fix
            uncovered problem.
Files:	    src/testdir/test_xxd.vim, src/xxd/xxd.c

Patch 8.1.0822
Problem:    Peeking and flushing output slows down execution.
Solution:   Do not update the mode message when global_busy is set.  Do not
            flush when only peeking for a character. (Ken Takata)
Files:	    src/getchar.c, src/screen.c, src/proto/screen.pro, src/edit.c

Patch 8.1.0823
Problem:    Not sufficient <A HREF="testing.html#testing">testing</A> of xxd.
Solution:   Add some more test coverage.
Files:	    src/testdir/test_xxd.vim

Patch 8.1.0824
Problem:    SunOS/Solaris has a problem with ttys.
Solution:   Add mch_isatty() with extra handling for SunOS. (Ozaki Kiichi,
            closes #3865)
Files:	    src/auto/configure, src/channel.c, src/config.h.in,
            src/configure.ac, src/os_unix.c, src/proto/pty.pro, src/pty.c,
            src/terminal.c

Patch 8.1.0825
Problem:    Code for <A HREF="autocmd.html#autocommands">autocommands</A> is mixed with file I/O code.
Solution:   Move <A HREF="autocmd.html#autocommand">autocommand</A> code to a separate file. (Yegappan Lakshmanan,
            closes #3863)
Files:	    Filelist, src/Make_bc5.mak, src/Make_cyg_ming.mak,
            src/Make_dice.mak, src/Make_ivc.mak, src/Make_manx.mak,
            src/Make_morph.mak, src/Make_mvc.mak, src/Make_sas.mak,
            src/Make_vms.mms, src/Makefile, src/README.txt, src/autocmd.c,
            src/fileio.c, src/globals.h, src/proto.h, src/proto/autocmd.pro,
            src/proto/fileio.pro

Patch 8.1.0826
Problem:    Too many #ifdefs.
Solution:   Graduate FEAT_VIRTUALEDIT.  Adds about 10Kbyte to the code.
Files:	    src/buffer.c, src/charset.c, src/edit.c, src/eval.c,
            src/evalfunc.c, src/ex_cmds.c, src/ex_docmd.c, src/feature.h,
            src/globals.h, src/gui.c, src/if_py_both.h, src/macros.h,
            src/mark.c, src/mbyte.c, src/memline.c, src/menu.c, src/misc1.c,
            src/misc2.c, src/move.c, src/netbeans.c, src/normal.c, src/ops.c,
            src/option.c, src/option.h, src/screen.c, src/search.c,
            src/spell.c, src/structs.h, src/tag.c, src/ui.c, src/undo.c,
            src/userfunc.c, src/version.c, src/vim.h, src/window.c

Patch 8.1.0827 (after 8.1.0825)
Problem:    Missing dependency in Makefile.
Solution:   Add dependency from autocmd.o on auto/osdef.h
Files:	    src/Makefile

Patch 8.1.0828
Problem:    Still using FEAT_VIRTUALEDIT.
Solution:   Remove last use of FEAT_VIRTUALEDIT.
Files:	    src/quickfix.c

Patch 8.1.0829
Problem:    When <A HREF="options.html#'hidden'">'hidden'</A> is set session creates extra <A HREF="windows.html#buffers">buffers</A>.
Solution:   Move <A HREF="windows.html#:badd">:badd</A> commands to the end. (Jason Franklin)
Files:	    src/ex_docmd.c, src/testdir/test_mksession.vim

Patch 8.1.0830
Problem:    Test leaves directory behind on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Close buffer before <A HREF="change.html#deleting">deleting</A> directory.
Files:	    src/testdir/test_swap.vim

Patch 8.1.0831
Problem:    Xxd test fails if man page has <A HREF="os_dos.html#dos">dos</A> fileformat.
Solution:   Make a copy with <A HREF="os_unix.html#unix">unix</A> fileformat.
Files:	    src/testdir/test_xxd.vim

Patch 8.1.0832
Problem:    <A HREF="builtin.html#confirm()">confirm()</A> is not tested.
Solution:   Add a test. (Dominique Pelle, closes #3868)
Files:	    src/testdir/test_functions.vim

Patch 8.1.0833
Problem:    Memory leak when jumps output is filtered.
Solution:   Free the filtered name. (Dominique Pelle, closes #3869)
Files:	    src/mark.c

Patch 8.1.0834
Problem:    <A HREF="gui.html#GUI">GUI</A> may wait too long before dealing with <A HREF="message.html#messages">messages</A>.  Returning
            early may cause a <A HREF="map.html#mapping">mapping</A> to time out.
Solution:   Use the waiting loop from <A HREF="os_unix.html#Unix">Unix</A> also for the <A HREF="gui.html#GUI">GUI</A>.
            (closes #3817, closes #3824)
Files:	    src/ui.c, src/proto/ui.pro, src/os_unix.c, src/gui.c,
            src/testdir/screendump.vim

Patch 8.1.0835
Problem:    <A HREF="gui.html#GUI">GUI</A> build fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Adjust #ifdef.
Files:	    src/ui.c

Patch 8.1.0836
Problem:    <A HREF="autocmd.html#User">User</A> completion test can fail on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Allow for other names before &quot;Administrator&quot;.
Files:	    src/testdir/test_cmdline.vim

Patch 8.1.0837
Problem:    Timer interrupting cursorhold and <A HREF="map.html#mapping">mapping</A> not tested.
Solution:   Add tests with <A HREF="builtin.html#timers">timers</A>. (Ozaki Kiichi, closes #3871)
Files:	    src/testdir/test_autocmd.vim, src/testdir/test_mapping.vim

Patch 8.1.0838
Problem:    Compiler warning for type conversion.
Solution:   Add a type cast. (Mike Williams)
Files:	    src/channel.c

Patch 8.1.0839
Problem:    When using VTP wrong colors after a color scheme change.
Solution:   When VTP is active always clear after a color scheme change.
            (Nobuhiro Takasaki, closes #3872)
Files:	    src/ex_docmd.c

Patch 8.1.0840
Problem:    getchar(0) never returns a character in the <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Call wait_func() at least once.
Files:	    src/ui.c, src/testdir/test_timers.vim, src/gui_gtk_x11.c,
            src/gui_w32.c, src/gui_photon.c, src/gui_x11.c

Patch 8.1.0841
Problem:    Travis config to get <A HREF="if_lua.html#Lua">Lua</A> on macOS is too complicated.
Solution:   Use an addons entry. (Ozaki Kiichi, closes #3876)
Files:	    .travis.yml

Patch 8.1.0842
Problem:    getchar_zero test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Disable the test for now.
Files:	    src/testdir/test_timers.vim

Patch 8.1.0843
Problem:    Memory leak when running &quot;make test_cd&quot;.
Solution:   Free the stack element when failing. (Dominique Pelle,
            closes #3877)
Files:	    src/misc2.c

Patch 8.1.0844
Problem:    When <A HREF="builtin.html#timer">timer</A> fails test will hang forever.
Solution:   Use <A HREF="builtin.html#reltime()">reltime()</A> to limit waiting time. (Ozaki Kiichi, closes #3878)
Files:	    src/testdir/test_timers.vim

Patch 8.1.0845
Problem:    Having <A HREF="channel.html#job_status()">job_status()</A> free the <A HREF="channel.html#job">job</A> causes problems.
Solution:   Do not actually free the <A HREF="channel.html#job">job</A> or <A HREF="terminal.html#terminal">terminal</A> yet, put <A HREF="motion.html#it">it</A> in a <A HREF="eval.html#list">list</A> and
            free <A HREF="motion.html#it">it</A> a bit later. Do not use a <A HREF="terminal.html#terminal">terminal</A> after checking the <A HREF="channel.html#job">job</A>
            status.  (closes #3873)
Files:	    src/channel.c, src/terminal.c, src/proto/terminal.pro, src/misc2.c

Patch 8.1.0846
Problem:    Not <A HREF="starting.html#easy">easy</A> to recognize the system Vim runs on.
Solution:   Add more items to the features <A HREF="eval.html#list">list</A>. (Ozaki Kiichi, closes #3855)
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_channel.vim, src/testdir/test_functions.vim,
            src/testdir/test_terminal.vim, src/testdir/test_writefile.vim

Patch 8.1.0847
Problem:    May use <A HREF="terminal.html#terminal">terminal</A> after <A HREF="motion.html#it">it</A> was cleaned up.
Solution:   Use the <A HREF="channel.html#job">job</A> pointer.
Files:	    src/terminal.c

Patch 8.1.0848
Problem:    Cannot build with <A HREF="if_ruby.html#Ruby">Ruby</A> 1.8. (Tom <A HREF="motion.html#G">G</A>. Christensen)
Solution:   Use rb-str_new2(). (Yasuhiro Matsumoto, closes #3883,
            closes #3884)
Files:	    src/if_ruby.c

Patch 8.1.0849
Problem:    Cursorline highlight is not always updated.
Solution:   Set w_last_cursorline when redrawing.  Fix resetting cursor flags
            when using the <A HREF="popup.html#popup">popup</A> menu.
Files:	    src/screen.c, src/popupmnu.c, src/testdir/test_highlight.vim,
            src/testdir/dumps/Test_cursorline_yank_01.dump

Patch 8.1.0850
Problem:    Test for <A HREF="options.html#'backupskip'">'backupskip'</A> is not correct.
Solution:   Split the option in parts and use <A HREF="builtin.html#expand()">expand()</A>. (Michael Soyka)
Files:	    src/testdir/test_options.vim

Patch 8.1.0851
Problem:    <A HREF="builtin.html#feedkeys()">feedkeys()</A> with &quot;<A HREF="motion.html#L">L</A>&quot; does not work properly.
Solution:   Do not set typebuf_was_filled when using &quot;<A HREF="motion.html#L">L</A>&quot;. (Ozaki Kiichi,
            closes #3885)
Files:	    src/evalfunc.c, src/testdir/test_autocmd.vim,
            src/testdir/test_mapping.vim, src/testdir/test_timers.vim

Patch 8.1.0852
Problem:    <A HREF="builtin.html#findfile()">findfile()</A> and <A HREF="builtin.html#finddir()">finddir()</A> are not properly tested.
Solution:   Extend the test and add more. (Dominique Pelle, closes #3880)
Files:	    src/testdir/test_findfile.vim

Patch 8.1.0853 (after 8.1.0850)
Problem:    Options test fails on <A HREF="os_mac.html#Mac">Mac</A>.
Solution:   Remove a trailing slash from $TMPDIR.
Files:	    src/testdir/test_options.vim

Patch 8.1.0854
Problem:    xxd does not work with more than 32 bit addresses.
Solution:   Add support for 64 bit addresses. (Christer Jensen, closes #3791)
Files:	    src/xxd/xxd.c

Patch 8.1.0855
Problem:    Cannot build xxd with MSVC 10.
Solution:   Move declaration to start of block.
Files:	    src/xxd/xxd.c

Patch 8.1.0856
Problem:    When <A HREF="scroll.html#scrolling">scrolling</A> a <A HREF="windows.html#window">window</A> other than the current one the cursorline
            highlighting is not always updated. (Jason Franklin)
Solution:   Call redraw_for_cursorline() after <A HREF="scroll.html#scrolling">scrolling</A>.  Only set
            w_last_cursorline when drawing the cursor line.  Reset the lines
            to be redrawn also when redrawing the whole <A HREF="windows.html#window">window</A>.
Files:	    src/move.c, src/proto/move.pro, src/normal.c

Patch 8.1.0857
Problem:    Indent functionality is not separated.
Solution:   Move indent functionality into a new file. (Yegappan Lakshmanan,
            closes #3886)
Files:	    Filelist, src/Make_bc5.mak, src/Make_cyg_ming.mak,
            src/Make_dice.mak, src/Make_ivc.mak, src/Make_manx.mak,
            src/Make_morph.mak, src/Make_mvc.mak, src/Make_sas.mak,
            src/Make_vms.mms, src/Makefile, src/edit.c, src/indent.c,
            src/misc1.c, src/proto.h, src/proto/edit.pro,
            src/proto/indent.pro, src/proto/misc1.pro

Patch 8.1.0858
Problem:    <A HREF="options.html#'indentkeys'">'indentkeys'</A> and <A HREF="options.html#'cinkeys'">'cinkeys'</A> defaults are different.
Solution:   Make them the same, update docs. (close #3882)
Files:	    src/option.c, runtime/doc/options.txt, runtime/doc/indent.txt

Patch 8.1.0859
Problem:    &quot;&#37;v&quot; in <A HREF="options.html#'errorformat'">'errorformat'</A> does not handle <A HREF="mbyte.html#multibyte">multibyte</A> characters.
Solution:   Handle <A HREF="mbyte.html#multibyte">multibyte</A> characters. (Yegappan Lakshmanan, closes #3700)
Files:	    src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.0860
Problem:    Debug lines left in the code.
Solution:   Delete the lines.
Files:	    src/edit.c

Patch 8.1.0861
Problem:    Building with MinGW and static libc doesn't work.
Solution:   Change the LIB argument. (Ken Takata)
Files:	    src/Make_cyg_ming.mak

Patch 8.1.0862
Problem:    No <A HREF="starting.html#verbose">verbose</A> version of character classes.
Solution:   Add <A HREF="pattern.html#[:ident:]">[:ident:]</A>, <A HREF="pattern.html#[:keyword:]">[:keyword:]</A> and <A HREF="pattern.html#[:fname:]">[:fname:]</A>. (Ozaki Kiichi,
            closes #1373)
Files:	    runtime/doc/pattern.txt, src/regexp.c, src/regexp_nfa.c,
            src/testdir/test_regexp_utf8.vim

Patch 8.1.0863
Problem:    Cannot see what signal caused a <A HREF="channel.html#job">job</A> to end.
Solution:   Add &quot;termsig&quot; to <A HREF="channel.html#job_info()">job_info()</A>. (Ozaki Kiichi, closes #3786)
Files:	    runtime/doc/eval.txt, src/channel.c, src/os_unix.c, src/structs.h,
            src/testdir/test_channel.vim

Patch 8.1.0864
Problem:    Cannot have a local value for <A HREF="options.html#'scrolloff'">'scrolloff'</A> and <A HREF="options.html#'sidescrolloff'">'sidescrolloff'</A>.
            (Gary Holloway)
Solution:   Make <A HREF="options.html#'scrolloff'">'scrolloff'</A> and <A HREF="options.html#'sidescrolloff'">'sidescrolloff'</A> <A HREF="options.html#global-local">global-local</A>. (mostly by
            Aron Widforss, closes #3539)
Files:	    runtime/doc/options.txt, src/edit.c, src/ex_cmds.c,
            src/ex_docmd.c, src/gui.c, src/misc2.c, src/move.c, src/normal.c,
            src/option.c, src/proto/option.pro, src/option.h, src/search.c,
            src/structs.h, src/window.c, src/testdir/test_options.vim

Patch 8.1.0865
Problem:    When <A HREF="options.html#'listchars'">'listchars'</A> only contains &quot;nbsp:X&quot; <A HREF="motion.html#it">it</A> does not work.
Solution:   Set extra_check when lcs_nbsp is set. (Ralf Schandl, closes #3889)
Files:	    src/screen.c, src/testdir/test_listchars.vim

Patch 8.1.0866
Problem:    Build file dependencies are outdated. (John Little)
Solution:   Run &quot;make proto&quot; and &quot;make depend&quot;.
Files:	    src/vim.h, src/Makefile, src/proto/sign.pro, src/proto/gui_w32.pro

Patch 8.1.0867
Problem:    Cannot build <A HREF="if_pyth.html#Python">Python</A> interface with <A HREF="if_pyth.html#Python">Python</A> 2.4. (Tom <A HREF="motion.html#G">G</A>. Christensen)
Solution:   Define PyBytes_FromStringAndSize. (Ken Takata, closes #3888)
Files:	    src/if_python.c

Patch 8.1.0868
Problem:    Crash if triggering garbage collector after a function call.
            (Michael Henry)
Solution:   Don't call the garbage collector right away, <A HREF="diff.html#do">do</A> <A HREF="motion.html#it">it</A> later.
            (closes #3894)
Files:	    src/userfunc.c

Patch 8.1.0869
Problem:    Travis CI <A HREF="usr_41.html#script">script</A> is too complicated.
Solution:   Add names to environments.  Move appveyor <A HREF="usr_41.html#script">script</A> outside of src
            directory. (Ozaki Kiichi, closes #3890)
Files:	    .travis.yml, appveyor.yml, ci/appveyor.bat, src/appveyor.bat,
            Filelist

Patch 8.1.0870
Problem:    Vim doesn't use the new <A HREF="terminal.html#ConPTY">ConPTY</A> support in Windows 10.
Solution:   Use <A HREF="terminal.html#ConPTY">ConPTY</A> support, if available. (Nobuhiro Takasaki, closes #3794)
Files:	    runtime/doc/eval.txt, runtime/doc/options.txt,
            runtime/doc/terminal.txt, src/channel.c, src/evalfunc.c,
            src/globals.h, src/option.c, src/option.h, src/os_win32.c,
            src/proto/terminal.pro, src/structs.h, src/terminal.c,
            src/testdir/gen_opt_test.vim, src/testdir/test_autocmd.vim,
            src/testdir/test_mksession.vim, src/testdir/test_terminal.vim

Patch 8.1.0871
Problem:    Build error when building with <A HREF="if_ruby.html#Ruby">Ruby</A> 2.6.0.
Solution:   Change argument of rb_int2big_stub(). (Android Baumann,
            closes #3899)
Files:	    src/if_ruby.c

Patch 8.1.0872
Problem:    Confusing condition.
Solution:   Use &quot;<A HREF="change.html#==">==</A>&quot; instead of &quot;&lt;=&quot;.
Files:	    src/gui_gtk_x11.c

Patch 8.1.0873
Problem:    <A HREF="eval.html#List">List</A> if distributed files does not include the matchit <A HREF="eval.html#autoload">autoload</A>
            directory.
Solution:   Add the directory.
Files:	    src/Filelist

Patch 8.1.0874
Problem:    Using old style comments in new file.
Solution:   Convert to <A HREF="version7.html#//">//</A> comments in new file. (Yegappan Lakshmanan)
Files:	    src/indent.c

Patch 8.1.0875
Problem:    Not all <A HREF="message.html#errors">errors</A> of marks and findfile()/finddir() are tested.
Solution:   Add more test coverage. (Dominique Pelle)
Files:	    src/testdir/test_findfile.vim, src/testdir/test_marks.vim

Patch 8.1.0876
Problem:    Completion match not displayed when <A HREF="popup.html#popup">popup</A> menu is not shown.
Solution:   Call update_screen() when not displaying the <A HREF="popup.html#popup">popup</A> menu to show
            the inserted match. (Ken Takata, Hirohito Higashi)
Files:	    src/edit.c

Patch 8.1.0877
Problem:    New buffer used every time the <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="windows.html#window">window</A> is opened.
Solution:   Reuse the buffer. (Yegappan Lakshmanan, closes #3902)
Files:	    src/buffer.c, src/proto/quickfix.pro, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.1.0878
Problem:    Test for has('bsd') fails on some BSD systems.
Solution:   Adjust the uname match. (James McCoy, closes #3909)
Files:	    src/testdir/test_functions.vim

Patch 8.1.0879
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: temp name encoding can be wrong.
Solution:   Convert from active code page to <A HREF="options.html#'encoding'">'encoding'</A>. (Yasuhiro Matsumoto,
            closes #3520, closes #1698)
Files:	    src/fileio.c

Patch 8.1.0880
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: inconsistent selection of winpty/conpty.
Solution:   Name option <A HREF="options.html#'termwintype'">'termwintype'</A>, use ++type argument and &quot;term_pty&quot; for
            <A HREF="terminal.html#term_start()">term_start()</A>. (Hirohito Higashi, closes #3915)
Files:	    runtime/doc/eval.txt, runtime/doc/options.txt,
            runtime/doc/terminal.txt, src/channel.c, src/option.c,
            src/option.h, src/structs.h, src/terminal.c,
            src/testdir/gen_opt_test.vim, runtime/optwin.vim,
            runtime/doc/quickref.txt

Patch 8.1.0881
Problem:    Can execute shell commands in <A HREF="starting.html#rvim">rvim</A> through interfaces.
Solution:   Disable using interfaces in restricted mode. Allow for <A HREF="editing.html#writing">writing</A>
            file with <A HREF="builtin.html#writefile()">writefile()</A>, <A HREF="builtin.html#histadd()">histadd()</A> and a few others.
Files:	    runtime/doc/starting.txt, src/if_perl.xs, src/if_cmds.h,
            src/ex_cmds.c, src/ex_docmd.c, src/evalfunc.c,
            src/testdir/test_restricted.vim, src/testdir/Make_all.mak

Patch 8.1.0882 (after 8.1.0879)
Problem:    Checking for FEAT_MBYTE which doesn't exist anymore. (Christ van
            Willegen)
Solution:   Remove <A HREF="motion.html#it">it</A>.
Files:	    src/fileio.c

Patch 8.1.0883
Problem:    Missing some changes for <A HREF="intro.html#Ex">Ex</A> commands.
Solution:   Add missing changes in header file.
Files:	    src/ex_cmds.h

Patch 8.1.0884
Problem:    Double check for bsd systems.
Solution:   Delete the old line.
Files:	    src/testdir/test_functions.vim

Patch 8.1.0885
Problem:    Test for restricted hangs on <A HREF="os_win32.html#MS-Windows">MS-Windows</A> <A HREF="gui.html#GUI">GUI</A>.
Solution:   Skip the test.
Files:	    src/testdir/test_restricted.vim

Patch 8.1.0886
Problem:    Compiler warning for adding to NULL pointer and a condition that
            is always <A HREF="vim9.html#true">true</A>.
Solution:   Check for NULL pointer before adding. Remove useless &quot;if&quot;.
            (Friedirch, closes #3913)
Files:	    src/dosinst.c, src/search.c

Patch 8.1.0887
Problem:    The '<A HREF="motion.html#l">l</A>' flag in <A HREF="change.html#:substitute">:substitute</A> is sticky.
Solution:   Reset the flag. (Dominique Pelle, closes #3925)
Files:	    src/ex_cmds.c, src/testdir/test_substitute.vim

Patch 8.1.0888
Problem:    The a: <A HREF="eval.html#dict">dict</A> is not immutable <A HREF="motion.html#as">as</A> documented.
Solution:   Make the a:dict immutable, add a test. (Ozaki Kiichi, Yasuhiro
            Matsumoto, closes #3929)
Files:	    src/eval.c, src/userfunc.c, src/testdir/test_let.vim,
            src/testdir/test_listdict.vim

Patch 8.1.0889
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: a <A HREF="channel.html#channel">channel</A> write may hang.
Solution:   Check for WriteFile() not <A HREF="editing.html#writing">writing</A> anything. (Yasuhiro Matsumoto,
            closes #3920)
Files:	    src/channel.c, src/testdir/test_channel.vim,
            src/testdir/test_channel_pipe.py

Patch 8.1.0890
Problem:    Pty allocation wrong if using file for out <A HREF="channel.html#channel">channel</A> and using <A HREF="vim9.html#null">null</A>
            for in <A HREF="channel.html#channel">channel</A> and <A HREF="vim9.html#null">null</A> for error <A HREF="channel.html#channel">channel</A>.
Solution:   Correct using use_file_for_out in condition. (Ozaki Kiichi, closes
            #3917)
Files:	    src/os_unix.c, src/testdir/test_channel.vim

Patch 8.1.0891
Problem:    Substitute command insufficiently tested.
Solution:   Add more test coverage. (Dominique Pelle)
Files:	    src/testdir/test_substitute.vim

Patch 8.1.0892
Problem:    Failure when closing a <A HREF="windows.html#window">window</A> when location <A HREF="eval.html#list">list</A> is in use.
Solution:   Handle the situation gracefully. Make sure memory for <A HREF="options.html#'switchbuf'">'switchbuf'</A>
            is not freed at the wrong time. (Yegappan Lakshmanan,
            closes #3928)
Files:	    src/eval.c, src/evalfunc.c, src/proto/window.pro, src/quickfix.c,
            src/testdir/test_quickfix.vim, src/window.c

Patch 8.1.0893
Problem:    Terminal test is a bit flaky.
Solution:   Add test_terminal_no_cmd() to <A HREF="eval.html#list">list</A> of flaky tests.
Files:	    src/testdir/runtest.vim

Patch 8.1.0894
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="builtin.html#resolve()">resolve()</A> does not return a reparse point.
Solution:   Improve <A HREF="builtin.html#resolve()">resolve()</A>. (Yasuhiro Matsumoto, closes #3896)
Files:	    runtime/doc/eval.txt, src/buffer.c, src/evalfunc.c,
            src/os_mswin.c, src/proto/os_mswin.pro,
            src/testdir/test_functions.vim

Patch 8.1.0895 (after 8.1.0879)
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: dealing with temp name encoding not quite right.
Solution:   Use more wide <A HREF="eval.html#functions">functions</A>. (Ken Takata, closes #3921)
Files:	    src/fileio.c

Patch 8.1.0896
Problem:    Tests for restricted mode not run for <A HREF="os_win32.html#MS-Windows">MS-Windows</A> <A HREF="gui.html#GUI">GUI</A>.
Solution:   Make tests also work in <A HREF="os_win32.html#MS-Windows">MS-Windows</A> <A HREF="gui.html#GUI">GUI</A>.
Files:	    src/testdir/test_restricted.vim

Patch 8.1.0897
Problem:    Can modify <A HREF="eval.html#a:000">a:000</A> when using a reference.
Solution:   Make check for locked variable stricter. (Ozaki Kiichi,
            closes #3930)
Files:	    src/dict.c, src/eval.c, src/evalfunc.c, src/proto/eval.pro,
            src/testdir/test_channel.vim, src/testdir/test_let.vim,
            src/userfunc.c

Patch 8.1.0898
Problem:    A messed up <A HREF="gui_w32.html#rgb.txt">rgb.txt</A> can crash Vim. (Pavel Cheremushkin)
Solution:   Limit to 10000 entries.  Also don't retry many times when the file
            cannot be read.
Files:	    src/term.c

Patch 8.1.0899
Problem:    No need to check restricted mode for <A HREF="builtin.html#setwinvar()">setwinvar()</A>.
Solution:   Remove check_restricted().
Files:	    src/eval.c

Patch 8.1.0900
Problem:    <A HREF="terminal.html#ConPTY">ConPTY</A> may crash with 32-bit build.
Solution:   Fix function declarations. (Ken Takata, closes #3943)
Files:	    src/terminal.c

Patch 8.1.0901
Problem:    Index in <A HREF="builtin.html#getjumplist()">getjumplist()</A> may be wrong. (Epheien)
Solution:   Call cleanup_jumplist() earlier. (Yegappan Lakshmanan,
            closes #3942)
Files:	    src/evalfunc.c, src/testdir/test_jumplist.vim

Patch 8.1.0902
Problem:    Incomplete set of assignment operators.
Solution:   Add /=, *= and &#37;=. (Ozaki Kiichi, closes #3931)
Files:	    runtime/doc/eval.txt src/eval.c src/testdir/test_vimscript.vim

Patch 8.1.0903
Problem:    Struct uses more bytes than needed.
Solution:   Reorder members of regitem_S. (Dominique Pelle, closes #3936)
Files:	    src/regexp.c

Patch 8.1.0904
Problem:    USE_LONG_FNAME never defined.
Solution:   Remove using USE_LONG_FNAME. (Ken Takata, closes #3938)
Files:	    src/buffer.c, src/ex_cmds.c, src/fileio.c

Patch 8.1.0905
Problem:    Complicated <A HREF="pattern.html#regexp">regexp</A> causes a crash. (Kuang-che Wu)
Solution:   Limit the recursiveness of addstate(). (closes #3941)
Files:	    src/regexp_nfa.c, src/testdir/test_regexp_latin.vim

Patch 8.1.0906
Problem:    Using clumsy way to get console <A HREF="windows.html#window">window</A> handle.
Solution:   Use GetConsoleWindow(). (Ken Takata, closes #3940)
Files:	    src/os_mswin.c

Patch 8.1.0907
Problem:    CI tests on AppVeyor are failing.
Solution:   Reduce the recursiveness limit for <A HREF="pattern.html#regexp">regexp</A>.
Files:	    src/regexp_nfa.c

Patch 8.1.0908
Problem:    Can't handle large value for &#37;{nr}v in <A HREF="pattern.html#regexp">regexp</A>. (Kuang-che Wu)
Solution:   Give an error if the value is too large. (closes #3948)
Files:	    src/regexp_nfa.c

Patch 8.1.0909
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: using <A HREF="terminal.html#ConPTY">ConPTY</A> even though <A HREF="motion.html#it">it</A> is not stable.
Solution:   When <A HREF="terminal.html#ConPTY">ConPTY</A> version is unstable, prefer using winpty. (Ken Takata,
            closes #3949)
Files:	    runtime/doc/options.txt, src/os_win32.c, src/proto/os_win32.pro,
            src/terminal.c

Patch 8.1.0910
Problem:    Crash with tricky search <A HREF="pattern.html#pattern">pattern</A>. (Kuang-che Wu)
Solution:   Check for running out of memory. (closes #3950)
Files:	    src/regexp_nfa.c, src/testdir/test_regexp_latin.vim

Patch 8.1.0911
Problem:    Tag line with <A HREF="intro.html#Ex">Ex</A> command cannot have extra fields.
Solution:   Recognize |;&quot; <A HREF="motion.html#as">as</A> the end of the command. (closes #2402)
Files:	    runtime/doc/tagsrch.txt, src/tag.c, src/testdir/test_taglist.vim

Patch 8.1.0912
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: warning for signed/unsigned.
Solution:   Add type cast. (Nobuhiro Takasaki, closes #3945)
Files:	    src/terminal.c

Patch 8.1.0913
Problem:    CI crashes when running out of memory.
Solution:   Apply <A HREF="options.html#'maxmempattern'">'maxmempattern'</A> also to new <A HREF="pattern.html#regexp">regexp</A> engine.
Files:	    src/regexp_nfa.c

Patch 8.1.0914
Problem:    Code related to <A HREF="builtin.html#findfile()">findfile()</A> is spread out.
Solution:   Put <A HREF="builtin.html#findfile()">findfile()</A> related code into a new source file. (Yegappan
            Lakshmanan, closes #3934)
Files:	    Filelist, src/Make_bc5.mak, src/Make_cyg_ming.mak,
            src/Make_dice.mak, src/Make_ivc.mak, src/Make_manx.mak,
            src/Make_morph.mak, src/Make_mvc.mak, src/Make_sas.mak,
            src/Make_vms.mms, src/Makefile, src/README.txt, src/findfile.c,
            src/misc1.c, src/misc2.c, src/proto.h, src/proto/findfile.pro,
            src/proto/misc1.pro, src/proto/misc2.pro, src/proto/window.pro,
            src/window.c

Patch 8.1.0915
Problem:    fsync() may not work properly on <A HREF="os_mac.html#Mac">Mac</A>.
Solution:   Use fcntl() with F_FULLFSYNC. (suggested by Justin <A HREF="motion.html#M">M</A>. Keyes)
Files:	    src/fileio.c, src/proto/fileio.pro, src/evalfunc.c, src/memfile.c

Patch 8.1.0916
Problem:    With <A HREF="if_pyth.html#Python">Python</A> 3.7 &quot;find_module&quot; is not made available.
Solution:   Also add &quot;find_module&quot; with <A HREF="if_pyth.html#Python">Python</A> 3.7. (Joel Frederico,
            closes #3954)
Files:	    src/if_py_both.h

Patch 8.1.0917
Problem:    Double free when running out of memory.
Solution:   Remove one free. (Ken Takata, closes #3955)
Files:	    src/userfunc.c

Patch 8.1.0918
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="starting.html#startup">startup</A> <A HREF="message.html#messages">messages</A> are not converted.
Solution:   Convert <A HREF="message.html#messages">messages</A> when the current codepage differs from
            <A HREF="options.html#'encoding'">'encoding'</A>. (Yasuhiro Matsumoto, closes #3914)
Files:	    src/message.c, src/os_mswin.c, src/vim.h

Patch 8.1.0919
Problem:    Compiler warnings.
Solution:   Add type casts. (Mike Williams)
Files:	    src/message.c, src/regexp_nfa.c

Patch 8.1.0920
Problem:    In <A HREF="terminal.html#Terminal-Normal">Terminal-Normal</A> mode <A HREF="channel.html#job">job</A> output messes up the <A HREF="windows.html#window">window</A>.
Solution:   Postpone <A HREF="scroll.html#scrolling">scrolling</A> and updating the buffer when in <A HREF="terminal.html#Terminal-Normal">Terminal-Normal</A>
            mode.
Files:	    src/terminal.c, src/testdir/test_terminal.vim,
            src/testdir/dumps/Test_terminal_01.dump,
            src/testdir/dumps/Test_terminal_02.dump,
            src/testdir/dumps/Test_terminal_03.dump

Patch 8.1.0921
Problem:    Terminal test sometimes fails; using memory after free.
Solution:   Fee memory a bit later.  Add test to cover this.  Disable flaky
            screenshot test. (closes #3956)
Files:	    src/terminal.c, src/testdir/test_terminal.vim

Patch 8.1.0922
Problem:    Terminal scrollback test is flaky.
Solution:   Wait a bit before running the tail command.
Files:	    src/testdir/test_terminal.vim,
            src/testdir/dumps/Test_terminal_01.dump,
            src/testdir/dumps/Test_terminal_02.dump,
            src/testdir/dumps/Test_terminal_03.dump

Patch 8.1.0923
Problem:    Terminal dump <A HREF="diff.html#diff">diff</A> swap does not update file names.
Solution:   Also swap the file name.  Add a test.
Files:	    src/terminal.c, src/testdir/test_terminal.vim

Patch 8.1.0924
Problem:    Terminal scrollback test still flaky.
Solution:   Wait a bit longer before running the tail command.
Files:	    src/testdir/test_terminal.vim

Patch 8.1.0925
Problem:    Terminal scrollback test still still flaky.
Solution:   Explicitly set the shell.  Disable ruler. (Ozaki Kiichi,
            closes #3966)
Files:	    src/testdir/test_terminal.vim,
            src/testdir/dumps/Test_terminal_01.dump,
            src/testdir/dumps/Test_terminal_02.dump,
            src/testdir/dumps/Test_terminal_03.dump

Patch 8.1.0926
Problem:    No test for <A HREF="editing.html#:wnext">:wnext</A>, <A HREF="editing.html#:wNext">:wNext</A> and <A HREF="editing.html#:wprevious">:wprevious</A>.
Solution:   Add a test. (Dominique Pelle, closes #3963)
Files:	    src/testdir/Make_all.mak, src/testdir/test_alot.vim,
            src/testdir/test_wnext.vim

Patch 8.1.0927
Problem:    USE_CR is never defined.
Solution:   Remove usage of USE_CR. (Ken Takata, closes #3958)
Files:	    runtime/doc/options.txt, src/diff.c, src/evalfunc.c,
            src/ex_cmds2.c, src/fileio.c, src/message.c, src/ops.c,
            src/option.h, src/proto/ex_cmds2.pro, src/proto/fileio.pro,
            src/tag.c

Patch 8.1.0928 (after 8.1.0927)
Problem:    Stray log function call.
Solution:   Remove the log function call.
Files:	    src/ex_cmds2.c

Patch 8.1.0929
Problem:    No error when requesting <A HREF="terminal.html#ConPTY">ConPTY</A> but it's not available.
Solution:   Add an error message. (Hirohito Higashi, closes #3967)
Files:	    runtime/doc/terminal.txt, src/terminal.c

Patch 8.1.0930
Problem:    Typo in Makefile.
Solution:   Change ABORT_CLFAGS to ABORT_CFLAGS. (Kuang-che Wu, closes #3977)
Files:	    src/Makefile

Patch 8.1.0931
Problem:    vtp_working included in <A HREF="gui.html#GUI">GUI</A> build but unused.
Solution:   Adjust #ifdefs. (Ken Takata, closes #3971)
Files:	    src/os_win32.c

Patch 8.1.0932
Problem:    <A HREF="farsi.html#Farsi">Farsi</A> support is outdated and unused.
Solution:   Delete the <A HREF="farsi.html#Farsi">Farsi</A> support.
Files:	    Filelist, src/farsi.c, src/proto/farsi.pro, src/farsi.h, src/edit.c,
            src/main.c, src/normal.c, src/option.c, src/getchar.c,
            src/ex_cmds.c, src/search.c, src/ex_getln.c, src/charset.c,
            src/evalfunc.c, src/screen.c, src/window.c, src/globals.h,
            src/proto.h, farsi/README.txt, src/structs.h,
            farsi/fonts/DOS/far-a01.com, farsi/fonts/SunOs/far-a01.fb,
            farsi/fonts/UNIXs/far-a01.f16, farsi/fonts/UNIXs/far-a01.pcf.gz,
            farsi/fonts/UNIXs/far-a01.pcf.Z, farsi/fonts/WINDOWS/far-a01.fon,
            src/Makefile, src/Make_bc5.mak, src/Make_cyg_ming.mak,
            src/Make_dice.mak, src/Make_ivc.mak, src/Make_manx.mak,
            src/Make_morph.mak, src/Make_mvc.mak, src/Make_sas.mak,
            src/Make_vms.mms, src/configure.ac, src/auto/configure,
            src/config.h.in, src/testdir/test_farsi.vim, src/version.c,
            src/testdir/Make_all.mak, runtime/doc/options.txt,
            runtime/doc/starting.txt, runtime/doc/quickref.txt,
            runtime/doc/farsi.txt

Patch 8.1.0933
Problem:    When using VTP scroll region isn't used properly.
Solution:   Make better use of the scroll region. (Nobuhiro Takasaki,
            closes #3974)
Files:	    src/os_win32.c, src/term.c

Patch 8.1.0934
Problem:    Invalid memory access in search <A HREF="pattern.html#pattern">pattern</A>. (Kuang-che Wu)
Solution:   Check for incomplete equivalence class. (closes #3970)
Files:	    src/regexp.c, src/testdir/test_regexp_latin.vim

Patch 8.1.0935
Problem:    Old <A HREF="pattern.html#regexp">regexp</A> engine may use invalid buffer for <A HREF="options.html#'iskeyword'">'iskeyword'</A> or
            uninitialized buffer pointer. (Kuang-che Wu)
Solution:   Set rex.reg_buf when compiling the <A HREF="pattern.html#pattern">pattern</A>. (closes #3972)
Files:	    src/regexp.c, src/testdir/test_regexp_latin.vim

Patch 8.1.0936
Problem:    May leak memory when using <A HREF="options.html#'vartabstop'">'vartabstop'</A>. (Kuang-che Wu)
Solution:   Fix handling allocated memory for <A HREF="options.html#'vartabstop'">'vartabstop'</A>. (closes #3976)
Files:	    src/option.c, src/buffer.c

Patch 8.1.0937
Problem:    Invalid memory access in search <A HREF="pattern.html#pattern">pattern</A>. (Kuang-che Wu)
Solution:   Check for incomplete collation element. (Dominique Pelle,
            closes #3985)
Files:	    src/regexp.c, src/testdir/test_regexp_latin.vim

Patch 8.1.0938
Problem:    Background color is wrong in <A HREF="os_win32.html#MS-Windows">MS-Windows</A> console when not using VTP.
Solution:   Use g_attrCurrent. (Nobuhiro Takasaki, closes #3987)
Files:	    src/os_win32.c

Patch 8.1.0939
Problem:    No completion for sign group names.
Solution:   Add completion for sign group names and buffer names. (Yegappan
            Lakshmanan, closes #3980)
Files:	    src/sign.c, src/testdir/test_signs.vim

Patch 8.1.0940
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> console resizing not handled properly.
Solution:   Handle resizing the console better. (Nobuhiro Takasaki, Ken
            Takata, closes #3968, closes #3611)
Files:	    src/ex_docmd.c, src/normal.c, src/os_win32.c,
            src/proto/os_win32.pro

Patch 8.1.0941
Problem:    Macros for <A HREF="os_win32.html#MS-Windows">MS-Windows</A> are inconsistent, using &quot;32&quot;, &quot;3264&quot; and
            others.
Solution:   Use MSWIN for all <A HREF="os_win32.html#MS-Windows">MS-Windows</A> builds.  Use FEAT_GUI_MSWIN for the
            <A HREF="gui.html#GUI">GUI</A> build. (Hirohito Higashi, closes #3932)
Files:	    src/GvimExt/gvimext.h, src/Make_bc5.mak, src/Make_cyg_ming.mak,
            src/Make_ivc.mak, src/Make_mvc.mak, src/beval.h, src/blowfish.c,
            src/channel.c, src/edit.c, src/eval.c, src/evalfunc.c,
            src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c, src/ex_getln.c,
            src/feature.h, src/fileio.c, src/getchar.c, src/glbl_ime.cpp,
            src/globals.h, src/gui.c, src/gui.h, src/gui_beval.c,
            src/gui_gtk.c, src/gui_gtk_f.c, src/gui_gtk_x11.c,
            src/if_cscope.c, src/if_cscope.h, src/if_lua.c, src/if_mzsch.c,
            src/if_ole.cpp, src/if_perl.xs, src/if_python.c, src/if_python3.c,
            src/if_ruby.c, src/if_tcl.c, src/macros.h, src/main.c,
            src/mbyte.c, src/memfile.c, src/memline.c, src/menu.c,
            src/message.c, src/misc1.c, src/misc2.c, src/nbdebug.c,
            src/netbeans.c, src/normal.c, src/option.c, src/option.h,
            src/os_mswin.c, src/os_unix.c, src/os_w32exe.c, src/os_win32.c,
            src/os_win32.h, src/proto.h, src/screen.c, src/search.c,
            src/structs.h, src/syntax.c, src/term.c, src/terminal.c, src/ui.c,
            src/undo.c, src/version.c, src/vim.h, src/vim.rc, src/winclip.c

Patch 8.1.0942
Problem:    Options <A HREF="windows.html#window">window</A> still checks for the multi_byte feature.
Solution:   Remove the unnecessary check. (Dominique Pelle, closes #3990)
Files:	    runtime/optwin.vim

Patch 8.1.0943
Problem:    Still a trace of <A HREF="farsi.html#Farsi">Farsi</A> support.
Solution:   Remove defining macros.
Files:	    src/feature.h

Patch 8.1.0944
Problem:    Format of nbdbg() arguments is not checked.
Solution:   Add format attribute.  Fix reported problems. (Dominique Pelle,
            closes #3992)
Files:	    src/nbdebug.h, src/netbeans.c

Patch 8.1.0945
Problem:    Internal error when using <A HREF="pattern.html#pattern">pattern</A> with NL in the range.
Solution:   Use an actual newline for the range. (closes #3989)  Also fix
            error message.  (Dominique Pelle)
Files:	    src/regexp_nfa.c, src/testdir/test_regexp_latin.vim

Patch 8.1.0946
Problem:    Coveralls is not very useful.
Solution:   Remove Coveralls badge, add badge for <A HREF="repeat.html#packages">packages</A>.
Files:	    README.md

Patch 8.1.0947
Problem:    Using MSWIN before <A HREF="motion.html#it">it</A> is defined. (Cesar Romani)
Solution:   Move the block that uses MSWIN to below including vim.h. (Ken
            Takata)
Files:	    src/if_ruby.c

Patch 8.1.0948
Problem:    When built without <A HREF="various.html#+eval">+eval</A> &quot;Vim --clean&quot; produces <A HREF="message.html#errors">errors</A>. (James
            McCoy)
Solution:   Do not enable <A HREF="filetype.html#filetype">filetype</A> detection.
Files:	    runtime/defaults.vim

Patch 8.1.0949
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> defines <A HREF="gui.html#GUI">GUI</A> macros different than other systems.
Solution:   Swap FEAT_GUI and FEAT_GUI_MSWIN. (Hirohito Higashi, closes #3996)
Files:	    src/Make_bc5.mak, src/Make_cyg_ming.mak, src/Make_ivc.mak,
            src/Make_mvc.mak, src/if_ole.cpp, src/vim.h, src/vim.rc

Patch 8.1.0950
Problem:    Using <A HREF="if_pyth.html#:python">:python</A> sets <A HREF="options.html#'pyxversion'">'pyxversion'</A> even when not executed.
Solution:   Check the &quot;skip&quot; flag. (Shane Harper, closes #3995)
Files:	    src/if_python.c, src/if_python3.c, src/testdir/test_python2.vim,
            src/testdir/test_python3.vim

Patch 8.1.0951
Problem:    Using WIN64 even though <A HREF="motion.html#it">it</A> is never defined.
Solution:   Only use _WIN64. (Ken Takata, closes #3997)
Files:	    src/evalfunc.c

Patch 8.1.0952
Problem:    Compilation warnings when building the <A HREF="os_win32.html#MS-Windows">MS-Windows</A> installer.
Solution:   Fix buffer sizes. (Yasuhiro Matsumoto, closes #3999)
Files:	    src/dosinst.c, src/dosinst.h, src/uninstal.c

Patch 8.1.0953
Problem:    A very long file is truncated at 2^31 lines.
Solution:   Use LONG_MAX for MAXLNUM. (Dominique Pelle, closes #4011)
Files:	    src/vim.h

Patch 8.1.0954
Problem:    Arguments of semsg() and siemsg() are not checked.
Solution:   Add function prototype with __attribute__.
Files:	    src/message.c, src/proto/message.pro, src/proto.h

Patch 8.1.0955
Problem:    Matchit <A HREF="eval.html#autoload">autoload</A> directory not in installer. (Chris Morgan)
Solution:   Adjust the NSIS <A HREF="usr_41.html#script">script</A>. (Christian Brabandt, closes #4006)
Files:	    nsis/gvim.nsi

Patch 8.1.0956
Problem:    Using context:0 in <A HREF="options.html#'diffopt'">'diffopt'</A> does not work well.
Solution:   Make zero context <A HREF="diff.html#do">do</A> the same <A HREF="motion.html#as">as</A> one line context. (closes #4005)
Files:	    src/diff.c, src/testdir/test_diffmode.vim,
            src/testdir/dumps/Test_diff_06.0.dump,
            src/testdir/dumps/Test_diff_06.1.dump,
            src/testdir/dumps/Test_diff_06.2.dump

Patch 8.1.0957 (after 8.1.0915)
Problem:    <A HREF="os_mac.html#Mac">Mac</A>: fsync fails on <A HREF="pi_netrw.html#network">network</A> share.
Solution:   Check for ENOTSUP. (Yee Cheng Chin, closes #4016)
Files:	    src/fileio.c

Patch 8.1.0958
Problem:    Compiling weird <A HREF="pattern.html#regexp">regexp</A> <A HREF="pattern.html#pattern">pattern</A> is very slow.
Solution:   When reallocating post <A HREF="eval.html#list">list</A> increase size by 50&#37;. (Kuang-che Wu,
            closes #4012)  Make <A HREF="testing.html#assert_inrange()">assert_inrange()</A> accept float values.
Files:	    src/regexp_nfa.c, src/eval.c, src/testdir/test_regexp_latin.vim,
            src/testdir/test_assert.vim

Patch 8.1.0959
Problem:    Sorting large numbers is not tested and does not work properly.
Solution:   Add test.  Fix comparing lines with and without a number.
            (Dominique Pelle, closes #4017)
Files:	    src/ex_cmds.c, src/testdir/test_sort.vim

Patch 8.1.0960
Problem:    When using <A HREF="terminal.html#ConPTY">ConPTY</A> garbage collection has undefined behavior.
Solution:   Free the <A HREF="channel.html#channel">channel</A> in a better way. (Nobuhiro Takasaki, closes #4020)
Files:	    src/channel.c

Patch 8.1.0961 (after 8.1.0957)
Problem:    <A HREF="os_mac.html#Mac">Mac</A>: fsync may fail sometimes.
Solution:   Do not check errno. (Yee Cheng Chin, closes #4025)
Files:	    src/fileio.c

Patch 8.1.0962
Problem:    Building with MinGW and static libs doesn't work. (Salman Halim)
Solution:   Add -lgcc. (Ken Takata)
Files:	    src/Make_cyg_ming.mak

Patch 8.1.0963
Problem:    Illegal memory access when using <A HREF="options.html#'incsearch'">'incsearch'</A>.
Solution:   Reset highlight_match when <A HREF="change.html#changing">changing</A> text. (closes #4022)
Files:	    src/testdir/test_search.vim, src/misc1.c,
            src/testdir/dumps/Test_incsearch_change_01.dump

Patch 8.1.0964
Problem:    Cannot see in CI why a screenshot test failed.
Solution:   Add info about the failure.
Files:	    src/testdir/screendump.vim

Patch 8.1.0965
Problem:    Search test fails.
Solution:   Wait a bit longer for the <A HREF="options.html#'ambiwidth'">'ambiwidth'</A> redraw.
Files:	    src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_change_01.dump

Patch 8.1.0966
Problem:    One <A HREF="terminal.html#terminal">terminal</A> test is flaky.
Solution:   Add to <A HREF="eval.html#list">list</A> of flaky tests.
Files:	    src/testdir/runtest.vim

Patch 8.1.0967
Problem:    Stray dependency in test Makefile.
Solution:   Remove <A HREF="motion.html#it">it</A>. (Masato Nishihata, closes #4018)
Files:	    src/testdir/Makefile

Patch 8.1.0968
Problem:    Crash when using search <A HREF="pattern.html#pattern">pattern</A> \&#37;Ufffffc23.
Solution:   Limit character to INT_MAX. (closes #4009)
Files:	    src/regexp_nfa.c, src/testdir/test_search.vim

Patch 8.1.0969
Problem:    Message written during <A HREF="starting.html#startup">startup</A> is truncated.
Solution:   Restore message after truncating. (closes #3969)  Add a test.
            (Yasuhiro Matsumoto)
Files:	    src/message.c, src/testdir/test_startup.vim

Patch 8.1.0970
Problem:    Text properties test fails when <A HREF="options.html#'encoding'">'encoding'</A> is not <A HREF="mbyte.html#utf-8">utf-8</A>.
Solution:   Compare with original value of <A HREF="options.html#'encoding'">'encoding'</A>. (Christian Brabandt,
            closes #3986)
Files:	    src/testdir/runtest.vim, src/testdir/test_textprop.vim

Patch 8.1.0971
Problem:    Failure for selecting quoted text object moves cursor.
Solution:   Restore the <A HREF="visual.html#Visual">Visual</A> selection on failure. (Christian Brabandt,
            closes #4024)
Files:	    src/search.c, src/testdir/test_textobjects.vim

Patch 8.1.0972
Problem:    Cannot switch from <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> to next <A HREF="tabpage.html#tabpage">tabpage</A>.
Solution:   Make <A HREF="index.html#CTRL-W">CTRL-W</A> <A HREF="tabpage.html#gt">gt</A> move to next <A HREF="tabpage.html#tabpage">tabpage</A>.
Files:	    src/window.c, src/testdir/test_terminal.vim,
            runtime/doc/terminal.txt

Patch 8.1.0973
Problem:    <A HREF="pattern.html#Pattern">Pattern</A> with <A HREF="syntax.html#syntax">syntax</A> error gives three error <A HREF="message.html#messages">messages</A>. (Kuang-che
            Wu)
Solution:   Remove outdated internal error.  Don't fall back to other engine
            after an error.(closes #4035)
Files:	    src/regexp_nfa.c, src/testdir/test_search.vim, src/regexp.c

Patch 8.1.0974
Problem:    Cannot switch from <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> to previous <A HREF="tabpage.html#tabpage">tabpage</A>.
Solution:   Make <A HREF="index.html#CTRL-W">CTRL-W</A> <A HREF="tabpage.html#gT">gT</A> move to previous <A HREF="tabpage.html#tabpage">tabpage</A>.
Files:	    src/window.c, src/testdir/test_terminal.vim,
            runtime/doc/terminal.txt

Patch 8.1.0975
Problem:    Using STRNCPY() wrongly. Warning for uninitialized variable.
Solution:   Use mch_memmove(). Initialize variable. (Yasuhiro Matsumoto,
            closes #3979)
Files:	    src/screen.c, src/textprop.c

Patch 8.1.0976
Problem:    Dosinstall still has buffer overflow problems.
Solution:   Adjust buffer sizes. (Yasuhiro Matsumoto, closes #4002)
Files:	    src/dosinst.c, src/dosinst.h, src/uninstal.c

Patch 8.1.0977
Problem:    <A HREF="eval.html#Blob">Blob</A> not tested with <A HREF="if_ruby.html#Ruby">Ruby</A>.
Solution:   Add more test coverage.  Fixes a crash. (Dominique Pelle,
            closes #4036)
Files:	    src/if_ruby.c, src/testdir/test_ruby.vim

Patch 8.1.0978
Problem:    <A HREF="eval.html#Blob">Blob</A> not tested with <A HREF="if_perl.html#Perl">Perl</A>.
Solution:   Add more test coverage.  Fixes a crash. (Dominique Pelle,
            closes #4037)
Files:	    src/if_perl.c, src/testdir/test_ruby.vim

Patch 8.1.0979
Problem:    Compiler warning for unused <A HREF="eval.html#functions">functions</A>. (Yasuhiro Matsumoto)
Solution:   Adjust #ifdef.
Files:	    src/screen.c

Patch 8.1.0980
Problem:    <A HREF="builtin.html#extend()">extend()</A> insufficiently tested.
Solution:   Add more tests. (Dominique Pelle, closes #4040)
Files:	    src/testdir/test_listdict.vim

Patch 8.1.0981
Problem:    Pasting in <A HREF="terminal.html#terminal">terminal</A> insufficiently tested.
Solution:   Add more tests. (Dominique Pelle, closes #4040)
Files:	    src/testdir/test_terminal.vim

Patch 8.1.0982
Problem:    update_cursor() called <A HREF="if_cscop.html#twice">twice</A> in <A HREF="various.html#:shell">:shell</A>.
Solution:   Remove one of the calls. (Yasuhiro Matsumoto, closes #4039)
Files:	    src/terminal.c

Patch 8.1.0983
Problem:    Checking __CYGWIN32__ unnecessarily.
Solution:   Remove the checks. (Ken Takata)
Files:	    src/evalfunc.c, src/os_unix.c, src/os_win32.c

Patch 8.1.0984
Problem:    Unnecessary #ifdefs.
Solution:   Remove the #ifdefs. (Ken Takata)
Files:	    src/winclip.c

Patch 8.1.0985
Problem:    Crash with large number in <A HREF="pattern.html#regexp">regexp</A>. (Kuang-che Wu)
Solution:   Check for long becoming negative int. (closes #4042)
Files:	    src/regexp.c, src/testdir/test_search.vim

Patch 8.1.0986
Problem:    <A HREF="builtin.html#rename()">rename()</A> is not properly tested.
Solution:   Add tests. (Dominique Pelle, closes #4061)
Files:	    src/testdir/Make_all.mak, src/testdir/test_alot.vim,
            src/testdir/test_rename.vim

Patch 8.1.0987
Problem:    Unnecessary condition in #ifdef.
Solution:   Remove using CYGWIN32. (Ken Takata)
Files:	    src/os_unix.h, src/xxd/xxd.c

Patch 8.1.0988
Problem:    Deleting a location <A HREF="eval.html#list">list</A> buffer breaks location <A HREF="eval.html#list">list</A> <A HREF="windows.html#window">window</A>
            functionality.
Solution:   (Yegappan Lakshmanan, closes #4056)
Files:	    src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.0989
Problem:    Various small code ugliness.
Solution:   Remove pointless NULL checks. Fix function calls. Fix typos.
            (Dominique Pelle, closes #4060)
Files:	    src/buffer.c, src/crypt.c, src/evalfunc.c, src/ex_cmds2.c,
            src/globals.h, src/gui_gtk_f.c, src/gui_gtk_x11.c, src/gui_mac.c,
            src/ops.c, src/option.h, src/os_unix.c, src/os_win32.c,
            src/popupmnu.c, src/regexp.c, src/ui.c, src/version.c

Patch 8.1.0990
Problem:    Floating point exception with &quot;&#37;= 0&quot; and &quot;/= 0&quot;.
Solution:   Avoid dividing by zero. (Dominique Pelle, closes #4058)
Files:	    src/eval.c, src/testdir/test_vimscript.vim

Patch 8.1.0991
Problem:    Cannot build with FEAT_EVAL defined and FEAT_SEARCH_EXTRA
            undefined, and with FEAT_DIFF defined and FEAT_EVAL undefined.
Solution:   Add a couple of #ifdefs. (closes #4067)
Files:	    src/diff.c, src/search.c

Patch 8.1.0992
Problem:    A <A HREF="various.html#:normal">:normal</A> command while executing a <A HREF="sponsor.html#register">register</A> resets the
            <A HREF="builtin.html#reg_executing()">reg_executing()</A> result.
Solution:   Save and restore reg_executing. (closes #4066)
Files:	    src/ex_docmd.c, src/structs.h, src/testdir/test_functions.vim

Patch 8.1.0993
Problem:    <A HREF="channel.html#ch_read()">ch_read()</A> may return garbage if terminating NL is missing.
Solution:   Add terminating NUL. (Ozaki Kiichi, closes #4065)
Files:	    src/channel.c, src/testdir/test_channel.vim

Patch 8.1.0994
Problem:    Relative cursor position is not calculated correctly.
Solution:   Always set topline, also when <A HREF="windows.html#window">window</A> is one line only.
            (Robert Webb) Add more info to <A HREF="builtin.html#getwininfo()">getwininfo()</A> for <A HREF="testing.html#testing">testing</A>.
Files:	    src/window.c, src/evalfunc.c, runtime/doc/eval.txt,
            src/testdir/test_window_cmd.vim

Patch 8.1.0995
Problem:    A <A HREF="builtin.html#getchar()">getchar()</A> call while executing a <A HREF="sponsor.html#register">register</A> resets the
            <A HREF="builtin.html#reg_executing()">reg_executing()</A> result.
Solution:   Save and restore reg_executing. (closes #4066)
Files:	    src/evalfunc.c, src/testdir/test_functions.vim

Patch 8.1.0996 (after 8.1.0994)
Problem:    A few screendump tests fail because of <A HREF="scroll.html#scrolling">scrolling</A>.
Solution:   Update the screendumps.
Files:	    src/testdir/dumps/Test_incsearch_substitute_11.dump,
	    src/testdir/dumps/Test_incsearch_substitute_12.dump,
	    src/testdir/dumps/Test_incsearch_substitute_13.dump

Patch 8.1.0997
Problem:    Using <A HREF="gui.html#GUI">GUI</A> colors in vim.exe when <A HREF="options.html#'termguicolors'">'termguicolors'</A> is off.
Solution:   Add condition for <A HREF="options.html#'termguicolors'">'termguicolors'</A> set. (Ken Takata, closes #4078)
Files:	    src/os_win32.c

Patch 8.1.0998
Problem:    <A HREF="builtin.html#getcurpos()">getcurpos()</A> unexpectedly changes &quot;curswant&quot;.
Solution:   Save and restore &quot;curswant&quot;. (closes #4069)
Files:	    src/evalfunc.c, src/testdir/test_visual.vim

Patch 8.1.0999
Problem:    Use <A HREF="sponsor.html#register">register</A> one too often and not properly tested.
Solution:   Do not always use <A HREF="sponsor.html#register">register</A> one when specifying a <A HREF="sponsor.html#register">register</A>.
            (closes #4085)  Add more tests.
Files:	    src/ops.c, src/testdir/test_registers.vim

Patch 8.1.1000
Problem:    Indenting is off.
Solution:   Make indenting consistent and update comments. (Ozaki Kiichi,
            closes #4079)
Files:	    src/getchar.c, src/ops.c

Patch 8.1.1001
Problem:    <A HREF="visual.html#Visual">Visual</A> area not correct when using <A HREF="options.html#'cursorline'">'cursorline'</A>.
Solution:   Update w_last_cursorline also in <A HREF="visual.html#Visual">Visual</A> mode. (Hirohito Higashi,
            closes #4086)
Files:	    src/screen.c, src/testdir/test_highlight.vim,
            src/testdir/dumps/Test_cursorline_with_visualmode_01.dump

Patch 8.1.1002
Problem:    &quot;<A HREF="editing.html#gf">gf</A>&quot; does not always work when URL has a port number. (Jakob
            Schttl)
Solution:   When a URL is recognized also accept &quot;<A HREF="cmdline.html#:">:</A>&quot;. (closes #4082)
Files:	    src/findfile.c, src/testdir/test_gf.vim

Patch 8.1.1003
Problem:    Playing back recorded key sequence mistakes key code.
Solution:   <A HREF="insert.html#Insert">Insert</A> a <A HREF="map.html#&lt;Nop&gt;">&lt;Nop&gt;</A> after the <A HREF="intro.html#&lt;Esc&gt;">&lt;Esc&gt;</A>. (closes #4068)
Files:	    src/getchar.c, src/testdir/test_registers.vim

Patch 8.1.1004
Problem:    Function &quot;luaV_setref()&quot; not covered with tests.
Solution:   Add a test. (Dominique Pelle, closes #4089)
Files:	    src/testdir/test_lua.vim

Patch 8.1.1005 (after 8.1.1003)
Problem:    Test fails because <A HREF="term.html#t_F2">t_F2</A> is not set.
Solution:   Add try-catch.
Files:	    src/testdir/test_registers.vim

Patch 8.1.1006
Problem:    Repeated code in <A HREF="quickfix.html#quickfix">quickfix</A> support.
Solution:   Move code to <A HREF="eval.html#functions">functions</A>. (Yegappan Lakshmanan, closes #4091)
Files:	    src/quickfix.c

Patch 8.1.1007
Problem:    Using <A HREF="eval.html#closure">closure</A> may consume a lot of memory.
Solution:   unreference items that are no longer needed. Add a test. (Ozaki
            Kiichi, closes #3961)
Files:	    src/testdir/Make_all.mak, src/testdir/test_memory_usage.vim,
            src/userfunc.c

Patch 8.1.1008
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: HAVE_STDINT_H only defined for non-debug version.
Solution:   Move definition of HAVE_STDINT_H up. (Taro Muraoka, closes #4109)
Files:	    src/Make_mvc.mak

Patch 8.1.1009
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: some text is not baseline aligned.
Solution:   Use bottom alignment. (Taro Muraoka, closes #4116, closes #1520)
Files:	    src/gui_dwrite.cpp

Patch 8.1.1010
Problem:    <A HREF="if_lua.html#Lua">Lua</A> interface leaks memory.
Solution:   Clear typeval after <A HREF="uganda.html#copying">copying</A> <A HREF="motion.html#it">it</A>.
Files:	    src/if_lua.c

Patch 8.1.1011
Problem:    Indent from autoindent not removed from blank line. (Daniel Hahler)
Solution:   Do not reset did_ai when text follows. (closes #4119)
Files:	    src/misc1.c, src/testdir/test_edit.vim

Patch 8.1.1012
Problem:    Memory leak with <A HREF="eval.html#E461">E461</A>.
Solution:   Clear the typeval. (Dominique Pelle, closes #4111)
Files:	    src/eval.c

Patch 8.1.1013
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: Scrolling fails when dividing the screen.
Solution:   Position the cursor before calling ScrollConsoleScreenBuffer().
            (Nobuhiro Takasaki, closes #4115)
Files:	    src/os_win32.c

Patch 8.1.1014
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: /analyze only defined for non-debug version.
Solution:   Move adding of /analyze up. (Ken Takata, closes #4114)
Files:	    src/Make_mvc.mak

Patch 8.1.1015
Problem:    <A HREF="quickfix.html#Quickfix">Quickfix</A> buffer shows up in <A HREF="eval.html#list">list</A>, can't get buffer number.
Solution:   Make the <A HREF="quickfix.html#quickfix">quickfix</A> buffer unlisted when the <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="windows.html#window">window</A> is
            closed.  get the <A HREF="quickfix.html#quickfix">quickfix</A> buffer number with <A HREF="builtin.html#getqflist()">getqflist()</A>.
            (Yegappan Lakshmanan, closes #4113)
Files:	    runtime/doc/eval.txt, runtime/doc/quickfix.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim, src/window.c

Patch 8.1.1016
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: No color in shell when using &quot;<A HREF="change.html#!">!</A>&quot; in <A HREF="options.html#'guioptions'">'guioptions'</A>.
Solution:   Don't stop <A HREF="term.html#termcap">termcap</A> when using a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> for the shell.
            (Nobuhiro Takasaki, vim-jp, closes #4117)
Files:	    src/ex_cmds.c

Patch 8.1.1017
Problem:    Off-by-one error in <A HREF="filetype.html#filetype">filetype</A> detection.
Solution:   Also check the last line of the file.
Files:	    runtime/autoload/dist/ft.vim

Patch 8.1.1018
Problem:    Window cleared when entering <A HREF="terminal.html#Terminal-Normal">Terminal-Normal</A> <A HREF="if_cscop.html#twice">twice</A>. (Epheien)
Solution:   Don't cleanup scrollback when there is no postponed scrollback.
            (Christian Brabandt, closes #4126)
Files:	    src/terminal.c

Patch 8.1.1019
Problem:    <A HREF="if_lua.html#Lua">Lua</A>: may garbage collect function reference in use.
Solution:   Keep the function name instead of the typeval. Make luaV_setref()
            handle funcref <A HREF="index.html#objects">objects</A>. (Ozaki Kiichi, closes #4127)
Files:	    src/if_lua.c, src/testdir/test_lua.vim

Patch 8.1.1020
Problem:    Compiler warning for Python3 interface.
Solution:   Add type cast. (Ozaki Kiichi, closes #4128, closes #4103)
Files:	    src/if_python3.c

Patch 8.1.1021
Problem:    <A HREF="builtin.html#pyeval()">pyeval()</A> and <A HREF="builtin.html#py3eval()">py3eval()</A> leak memory.
Solution:   Do not increase the reference <A HREF="intro.html#count">count</A> <A HREF="if_cscop.html#twice">twice</A>. (Ozaki Kiichi,
            closes #4129)
Files:	    src/if_python.c, src/if_python3.c

Patch 8.1.1022
Problem:    May use NULL pointer when out of memory. (Coverity)
Solution:   Check for blob_alloc() returning NULL.
Files:	    src/blob.c

Patch 8.1.1023
Problem:    May use NULL pointer when indexing a <A HREF="eval.html#blob">blob</A>. (Coverity)
Solution:   Break out of loop after using index on <A HREF="eval.html#blob">blob</A>
Files:	    src/eval.c

Patch 8.1.1024
Problem:    Stray log calls in <A HREF="terminal.html#terminal">terminal</A> code. (Christian Brabandt)
Solution:   Remove the calls.
Files:	    src/terminal.c

Patch 8.1.1025
Problem:    Checking NULL pointer after addition. (Coverity)
Solution:   First check for NULL, then add the column.
Files:	    src/regexp.c

Patch 8.1.1026
Problem:    Unused condition. (Coverity)
Solution:   Remove the condition.  Also remove unused #define.
Files:	    src/move.c

Patch 8.1.1027
Problem:    Memory usage test sometimes fails.
Solution:   Use 80&#37; of before.last <A HREF="motion.html#as">as</A> the lower limit. (Christian Brabandt)
Files:	    src/testdir/test_memory_usage.vim

Patch 8.1.1028
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: memory leak when creating <A HREF="terminal.html#terminal">terminal</A> fails.
Solution:   Free the command. (Ken Takata, closes #4138)
Files:	    src/os_win32.c

Patch 8.1.1029
Problem:    DirectWrite doesn't take <A HREF="options.html#'linespace'">'linespace'</A> into account.
Solution:   Include <A HREF="options.html#'linespace'">'linespace'</A> in the position. (Ken Takata, closes #4137)
Files:	    src/gui_dwrite.cpp, src/gui_w32.c

Patch 8.1.1030
Problem:    <A HREF="quickfix.html#Quickfix">Quickfix</A> function arguments are inconsistent.
Solution:   Pass a <A HREF="eval.html#list">list</A> pointer instead of info and index. (Yegappan
            Lakshmanan, closes #4135)
Files:	    src/quickfix.c

Patch 8.1.1031
Problem:    Memory usage test may still fail.
Solution:   Drop the unused min value. (Christian Brabandt)
Files:	    src/testdir/test_memory_usage.vim

Patch 8.1.1032
Problem:    Warnings from clang static analyzer. (Yegappan Lakshmanan)
Solution:   Fix relevant warnings.
Files:	    src/arabic.c, src/edit.c, src/eval.c, src/fileio.c, src/normal.c,
            src/option.c, src/os_unix.c, src/regexp.c, src/screen.c,
            src/channel.c, src/charset.c, src/message.c

Patch 8.1.1033
Problem:    Memory usage test may still fail on some systems. (Elimar
            Riesebieter)
Solution:   Increase tolerance from 1&#37; to 3&#37;.
Files:	    src/testdir/test_memory_usage.vim

Patch 8.1.1034
Problem:    Too many #ifdefs.
Solution:   Merge FEAT_MOUSE_SGR into FEAT_MOUSE_XTERM / FEAT_MOUSE_TTY.
Files:	    src/evalfunc.c, src/misc2.c, src/os_unix.c, src/term.c,
            src/version.c, src/feature.h

Patch 8.1.1035
Problem:    <A HREF="textprop.html#prop_remove()">prop_remove()</A> second argument is not optional.
Solution:   Fix argument <A HREF="intro.html#count">count</A>.  Use &quot;buf&quot; instead of &quot;curbuf&quot;. (closes #4147)
Files:	    src/evalfunc.c, src/testdir/test_textprop.vim, src/textprop.c

Patch 8.1.1036
Problem:    <A HREF="quickfix.html#Quickfix">Quickfix</A> function arguments are inconsistent.
Solution:   Pass a <A HREF="eval.html#list">list</A> pointer to more <A HREF="eval.html#functions">functions</A>. (Yegappan Lakshmanan,
            closes #4149)
Files:	    src/quickfix.c

Patch 8.1.1037
Problem:    Memory usage test may still fail on some systems.
Solution:   Increase tolerance from 3&#37; to 20&#37;.
Files:	    src/testdir/test_memory_usage.vim

Patch 8.1.1038
Problem:    <A HREF="arabic.html#Arabic">Arabic</A> support excludes <A HREF="farsi.html#Farsi">Farsi</A>.
Solution:   Add <A HREF="farsi.html#Farsi">Farsi</A> support to the <A HREF="arabic.html#Arabic">Arabic</A> support. (Ali Gholami Rudi,
            Ameretat Reith)
Files:	    Filelist, src/arabic.c, src/arabic.h, src/globals.h, src/macros.h,
            src/mbyte.c, src/proto/arabic.pro, src/proto/mbyte.pro,
            src/Makefile, src/testdir/test_arabic.vim

Patch 8.1.1039
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> build fails.
Solution:   Remove dependency on arabic.h
Files:	    src/Make_cyg_ming.mak, src/Make_mvc.mak, src/Make_vms.mms

Patch 8.1.1040
Problem:    FEAT_TAG_ANYWHITE is not enabled in any build.
Solution:   Remove the feature.
Files:	    src/feature.h, src/tag.c, src/evalfunc.c, src/version.c,
            src/Make_vms.mms

Patch 8.1.1041
Problem:    Test for <A HREF="arabic.html#Arabic">Arabic</A> no longer needed.
Solution:   Remove the test for something that was intentionally left out.
Files:	    src/testdir/test_arabic.vim

Patch 8.1.1042
Problem:    The paste test doesn't work properly in the Windows console.
Solution:   Disable the test.
Files:	    src/testdir/test_paste.vim

Patch 8.1.1043
Problem:    <A HREF="if_lua.html#Lua">Lua</A> interface does not support <A HREF="eval.html#Blob">Blob</A>.
Solution:   Add support to <A HREF="eval.html#Blob">Blob</A>. (Ozaki Kiichi, closes #4151)
Files:	    runtime/doc/if_lua.txt, src/if_lua.c, src/testdir/test_lua.vim

Patch 8.1.1044
Problem:    No way to check the reference <A HREF="intro.html#count">count</A> of <A HREF="index.html#objects">objects</A>.
Solution:   Add <A HREF="testing.html#test_refcount()">test_refcount()</A>. (Ozaki Kiichi, closes #4124)
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_vimscript.vim

Patch 8.1.1045
Problem:    <A HREF="message.html#E315">E315</A> ml_get error when using <A HREF="if_pyth.html#Python">Python</A> and hidden buffer.
Solution:   Make sure the cursor position is valid. (Ben Jackson,
            closes #4153, closes #4154)
Files:	    src/if_py_both.h, src/testdir/test_python2.vim,
            src/testdir/test_python3.vim

Patch 8.1.1046
Problem:    the &quot;secure&quot; variable is used inconsistently. (Justin <A HREF="motion.html#M">M</A>. Keyes)
Solution:   Set <A HREF="motion.html#it">it</A> to one instead of incrementing.
Files:	    src/buffer.c, src/option.c

Patch 8.1.1047
Problem:    WINCH signal is not tested.
Solution:   Add a test. (Dominique Pelle, closes #4158)
Files:	    src/testdir/Make_all.mak, src/testdir/test_signals.vim

Patch 8.1.1048
Problem:    Minor issues with tests.
Solution:   Delete unused test OK file.  Add missing entries in <A HREF="eval.html#list">list</A> of tests.
            Fix readme file. (Masato Nishihata, closes #4160)
Files:	    src/testdir/test85.ok, src/testdir/Make_all.mak,
            src/testdir/README.txt

Patch 8.1.1049
Problem:    When user tries to exit with <A HREF="pattern.html#CTRL-C">CTRL-C</A> message is confusing.
Solution:   Only mention &quot;:qa!&quot; when there is a changed buffer. (closes #4163)
Files:	    src/undo.c, src/proto/undo.pro, src/normal.c,
            src/testdir/test_normal.vim

Patch 8.1.1050
Problem:    Blank screen when DirectWrite failed.
Solution:   Call redraw_later_clear() after recreating the Direct2D render
            target. (Ken Takata, closes #4172)
Files:	    src/gui_dwrite.cpp

Patch 8.1.1051
Problem:    Not all ways to switch <A HREF="terminal.html#terminal">terminal</A> mode are tested.
Solution:   Add more test cases.
Files:	    src/testdir/test_terminal.vim

Patch 8.1.1052
Problem:    test for <A HREF="pattern.html#CTRL-C">CTRL-C</A> message sometimes fails
Solution:   Make sure there are no changed <A HREF="windows.html#buffers">buffers</A>.
Files:	    src/testdir/test_normal.vim

Patch 8.1.1053
Problem:    Warning for missing return statement. (Dominique Pelle)
Solution:   Add return statement.
Files:	    src/undo.c

Patch 8.1.1054
Problem:    Not checking return value of ga_grow(). (Coverity)
Solution:   Only append when ga_grow() returns OK.
Files:	    src/if_lua.c

Patch 8.1.1055
Problem:    <A HREF="editing.html#CTRL-G">CTRL-G</A> <A HREF="undo.html#U">U</A> in <A HREF="insert.html#Insert">Insert</A> mode doesn't work to avoid splitting the <A HREF="undo.html#undo">undo</A>
            sequence for shift-left and shift-right.
Solution:   Also check dont_sync_undo for shifted cursor keys. (Christian
            Brabandt)
Files:	    src/edit.c, src/testdir/test_mapping.vim

Patch 8.1.1056
Problem:    No <A HREF="eval.html#eval">eval</A> function for <A HREF="if_ruby.html#Ruby">Ruby</A>.
Solution:   Add <A HREF="builtin.html#rubyeval()">rubyeval()</A>. (Ozaki Kiichi, closes #4152)
Files:	    runtime/doc/eval.txt, runtime/doc/if_ruby.txt, src/evalfunc.c,
            src/if_ruby.c, src/proto/if_ruby.pro, src/testdir/test_ruby.vim

Patch 8.1.1057
Problem:    Nsis config is too complicated.
Solution:   Use &quot;File /r&quot; for the macros and pack directories. (Ken Takata,
            closes #4169)
Files:	    nsis/gvim.nsi

Patch 8.1.1058
Problem:    Memory usage test may still fail on some systems.
Solution:   Use 98&#37; of the lower limit. (Christian Brabandt)
Files:	    src/testdir/test_memory_usage.vim

Patch 8.1.1059
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: PlatformId() is called unnecessarily.
Solution:   Remove calls to PlatformId(). (Ken Takata, closes #4170)
Files:	    src/os_win32.c

Patch 8.1.1060
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: get_cmd_args() is no longer needed, get_cmd_argsW() is
            always used.
Solution:   Remove get_cmd_args(). (Ken Takata, closes #4171)
Files:	    src/gui_w32.c, src/os_w32exe.c

Patch 8.1.1061
Problem:    When substitute <A HREF="eval.html#string">string</A> throws error, substitute happens anyway.
Solution:   Skip substitution when aborting. (closes #4161)
Files:	    src/ex_cmds.c, src/testdir/test_substitute.vim

Patch 8.1.1062
Problem:    <A HREF="quickfix.html#Quickfix">Quickfix</A> code is repeated.
Solution:   Define FOR_ALL_QFL_ITEMS(). Move some code to separate <A HREF="eval.html#functions">functions</A>.
            (Yegappan Lakshmanan, closes #4166)
Files:	    src/quickfix.c

Patch 8.1.1063
Problem:    Insufficient <A HREF="testing.html#testing">testing</A> for wildmenu completion.
Solution:   Extend the test <A HREF="change.html#case">case</A>. (Dominique Pelle, closes #4182)
Files:	    src/testdir/test_cmdline.vim

Patch 8.1.1064
Problem:    No test for output conversion in the <A HREF="gui_x11.html#GTK">GTK</A> <A HREF="gui.html#GUI">GUI</A>.
Solution:   Add a simplistic test.
Files:	    src/testdir/test_gui.vim

Patch 8.1.1065
Problem:    No test for using and <A HREF="change.html#deleting">deleting</A> menu in the <A HREF="gui.html#GUI">GUI</A>.
Solution:   Add a test.
Files:	    src/testdir/test_gui.vim

Patch 8.1.1066
Problem:    VIMDLL isn't actually used.
Solution:   Remove VIMDLL support.
Files:	    src/gui_w32.c, src/main.c, src/os_w32exe.c, src/Make_bc5.mak,
            src/os_w32dll.c

Patch 8.1.1067
Problem:    Issues added on github are unstructured.
Solution:   Add a bug and feature request <A HREF="autocmd.html#template">template</A>. (Ken Takata, closes #4183)
Files:	    .github/ISSUE_TEMPLATE/feature_request.md,
            .github/ISSUE_TEMPLATE/bug_report.md

Patch 8.1.1068
Problem:    Cannot get all the information about current completion.
Solution:   Add <A HREF="builtin.html#complete_info()">complete_info()</A>. (Shougo, Hirohito Higashi, closes #4106)
Files:	    runtime/doc/eval.txt, runtime/doc/insert.txt,
            runtime/doc/usr_41.txt, src/edit.c, src/evalfunc.c,
            src/proto/edit.pro, src/testdir/test_popup.vim

Patch 8.1.1069
Problem:    Source README file doesn't look nice on github.
Solution:   Turn <A HREF="motion.html#it">it</A> into markdown, still readable <A HREF="motion.html#as">as</A> plain text.
            (WenxuanHuang, closes #4141)
Files:	    src/README.txt, src/README.md, Filelist

Patch 8.1.1070
Problem:    Issue templates are not good enough.
Solution:   Rephrase to anticipate unexperienced users.
Files:	    .github/ISSUE_TEMPLATE/feature_request.md,
            .github/ISSUE_TEMPLATE/bug_report.md

Patch 8.1.1071
Problem:    Cannot get composing characters from the screen.
Solution:   Add <A HREF="builtin.html#screenchars()">screenchars()</A> and <A HREF="builtin.html#screenstring()">screenstring()</A>. (partly by Ozaki Kiichi,
            closes #4059)
Files:	    runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/evalfunc.c,
            src/testdir/test_utf8.vim, src/testdir/view_util.vim

Patch 8.1.1072
Problem:    Extending sign and foldcolumn below the text is confusing.
Solution:   Let the sign and foldcolumn stop at the last text line, just like
            the line number column.  Also stop the command line <A HREF="windows.html#window">window</A> leader.
            (Christian Brabandt, closes #3964)
Files:	    src/screen.c, src/testdir/test_diffmode.vim,
            src/testdir/dumps/Test_diff_of_diff_01.dump,
            src/testdir/dumps/Test_diff_01.dump,
            src/testdir/dumps/Test_diff_02.dump,
            src/testdir/dumps/Test_diff_03.dump,
            src/testdir/dumps/Test_diff_04.dump,
            src/testdir/dumps/Test_diff_05.dump,
            src/testdir/dumps/Test_diff_06.dump,
            src/testdir/dumps/Test_diff_06.0.dump,
            src/testdir/dumps/Test_diff_06.1.dump,
            src/testdir/dumps/Test_diff_06.2.dump,
            src/testdir/dumps/Test_diff_10.dump,
            src/testdir/dumps/Test_diff_11.dump,
            src/testdir/dumps/Test_diff_12.dump,
            src/testdir/dumps/Test_diff_13.dump,
            src/testdir/dumps/Test_diff_14.dump,
            src/testdir/dumps/Test_diff_15.dump,
            src/testdir/dumps/Test_diff_16.dump,
            src/testdir/dumps/Test_diff_17.dump,
            src/testdir/dumps/Test_diff_18.dump,
            src/testdir/dumps/Test_diff_19.dump,
            src/testdir/dumps/Test_diff_20.dump,
            src/testdir/dumps/Test_diff_with_cursorline_01.dump,
            src/testdir/dumps/Test_diff_with_cursorline_02.dump,
            src/testdir/dumps/Test_diff_with_cursorline_03.dump,
            src/testdir/dumps/Test_folds_with_rnu_01.dump,
            src/testdir/dumps/Test_folds_with_rnu_02.dump

Patch 8.1.1073
Problem:    Space in number column is on wrong side with <A HREF="options.html#'rightleft'">'rightleft'</A> set.
Solution:   Move the space to the text side.  Add a test.
Files:	    src/screen.c, src/testdir/test_diffmode.vim,
            src/testdir/dumps/Test_diff_of_diff_02.dump

Patch 8.1.1074
Problem:    <A HREF="if_pyth.html#Python">Python</A> test doesn't wipe out hidden buffer.
Solution:   Wipe out the buffer. (Ben Jackson, closes #4189)
Files:	    src/testdir/test_python2.vim, src/testdir/test_python3.vim

Patch 8.1.1075
Problem:    Function reference <A HREF="intro.html#count">count</A> wrong in <A HREF="if_pyth.html#Python">Python</A> code.
Solution:   Use &quot;<A HREF="insert.html#O">O</A>&quot; instead of &quot;<A HREF="pattern.html#N">N</A>&quot; for the arguments. (Ben Jackson,
            closes #4188)
Files:	    src/if_py_both.h

Patch 8.1.1076
Problem:    File for <A HREF="insert.html#Insert">Insert</A> mode is much too big.
Solution:   Split off the code for <A HREF="insert.html#Insert">Insert</A> completion. (Yegappan Lakshmanan,
            closes #4044)
Files:	    Filelist, src/Make_bc5.mak, src/Make_cyg_ming.mak,
            src/Make_dice.mak, src/Make_ivc.mak, src/Make_manx.mak,
            src/Make_morph.mak, src/Make_mvc.mak, src/Make_sas.mak,
            src/Make_vms.mms, src/Makefile, src/edit.c, src/evalfunc.c,
            src/globals.h, src/insexpand.c, src/misc2.c, src/proto.h,
            src/proto/edit.pro, src/proto/insexpand.pro, src/search.c,
            src/spell.c, src/structs.h, src/tag.c, src/vim.h

Patch 8.1.1077
Problem:    <A HREF="builtin.html#reg_executing()">reg_executing()</A> is reset by calling <A HREF="builtin.html#input()">input()</A>.
Solution:   Implement a more generic way to save and restore reg_executing.
            (Ozaki Kiichi, closes #4192)
Files:	    src/evalfunc.c, src/ex_docmd.c, src/testdir/test_functions.vim

Patch 8.1.1078
Problem:    When <A HREF="options.html#'listchars'">'listchars'</A> is set a composing char on a space is wrong.
Solution:   Separate handling a non-breaking space and a space. (Yasuhiro
            Matsumoto, closes #4046)
Files:	    src/screen.c, src/testdir/test_listchars.vim

Patch 8.1.1079
Problem:    No need for a separate ScreenLinesUtf8() test function.
Solution:   Get the composing characters with ScreenLines().
Files:	    src/testdir/view_util.vim, src/testdir/test_listchars.vim,
            src/testdir/test_utf8.vim

Patch 8.1.1080
Problem:    When a screendump test fails, moving the file is a hassle.
Solution:   Instead of appending &quot;.failed&quot; to the file name, keep the same
            file name but put the screendump in the &quot;failed&quot; directory.
            Then the file name only needs to be typed once when moving a
            screendump.
Files:	    src/testdir/screendump.vim

Patch 8.1.1081
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: cannot use fonts whose name cannot be represented in
            the current code page.
Solution:   Use wide font <A HREF="eval.html#functions">functions</A>. (Ken Takata, closes #4000)
Files:	    src/gui_w32.c, src/os_mswin.c, src/proto/gui_w32.pro,
            src/proto/os_mswin.pro

Patch 8.1.1082
Problem:    &quot;Conceal&quot; match is mixed up with <A HREF="options.html#'hlsearch'">'hlsearch'</A> match.
Solution:   Check that a match is found, not a <A HREF="options.html#'hlsearch'">'hlsearch'</A> item. (Andy
            Massimino, closes #4073)
Files:	    src/screen.c

Patch 8.1.1083
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: hang when opening a file on <A HREF="pi_netrw.html#network">network</A> share.
Solution:   Avoid using FindFirstFile(), use GetLongPathNameW(). (Ken Takata,
            closes #3923)
Files:	    src/os_win32.c

Patch 8.1.1084
Problem:    Cannot delete a match from another <A HREF="windows.html#window">window</A>. (Paul Jolly)
Solution:   Add <A HREF="windows.html#window">window</A> ID argument to <A HREF="builtin.html#matchdelete()">matchdelete()</A>, <A HREF="builtin.html#clearmatches()">clearmatches()</A>,
            <A HREF="builtin.html#getmatches()">getmatches()</A> and <A HREF="builtin.html#setmatches()">setmatches()</A>. (Andy Massimino, closes #4178)
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_match.vim

Patch 8.1.1085
Problem:    Compiler warning for possibly uninitialized variable. (Tony
            Mechelynck)
Solution:   Make conditions more logical.
Files:	    src/arabic.c

Patch 8.1.1086
Problem:    Too many curly braces.
Solution:   Remove curly braces where they are not needed. (Hirohito Higashi,
            closes #3982)
Files:	    src/autocmd.c, src/buffer.c, src/crypt_zip.c, src/dosinst.c,
            src/edit.c, src/insexpand.c, src/evalfunc.c, src/ex_cmds.c,
            src/ex_docmd.c, src/ex_getln.c, src/getchar.c, src/gui.c,
            src/gui_gtk.c, src/gui_mac.c, src/gui_motif.c, src/gui_photon.c,
            src/gui_w32.c, src/gui_x11.c, src/if_mzsch.c, src/if_python3.c,
            src/if_ruby.c, src/if_tcl.c, src/indent.c, src/libvterm/src/pen.c,
            src/macros.h, src/memline.c, src/menu.c, src/misc1.c, src/move.c,
            src/netbeans.c, src/normal.c, src/ops.c, src/option.c,
            src/os_mswin.c, src/os_qnx.c, src/os_unix.c, src/os_win32.c,
            src/regexp_nfa.c, src/screen.c, src/spell.c, src/terminal.c

Patch 8.1.1087
Problem:    <A HREF="tagsrch.html#tag">tag</A> stack is incorrect after <A HREF="tagsrch.html#CTRL-T">CTRL-T</A> and then <A HREF="tagsrch.html#:tag">:tag</A>
Solution:   Handle DT_TAG differently. (test by Andy Massimino, closes #3944,
            closes #4177)
Files:	    src/tag.c, src/testdir/test_tagjump.vim

Patch 8.1.1088
Problem:    Height of <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="windows.html#window">window</A> not retained with vertical split.
Solution:   Use frame_fixed_height() and frame_fixed_width(). (Hongbo Liu,
            closes #4013, closes #2998)
Files:	    src/testdir/test_winbuf_close.vim, src/window.c

Patch 8.1.1089
Problem:    Tutor does not check $LC_MESSAGES.
Solution:   Let $LC_MESSAGES overrule $LANG. (Miklos Vajna, closes #4112)
Files:	    runtime/tutor/tutor.vim

Patch 8.1.1090
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: modify_fname() has problems with some <A HREF="options.html#'encoding'">'encoding'</A>.
Solution:   Use GetLongPathNameW() instead of GetLongPathName(). (Ken Takata,
            closes #4007)
Files:	    src/eval.c

Patch 8.1.1091
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: cannot use <A HREF="mbyte.html#multibyte">multibyte</A> chars in environment var.
Solution:   Use the wide API. (Ken Takata, closes #4008)
Files:	    src/misc1.c, src/testdir/test_let.vim

Patch 8.1.1092
Problem:    Setting <A HREF="options.html#'guifont'">'guifont'</A> when maximized resizes the Vim <A HREF="windows.html#window">window</A>. When
            <A HREF="options.html#'guioptions'">'guioptions'</A> contains &quot;<A HREF="motion.html#k">k</A>&quot; <A HREF="starting.html#gvim">gvim</A> may open with a tiny <A HREF="windows.html#window">window</A>.
Solution:   Avoid un-maximizing when setting <A HREF="options.html#'guifont'">'guifont'</A>. (Yee Cheng Chin,
            closes #3808)
Files:	    src/gui.c

Patch 8.1.1093
Problem:    Support for outdated <A HREF="tagsrch.html#tags">tags</A> format slows down <A HREF="tagsrch.html#tag">tag</A> parsing.
Solution:   Remove FEAT_TAG_OLDSTATIC.
Files:	    runtime/doc/tagsrch.txt, src/feature.h, src/tag.c, src/version.c

Patch 8.1.1094
Problem:    Long line in <A HREF="tagsrch.html#tags">tags</A> file causes error.
Solution:   Check for overlong line earlier. (Andy Massimino, closes #4051,
            closes #4084)
Files:	    src/tag.c, src/testdir/test_tagjump.vim

Patch 8.1.1095
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="builtin.html#executable()">executable()</A> fails on very long filename.
Solution:   Use much bigger buffer. (Ken Takata, closes #4015)
Files:	    src/os_win32.c, src/testdir/test_functions.vim

Patch 8.1.1096
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: cannot distinguish BS and <A HREF="motion.html#CTRL-H">CTRL-H</A>.
Solution:   Add code for VK_BACK. (Linwei, closes #1833)
Files:	    src/term.c, src/os_win32.c

Patch 8.1.1097 (after 8.1.1092)
Problem:    <A HREF="gui_x11.html#Motif">Motif</A> build fails. (Paul Jolly)
Solution:   Only use gui_mch_maximized() for <A HREF="os_win32.html#MS-Windows">MS-Windows</A>. (closes #4194)
Files:	    src/gui.c

Patch 8.1.1098
Problem:    <A HREF="quickfix.html#Quickfix">Quickfix</A> code duplication.
Solution:   Refactor the qf_init_ext() function. (Yegappan Lakshmanan,
            closes #4193)
Files:	    src/README.md, src/quickfix.c

Patch 8.1.1099
Problem:    The do_tag() function is too long.
Solution:   Factor parts out to separate <A HREF="eval.html#functions">functions</A>.  Move simplify_filename()
            to a file where <A HREF="motion.html#it">it</A> fits better. (Andy Massimino, closes #4195)
Files:	    src/tag.c, src/proto/tag.pro, src/findfile.c,
            src/proto/findfile.pro

Patch 8.1.1100
Problem:    Tag file without trailing newline no longer works. (Marco Hinz)
Solution:   Don't expect a newline at the end of the file. (closes #4200)
Files:	    src/tag.c, src/testdir/test_taglist.vim

Patch 8.1.1101
Problem:    Signals test may fail in the <A HREF="gui.html#GUI">GUI</A>.
Solution:   Skip the test for the <A HREF="gui.html#GUI">GUI</A>. (Yee Checng Chin, closes #4202)
Files:	    src/testdir/test_signals.vim

Patch 8.1.1102
Problem:    <A HREF="os_win32.html#Win32">Win32</A> exe file contains unused code.
Solution:   Remove unused #ifdefs and code. (Ken Takata, closes #4198)
Files:	    src/os_w32exe.c

Patch 8.1.1103
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: old API calls are no longer needed.
Solution:   Always use the wide <A HREF="eval.html#functions">functions</A>. (Ken Takata, closes #4199)
Files:	    src/glbl_ime.cpp, src/globals.h, src/gui_w32.c, src/misc1.c,
            src/os_mswin.c, src/os_win32.c, src/vim.h,

Patch 8.1.1104
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: not all environment <A HREF="eval.html#variables">variables</A> can be used.
Solution:   Use the wide version of WinMain() and main(). (Ken Takata,
            closes #4206)
Files:	    src/Make_cyg.mak, src/Make_cyg_ming.mak, src/Make_mvc.mak,
            src/main.c, src/os_w32exe.c

Patch 8.1.1105
Problem:    Long <A HREF="intro.html#escape">escape</A> sequences may be split up.
Solution:   Assume <A HREF="intro.html#escape">escape</A> sequences can be up to 80 bytes long. (Nobuhiro
            Takasaki, closes #4196)
Files:	    src/term.c

Patch 8.1.1106
Problem:    No test for <A HREF="options.html#'writedelay'">'writedelay'</A>.
Solution:   Add a test.
Files:	    src/testdir/test_options.vim

Patch 8.1.1107
Problem:    No test for <A HREF="options.html#'visualbell'">'visualbell'</A>.
Solution:   Add a test.
Files:	    src/testdir/test_options.vim

Patch 8.1.1108
Problem:    Test for <A HREF="options.html#'visualbell'">'visualbell'</A> doesn't work.
Solution:   Make <A HREF="options.html#'belloff'">'belloff'</A> empty.
Files:	    src/testdir/test_options.vim

Patch 8.1.1109
Problem:    Deleted file still in <A HREF="eval.html#list">list</A> of distributed files.
Solution:   Remove the src/os_w32dll.c entry.
Files:	    Filelist

Patch 8.1.1110
Problem:    Composing chars on space wrong when <A HREF="options.html#'listchars'">'listchars'</A> is set.
Solution:   Do not use &quot;space&quot; and &quot;nbsp&quot; entries of <A HREF="options.html#'listchars'">'listchars'</A> when there is
            a composing character.  (Yee Cheng Chin, closes #4197)
Files:	    src/screen.c, src/testdir/test_listchars.vim

Patch 8.1.1111
Problem:    It is not <A HREF="starting.html#easy">easy</A> to check for infinity.
Solution:   Add <A HREF="builtin.html#isinf()">isinf()</A>. (Ozaki Kiichi, closes #3787)
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_float_func.vim

Patch 8.1.1112
Problem:    Duplicate code in <A HREF="quickfix.html#quickfix">quickfix</A> file.
Solution:   Move code into <A HREF="eval.html#functions">functions</A>. (Yegappan Lakshmanan, closes #4207)
Files:	    src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.1113
Problem:    Making an <A HREF="autocmd.html#autocommand">autocommand</A> trigger once is not so <A HREF="starting.html#easy">easy</A>.
Solution:   Add the ++once argument.  Also add ++nested <A HREF="motion.html#as">as</A> an alias for
            &quot;nested&quot;. (Justin <A HREF="motion.html#M">M</A>. Keyes, closes #4100)
Files:	    runtime/doc/autocmd.txt, src/autocmd.c,
            src/testdir/test_autocmd.vim, src/globals.h

Patch 8.1.1114
Problem:    Confusing overloaded <A HREF="motion.html#operator">operator</A> &quot;<A HREF="repeat.html#.">.</A>&quot; for <A HREF="eval.html#string">string</A> concatenation.
Solution:   Add &quot;..&quot; for <A HREF="eval.html#string">string</A> concatenation.  Also &quot;let a ..= b&quot;.
Files:	    src/eval.c, src/testdir/test_eval_stuff.vim, runtime/doc/eval.txt

Patch 8.1.1115
Problem:    Cannot build with older C compiler.
Solution:   Move variable declaration to start of block.
Files:	    src/autocmd.c

Patch 8.1.1116
Problem:    Cannot enforce a Vim <A HREF="usr_41.html#script">script</A> style.
Solution:   Add the <A HREF="repeat.html#:scriptversion">:scriptversion</A> command. (idea by Yasuhiro Matsumoto,
            closes #3857)
Files:	    runtime/doc/repeat.txt, runtime/doc/eval.txt, src/eval.c,
            src/ex_cmds.h, src/evalfunc.c, src/ex_cmds2.c,
            src/proto/ex_cmds2.pro, src/structs.h, src/buffer.c, src/main.c,
            src/option.c, src/ex_cmdidxs.h, src/testdir/test_eval_stuff.vim

Patch 8.1.1117
Problem:    Build failure without the <A HREF="various.html#+eval">+eval</A> feature.
Solution:   Add #ifdef.
Files:	    src/ex_cmds2.c

Patch 8.1.1118
Problem:    A couple of conditions are hard to understand.
Solution:   Split the conditions into pieces. (Ozaki Kiichi, closes #3879)
Files:	    src/getchar.c, src/os_unix.c

Patch 8.1.1119
Problem:    No support for Windows on ARM64.
Solution:   Add ARM64 support (Leendert van Doorn)
Files:	    src/GvimExt/Makefile, src/Make_mvc.mak, src/dosinst.c,
            src/xpm/arm64/lib-vc14/libXpm.lib, Filelist, src/INSTALLpc.txt

Patch 8.1.1120
Problem:    Cannot easily get directory entry matches.
Solution:   Add the <A HREF="builtin.html#readdir()">readdir()</A> function. (Yasuhiro Matsumoto, closes #2439)
Files:	    runtime/doc/eval.txt, src/eval.c, src/evalfunc.c, src/misc1.c,
            src/proto/eval.pro, src/testdir/test_functions.vim

Patch 8.1.1121
Problem:    Test for <A HREF="terminal.html#term_gettitle()">term_gettitle()</A> was disabled.
Solution:   Enable the test and bail out only when <A HREF="motion.html#it">it</A> doesn't work. (Dominique
            Pelle, closes #3776)
Files:	    src/testdir/test_terminal.vim

Patch 8.1.1122
Problem:    <A HREF="builtin.html#char2nr()">char2nr()</A> does not handle composing characters.
Solution:   Add <A HREF="builtin.html#str2list()">str2list()</A> and <A HREF="builtin.html#list2str()">list2str()</A>. (Ozaki Kiichi, closes #4190)
Files:	    runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/evalfunc.c,
            src/testdir/test_utf8.vim

Patch 8.1.1123
Problem:    No way to avoid filtering for autocomplete function, causing
            flickering of the <A HREF="popup.html#popup">popup</A> menu.
Solution:   Add the &quot;equal&quot; field to complete items. (closes #3887)
Files:	    runtime/doc/insert.txt, src/insexpand.c,
            src/testdir/test_popup.vim

Patch 8.1.1124
Problem:    <A HREF="insert.html#Insert">Insert</A> completion flags are mixed up.
Solution:   Clean up flags use of ins_compl_add() and cp_flags.
Files:	    src/insexpand.c, src/proto/insexpand.pro, src/search.c, src/spell.c

Patch 8.1.1125
Problem:    Libvterm does not handle the <A HREF="windows.html#window">window</A> position report.
Solution:   Let libvterm call the fallback CSI handler when not handling CSI
            sequence.  Handle the <A HREF="windows.html#window">window</A> position report in Vim.
Files:	    src/libvterm/src/state.c, src/terminal.c, src/ui.c,
            src/proto/ui.pro, src/evalfunc.c, src/testdir/test_terminal.vim

Patch 8.1.1126
Problem:    Build failure with <A HREF="various.html#+terminal">+terminal</A> but without tgetent.
Solution:   Adjust #ifdef.
Files:	    src/ui.c

Patch 8.1.1127
Problem:    <A HREF="builtin.html#getwinpos()">getwinpos()</A> doesn't work in <A HREF="terminal.html#terminal">terminal</A> on <A HREF="os_win32.html#MS-Windows">MS-Windows</A> console.
Solution:   Adjust #ifdefs.  Disable test for <A HREF="os_win32.html#MS-Windows">MS-Windows</A> console.
Files:	    src/ui.c, src/term.c, src/terminal.c,
            src/testdir/test_terminal.vim

Patch 8.1.1128
Problem:    <A HREF="builtin.html#getwinpos()">getwinpos()</A> test does not work on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Skip the test.
Files:	    src/testdir/test_terminal.vim

Patch 8.1.1129
Problem:    When making a new screendump test have to create the file.
Solution:   Continue creating the failed screendump, so <A HREF="motion.html#it">it</A> can be moved once
            <A HREF="motion.html#it">it</A> is correct.
Files:	    src/testdir/screendump.vim

Patch 8.1.1130
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: warning for unused variable.
Solution:   Remove the variable.
Files:	    src/evalfunc.c

Patch 8.1.1131
Problem:    <A HREF="builtin.html#getwinpos()">getwinpos()</A> does not work in the <A HREF="os_win32.html#MS-Windows">MS-Windows</A> console.
Solution:   Implement <A HREF="builtin.html#getwinpos()">getwinpos()</A>.
Files:	    src/ui.c, src/evalfunc.c, src/terminal.c,
            src/testdir/test_terminal.vim

Patch 8.1.1132
Problem:    <A HREF="builtin.html#getwinpos()">getwinpos()</A> test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Don't try running this test.
Files:	    src/testdir/test_terminal.vim

Patch 8.1.1133
Problem:    Compiler warning for uninitialized struct member. (Yegappan
            Lakshmanan)
Solution:   Add initializer field.
Files:	    src/globals.h

Patch 8.1.1134
Problem:    Buffer for <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="windows.html#window">window</A> is reused for another file.
Solution:   Don't reuse the <A HREF="quickfix.html#quickfix">quickfix</A> buffer. (Yegappan Lakshmanan)
Files:	    src/buffer.c, src/testdir/test_quickfix.vim

Patch 8.1.1135 (after 8.1.1134)
Problem:    Build failure for small version. (Tony Mechelynck)
Solution:   Add #ifdef.
Files:	    src/buffer.c

Patch 8.1.1136
Problem:    Decoding of mouse click <A HREF="intro.html#escape">escape</A> sequence is not tested.
Solution:   Add a test for xterm and SGR using low-level input.  Make
            low-level input execution with <A HREF="builtin.html#feedkeys()">feedkeys()</A> work.
Files:	    src/testdir/test_termcodes.vim, src/testdir/Make_all.mak,
            src/evalfunc.c, src/ex_docmd.c

Patch 8.1.1137
Problem:    Xterm mouse wheel <A HREF="intro.html#escape">escape</A> sequence is not tested.
Solution:   Add a test using low-level input. (Dominique Pelle, closes #4221)
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.1138
Problem:    Plugins don't get notified when the <A HREF="popup.html#popup">popup</A> menu changes.
Solution:   Add the <A HREF="autocmd.html#CompleteChanged">CompleteChanged</A> event. (Qiming Zhao, Andy Massimino,
            closes #4176)
Files:	    runtime/doc/autocmd.txt, src/autocmd.c, src/dict.c,
            src/insexpand.c, src/popupmnu.c, src/proto/autocmd.pro,
            src/proto/dict.pro, src/proto/popupmnu.pro,
            src/testdir/test_popup.vim, src/vim.h

Patch 8.1.1139
Problem:    No test for what is fixed in patch 8.1.0716.
Solution:   Add a test. (Yasuhiro Matsumoto, closes #3797)
Files:	    src/testdir/test_ins_complete.vim

Patch 8.1.1140
Problem:    Not <A HREF="starting.html#easy">easy</A> to find out what neighbors a <A HREF="windows.html#window">window</A> has.
Solution:   Add more arguments to <A HREF="builtin.html#winnr()">winnr()</A>. (Yegappan Lakshmanan, closes #3993)
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/proto/window.pro,
            src/testdir/test_window_cmd.vim, src/window.c

Patch 8.1.1141
Problem:    Terminal winpos test fails with very large <A HREF="terminal.html#terminal">terminal</A>. (Dominique
            Pelle)
Solution:   Compute the expected size more accurately. (closes #4228)
Files:	    src/testdir/test_terminal.vim

Patch 8.1.1142
Problem:    No test for dragging the <A HREF="windows.html#window">window</A> separators with the mouse.
Solution:   Add a test. (Dominique Pelle, closes #4226)
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.1143
Problem:    May pass weird strings to file name expansion.
Solution:   Check for matching characters.  Disallow <A HREF="intro.html#control">control</A> characters.
Files:	    src/misc1.c, src/testdir/test_spell.vim, src/option.c,
            src/proto/option.pro, src/spell.c,
            src/testdir/test_escaped_glob.vim

Patch 8.1.1144 (after 8.1.1143)
Problem:    Too strict checking of the <A HREF="options.html#'spellfile'">'spellfile'</A> option.
Solution:   Allow for a path.
Files:	    src/option.c, src/testdir/test_spell.vim

Patch 8.1.1145
Problem:    Compiler warning for unused function. (Tony Mechelynck)
Solution:   Add #ifdef.
Files:	    src/option.c

Patch 8.1.1146
Problem:    In <A HREF="os_win32.html#MS-Windows">MS-Windows</A> console colors in a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> are wrong.
Solution:   Use the ansi index also for 16 colors. (Ken Takata)
Files:	    src/terminal.c

Patch 8.1.1147
Problem:    Desktop file translations are requiring manual updates.
Solution:   Use the .po files for desktop file translations. (Christian
            Brabandt)
Files:	    src/po/Makefile, src/po/gvim.desktop.in, src/po/vim.desktop.in,
            CONTRIBUTING.md, Filelist, runtime/vim.desktop,
            runtime/gvim.desktop

Patch 8.1.1148
Problem:    <A HREF="various.html#CTRL-L">CTRL-L</A> with <A HREF="options.html#'incsearch'">'incsearch'</A> does not pick up char under cursor.
            (Smylers)
Solution:   Do not compare the position with the cursor position. (Hirohito
            Higashi, closes #3620)
Files:	    src/ex_getln.c, src/testdir/test_search.vim

Patch 8.1.1149
Problem:    Building desktop files fails with older msgfmt.
Solution:   Add autoconf check.  Avoid always building the desktop files.
Files:	    src/configure.ac, src/auto/configure, src/po/Makefile,
            src/po/Make_all.mak, src/config.mk.in

Patch 8.1.1150
Problem:    Generating desktop files not tested on Travis.
Solution:   Install a newer msgfmt package. (Christian Brabandt)
Files:	    .travis.yml

Patch 8.1.1151
Problem:    Build fails when using shadow directory.
Solution:   Link the desktop.in files.
Files:	    src/Makefile

Patch 8.1.1152
Problem:    Compiler warning with VS2019.
Solution:   Specify different offset for &quot;AMD64&quot;. (Ken Takata, closes #4235)
Files:	    src/GvimExt/Makefile

Patch 8.1.1153
Problem:    Msgfmt complains about missing LINGUAS file. (Tony Mechelynck)
Solution:   Add command to generate LINGUAS.
Files:	    src/po/Makefile

Patch 8.1.1154
Problem:    Getting a newer msgfmt on Travis is too complicated.
Solution:   Use a &quot;sourceline&quot; entry. (Ozaki Kiichi, closes #4236)
Files:	    .travis.yml

Patch 8.1.1155
Problem:    Termcodes tests can be improved.
Solution:   Add helper <A HREF="eval.html#functions">functions</A> to simplify tests.  Dragging statusline for
            xterm and sgr. (Dominique Pelle, closes #4237)
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.1156
Problem:    <A HREF="mbyte.html#Unicode">Unicode</A> emoji and other image characters not recognized.
Solution:   Add ranges for musical <A HREF="intro.html#notation">notation</A>, game pieces, etc. (Martin
            Tournoij, closes #4238)
Files:	    src/mbyte.c

Patch 8.1.1157
Problem:    <A HREF="mbyte.html#Unicode">Unicode</A> tables are out of date.
Solution:   Update to <A HREF="mbyte.html#Unicode">Unicode</A> 12. (Christian Brabandt, closes #4240)
Files:	    src/mbyte.c

Patch 8.1.1158
Problem:    Json encoded <A HREF="eval.html#string">string</A> is sometimes missing the final NUL.
Solution:   Add the NUL.  Also for log <A HREF="message.html#messages">messages</A>.
Files:	    src/json.c, src/channel.c, src/testdir/test_json.vim

Patch 8.1.1159
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: with a silent (un)install $VIM/_vimrc is removed.
Solution:   Don't delete <A HREF="starting.html#_vimrc">_vimrc</A> in silent mode. (Ken Takata, closes #4242)
Files:	    nsis/gvim.nsi

Patch 8.1.1160
Problem:    Termcodes test would fail in a very big <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Bail out when the row is larger than what will work. (Dominique
            Pelle, closes #4246)
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.1161
Problem:    Unreachable code.
Solution:   Remove condition that will never be <A HREF="vim9.html#true">true</A>.  Add tests for all ANSI
            colors.
Files:	    src/terminal.c, src/testdir/test_terminal.vim,
            src/testdir/dumps/Test_terminal_all_ansi_colors.dump

Patch 8.1.1162
Problem:    Incorrect coverage information; typo in color name.
Solution:   Fix the typo.  Set environment <A HREF="eval.html#variables">variables</A> to have a nested Vim
            write the coverage info in another directory.
Files:	    src/testdir/test_terminal.vim, src/testdir/screendump.vim,
            src/testdir/dumps/Test_terminal_all_ansi_colors.dump

Patch 8.1.1163
Problem:    Codecov does not report all the coverage information.
Solution:   Make a second run with the nested execution output, expect that
            Codecov will <A HREF="diff.html#merge">merge</A> the results.
Files:	    .travis.yml

Patch 8.1.1164
Problem:    Gettitle test is failing when server name differs. (Kenta Sato)
Solution:   Accept &quot;VIM1&quot; when 'autoservername' is used. (Dominique Pelle,
            closes #4250, closes #4249)
Files:	    src/testdir/test_terminal.vim

Patch 8.1.1165
Problem:    No test for mouse clicks in the <A HREF="terminal.html#terminal">terminal</A> <A HREF="tabpage.html#tabpage">tabpage</A> line.
Solution:   Add a test. (Dominique Pelle, closes #4247).  Also init
            TabPageIdxs[], in <A HREF="change.html#case">case</A> it's used before a redraw.
Files:	    src/screen.c, src/testdir/test_termcodes.vim

Patch 8.1.1166 (after 8.1.1164)
Problem:    Gettitle test can still fail when another Vim is running.
Solution:   Accept any server name number. (Dominique Pelle, closes #4252)
Files:	    src/testdir/test_terminal.vim

Patch 8.1.1167
Problem:    No test for closing <A HREF="intro.html#tab">tab</A> by click in tabline.
Solution:   Add a test.  Also fix that dragging <A HREF="windows.html#window">window</A> separator could fail in
            a large <A HREF="terminal.html#terminal">terminal</A>. (Dominique Pelle, closes #4253)
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.1168
Problem:    Not all screen update code of the <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> is executed in
            tests.
Solution:   Redraw before taking a screenshot.
Files:	    src/testdir/screendump.vim

Patch 8.1.1169
Problem:    Writing coverage info in a separate dir is not needed.
Solution:   Revert the changes to use a separate directory.
Files:	    .travis.yml, src/testdir/screendump.vim

Patch 8.1.1170
Problem:    Terminal ANSI color test does not cover all colors.
Solution:   Use the color number, the name is not always resulting in an ANSI
            color when <A HREF="term.html#t_Co">t_Co</A> is 256.
Files:	    src/testdir/test_terminal.vim,
            src/testdir/dumps/Test_terminal_all_ansi_colors.dump

Patch 8.1.1171
Problem:    Statusline test could fail in large <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Make the test work on a huge <A HREF="terminal.html#terminal">terminal</A>. (Dominique Pelle,
            closes #4255)
Files:	    src/testdir/test_statusline.vim

Patch 8.1.1172
Problem:    Cursor properties were not fully tested.
Solution:   Add a test. (Dominique Pelle, closes #4256)
Files:	    src/testdir/test_terminal.vim

Patch 8.1.1173
Problem:    Suspend test has duplicated lines.
Solution:   Use a function.
Files:	    src/testdir/test_suspend.vim

Patch 8.1.1174
Problem:    Cannot build with <A HREF="if_ruby.html#Ruby">Ruby</A> 1.8. (Tom <A HREF="motion.html#G">G</A>. Christensen)
Solution:   Include ruby/st.h. (Ozaki Kiichi, closes #4257)
Files:	    src/if_ruby.c

Patch 8.1.1175
Problem:    No test for dragging a <A HREF="intro.html#tab">tab</A> with the mouse and for creating a new
            <A HREF="intro.html#tab">tab</A> by double clicking in the tabline.
Solution:   Add two tests. (Dominique Pelle, closes #4258)
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.1176 (after 8.1.1175)
Problem:    Test for dragging a <A HREF="intro.html#tab">tab</A> is flaky.
Solution:   Add a brief sleep.
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.1177
Problem:    .ts files are recognized <A HREF="motion.html#as">as</A> xml, while typescript is more common.
Solution:   Recognize .ts files <A HREF="motion.html#as">as</A> typescript. (closes #4264)
Files:	    runtime/filetype.vim src/testdir/test_filetype.vim

Patch 8.1.1178
Problem:    When mouse click tests fails value of <A HREF="options.html#'ttymouse'">'ttymouse'</A> is unknown.
Solution:   Add a message to the assert.
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.1179
Problem:    No test for mouse clicks in the fold column.
Solution:   Add a test. (Dominique Pelle, closes #4261)
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.1180
Problem:    Vim <A HREF="usr_41.html#script">script</A> debugger tests are old style.
Solution:   Turn into new style tests. (Yegappan Lakshmanan, closes #4259)
Files:	    src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test108.in, src/testdir/test108.ok,
            src/testdir/test_debugger.vim

Patch 8.1.1181
Problem:    Tests for mouse clicks are a bit flaky when run in an interactive
            <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Use &quot;xterm2&quot; instead of &quot;xterm&quot; for <A HREF="options.html#'ttymouse'">'ttymouse'</A> to avoid spurious
            drag events.
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.1182
Problem:    Some function prototypes are outdated.
Solution:   Update function prototypes. (Ken Takata, closes #4267)
Files:	    src/os_mswin.c, src/proto/ex_getln.pro, src/proto/gui_w32.pro,
            src/terminal.c, src/proto/terminal.pro, src/proto/window.pro,
            src/window.c

Patch 8.1.1183
Problem:    Typos in <A HREF="if_ole.html#VisVim">VisVim</A> comments.
Solution:   Correct the typos. (Christ van Willegen)
Files:	    src/VisVim/Commands.cpp, src/VisVim/OleAut.cpp,
            src/VisVim/README_VisVim.txt

Patch 8.1.1184
Problem:    Undo file left behind after running test.
Solution:   Delete the <A HREF="undo.html#undo">undo</A> file. (Dominique Pelle, closes #4279)
Files:	    src/testdir/test_filechanged.vim

Patch 8.1.1185
Problem:    Mapping for <A HREF="change.html#CTRL-X">CTRL-X</A> is inconsistent.
Solution:   Map <A HREF="change.html#CTRL-X">CTRL-X</A> to &quot;*d also for the <A HREF="os_win32.html#MS-Windows">MS-Windows</A> console. (Ken Takata,
            closes #4265)
Files:	    src/getchar.c

Patch 8.1.1186
Problem:    <A HREF="builtin.html#readdir()">readdir()</A> allocates <A HREF="eval.html#list">list</A> <A HREF="if_cscop.html#twice">twice</A>.
Solution:   Remove second allocation.  Also check for zero length.
Files:	    src/evalfunc.c

Patch 8.1.1187
Problem:    Cannot recognize Pipfile.
Solution:   Use existing <A HREF="filetype.html#filetypes">filetypes</A>. (Charles Ross, closes #4280)
Files:	    runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.1.1188
Problem:    Not all Vim <A HREF="eval.html#variables">variables</A> require the <A HREF="eval.html#v:">v:</A> prefix.
Solution:   When <A HREF="eval.html#scriptversion">scriptversion</A> is 3 all Vim <A HREF="eval.html#variables">variables</A> can only be used with
            the <A HREF="eval.html#v:">v:</A> prefix.  (Ken Takata, closes #4274)
Files:	    src/eval.c, src/ex_cmds2.c, src/testdir/test_eval_stuff.vim,
            runtime/doc/eval.txt

Patch 8.1.1189
Problem:    Mode is not cleared when leaving <A HREF="insert.html#Insert">Insert</A> mode.
Solution:   Clear the mode when got_int is set. (Ozaki Kiichi, closes #4270)
Files:	    src/edit.c, src/testdir/test_bufline.vim,
            src/testdir/test_messages.vim

Patch 8.1.1190
Problem:    has('vimscript-3') does not work.
Solution:   Add &quot;vimscript-3&quot; to the <A HREF="eval.html#list">list</A> of features. (partly by Ken Takata)
Files:	    src/evalfunc.c, src/testdir/test_eval_stuff.vim

Patch 8.1.1191
Problem:    Not all debug commands are covered by a test.
Solution:   Add more tests. (Yegappan Lakshmanan, closes #4282)
Files:	    src/testdir/test_debugger.vim

Patch 8.1.1192
Problem:    Mode is not cleared when leaving <A HREF="insert.html#Insert">Insert</A> mode with mapped Esc.
Solution:   Clear the mode when redraw_cmdline is set. (closes #4269)
Files:	    src/globals.h, src/screen.c, src/testdir/test_messages.vim

Patch 8.1.1193
Problem:    Typos and small problems in test files.
Solution:   Small improvements.
Files:	    src/testdir/test_gn.vim, src/testdir/test_quotestar.vim,
            src/testdir/test_registers.vim, src/testdir/test_syntax.vim,
            src/testdir/test_tabpage.vim, src/testdir/test_vartabs.vim

Patch 8.1.1194
Problem:    Typos and small problems in source files.
Solution:   Small fixes.
Files:	    src/channel.c, src/crypt.c, src/edit.c, src/regexp.h, src/tag.c,
            src/term.c, src/terminal.c, src/userfunc.c, src/installman.sh

Patch 8.1.1195
Problem:    Vim <A HREF="usr_41.html#script">script</A> debugger functionality needs cleanup.
Solution:   Move debugger code to a separate file.  Add more tests. (Yegappan
            Lakshmanan, closes #4285)
Files:	    Filelist, src/Make_bc5.mak, src/Make_cyg_ming.mak,
            src/Make_dice.mak, src/Make_ivc.mak, src/Make_manx.mak,
            src/Make_morph.mak, src/Make_mvc.mak, src/Make_sas.mak,
            src/Make_vms.mms, src/Makefile, src/debugger.c, src/ex_cmds2.c,
            src/proto.h, src/proto/debugger.pro, src/proto/ex_cmds2.pro

Patch 8.1.1196
Problem:    Parallel build may fail.
Solution:   Update dependencies.
Files:	    src/Makefile

Patch 8.1.1197
Problem:    When starting with multiple tabs file <A HREF="message.html#messages">messages</A> is confusing.
Solution:   Set <A HREF="options.html#'shortmess'">'shortmess'</A> when loading the other tabs. (Christian Brabandt)
Files:	    src/main.c, src/testdir/test_startup.vim,
            src/testdir/dumps/Test_start_with_tabs.dump

Patch 8.1.1198
Problem:    Bracketed paste may remain active after Vim exists, because the
            <A HREF="terminal.html#terminal">terminal</A> emulator restores the setting.
Solution:   Set/reset bracketed paste mode before setting the <A HREF="terminal.html#terminal">terminal</A> mode.
            (closes #3579)
Files:	    src/term.c


Patch 8.1.1199
Problem:    No test for <A HREF="map.html#:abclear">:abclear</A>.
Solution:   Add a test. (Dominique Pelle, closes #4292)
Files:	    src/testdir/test_mapping.vim

Patch 8.1.1200
Problem:    Old style comments in debugger source.
Solution:   Use new style comments. (Yegappan Lakshmanan, closes #4286)
Files:	    src/README.md, src/debugger.c

Patch 8.1.1201
Problem:    Output of <A HREF="map.html#:command">:command</A> is hard to read.
Solution:   Make some columns wider, some narrower.  Truncate the command when
            listing all.
Files:	    src/ex_docmd.c, src/message.c, src/proto/message.pro,
            src/getchar.c, src/menu.c

Patch 8.1.1202
Problem:    Always get <A HREF="pattern.html#regexp">regexp</A> debugging logs when building with -DDEBUG.
Solution:   By default <A HREF="diff.html#do">do</A> not create <A HREF="pattern.html#regexp">regexp</A> debugging logs. (Ken Takata)
Files:	    src/regexp.c

Patch 8.1.1203
Problem:    Some autocmd tests are old style.
Solution:   Turn the tests into new style. (Yegappan Lakshmanan, closes #4295)
Files:	    src/Makefile, src/testdir/Make_all.mak,
            src/testdir/Make_amiga.mak, src/testdir/Make_vms.mms,
            src/testdir/test11.in, src/testdir/test11.ok,
            src/testdir/test_autocmd.vim

Patch 8.1.1204
Problem:    Output of <A HREF="map.html#:command">:command</A> with address completion is not nice.
Solution:   Shorten the address completion names.
Files:	    src/ex_docmd.c, runtime/doc/map.txt

Patch 8.1.1205
Problem:    A <A HREF="autocmd.html#BufReadPre">BufReadPre</A> <A HREF="autocmd.html#autocommand">autocommand</A> may cause the cursor to move.
Solution:   Restore the cursor position after executing the <A HREF="autocmd.html#autocommand">autocommand</A>,
            unless the <A HREF="autocmd.html#autocommand">autocommand</A> moved <A HREF="motion.html#it">it</A>. (Christian Brabandt,
            closes #4302, closes #4294)
Files:	    src/autocmd.c, src/proto/window.pro, src/structs.h,
            src/testdir/test_autocmd.vim, src/window.c

Patch 8.1.1206
Problem:    <A HREF="autocmd.html#User">User</A> command parsing and listing not properly tested.
Solution:   Add more tests. (Dominique Pelle, closes #4296)
Files:	    src/testdir/test_usercommands.vim

Patch 8.1.1207
Problem:    Some compilers give warning <A HREF="message.html#messages">messages</A>.
Solution:   Initialize <A HREF="eval.html#variables">variables</A>, change <A HREF="builtin.html#printf()">printf()</A> argument. (Christian
            Brabandt, closes #4305)
Files:	    src/eval.c, src/screen.c, src/undo.c, src/window.c

Patch 8.1.1208
Problem:    Links to repository use wrong file name.
Solution:   Swap the file names. (Nahuel Ourthe, closes #4304)
Files:	    src/README.md

Patch 8.1.1209
Problem:    Clever compiler warns for buffer being too small.
Solution:   Make the buffer bigger (even though it's not really needed).
Files:	    src/evalfunc.c, src/syntax.c

Patch 8.1.1210
Problem:    Support for user commands is spread out. No good reason to make
            user commands optional.
Solution:   Move user command support to usercmd.c.  Always enable the
            user_commands feature.
Files:	    src/usercmd.c, src/proto/usercmd.pro, Filelist, src/Make_bc5.mak,
            src/Make_cyg_ming.mak, src/Make_dice.mak, src/Make_ivc.mak,
            src/Make_manx.mak, src/Make_morph.mak, src/Make_mvc.mak,
            src/Make_sas.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/buffer.c, src/eval.c, src/evalfunc.c, src/ex_cmds.h,
            src/ex_docmd.c, src/proto/ex_docmd.pro, src/ex_getln.c,
            src/feature.h, src/macros.h, src/misc2.c, src/proto.h,
            src/structs.h, src/version.c, runtime/doc/eval.txt,
            runtime/doc/various.txt

Patch 8.1.1211
Problem:    Not all user command code is tested.
Solution:   Add more tests.
Files:	    src/testdir/test_usercommands.vim

Patch 8.1.1212
Problem:    Signal PWR is not tested.
Solution:   Test that PWR updates the swap file. (Dominique Pelle,
            closes #4312)
Files:	    src/testdir/test_signals.vim

Patch 8.1.1213
Problem:    &quot;make clean&quot; in top dir does not cleanup indent test output.
Solution:   Clean the indent test output.  Do not rely on the vim executable
            for that. (closes #4307)
Files:	    Makefile, runtime/indent/Makefile,
            runtime/indent/testdir/cleantest.vim

Patch 8.1.1214
Problem:    Old style tests.
Solution:   Move tests from test14 to new style test files. (Yegappan
            Lakshmanan, closes #4308)
Files:	    src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test14.in, src/testdir/test14.ok,
            src/testdir/test_edit.vim, src/testdir/test_normal.vim,
            src/testdir/test_search.vim, src/testdir/test_substitute.vim,
            src/testdir/test_visual.vim

Patch 8.1.1215
Problem:    &quot;make clean&quot; does not remove generated src/po files.
Solution:   Remove the files for &quot;make clean&quot;. (Christian Brabandt)
Files:	    src/po/Makefile

Patch 8.1.1216
Problem:    Mouse middle click is not tested.
Solution:   Add a test. (Dominique Pelle, closes #4310)
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.1217
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: no space reserved for font quality name.
Solution:   Add quality_name length if present. (Ken Takata, closes #4311)
Files:	    src/gui_w32.c

Patch 8.1.1218
Problem:    Cannot set a directory for a <A HREF="intro.html#tab">tab</A> page.
Solution:   Add the tab-local directory. (Yegappan Lakshmanan, closes #4212)
Files:	    runtime/doc/autocmd.txt, runtime/doc/editing.txt,
            runtime/doc/eval.txt, runtime/doc/index.txt,
            runtime/doc/options.txt, runtime/doc/usr_22.txt,
            runtime/doc/usr_41.txt, src/eval.c, src/evalfunc.c,
            src/ex_cmdidxs.h, src/ex_cmds.h, src/ex_docmd.c, src/if_py_both.h,
            src/proto/eval.pro, src/proto/ex_docmd.pro, src/structs.h,
            src/testdir/test_getcwd.vim, src/testdir/test_mksession.vim,
            src/window.c

Patch 8.1.1219
Problem:    Not checking for NULL return from alloc().
Solution:   Add checks. (Martin Kunev, closes #4303, closes #4174)
Files:	    src/beval.c, src/blowfish.c, src/crypt.c, src/crypt_zip.c,
            src/ops.c, src/option.c, src/popupmnu.c, src/proto/blowfish.pro,
            src/proto/crypt_zip.pro, src/gui_gtk_f.c, src/gui_gtk_x11.c,
            src/libvterm/src/state.c, src/libvterm/src/termscreen.c

Patch 8.1.1220 (after 8.1.1219)
Problem:    Build fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Move declaration to start of block.
Files:	    src/libvterm/src/state.c

Patch 8.1.1221
Problem:    Filtering does not work when listing marks.
Solution:   Implement filtering marks. (Marcin Szamotulski, closes #3895)
Files:	    runtime/doc/various.txt, src/mark.c,
            src/testdir/test_filter_cmd.vim

Patch 8.1.1222 (after 8.1.1219)
Problem:    Build still fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Move another declaration to start of block.
Files:	    src/libvterm/src/state.c

Patch 8.1.1223
Problem:    Middle mouse click test fails without a <A HREF="gui.html#clipboard">clipboard</A>.
Solution:   Check if the <A HREF="gui.html#clipboard">clipboard</A> can be used. (Dominique Pelle, Christian
            Brabandt)  Also use WorkingClipboard() instead of checking for the
            &quot;<A HREF="gui.html#clipboard">clipboard</A>&quot; feature.
Files:	    src/testdir/test_termcodes.vim, src/testdir/test_quotestar.vim

Patch 8.1.1224
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: cannot specify font weight.
Solution:   Add the &quot;<A HREF="motion.html#W">W</A>&quot; option to <A HREF="options.html#'guifont'">'guifont'</A>. (closes #4309)  Move <A HREF="gui.html#GUI">GUI</A> font
            explanation out of <A HREF="options.html#options.txt">options.txt</A>.
Files:	    runtime/doc/options.txt, runtime/doc/gui.txt,
            runtime/doc/mbyte.txt, src/gui_w32.c, src/os_mswin.c

Patch 8.1.1225
Problem:    Cannot create a pty to use with <A HREF="terminal.html#:terminal">:terminal</A> on FreeBSD.
Solution:   Add support for posix_openpt(). (Ozaki Kiichi, closes #4306,
            closes #4289)
Files:	    src/configure.ac, src/config.h.in, src/auto/configure, src/pty.c

Patch 8.1.1226
Problem:    {not in Vi} remarks get in the way of useful help text.
Solution:   Make a <A HREF="eval.html#list">list</A> of all <A HREF="intro.html#Vi">Vi</A> <A HREF="options.html#options">options</A>, instead of mentioning what <A HREF="intro.html#Vi">Vi</A> does
            not have.  Update the help text for <A HREF="options.html#options">options</A>.
Files:	    runtime/doc/vi_diff.txt, runtime/doc/options.txt

Patch 8.1.1227
Problem:    Duplicate entries in the generated .desktop files. (Ralf Schandl)
Solution:   Remove translated entries from the .in files. (closes #4313)
Files:	    src/po/gvim.desktop.in, src/po/vim.desktop.in

Patch 8.1.1228
Problem:    Not possible to process <A HREF="tagsrch.html#tags">tags</A> with a function.
Solution:   Add tagfunc() (Christian Brabandt, Andy Massimino, closes #4010)
Files:	    runtime/doc/options.txt, runtime/doc/tagsrch.txt,
            runtime/optwin.vim, src/buffer.c, src/dict.c, src/ex_cmds.c,
            src/globals.h, src/insexpand.c, src/normal.c, src/option.c,
            src/option.h, src/proto/dict.pro, src/structs.h, src/tag.c,
            src/testdir/Make_all.mak, src/testdir/test_alot.vim,
            src/testdir/test_tagfunc.vim, src/vim.h, src/window.c

Patch 8.1.1229
Problem:    Warning for posix_openpt() not declared. (Tony Mechelynck)
Solution:   Add declaration.
Files:	    src/pty.c

Patch 8.1.1230
Problem:    A lot of code is shared between vim.exe and gvim.exe.
Solution:   Optionally put the shared code in vim.dll. (Ken Takata,
            closes #4287)
Files:	    Filelist, nsis/gvim.nsi, runtime/doc/gui_w32.txt,
            src/Make_cyg_ming.mak, src/Make_mvc.mak, src/channel.c,
            src/evalfunc.c, src/ex_cmds.c, src/ex_docmd.c, src/feature.h,
            src/fileio.c, src/getchar.c, src/globals.h, src/gui.c, src/gui.h,
            src/gui_gtk_x11.c, src/gui_w32.c, src/if_mzsch.c, src/main.c,
            src/mbyte.c, src/memline.c, src/message.c, src/misc2.c,
            src/normal.c, src/option.c, src/os_mswin.c, src/os_w32dll.c,
            src/os_w32exe.c, src/os_win32.c, src/os_win32.h,
            src/proto/gui.pro, src/proto/gui_w32.pro, src/proto/misc2.pro,
            src/proto/os_mswin.pro, src/proto/os_win32.pro, src/syntax.c,
            src/term.c, src/terminal.c, src/ui.c, src/version.c, src/vim.rc

Patch 8.1.1231
Problem:    Asking about existing swap file unnecessarily.
Solution:   When <A HREF="motion.html#it">it</A> is safe, delete the swap file.  Remove
            HAS_SWAP_EXISTS_ACTION, <A HREF="motion.html#it">it</A> is always defined. (closes #1237)
Files:	    src/memline.c, src/globals.h, src/buffer.c, src/ex_cmds.c,
            src/fileio.c, src/main.c, src/testdir/test_swap.vim,
            runtime/doc/usr_11.txt, src/os_win32.c, src/proto/os_win32.pro,
            src/os_unix.c, src/proto/os_unix.pro

Patch 8.1.1232
Problem:    Can't build on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Define process_still_running.
Files:	    src/memline.c, src/os_win32.c, src/proto/os_win32.pro,
            src/os_unix.c, src/proto/os_unix.pro

Patch 8.1.1233
Problem:    Cannot build tiny version.
Solution:   Remove #ifdef for verb_msg().
Files:	    src/message.c

Patch 8.1.1234
Problem:    Swap file test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Only compare the tail of the file names.
Files:	    src/testdir/test_swap.vim

Patch 8.1.1235
Problem:    Compiler warnings for using STRLEN() value.
Solution:   Cast to int. (Christian Brabandt, Mike Williams)
Files:	    src/tag.c

Patch 8.1.1236
Problem:    sjiscorr.c not found in shadow directory. (Tony Mechelynck)
Solution:   Link po/*.c files with &quot;make shadow&quot;.
Files:	    src/Makefile

Patch 8.1.1237
Problem:    Error for using &quot;compl&quot;, reserved <A HREF="motion.html#word">word</A> in C++.
Solution:   Rename to &quot;complp&quot;. (suggestion by Ken Takata)
Files:	    src/usercmd.c, src/proto/usercmd.pro

Patch 8.1.1238
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: compiler warning for sprintf() format.
Solution:   Change &#37;d to &#37;ld. (Ken Takata)
Files:	    src/gui_w32.c

Patch 8.1.1239
Problem:    Key with byte sequence containing CSI does not work.
Solution:   Do not recognize CSI <A HREF="motion.html#as">as</A> special unless the <A HREF="gui.html#GUI">GUI</A> is active. (Ken
            Takata, closes #4318)
Files:	    src/getchar.c

Patch 8.1.1240
Problem:    Runtime desktop files are overwritten by build. (Tony Mechelynck)
Solution:   Instead of <A HREF="uganda.html#copying">copying</A> the files find them with &quot;make install&quot;.
Files:	    src/Makefile, src/po/Makefile

Patch 8.1.1241
Problem:    <A HREF="intro.html#Ex">Ex</A> command info contains confusing information.
Solution:   When using the NOTADR flag use ADDR_OTHER for the address type.
            Cleanup code using NOTADR.  Check for <A HREF="message.html#errors">errors</A> in
            create_cmdidxs.vim.  Adjust Makefile to see the <A HREF="message.html#errors">errors</A>.
Files:	    src/ex_cmds.h, src/ex_docmd.c, src/Makefile,
            src/create_cmdidxs.vim, src/usercmd.c, src/ex_cmds.c,
            src/window.c, src/testdir/test_usercommands.vim

Patch 8.1.1242
Problem:    No cmdline redraw when tabpages have different <A HREF="options.html#'cmdheight'">'cmdheight'</A>.
Solution:   redraw the command line when <A HREF="options.html#'cmdheight'">'cmdheight'</A> changes when switching
            tabpages. (closes #4321)
Files:	    src/testdir/test_tabpage.vim, src/window.c,
            src/testdir/dumps/Test_tabpage_cmdheight.dump,
            src/testdir/screendump.vim

Patch 8.1.1243 (after 8.1.1241)
Problem:    Compiler warnings for incomplete switch statement. (Tony
            Mechelynck)
Solution:   Add ADDR_QUICKFIX to the <A HREF="eval.html#list">list</A>.
Files:	    src/ex_docmd.c

Patch 8.1.1244
Problem:    No tests for CTRL-mouse-click.
Solution:   Add a few tests. (Dominique Pelle, closes #4323)
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.1245
Problem:    &quot;<A HREF="quickfix.html#:copen">:copen</A> 10&quot; sets height in full-height <A HREF="windows.html#window">window</A>. (Daniel Hahler)
Solution:   Don't set the height if the <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="windows.html#window">window</A> is full height.
            (closes #4325)
Files:	    src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.1246
Problem:    Cannot handle negative mouse coordinate from urxvt.
Solution:   Accept '<A HREF="motion.html#-">-</A>' where a digit is expected. (Vincent Vinel,
            closes #4326)
Files:	    src/term.c

Patch 8.1.1247
Problem:    Urxvt mouse codes are not tested.
Solution:   Also set <A HREF="options.html#'ttymouse'">'ttymouse'</A> to &quot;urxvt&quot; in the termcodes test.
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.1248
Problem:    No test for dec mouse.
Solution:   Add some tests for dec mouse.  Add &quot;no_query_mouse&quot;.
Files:	    src/evalfunc.c, src/globals.h, src/os_unix.c,
            src/testdir/test_termcodes.vim, runtime/doc/eval.txt

Patch 8.1.1249
Problem:    Compiler warning for uninitialized variable.
Solution:   Initialize <A HREF="motion.html#it">it</A>. (Christian Brabandt)
Files:	    src/regexp_nfa.c

Patch 8.1.1250
Problem:    No test for netterm mouse.
Solution:   Add some tests for netterm mouse.
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.1251
Problem:    No test for completion of <A HREF="map.html#mapping">mapping</A> keys.
Solution:   Add a test.  Also clean up the code.
Files:	    src/getchar.c, src/term.c, src/proto/term.pro,
            src/testdir/test_cmdline.vim

Patch 8.1.1252
Problem:    Not all <A HREF="map.html#mapping">mapping</A> completion is tested.
Solution:   Add a few more <A HREF="map.html#mapping">mapping</A> completion tests.
Files:	    src/testdir/test_cmdline.vim

Patch 8.1.1253 (after 8.1.1252)
Problem:    Mapping completion test fails.
Solution:   Fix expected output.
Files:	    src/testdir/test_cmdline.vim

Patch 8.1.1254
Problem:    Mapping completion contains dead code.
Solution:   Remove the code.
Files:	    src/term.c, src/testdir/test_cmdline.vim

Patch 8.1.1255
Problem:    Building desktop files fails on FreeBSD. (Adam Weinberger)
Solution:   Avoid using non-portable construct in Makefile. (closes #4332)
Files:	    src/po/Makefile

Patch 8.1.1256
Problem:    Cannot navigate through <A HREF="message.html#errors">errors</A> relative to the cursor.
Solution:   Add <A HREF="quickfix.html#:cabove">:cabove</A>, <A HREF="quickfix.html#:cbelow">:cbelow</A>, <A HREF="quickfix.html#:labove">:labove</A> and <A HREF="quickfix.html#:lbelow">:lbelow</A>. (Yegappan Lakshmanan,
            closes #4316)
Files:	    runtime/doc/index.txt, runtime/doc/quickfix.txt, src/ex_cmdidxs.h,
            src/ex_cmds.h, src/ex_docmd.c, src/proto/quickfix.pro,
            src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.1257
Problem:    MSVC: name of object directory not always right.
Solution:   Adjust comment.  Don't use different directory for DIRECTX.  Do
            use different directory for USE_MSVCRT. (Ken Takata, closes #4333)
Files:	    src/Make_mvc.mak

Patch 8.1.1258
Problem:    The &quot;<A HREF="pattern.html#N">N</A> files to edit&quot; message can not be suppressed.
Solution:   Suppress the message with <A HREF="starting.html#--not-a-term">--not-a-term</A>. (closes #4320)
Files:	    src/main.c

Patch 8.1.1259
Problem:    Crash when <A HREF="starting.html#exiting">exiting</A> early. (Ralf Schandl)
Solution:   Only pop/push the title when <A HREF="motion.html#it">it</A> was set. (closes #4334)
Files:	    src/os_unix.c, src/misc2.c, src/usercmd.c, src/tag.c

Patch 8.1.1260
Problem:    Comparing with pointer instead of value.
Solution:   Add a &quot;*&quot;. (Ken Takata, closes #4336)
Files:	    src/usercmd.c

Patch 8.1.1261
Problem:    No error for <A HREF="quickfix.html#quickfix">quickfix</A> commands with negative range.
Solution:   Add ADDR_UNSIGNED and use <A HREF="motion.html#it">it</A> for <A HREF="quickfix.html#quickfix">quickfix</A> commands.  Make
            <A HREF="testing.html#assert_fails()">assert_fails()</A> show the command if the error doesn't match.
Files:	    src/ex_cmds.h, src/ex_docmd.c, src/testdir/test_quickfix.vim,
            runtime/doc/quickfix.txt, src/eval.c, src/quickfix.c,
            src/proto/quickfix.pro, src/ex_cmds2.c

Patch 8.1.1262
Problem:    Cannot simulate a mouse click in a test.
Solution:   Add <A HREF="testing.html#test_setmouse()">test_setmouse()</A>.
Files:	    src/evalfunc.c, runtime/doc/eval.txt, runtime/doc/usr_41.txt

Patch 8.1.1263
Problem:    Mouse clicks in <A HREF="gui.html#WinBar">WinBar</A> not tested.
Solution:   Add a test for clicking on the <A HREF="gui.html#WinBar">WinBar</A> entries.
Files:	    src/testdir/test_winbar.vim

Patch 8.1.1264
Problem:    Crash when closing <A HREF="windows.html#window">window</A> from <A HREF="gui.html#WinBar">WinBar</A> click. (Ben Jackson)
Solution:   Check that <A HREF="windows.html#window">window</A> pointer is still valid. (closes #4337)
Files:	    src/menu.c

Patch 8.1.1265
Problem:    When GPM mouse support is enabled double clicks in xterm <A HREF="diff.html#do">do</A> not
            work.
Solution:   Use KS_GPM_MOUSE for GPM mouse events.
Files:	    src/term.c, src/os_unix.c, src/keymap.h

Patch 8.1.1266
Problem:    Winbar test doesn't test enough.
Solution:   Check that the <A HREF="gui.html#WinBar">WinBar</A> actually shows up.  Correct check for clicks
            with no effect. (Ben Jackson, closes #4338)
Files:	    src/testdir/test_winbar.vim

Patch 8.1.1267
Problem:    Cannot check if GPM mouse support is working.
Solution:   Add the &quot;mouse_gpm_enable&quot; feature.
Files:	    src/evalfunc.c, src/os_unix.c, src/proto/os_unix.pro,
            runtime/doc/eval.txt

Patch 8.1.1268
Problem:    Map completion test fails in <A HREF="gui.html#GUI">GUI</A>.
Solution:   Skip the test that fails.
Files:	    src/testdir/test_cmdline.vim

Patch 8.1.1269
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> <A HREF="gui.html#GUI">GUI</A>: <A HREF="mbyte.html#multibyte">multibyte</A> chars with a 0x80 byte <A HREF="diff.html#do">do</A> not work when
            compiled with VIMDLL.
Solution:   Adjust the condition for fixing the input buffer. (Ken Takata,
            closes #4330)
Files:	    src/getchar.c

Patch 8.1.1270
Problem:    Cannot see current match position.
Solution:   Show &quot;3/44&quot; when using the &quot;<A HREF="pattern.html#n">n</A>&quot; command and &quot;<A HREF="change.html#S">S</A>&quot; is not in
            <A HREF="options.html#'shortmess'">'shortmess'</A>. (Christian Brabandt, closes #4317)
Files:	    runtime/doc/options.txt, runtime/doc/pattern.txt, src/option.c,
            src/option.h, src/search.c, src/testdir/Make_all.mak,
            src/testdir/test_search_stat.vim

Patch 8.1.1271 (after 8.1.1270)
Problem:    Compiler warnings for use of STRNCPY(). (John Marriott)
Solution:   Use mch_memmove() instead of STRNCPY().
Files:	    src/search.c

Patch 8.1.1272
Problem:    Click on <A HREF="gui.html#WinBar">WinBar</A> of other <A HREF="windows.html#window">window</A> not tested.
Solution:   Add a test <A HREF="change.html#case">case</A>.
Files:	    src/testdir/test_winbar.vim

Patch 8.1.1273
Problem:    Compiler warning in direct write code.
Solution:   Add a type cast.
Files:	    src/gui_dwrite.cpp

Patch 8.1.1274
Problem:    After <A HREF="gui.html#:unmenu">:unmenu</A> can still execute the menu with <A HREF="gui.html#:emenu">:emenu</A>.
Solution:   Do not execute a menu that was disabled for the specified mode.
Files:	    src/menu.c, src/testdir/test_menu.vim

Patch 8.1.1275
Problem:    Cannot navigate to <A HREF="message.html#errors">errors</A> before/after the cursor.
Solution:   Add the <A HREF="quickfix.html#:cbefore">:cbefore</A> and <A HREF="quickfix.html#:cafter">:cafter</A> commands. (Yegappan Lakshmanan,
            closes #4340)
Files:	    runtime/doc/index.txt, runtime/doc/quickfix.txt, src/ex_cmdidxs.h,
            src/ex_cmds.h, src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.1276
Problem:    Cannot combine text properties with <A HREF="syntax.html#syntax">syntax</A> highlighting.
Solution:   Add the &quot;combine&quot; field to <A HREF="textprop.html#prop_type_add()">prop_type_add()</A>. (closes #4343)
Files:	    runtime/doc/eval.txt, runtime/doc/textprop.txt, src/screen.c,
            src/structs.h, src/testdir/test_textprop.vim

Patch 8.1.1277 (after 8.1.1276)
Problem:    Missing screenshot update.
Solution:   Update the screenshot.
Files:	    src/testdir/dumps/Test_textprop_01.dump

Patch 8.1.1278 (after 8.1.1276)
Problem:    Missing change for &quot;combine&quot; field.
Solution:   Also change the <A HREF="textprop.html#textprop">textprop</A> implementation.
Files:	    src/textprop.c

Patch 8.1.1279
Problem: Cannot set 'spelllang' to <A HREF="mailto:&quot;sr@latin&quot;.">&quot;sr@latin&quot;.</A> (Bojan Stipic) 
Solution:   Allow using '<A HREF="repeat.html#@">@</A>' in <A HREF="options.html#'spelllang'">'spelllang'</A>. (closes #4342)
Files:	    src/option.c, src/testdir/gen_opt_test.vim

Patch 8.1.1280
Problem:    Remarks about functionality not in <A HREF="intro.html#Vi">Vi</A> clutters the help.
Solution:   Move all info about what is new in Vim or already existed in <A HREF="intro.html#Vi">Vi</A> to
            <A HREF="vi_diff.html#vi_diff.txt">vi_diff.txt</A>.  Remove {not in Vi} remarks. (closes #4268) Add
            &quot;noet&quot; to the help files <A HREF="options.html#modeline">modeline</A>.  Also include many other help
            file improvements.
Files:	    runtime/doc/vi_diff.txt, runtime/doc/arabic.txt,
            runtime/doc/autocmd.txt, runtime/doc/change.txt,
            runtime/doc/channel.txt, runtime/doc/cmdline.txt,
            runtime/doc/debugger.txt, runtime/doc/debug.txt,
            runtime/doc/develop.txt, runtime/doc/diff.txt,
            runtime/doc/digraph.txt, runtime/doc/editing.txt,
            runtime/doc/eval.txt, runtime/doc/farsi.txt,
            runtime/doc/filetype.txt, runtime/doc/fold.txt,
            runtime/doc/ft_ada.txt, runtime/doc/ft_rust.txt,
            runtime/doc/ft_sql.txt, runtime/doc/gui.txt,
            runtime/doc/gui_w32.txt, runtime/doc/gui_x11.txt,
            runtime/doc/hangulin.txt, runtime/doc/hebrew.txt,
            runtime/doc/helphelp.txt, runtime/doc/help.txt,
            runtime/doc/howto.txt, runtime/doc/if_cscop.txt,
            runtime/doc/if_lua.txt, runtime/doc/if_mzsch.txt,
            runtime/doc/if_ole.txt, runtime/doc/if_perl.txt,
            runtime/doc/if_pyth.txt, runtime/doc/if_ruby.txt,
            runtime/doc/if_sniff.txt, runtime/doc/if_tcl.txt,
            runtime/doc/indent.txt, runtime/doc/index.txt,
            runtime/doc/insert.txt, runtime/doc/intro.txt,
            runtime/doc/map.txt, runtime/doc/mbyte.txt,
            runtime/doc/message.txt, runtime/doc/mlang.txt,
            runtime/doc/motion.txt, runtime/doc/netbeans.txt,
            runtime/doc/options.txt, runtime/doc/os_390.txt,
            runtime/doc/os_amiga.txt, runtime/doc/os_beos.txt,
            runtime/doc/os_dos.txt, runtime/doc/os_mac.txt,
            runtime/doc/os_mint.txt, runtime/doc/os_msdos.txt,
            runtime/doc/os_os2.txt, runtime/doc/os_qnx.txt,
            runtime/doc/os_risc.txt, runtime/doc/os_unix.txt,
            runtime/doc/os_vms.txt, runtime/doc/os_win32.txt,
            runtime/doc/pattern.txt, runtime/doc/pi_getscript.txt,
            runtime/doc/pi_gzip.txt, runtime/doc/pi_logipat.txt,
            runtime/doc/pi_netrw.txt, runtime/doc/pi_paren.txt,
            runtime/doc/pi_spec.txt, runtime/doc/pi_tar.txt,
            runtime/doc/pi_vimball.txt, runtime/doc/pi_zip.txt,
            runtime/doc/print.txt, runtime/doc/quickfix.txt,
            runtime/doc/quickref.txt, runtime/doc/quotes.txt,
            runtime/doc/recover.txt, runtime/doc/remote.txt,
            runtime/doc/repeat.txt, runtime/doc/rileft.txt,
            runtime/doc/russian.txt, runtime/doc/scroll.txt,
            runtime/doc/sign.txt, runtime/doc/spell.txt,
            runtime/doc/sponsor.txt, runtime/doc/starting.txt,
            runtime/doc/syntax.txt, runtime/doc/tabpage.txt,
            runtime/doc/tagsrch.txt, runtime/doc/terminal.txt,
            runtime/doc/term.txt, runtime/doc/textprop.txt,
            runtime/doc/tips.txt, runtime/doc/todo.txt,
            runtime/doc/uganda.txt, runtime/doc/undo.txt,
            runtime/doc/usr_01.txt, runtime/doc/usr_02.txt,
            runtime/doc/usr_03.txt, runtime/doc/usr_04.txt,
            runtime/doc/usr_05.txt, runtime/doc/usr_06.txt,
            runtime/doc/usr_07.txt, runtime/doc/usr_08.txt,
            runtime/doc/usr_09.txt, runtime/doc/usr_10.txt,
            runtime/doc/usr_11.txt, runtime/doc/usr_12.txt,
            runtime/doc/usr_20.txt, runtime/doc/usr_21.txt,
            runtime/doc/usr_22.txt, runtime/doc/usr_23.txt,
            runtime/doc/usr_24.txt, runtime/doc/usr_25.txt,
            runtime/doc/usr_26.txt, runtime/doc/usr_27.txt,
            runtime/doc/usr_28.txt, runtime/doc/usr_29.txt,
            runtime/doc/usr_30.txt, runtime/doc/usr_31.txt,
            runtime/doc/usr_32.txt, runtime/doc/usr_40.txt,
            runtime/doc/usr_41.txt, runtime/doc/usr_43.txt,
            runtime/doc/usr_44.txt, runtime/doc/usr_45.txt,
            runtime/doc/usr_90.txt, runtime/doc/usr_toc.txt,
            runtime/doc/various.txt, runtime/doc/version4.txt,
            runtime/doc/version5.txt, runtime/doc/version6.txt,
            runtime/doc/version7.txt, runtime/doc/version8.txt,
            runtime/doc/visual.txt, runtime/doc/windows.txt, runtime/doc/tags

Patch 8.1.1281
Problem:    Cannot specify a <A HREF="intro.html#count">count</A> with <A HREF="quickfix.html#:chistory">:chistory</A>.
Solution:   Add a <A HREF="intro.html#count">count</A> to <A HREF="quickfix.html#:chistory">:chistory</A> and <A HREF="quickfix.html#:lhistory">:lhistory</A>. (Yegappan Lakshmanan,
            closes #4344)
Files:	    runtime/doc/quickfix.txt,  src/ex_cmds.h,  src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.1.1282
Problem:    Running make in src/po leaves LINGUAS file behind. (Ken Takata)
Solution:   Delete LINGUAS after running msgfmt.
Files:	    src/po/Makefile

Patch 8.1.1283
Problem:    Delaying half a second after the top-bot message.
Solution:   Instead of the delay add &quot;<A HREF="motion.html#W">W</A>&quot; to the search <A HREF="intro.html#count">count</A>.
Files:	    src/search.c, src/testdir/test_search_stat.vim

Patch 8.1.1284
Problem:    Detecting *.tmpl <A HREF="motion.html#as">as</A> htmlcheetah is outdated.
Solution:   Use the generic name &quot;<A HREF="autocmd.html#template">template</A>&quot;. (closes #4348)
Files:	    runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.1.1285
Problem:    Test17 is old style.
Solution:   Turn into new style test. (Yegappan Lakshmanan, closes #4347)
Files:	    src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test17.in, src/testdir/test17.ok,
            src/testdir/test17a.in, src/testdir/test_checkpath.vim,
            src/testdir/test_gf.vim

Patch 8.1.1286
Problem:    Running tests leaves XTest_tabpage_cmdheight file behind.
Solution:   Delete the right file. (closes #4350)
Files:	    src/testdir/test_tabpage.vim

Patch 8.1.1287
Problem:    Cannot build with <A HREF="various.html#+eval">+eval</A> but without <A HREF="various.html#+mouse">+mouse</A>.
Solution:   Add #ifdefs around f_test_setmouse(). (John Marriott)
Files:	    src/evalfunc.c

Patch 8.1.1288
Problem:    Search stats don't show for mapped command.
Solution:   Remove SEARCH_PEEK from searchit flags.  Add a test. (Christian
            Brabandt)
Files:	    src/search.c, src/testdir/test_search_stat.vim

Patch 8.1.1289
Problem:    May not have enough space to add &quot;<A HREF="motion.html#W">W</A>&quot; to search stats.
Solution:   Reserve a bit more space. (Christian Brabandt)
Files:	    src/search.c

Patch 8.1.1290
Problem:    .hgignore and .gitignore are either distributed or in git, not
            both.
Solution:   Add .gitignore to the <A HREF="intro.html#distribution">distribution</A> and .hgignore to git.  Update
            the entries. (Christian Brabandt, Ken Takata)
Files:	    .gitignore, .hgignore, Filelist

Patch 8.1.1291
Problem:    Not <A HREF="starting.html#easy">easy</A> to change directory and restore.
Solution:   Add the <A HREF="builtin.html#chdir()">chdir()</A> function. (Yegappan Lakshmanan, closes #4358)
Files:	    runtime/doc/eval.txt, runtime/doc/todo.txt,
            runtime/doc/usr_41.txt, src/evalfunc.c, src/ex_docmd.c,
            src/if_py_both.h, src/proto/ex_docmd.pro, src/structs.h,
            src/testdir/test_cd.vim

Patch 8.1.1292
Problem:    Invalid command line arguments not tested.
Solution:   Add a test. (Dominique Pelle, closes #4346)
Files:	    src/testdir/test_startup.vim

Patch 8.1.1293
Problem:    MSVC files are no longer useful for debugging.  Newer <A HREF="visual.html#Visual">Visual</A>
            Studio versions cannot read them.
Solution:   Delete the files. (Ken Takata, closes #4357)
Files:	    Filelist, src/Make_dvc.mak, src/Make_ivc.mak,
            runtime/doc/debug.txt, src/INSTALLpc.txt, src/Make_mvc.mak

Patch 8.1.1294
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: Some fonts return wrong average char width.
Solution:   Compute the average ourselves. (Ken Takata, closes #4356)
Files:	    src/gui_w32.c

Patch 8.1.1295
Problem:    When vimrun.exe does not exist external command may fail.
Solution:   Use &quot;cmd /c&quot; <A HREF="if_cscop.html#twice">twice</A> to get the same behavior. (Ken Takata,
            closes #4355)
Files:	    src/os_win32.c

Patch 8.1.1296
Problem:    Crash when using invalid command line argument.
Solution:   Check for <A HREF="options.html#options">options</A> not being initialized.
Files:	    src/term.c, src/testdir/test_startup.vim

Patch 8.1.1297
Problem:    Invalid argument test fails without <A HREF="gui_x11.html#GTK">GTK</A>.
Solution:   Test <A HREF="gui_x11.html#-display">-display</A> and --display separately.
Files:	    src/testdir/test_startup.vim

Patch 8.1.1298
Problem:    Invalid argument test fails without X <A HREF="gui.html#clipboard">clipboard</A>.
Solution:   Test <A HREF="gui_x11.html#-display">-display</A> only with the <A HREF="various.html#+xterm_clipboard">+xterm_clipboard</A> feature.
Files:	    src/testdir/test_startup.vim

Patch 8.1.1299
Problem:    &quot;extends&quot; from <A HREF="options.html#'listchars'">'listchars'</A> is used when <A HREF="options.html#'list'">'list'</A> is off. (Hiroyuki
            Yoshinaga)
Solution:   Only use the &quot;extends&quot; character when <A HREF="options.html#'list'">'list'</A> is on. (Hirohito
            Higashi, closes #4360)
Files:	    src/screen.c, src/testdir/test_listchars.vim

Patch 8.1.1300
Problem:    In a <A HREF="terminal.html#terminal">terminal</A> <A HREF="options.html#'ballooneval'">'ballooneval'</A> does not work right away.
Solution:   Flush output after drawing the balloon.  Add the <A HREF="builtin.html#&lt;Ignore&gt;">&lt;Ignore&gt;</A> key
            code.  Add a test.
Files:	    src/ex_cmds2.c, src/testdir/test_balloon.vim, src/misc2.c,
            src/testdir/Make_all.mak,
            src/testdir/dumps/Test_balloon_eval_term_01.dump

Patch 8.1.1301
Problem:    When compiled with VIMDLL some <A HREF="message.html#messages">messages</A> are not shown.
Solution:   Set/reset gui.in_use and gui.starting <A HREF="motion.html#as">as</A> needed. (Ken Takata,
            closes #4361)
Files:	    src/gui_w32.c, src/main.c, src/message.c

Patch 8.1.1302
Problem:    <A HREF="eval.html#v:beval_text">v:beval_text</A> is not tested in <A HREF="visual.html#Visual">Visual</A> mode.
Solution:   Add a screenshot of the balloon in <A HREF="visual.html#Visual">Visual</A> mode.
Files:	    src/testdir/test_balloon.vim, src/normal.c,
            src/testdir/dumps/Test_balloon_eval_term_01.dump,
            src/testdir/dumps/Test_balloon_eval_term_02.dump

Patch 8.1.1303
Problem:    Not possible to hide a balloon.
Solution:   Hide the balloon when <A HREF="builtin.html#balloon_show()">balloon_show()</A> is called with an empty
            <A HREF="eval.html#string">string</A> or <A HREF="eval.html#list">list</A>.  Add <A HREF="builtin.html#balloon_gettext()">balloon_gettext()</A>.
Files:	    src/evalfunc.c, src/popupmnu.c, src/gui_beval.c, src/gui_w32.c,
            src/beval.h, src/testdir/test_balloon.vim, runtime/doc/eval.txt

Patch 8.1.1304
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: compiler warning for unused value.
Solution:   Adjust #ifdefs. (Ken Takata, closes #4363)
Files:	    src/gui.c

Patch 8.1.1305
Problem:    There is no <A HREF="starting.html#easy">easy</A> way to manipulate environment <A HREF="eval.html#variables">variables</A>.
Solution:   Add <A HREF="builtin.html#environ()">environ()</A>, <A HREF="builtin.html#getenv()">getenv()</A> and <A HREF="builtin.html#setenv()">setenv()</A>. (Yasuhiro Matsumoto,
            closes #2875)
Files:	    runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/evalfunc.c,
            src/testdir/Make_all.mak, src/testdir/test_environ.vim

Patch 8.1.1306
Problem:    Borland support is outdated and doesn't work.
Solution:   Remove Borland support, there are other (free) compilers
            available. (Thomas Dziedzic, Ken Takata, closes #4364)
Files:	    .gitignore, .hgignore, Filelist, runtime/doc/debug.txt,
            runtime/doc/develop.txt, runtime/doc/usr_90.txt,
            src/GvimExt/Make_bc5.mak, src/GvimExt/gvimext.cpp,
            src/GvimExt/gvimext.rc, src/INSTALLpc.txt, src/Make_bc5.mak,
            src/dosinst.c, src/dosinst.h, src/evalfunc.c, src/ex_cmds.c,
            src/ex_getln.c, src/gui_w32.c, src/if_ole.cpp, src/if_py_both.h,
            src/main.c, src/mark.c, src/message.c, src/misc1.c, src/misc2.c,
            src/normal.c, src/option.c, src/os_mswin.c, src/os_w32exe.c,
            src/os_win32.c, src/os_win32.h, src/proto.h, src/screen.c,
            src/spell.c, src/spellfile.c, src/syntax.c, src/userfunc.c,
            src/vim.h, src/vim.rc, src/vimrun.c, src/xxd/Make_bc5.mak,
            src/xxd/xxd.c

Patch 8.1.1307
Problem:    Cannot reconnect to the X server after <A HREF="motion.html#it">it</A> restarted.
Solution:   Add the <A HREF="various.html#:xrestore">:xrestore</A> command. (Adrian Kocis, closes #844)
Files:	    runtime/doc/index.txt, runtime/doc/various.txt, src/os_unix.c,
            src/proto/os_unix.pro, src/globals.h, src/ex_cmds.h,
            src/ex_cmdidxs.h, src/ex_docmd.c, src/testdir/test_paste.vim

Patch 8.1.1308
Problem:    The <A HREF="intro.html#Normal">Normal</A> highlight is not defined when compiled with <A HREF="gui.html#GUI">GUI</A>.
Solution:   Always define <A HREF="intro.html#Normal">Normal</A>. (Christian Brabandt, closes #4072)
Files:	    runtime/doc/syntax.txt, src/syntax.c,
            src/testdir/test_highlight.vim

Patch 8.1.1309 (after 8.1.1308)
Problem:    Test for <A HREF="intro.html#Normal">Normal</A> highlight fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A> <A HREF="gui.html#GUI">GUI</A>.
Solution:   Skip the test for <A HREF="os_win32.html#MS-Windows">MS-Windows</A> <A HREF="gui.html#GUI">GUI</A>.
Files:	    src/testdir/test_highlight.vim

Patch 8.1.1310
Problem:    Named function arguments are never optional.
Solution:   Support optional function arguments with a default value. (Andy
            Massimino, closes #3952)
Files:	    runtime/doc/eval.txt, src/structs.h,
            src/testdir/test_user_func.vim, src/userfunc.c

Patch 8.1.1311
Problem:    Aborting an autocmd with an exception is not tested.
Solution:   Add a test.  Also shows how to abort a command by throwing an
            exception.
Files:	    src/testdir/test_autocmd.vim

Patch 8.1.1312
Problem:    Coverity warning for using uninitialized variable.
Solution:   Clear exarg_T.
Files:	    src/quickfix.c, src/channel.c, src/ex_cmds2.c

Patch 8.1.1313
Problem:    Warnings for using <A HREF="builtin.html#localtime()">localtime()</A> and ctime().
Solution:   Use localtime_r() if available.  Avoid using ctime().
Files:	    src/configure.ac, src/auto/configure, src/config.h.in,
            src/evalfunc.c, src/nbdebug.c, src/undo.c, src/memline.c,
            src/proto/memline.pro, src/hardcopy.c

Patch 8.1.1314
Problem:    MSVC makefile is not nicely indented.
Solution:   Adjust spaces in preprocessor directives. (Ken Takata)
Files:	    src/Make_mvc.mak

Patch 8.1.1315
Problem:    There is always a delay if a termrequest is never answered.
Solution:   When the response is not received within two seconds consider the
            request to have failed.
Files:	    src/term.c

Patch 8.1.1316
Problem:    Duplicated <A HREF="builtin.html#localtime()">localtime()</A> call.
Solution:   Delete one.
Files:	    src/undo.c

Patch 8.1.1317
Problem:    Output from Travis can be improved.
Solution:   Add section headers.  Handle <A HREF="message.html#errors">errors</A> better. (Ozaki Kiichi,
            closes #4098)
Files:	    .travis.yml, configure

Patch 8.1.1318
Problem:    Code for text changes is in a &quot;misc&quot; file.
Solution:   Move the code to change.c.
Files:	    src/misc1.c, src/proto/misc1.pro, src/change.c,
            src/proto/change.pro, src/proto.h, src/memline.c, Filelist,
            src/Make_cyg_ming.mak, src/Make_dice.mak, src/Make_manx.mak,
            src/Make_morph.mak, src/Make_mvc.mak, src/Make_sas.mak,
            src/Make_vms.mms, src/Makefile, src/README.md

Patch 8.1.1319
Problem:    Computing function length name in many places.
Solution:   compute name length in call_func().
Files:	    src/eval.c, src/userfunc.c, src/channel.c, src/evalfunc.c,
            src/ex_cmds2.c, src/regexp.c, src/terminal.c

Patch 8.1.1320
Problem:    It is not possible to track changes to a buffer.
Solution:   Add <A HREF="builtin.html#listener_add()">listener_add()</A> and <A HREF="builtin.html#listener_remove()">listener_remove()</A>. No docs or tests yet.
Files:	    src/structs.h, src/change.c, src/proto/change.pro

Patch 8.1.1321
Problem:    No docs or tests for listener <A HREF="eval.html#functions">functions</A>.
Solution:   Add help and tests for <A HREF="builtin.html#listener_add()">listener_add()</A> and <A HREF="builtin.html#listener_remove()">listener_remove()</A>.
            Invoke the callbacks before redrawing.
Files:	    runtime/doc/eval.txt, runtime/doc/usr_41.txt,
            src/testdir/test_listener.vim, src/testdir/Make_all.mak,
            src/change.c, src/screen.c, src/evalfunc.c, src/proto/evalfunc.pro

Patch 8.1.1322
Problem:    Cygwin makefile is not nicely indented.
Solution:   Adjust spaces in preprocessor directives. (Ken Takata)
Files:	    src/Make_cyg_ming.mak

Patch 8.1.1323
Problem:    <A HREF="options.html#'mouse'">'mouse'</A> option is reset when using GPM mouse.
Solution:   Add flag for GPM mouse.
Files:	    src/term.c

Patch 8.1.1324
Problem:    Stray comma in <A HREF="os_vms.html#VMS">VMS</A> makefile.
Solution:   Remove the comma. (Naruhiko Nishino, closes #4368)
Files:	    src/Make_vms.mms

Patch 8.1.1325
Problem:    Cannot build with <A HREF="various.html#+eval">+eval</A> but without <A HREF="various.html#+channel">+channel</A> and <A HREF="various.html#+timers">+timers</A>. (John
            Marriott)
Solution:   Adjust #ifdef for get_callback().
Files:	    src/evalfunc.c, src/testdir/test_autocmd.vim

Patch 8.1.1326
Problem:    No test for listener with <A HREF="builtin.html#partial">partial</A>.
Solution:   Add a test.  Add example to help.
Files:	    src/testdir/test_listener.vim, runtime/doc/eval.txt

Patch 8.1.1327
Problem:    Unnecessary scroll after horizontal split.
Solution:   Don't adjust to fraction if all the text fits in the <A HREF="windows.html#window">window</A>.
            (Martin Kunev, closes #4367)
Files:	    src/testdir/test_window_cmd.vim, src/window.c

Patch 8.1.1328
Problem:    No test for listener with <A HREF="undo.html#undo">undo</A> operation.
Solution:   Add a test.
Files:	    src/testdir/test_listener.vim

Patch 8.1.1329
Problem:    Plans for <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> support are spread out.
Solution:   Add a first version of the <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> help.
Files:	    runtime/doc/popup.txt, runtime/doc/Makefile, runtime/doc/help.txt

Patch 8.1.1330
Problem:    Using <A HREF="syntax.html#bold">bold</A> attribute in <A HREF="terminal.html#terminal">terminal</A> changes the color. (Jason
            Franklin)
Solution:   Don't set the &quot;bold-highbright&quot; flag in vterm unless the <A HREF="terminal.html#terminal">terminal</A>
            supports <A HREF="various.html#less">less</A> than 16 colors.
Files:	    src/terminal.c, src/testdir/test_terminal.vim,
            src/testdir/dumps/Test_terminal_all_ansi_colors.dump

Patch 8.1.1331
Problem:    Test 29 is old style.
Solution:   Turn <A HREF="motion.html#it">it</A> into a new style test. (Yegappan Lakshmanan, closes #4370)
Files:	    src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test29.in, src/testdir/test29.ok,
            src/testdir/test_backspace_opt.vim, src/testdir/test_join.vim

Patch 8.1.1332
Problem:    Cannot flush change listeners without also redrawing.  The line
            numbers in the <A HREF="eval.html#list">list</A> of changes may become invalid.
Solution:   Add <A HREF="builtin.html#listener_flush()">listener_flush()</A>.  Invoke listeners before adding a change
            that makes line numbers invalid.
Files:	    src/evalfunc.c, src/change.c, src/proto/change.pro,
            src/screen.c, runtime/doc/eval.txt, src/testdir/test_listener.vim

Patch 8.1.1333
Problem:    Text properties don't always move after changes.
Solution:   Update properties before reporting changes to listeners. Move text
            property when splitting a line.
Files:	    src/change.c, src/ex_cmds.c, src/textprop.c,
            src/proto/textprop.pro, src/testdir/test_textprop.vim

Patch 8.1.1334
Problem:    When buffer is hidden &quot;<A HREF="motion.html#F">F</A>&quot; in <A HREF="options.html#'shortmess'">'shortmess'</A> is not used.
Solution:   Check the &quot;<A HREF="motion.html#F">F</A>&quot; flag in <A HREF="options.html#'shortmess'">'shortmess'</A> when the buffer is already
            loaded. (Jason Franklin)  Add <A HREF="testing.html#test_getvalue()">test_getvalue()</A> to be able to test
            this.
Files:	    src/buffer.c, src/evalfunc.c, src/testdir/test_options.vim,
            runtime/doc/eval.txt

Patch 8.1.1335
Problem:    Listener callback is called after <A HREF="insert.html#inserting">inserting</A> text.
Solution:   Flush the changes before <A HREF="insert.html#inserting">inserting</A> or <A HREF="change.html#deleting">deleting</A> a line.  Store
            changes per buffer.
Files:	    src/change.c, src/proto/change.pro, src/memline.c,
            src/structs.h, src/testdir/test_listener.vim

Patch 8.1.1336
Problem:    Some <A HREF="eval.html#eval">eval</A> functionality is not covered by tests.
Solution:   Add a few more test cases. (Masato Nishihata, closes #4374)
Files:	    src/testdir/test_bufline.vim, src/testdir/test_cindent.vim,
            src/testdir/test_cursor_func.vim, src/testdir/test_delete.vim,
            src/testdir/test_expand_func.vim, src/testdir/test_float_func.vim,
            src/testdir/test_fnamemodify.vim, src/testdir/test_functions.vim

Patch 8.1.1337
Problem:    Get empty text prop when splitting line just after text prop.
Solution:   Do not create an empty text prop at the start of the line.
Files:	    src/textprop.c, src/testdir/test_textprop.vim

Patch 8.1.1338
Problem:    Hang when concealing the '<A HREF="change.html#&gt;">&gt;</A>' shown for a wide char that doesn't
            fit in the last cell.
Solution:   Put back the pointer when the '<A HREF="change.html#&gt;">&gt;</A>' is not going to be displayed.
            (closes #4377)
Files:	    src/screen.c

Patch 8.1.1339
Problem:    Installer needs to product name et al.
Solution:   Add a few lines to the NSIS installer <A HREF="usr_41.html#script">script</A>. (Ken Takata)
Files:	    nsis/gvim.nsi

Patch 8.1.1340
Problem:    Attributes from <A HREF="options.html#'cursorline'">'cursorline'</A> overwrite <A HREF="textprop.html#textprop">textprop</A>.
Solution:   Combine the attributes. (closes #3912)
Files:	    src/screen.c, src/textprop.c, src/testdir/test_textprop.vim,
            src/testdir/dumps/Test_textprop_01.dump

Patch 8.1.1341
Problem:    Text properties are lost when joining lines.
Solution:   Move the text properties to the joined line.
Files:	    src/ops.c, src/textprop.c, src/proto/textprop.pro,
            src/testdir/test_textprop.vim,
            src/testdir/dumps/Test_textprop_01.dump

Patch 8.1.1342
Problem:    Using freed memory when joining line with text property.
Solution:   Use already computed length.
Files:	    src/ops.c

Patch 8.1.1343
Problem:    Text properties not adjusted for <A HREF="visual.html#Visual">Visual</A> block mode delete.
Solution:   Call adjust_prop_columns(). (closes #4384)
Files:	    src/ops.c, src/textprop.c, src/testdir/test_textprop.vim,
            src/misc1.c, src/testdir/dumps/Test_textprop_vis_01.dump,
            src/testdir/dumps/Test_textprop_vis_02.dump

Patch 8.1.1344
Problem:    Coverity complains about possibly using a NULL pointer and <A HREF="uganda.html#copying">copying</A>
            a <A HREF="eval.html#string">string</A> into a fixed size buffer.
Solution:   Check for NULL, even though <A HREF="motion.html#it">it</A> should not happen.  Use
            vim_strncpy() instead of strcpy().
Files:	    src/change.c, src/memline.c

Patch 8.1.1345
Problem:    Stuck in <A HREF="eval.html#sandbox">sandbox</A> with &quot;:s/../\=Function/gn&quot;.
Solution:   Don't skip over code to restore <A HREF="eval.html#sandbox">sandbox</A>. (Christian Brabandt)
Files:	    src/ex_cmds.c, src/testdir/test_substitute.vim

Patch 8.1.1346
Problem:    Error for <A HREF="if_pyth.html#Python">Python</A> exception does not show useful info.
Solution:   Show the last line instead of the first one. (Ben Jackson,
            closes #4381)
Files:	    src/if_py_both.h, src/testdir/test86.ok, src/testdir/test87.ok,
            src/testdir/test_python2.vim, src/testdir/test_python3.vim,
            src/testdir/test_pyx2.vim, src/testdir/test_pyx3.vim

Patch 8.1.1347 (after 8.1.1327)
Problem:    Fractional scroll position not restored after closing <A HREF="windows.html#window">window</A>.
Solution:   Do restore fraction if topline is not one.
Files:	    src/window.c, src/testdir/test_window_cmd.vim

Patch 8.1.1348
Problem:    Running tests may cause the <A HREF="windows.html#window">window</A> to move.
Solution:   Correct the reported <A HREF="windows.html#window">window</A> position for the offset with the
            position after &quot;<A HREF="gui.html#:winpos">:winpos</A>&quot;.  Works around an xterm bug.
Files:	    src/testdir/test_edit.vim

Patch 8.1.1349
Problem:    If <A HREF="editing.html#writing">writing</A> runs into a conversion error the <A HREF="editing.html#backup">backup</A> file is
            deleted. (Arseny Nasokin)
Solution:   Don't delete the <A HREF="editing.html#backup">backup</A> file is the file was overwritten and a
            conversion error occurred. (Christian Brabandt, closes #4387)
Files:	    src/fileio.c, src/testdir/test_writefile.vim

Patch 8.1.1350
Problem:    &quot;<A HREF="motion.html#W">W</A>&quot; for wrapping not shown when more than 99 matches.
Solution:   Adjust check for length. (Masato Nishihata, closes #4388)
Files:	    src/search.c, src/testdir/test_search_stat.vim

Patch 8.1.1351
Problem:    Text property wrong after <A HREF="change.html#:substitute">:substitute</A>.
Solution:   Save for <A HREF="undo.html#undo">undo</A> before <A HREF="change.html#changing">changing</A> any text properties.
Files:	    src/testdir/test_textprop.vim, src/ex_cmds.c, src/textprop.c,
            src/proto/textprop.pro, src/change.c, src/edit.c, src/misc1.c,
            src/ops.c

Patch 8.1.1352
Problem:    Undofile() reports wrong name. (Francisco Giordano)
Solution:   Clean up the name before <A HREF="change.html#changing">changing</A> path separators. (closes #4392,
            closes #4394)
Files:	    src/evalfunc.c, src/testdir/test_undo.vim

Patch 8.1.1353 (after 8.1.1352)
Problem:    Undo test fails on <A HREF="os_mac.html#Mac">Mac</A>.
Solution:   Expect &quot;private&quot; on the <A HREF="os_mac.html#Mac">Mac</A>.
Files:	    src/testdir/test_undo.vim

Patch 8.1.1354
Problem:    Getting a <A HREF="eval.html#list">list</A> of text lines is clumsy.
Solution:   Add the =&lt;&lt; assignment. (Yegappan Lakshmanan, closes #4386)
Files:	    runtime/doc/eval.txt, src/eval.c, src/testdir/test_let.vim

Patch 8.1.1355
Problem:    Obvious mistakes are accepted <A HREF="motion.html#as">as</A> valid expressions.
Solution:   Be more strict about parsing numbers. (Yasuhiro Matsumoto,
            closes #3981)
Files:	    src/charset.c, src/eval.c, src/evalfunc.c, src/ex_cmds.c,
            src/ex_getln.c, src/json.c, src/misc2.c, src/ops.c, src/option.c,
            src/proto/charset.pro, src/testdir/test_expr.vim,
            src/testdir/test_json.vim

Patch 8.1.1356
Problem:    Some text in heredoc assignment ends the text. (Ozaki Kiichi)
Solution:   Recognize &quot;let <A HREF="visual.html#v">v</A> =&lt;&lt;&quot; and skip until the end.
Files:	    src/userfunc.c, src/testdir/test_let.vim

Patch 8.1.1357
Problem:    Test 37 is old style.
Solution:   Turn <A HREF="motion.html#it">it</A> into a new style test. (Yegappan Lakshmanan, closes #4398)
Files:	    src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test37.in, src/testdir/test37.ok,
            src/testdir/test_scrollbind.vim

Patch 8.1.1358
Problem:    Cannot enter character with a CSI byte.
Solution:   Only check &quot;gui.in_use&quot; when VIMDLL is defined. (Ken Takata,
            closes #4396)
Files:	    src/getchar.c

Patch 8.1.1359
Problem:    Text property wrong after <A HREF="change.html#:substitute">:substitute</A> with <A HREF="intro.html#backslash">backslash</A>.
Solution:   Adjust text property columns when removing backslashes.
            (closes #4397)
Files:	    src/ex_cmds.c, src/testdir/test_textprop.vim, src/vim.h,
            src/textprop.c, src/proto/textprop.pro, src/change.c, src/edit.c,
            src/misc1.c, src/ops.c

Patch 8.1.1360 (after Patch 8.1.1345)
Problem:    Buffer left <A HREF="options.html#'nomodifiable'">'nomodifiable'</A> after <A HREF="change.html#:substitute">:substitute</A>. (Ingo Karkat)
Solution:   Save the value of <A HREF="options.html#'modifiable'">'modifiable'</A> earlier. (Christian Brabandt,
            closes #4403)
Files:	    src/ex_cmds.c, src/testdir/test_substitute.vim

Patch 8.1.1361
Problem:    <A HREF="if_pyth.html#Python">Python</A> setuptools don't work with <A HREF="if_pyth.html#Python">Python</A> 3.
Solution:   Add dummy implementation for find_module. (Joel Frederico,
            closes #4402, closes #3984)
Files:	    src/if_py_both.h

Patch 8.1.1362
Problem:    Code and data in tests can be hard to read.
Solution:   Use the new heredoc style. (Yegappan Lakshmanan, closes #4400)
Files:	    src/testdir/test_autocmd.vim, src/testdir/test_balloon.vim,
            src/testdir/test_bufline.vim, src/testdir/test_cindent.vim,
            src/testdir/test_conceal.vim, src/testdir/test_exit.vim,
            src/testdir/test_fold.vim, src/testdir/test_goto.vim,
            src/testdir/test_join.vim, src/testdir/test_mksession_utf8.vim,
            src/testdir/test_normal.vim, src/testdir/test_profile.vim,
            src/testdir/test_quickfix.vim, src/testdir/test_startup.vim,
            src/testdir/test_terminal.vim, src/testdir/test_xxd.vim

Patch 8.1.1363
Problem:    &quot;<A HREF="windows.html#:vert">:vert</A> options&quot; does not make a vertical split.
Solution:   Pass the right modifiers in $OPTWIN_CMD. (Ken Takata,
            closes #4401)
Files:	    src/ex_cmds2.c, src/testdir/test_options.vim

Patch 8.1.1364
Problem:    Design for <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> support needs more details.
Solution:   Add details about using a <A HREF="windows.html#window">window</A> and buffer.  Rename <A HREF="popup.html#popup_show()">popup_show()</A>
            to <A HREF="popup.html#popup_create()">popup_create()</A> and add <A HREF="popup.html#popup_show()">popup_show()</A> and <A HREF="popup.html#popup_hide()">popup_hide()</A>.
Files:	    runtime/doc/popup.txt

Patch 8.1.1365
Problem:    Source command doesn't check for the <A HREF="eval.html#sandbox">sandbox</A>. (Armin Razmjou)
Solution:   Check for the <A HREF="eval.html#sandbox">sandbox</A> when sourcing a file.
Files:	    src/getchar.c, src/testdir/test_source.vim

Patch 8.1.1366
Problem:    Using expressions in a <A HREF="options.html#modeline">modeline</A> is unsafe.
Solution:   Disallow using expressions in a <A HREF="options.html#modeline">modeline</A>, unless the
            <A HREF="options.html#'modelineexpr'">'modelineexpr'</A> option is set.  Update help, add more tests.
Files:	    runtime/doc/options.txt, src/option.c, src/option.h,
            src/testdir/test_modeline.vim, src/testdir/test49.in

Patch 8.1.1367 (after 8.1.1366)
Problem:    can set <A HREF="options.html#'modelineexpr'">'modelineexpr'</A> in <A HREF="options.html#modeline">modeline</A>.
Solution:   Add P_SECURE flag.
Files:	    src/option.c, src/testdir/test_modeline.vim

Patch 8.1.1368 (after 8.1.1366)
Problem:    Modeline test fails with <A HREF="if_pyth.html#python">python</A> but without pythonhome.
Solution:   Correct test argument.
Files:	    src/testdir/test_modeline.vim

Patch 8.1.1369
Problem:    Get <A HREF="message.html#E484">E484</A> when using <A HREF="builtin.html#system()">system()</A> during <A HREF="gui.html#GUI">GUI</A> <A HREF="starting.html#startup">startup</A>.
Solution:   Check &quot;gui.starting&quot;. (Ken Takata)
Files:	    src/os_win32.c

Patch 8.1.1370
Problem:    Not using the new github feature for donations.
Solution:   Add a Sponsor button. (closes #4417)
Files:	    .github/FUNDING.yml

Patch 8.1.1371
Problem:    Cannot recover from a swap file.
Solution:   Do not expand environment <A HREF="eval.html#variables">variables</A> in the swap file name.
            Do not check the extension when we already know a file is a swap
            file.  (Ken Takata, closes #4415, closes #4369)
Files:	    src/buffer.c, src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c,
            src/gui.c, src/if_cscope.c, src/main.c, src/memline.c,
            src/misc1.c, src/proto/memline.pro, src/proto/misc1.pro,
            src/search.c, src/spell.c, src/spellfile.c, src/tag.c,
            src/testdir/test_swap.vim, src/vim.h

Patch 8.1.1372
Problem:    When evaluating <A HREF="options.html#'statusline'">'statusline'</A> the current <A HREF="windows.html#window">window</A> is unknown.
            (Daniel Hahler)
Solution:   Set &quot;<A HREF="options.html#g:actual_curwin">g:actual_curwin</A>&quot; for &#37;{} items.  Set &quot;<A HREF="options.html#g:statusline_winid">g:statusline_winid</A>&quot;
            when evaluating &#37;!. (closes #4406, closes #3299)
Files:	    src/buffer.c, runtime/doc/options.txt,
            src/testdir/test_statusline.vim

Patch 8.1.1373
Problem:    &quot;<A HREF="change.html#[p">[p</A>&quot; in <A HREF="visual.html#Visual">Visual</A> mode puts in wrong line.
Solution:   Call nv_put() instead of duplicating the functionality.
            (closes #4408)
Files:	    src/normal.c, src/testdir/test_put.vim

Patch 8.1.1374
Problem:    Check for file changed triggers too often.
Solution:   Don't use &quot;b_p_ar&quot; when <A HREF="motion.html#it">it</A> is negative.
Files:	    src/fileio.c

Patch 8.1.1375
Problem:    Without &quot;TS&quot; in <A HREF="options.html#'shortmess'">'shortmess'</A> get a <A HREF="message.html#hit-enter">hit-enter</A> prompt often.
Solution:   Always truncate the search message.  Also avoid putting <A HREF="motion.html#it">it</A> in the
            message <A HREF="cmdline.html#history">history</A>. (closes #4413)
Files:	    src/search.c, src/main.c, src/testdir/test_search_stat.vim

Patch 8.1.1376
Problem:    Warnings for size_t/int mixups.
Solution:   Change types, add type casts. (Mike Williams)
Files:	    src/search.c, src/textprop.c

Patch 8.1.1377
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> <A HREF="gui.html#GUI">GUI</A> uses wrong shell command for bash. (Robert Bogomip)
Solution:   Check that <A HREF="options.html#'shellcmdflag'">'shellcmdflag'</A> is &quot;/c&quot;. (Ken Takata, closes #4418)
Files:	    src/os_win32.c

Patch 8.1.1378
Problem:    Delete() can not handle a file name that looks like a <A HREF="pattern.html#pattern">pattern</A>.
Solution:   Use <A HREF="builtin.html#readdir()">readdir()</A> instead of appending &quot;/*&quot; and expanding <A HREF="editing.html#wildcards">wildcards</A>.
            (Ken Takata, closes #4424, closes #696)
Files:	    src/testdir/test_functions.vim, src/evalfunc.c, src/fileio.c,
            src/proto/fileio.pro

Patch 8.1.1379 (after 8.1.1374)
Problem:    Filechanged test hangs.
Solution:   Do not check <A HREF="options.html#'autoread'">'autoread'</A>.
Files:	    src/fileio.c, src/testdir/test_filechanged.vim

Patch 8.1.1380
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> building VIMDLL with MSVC: SUBSYSTEM is not set.
Solution:   Invert condition. (Ken Takata, closes #4422)
Files:	    src/Make_mvc.mak

Patch 8.1.1381
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: missing build dependency.
Solution:   Make gui_dwrite.cpp depend on gui_dwrite.h. (Ken Takata,
            closes #4423)
Files:	    src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.1.1382
Problem:    Error when editing test file.
Solution:   Remove part of <A HREF="options.html#modeline">modeline</A>.
Files:	    src/testdir/test_vimscript.vim, src/testdir/test49.vim,
            src/testdir/test49.in

Patch 8.1.1383
Problem:    Warning for size_t/int mixup.
Solution:   Change type. (Mike Williams)
Files:	    src/search.c

Patch 8.1.1384
Problem:    Using &quot;int&quot; for alloc() often results in compiler warnings.
Solution:   Use &quot;size_t&quot; and remove type casts.  Remove alloc_check(), Vim
            only works with 32 bit ints anyway.
Files:	    src/misc2.c, src/proto/misc2.pro, src/change.c, src/ex_cmds.c,
            src/netbeans.c, src/autocmd.c, src/buffer.c, src/change.c,
            src/channel.c, src/charset.c, src/debugger.c, src/dict.c,
            src/diff.c, src/digraph.c, src/edit.c, src/eval.c, src/evalfunc.c,
            src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c, src/ex_eval.c,
            src/ex_getln.c, src/fileio.c, src/findfile.c, src/fold.c,
            src/getchar.c, src/gui.c, src/gui_at_fs.c, src/gui_gtk.c,
            src/gui_gtk_x11.c, src/gui_motif.c, src/gui_w32.c, src/hashtab.c,
            src/if_cscope.c, src/if_perlsfio.c, src/if_python3.c,
            src/if_xcmdsrv.c, src/indent.c, src/insexpand.c, src/main.c,
            src/mbyte.c, src/memfile.c, src/memline.c, src/menu.c,
            src/message.c, src/misc1.c, src/misc2.c, src/netbeans.c,
            src/ops.c, src/option.c, src/os_amiga.c, src/os_mswin.c,
            src/os_unix.c, src/os_vms.c, src/os_win32.c, src/quickfix.c,
            src/regexp.c, src/screen.c, src/spell.c, src/spellfile.c,
            src/syntax.c, src/term.c, src/undo.c, src/usercmd.c,
            src/userfunc.c, src/version.c, src/winclip.c

Patch 8.1.1385
Problem:    Signed/unsigned compiler warning.
Solution:   Use STRLEN() instead of <A HREF="builtin.html#strlen()">strlen()</A>.
Files:	    src/fileio.c

Patch 8.1.1386
Problem:    Unnecessary type casts for lalloc().
Solution:   Remove type casts.  Change lalloc(size, <A HREF="eval.html#TRUE">TRUE</A>) to alloc(size).
Files:	    src/buffer.c, src/change.c, src/channel.c, src/diff.c, src/edit.c,
            src/eval.c, src/ex_cmds.c, src/ex_getln.c, src/fileio.c,
            src/getchar.c, src/gui_mac.c, src/insexpand.c, src/gui_w32.c,
            src/gui_x11.c, src/menu.c, src/netbeans.c, src/ops.c,
            src/os_mswin.c, src/os_amiga.c, src/os_qnx.c, src/os_unix.c,
            src/os_win32.c, src/popupmnu.c, src/quickfix.c, src/regexp.c,
            src/regexp_nfa.c, src/screen.c, src/search.c, src/sign.c,
            src/spell.c, src/spellfile.c, src/syntax.c, src/tag.c,
            src/terminal.c, src/textprop.c, src/ui.c, src/undo.c,
            src/userfunc.c, src/winclip.c, src/window.c

Patch 8.1.1387
Problem:    Calling <A HREF="textprop.html#prop_add()">prop_add()</A> in an empty buffer doesn't work. (Dominique
            Pelle)
Solution:   Open the memline before adding a text property. (closes #4412)
Files:	    src/textprop.c, src/testdir/test_textprop.vim

Patch 8.1.1388
Problem:    Errors when calling <A HREF="textprop.html#prop_remove()">prop_remove()</A> for an unloaded buffer.
Solution:   Bail out when the buffer is not loaded.  Add a few more tests for
            failing when the buffer number is invalid.
Files:	    src/textprop.c, src/testdir/test_textprop.vim

Patch 8.1.1389
Problem:    Changes are not flushed when end and start overlap. (Paul Jolly)
Solution:   When end of a previous changes overlaps with start of a new
            change, first flush listeners.
Files:	    src/change.c, src/testdir/test_listener.vim

Patch 8.1.1390
Problem:    Search stats are off when using <A HREF="intro.html#count">count</A> or offset.
Solution:   Recompute the stats when needed. (Masato Nishihata, closes #4410)
Files:	    src/testdir/test_search_stat.vim, src/search.c

Patch 8.1.1391
Problem:    No <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> support.
Solution:   Add initial code for <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#windows">windows</A>.  Add the <A HREF="options.html#'wincolor'">'wincolor'</A> option.
Files:	    Filelist, runtime/doc/popup.txt, runtime/doc/options.txt,
            src/Make_cyg_ming.mak, src/Make_mvc.mak, src/Make_vms.mms,
            src/Makefile, src/autocmd.c, src/buffer.c, src/ex_cmds.h,
            src/ex_cmdidxs.h, src/proto/buffer.pro, src/eval.c src/evalfunc.c
            src/feature.h, src/globals.h, src/option.c, src/option.h,
            src/popupwin.c, src/proto.h, src/proto/popupwin.pro,
            src/proto/window.pro, src/screen.c, src/structs.h, src/terminal.c,
            src/testdir/Make_all.mak, src/testdir/dumps/Test_popupwin_01.dump,
            src/testdir/test_popupwin.vim, src/vim.h, src/window.c

Patch 8.1.1392 (after 8.1.1391)
Problem:    Build failure in tiny version.
Solution:   Define ex_popupclear to ex_ni if not implemented.  Add UNUSED.
Files:	    src/ex_docmd.c, src/window.c

Patch 8.1.1393
Problem:    Unnecessary type casts.
Solution:   Remove type casts from alloc() and lalloc() calls. (Mike Williams)
Files:	    src/channel.c, src/crypt.c, src/dict.c, src/dosinst.c,
            src/evalfunc.c, src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c,
            src/ex_getln.c, src/fileio.c, src/findfile.c, src/if_ole.cpp,
            src/if_py_both.h, src/list.c, src/message.c, src/misc1.c,
            src/misc2.c, src/ops.c, src/os_vms.c, src/os_win32.c,
            src/quickfix.c, src/regexp_nfa.c, src/screen.c, src/search.c,
            src/sign.c, src/syntax.c, src/tag.c, src/term.c, src/terminal.c,
            src/textprop.c

Patch 8.1.1394
Problem:    Not restoring <A HREF="term.html#t_F2">t_F2</A> in <A HREF="change.html#registers">registers</A> test.
Solution:   Assign to &amp;t_F2 instead of <A HREF="term.html#t_F2">t_F2</A>. (Andy Massimino, closes #4434)
Files:	    src/testdir/test_registers.vim

Patch 8.1.1395
Problem:    Saving for <A HREF="undo.html#undo">undo</A> may access invalid memory. (Dominique Pelle)
Solution:   Set ml_line_len also when returning a constant <A HREF="eval.html#string">string</A>.
Files:	    src/memline.c, src/testdir/test_textprop.vim

Patch 8.1.1396
Problem:    <A HREF="options.html#'wincolor'">'wincolor'</A> does not apply to lines below the buffer.
Solution:   Also apply <A HREF="options.html#'wincolor'">'wincolor'</A> to the &quot;<A HREF="change.html#~">~</A>&quot; lines and the number column.
Files:	    src/screen.c, src/testdir/test_highlight.vim,
            src/testdir/dumps/Test_wincolor_01.dump

Patch 8.1.1397
Problem:    Build fails in tiny version.
Solution:   Always define hl_combine_attr().
Files:	    src/syntax.c

Patch 8.1.1398
Problem:    Duplicate line in MSVC build file.
Solution:   Remove the line. (Ken Takata, closes #4436)
Files:	    src/Make_mvc.mak

Patch 8.1.1399
Problem:    Popup <A HREF="windows.html#windows">windows</A> not adjusted when switching tabs.
Solution:   Save and restore first_tab_popupwin. Fix closing a <A HREF="tabpage.html#tabpage">tabpage</A>.
Files:	    src/window.c, src/popupwin.c, src/proto/popupwin.pro,
            src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_02.dump,
            src/testdir/dumps/Test_popupwin_03.dump,
            src/testdir/dumps/Test_popupwin_04.dump

Patch 8.1.1400
Problem:    Using global pointer for tab-local popups is clumsy.
Solution:   Use the pointer in tabpage_T.
Files:	    src/popupwin.c, src/globals.h, src/eval.c, src/screen.c,
            src/window.c

Patch 8.1.1401
Problem:    Misspelled mkspellmem <A HREF="motion.html#as">as</A> makespellmem.
Solution:   Drop duplicate help entry, fix test. (Naruhiko Nishino, Yasuhiro
            Matsumoto, closes #4437)
Files:	    runtime/doc/options.txt, src/testdir/test_modeline.vim

Patch 8.1.1402
Problem:    &quot;<A HREF="builtin.html#timer">timer</A>&quot; option of <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#windows">windows</A> not supported.
Solution:   Implement the &quot;<A HREF="builtin.html#timer">timer</A>&quot; option. (Yasuhiro Matsumoto, closes #4439)
Files:	    src/structs.h, src/testdir/test_popupwin.vim, src/popupwin.c,
            src/window.c, runtime/doc/popup.txt

Patch 8.1.1403
Problem:    Cannot build without the <A HREF="builtin.html#timer">timer</A> feature.
Solution:   Add #ifdef.
Files:	    src/structs.h, src/window.c, src/popupwin.c,
            src/testdir/test_popupwin.vim

Patch 8.1.1404
Problem:    Cannot change the patch level when building with NSIS.
Solution:   Use $PATCHLEVEL if defined. (Christian Brabandt)
Files:	    nsis/gvim.nsi

Patch 8.1.1405
Problem:    &quot;highlight&quot; option of <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#windows">windows</A> not supported.
Solution:   Implement the &quot;highlight&quot; option.
Files:	    src/option.c, src/proto/option.pro, src/diff.c src/popupwin.c,
            runtime/doc/popup.txt, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_01.dump,
            src/testdir/dumps/Test_popupwin_03.dump

Patch 8.1.1406
Problem:    <A HREF="popup.html#popup_hide()">popup_hide()</A> and <A HREF="popup.html#popup_show()">popup_show()</A> not implemented yet.
Solution:   Implement the <A HREF="eval.html#functions">functions</A>.
Files:	    src/popupwin.c, src/proto/popupwin.pro, src/evalfunc.c,
            src/structs.h, runtime/doc/popup.txt, src/screen.c, src/vim.h,
            src/testdir/test_popupwin.vim

Patch 8.1.1407
Problem:    Popup_create() does not support text properties.
Solution:   Support the third form of the text argument.
Files:	    src/textprop.c, src/proto/textprop.pro, src/popupwin.c,
            src/testdir/test_popupwin.vim, src/screen.c,
            src/testdir/dumps/Test_popupwin_02.dump,
            src/testdir/dumps/Test_popupwin_03.dump,
            src/testdir/dumps/Test_popupwin_04.dump,
            runtime/doc/popup.txt

Patch 8.1.1408
Problem:    PFL_HIDDEN conflicts with system header file. (Ken Takata)
Solution:   Rename to POPF_HIDDEN.
Files:	    src/popupwin.c, src/screen.c, src/vim.h

Patch 8.1.1409
Problem:    Coverity warns for using uninitialized memory.
Solution:   Add a condition to clearing the growarray.
Files:	    src/json.c

Patch 8.1.1410
Problem:    Popup_move() is not implemented yet.
Solution:   Implement <A HREF="motion.html#it">it</A>. (Yasuhiro Matsumoto, closes #4441)  Improve the
            positioning and resizing.
Files:	    runtime/doc/popup.txt, src/evalfunc.c, src/popupwin.c,
            src/screen.c, src/structs.h, src/proto/popupwin.pro,
            src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_05.dump

Patch 8.1.1411
Problem:    Coverity warns for divide by zero.
Solution:   Make sure width is larger than zero.
Files:	    src/charset.c

Patch 8.1.1412
Problem:    Test 30 is old style.
Solution:   Turn <A HREF="motion.html#it">it</A> into a new style test. (Yegappan Lakshmanan, closes #4440)
Files:	    src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test30.in, src/testdir/test30.ok,
            src/testdir/test_fileformat.vim

Patch 8.1.1413
Problem:    Error when the drive of the swap file was disconnected.
Solution:   Try closing and re-opening the swap file. (partly by Joe Orost,
            closes #4378)
Files:	    src/memfile.c, src/structs.h, src/testdir/test_startup.vim

Patch 8.1.1414
Problem:    Alloc() returning &quot;char_u *&quot; causes a lot of type casts.
Solution:   Have <A HREF="motion.html#it">it</A> return &quot;void *&quot;. (Mike Williams)  Define ALLOC_ONE() to
            check the simple allocations.
Files:	    src/autocmd.c, src/blob.c, src/blowfish.c, src/buffer.c,
            src/change.c, src/channel.c, src/crypt.c, src/crypt_zip.c,
            src/dict.c, src/diff.c, src/eval.c, src/evalfunc.c, src/ex_cmds.c,
            src/ex_cmds2.c, src/ex_docmd.c, src/ex_eval.c, src/ex_getln.c,
            src/fileio.c, src/findfile.c, src/getchar.c, src/gui_gtk.c,
            src/gui_gtk_x11.c, src/gui_mac.c, src/gui_motif.c,
            src/gui_photon.c, src/gui_w32.c, src/gui_x11.c, src/hardcopy.c,
            src/hashtab.c, src/if_cscope.c, src/if_mzsch.c, src/if_perlsfio.c,
            src/if_py_both.h, src/if_python3.c, src/if_xcmdsrv.c,
            src/insexpand.c, src/list.c, src/mark.c, src/mbyte.c,
            src/memfile.c, src/memfile_test.c, src/memline.c, src/message.c,
            src/misc2.c, src/netbeans.c, src/normal.c, src/ops.c,
            src/option.c, src/os_amiga.c, src/os_mac_conv.c, src/os_mswin.c,
            src/os_unix.c, src/os_vms.c, src/os_win32.c, src/popupmnu.c,
            src/proto/misc2.pro, src/quickfix.c, src/regexp.c,
            src/regexp_nfa.c, src/screen.c, src/search.c, src/sign.c,
            src/spell.c, src/spellfile.c, src/syntax.c, src/tag.c, src/term.c,
            src/terminal.c, src/textprop.c, src/ui.c, src/undo.c,
            src/userfunc.c, src/version.c, src/winclip.c, src/window.c,
            src/vim.h, src/testdir/test_cscope.vim

Patch 8.1.1415 (after 8.1.1414)
Problem:    Build error in <A HREF="os_win32.html#MS-Windows">MS-Windows</A> <A HREF="gui.html#GUI">GUI</A>.
Solution:   Fix the LALLOC_MULT() argument.
Files:	    src/gui_w32.c

Patch 8.1.1416
Problem:    Popup_getposition() not implemented yet.
Solution:   Implement <A HREF="motion.html#it">it</A>. (Yasuhiro Matsumoto, closes #4449)
Files:	    runtime/doc/popup.txt, src/evalfunc.c, src/popupwin.c,
            src/proto/popupwin.pro, src/testdir/test_popupwin.vim

Patch 8.1.1417
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="builtin.html#resolve()">resolve()</A> does not resolve all components of the path.
            (David Briscoe)
Solution:   Do not bail out for a reparse point. (Yasuhiro Matsumoto,
            closes #4211, closes #4447)
Files:	    src/os_mswin.c, src/testdir/test_functions.vim

Patch 8.1.1418
Problem:    Win_execute() is not implemented yet.
Solution:   Implement <A HREF="motion.html#it">it</A>.
Files:	    src/evalfunc.c, src/popupwin.c, src/testdir/test_execute_func.vim,
            runtime/doc/popup.txt, runtime/doc/eval.txt

Patch 8.1.1419
Problem:    Listener callbacks may be called recursively.
Solution:   Set &quot;updating_screen&quot; while listener callbacks are invoked.
Files:	    src/change.c, src/screen.c, src/proto/screen.pro, src/ui.c

Patch 8.1.1420
Problem:    Popup <A HREF="windows.html#window">window</A> size only uses first line length.
Solution:   Use the longest line. (Ben Jackson, closes #4451)  Also deal with
            wrapping lines.
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.1421
Problem:    Drawing &quot;<A HREF="change.html#~">~</A>&quot; line in <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Solution:   Just draw text in the last line of the <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Files:	    src/screen.c, src/structs.h, src/popupwin.c,
            src/proto/popupwin.pro, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_05.dump,
            src/testdir/dumps/Test_popupwin_06.dump

Patch 8.1.1422
Problem:    Popup_getoptions() not implemented yet.
Solution:   Implement <A HREF="motion.html#it">it</A>. (closes #4452)
Files:	    runtime/doc/popup.txt, src/evalfunc.c, src/popupwin.c,
            src/proto/popupwin.pro, src/testdir/test_popupwin.vim

Patch 8.1.1423
Problem:    Popup <A HREF="windows.html#windows">windows</A> use <A HREF="options.html#options">options</A> from current <A HREF="windows.html#window">window</A> and buffer.
Solution:   Clear all local <A HREF="options.html#options">options</A> when creating a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Files:	    src/popupwin.c, src/option.c, src/proto/option.pro,
            src/testdir/test_popupwin.vim

Patch 8.1.1424
Problem:    Crash when <A HREF="popup.html#popup">popup</A> menu is deleted while waiting for char.
Solution:   Bail out when pum_array was cleared.
Files:	    src/popupmnu.c

Patch 8.1.1425
Problem:    Win_execute() does not set <A HREF="windows.html#window">window</A> pointers properly.
Solution:   Use switch_win_noblock().  Also execute <A HREF="autocmd.html#autocommands">autocommands</A> in a <A HREF="popup.html#popup">popup</A>
            <A HREF="windows.html#window">window</A>.
Files:	    src/window.c, src/proto/window.pro, src/evalfunc.c, src/autocmd.c

Patch 8.1.1426
Problem:    No test for <A HREF="syntax.html#syntax">syntax</A> highlight in <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Solution:   Add a screenshot test.  Update associated documentation. Avoid
            <A HREF="options.html#'buftype'">'buftype'</A> being reset by <A HREF="builtin.html#setbufvar()">setbufvar()</A>.
Files:	    runtime/doc/eval.txt, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_10.dump,
            src/testdir/dumps/Test_popupwin_11.dump

Patch 8.1.1427 (after 8.1.1426)
Problem:    Popup <A HREF="windows.html#window">window</A> screenshot test fails.
Solution:   Add missing change to <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> code.
Files:	    src/popupwin.c

Patch 8.1.1428
Problem:    Popup_atcursor() not implemented yet.
Solution:   Implement <A HREF="motion.html#it">it</A>. (Yasuhiro Matsumoto, closes #4456)
Files:	    runtime/doc/popup.txt, src/evalfunc.c, src/popupwin.c,
            src/proto/popupwin.pro, src/testdir/test_popupwin.vim

Patch 8.1.1429
Problem:    &quot;pos&quot; option of <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> not supported yet.
Solution:   Implement the option. Rename popup_getposition() to
            <A HREF="popup.html#popup_getpos()">popup_getpos()</A>.
Files:	    src/structs.h, src/popupwin.c, src/proto/popupwin.pro,
            runtime/doc/popup.txt

Patch 8.1.1430
Problem:    Popup <A HREF="windows.html#window">window</A> option &quot;wrap&quot; not supported.
Solution:   Implement <A HREF="motion.html#it">it</A>.
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_wrap.dump,
            src/testdir/dumps/Test_popupwin_nowrap.dump

Patch 8.1.1431
Problem:    Popup <A HREF="windows.html#window">window</A> listed <A HREF="motion.html#as">as</A> &quot;Scratch&quot;.
Solution:   <A HREF="eval.html#List">List</A> them <A HREF="motion.html#as">as</A> &quot;Popup&quot;.
Files:	    src/buffer.c, src/popupwin.c, src/testdir/test_popupwin.vim,
            runtime/doc/popup.txt, runtime/doc/windows.txt

Patch 8.1.1432 (after 8.1.1429)
Problem:    Can't build with <A HREF="eval.html#eval">eval</A> feature.
Solution:   Add missing rename.
Files:	    src/evalfunc.c

Patch 8.1.1433
Problem:    Win_execute() may leave <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> focused, eventually leading
            to a crash. (Bjorn Linse)
Solution:   When previous <A HREF="windows.html#window">window</A> was closed, go to the first <A HREF="windows.html#window">window</A>.
Files:	    src/window.c, src/testdir/test_popupwin.vim

Patch 8.1.1434
Problem:    Test 3 is old style.
Solution:   Turn into a new style test. (Yegappan Lakshmanan, closes #4460)
Files:	    src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test3.in, src/testdir/test3.ok,
            src/testdir/test_cindent.vim

Patch 8.1.1435
Problem:    Memory usage test is a bit too flaky.
Solution:   Adjust the tolerances a bit. (Christian Brabandt)
Files:	    src/testdir/test_memory_usage.vim

Patch 8.1.1436
Problem:    Writefile test fails when run under /tmp.
Solution:   Adjust <A HREF="options.html#'backupskip'">'backupskip'</A>. (Kenta Sato, closes #4462)
Files:	    src/testdir/test_writefile.vim

Patch 8.1.1437
Problem:    Code to handle callbacks is duplicated.
Solution:   Add callback_T and <A HREF="eval.html#functions">functions</A> to deal with <A HREF="motion.html#it">it</A>.
Files:	    src/structs.h, src/evalfunc.c, src/proto/evalfunc.pro,
            src/change.c, src/channel.c, src/proto/channel.pro, src/buffer.c,
            src/userfunc.c, src/proto/userfunc.pro, src/eval.c,
            src/ex_cmds2.c, src/popupwin.c

Patch 8.1.1438
Problem:    Some commands cause trouble in a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Solution:   Add NOT_IN_POPUP_WINDOW.
Files:	    src/macros.h, src/popupwin.c, src/proto/popupwin.pro,
            src/ex_docmd.c, src/ex_cmds2.c, src/window.c,
            src/testdir/test_popupwin.vim

Patch 8.1.1439
Problem:    Json_encode() is very slow for large results.
Solution:   In the growarray use a growth of at least 50&#37;. (Ken Takata,
            closes #4461)
Files:	    src/misc2.c

Patch 8.1.1440
Problem:    Win_execute() test fails.
Solution:   Adjust the expected error number.  Move to <A HREF="popup.html#popup">popup</A> test.
Files:	    src/testdir/test_execute_func.vim, src/testdir/test_popupwin.vim

Patch 8.1.1441
Problem:    Popup <A HREF="windows.html#window">window</A> <A HREF="change.html#filter">filter</A> not yet implemented.
Solution:   Implement the <A HREF="popup.html#popup">popup</A> <A HREF="change.html#filter">filter</A>.
Files:	    src/structs.h, runtime/doc/popup.txt, src/popupwin.c,
            src/proto/popupwin.pro, src/window.c, src/getchar.c, src/screen.c,
            src/misc2.c, src/proto/misc2.pro, src/vim.h,
            src/testdir/test_popupwin.vim

Patch 8.1.1442
Problem:    Popup <A HREF="windows.html#windows">windows</A> not considered when the Vim <A HREF="windows.html#window">window</A> is resized.
            (Ben Jackson)
Solution:   Reallocate the w_lines structure. (closes #4467)
Files:	    src/screen.c

Patch 8.1.1443
Problem:    Popup <A HREF="windows.html#window">window</A> padding and border not implemented yet.
Solution:   Implement padding and border.  Add core position and size to
            <A HREF="popup.html#popup_getpos()">popup_getpos()</A>.
Files:	    src/structs.h, src/popupwin.c, src/screen.c,
            src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_20.dump, runtime/doc/popup.txt

Patch 8.1.1444
Problem:    Not using double line characters for <A HREF="popup.html#popup">popup</A> border.
Solution:   Use double line characters if using <A HREF="mbyte.html#utf-8">utf-8</A>.
Files:	    src/screen.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_21.dump

Patch 8.1.1445
Problem:    Popup <A HREF="windows.html#window">window</A> border highlight not implemented yet.
Solution:   Implement the &quot;borderhighlight&quot; option.
Files:	    src/structs.h, src/popupwin.c, src/window.c, src/screen.c,
            src/testdir/test_popupwin.vim, runtime/doc/popup.txt,
            src/testdir/dumps/Test_popupwin_22.dump

Patch 8.1.1446
Problem:    Popup <A HREF="windows.html#window">window</A> callback not implemented yet.
Solution:   Implement the callback.
Files:	    runtime/doc/popup.txt, src/popupwin.c, src/structs.h,
            src/evalfunc.c, src/window.c, src/testdir/test_popupwin.vim

Patch 8.1.1447
Problem:    Not allowed to create an empty <A HREF="popup.html#popup">popup</A>.
Solution:   Remove restriction that there is some text. (closes #4470)
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.1448
Problem:    Statusline is sometimes drawn on top of <A HREF="popup.html#popup">popup</A>.
Solution:   Redraw popups after the statusline. (Naruhiko Nishino,
            closes #4468)
Files:	    src/screen.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_behind.dump

Patch 8.1.1449
Problem:    Popup text truncated at end of screen.
Solution:   Move <A HREF="popup.html#popup">popup</A> left if needed.  Add the &quot;fixed&quot; property to disable
            that. (Ben Jackson, closes #4466)
Files:	    runtime/doc/popup.txt, src/popupwin.c, src/structs.h,
            src/testdir/test_popupwin.vim

Patch 8.1.1450
Problem:    Popup <A HREF="windows.html#window">window</A> positioning wrong when using padding or borders.
Solution:   Fix computing the position.
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_corners.dump

Patch 8.1.1451
Problem:    <A HREF="various.html#CTRL-L">CTRL-L</A> does not clear screen with a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Solution:   Do not change the type to NOT_VALID.  Redraw all <A HREF="windows.html#windows">windows</A>.
            (closes #4471)
Files:	    src/screen.c

Patch 8.1.1452
Problem:    Line and col property of <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#windows">windows</A> not properly checked.
Solution:   Check for &quot;<A HREF="motion.html#+">+</A>&quot; or &quot;<A HREF="motion.html#-">-</A>&quot; sign.
Files:	    src/popupwin.c, src/dict.c, src/proto/dict.pro,
            src/window.c, src/testdir/test_popupwin.vim

Patch 8.1.1453
Problem:    Popup <A HREF="windows.html#window">window</A> &quot;moved&quot; property not implemented yet.
Solution:   Implement <A HREF="motion.html#it">it</A>.
Files:	    src/main.c, src/edit.c, src/gui.c, src/globals.h, src/structs.h,
            src/screen.c, src/popupwin.c, src/proto/popupwin.pro,
            src/testdir/test_popupwin.vim, runtime/doc/popup.txt

Patch 8.1.1454
Problem:    Build failure without the <A HREF="syntax.html#conceal">conceal</A> feature.
Solution:   Remove #ifdef.
Files:	    src/autocmd.c

Patch 8.1.1455
Problem:    Popup_atcursor() not completely implemented.
Solution:   Add the default for the &quot;moved&quot; property.
Files:	    src/popupwin.c, src/normal.c, src/vim.h,
            src/testdir/test_popupwin.vim

Patch 8.1.1456
Problem:    <A HREF="gui.html#WinBar">WinBar</A> not redrawn after <A HREF="scroll.html#scrolling">scrolling</A> one line.
Solution:   Exclude the winbar height when deciding what to redraw.
            (closes #4473)
Files:	    src/screen.c, src/testdir/test_winbar.vim

Patch 8.1.1457
Problem:    Cannot reuse a buffer when loading a screen dump.
Solution:   Add the &quot;bufnr&quot; option.
Files:	    runtime/doc/eval.txt, src/structs.h, src/channel.c,
            src/terminal.c, src/testdir/test_terminal.vim

Patch 8.1.1458
Problem:    Crash when using gtags. (issue #4102)
Solution:   Check for negative row or col in screen_puts_len(). (Christian
            Brabandt)
Files:	    src/screen.c

Patch 8.1.1459
Problem:    Popup <A HREF="windows.html#window">window</A> border looks bad when <A HREF="options.html#'ambiwidth'">'ambiwidth'</A> is &quot;double&quot;.
            (Yasuhiro Matsumoto)
Solution:   Only use line drawing characters when <A HREF="options.html#'ambiwidth'">'ambiwidth'</A> is &quot;single&quot;.
            (Ken Takata, closes #4477)
Files:	    src/screen.c

Patch 8.1.1460
Problem:    Popup <A HREF="windows.html#window">window</A> border characters may be wrong.
Solution:   Reset the border characters for each <A HREF="popup.html#popup">popup</A>.  Correct use of
            <A HREF="options.html#'ambiwidth'">'ambiwidth'</A>.
Files:	    src/screen.c

Patch 8.1.1461
Problem:    Tests <A HREF="diff.html#do">do</A> not run or are not reliable on some systems.
Solution:   Use &quot;findstr&quot; instead of &quot;<A HREF="quickfix.html#grep">grep</A>&quot; on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>. Clear
            PROMPT_COMMAND in the <A HREF="terminal.html#terminal">terminal</A> test. Delete temp file. Wait for
            output after executing a debug command. (Yegappan Lakshmanan,
            closes #4479)
Files:	    src/testdir/test_debugger.vim, src/testdir/test_environ.vim,
            src/testdir/test_filetype.vim, src/testdir/test_source.vim,
            src/testdir/test_terminal.vim

Patch 8.1.1462
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: using special character requires quoting.
Solution:   Add <A HREF="quotes.html#quotes">quotes</A>. (Ken Takata)
Files:	    src/testdir/test_environ.vim

Patch 8.1.1463
Problem:    Gcc warns for uninitialized variable.
Solution:   Put usage inside &quot;if&quot;.  (Ken Takata)
Files:	    src/textprop.c

Patch 8.1.1464
Problem:    Only 4-digit rgb termresponse is recognized.
Solution:   Also recognize 2-digit rgb response. (closes #4486)
Files:	    src/term.c, src/test_termcodes.vim

Patch 8.1.1465
Problem:    Allocating wrong amount of memory. (Yegappan Lakshmanan)
Solution:   Use sizeof() for right type of struct.
Files:	    src/memfile_test.c

Patch 8.1.1466
Problem:    Not updating priority on existing sign.
Solution:   Set the sign priority.  Add a test. (Yegappan Lakshmanan)
Files:	    src/sign.c, src/testdir/test_signs.vim, runtime/doc/eval.txt,
            runtime/doc/sign.txt

Patch 8.1.1467 (after 8.1.1465)
Problem:    <A HREF="if_cscop.html#Cscope">Cscope</A> test fails.
Solution:   Update expected text.
Files:	    src/testdir/test_cscope.vim

Patch 8.1.1468
Problem:    The generated desktop files may be invalid.
Solution:   Check validity with desktop-file-validate. (Christian Brabandt,
            Will Thompson, closes #4480)
Files:	    src/po/Makefile

Patch 8.1.1469
Problem:    No test for checking the cursor style response.
Solution:   Add a simple test.  Also include the missing part of 8.1.1464.
Files:	    src/term.c, src/testdir/test_termcodes.vim

Patch 8.1.1470
Problem:    New <A HREF="mbyte.html#Unicode">Unicode</A> character U+32FF missing from double-width table.
Solution:   Add the character.
Files:	    src/mbyte.c

Patch 8.1.1471
Problem:    <A HREF="options.html#'background'">'background'</A> not correctly set for 2-digit rgb termresponse.
Solution:   Adjust what digit to use. (closes #4495)
Files:	    src/term.c, src/testdir/test_termcodes.vim

Patch 8.1.1472
Problem:    Add_termcap_entry() is not tested.
Solution:   Add a simple test.
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.1473
Problem:    New <A HREF="builtin.html#resolve()">resolve()</A> implementation causes problem for plugins.
Solution:   Only resolve a reparse point after checking <A HREF="motion.html#it">it</A> is needed. (Ken
            Takata, closes #4492)
Files:	    src/os_mswin.c, src/testdir/test_functions.vim

Patch 8.1.1474
Problem:    <A HREF="options.html#'ttybuiltin'">'ttybuiltin'</A> is not tested.
Solution:   At least test that <A HREF="motion.html#it">it</A> doesn't break things.
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.1475
Problem:    Search <A HREF="eval.html#string">string</A> not displayed when <A HREF="options.html#'rightleft'">'rightleft'</A> is set.
Solution:   Clear the right part of the old text. (closes #4488, closes #4489)
Files:	    src/search.c, src/testdir/test_search.vim

Patch 8.1.1476
Problem:    No statistics displayed after running tests.
Solution:   Summarize the test results. (Christian Brabandt, closes #4391)
            Also make <A HREF="motion.html#it">it</A> possible to report a skipped file.
Files:	    src/Makefile, src/testdir/Makefile, src/testdir/summarize.vim,
            src/testdir/runtest.vim, src/testdir/test_arabic.vim,
            src/testdir/test_autochdir.vim, src/testdir/test_balloon.vim

Patch 8.1.1477
Problem:    Test summary fails in the tiny version.
Solution:   set <A HREF="options.html#'nocompatible'">'nocompatible'</A>.
Files:	    Filelist, src/testdir/summarize.vim

Patch 8.1.1478
Problem:    Still an error when running tests with the tiny version.
Solution:   Do not try reading test.log
Files:	    src/testdir/Makefile, src/testdir/summarize.vim

Patch 8.1.1479
Problem:    Change included for debugging only.
Solution:   Restore the REDIR_TEST_TO_NULL line.
Files:	    src/testdir/Makefile

Patch 8.1.1480
Problem:    Desktop file check doesn't run on CI.
Solution:   Install the desktop-file-utils <A HREF="repeat.html#packages">packages</A>. (Christian Brabandt,
            closes #4498)
Files:	    .travis.yml

Patch 8.1.1481
Problem:    Length for two-digit rgb termresponse is off by one.
Solution:   Adjust the length. (closes #4494)
Files:	    src/term.c

Patch 8.1.1482
Problem:    No test for <A HREF="builtin.html#wincol()">wincol()</A> depending on the <A HREF="options.html#'number'">'number'</A> option.
Solution:   Add a couple of tests. (Christian Brabandt, closes #4500)
Files:	    src/testdir/test_gui.vim

Patch 8.1.1483
Problem:    Skipped tests are not properly listed.
Solution:   Throw a &quot;Skipped&quot; exception instead of using &quot;<A HREF="repeat.html#:finish">:finish</A>&quot; or &quot;<A HREF="eval.html#:return">:return</A>&quot;.
Files:	    src/testdir/test_breakindent.vim, src/testdir/test_cdo.vim,
            src/testdir/test_channel.vim, src/testdir/test_clientserver.vim,
            src/testdir/test_balloon.vim, src/testdir/test_conceal.vim,
            src/testdir/test_debugger.vim, src/testdir/test_diffmode.vim,
            src/testdir/test_fold.vim, src/testdir/test_highlight.vim,
            src/testdir/test_popup.vim, src/testdir/test_popupwin.vim,
            src/testdir/test_search.vim, src/testdir/test_startup.vim,
            src/testdir/test_startup_utf8.vim, src/testdir/test_syntax.vim,
            src/testdir/test_tabpage.vim, src/testdir/test_termencoding.vim,
            src/testdir/test_terminal.vim, src/testdir/test_textprop.vim,
            src/testdir/test_timers.vim

Patch 8.1.1484
Problem:    Some tests are slow.
Solution:   Add timing to the test <A HREF="message.html#messages">messages</A>.  Fix double free when quitting in
            <A HREF="autocmd.html#VimLeavePre">VimLeavePre</A> autocmd.
Files:	    src/testdir/runtest.vim, src/eval.c

Patch 8.1.1485
Problem:    Double free when garbage_collect() is used in <A HREF="autocmd.html#autocommand">autocommand</A>.
Solution:   Have garbage collection also set the copyID in funccal_stack.
Files:	    src/eval.c, src/userfunc.c

Patch 8.1.1486
Problem:    A listener change is merged even when <A HREF="motion.html#it">it</A> adds a line. (Paul Jolly)
Solution:   Do not <A HREF="diff.html#merge">merge</A> a change that adds or removes a line. (closes #4490)
Files:	    src/change.c, src/testdir/test_listener.vim

Patch 8.1.1487
Problem:    Older msgfmt cannot generate proper .desktop file.
Solution:   Add a configure check to not use this msgfmt version. (Ken Takata)
Files:	    src/configure.ac, src/auto/configure

Patch 8.1.1488
Problem:    Summary of tests has incorrect failed <A HREF="intro.html#count">count</A>.
Solution:   Add to the failed <A HREF="intro.html#count">count</A> instead of setting <A HREF="motion.html#it">it</A>. (Christian Brabandt)
Files:	    src/testdir/summarize.vim

Patch 8.1.1489
Problem:    Sign order wrong when priority was changed.
Solution:   Reorder <A HREF="sign.html#signs">signs</A> when priority is changed. (Yegappan Lakshmanan,
            closes #4502)
Files:	    src/quickfix.c, src/sign.c, src/testdir/test_signs.vim

Patch 8.1.1490
Problem:    When a single test fails the exit code is not set. (Daniel Hahler)
Solution:   Add an exit command. (closes #4506)
Files:	    src/testdir/Makefile

Patch 8.1.1491
Problem:    When skipping over code after an exception was thrown <A HREF="eval.html#expression">expression</A>
            evaluation is aborted after a function call. (Ingo Karkat)
Solution:   Do not fail if not executing the <A HREF="eval.html#expression">expression</A>. (closes #4507)
Files:	    src/eval.c, src/testdir/test_eval_stuff.vim

Patch 8.1.1492
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: when &quot;<A HREF="change.html#!">!</A>&quot; is in <A HREF="options.html#'guioptions'">'guioptions'</A> &quot;<A HREF="os_win32.html#:!start">:!start</A>&quot; fails.
Solution:   Do not use a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> when the shell command begins with
            &quot;!start&quot;. (Yasuhiro Matsumoto, closes #4504)
Files:	    src/misc2.c, src/os_win32.c

Patch 8.1.1493
Problem:    Redrawing with popups is slow and causes flicker.
Solution:   Avoid clearing and redrawing using a zindex mask.
Files:	    src/globals.h, src/screen.c, src/proto/screen.pro, src/popupwin.c,
            src/popupmnu.c

Patch 8.1.1494 (after 8.1.1493)
Problem:    Build failure.
Solution:   Add missing changes.
Files:	    src/structs.h

Patch 8.1.1495 (after 8.1.1494)
Problem:    Memory access error.
Solution:   Use the correct size for clearing the <A HREF="popup.html#popup">popup</A> mask.
Files:	    src/screen.c

Patch 8.1.1496
Problem:    Popup <A HREF="windows.html#window">window</A> height is not recomputed.
Solution:   Recompute the height when needed.
Files:	    src/popupwin.c, src/testdir/dumps/Test_popupwin_06.dump

Patch 8.1.1497
Problem:    Accessing memory beyond allocated space.
Solution:   Check column before accessing <A HREF="popup.html#popup">popup</A> mask.
Files:	    src/screen.c

Patch 8.1.1498
Problem:    &quot;<A HREF="editing.html#:write">:write</A>&quot; increments <A HREF="eval.html#b:changedtick">b:changedtick</A> even though nothing changed.
            (Daniel Hahler)
Solution:   Only increment <A HREF="eval.html#b:changedtick">b:changedtick</A> if the modified flag is reset.
Files:	    src/change.c, src/proto/change.pro, runtime/doc/eval.txt,
            src/buffer.c, src/ex_cmds2.c, src/fileio.c, src/memline.c,
            src/undo.c

Patch 8.1.1499
Problem:    Ruler not updated after <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> was removed.
Solution:   use popup_mask in screen_puts().
Files:	    src/screen.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_07.dump,
            src/testdir/dumps/Test_popupwin_08.dump

Patch 8.1.1500
Problem:    Wrong shell command when building with VIMDLL and &quot;<A HREF="change.html#!">!</A>&quot; in
            <A HREF="options.html#'guioptions'">'guioptions'</A>.
Solution:   Add check for <A HREF="gui.html#GUI">GUI</A> in use. (Ken Takata)
Files:	    src/misc2.c

Patch 8.1.1501
Problem:    New behavior of <A HREF="eval.html#b:changedtick">b:changedtick</A> not tested.
Solution:   Add a few test cases. (Daniel Hahler)
Files:	    src/testdir/test_changedtick.vim

Patch 8.1.1502
Problem:    Cannot play any sound.
Solution:   Use libcanberra if available.  Add sound <A HREF="eval.html#functions">functions</A>.
Files:	    src/configure.ac, src/auto/configure, src/config.h.in,
            src/Makefile, src/sound.c, src/proto/sound.pro, src/proto.h,
            src/evalfunc.c, src/feature.h, runtime/doc/eval.txt, Filelist,
            src/version.c, src/testdir/test_sound.vim, src/testdir/silent.wav,
            src/testdir/Make_all.mak, .travis.yml

Patch 8.1.1503
Problem:    Sound test fails on Travis.
Solution:   Set AUDIODEV to &quot;<A HREF="vim9.html#null">null</A>&quot;.
Files:	    .travis.yml

Patch 8.1.1504
Problem:    Sound test still fails on Travis.
Solution:   Add more lines to the <A HREF="usr_90.html#install">install</A> section.
Files:	    .travis.yml

Patch 8.1.1505
Problem:    Running &quot;make clean&quot; <A HREF="if_cscop.html#twice">twice</A> gives <A HREF="message.html#errors">errors</A>.
Solution:   Add &quot;<A HREF="starting.html#-f">-f</A>&quot; to &quot;rm&quot;. (closes #4516)
Files:	    src/testdir/Makefile

Patch 8.1.1506
Problem:    <A HREF="autocmd.html#Syntax">Syntax</A> error in Travis config.
Solution:   Set AUDIODEV in another section.
Files:	    .travis.yml

Patch 8.1.1507
Problem:    Sound test still fails on Travis.
Solution:   Try another dummy sound approach.
Files:	    .travis.yml

Patch 8.1.1508
Problem:    Sound keeps failing on Travis.
Solution:   Throw a skipped exception in the test.
Files:	    src/testdir/test_sound.vim

Patch 8.1.1509
Problem:    Cmdline_row can become negative, causing a crash.
Solution:   Make sure cmdline_row does not become negative. (closes #4102)
Files:	    src/misc1.c

Patch 8.1.1510
Problem:    A <A HREF="usr_05.html#plugin">plugin</A> cannot easily expand a command like done internally.
Solution:   Add the <A HREF="builtin.html#expandcmd()">expandcmd()</A> function. (Yegappan Lakshmanan, closes #4514)
Files:	    runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/evalfunc.c,
            src/testdir/test_expand.vim

Patch 8.1.1511
Problem:    Matches in a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> are not displayed properly.
Solution:   Do display matches in a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>. (closes #4517)
Files:	    src/screen.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_matches.dump

Patch 8.1.1512
Problem:    <A HREF="channel.html#ch_evalexpr()">ch_evalexpr()</A> hangs when used recursively. (Paul Jolly)
Solution:   Change ch_block_id from a single number to a <A HREF="eval.html#list">list</A> of IDs to wait
            on.
Files:	    src/channel.c, src/structs.h

Patch 8.1.1513
Problem:    All <A HREF="popup.html#popup">popup</A> functionality is in <A HREF="eval.html#functions">functions</A>, except :popupclear.
Solution:   Add <A HREF="popup.html#popup_clear()">popup_clear()</A> for consistency.  Also rename sound_stopall() to
            <A HREF="builtin.html#sound_clear()">sound_clear()</A>.
Files:	    src/ex_cmds.h, src/ex_cmdidxs.h, src/evalfunc.c, src/popupwin.c,
            src/proto/popupwin.pro, src/sound.c, src/proto/sound.pro,
            src/testdir/test_popupwin.vim src/testdir/test_sound.vim,
            runtime/doc/eval.txt runtime/doc/popup.txt

Patch 8.1.1514 (after 8.1.1492)
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: wrong shell command with ! in <A HREF="options.html#'guioptions'">'guioptions'</A>.
Solution:   Do not check for ! in <A HREF="options.html#'guioptions'">'guioptions'</A> when applying <A HREF="options.html#'shellxquote'">'shellxquote'</A>.
            (Yasuhiro Matsumoto, closes #4519)
Files:	    src/misc2.c

Patch 8.1.1515
Problem:    Memory leak reported for sound when build with EXITFREE.
Solution:   Free sound stuff when <A HREF="starting.html#exiting">exiting</A>.
Files:	    src/misc2.c

Patch 8.1.1516
Problem:    Time reported for a test measured wrong.
Solution:   Move the computation to the end of RunTheTest(). (Ozaki Kiichi,
            closes #4520)
Files:	    src/testdir/runtest.vim

Patch 8.1.1517
Problem:    When a <A HREF="popup.html#popup">popup</A> changes all <A HREF="windows.html#windows">windows</A> are redrawn.
Solution:   Only update the lines that were affected.  Add a file for
            <A HREF="repeat.html#profiling">profiling</A> <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#windows">windows</A> efficiency.
Files:	    src/screen.c, src/proto/screen.pro, src/ui.c, src/popupwin.c,
            src/globals.h, src/testdir/popupbounce.vim, Filelist

Patch 8.1.1518
Problem:    Crash when setting <A HREF="options.html#'columns'">'columns'</A> while a <A HREF="popup.html#popup">popup</A> is visible.
Solution:   Recompute all positions when clearing the screen. (closes #4467)
Files:	    src/screen.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_04a.dump

Patch 8.1.1519
Problem:    <A HREF="options.html#'backupskip'">'backupskip'</A> may contain duplicates.
Solution:   Add the P_NODUP flag. (Tom Ryder)
Files:	    src/option.c, src/testdir/test_options.vim

Patch 8.1.1520
Problem:    Popup <A HREF="windows.html#windows">windows</A> are ignored when dealing with mouse position
Solution:   Find the mouse position inside a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.  Allow for modeless
            selection.
Files:	    src/ui.c, src/proto/ui.pro, src/popupwin.c,
            src/proto/popupwin.pro, src/screen.c, src/beval.c, src/edit.c,
            src/evalfunc.c, src/gui.c, src/normal.c, src/structs.h

Patch 8.1.1521
Problem:    When a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> is closed the buffer remains.
Solution:   Wipe out the buffer.
Files:	    src/window.c, src/testdir/test_popupwin.vim

Patch 8.1.1522
Problem:    Popup_notification() not implemented yet.
Solution:   Implement <A HREF="motion.html#it">it</A>.
Files:	    src/popupwin.c, src/proto/popupwin.pro, src/evalfunc.c,
            src/structs.h, src/testdir/test_popupwin.vim,
            runtime/doc/popup.txt
            src/testdir/dumps/Test_popupwin_notify_01.dump,
            src/testdir/dumps/Test_popupwin_notify_02.dump

Patch 8.1.1523
Problem:    Cannot show range of buffer lines in <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Solution:   Add the &quot;firstline&quot; property. (closes #4523)
Files:	    src/popupwin.c, src/structs.h, runtime/doc/popup.txt,
            src/testdir/test_popupwin.vim,
            testdir/dumps/Test_popupwin_firstline.dump

Patch 8.1.1524
Problem:    Tests are silently skipped.
Solution:   Throw an exception for skipped tests in more places.
Files:	    src/testdir/test_assert.vim, src/testdir/test_paste.vim,
            src/testdir/shared.vim, src/testdir/test_crypt.vim,
            src/testdir/test_cscope.vim, src/testdir/test_digraph.vim,
            src/testdir/test_float_func.vim, src/testdir/test_gui.vim,
            src/testdir/test_gui_init.vim, src/testdir/test_history.vim,
            src/testdir/test_langmap.vim, src/testdir/test_listlbr.vim,
            src/testdir/test_listlbr_utf8.vim, src/testdir/test_lua.vim,
            src/testdir/test_makeencoding.vim,
            src/testdir/test_matchadd_conceal.vim,
            src/testdir/test_matchadd_conceal_utf8.vim,
            src/testdir/test_memory_usage.vim, src/testdir/test_menu.vim,
            src/testdir/test_mksession.vim,
            src/testdir/test_mksession_utf8.vim,
            src/testdir/test_netbeans.vim, src/testdir/test_paste.vim,
            src/testdir/test_perl.vim, src/testdir/test_profile.vim,
            src/testdir/test_prompt_buffer.vim, src/testdir/test_python2.vim,
            src/testdir/test_python3.vim, src/testdir/test_pyx2.vim,
            src/testdir/test_pyx3.vim, src/testdir/test_quickfix.vim,
            src/testdir/test_quotestar.vim, src/testdir/test_reltime.vim,
            src/testdir/test_ruby.vim, src/testdir/test_sha256.vim,
            src/testdir/test_shortpathname.vim, src/testdir/test_signals.vim,
            src/testdir/test_signs.vim, src/testdir/test_spell.vim,
            src/testdir/test_syntax.vim, src/testdir/test_tcl.vim,
            src/testdir/test_termcodes.vim, src/testdir/test_terminal.vim,
            src/testdir/test_terminal_fail.vim,
            src/testdir/test_textobjects.vim, src/testdir/test_textprop.vim,
            src/testdir/test_timers.vim, src/testdir/test_vartabs.vim,
            src/testdir/test_winbar.vim, src/testdir/test_windows_home.vim,
            src/testdir/test_xxd.vim

Patch 8.1.1525
Problem:    Cannot move a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> with the mouse.
Solution:   Add the &quot;drag&quot; property and make <A HREF="motion.html#it">it</A> possible to drag a <A HREF="popup.html#popup">popup</A>
            <A HREF="windows.html#window">window</A> by its border.
Files:	    src/popupwin.c, src/proto/popupwin.pro, src/structs.h, src/ui.c,
            src/window.c, src/proto/window.pro, runtime/doc/popup.txt

Patch 8.1.1526
Problem:    No numerical value for the patchlevel.
Solution:   Add <A HREF="eval.html#v:versionlong">v:versionlong</A>.
Files:	    src/version.c, src/eval.c, src/vim.h, runtime/doc/eval.txt,
            src/testdir/test_eval_stuff.vim

Patch 8.1.1527
Problem:    When moving a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> over the command line <A HREF="motion.html#it">it</A> is not
            redrawn.
Solution:   Redraw the command line. Move <A HREF="popup.html#popup">popup</A> redrawing code to the <A HREF="popup.html#popupwin">popupwin</A>
            file.
Files:	    src/screen.c, src/proto/screen.pro, src/popupwin.c,
            src/proto/popupwin.pro, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_drag_01.dump,
            src/testdir/dumps/Test_popupwin_drag_02.dump

Patch 8.1.1528
Problem:    Popup_any_visible() is unused.
Solution:   Remove <A HREF="motion.html#it">it</A>.
Files:	    src/popupwin.c, src/proto/popupwin.pro

Patch 8.1.1529
Problem:    Libcanberra is linked with even when not used.
Solution:   Have configure check for libcanberra only when wanted.
            (suggestions by Libor Bukata)
Files:	    src/feature.h, src/configure.ac, src/auto/configure, src/Makefile

Patch 8.1.1530
Problem:    Travis config is not optimal.
Solution:   Remove system conditions.  Do not use excluding matrix. Cache OSX
            results. (Ozaki Kiichi, closes #4521)
Files:	    .travis.yml

Patch 8.1.1531
Problem:    Clipboard type name is inconsistent.
Solution:   Rename VimClipboard to Clipboard_T.
Files:	    src/gui_gtk_x11.c, src/proto/gui_gtk_x11.pro, src/gui_mac.c,
            src/proto/gui_mac.pro, src/gui_x11.c, src/proto/gui_x11.pro,
            src/ops.c, src/proto/ops.pro, src/os_qnx.c, src/proto/os_qnx.pro,
            src/os_unix.c, src/proto/os_unix.pro, src/ui.c, src/proto/ui.pro,
            src/winclip.c, src/proto/winclip.pro, src/globals.h, src/proto.h

Patch 8.1.1532 (after 8.1.1531)
Problem:    Build fails.
Solution:   Add missing changes.
Files:	    src/vim.h

Patch 8.1.1533
Problem:    <A HREF="gui.html#GUI">GUI</A> build fails on <A HREF="os_mac.html#Mac">Mac</A>.
Solution:   Change VimClipboard type in non-C file.
Files:	    src/os_macosx.m

Patch 8.1.1534
Problem:    Modeless selection in <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> selects too much.
Solution:   Restrict the selection to inside of the <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Files:	    src/vim.h, src/ui.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_select_01.dump,
            src/testdir/dumps/Test_popupwin_select_02.dump

Patch 8.1.1535 (after 8.1.1534)
Problem:    Popup select test fails on <A HREF="os_mac.html#Mac">Mac</A>.
Solution:   Skip test if <A HREF="gui.html#clipboard">clipboard</A> feature not available.
Files:	    src/testdir/test_popupwin.vim

Patch 8.1.1536 (after 8.1.1534)
Problem:    Popup select test still fails on <A HREF="os_mac.html#Mac">Mac</A>.
Solution:   Set <A HREF="options.html#'clipboard'">'clipboard'</A> to &quot;autoselect&quot;
Files:	    src/testdir/test_popupwin.vim

Patch 8.1.1537
Problem:    Using &quot;<A HREF="intro.html#tab">tab</A>&quot; for <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> can be confusing.
Solution:   Use &quot;<A HREF="tabpage.html#tabpage">tabpage</A>&quot;. (Hirohito Higashi, closes #4532)
Files:	    runtime/doc/popup.txt, src/popupwin.c,
            src/testdir/test_popupwin.vim

Patch 8.1.1538
Problem:    Cannot specify highlighting for notifications.
Solution:   Use the PopupNotification group if <A HREF="motion.html#it">it</A> exists. Add a minimal width
            to notifications.
Files:	    runtime/doc/popup.txt, src/popupwin.c,
            src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_notify_01.dump,
            src/testdir/dumps/Test_popupwin_notify_02.dump

Patch 8.1.1539
Problem:    Not <A HREF="starting.html#easy">easy</A> to define a variable and lock <A HREF="motion.html#it">it</A>.
Solution:   Add &quot;<A HREF="eval.html#:const">:const</A>&quot;. (Ryuichi Hayashida, closes #4541)
Files:	    runtime/doc/eval.txt, src/eval.c, src/ex_cmdidxs.h, src/ex_cmds.h,
            src/proto/eval.pro, src/testdir/Make_all.mak,
            src/testdir/test_const.vim

Patch 8.1.1540 (after 8.1.1539)
Problem:    Cannot build without the <A HREF="various.html#+eval">+eval</A> feature.
Solution:   Define ex_const if needed.
Files:	    src/ex_docmd.c

Patch 8.1.1541
Problem:    Check for ASAN is not reliable.
Solution:   Check the version output. (Dominique Pelle, closes #4543)
Files:	    src/testdir/test_memory_usage.vim

Patch 8.1.1542
Problem:    An <A HREF="autocmd.html#OptionSet">OptionSet</A> <A HREF="autocmd.html#autocommand">autocommand</A> does not get enough info.
Solution:   Add <A HREF="eval.html#v:option_command">v:option_command</A>, <A HREF="eval.html#v:option_oldlocal">v:option_oldlocal</A> and <A HREF="eval.html#v:option_oldglobal">v:option_oldglobal</A>.
            (Latrice Wilgus, closes #4118)
Files:	    runtime/doc/autocmd.txt, runtime/doc/eval.txt,
            runtime/doc/version8.txt, src/eval.c, src/option.c, src/structs.h,
            src/testdir/test_autocmd.vim, src/vim.h

Patch 8.1.1543
Problem:    Const test fails with small features.
Solution:   Don't unlet non-existing <A HREF="eval.html#variables">variables</A>.
Files:	    src/testdir/test_const.vim

Patch 8.1.1544
Problem:    Some balloon tests don't run when they can.
Solution:   Split <A HREF="gui.html#GUI">GUI</A> balloon tests off into a separate file. (Ozaki Kiichi,
            closes #4538)  Change the feature check into a command for
            consistency.
Files:	    Filelist, src/testdir/Make_all.mak, src/testdir/check.vim,
            src/testdir/test_arabic.vim, src/testdir/test_balloon.vim,
            src/testdir/test_balloon_gui.vim, src/testdir/test_crypt.vim,
            src/testdir/test_cscope.vim, src/testdir/test_digraph.vim,
            src/testdir/test_float_func.vim, src/testdir/test_gui.vim,
            src/testdir/test_gui_init.vim, src/testdir/test_history.vim,
            src/testdir/test_langmap.vim, src/testdir/test_listlbr.vim,
            src/testdir/test_listlbr_utf8.vim, src/testdir/test_lua.vim,
            src/testdir/test_makeencoding.vim,
            src/testdir/test_matchadd_conceal.vim,
            src/testdir/test_matchadd_conceal_utf8.vim,
            src/testdir/test_memory_usage.vim, src/testdir/test_menu.vim,
            src/testdir/test_mksession.vim,
            src/testdir/test_mksession_utf8.vim,
            src/testdir/test_netbeans.vim, src/testdir/test_paste.vim,
            src/testdir/test_perl.vim, src/testdir/test_popupwin.vim,
            src/testdir/test_profile.vim, src/testdir/test_prompt_buffer.vim,
            src/testdir/test_python2.vim, src/testdir/test_python3.vim,
            src/testdir/test_pyx2.vim, src/testdir/test_pyx3.vim,
            src/testdir/test_quickfix.vim, src/testdir/test_quotestar.vim,
            src/testdir/test_reltime.vim, src/testdir/test_ruby.vim,
            src/testdir/test_sha256.vim, src/testdir/test_shortpathname.vim,
            src/testdir/test_signals.vim, src/testdir/test_signs.vim,
            src/testdir/test_spell.vim, src/testdir/test_syntax.vim,
            src/testdir/test_tcl.vim, src/testdir/test_termcodes.vim,
            src/testdir/test_terminal.vim, src/testdir/test_terminal_fail.vim,
            src/testdir/test_textobjects.vim, src/testdir/test_textprop.vim,
            src/testdir/test_timers.vim, src/testdir/test_vartabs.vim,
            src/testdir/test_winbar.vim, src/testdir/test_windows_home.vim,
            src/testdir/test_xxd.vim

Patch 8.1.1545
Problem:    When the screen is too small there is no message about that.
            (Daniel Hahler)
Solution:   Do not use <A HREF="quickfix.html#:cquit">:cquit</A>. (closes #4534)
Files:	    src/testdir/runtest.vim

Patch 8.1.1546
Problem:    In some tests <A HREF="options.html#'tags'">'tags'</A> is set but not restored. (Daniel Hahler)
Solution:   Restore <A HREF="options.html#'tags'">'tags'</A>. (closes #4535)
Files:	    src/testdir/test_autocmd.vim, src/testdir/test_cmdline.vim,
            src/testdir/test_options.vim, src/testdir/test_tagcase.vim,
            src/testdir/test_tagjump.vim, src/testdir/test_taglist.vim

Patch 8.1.1547
Problem:    Functionality of bt_nofile() is confusing.
Solution:   Split into bt_nofile() and bt_nofilename().
Files:	    src/buffer.c, src/proto/buffer.pro, src/evalfunc.c, src/ex_cmds.c,
            src/ex_docmd.c, src/fileio.c, src/popupmnu.c, src/quickfix.c

Patch 8.1.1548
Problem:    Popup_dialog() is not implemented.
Solution:   Implement <A HREF="popup.html#popup_dialog()">popup_dialog()</A> and <A HREF="popup.html#popup_filter_yesno()">popup_filter_yesno()</A>.
Files:	    src/popupwin.c, src/proto/popupwin.pro, src/evalfunc.c,
            src/structs.h, src/globals.h, src/testdir/test_popupwin.vim,
            runtime/doc/popup.txt

Patch 8.1.1549 (after 8.1.1547)
Problem:    <A HREF="quickfix.html#Quickfix">Quickfix</A> test fails.
Solution:   Negate result of bt_quickfix().
Files:	    src/quickfix.c

Patch 8.1.1550
Problem:    When a <A HREF="popup.html#popup">popup</A> has left padding text may be cut off.
Solution:   Add the border and padding when computing the size.
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_20.dump,
            src/testdir/dumps/Test_popupwin_21.dump

Patch 8.1.1551
Problem:    Warning for shadowing popup_dragwin. (Dominique Pelle)
Solution:   Add missing change.
Files:	    src/ui.c

Patch 8.1.1552
Problem:    Cursor position is wrong after sign column appears or disappears.
            (Yegappan Lakshmanan)
Solution:   Call changed_line_abv_curs() instead of changed_cline_bef_curs().
Files:	    src/sign.c, src/testdir/test_signs.vim,
            src/testdir/dumps/Test_sign_cursor_01.dump,
            src/testdir/dumps/Test_sign_cursor_02.dump

Patch 8.1.1553
Problem:    Not <A HREF="starting.html#easy">easy</A> to change the text in a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Solution:   Add <A HREF="popup.html#popup_settext()">popup_settext()</A>. (Ben Jackson, closes #4549)
            Also display a space for an empty <A HREF="popup.html#popup">popup</A>.
Files:	    runtime/doc/popup.txt, src/evalfunc.c, src/popupwin.c,
            src/proto/popupwin.pro,
            src/testdir/dumps/Test_popup_settext_01.dump,
            src/testdir/dumps/Test_popup_settext_02.dump,
            src/testdir/dumps/Test_popup_settext_03.dump,
            src/testdir/dumps/Test_popup_settext_04.dump,
            src/testdir/dumps/Test_popup_settext_05.dump,
            src/testdir/dumps/Test_popup_settext_06.dump,
            src/testdir/test_popupwin.vim

Patch 8.1.1554 (after 8.1.1539)
Problem:    Docs and tests for <A HREF="eval.html#:const">:const</A> can be improved.
Solution:   Improve documentation, add a few more tests. (Ryuichi Hayashida,
            closes #4551)
Files:	    runtime/doc/eval.txt, src/testdir/test_const.vim

Patch 8.1.1555
Problem:    NOT_IN_POPUP_WINDOW is confusing. (Andy Massimino)
Solution:   Rename to ERROR_IF_POPUP_WINDOW().
Files:	    src/popupwin.c, src/proto/popupwin.pro, src/macros.h,
            src/ex_cmds2.c, src/ex_docmd.c, src/window.c

Patch 8.1.1556
Problem:    The command displayed to show a failing screenshot does not include
            the &quot;testdir&quot; directory.
Solution:   Prefix the directory name so that <A HREF="motion.html#it">it</A> can be copy-pasted.
Files:	    src/testdir/screendump.vim

Patch 8.1.1557
Problem:    Compiler warning for unused <A HREF="eval.html#variables">variables</A> in tiny version. (Tony
            Mechelynck)
Solution:   Add #ifdef.
Files:	    src/option.c

Patch 8.1.1558
Problem:    Popup_menu() and <A HREF="popup.html#popup_filter_menu()">popup_filter_menu()</A> are not implemented yet.
Solution:   Implement the <A HREF="eval.html#functions">functions</A>. Fix that centering didn't take the border
            and padding into account.
Files:	    runtime/doc/popup.txt, src/popupwin.c, src/proto/popupwin.pro,
            src/evalfunc.c, src/screen.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_menu_01.dump,
            src/testdir/dumps/Test_popupwin_menu_02.dump,
            src/testdir/dumps/Test_popupwin_menu_03.dump,
            src/testdir/dumps/Test_popupwin_drag_01.dump,
            src/testdir/dumps/Test_popupwin_drag_02.dump

Patch 8.1.1559
Problem:    Popup <A HREF="windows.html#window">window</A> title property not implemented yet.
Solution:   Implement the title property.
Files:	    runtime/doc/popup.txt, src/popupwin.c, src/structs.h
            src/window.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_menu_01.dump,
            src/testdir/dumps/Test_popupwin_menu_02.dump,
            src/testdir/dumps/Test_popupwin_title.dump

Patch 8.1.1560
Problem:    Popup <A HREF="windows.html#window">window</A> hidden option not implemented yet.
Solution:   Implement the hidden option.
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.1561
Problem:    Popup_setoptions() is not implemented yet.
Solution:   Implement <A HREF="popup.html#popup_setoptions()">popup_setoptions()</A>.  Also add more fields to
            <A HREF="popup.html#popup_getoptions()">popup_getoptions()</A>.
Files:	    runtime/doc/popup.txt, src/popupwin.c, src/proto/popupwin.pro,
            src/dict.c, src/proto/dict.pro, src/evalfunc.c,
            src/testdir/test_popupwin.vim, src/testdir/runtest.vim

Patch 8.1.1562
Problem:    Popup <A HREF="windows.html#window">window</A> not always redrawn after <A HREF="popup.html#popup_setoptions()">popup_setoptions()</A>.
Solution:   Force a redraw.
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_23.dump

Patch 8.1.1563
Problem:    Crash when using closures.
Solution:   Set reference in varlist of funccal when running the garbage
            collector. (Ozaki Kiichi, closes #4554, closes #4547)
Files:	    src/testdir/test_vimscript.vim, src/userfunc.c

Patch 8.1.1564
Problem:    Sign column takes up space.  (Adam Stankiewicz)
Solution:   Optionally put <A HREF="sign.html#signs">signs</A> in the number column. (Yegappan Lakshmanan,
            closes #4555, closes #4515)
Files:	    runtime/doc/options.txt, src/option.c, src/screen.c,
            src/testdir/test_signs.vim

Patch 8.1.1565
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: no sound support.
Solution:   Add sound support for <A HREF="os_win32.html#MS-Windows">MS-Windows</A>. (Yasuhiro Matsumoto, Ken Takata,
            closes #4522)
Files:	    runtime/doc/eval.txt, src/Make_cyg_ming.mak, src/Make_mvc.mak,
            src/sound.c, src/testdir/test_sound.vim

Patch 8.1.1566
Problem:    Error message when <A HREF="terminal.html#terminal">terminal</A> closes while <A HREF="motion.html#it">it</A> is not in the current
            <A HREF="intro.html#tab">tab</A>.
Solution:   Also set &quot;do_set_w_closing&quot; when using the special <A HREF="autocmd.html#autocommand">autocommand</A>
            <A HREF="windows.html#window">window</A>. (closes #4552)
Files:	    src/terminal.c

Patch 8.1.1567
Problem:    Localtime_r() does not respond to $TZ changes.
Solution:   If $TZ changes then call tzset(). (Tom Ryder)
Files:	    src/auto/configure, src/config.h.in, src/configure.ac,
            src/evalfunc.c, src/memline.c, src/proto/memline.pro,
            src/testdir/test_functions.vim, src/undo.c

Patch 8.1.1568 (after 8.1.1567)
Problem:    Strftime() test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Skip the check for using the $TZ environment variable.
Files:	    src/testdir/test_functions.vim

Patch 8.1.1569
Problem:    Cannot build with <A HREF="sign.html#signs">signs</A> but without <A HREF="diff.html#diff">diff</A> feature.
Solution:   Move #ifdef. (Tom Ryder)
Files:	    src/screen.c

Patch 8.1.1570
Problem:    Icon <A HREF="sign.html#signs">signs</A> not displayed properly in the number column.
Solution:   Display them properly. (Yegappan Lakshmanan, closes #4559)
Files:	    src/gui.c, src/screen.c, src/testdir/test_signs.vim

Patch 8.1.1571
Problem:    <A HREF="textprop.html#textprop">textprop</A> highlight starts too early if just after a <A HREF="intro.html#tab">tab</A>.
Solution:   Check if still drawing a previous character. (closes #4558)
Files:	    src/screen.c, src/testdir/test_textprop.vim,
            src/testdir/dumps/Test_textprop_tab.dump

Patch 8.1.1572 (after 8.1.1569)
Problem:    Compiler warnings with tiny build. (Tony Mechelynck)
Solution:   Add #ifdef.
Files:	    src/screen.c

Patch 8.1.1573 (after 8.1.1571)
Problem:    Textprop test fails if screenshots <A HREF="diff.html#do">do</A> not work.
Solution:   Add check for screenshots working.
Files:	    src/testdir/test_textprop.vim

Patch 8.1.1574
Problem:    Tabpage option not yet implemented for <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Solution:   Implement <A HREF="tabpage.html#tabpage">tabpage</A> option, also for <A HREF="popup.html#popup_getoptions()">popup_getoptions()</A>.
Files:	    runtime/doc/popup.txt, src/popupwin.c,
            src/testdir/test_popupwin.vim

Patch 8.1.1575
Problem:    Callbacks may be garbage collected.
Solution:   Set reference in callbacks. (Ozaki Kiichi, closes #4564)
Files:	    src/buffer.c, src/channel.c, src/eval.c, src/ex_cmds2.c,
            src/popupwin.c, src/proto/buffer.pro, src/proto/popupwin.pro,
            src/terminal.c, src/testdir/test_listener.vim,
            src/testdir/test_popupwin.vim, src/testdir/test_prompt_buffer.vim,
            src/userfunc.c

Patch 8.1.1576
Problem:    Compiler warning for unused argument.
Solution:   Add &quot;UNUSED&quot; annotation. (Dominique Pelle, closes #4570)
Files:	    src/ui.c

Patch 8.1.1577
Problem:    Command line redrawn for <A HREF="various.html#+arabic">+arabic</A> without <A HREF="arabic.html#Arabic">Arabic</A> characters.
            (Dominique Pelle)
Solution:   Check if there actually are any <A HREF="arabic.html#Arabic">Arabic</A> characters.  Do redraw
            after displaying incsearch. (closes #4569)
Files:	    src/ex_getln.c

Patch 8.1.1578
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: pathdef.c should depend on build <A HREF="options.html#options">options</A>.
Solution:   Generate pathdef.c in the object directory.  Fix dependencies.
            (Ken Takata, closes #4565)
Files:	    .gitignore, .hgignore, src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.1.1579
Problem:    <A HREF="eval.html#Dict">Dict</A> and <A HREF="eval.html#list">list</A> could be GC'ed while displaying error in a <A HREF="builtin.html#timer">timer</A>.
            (Yasuhiro Matsumoto)
Solution:   Block garbage collection when executing a <A HREF="builtin.html#timer">timer</A>.  Add
            <A HREF="testing.html#test_garbagecollect_soon()">test_garbagecollect_soon()</A>. Add &quot;no_wait_return&quot; to
            <A HREF="testing.html#test_override()">test_override()</A>. (closes #4571)
Files:	    src/dict.c, src/testdir/test_timers.vim, src/evalfunc.c,
            runtime/doc/eval.txt

Patch 8.1.1580
Problem:    Cannot make part of a <A HREF="popup.html#popup">popup</A> transparent.
Solution:   Add the &quot;mask&quot; option.
Files:	    runtime/doc/popup.txt, src/popupwin.c, src/screen.c,
            src/structs.h, src/window.c, src/ui.c, src/vim.h, src/globals.h,
            src/testdir/dumps/Test_popupwin_mask_1.dump,
            src/testdir/dumps/Test_popupwin_mask_2.dump

Patch 8.1.1581
Problem:    Shared <A HREF="eval.html#functions">functions</A> for <A HREF="testing.html#testing">testing</A> are disorganised.
Solution:   Group <A HREF="eval.html#functions">functions</A> in <A HREF="usr_41.html#script">script</A> files. (Ozaki Kiichi, closes #4573)
Files:	    Filelist, src/testdir/screendump.vim, src/testdir/shared.vim,
            src/testdir/term_util.vim, src/testdir/test_mksession.vim,
            src/testdir/test_suspend.vim, src/testdir/test_terminal.vim,
            src/testdir/test_timers.vim, src/testdir/view_util.vim

Patch 8.1.1582
Problem:    Cannot build with <A HREF="various.html#+textprop">+textprop</A> but without <A HREF="various.html#+timers">+timers</A>.
Solution:   Add #ifdef. (Ola Sder, closes #4574)
Files:	    src/popupwin.c

Patch 8.1.1583
Problem:    Set_ref_in_list() only sets <A HREF="intro.html#ref">ref</A> in items.
Solution:   Rename to set_ref_in_list_items() to avoid confusion.
Files:	    src/eval.c, src/proto/eval.pro, src/if_lua.c, src/popupwin.c,
            src/userfunc.c, src/if_py_both.h

Patch 8.1.1584
Problem:    The evalfunc.c file is getting too big.
Solution:   Move <A HREF="channel.html#channel">channel</A> and <A HREF="channel.html#job">job</A> related <A HREF="eval.html#functions">functions</A> to channel.c.
Files:	    src/channel.c, src/evalfunc.c, src/proto/channel.pro

Patch 8.1.1585
Problem:    <A HREF="eval.html#:let-heredoc">:let-heredoc</A> does not trim enough.
Solution:   Trim indent from the contents based on the indent of the first
            line.  Use let-heredoc in more tests.
Files:	    runtime/doc/eval.txt, src/eval.c, src/testdir/test_balloon.vim,
            src/testdir/test_cindent.vim, src/testdir/test_const.vim,
            src/testdir/test_debugger.vim, src/testdir/test_functions.vim,
            src/testdir/test_goto.vim, src/testdir/test_gui.vim,
            src/testdir/test_highlight.vim, src/testdir/test_join.vim,
            src/testdir/test_let.vim, src/testdir/test_memory_usage.vim,
            src/testdir/test_messages.vim,
            src/testdir/test_mksession_utf8.vim, src/testdir/test_normal.vim,
            src/testdir/test_popup.vim, src/testdir/test_popupwin.vim,
            src/testdir/test_profile.vim, src/testdir/test_quickfix.vim,
            src/testdir/test_xxd.vim

Patch 8.1.1586
Problem:    Error number used in two places.
Solution:   Renumber one. (Ken Takata)
Files:	    runtime/doc/popup.txt, src/popupwin.c

Patch 8.1.1587
Problem:    Redraw problem when sign icons in the number column.
Solution:   Clear and redraw when <A HREF="change.html#changing">changing</A> related <A HREF="options.html#options">options</A>.  Right align the
            sign icon in the <A HREF="gui.html#GUI">GUI</A>. (Yegappan Lakshmanan, closes #4578)
Files:	    src/gui.c, src/option.c

Patch 8.1.1588
Problem:    In <A HREF="eval.html#:let-heredoc">:let-heredoc</A> line continuation is recognized.
Solution:   Do not consume line continuation. (Ozaki Kiichi, closes #4580)
Files:	    src/autocmd.c, src/digraph.c, src/eval.c, src/evalfunc.c,
            src/ex_cmds.c, src/ex_cmds.h, src/ex_cmds2.c, src/ex_docmd.c,
            src/ex_getln.c, src/normal.c, src/ops.c, src/proto/autocmd.pro,
            src/proto/ex_cmds2.pro, src/proto/ex_docmd.pro,
            src/proto/ex_getln.pro, src/proto/userfunc.pro,
            src/testdir/test_let.vim, src/testdir/test_startup.vim,
            src/userfunc.c

Patch 8.1.1589
Problem:    Popup <A HREF="windows.html#window">window</A> does not indicate scroll position.
Solution:   Add a scrollbar.
Files:	    runtime/doc/popup.txt, src/popupwin.c, src/structs.h,
            src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_firstline.dump,
            src/testdir/dumps/Test_popupwin_scroll_1.dump,
            src/testdir/dumps/Test_popupwin_scroll_2.dump,
            src/testdir/dumps/Test_popupwin_scroll_3.dump,
            src/testdir/dumps/Test_popupwin_scroll_4.dump

Patch 8.1.1590
Problem:    Popup <A HREF="windows.html#window">window</A> test fails.
Solution:   Add &quot;scrollbar&quot; to expected result.
Files:	    src/testdir/test_popupwin.vim

Patch 8.1.1591
Problem:    On error garbage collection may free memory in use.
Solution:   Reset may_garbage_collect when evaluating <A HREF="eval.html#expression">expression</A> <A HREF="map.html#mapping">mapping</A>.
            Add tests. (Ozaki Kiichi, closes #4579)
Files:	    src/ex_cmds2.c, src/getchar.c, src/testdir/test_mapping.vim,
            src/testdir/test_timers.vim, src/testdir/test_vimscript.vim

Patch 8.1.1592
Problem:    May start file <A HREF="gui_w32.html#dialog">dialog</A> while <A HREF="starting.html#exiting">exiting</A>.
Solution:   Ignore the &quot;browse&quot; modifier when <A HREF="starting.html#exiting">exiting</A>. (Ozaki Kiichi,
            closes #4582)
Files:	    src/ex_cmds.c, src/terminal.c

Patch 8.1.1593
Problem:    Filetype not detected for C++ header files without extension.
Solution:   Recognize the file by the Emacs file mode. (Dmitry Ilyin,
            closes #4593)
Files:	    runtime/scripts.vim, src/testdir/test_filetype.vim

Patch 8.1.1594
Problem:    May still start file <A HREF="gui_w32.html#dialog">dialog</A> while <A HREF="starting.html#exiting">exiting</A>.
Solution:   Ignore the &quot;browse&quot; modifier in another place when <A HREF="starting.html#exiting">exiting</A>.
            (Ozaki Kiichi, closes #4582)
Files:	    src/ex_cmds.c

Patch 8.1.1595
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> with VIMDLL: colors wrong in the <A HREF="gui.html#GUI">GUI</A>.
Solution:   Do not set the <A HREF="terminal.html#terminal">terminal</A> colors when not using the <A HREF="gui.html#GUI">GUI</A>. (Ken
            Takata, closes #4588)
Files:	    src/syntax.c

Patch 8.1.1596
Problem:    When resizing the screen may draw <A HREF="popup.html#popup">popup</A> in wrong position. (Masato
            Nishihata)
Solution:   Check the <A HREF="popup.html#popup">popup</A> is not outside of the screen. (fixes #4592)
Files:	    src/popupwin.c

Patch 8.1.1597
Problem:    Cannot scroll a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> with the mouse.
Solution:   If the <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> has a scrollbar let the mouse scroll wheel
            scroll the <A HREF="windows.html#window">window</A>.
Files:	    runtime/doc/popup.txt, src/normal.c, src/popupwin.c, src/screen.c,
            src/testdir/dumps/Test_popupwin_firstline.dump,
            src/testdir/dumps/Test_popupwin_scroll_1.dump,
            src/testdir/dumps/Test_popupwin_scroll_2.dump,
            src/testdir/dumps/Test_popupwin_scroll_3.dump,
            src/testdir/dumps/Test_popupwin_scroll_5.dump,
            src/testdir/dumps/Test_popupwin_scroll_6.dump,
            src/testdir/dumps/Test_popupwin_scroll_7.dump

Patch 8.1.1598
Problem:    Update to test file missing.
Solution:   Update the <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> test file.
Files:	    src/testdir/test_popupwin.vim

Patch 8.1.1599
Problem:    Compiler warning for uninitialized variable. (Tony Mechelynck)
Solution:   Add a dummy assignment.
Files:	    src/popupwin.c, src/normal.c

Patch 8.1.1600
Problem:    Cannot specify highlighting for <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> scrollbar.
Solution:   Add &quot;scrollbarhighlight&quot; and &quot;thumbhighlight&quot; <A HREF="options.html#options">options</A>.
Files:	    src/popupwin.c, src/structs.h, src/window.c,
            src/testdir/dumps/Test_popupwin_scroll_5.dump,
            src/testdir/dumps/Test_popupwin_scroll_6.dump,
            src/testdir/dumps/Test_popupwin_scroll_7.dump

Patch 8.1.1601
Problem:    Missing changes to <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> test file.
Solution:   Add those changes.
Files:	    src/testdir/test_popupwin.vim

Patch 8.1.1602
Problem:    Popup <A HREF="windows.html#window">window</A> cannot overflow on the left or right.
Solution:   Only set the &quot;fixed&quot; option when <A HREF="motion.html#it">it</A> is in the <A HREF="eval.html#dict">dict</A>. Set w_leftcol
            to allow for the <A HREF="popup.html#popup">popup</A> overflowing on the left and use <A HREF="motion.html#it">it</A> when
            applying the mask.
Files:	    src/popupwin.c

Patch 8.1.1603
Problem:    Crash when using unknown highlighting in text property.
Solution:   Check for zero highlight ID.
Files:	    src/screen.c, src/testdir/test_textprop.vim

Patch 8.1.1604
Problem:    Popup <A HREF="windows.html#window">window</A> scroll test is flaky.
Solution:   Add a delay between scroll events.
Files:	    src/testdir/test_popupwin.vim

Patch 8.1.1605
Problem:    Vim may delay processing <A HREF="message.html#messages">messages</A> on a json <A HREF="channel.html#channel">channel</A>. (Pontus
            Leitzler)
Solution:   Try parsing json when checking if there is readahead.
Files:	    src/channel.c

Patch 8.1.1606
Problem:    On a narrow screen &quot;<A HREF="syntax.html#:hi">:hi</A>&quot; output is confusing.
Solution:   <A HREF="insert.html#Insert">Insert</A> a space between highlight group name and &quot;xxx&quot;. (Masato
            Nishihaga, closes #4599)
Files:	    src/syntax.c, src/testdir/test_highlight.vim

Patch 8.1.1607
Problem:    Popup <A HREF="windows.html#window">window</A> scrollbar does not respond to click.
Solution:   Mouse click in scrollbar scrolls by one line.
Files:	    src/popupwin.c, src/proto/popupwin.pro, src/structs.h, src/ui.c,
            src/normal.c, runtime/doc/popup.txt,
            src/testdir/dumps/Test_popupwin_scroll_8.dump,
            src/testdir/dumps/Test_popupwin_scroll_9.dump

Patch 8.1.1608
Problem:    The evalfunc.c file is too big.
Solution:   Move sign functionality to sign.c.
Files:	    src/evalfunc.c, src/proto/evalfunc.pro, src/sign.c,
            src/proto/sign.pro

Patch 8.1.1609
Problem:    The user cannot easily close a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Solution:   Add the &quot;close&quot; property. (mostly by Masato Nishihata,
            closes #4601)
Files:	    runtime/doc/popup.txt, src/popupwin.c, src/proto/popupwin.pro,
            src/structs.h, src/testdir/dumps/Test_popupwin_close_01.dump,
            src/testdir/dumps/Test_popupwin_close_02.dump,
            src/testdir/dumps/Test_popupwin_close_03.dump,
            src/testdir/test_popupwin.vim, src/ui.c

Patch 8.1.1610
Problem:    There is no way to add or load a buffer without side effects.
Solution:   Add the <A HREF="builtin.html#bufadd()">bufadd()</A> and <A HREF="builtin.html#bufload()">bufload()</A> <A HREF="eval.html#functions">functions</A>.
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_functions.vim

Patch 8.1.1611
Problem:    Bufadd() reuses existing buffer without a name.
Solution:   When the name is empty always create a new buffer.
Files:	    src/evalfunc.c, src/testdir/test_functions.vim

Patch 8.1.1612
Problem:    Cannot show an existing buffer in a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Solution:   Support buffer number argument in <A HREF="popup.html#popup_create()">popup_create()</A>.
Files:	    src/buffer.c, src/proto/buffer.pro, src/evalfunc.c,
            src/popupwin.c, src/vim.h, src/normal.c, src/screen.c, src/ui.c,
            src/window.c, src/testdir/test_popupwin.vim, runtime/doc/popup.txt

Patch 8.1.1613
Problem:    Popup <A HREF="windows.html#window">window</A> test fails with Athena and <A HREF="gui_x11.html#Motif">Motif</A>.
Solution:   Compute the highlight attribute when the <A HREF="gui.html#GUI">GUI</A> is not active.
Files:	    src/syntax.c

Patch 8.1.1614
Problem:    <A HREF="options.html#'numberwidth'">'numberwidth'</A> can only go up to 10.
Solution:   Allow up to 20. (Charlie Stanton, closes #4584)
Files:	    runtime/doc/options.txt, src/option.c, src/screen.c,
            src/testdir/gen_opt_test.vim, src/testdir/test_options.vim

Patch 8.1.1615
Problem:    Crash when passing buffer number to <A HREF="popup.html#popup_create()">popup_create()</A>. (Yasuhiro
            Matsumoto)
Solution:   Initialize the <A HREF="windows.html#window">window</A> properly.
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.1616
Problem:    Build failure with gcc on <A HREF="os_amiga.html#Amiga">Amiga</A>.
Solution:   Add missing header includes. (Ola Sder, closes #4603)
Files:	    src/os_amiga.h

Patch 8.1.1617
Problem:    No test for <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> with mask and position fixed.
Solution:   Add a couple of screenshots.  Fix detected problems.
Files:	    src/popupwin.c, src/structs.h, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_mask_1.dump,
            src/testdir/dumps/Test_popupwin_mask_2.dump,
            src/testdir/dumps/Test_popupwin_mask_3.dump,
            src/testdir/dumps/Test_popupwin_mask_4.dump

Patch 8.1.1618
Problem:    Amiga-like systems quickly run out of stack.
Solution:   Reserve a Megabyte stack. (Ola Sder, closes #4608)
Files:	    src/os_amiga.c

Patch 8.1.1619
Problem:    Tests are not run with <A HREF="gui.html#GUI">GUI</A> on Travis.
Solution:   Add a testgui <A HREF="channel.html#job">job</A>. (Ozaki Kiichi, closes #4609)
Files:	    .travis.yml, src/testdir/test_highlight.vim,
            src/testdir/test_mapping.vim, src/testdir/test_timers.vim

Patch 8.1.1620
Problem:    No test for <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> with border and mask.
Solution:   Add this <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>, fix problems.
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_mask_1.dump,
            src/testdir/dumps/Test_popupwin_mask_2.dump,
            src/testdir/dumps/Test_popupwin_mask_3.dump,
            src/testdir/dumps/Test_popupwin_mask_4.dump

Patch 8.1.1621
Problem:    <A HREF="os_amiga.html#Amiga">Amiga</A>: time.h included <A HREF="if_cscop.html#twice">twice</A>.
Solution:   Remove include from evalfunc.c, move outside of #ifdef in
            os_amiga.h. (Ola Sder, closes #4607)
Files:	    src/evalfunc.c, src/os_amiga.h

Patch 8.1.1622
Problem:    Wrong width if displaying a lot of lines in a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Solution:   Accurately compute the line overflow.
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_firstline.dump

Patch 8.1.1623
Problem:    Display wrong with <A HREF="sign.html#signs">signs</A> in narrow number column.
Solution:   Increase the numbercolumn width if needed. (Yegappan Lakshmanan,
            closes #4606)
Files:	    src/option.c, src/screen.c, src/sign.c, src/testdir/test_signs.vim

Patch 8.1.1624
Problem:    When <A HREF="testing.html#testing">testing</A> in the <A HREF="gui.html#GUI">GUI</A> may try to run <A HREF="starting.html#gvim">gvim</A> in a <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Add the <A HREF="starting.html#-v">-v</A> argument. (Yee Cheng Chin, closes #4605)  Don't skip
            tests that work now.
Files:	    src/testdir/shared.vim, src/testdir/term_util.vim,
            src/testdir/test_mapping.vim, src/testdir/test_timers.vim

Patch 8.1.1625
Problem:    Script line numbers are not exactly right.
Solution:   Handle heredoc and continuation lines better. (Ozaki Kiichi,
            closes #4611, closes #4511)
Files:	    src/ex_cmds2.c, src/proto/ex_cmds2.pro,
            src/testdir/test_vimscript.vim, src/userfunc.c

Patch 8.1.1626
Problem:    No test for closing a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> with a modified buffer.
Solution:   Add a test.  Add &quot;popups&quot; to <A HREF="builtin.html#getbufinfo()">getbufinfo()</A>.
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_popupwin.vim

Patch 8.1.1627
Problem:    Header file contains mixed comment style.
Solution:   Use <A HREF="version7.html#//">//</A> style comments.
Files:	    src/structs.h

Patch 8.1.1628
Problem:    Popup <A HREF="windows.html#window">window</A> <A HREF="eval.html#functions">functions</A> not in <A HREF="eval.html#list">list</A> of <A HREF="eval.html#functions">functions</A>.
Solution:   Add <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> <A HREF="eval.html#functions">functions</A> to the <A HREF="eval.html#list">list</A> of <A HREF="eval.html#functions">functions</A>.  Reorganise
            the <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> help.
Files:	    runtime/doc/eval.txt, runtime/doc/popup.txt,
            runtime/doc/usr_41.txt

Patch 8.1.1629
Problem:    Terminal function help is in the wrong file.
Solution:   Move the function details to <A HREF="terminal.html#terminal.txt">terminal.txt</A>.
Files:	    runtime/doc/eval.txt, runtime/doc/terminal.txt

Patch 8.1.1630
Problem:    Various small problems.
Solution:   Various small improvements.
Files:	    src/gui_beval.c, src/list.c, src/menu.c, src/message.c,
            src/misc2.c, src/testdir/test_terminal.vim, src/os_vms_conf.h,
            src/testdir/Make_vms.mms

Patch 8.1.1631
Problem:    Displaying <A HREF="sign.html#signs">signs</A> is inefficient.
Solution:   Avoid making multiple calls to get information about a placed
            sign. (Yegappan Lakshmanan, closes #4586)
Files:	    src/proto/sign.pro, src/screen.c, src/sign.c, src/structs.h

Patch 8.1.1632
Problem:    Build with EXITFREE but without <A HREF="various.html#+arabic">+arabic</A> fails.
Solution:   Rename the function and adjust #ifdefs. (closes #4613)
Files:	    src/ex_getln.c, src/proto/ex_getln.pro, src/misc2.c

Patch 8.1.1633
Problem:    Cannot generate prototypes with <A HREF="options.html#X11">X11</A> but without <A HREF="gui.html#GUI">GUI</A>.
Solution:   Include X11/Intrinsic.h.
Files:	    src/gui.h

Patch 8.1.1634
Problem:    Terminal test fails when <A HREF="terminal.html#term_getansicolors()">term_getansicolors()</A> is missing.
            Diff test fails without <A HREF="various.html#+rightleft">+rightleft</A>.  (Dominique Pelle)
Solution:   Check if <A HREF="terminal.html#term_getansicolors()">term_getansicolors()</A> is supported. (closes #4597)
Files:	    src/testdir/test_terminal.vim, src/testdir/test_diffmode.vim

Patch 8.1.1635
Problem:    Warnings for unused <A HREF="eval.html#variables">variables</A> in small version. (John Marriott)
Solution:   Adjust #ifdefs.
Files:	    src/screen.c

Patch 8.1.1636
Problem:    Crash when <A HREF="popup.html#popup">popup</A> has fitting scrollbar. (Trygve Aaberge)
Solution:   Don't divide by zero if the scrollbar just fits. (closes #4615)
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.1637
Problem:    After running tests and clean the XfakeHOME directory remains.
Solution:   Use &quot;rm -rf&quot;. (Hirohito Higashi)
Files:	    src/testdir/Makefile, src/testdir/Make_amiga.mak

Patch 8.1.1638
Problem:    Running tests leaves some files behind.
Solution:   Delete the files. (Ozaki Kiichi, closes #4617)
Files:	    src/testdir/test_functions.vim, src/testdir/test_popupwin.vim

Patch 8.1.1639
Problem:    Changing an <A HREF="eval.html#autoload">autoload</A> name into a <A HREF="usr_41.html#script">script</A> file name is inefficient.
Solution:   Remember the last replaced #. (Ozaki Kiichi, closes #4618)
Files:	    src/eval.c

Patch 8.1.1640
Problem:    The <A HREF="autocmd.html#CursorHold">CursorHold</A> <A HREF="autocmd.html#autocommand">autocommand</A> takes down a balloon. (Paul Jolly)
Solution:   Ignore the <A HREF="autocmd.html#CursorHold">CursorHold</A> pseudo-key.
Files:	    src/getchar.c, src/testdir/test_balloon.vim,
            src/testdir/dumps/Test_balloon_eval_term_01.dump,
            src/testdir/dumps/Test_balloon_eval_term_01a.dump

Patch 8.1.1641
Problem:    Garbage collection may run at a wrong moment. (Trygve Aaberge)
Solution:   Postpone garbage collection while parsing <A HREF="message.html#messages">messages</A>. (closes #4620)
Files:	    src/misc2.c

Patch 8.1.1642 (after 8.1.0374)
Problem:    May use uninitialized variable. (Patrick Palka)
Solution:   Initialize <A HREF="eval.html#variables">variables</A> earlier. (closes #4623)
Files:	    src/screen.c, src/testdir/test_number.vim

Patch 8.1.1643
Problem:    Sign placement is wrong when <A HREF="options.html#'foldcolumn'">'foldcolumn'</A> is set.
Solution:   Adjust the column computation. (Yee Cheng Chin, closes #4627)
Files:	    src/gui.c

Patch 8.1.1644
Problem:    Sound test does not work on Travis.
Solution:   Use &quot;sg&quot; command to enable audio. (Ozaki Kiichi, closes #4624)
Files:	    .travis.yml

Patch 8.1.1645
Problem:    Cannot use a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> for a balloon.
Solution:   Add <A HREF="popup.html#popup_beval()">popup_beval()</A>.  Add the &quot;mousemoved&quot; property.  Add the
            <A HREF="builtin.html#screenpos()">screenpos()</A> function.
Files:	    src/popupwin.c, src/proto/popupwin.pro, src/move.c,
            src/proto/move.pro, src/beval.c, src/proto/beval.pro,
            src/evalfunc.c, src/popupmnu.c, src/normal.c,
            src/testdir/test_popupwin.vim, src/testdir/test_cursor_func.vim,
            runtime/doc/popup.txt, runtime/doc/eval.txt,
            runtime/doc/usr_41.txt,
            src/testdir/dumps/Test_popupwin_beval_1.dump,
            src/testdir/dumps/Test_popupwin_beval_2.dump,
            src/testdir/dumps/Test_popupwin_beval_3.dump

Patch 8.1.1646 (after 8.1.1645)
Problem:    build failure
Solution:   Add changes to structure.
Files:	    src/structs.h

Patch 8.1.1647
Problem:    Build error with <A HREF="gui_x11.html#GTK">GTK</A> and hangulinput feature, im_get_status()
            defined <A HREF="if_cscop.html#twice">twice</A>. (Dominique Pelle)
Solution:   Adjust im_get_status(). (closes #4628)
Files:	    src/hangulin.c, src/mbyte.c

Patch 8.1.1648
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: build error with normal features.
Solution:   Adjust #ifdef for find_word_under_cursor().
Files:	    src/beval.c, src/proto/beval.pro

Patch 8.1.1649
Problem:    Illegal memory access when closing <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Solution:   Get w_next before closing the <A HREF="windows.html#window">window</A>.
Files:	    src/popupwin.c

Patch 8.1.1650
Problem:    Warning for using uninitialized variable. (Tony Mechelynck)
Solution:   Simplify the code by always using the mouse coordinates.
Files:	    src/beval.c

Patch 8.1.1651
Problem:    Suspend test is flaky on some systems.
Solution:   Wait for the shell prompt to show. (Yee Cheng Chin, closes #4632)
Files:	    src/testdir/test_suspend.vim

Patch 8.1.1652
Problem:    <A HREF="gui.html#GUI">GUI</A>: <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> doesn't close on mouse <A HREF="intro.html#movement">movement</A>. (Paul Jolly)
Solution:   Generate mouse-move events when a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> is visible.
Files:	    src/gui.c, src/globals.h

Patch 8.1.1653
Problem:    Ubsan warns for possibly passing NULL pointer.
Solution:   Skip code when length is zero. (Dominique Pelle, closes #4631)
Files:	    src/channel.c

Patch 8.1.1654
Problem:    <A HREF="gui.html#GUI">GUI</A>: screen updates from <A HREF="options.html#'balloonexpr'">'balloonexpr'</A> are not displayed.
Solution:   Update the screen if needed.  Also avoid the cursor being
            displayed in the wrong position.
Files:	    src/beval.c

Patch 8.1.1655
Problem:    Popup <A HREF="windows.html#window">window</A> border drawn wrong with <A HREF="mbyte.html#multibyte">multibyte</A> char. (Marcin
            Szamotulski)
Solution:   Correct check in mb_fix_col(). (closes #4635)
Files:	    src/mbyte.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_24.dump

Patch 8.1.1656
Problem:    Popup <A HREF="windows.html#window">window</A> width is wrong when using Tabs. (Paul Jolly)
Solution:   Count tabs correctly. (closes #4637)
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_11.dump

Patch 8.1.1657
Problem:    Terminal: screen updates from <A HREF="options.html#'balloonexpr'">'balloonexpr'</A> are not displayed.
Solution:   Update the screen if needed.  Fix the <A HREF="motion.html#word">word</A> position for
            &quot;mousemoved&quot;.
Files:	    src/beval.c, src/proto/beval.pro, src/popupwin.c, src/normal.c,
            src/proto/normal.pro

Patch 8.1.1658
Problem:    Debug statements included in patch.
Solution:   Remove the debug statements.
Files:	    src/normal.c, src/popupwin.c

Patch 8.1.1659
Problem:    Popup <A HREF="windows.html#window">window</A> &quot;mousemoved&quot; values not correct.
Solution:   Convert text column to mouse column.
Files:	    src/popupwin.c, runtime/doc/popup.txt

Patch 8.1.1660
Problem:    Assert_fails() does not fail inside try/catch.
Solution:   Set trylevel to zero. (Ozaki Kiichi, closes #4639)
Files:	    src/eval.c, src/testdir/test_assert.vim

Patch 8.1.1661
Problem:    Cannot build with <A HREF="various.html#+textprop">+textprop</A> but without <A HREF="various.html#+balloon_eval">+balloon_eval</A>.
Solution:   Adjust #ifdefs. (closes #4645)
Files:	    src/proto.h

Patch 8.1.1662
Problem:    Cannot build uninstal.exe with some version of MinGW.
Solution:   Add -lole32. (Rene Nyffenegger, closes #4646)
Files:	    src/Make_cyg_ming.mak

Patch 8.1.1663
Problem:    Compiler warning for using size_t.
Solution:   Add type cast. (Mike Williams)
Files:	    src/popupwin.c

Patch 8.1.1664
Problem:    <A HREF="gui.html#GUI">GUI</A> resize may cause <A HREF="change.html#changing">changing</A> Rows at a bad time. (Dominique
            Pelle)
Solution:   Postpone resizing while updating the screen.
Files:	    src/term.c

Patch 8.1.1665
Problem:    Crash when <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> with mask is below the screen.
Solution:   Correct boundary check.
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_mask_5.dump

Patch 8.1.1666
Problem:    Click in <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> scrollbar with border doesn't scroll.
Solution:   Correct column for the border. (Naruhiko Nishino, closes #4650)
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_scroll_9.dump

Patch 8.1.1667
Problem:    Flags for <A HREF="intro.html#Ex">Ex</A> commands may clash with other symbols.
Solution:   Prepend with EX_.
Files:	    src/ex_cmds.h, src/evalfunc.c, src/ex_docmd.c, src/ex_getln.c,
            src/usercmd.c, src/syntax.c

Patch 8.1.1668
Problem:    Popup <A HREF="windows.html#window">window</A> test is a bit flaky on some systems.
Solution:   Clear the command line. (Naruhiko Nishino, closes #4656)
Files:	    src/testdir/test_popupwin.vim

Patch 8.1.1669
Problem:    Travis: test results section is closed even when some tests
            failed.
Solution:   Only close the section on success. (Daniel Hahler, closes #4659)
Files:	    .travis.yml

Patch 8.1.1670
Problem:    Sign column not always properly aligned.
Solution:   Use &quot;col&quot; only after <A HREF="motion.html#it">it</A> was calculated. (Yee Cheng Chin,
            closes #4649)
Files:	    src/gui.c

Patch 8.1.1671
Problem:    Copying a <A HREF="eval.html#blob">blob</A> may result in <A HREF="motion.html#it">it</A> being locked.
Solution:   Reset v_lock. (Ken Takata, closes #4648)
Files:	    src/blob.c, src/testdir/test_blob.vim

Patch 8.1.1672 (after  8.1.1667)
Problem:    &quot;make cmdidxs&quot; doesn't work.
Solution:   Update <A HREF="map.html#macro">macro</A> names. (Naruhiko Nishino, closes #4660)
Files:	    src/create_cmdidxs.vim

Patch 8.1.1673
Problem:    Cannot easily find the <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> at a certain position.
Solution:   Add <A HREF="popup.html#popup_locate()">popup_locate()</A>.
Files:	    runtime/doc/popup.txt, src/evalfunc.c, src/popupwin.c,
            src/proto/popupwin.pro, src/testdir/test_popupwin.vim

Patch 8.1.1674
Problem:    Script to check a colorscheme can be improved.
Solution:   Match the whole group name. Don't warn for what is usually omitted.
Files:	    runtime/colors/tools/check_colors.vim

Patch 8.1.1675
Problem:    Listener <A HREF="eval.html#list">list</A> not correctly updated on <A HREF="builtin.html#listener_remove()">listener_remove()</A>.
Solution:   Only set &quot;prev&quot; when not removing a listener.  Return one if the
            listener was found and removed.
Files:	    src/change.c

Patch 8.1.1676
Problem:    &quot;maxwidth&quot; of <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> does not always work properly.
Solution:   Adjust the computation. (Naruhiko Nishino, closes #4653)
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_menu_maxwidth_1.dump

Patch 8.1.1677
Problem:    Tests get stuck when running into an existing swapfile.
Solution:   Set <A HREF="eval.html#v:swapchoice">v:swapchoice</A> to &quot;<A HREF="repeat.html#q">q</A>&quot; and report an error. (Daniel Hahler,
            closes #4644)
Files:	    src/testdir/runtest.vim

Patch 8.1.1678
Problem:    When using <A HREF="popup.html#popup_menu()">popup_menu()</A> does not scroll to show the selected line.
Solution:   Scroll the text. (Naruhiko Nishino, closes #4651)
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_menu_scroll_1.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_2.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_3.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_4.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_5.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_6.dump

Patch 8.1.1679
Problem:    Test using <A HREF="autocmd.html#SwapExists">SwapExists</A> <A HREF="autocmd.html#autocommand">autocommand</A> file may fail.
Solution:   Remove the <A HREF="autocmd.html#SwapExists">SwapExists</A> <A HREF="autocmd.html#autocommand">autocommand</A>.
Files:	    src/testdir/test_window_cmd.vim

Patch 8.1.1680
Problem:    The command table is not well aligned.
Solution:   Adjust indent.
Files:	    src/ex_cmds.h

Patch 8.1.1681
Problem:    <A HREF="insert.html#Insert">Insert</A> stray &quot;<A HREF="motion.html#{">{</A>&quot; when listener gets buffer line. (Paul Jolly)
Solution:   Flush the cached line after invoking listeners. (closes #4455)
Files:	    src/memline.c, src/testdir/test_listener.vim

Patch 8.1.1682
Problem:    Placing a larger number of <A HREF="sign.html#signs">signs</A> is slow.
Solution:   Add <A HREF="eval.html#functions">functions</A> for dealing with a <A HREF="eval.html#list">list</A> of <A HREF="sign.html#signs">signs</A>. (Yegappan
            Lakshmanan, closes #4636)
Files:	    runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/evalfunc.c,
            src/proto/sign.pro, src/sign.c, src/testdir/test_signs.vim

Patch 8.1.1683
Problem:    <A HREF="eval.html#Dictionary">Dictionary</A> with <A HREF="eval.html#string">string</A> keys is longer than needed.
Solution:   Use *{key: val} for literal keys.
Files:	    runtime/doc/eval.txt, src/eval.c, src/dict.c, src/proto/dict.pro,
            src/testdir/test_listdict.vim, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_07.dump,
            src/testdir/dumps/Test_popupwin_mask_2.dump,
            src/testdir/dumps/Test_popupwin_mask_3.dump,
            src/testdir/dumps/Test_popupwin_mask_4.dump,
            src/testdir/dumps/Test_popupwin_mask_5.dump,
            src/testdir/dumps/Test_popupwin_scroll_2.dump,
            src/testdir/dumps/Test_popupwin_scroll_3.dump,
            src/testdir/dumps/Test_popupwin_scroll_4.dump

Patch 8.1.1684
Problem:    Profiling functionality is spread out.
Solution:   Put <A HREF="repeat.html#profiling">profiling</A> functionality in profiler.c. (Yegappan Lakshmanan,
            closes #4666)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_dice.mak,
            src/Make_manx.mak, src/Make_morph.mak, src/Make_mvc.mak,
            src/Make_sas.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/ex_cmds2.c, src/globals.h, src/profiler.c, src/proto.h,
            src/proto/ex_cmds2.pro, src/proto/profiler.pro,
            src/proto/userfunc.pro, src/structs.h, src/userfunc.c

Patch 8.1.1685
Problem:    Missing file in distributed file <A HREF="eval.html#list">list</A>.
Solution:   Add profiler.pro
Files:	    Filelist

Patch 8.1.1686
Problem:    &quot;*&quot; of &quot;*{&quot; is recognized <A HREF="motion.html#as">as</A> multiply <A HREF="motion.html#operator">operator</A>. (Yasuhiro
            Matsumoto)
Solution:   Check for the &quot;<A HREF="motion.html#{">{</A>&quot;.
Files:	    src/eval.c, src/testdir/test_listdict.vim

Patch 8.1.1687
Problem:    The evalfunc.c file is too big.
Solution:   Move <A HREF="testing.html#testing">testing</A> support to a separate file.
Files:	    Filelist, src/evalfunc.c, src/eval.c, src/proto/eval.pro,
            src/testing.c, src/proto/testing.pro, src/Make_cyg_ming.mak,
            src/Make_morph.mak, src/Make_mvc.mak, src/Make_vms.mms,
            src/Makefile, src/README.md, src/proto.h

Patch 8.1.1688
Problem:    Old makefiles are no longer useful.
Solution:   Delete the makefiles, they most likely don't work anyway.
Files:	    Filelist, src/Make_dice.mak, src/Make_manx.mak, src/Make_sas.mak

Patch 8.1.1689
Problem:    Profiling code is spread out.
Solution:   Move more <A HREF="repeat.html#profiling">profiling</A> code to profiler.c. (Yegappan Lakshmanan,
            closes #4668)
Files:	    src/ex_cmds2.c, src/profiler.c, src/proto/ex_cmds2.pro,
            src/proto/profiler.pro, src/proto/userfunc.pro, src/structs.h,
            src/userfunc.c

Patch 8.1.1690
Problem:    Default padding for <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> menu is too much.
Solution:   Only add padding left and right.
Files:	    runtime/doc/popup.txt, src/popupwin.c,
            src/testdir/dumps/Test_popupwin_menu_01.dump,
            src/testdir/dumps/Test_popupwin_menu_02.dump,
            src/testdir/dumps/Test_popupwin_menu_maxwidth_1.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_1.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_2.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_3.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_4.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_5.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_6.dump

Patch 8.1.1691
Problem:    Diff test fails on some systems. (Elimar Riesebieter)
Solution:   Add a <A HREF="terminal.html#term_wait()">term_wait()</A> call.
Files:	    src/testdir/test_diffmode.vim

Patch 8.1.1692
Problem:    Using *{} for literal <A HREF="eval.html#dict">dict</A> is not backwards compatible. (Yasuhiro
            Matsumoto)
Solution:   Use ~{} instead.
Files:	    runtime/doc/eval.txt runtime/doc/popup.txt, src/eval.c,
            src/testdir/test_listdict.vim src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_07.dump,
            src/testdir/dumps/Test_popupwin_mask_2.dump,
            src/testdir/dumps/Test_popupwin_mask_3.dump,
            src/testdir/dumps/Test_popupwin_mask_4.dump,
            src/testdir/dumps/Test_popupwin_mask_5.dump,
            src/testdir/dumps/Test_popupwin_scroll_2.dump,
            src/testdir/dumps/Test_popupwin_scroll_3.dump,
            src/testdir/dumps/Test_popupwin_scroll_4.dump

Patch 8.1.1693
Problem:    <A HREF="autocmd.html#Syntax">Syntax</A> <A HREF="syntax.html#coloring">coloring</A> and highlighting is in one big file.
Solution:   Move the highlighting to a separate file. (Yegappan Lakshmanan,
            closes #4674)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/globals.h, src/highlight.c, src/proto.h,
            src/proto/highlight.pro, src/proto/syntax.pro, src/structs.h,
            src/syntax.c

Patch 8.1.1694
Problem:    The RUN_VIM variable is longer than needed.
Solution:   Shorten RUN_VIM. (Daniel Hahler, closes #4643)
Files:	    src/testdir/Makefile, src/testdir/shared.vim

Patch 8.1.1695
Problem:    Windows 10: crash when cursor is at bottom of <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Position the cursor before resizing. (Yasuhiro Matsumoto,
            closes #4679)
Files:	    src/os_win32.c

Patch 8.1.1696
Problem:    MSVC: link command line is too long.
Solution:   Use the @&lt;&lt; mechanism to pass the arguments via a file. (Christian
            Brabandt)
Files:	    src/Make_mvc.mak

Patch 8.1.1697
Problem:    Cannot build with MSVC.
Solution:   Remove the backslashes after the @&lt;&lt; mechanism.
Files:	    src/Make_mvc.mak

Patch 8.1.1698
Problem:    Appveyor build with MSVC fails.
Solution:   Remove the sed command
Files:	    ci/appveyor.bat

Patch 8.1.1699
Problem:    Highlight_ga can be local instead of global.
Solution:   Move highlight_ga into highlight.c. (Yegappan Lakshmanan,
            closes #4675)
Files:	    src/globals.h, src/highlight.c, src/proto/highlight.pro,
            src/structs.h, src/syntax.c

Patch 8.1.1700
Problem:    Listener callback called for the wrong buffer.
Solution:   Invoke listeners before calling ml_append_int().
Files:	    src/memline.c

Patch 8.1.1701
Problem:    Appveyor build with MSVC fails puts progress <A HREF="motion.html#bar">bar</A> in log.
Solution:   Adjust the sed command. (Ken Takata)
Files:	    ci/appveyor.bat

Patch 8.1.1702
Problem:    Compiler warning for uninitialized variable.
Solution:   Initialize <A HREF="motion.html#it">it</A>. (Christian Brabandt)
Files:	    src/gui.c

Patch 8.1.1703
Problem:    Breaking out of loop by checking <A HREF="windows.html#window">window</A> pointer is insufficient.
Solution:   Check the <A HREF="windows.html#window">window</A> ID and the buffer number. (closes #4683)
Files:	    src/misc2.c

Patch 8.1.1704
Problem:    C-R C-W does not work after C-G when using <A HREF="options.html#'incsearch'">'incsearch'</A>.
Solution:   Put cursor at end of the match. (Yasuhiro Matsumoto, closes #4664)
Files:	    src/ex_getln.c, src/testdir/test_search.vim

Patch 8.1.1705
Problem:    Using ~{} for a literal <A HREF="eval.html#dict">dict</A> is not nice.
Solution:   Use <A HREF="eval.html##{}">#{}</A> instead.
Files:	    runtime/doc/eval.txt runtime/doc/popup.txt, src/eval.c,
            src/testdir/test_listdict.vim src/testdir/test_popupwin.vim

Patch 8.1.1706
Problem:    Typo in #ifdef.
Solution:   Change PROT to PROTO.
Files:	    src/beval.c

Patch 8.1.1707
Problem:    Coverity warns for possibly using a NULL pointer.
Solution:   Change the logic to make sure no NULL pointer is used.
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.1708
Problem:    Coverity warns for using uninitialized variable.
Solution:   Set the start col when col is set.
Files:	    src/beval.c

Patch 8.1.1709
Problem:    Coverity warns for possibly using a NULL pointer.
Solution:   Make sure no NULL pointer is used.
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.1710
Problem:    Coverity found dead code.
Solution:   Remove merging of listener changes.
Files:	    src/change.c

Patch 8.1.1711
Problem:    Listener callback called at the wrong moment
Solution:   Invoke listeners before calling ml_delete_int(). (closes #4657)
Files:	    src/memline.c

Patch 8.1.1712
Problem:    Signs in number column cause text to be misaligned.
Solution:   Improve alignment. (Yasuhiro Matsumoto, closes #4694)
Files:	    src/screen.c, src/testdir/test_signs.vim

Patch 8.1.1713
Problem:    Highlighting cursor line only works with <A HREF="popup.html#popup_menu()">popup_menu()</A>.
Solution:   Add the &quot;cursorline&quot; property. (Naruhiko Nishino, closes #4671)
Files:	    runtime/doc/popup.txt, src/popupwin.c,
            src/testdir/dumps/Test_popupwin_cursorline_1.dump,
            src/testdir/dumps/Test_popupwin_cursorline_2.dump,
            src/testdir/dumps/Test_popupwin_cursorline_3.dump,
            src/testdir/dumps/Test_popupwin_cursorline_4.dump,
            src/testdir/dumps/Test_popupwin_cursorline_5.dump,
            src/testdir/dumps/Test_popupwin_cursorline_6.dump,
            src/testdir/dumps/Test_popupwin_menu_filter_1.dump,
            src/testdir/dumps/Test_popupwin_menu_filter_2.dump,
            src/testdir/dumps/Test_popupwin_menu_filter_3.dump,
            src/testdir/dumps/Test_popupwin_menu_filter_4.dump,
            src/testdir/test_popupwin.vim, src/vim.h

Patch 8.1.1714
Problem:    Cannot preview a file in a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Solution:   Add the <A HREF="options.html#'previewpopup'">'previewpopup'</A> option.
Files:	    runtime/doc/windows.txt, runtime/doc/options.txt, src/popupwin.c,
            src/proto/popupwin.pro, src/option.c, src/option.h, src/ex_cmds.c,
            src/testdir/dumps/Test_popupwin_previewpopup_1.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_2.dump,
            src/ex_docmd.c, src/testdir/gen_opt_test.vim

Patch 8.1.1715
Problem:    Emoji characters are seen <A HREF="motion.html#as">as</A> <A HREF="motion.html#word">word</A> characters for spelling. (Gautam
            Iyer)
Solution:   Exclude class 3 from <A HREF="motion.html#word">word</A> characters.
Files:	    src/spell.c

Patch 8.1.1716
Problem:    Old style comments are wasting space
Solution:   Use new style comments in option header file. (closes #4702)
Files:	    src/option.h

Patch 8.1.1717
Problem:    Last char in menu <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> highlighted.
Solution:   Do not highlight an extra character <A HREF="if_cscop.html#twice">twice</A>.
Files:	    src/screen.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_menu_04.dump

Patch 8.1.1718
Problem:    Popup menu highlighting does not look good.
Solution:   Highlight the whole <A HREF="windows.html#window">window</A> line.  Fix that sign line HL is not
            displayed in a <A HREF="windows.html#window">window</A> with a background color.
Files:	    src/popupwin.c, src/sign.c, src/proto/sign.pro, src/screen.c,
            src/testdir/dumps/Test_popupwin_menu_scroll_1.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_2.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_3.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_4.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_5.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_6.dump,
            src/testdir/dumps/Test_popupwin_menu_01.dump,
            src/testdir/dumps/Test_popupwin_menu_02.dump,
            src/testdir/dumps/Test_popupwin_menu_04.dump

Patch 8.1.1719
Problem:    Popup too wide when <A HREF="options.html#'showbreak'">'showbreak'</A> is set.
Solution:   Set <A HREF="windows.html#window">window</A> width when computing line length. (closes #4701)
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_showbreak.dump

Patch 8.1.1720
Problem:    Crash with very long &#37;[] <A HREF="pattern.html#pattern">pattern</A>. (Reza Mirzazade farkhani)
Solution:   Check for reg_toolong. (closes #4703)
Files:	    src/regexp.c, src/testdir/test_regexp_utf8.vim

Patch 8.1.1721
Problem:    Build failure with normal features without <A HREF="netbeans.html#netbeans">netbeans</A> interface.
Solution:   Enable <A HREF="sign.html#signs">signs</A> when using the text properties feature.
Files:	    src/feature.h

Patch 8.1.1722
Problem:    Error when <A HREF="eval.html#scriptversion">scriptversion</A> is 2 a making a dictionary access.
Solution:   Parse the <A HREF="eval.html#subscript">subscript</A> even when not evaluating the sub-expression.
            (closes #4704)
Files:	    src/eval.c, src/testdir/test_eval_stuff.vim

Patch 8.1.1723
Problem:    Heredoc assignment has no room for new features. (FUJIWARA Takuya)
Solution:   Require the marker does not start with a lower <A HREF="change.html#case">case</A> character.
            (closes #4705)
Files:	    runtime/doc/eval.txt, src/eval.c, src/testdir/test_let.vim

Patch 8.1.1724
Problem:    Too much overhead checking for <A HREF="pattern.html#CTRL-C">CTRL-C</A> while processing text.
Solution:   Increase BREAKCHECK_SKIP.  Remove the difference for when built
            with the <A HREF="gui.html#GUI">GUI</A>. (suggested by Andy Massimino, closes #4708)
Files:	    src/misc1.c, src/screen.c, src/feature.h

Patch 8.1.1725
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="usr_11.html#E325">E325</A> message may use incorrect date format.
Solution:   Convert <A HREF="builtin.html#strftime()">strftime()</A> result to <A HREF="options.html#'encoding'">'encoding'</A>.  Also make the message
            translatable. (Ken Takata, closes #4685, closes #4681)
Files:	    src/memline.c

Patch 8.1.1726
Problem:    The <A HREF="eval.html#eval.txt">eval.txt</A> help file is too big.
Solution:   Split off <A HREF="testing.html#testing">testing</A> support to <A HREF="testing.html#testing.txt">testing.txt</A>.  Move function details
            to where the functionality is explained.
Files:	    runtime/doc/Makefile, runtime/doc/eval.txt,
            runtime/doc/testing.txt, runtime/doc/sign.txt,
            runtime/doc/textprop.txt, runtime/doc/help.txt,
            runtime/doc/channel.txt, runtime/doc/tags

Patch 8.1.1727
Problem:    Code for <A HREF="starting.html#viminfo">viminfo</A> support is spread out.
Solution:   Move to code to viminfo.c. (Yegappan Lakshmanan, closes #4686)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/buffer.c,
            src/eval.c, src/ex_cmds.c, src/ex_docmd.c, src/globals.h,
            src/proto.h, src/proto/buffer.pro, src/proto/eval.pro,
            src/proto/ex_cmds.pro, src/proto/viminfo.pro, src/structs.h,
            src/viminfo.c

Patch 8.1.1728
Problem:    Wrong place for command line <A HREF="cmdline.html#history">history</A> <A HREF="starting.html#viminfo">viminfo</A> support.
Solution:   Move <A HREF="motion.html#it">it</A> to viminfo.c.
Files:	    src/ex_getln.c, src/proto/ex_getln.pro, src/viminfo.c,
            src/structs.h

Patch 8.1.1729
Problem:    Heredoc with trim not properly handled in function.
Solution:   Allow for missing indent. (FUJIWARA Takuya, closes #4713)
Files:	    src/userfunc.c, src/testdir/test_let.vim

Patch 8.1.1730
Problem:    Wrong place for <A HREF="motion.html#mark">mark</A> <A HREF="starting.html#viminfo">viminfo</A> support.
Solution:   Move <A HREF="motion.html#it">it</A> to viminfo.c. (Yegappan Lakshmanan, closes #4716)
Files:	    src/README.md, src/mark.c, src/proto/mark.pro,
            src/proto/viminfo.pro, src/structs.h, src/viminfo.c

Patch 8.1.1731
Problem:    Command line <A HREF="cmdline.html#history">history</A> not read from <A HREF="starting.html#viminfo">viminfo</A> on <A HREF="starting.html#startup">startup</A>.
Solution:   Get <A HREF="cmdline.html#history">history</A> length after initializing <A HREF="motion.html#it">it</A>.
Files:	    src/viminfo.c, src/testdir/test_viminfo.vim

Patch 8.1.1732
Problem:    Completion in <A HREF="cmdline.html#cmdwin">cmdwin</A> does not work for buffer-local commands.
Solution:   Use the right buffer. (closes #4711)
Files:	    src/usercmd.c, src/testdir/test_ins_complete.vim

Patch 8.1.1733
Problem:    The man <A HREF="usr_51.html#ftplugin">ftplugin</A> leaves an empty buffer behind.
Solution:   Don't make new <A HREF="windows.html#window">window</A> and edit, use split. (Jason Franklin)
Files:	    runtime/ftplugin/man.vim, src/testdir/test_man.vim

Patch 8.1.1734
Problem:    The evalfunc.c file is too big.
Solution:   Move some <A HREF="eval.html#functions">functions</A> to other files.
Files:	    src/evalfunc.c, src/proto/evalfunc.pro, src/json.c,
            src/proto/json.pro src/window.c, src/proto/window.pro,
            src/highlight.c, src/proto/highlight.pro, src/globals.h

Patch 8.1.1735 (after 8.1.1734)
Problem:    Can't build with tiny features.
Solution:   Add missing #ifdefs.
Files:	    src/json.c, src/highlight.c

Patch 8.1.1736
Problem:    Viminfo support is spread out.
Solution:   Move more <A HREF="starting.html#viminfo">viminfo</A> code to viminfo.c. (Yegappan Lakshmanan,
            closes #4717)  Reorder code to make most <A HREF="eval.html#functions">functions</A> static.
Files:	    src/fileio.c, src/ops.c, src/option.c, src/proto/ops.pro,
            src/proto/option.pro, src/proto/search.pro, src/proto/viminfo.pro,
            src/search.c, src/structs.h, src/viminfo.c, src/ex_cmds.c,
            src/proto/ex_cmds.pro

Patch 8.1.1737
Problem:    <A HREF="editing.html#:args">:args</A> command that outputs one line gives more prompt.
Solution:   Only output line break if needed. (Daniel Hahler, closes #4715)
Files:	    src/version.c, src/testdir/test_arglist.vim

Patch 8.1.1738
Problem:    Testing <A HREF="eval.html#lambda">lambda</A> with <A HREF="builtin.html#timer">timer</A> is slow.
Solution:   Do not test <A HREF="builtin.html#timer">timer</A> accuracy, only that <A HREF="motion.html#it">it</A> works. (Daniel Hahler,
            closes #4723)
Files:	    src/testdir/test_lambda.vim

Patch 8.1.1739
Problem:    Deleted match highlighting not updated in other <A HREF="windows.html#window">window</A>.
Solution:   <A HREF="motion.html#Mark">Mark</A> the <A HREF="windows.html#window">window</A> for refresh. (closes #4720)  Also fix that
            ambi-width check clears with wrong attributes.
Files:	    src/term.c, src/highlight.c, src/testdir/test_match.vim,
            src/testdir/dumps/Test_matchdelete_1.dump

Patch 8.1.1740
Problem:    Exepath() doesn't work for &quot;bin/cat&quot;.
Solution:   Check for any path separator. (Daniel Hahler, closes #4724,
            closes #4710)
Files:	    src/evalfunc.c, src/os_unix.c, src/testdir/test_functions.vim

Patch 8.1.1741
Problem:    Cleared/added match highlighting not updated in other <A HREF="windows.html#window">window</A>.
            (Andy Massimino)
Solution:   <A HREF="motion.html#Mark">Mark</A> the right <A HREF="windows.html#window">window</A> for refresh.
Files:	    src/highlight.c, src/testdir/test_match.vim,
            src/testdir/dumps/Test_matchclear_1.dump,
            src/testdir/dumps/Test_matchadd_1.dump

Patch 8.1.1742
Problem:    Still some match <A HREF="eval.html#functions">functions</A> in evalfunc.c.
Solution:   Move them to highlight.c.
Files:	    src/evalfunc.c, src/highlight.c, src/proto/highlight.pro,
            src/ex_docmd.c

Patch 8.1.1743
Problem:    <A HREF="options.html#'hlsearch'">'hlsearch'</A> and match highlighting in the wrong place.
Solution:   Move highlighting from inside screen <A HREF="eval.html#functions">functions</A> to highlight.c.
Files:	    src/screen.c, src/highlight.c, src/proto/highlight.pro

Patch 8.1.1744
Problem:    Build error without the <A HREF="syntax.html#conceal">conceal</A> feature.
Solution:   Define <A HREF="eval.html#variables">variables</A> also without the <A HREF="syntax.html#conceal">conceal</A> feature.
Files:	    src/screen.c

Patch 8.1.1745
Problem:    Compiler warning for unused argument.
Solution:   Add UNUSED.  Change comments to new style.
Files:	    src/highlight.c

Patch 8.1.1746
Problem:    &quot;<A HREF="change.html#:dl">:dl</A>&quot; is seen <A HREF="motion.html#as">as</A> &quot;<A HREF="tagsrch.html#:dlist">:dlist</A>&quot; instead of &quot;<A HREF="change.html#:delete">:delete</A>&quot;.
Solution:   Do not use cmdidxs2[] if the length is 1. (closes #4721)
Files:	    src/ex_docmd.c, src/testdir/test_excmd.vim,
            src/testdir/Make_all.mak

Patch 8.1.1747
Problem:    Compiler warning for unused <A HREF="eval.html#variables">variables</A>. (Tony Mechelynck)
Solution:   Add #ifdef.
Files:	    src/screen.c

Patch 8.1.1748 (after 8.1.1737)
Problem:    <A HREF="editing.html#:args">:args</A> output is not aligned.
Solution:   Output a line break after the last item in a row.
Files:	    src/version.c

Patch 8.1.1749
Problem:    Coverity warns for using negative index.
Solution:   Move using index inside &quot;if&quot;.
Files:	    src/viminfo.c

Patch 8.1.1750
Problem:    Depending on the <A HREF="terminal.html#terminal">terminal</A> width <A HREF="various.html#:version">:version</A> may miss a line break.
Solution:   Add a line break when needed.
Files:	    src/version.c

Patch 8.1.1751
Problem:    When redrawing popups plines_win() may be called often.
Solution:   Pass a cache to mouse_comp_pos().
Files:	    src/ui.c, src/proto/ui.pro, src/beval.c, src/evalfunc.c,
            src/popupwin.c

Patch 8.1.1752
Problem:    Resizing hashtable is inefficient.
Solution:   Avoid resizing when the final size is predictable.
Files:	    src/hashtab.c, src/proto/hashtab.pro, src/popupwin.c

Patch 8.1.1753
Problem:    Use of <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> mask is inefficient.
Solution:   Precompute and cache the mask.
Files:	    src/popupwin.c

Patch 8.1.1754 (after 8.1.1753)
Problem:    Build failure.
Solution:   Add missing change to <A HREF="windows.html#window">window</A> struct.
Files:	    src/structs.h

Patch 8.1.1755
Problem:    Leaking memory when using a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> mask.
Solution:   Free the cached mask.
Files:	    src/window.c

Patch 8.1.1756
Problem:    Autocommand that splits <A HREF="windows.html#window">window</A> messes up <A HREF="windows.html#window">window</A> layout.
Solution:   Disallow splitting a <A HREF="windows.html#window">window</A> while closing one.  In &quot;<A HREF="windows.html#:all">:all</A>&quot; give an
            error when moving a <A HREF="windows.html#window">window</A> will not work.
Files:	    src/buffer.c, src/window.c, src/testdir/test_window_cmd.vim

Patch 8.1.1757
Problem:    Text added with <A HREF="builtin.html#appendbufline()">appendbufline()</A> to another buffer isn't displayed.
Solution:   Update topline. (partly by Christian Brabandt, closes #4718)
Files:	    src/evalfunc.c, src/testdir/test_bufline.vim,
            src/testdir/dumps/Test_appendbufline_1.dump

Patch 8.1.1758
Problem:    Count of <A HREF="motion.html#g$">g$</A> not used correctly when text is not wrapped.
Solution:   Do use the <A HREF="intro.html#count">count</A>. (Christian Brabandt, closes #4729, closes #4566)
Files:	    src/normal.c, src/testdir/test_normal.vim

Patch 8.1.1759
Problem:    No mode char for <A HREF="terminal.html#terminal">terminal</A> <A HREF="map.html#mapping">mapping</A> from <A HREF="builtin.html#maparg()">maparg()</A>.
Solution:   Check for TERMINAL mode. (closes #4735)
Files:	    src/getchar.c, src/testdir/test_maparg.vim

Patch 8.1.1760
Problem:    Extra line break for wrapping output of <A HREF="editing.html#:args">:args</A>.
Solution:   Avoid the extra line break. (Daniel Hahler, closes #4737)
Files:	    src/version.c, src/testdir/test_arglist.vim

Patch 8.1.1761
Problem:    Filetype &quot;vuejs&quot; causes problems for some users.
Solution:   Rename to &quot;vue&quot;.
Files:	    runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.1.1762
Problem:    Some <A HREF="filetype.html#filetype">filetype</A> rules are in the wrong place.
Solution:   Move to the right place.  Add a few more tests.
Files:	    runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.1.1763
Problem:    Evalfunc.c is still too big.
Solution:   Move <A HREF="eval.html#dict">dict</A> and <A HREF="eval.html#list">list</A> <A HREF="eval.html#functions">functions</A> to a better place.
Files:	    src/evalfunc.c, src/dict.c, src/proto/dict.pro, src/list.c,
            src/proto/list.pro, src/blob.c, src/proto/blob.pro

Patch 8.1.1764
Problem:    &quot;<A HREF="editing.html#:browse">:browse</A> oldfiles&quot; is not tested.
Solution:   Add a test.
Files:	    src/testdir/test_viminfo.vim

Patch 8.1.1765
Problem:    get(func, <A HREF="eval.html#dict">dict</A>, def) does not work properly.
Solution:   Handle NULL <A HREF="eval.html#dict">dict</A> better. (Takuya Fujiwara, closes #4734)
Files:	    src/evalfunc.c, src/testdir/test_getvar.vim,
            src/testdir/test_partial.vim

Patch 8.1.1766
Problem:    Code for <A HREF="editing.html#writing">writing</A> session file is spread out.
Solution:   Put <A HREF="motion.html#it">it</A> in one file. (Yegappan Lakshmanan, closes #4728)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/eval.c, src/ex_docmd.c, src/misc2.c, src/proto.h,
            src/proto/eval.pro, src/proto/misc2.pro, src/proto/session.pro,
            src/session.c

Patch 8.1.1767
Problem:    FEAT_SESSION defined separately.
Solution:   Make FEAT_SESSION depend on FEAT_EVAL.
Files:	    src/feature.h, src/session.c, src/evalfunc.c, src/ex_docmd.c,
            src/gui_gtk_x11.c, src/proto.h

Patch 8.1.1768
Problem:    Man <A HREF="usr_05.html#plugin">plugin</A> changes setting in current <A HREF="windows.html#window">window</A>.
Solution:   Set <A HREF="options.html#options">options</A> later. (Jason Franklin)
Files:	    runtime/ftplugin/man.vim, src/testdir/test_man.vim

Patch 8.1.1769
Problem:    <A HREF="options.html#'shellslash'">'shellslash'</A> is also used for completion.
Solution:   Add the <A HREF="options.html#'completeslash'">'completeslash'</A> option. (Yasuhiro Matsumoto, closes #3612)
Files:	    runtime/doc/options.txt, src/ex_getln.c, src/insexpand.c,
            src/option.c, src/option.h, src/structs.h,
            src/testdir/test_ins_complete.vim

Patch 8.1.1770
Problem:    Cannot get the <A HREF="windows.html#window">window</A> ID of the <A HREF="popup.html#popup">popup</A> preview <A HREF="windows.html#window">window</A>.
Solution:   Add popup_getpreview().
Files:	    src/evalfunc.c, src/popupwin.c, src/proto/popupwin.pro,
            runtime/doc/eval.txt, runtime/doc/popup.txt,
            src/testdir/dumps/Test_popupwin_previewpopup_3.dump

Patch 8.1.1771
Problem:    Options test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Add correct and incorrect values for <A HREF="options.html#'completeslash'">'completeslash'</A>.
Files:	    src/testdir/gen_opt_test.vim

Patch 8.1.1772
Problem:    Options test still fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Check buffer-local value of <A HREF="options.html#'completeslash'">'completeslash'</A>.
Files:	    src/option.c

Patch 8.1.1773
Problem:    The preview <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> may be too far to the right.
Solution:   Keep <A HREF="motion.html#it">it</A> inside the screen.  Also keep the close button and
            scrollbar visible if possible.
Files:	    src/popupwin.c, src/proto/popupwin.pro, src/ex_cmds.c,
            src/screen.c, src/vim.h, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_previewpopup_1.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_2.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_3.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_4.dump

Patch 8.1.1774
Problem:    Test is silently skipped.
Solution:   Throw &quot;Skipped&quot;.
Files:	    src/testdir/test_ins_complete.vim

Patch 8.1.1775
Problem:    Error message may be empty in <A HREF="filetype.html#filetype">filetype</A> test.
Solution:   Use <A HREF="eval.html#v:exception">v:exception</A> instead. (Daniel Hahler, closes #4744)
Files:	    src/testdir/test_filetype.vim

Patch 8.1.1776
Problem:    Text added with a <A HREF="channel.html#job">job</A> to another buffer isn't displayed.
Solution:   Update topline after adding a line. (closes #4745)
Files:	    src/channel.c, src/testdir/test_channel.vim, src/testdir/check.vim,
            src/testdir/dumps/Test_job_buffer_scroll_1.dump

Patch 8.1.1777
Problem:    Useless checks for <A HREF="channel.html#job">job</A> feature in <A HREF="channel.html#channel">channel</A> test.
Solution:   Remove the checks.  Remove <A HREF="channel.html#ch_log()">ch_log()</A> calls.
Files:	    src/testdir/test_channel.vim

Patch 8.1.1778
Problem:    Not showing the <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> right border is confusing.
Solution:   Also show the border when there is no close button. (closes #4747)
Files:	    src/popupwin.c, src/testdir/dumps/Test_popupwin_20.dump,
            src/testdir/dumps/Test_popupwin_21.dump

Patch 8.1.1779
Problem:    Not showing the <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> right border is confusing.
Solution:   Also show the border when <A HREF="options.html#'wrap'">'wrap'</A> is off. (closes #4747)
Files:	    src/popupwin.c, src/testdir/dumps/Test_popupwin_20.dump,
            src/testdir/dumps/Test_popupwin_21.dump

Patch 8.1.1780
Problem:    Warning for file no longer available is repeated every time Vim is
            focused. (Brian Armstrong)
Solution:   Only give the message once. (closes #4748)
Files:	    src/fileio.c

Patch 8.1.1781
Problem:    <A HREF="os_amiga.html#Amiga">Amiga</A>: no builtin OS readable version info.
Solution:   Add a &quot;version&quot; variable. (Ola Sder, closes #4753)
Files:	    src/os_amiga.c

Patch 8.1.1782
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="builtin.html#system()">system()</A> has temp file error with <A HREF="options.html#'noshelltemp'">'noshelltemp'</A>.
Solution:   Check s_dont_use_vimrun. (Ken Takata, closes #4754)
Files:	    src/os_win32.c

Patch 8.1.1783
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: compiler test may fail when using <A HREF="cmdline.html#&#37;:S">&#37;:S</A>.
Solution:   Reset <A HREF="options.html#'shellslash'">'shellslash'</A>.
Files:	    src/testdir/test_compiler.vim

Patch 8.1.1784
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="builtin.html#resolve()">resolve()</A> does not work if serial nr duplicated.
Solution:   Use another <A HREF="eval.html#method">method</A> to get the full path. (Ken Takata, closes #4661)
Files:	    src/os_mswin.c

Patch 8.1.1785
Problem:    Map functionality mixed with character input.
Solution:   Move the map functionality to a separate file. (Yegappan
            Lakshmanan, closes #4740)  Graduate the <A HREF="various.html#+localmap">+localmap</A> feature.
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/buffer.c, src/feature.h, src/evalfunc.c, src/ex_docmd.c,
            src/getchar.c, src/map.c, src/proto.h, src/proto/getchar.pro,
            src/proto/map.pro, src/version.c, src/structs.h

Patch 8.1.1786
Problem:    Double click in <A HREF="popup.html#popup">popup</A> scrollbar starts selection.
Solution:   Ignore the double click.
Files:	    src/ui.c, src/popupwin.c, src/proto/popupwin.pro

Patch 8.1.1787
Problem:    Cannot resize a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Solution:   Allow for resizing by dragging the lower right corner.
Files:	    runtime/doc/popup.txt, src/popupwin.c, src/structs.h, src/vim.h,
            src/ui.c src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_drag_01.dump,
            src/testdir/dumps/Test_popupwin_drag_02.dump,
            src/testdir/dumps/Test_popupwin_drag_03.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_1.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_2.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_3.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_4.dump

Patch 8.1.1788 (after 8.1.1787)
Problem:    missing changes in proto file
Solution:   Update proto file.
Files:	    src/proto/popupwin.pro

Patch 8.1.1789
Problem:    Cannot see file name of preview <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Solution:   Add the file name <A HREF="motion.html#as">as</A> the title.
Files:	    src/ex_cmds.c, src/popupwin.c, src/proto/popupwin.pro,
            src/fileio.c,
            src/testdir/dumps/Test_popupwin_previewpopup_1.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_2.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_3.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_4.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_5.dump

Patch 8.1.1790
Problem:    <A HREF="starting.html#:mkvimrc">:mkvimrc</A> is not tested.
Solution:   Add a test.
Files:	    src/testdir/test_mksession.vim

Patch 8.1.1791
Problem:    <A HREF="options.html#'completeslash'">'completeslash'</A> also applies to <A HREF="builtin.html#globpath()">globpath()</A>.
Solution:   Add the WILD_IGNORE_COMPLETESLASH flag. (test by Yasuhiro
            Matsumoto, closes #4760)
Files:	    src/testdir/test_ins_complete.vim, src/ex_getln.c, src/evalfunc.c,
            src/vim.h

Patch 8.1.1792
Problem:    The vgetorpeek() function is too long.
Solution:   Split off the part that handles mappings.
Files:	    src/getchar.c

Patch 8.1.1793
Problem:    Mixed comment style in globals.
Solution:   Use <A HREF="version7.html#//">//</A> comments where appropriate.
Files:	    src/globals.h

Patch 8.1.1794 (after 8.1.1792)
Problem:    Tests are flaky.
Solution:   Undo the change to vgetorpeek().
Files:	    src/getchar.c

Patch 8.1.1795
Problem:    No <A HREF="syntax.html#syntax">syntax</A> HL after splitting <A HREF="windows.html#windows">windows</A> with <A HREF="windows.html#:bufdo">:bufdo</A>. (Yasuhiro
            Matsumoto)
Solution:   Trigger <A HREF="autocmd.html#Syntax">Syntax</A> <A HREF="autocmd.html#autocommands">autocommands</A> in <A HREF="windows.html#buffers">buffers</A> that are active.
            (closes #4761)
Files:	    src/vim.h, src/option.c, src/ex_cmds2.c,
            src/testdir/test_syntax.vim

Patch 8.1.1796
Problem:    <A HREF="editing.html#:argdo">:argdo</A> is not tested
Solution:   Add a test.
Files:	    src/testdir/test_arglist.vim

Patch 8.1.1797 (after 8.1.1794)
Problem:    The vgetorpeek() function is too long.
Solution:   Split off the part that handles mappings, with fix.
Files:	    src/getchar.c

Patch 8.1.1798
Problem:    Warning for unused variable in tiny version. (Tony Mechelynck)
Solution:   Move inside #ifdef.  Reformat code.
Files:	    src/getchar.c

Patch 8.1.1799
Problem:    Cannot avoid <A HREF="map.html#mapping">mapping</A> for a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Solution:   Add the &quot;<A HREF="map.html#mapping">mapping</A>&quot; property, default <A HREF="eval.html#TRUE">TRUE</A>.
Files:	    runtime/doc/popup.txt, src/getchar.c, src/popupwin.c, src/vim.h,
            src/proto/popupwin.pro, src/testdir/test_popupwin.vim

Patch 8.1.1800
Problem:    Function call <A HREF="eval.html#functions">functions</A> have too many arguments.
Solution:   Pass values in a funcexe_T struct.
Files:	    src/eval.c, src/structs.h, src/userfunc.c, src/proto/userfunc.pro,
            src/list.c, src/regexp.c, src/terminal.c, src/change.c,
            src/ex_cmds2.c, src/popupwin.c, src/channel.c

Patch 8.1.1801
Problem:    Cannot build without the <A HREF="various.html#+eval">+eval</A> feature.
Solution:   Always define funcexe_T.
Files:	    src/structs.h

Patch 8.1.1802
Problem:    Missing change to call_callback().
Solution:   Add missing change.
Files:	    src/sound.c

Patch 8.1.1803
Problem:    All builtin <A HREF="eval.html#functions">functions</A> are global.
Solution:   Add the <A HREF="eval.html#method">method</A> call <A HREF="motion.html#operator">operator</A> <A HREF="eval.html#-&gt;">-&gt;</A>.  Implemented for a limited number
            of <A HREF="eval.html#functions">functions</A>.
Files:	    runtime/doc/eval.txt, src/eval.c, src/structs.h, src/userfunc.c,
            src/globals.h, src/evalfunc.c, src/proto/evalfunc.pro,
            src/testdir/test_method.vim, src/testdir/Make_all.mak

Patch 8.1.1804
Problem:    No test for display updating without a scroll region.
Solution:   Add a test.
Files:	    src/testdir/test_display.vim, src/testdir/check.vim,
            src/testdir/test_diffmode.vim,
            src/testdir/dumps/Test_scroll_no_region_1.dump,
            src/testdir/dumps/Test_scroll_no_region_2.dump,
            src/testdir/dumps/Test_scroll_no_region_3.dump

Patch 8.1.1805
Problem:    Au_did_filetype is declared <A HREF="if_cscop.html#twice">twice</A>.
Solution:   Remove <A HREF="motion.html#it">it</A> from autocmd.c. (closes #4767)
Files:	    src/globals.h, src/autocmd.c

Patch 8.1.1806
Problem:    Test for display updating doesn't check without statusline.
Solution:   Add screenshots without a status line.
Files:	    src/testdir/test_display.vim,
            src/testdir/dumps/Test_scroll_no_region_4.dump,
            src/testdir/dumps/Test_scroll_no_region_5.dump,
            src/testdir/dumps/Test_scroll_no_region_6.dump

Patch 8.1.1807
Problem:    More <A HREF="eval.html#functions">functions</A> can be used <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Solution:   Add <A HREF="builtin.html#append()">append()</A>, <A HREF="builtin.html#appendbufline()">appendbufline()</A>, <A HREF="testing.html#assert_equal()">assert_equal()</A>, etc.
            Also add the <A HREF="eval.html#:eval">:eval</A> command.
Files:	    runtime/doc/eval.txt, runtime/doc/testing.txt, src/evalfunc.c,
            src/testdir/test_method.vim, src/ex_cmds.h, src/ex_eval.c,
            src/proto/ex_eval.pro, src/ex_cmdidxs.h

Patch 8.1.1808
Problem:    Build failure for tiny version.
Solution:   Define ex_eval to ex_ni.  Clean up the ordering a bit.
Files:	    src/ex_docmd.c

Patch 8.1.1809
Problem:    More <A HREF="eval.html#functions">functions</A> can be used <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Solution:   Add <A HREF="builtin.html#has_key()">has_key()</A>, <A HREF="builtin.html#split()">split()</A>, <A HREF="builtin.html#str2list()">str2list()</A>, etc.
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_method.vim,
            src/testdir/test_diffmode.vim, src/testdir/test_syntax.vim,
            src/testdir/test_system.vim

Patch 8.1.1810
Problem:    Popup_getoptions() is missing an entry for &quot;<A HREF="map.html#mapping">mapping</A>&quot;.
Solution:   Add the entry.
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.1811
Problem:    Popup <A HREF="windows.html#window">window</A> color cannot be set to &quot;<A HREF="intro.html#Normal">Normal</A>&quot;.
Solution:   Check for non-empty <A HREF="options.html#'wincolor'">'wincolor'</A> instead of zero attribute.
            (closes #4772)
Files:	    src/screen.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_20.dump,
            src/testdir/dumps/Test_popupwin_21.dump

Patch 8.1.1812
Problem:    Reading a truncated <A HREF="undo.html#undo">undo</A> file hangs Vim.
Solution:   Check for reading EOF. (closes #4769)
Files:	    src/undo.c, src/testdir/test_undo.vim

Patch 8.1.1813
Problem:    <A HREF="usr_11.html#ATTENTION">ATTENTION</A> prompt for a preview <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Solution:   Close the <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> if aborting the buffer load.  Avoid getting
            the <A HREF="usr_11.html#ATTENTION">ATTENTION</A> <A HREF="gui_w32.html#dialog">dialog</A>.
Files:	    src/tag.c, src/ex_cmds.c, src/memline.c, src/vim.h,
            runtime/doc/windows.txt

Patch 8.1.1814
Problem:    A long title in a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> overflows.
Solution:   Truncate the title. (closes #4770)
Files:	    src/testdir/test_popupwin.vim, src/popupwin.c,
            src/testdir/dumps/Test_popupwin_longtitle_1.dump,
            src/testdir/dumps/Test_popupwin_longtitle_2.dump

Patch 8.1.1815
Problem:    Duplicating info for internal <A HREF="eval.html#functions">functions</A>.
Solution:   Use one table to <A HREF="eval.html#list">list</A> internal <A HREF="eval.html#functions">functions</A>.
Files:	    src/evalfunc.c

Patch 8.1.1816
Problem:    Cannot use a user defined function <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Solution:   Pass the base <A HREF="motion.html#as">as</A> the first argument to the user defined function
            after &quot;<A HREF="eval.html#-&gt;">-&gt;</A>&quot;. (partly by FUJIWARA Takuya)
Files:	    src/eval.c, src/userfunc.c, src/testdir/test_user_func.vim,
            src/testdir/test_autoload.vim,
            src/testdir/sautest/autoload/foo.vim

Patch 8.1.1817
Problem:    Github contribution text is incomplete.
Solution:   Update the text.
Files:	    CONTRIBUTING.md

Patch 8.1.1818
Problem:    Unused variable.
Solution:   Remove the variable. (Mike Williams)
Files:	    src/sound.c

Patch 8.1.1819
Problem:    <A HREF="windows.html#:pedit">:pedit</A> does not work with a <A HREF="popup.html#popup">popup</A> preview <A HREF="windows.html#window">window</A>.
Solution:   Avoid aborting with an error. (fixes #4777)  Also double check
            that after prepare_tagpreview() the current <A HREF="windows.html#window">window</A> is not a
            <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Files:	    src/ex_docmd.c, src/popupmenu.c, src/search.c, src/tag.c,
            src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_previewpopup_6.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_7.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_8.dump

Patch 8.1.1820
Problem:    Using expr-&gt;FuncRef() does not work.
Solution:   Make FuncRef work <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Files:	    src/eval.c, src/userfunc.c, src/testdir/test_method.vim

Patch 8.1.1821
Problem:    No test for wrong number of <A HREF="eval.html#method">method</A> arguments.
Solution:   Add a test.
Files:	    src/testdir/test_method.vim

Patch 8.1.1822
Problem:    Confusing error message when range is not allowed.
Solution:   With ADDR_NONE give e_norange.  Change e_invaddr to e_invrange for
            consistency.
Files:	    src/ex_docmd.c, src/globals.h, src/testdir/test_excmd.vim

Patch 8.1.1823
Problem:    Command line <A HREF="cmdline.html#history">history</A> code is spread out.
Solution:   Put the code in a new file. (Yegappan Lakshmanan, closes #4779)
            Also graduate the <A HREF="various.html#+cmdline_hist">+cmdline_hist</A> feature.
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/cmdhist.c, src/ex_getln.c, src/proto.h, src/proto/cmdhist.pro,
            src/proto/ex_getln.pro, src/version.c, src/evalfunc.c,
            src/ex_cmds.c, src/ex_docmd.c, src/misc2.c, src/normal.c,
            src/ops.c, src/option.c, src/search.c, src/tag.c, src/usercmd.c,
            src/viminfo.c, src/feature.h, src/globals.h

Patch 8.1.1824
Problem:    Crash when correctly spelled <A HREF="motion.html#word">word</A> is very long. (Ben Kraft)
Solution:   Check <A HREF="motion.html#word">word</A> length before <A HREF="uganda.html#copying">copying</A>. (closes #4778)
Files:	    src/spell.c, src/testdir/test_spell.vim

Patch 8.1.1825
Problem:    Allocating more memory than needed for extended structs.
Solution:   Use offsetof() instead of sizeof(). (Dominique Pelle,
            closes #4785)
Files:	    src/dict.c

Patch 8.1.1826
Problem:    Tests use hand coded feature and option checks.
Solution:   Use the commands from check.vim in more tests.
Files:	    src/testdir/check.vim, src/testdir/shared.vim,
            src/testdir/test_autochdir.vim, src/testdir/test_autocmd.vim,
            src/testdir/test_balloon.vim, src/testdir/test_breakindent.vim,
            src/testdir/test_bufline.vim, src/testdir/test_cdo.vim,
            src/testdir/test_channel.vim, src/testdir/test_clientserver.vim,
            src/testdir/test_conceal.vim, src/testdir/test_cscope.vim,
            src/testdir/test_debugger.vim, src/testdir/test_filechanged.vim,
            src/testdir/test_fold.vim, src/testdir/test_functions.vim,
            src/testdir/test_gui.vim, src/testdir/test_gui_init.vim,
            src/testdir/test_highlight.vim, src/testdir/test_mapping.vim,
            src/testdir/test_match.vim, src/testdir/test_memory_usage.vim,
            src/testdir/test_options.vim, src/testdir/test_paste.vim,
            src/testdir/test_popup.vim, src/testdir/test_search.vim,
            src/testdir/test_signals.vim, src/testdir/test_startup.vim,
            src/testdir/test_syntax.vim, src/testdir/test_termcodes.vim,
            src/testdir/test_terminal.vim, src/testdir/test_timers.vim,
            src/testdir/test_vimscript.vim

Patch 8.1.1827
Problem:    Allocating more memory than needed for extended structs.
Solution:   Use offsetof() instead of sizeof(). (Dominique Pelle,
            closes #4786)
Files:	    src/getchar.c, src/regexp.c, src/sign.c, src/structs.h,
            src/syntax.c, src/textprop.c, src/userfunc.c

Patch 8.1.1828
Problem:    Not strict enough checking <A HREF="syntax.html#syntax">syntax</A> of <A HREF="eval.html#method">method</A> invocation.
Solution:   Check there is no white space inside -&gt;method(.
Files:	    runtime/doc/eval.txt, src/eval.c, src/testdir/test_method.vim

Patch 8.1.1829
Problem:    Difference in screenshots.
Solution:   Update screenshots.  Change checks in a few more tests.
            (closes #4789)
Files:	    src/testdir/test_balloon_gui.vim,
            src/testdir/test_shortpathname.vim,
            src/testdir/test_windows_home.vim,
            src/testdir/dumps/Test_popupwin_previewpopup_1.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_2.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_3.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_4.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_5.dump

Patch 8.1.1830
Problem:    Travis does not report error when tests fail.
Solution:   Explicitly <A HREF="diff.html#do">do</A> &quot;exit 1&quot;.
Files:	    .travis.yml

Patch 8.1.1831
Problem:    Confusing skipped message.
Solution:   Drop &quot;run&quot; from &quot;run start the GUI&quot;.
Files:	    src/testdir/check.vim

Patch 8.1.1832
Problem:    Win_execute() does not work in other <A HREF="intro.html#tab">tab</A>. (Rick Howe)
Solution:   Take care of the <A HREF="intro.html#tab">tab</A>. (closes #4792)
Files:	    src/testdir/test_execute_func.vim, src/evalfunc.c, src/window.c,
            src/proto/window.pro

Patch 8.1.1833
Problem:    Allocating a bit too much when <A HREF="builtin.html#spellbadword()">spellbadword()</A> does not find a bad
            <A HREF="motion.html#word">word</A>.
Solution:   Reset &quot;len&quot; when going to the next <A HREF="motion.html#word">word</A>. (Daniel Hahler,
            closes #4788)
Files:	    src/evalfunc.c

Patch 8.1.1834
Problem:    Cannot use a <A HREF="eval.html#lambda">lambda</A> <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Solution:   Implement -&gt;{lambda}(). (closes #4768)
Files:	    runtime/doc/eval.txt, src/eval.c, src/testdir/test_method.vim

Patch 8.1.1835
Problem:    Cannot use <A HREF="builtin.html#printf()">printf()</A> <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Solution:   Pass the base <A HREF="motion.html#as">as</A> the second argument to <A HREF="builtin.html#printf()">printf()</A>.
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_method.vim

Patch 8.1.1836
Problem:    Inaccurate memory estimate for Amiga-like OS.
Solution:   Adjust #ifdef for AvailMem(). (Ola Sder, closes #4797)
Files:	    src/os_amiga.c

Patch 8.1.1837
Problem:    Popup test fails if <A HREF="gui.html#clipboard">clipboard</A> is supported but not working.
Solution:   Add the &quot;clipboard_working&quot; feature. Also use Check commands
            instead of &quot;if&quot; and &quot;throw&quot;.  And remove stray <A HREF="channel.html#ch_logfile()">ch_logfile()</A>.
Files:	    src/testdir/test_popupwin.vim, src/evalfunc.c,
            runtime/doc/eval.txt

Patch 8.1.1838
Problem:    There is <A HREF="spell.html#:spellwrong">:spellwrong</A> and <A HREF="spell.html#:spellgood">:spellgood</A> but not <A HREF="spell.html#:spellrare">:spellrare</A>.
Solution:   Add <A HREF="spell.html#:spellrare">:spellrare</A>. (Martin Tournoij, closes #4291)
Files:	    runtime/doc/spell.txt, src/ex_cmdidxs.h, src/ex_cmds.h,
            src/normal.c, src/proto/spellfile.pro, src/spellfile.c,
            src/spell.h, src/testdir/Make_all.mak,
            src/testdir/test_normal.vim, src/testdir/test_spellfile.vim

Patch 8.1.1839
Problem:    Insufficient info when test fails because of screen size.
Solution:   Report the detected screen size.
Files:	    src/testdir/runtest.vim

Patch 8.1.1840
Problem:    Testing: WorkingClipboard() is not accurate.
Solution:   Check feature clipboard_working instead.
Files:	    src/testdir/shared.vim, src/testdir/test_paste.vim,
            src/testdir/test_quotestar.vim, src/testdir/test_termcodes.vim

Patch 8.1.1841
Problem:    No test for <A HREF="intro.html#Ex">Ex</A> <A HREF="intro.html#shift">shift</A> commands.
Solution:   Add a test. (Dominique Pelle, closes #4801)
Files:	    src/testdir/Make_all.mak, src/testdir/test_alot.vim,
            src/testdir/test_shift.vim

Patch 8.1.1842
Problem:    Test listed <A HREF="motion.html#as">as</A> flaky should no longer be flaky.
Solution:   Remove Test_popup_and_window_resize from the <A HREF="eval.html#list">list</A> of flaky tests.
            (Daniel Hahler, close #4807)
Files:	    src/testdir/runtest.vim

Patch 8.1.1843
Problem:    Might be freeing memory that was not allocated.
Solution:   Have next_fenc() set the fenc_alloced flag. (closes #4804)
Files:	    src/fileio.c

Patch 8.1.1844
Problem:    Buffer no longer unloaded when adding text properties to <A HREF="motion.html#it">it</A>.
Solution:   Do not create the memfile. (closes #4808)
Files:	    runtime/doc/textprop.txt, src/testdir/test_textprop.vim,
            src/textprop.c

Patch 8.1.1845
Problem:    May use NULL pointer when running out of memory.
Solution:   Do not clear <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#buffers">buffers</A> when NULL. (closes #4802)
Files:	    src/screen.c

Patch 8.1.1846
Problem:    Inconsistently using GetVimCommand() and <A HREF="eval.html#v:progpath">v:progpath</A>. (Daniel
            Hahler)
Solution:   Use GetVimCommand(). (closes #4806)
Files:	    src/testdir/test_autocmd.vim, src/testdir/test_gui.vim,
            src/testdir/test_normal.vim, src/testdir/test_profile.vim,
            src/testdir/test_suspend.vim, src/testdir/test_system.vim,
            src/testdir/test_vimscript.vim

Patch 8.1.1847
Problem:    Suspend test is failing.
Solution:   Do not use GetVimCommandClean().
Files:	    src/testdir/test_suspend.vim

Patch 8.1.1848
Problem:    <A HREF="options.html#'langmap'">'langmap'</A> is not used for <A HREF="index.html#CTRL-W">CTRL-W</A> command in <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Push the command in the typeahead buffer instead of the stuff
            buffer. (closes #4814)
Files:	    src/terminal.c, src/testdir/test_terminal.vim

Patch 8.1.1849
problem:    Some insert complete <A HREF="eval.html#functions">functions</A> in the wrong file.
Solution:   Move complete <A HREF="eval.html#functions">functions</A> to insexpand.c. (Yegappan Lakshmanan,
            closes #4815)
Files:	    src/evalfunc.c, src/insexpand.c, src/proto/insexpand.pro

Patch 8.1.1850
Problem:    Focus may remain in <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Solution:   Change focus if needed.
Files:	    src/popupmnu.c

Patch 8.1.1851
Problem:    Crash when <A HREF="builtin.html#sound_playfile()">sound_playfile()</A> callback plays sound.
Solution:   Invoke callback later from event loop.
Files:	    src/testdir/test_sound.vim, src/ui.c, src/sound.c,
            src/proto/sound.pro, src/feature.h, src/os_unix.c, src/ex_docmd.c,
            src/misc2.c

Patch 8.1.1852
Problem:    Timers test is flaky.
Solution:   Accept a larger <A HREF="intro.html#count">count</A>.  Add test to <A HREF="eval.html#list">list</A> of flaky tests.
Files:	    src/testdir/test_timers.vim, src/testdir/runtest.vim

Patch 8.1.1853
Problem:    Timers test is still flaky.
Solution:   Compute the time to sleep more accurately.
Files:	    src/ex_docmd.c

Patch 8.1.1854
Problem:    Now another <A HREF="builtin.html#timer">timer</A> test is flaky.
Solution:   Add test to <A HREF="eval.html#list">list</A> of flaky tests.
Files:	    src/testdir/runtest.vim

Patch 8.1.1855
Problem:    Another failing <A HREF="builtin.html#timer">timer</A> test.
Solution:   Assert that <A HREF="builtin.html#timers">timers</A> are finished by the end of the test.  Rename
            test <A HREF="eval.html#functions">functions</A> to make them easier to find.
Files:	    src/testdir/test_timers.vim, src/testdir/runtest.vim

Patch 8.1.1856
Problem:    <A HREF="popup.html#popup">popup</A> preview test fails sometimes. (Christian Brabandt)
Solution:   Clear the command line.
Files:	    src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_previewpopup_6.dump

Patch 8.1.1857
Problem:    Cannot use modifier with <A HREF="mbyte.html#multibyte">multibyte</A> character.
Solution:   Allow using a <A HREF="mbyte.html#multibyte">multibyte</A> character, although <A HREF="motion.html#it">it</A> doesn't work
            everywhere.
Files:	    src/misc2.c, src/testdir/test_mapping.vim

Patch 8.1.1858
Problem:    Test for <A HREF="mbyte.html#multibyte">multibyte</A> <A HREF="map.html#mapping">mapping</A> fails on some systems.
Solution:   Test in another way.
Files:	    src/testdir/test_mapping.vim

Patch 8.1.1859
Problem:    Timer test sometimes fails on <A HREF="os_mac.html#Mac">Mac</A>.
Solution:   Show more info when <A HREF="motion.html#it">it</A> fails.
Files:	    src/testdir/test_timers.vim

Patch 8.1.1860
Problem:    Map timeout test is flaky.
Solution:   Add test to <A HREF="eval.html#list">list</A> of flaky tests.  Increase timeout.
Files:	    src/testdir/runtest.vim, src/testdir/test_mapping.vim

Patch 8.1.1861
Problem:    Only some assert <A HREF="eval.html#functions">functions</A> can be used <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Solution:   Allow using most assert <A HREF="eval.html#functions">functions</A> <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Files:	    runtime/doc/testing.txt, src/evalfunc.c,
            src/testdir/test_assert.vim

Patch 8.1.1862
Problem:    Coverity warns for not using return value.
Solution:   Add &quot;(void)&quot; to avoid the warning.
Files:	    src/normal.c

Patch 8.1.1863
Problem:    Confusing error when using a builtin function <A HREF="motion.html#as">as</A> <A HREF="eval.html#method">method</A> while <A HREF="motion.html#it">it</A>
            does not support that.
Solution:   Add a specific error message.
Files:	    src/vim.h, src/evalfunc.c, src/userfunc.c,
            src/testdir/test_method.vim

Patch 8.1.1864
Problem:    Still a <A HREF="builtin.html#timer">timer</A> test that is flaky on <A HREF="os_mac.html#Mac">Mac</A>.
Solution:   Adjust the sleep times.
Files:	    src/testdir/test_timers.vim

Patch 8.1.1865
Problem:    Spellrare and spellrepall in the wrong order.
Solution:   Put spellrare below spellrepall. (closes #4820)
Files:	    runtime/doc/spell.txt, src/ex_cmds.h

Patch 8.1.1866
Problem:    Modeless selection in <A HREF="gui.html#GUI">GUI</A> does not work properly.
Solution:   Avoid going beyond the end of the line. (closes #4783)
Files:	    src/ui.c

Patch 8.1.1867
Problem:    Still a <A HREF="builtin.html#timer">timer</A> test that is flaky on <A HREF="os_mac.html#Mac">Mac</A>.
Solution:   Loop with a sleep instead of one fixed sleep.
Files:	    src/testdir/test_timers.vim

Patch 8.1.1868
Problem:    Multibyte characters in <A HREF="options.html#'listchars'">'listchars'</A> don't work correctly if
            <A HREF="options.html#'linebreak'">'linebreak'</A> is also enabled. (Martin Tournoij)
Solution:   Make <A HREF="motion.html#it">it</A> work correctly. (Christian Brabandt, closes #4822,
            closes #4812)
Files:	    src/screen.c, src/testdir/test_listchars.vim

Patch 8.1.1869
Problem:    Code for the argument <A HREF="eval.html#list">list</A> is spread out.
Solution:   Put argument <A HREF="eval.html#list">list</A> code in arglist.c. (Yegappan Lakshmanan,
            closes #4819)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/arglist.c, src/buffer.c, src/evalfunc.c, src/ex_cmds2.c,
            src/ex_docmd.c, src/proto.h, src/proto/arglist.pro,
            src/proto/buffer.pro, src/proto/ex_cmds2.pro,
            src/proto/ex_docmd.pro

Patch 8.1.1870
Problem:    Using <A HREF="windows.html#:pedit">:pedit</A> from a help file sets the preview <A HREF="windows.html#window">window</A> to help
            <A HREF="filetype.html#filetype">filetype</A>. (Wang Shidong)
Solution:   Do not set &quot;keep_help_flag&quot;. (closes #3536)
Files:	    src/ex_docmd.c, src/testdir/test_window_cmd.vim

Patch 8.1.1871 (after 8.1.1866)
Problem:    Modeless selection in <A HREF="gui.html#GUI">GUI</A> still not correct.
Solution:   Fix max_col.
Files:	    src/ui.c

Patch 8.1.1872
Problem:    When Vim exits because of a signal, <A HREF="autocmd.html#VimLeave">VimLeave</A> is not triggered.
            (Daniel Hahler)
Solution:   Unblock <A HREF="autocmd.html#autocommands">autocommands</A> when triggering <A HREF="autocmd.html#VimLeave">VimLeave</A>. (closes #4818)
Files:	    src/main.c

Patch 8.1.1873 (after 8.1.1872)
Problem:    Cannot build tiny version.
Solution:   Remove #ifdef for is_autocmd_blocked().
Files:	    src/autocmd.c

Patch 8.1.1874
Problem:    Modeless selection in <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> overlaps scrollbar.
Solution:   Subtract scrollbar from max_col. (closes #4773)
Files:	    src/ui.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_select_01.dump

Patch 8.1.1875
Problem:    Cannot get size and position of the <A HREF="popup.html#popup">popup</A> menu.
Solution:   Add <A HREF="builtin.html#pum_getpos()">pum_getpos()</A>. (Ben Jackson, closes #4827)
Files:	    runtime/doc/autocmd.txt, runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_popup.vim

Patch 8.1.1876
Problem:    proto file missing from <A HREF="intro.html#distribution">distribution</A>
Solution:   Add the file.
Files:	    Filelist

Patch 8.1.1877
Problem:    Graduated features scattered.
Solution:   Put graduated and obsolete features together.
Files:	    src/feature.h

Patch 8.1.1878
Problem:    Negative float before <A HREF="eval.html#method">method</A> not parsed correctly.
Solution:   Apply &quot;<A HREF="change.html#!">!</A>&quot; and &quot;<A HREF="motion.html#-">-</A>&quot; in front of <A HREF="eval.html#expression">expression</A> before using <A HREF="eval.html#-&gt;">-&gt;</A>.
Files:	    src/eval.c, src/proto/eval.pro, src/userfunc.c,
            src/testdir/test_method.vim

Patch 8.1.1879
Problem:    More <A HREF="eval.html#functions">functions</A> can be used <A HREF="motion.html#as">as</A> methods.
Solution:   Make float <A HREF="eval.html#functions">functions</A> usable <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_float_func.vim

Patch 8.1.1880
Problem:    Cannot show extra info for completion in a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Solution:   Add the &quot;<A HREF="popup.html#popup">popup</A>&quot; entry in <A HREF="options.html#'completeopt'">'completeopt'</A>.
Files:	    runtime/doc/options.txt, src/popupmnu.c, src/ex_cmds.c,
            src/proto/ex_cmds.pro, src/ex_docmd.c, src/search.c, src/tag.c,
            src/popupwin.c, src/proto/popupwin.pro, src/option.c, src/vim.h,
            src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_infopopup_1.dump,
            src/testdir/dumps/Test_popupwin_infopopup_2.dump,
            src/testdir/dumps/Test_popupwin_infopopup_3.dump,
            src/testdir/dumps/Test_popupwin_infopopup_4.dump

Patch 8.1.1881
Problem:    Popup <A HREF="windows.html#window">window</A> test fails in some configurations.
Solution:   Check that screendumps can be made.
Files:	    src/testdir/test_popupwin.vim

Patch 8.1.1882
Problem:    Cannot specify properties of the info <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Solution:   Add the <A HREF="options.html#'completepopup'">'completepopup'</A> option.  Default to PmenuSel highlight.
Files:	    runtime/doc/options.txt, runtime/doc/insert.txt, src/option.c,
            src/popupwin.c, src/proto/popupwin.pro, src/option.h,
            src/testdir/test_popupwin.vim, src/screen.c,
            src/testdir/dumps/Test_popupwin_infopopup_1.dump,
            src/testdir/dumps/Test_popupwin_infopopup_2.dump,
            src/testdir/dumps/Test_popupwin_infopopup_3.dump

Patch 8.1.1883
Problem:    Options test fails.
Solution:   Add entry for <A HREF="options.html#'completepopup'">'completepopup'</A>.
Files:	    src/testdir/gen_opt_test.vim

Patch 8.1.1884
Problem:    Cannot use mouse scroll wheel in <A HREF="popup.html#popup">popup</A> in <A HREF="insert.html#Insert">Insert</A> mode.  Mouse
            clicks in <A HREF="popup.html#popup">popup</A> close the <A HREF="popup.html#popup">popup</A> menu.
Solution:   Check if the mouse is in a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>. Do not let mouse events
            close the <A HREF="popup.html#popup">popup</A> menu.  (closes #4544)
Files:	    src/edit.c, src/popupmnu.c, src/insexpand.c

Patch 8.1.1885
Problem:    Comments in libvterm are inconsistent.
Solution:   Use <A HREF="version7.html#//">//</A> comments.  Also update the table of combining characters.
Files:	    src/libvterm/bin/unterm.c, src/libvterm/bin/vterm-ctrl.c,
            src/libvterm/bin/vterm-dump.c, src/libvterm/include/vterm.h,
            src/libvterm/include/vterm_keycodes.h,
            src/libvterm/src/encoding.c, src/libvterm/src/keyboard.c,
            src/libvterm/src/mouse.c, src/libvterm/src/parser.c,
            src/libvterm/src/pen.c, src/libvterm/src/rect.h,
            src/libvterm/src/state.c, src/libvterm/src/unicode.c,
            src/libvterm/src/utf8.h, src/libvterm/src/vterm.c,
            src/libvterm/src/vterm_internal.h, src/libvterm/src/termscreen.c

Patch 8.1.1886
Problem:    Command line expansion code is spread out.
Solution:   Move the code to cmdexpand.c. (Yegappan Lakshmanan, closes #4831)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/cmdexpand.c, src/evalfunc.c, src/ex_getln.c, src/proto.h,
            src/proto/cmdexpand.pro, src/proto/ex_getln.pro, src/structs.h

Patch 8.1.1887
Problem:    The <A HREF="various.html#+cmdline_compl">+cmdline_compl</A> feature is not in the tiny version.
Solution:   Graduate the <A HREF="various.html#+cmdline_compl">+cmdline_compl</A> feature.
Files:	    src/cmdexpand.c, src/arglist.c, src/autocmd.c, src/buffer.c,
            src/cmdhist.c, src/eval.c, src/evalfunc.c, src/ex_cmds2.c,
            src/ex_docmd.c, src/ex_getln.c, src/feature.h, src/highlight.c,
            src/if_cscope.c, src/map.c, src/menu.c, src/misc1.c, src/misc2.c,
            src/option.c, src/sign.c, src/syntax.c, src/tag.c, src/term.c,
            src/usercmd.c, src/userfunc.c, src/version.c, src/globals.h,
            src/option.h, src/structs.h, runtime/doc/cmdline.txt

Patch 8.1.1888
Problem:    More <A HREF="eval.html#functions">functions</A> can be used <A HREF="motion.html#as">as</A> methods.
Solution:   Make various <A HREF="eval.html#functions">functions</A> usable <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_vimscript.vim, src/testdir/test_balloon_gui.vim,
            src/testdir/test_popup.vim, src/testdir/test_functions.vim,
            src/testdir/test_hide.vim, src/testdir/test_arglist.vim

Patch 8.1.1889
Problem:    Coverity warns for using a NULL pointer.
Solution:   Use zero for column if pos is NULL.
Files:	    src/netbeans.c

Patch 8.1.1890
Problem:    Ml_get error when <A HREF="change.html#deleting">deleting</A> fold marker.
Solution:   Check that the line number is not below the last line.  Adjust the
            fold when <A HREF="change.html#deleting">deleting</A> the empty line.  (Christian Brabandt,
            closes #4834)
Files:	    src/fold.c, src/normal.c, src/testdir/test_fold.vim

Patch 8.1.1891
Problem:    Functions used in one file are global.
Solution:   Add &quot;static&quot;. (Yegappan Lakshmanan, closes #4840)
Files:	    src/autocmd.c, src/buffer.c, src/change.c, src/channel.c,
            src/charset.c, src/dict.c, src/digraph.c, src/eval.c,
            src/ex_cmds.c, src/ex_eval.c, src/fileio.c, src/findfile.c,
            src/getchar.c, src/gui.c, src/indent.c, src/json.c, src/list.c,
            src/mark.c, src/menu.c, src/message.c, src/misc1.c, src/misc2.c,
            src/ops.c, src/option.c, src/popupwin.c, src/profiler.c,
            src/proto/autocmd.pro, src/proto/buffer.pro, src/proto/change.pro,
            src/proto/channel.pro, src/proto/charset.pro, src/proto/dict.pro,
            src/proto/eval.pro, src/proto/ex_cmds.pro, src/proto/ex_eval.pro,
            src/proto/fileio.pro, src/proto/findfile.pro,
            src/proto/getchar.pro, src/proto/gui.pro, src/proto/indent.pro,
            src/proto/json.pro, src/proto/list.pro, src/proto/mark.pro,
            src/proto/menu.pro, src/proto/message.pro, src/proto/misc1.pro,
            src/proto/misc2.pro, src/proto/ops.pro, src/proto/option.pro,
            src/proto/popupwin.pro, src/proto/profiler.pro,
            src/proto/quickfix.pro, src/proto/spell.pro, src/proto/term.pro,
            src/proto/textprop.pro, src/proto/ui.pro, src/proto/undo.pro,
            src/proto/window.pro, src/quickfix.c, src/regexp.c, src/spell.c,
            src/term.c, src/textprop.c, src/ui.c, src/undo.c, src/window.c

Patch 8.1.1892
Problem:    Missing index entry and option menu for <A HREF="options.html#'completepopup'">'completepopup'</A>.
Solution:   Add the entries.  Adjust #ifdefs to avoid dead code.
Files:	    runtime/doc/quickref.txt, runtime/optwin.vim, src/option.c,
            src/option.h, src/popupwin.c

Patch 8.1.1893
Problem:    Script to summarize test results can be improved.
Solution:   Use &quot;silent&quot; for substitute to avoid reporting number of matches.
            Remove duplicate &quot;set nocp&quot;. (Daniel Hahler, closes #4845)
Files:	    src/testdir/summarize.vim

Patch 8.1.1894
Problem:    Not checking for out-of-memory of autoload_name().
Solution:   Check for NULL. (Dominique Pelle, closes #4846)
Files:	    src/eval.c

Patch 8.1.1895
Problem:    Using NULL pointer when out of memory.
Solution:   Bail out or skip the code using the pointer. (Zu-Ming Jiang,
            closes #4805, closes #4843, closes #4939, closes #4844)
Files:	    src/message.c, src/highlight.c, src/buffer.c, src/ops.c

Patch 8.1.1896
Problem:    Compiler warning for unused variable.
Solution:   Add #ifdef. (John Marriott)  Missing part of 8.1.1892.
Files:	    src/popupmnu.c

Patch 8.1.1897
Problem:    May free memory <A HREF="if_cscop.html#twice">twice</A> when out of memory.
Solution:   Check that backslash_halve_save() returns a different pointer.
            (Dominique Pelle, closes #4847)
Files:	    src/cmdexpand.c, src/misc1.c

Patch 8.1.1898
Problem:    Crash when out of memory during <A HREF="starting.html#startup">startup</A>.
Solution:   When out of memory message given during initialisation bail out.
            (closes #4842)
Files:	    src/misc2.c

Patch 8.1.1899
Problem:    <A HREF="sign.html#sign_place()">sign_place()</A> does not work <A HREF="motion.html#as">as</A> documented.
Solution:   Make <A HREF="motion.html#it">it</A> accept line numbers like <A HREF="builtin.html#line()">line()</A>. (Yegappan Lakshmanan,
            closes #4848)
Files:	    src/sign.c, src/testdir/test_signs.vim

Patch 8.1.1900
Problem:    Sign test fails in the <A HREF="gui.html#GUI">GUI</A>.
Solution:   Catch and ignore the exception.
Files:	    src/testdir/test_signs.vim

Patch 8.1.1901
Problem:    The <A HREF="various.html#+insert_expand">+insert_expand</A> feature is not always available.
Solution:   Graduate the <A HREF="various.html#+insert_expand">+insert_expand</A> feature.
Files:	    src/feature.h, src/autocmd.c, src/buffer.c, src/change.c,
            src/charset.c, src/edit.c, src/evalfunc.c, src/ex_cmds.c,
            src/ex_getln.c, src/getchar.c, src/gui.c, src/highlight.c,
            src/indent.c, src/insexpand.c, src/misc2.c, src/move.c,
            src/option.c, src/popupmnu.c, src/screen.c, src/search.c,
            src/spell.c, src/tag.c, src/term.c, src/userfunc.c, src/version.c,
            src/globals.h, src/option.h, src/proto.h, src/structs.h,
            src/vim.h, runtime/doc/change.txt, runtime/doc/index.txt,
            runtime/doc/insert.txt, runtime/doc/options.txt

Patch 8.1.1902
Problem:    Cannot have an info <A HREF="popup.html#popup">popup</A> without a border.
Solution:   Add the &quot;border&quot; item to <A HREF="options.html#'completepopup'">'completepopup'</A>.
Files:	    src/popupwin.c, src/proto/popupwin.pro, src/popupmnu.c,
            src/testdir/test_popupwin.vim, src/testdir/gen_opt_test.vim,
            src/testdir/dumps/Test_popupwin_infopopup_nb_1.dump

Patch 8.1.1903
Problem:    Cannot build without the <A HREF="various.html#+eval">+eval</A> feature.
Solution:   Add missing #ifdefs
Files:	    src/insexpand.c, src/popupmnu.c

Patch 8.1.1904
Problem:    Cannot have an info <A HREF="popup.html#popup">popup</A> align with the <A HREF="popup.html#popup">popup</A> menu.
Solution:   Add the &quot;align&quot; item to <A HREF="options.html#'completepopup'">'completepopup'</A>.
Files:	    src/popupwin.c, src/popupmnu.c, src/vim.h,
            runtime/doc/insert.txt, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_infopopup_align_1.dump,
            src/testdir/dumps/Test_popupwin_infopopup_align_2.dump,
            src/testdir/dumps/Test_popupwin_infopopup_align_3.dump

Patch 8.1.1905
Problem:    Cannot set all properties of the info <A HREF="popup.html#popup">popup</A>.
Solution:   Add <A HREF="popup.html#popup_findinfo()">popup_findinfo()</A>.  Rename popup_getpreview() to
            <A HREF="popup.html#popup_findpreview()">popup_findpreview()</A>.
Files:	    src/popupwin.c, src/proto/popupwin.pro, src/ex_cmds.c,
            src/ex_docmd.c, src/popupmnu.c, src/evalfunc.c,
            runtime/doc/popup.txt, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_infopopup_align_3.dump

Patch 8.1.1906
Problem:    Info <A HREF="popup.html#popup">popup</A> size is sometimes incorrect.
Solution:   Compute the position and size after setting the content.
Files:	    src/popupmnu.c

Patch 8.1.1907
Problem:    Wrong position for info <A HREF="popup.html#popup">popup</A> with scrollbar on the left.
Solution:   Take the scrollbar into account.
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_infopopup_5.dump,
            src/testdir/dumps/Test_popupwin_cursorline_3.dump,
            src/testdir/dumps/Test_popupwin_cursorline_4.dump,
            src/testdir/dumps/Test_popupwin_cursorline_5.dump,
            src/testdir/dumps/Test_popupwin_cursorline_6.dump,
            src/testdir/dumps/Test_popupwin_menu_filter_1.dump,
            src/testdir/dumps/Test_popupwin_menu_filter_2.dump,
            src/testdir/dumps/Test_popupwin_menu_filter_3.dump,
            src/testdir/dumps/Test_popupwin_menu_filter_4.dump

Patch 8.1.1908
Problem:    Every <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> consumes a buffer number.
Solution:   Recycle <A HREF="windows.html#buffers">buffers</A> only used for <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#windows">windows</A>.  Do not <A HREF="eval.html#list">list</A> <A HREF="popup.html#popup">popup</A>
            <A HREF="windows.html#window">window</A> <A HREF="windows.html#buffers">buffers</A>.
Files:	    src/popupwin.c, src/window.c, src/vim.h, src/buffer.c,
            src/proto/buffer.pro, src/ex_docmd.c,
            src/testdir/test_popupwin.vim

Patch 8.1.1909
Problem:    More <A HREF="eval.html#functions">functions</A> can be used <A HREF="motion.html#as">as</A> methods.
Solution:   Make a few more <A HREF="eval.html#functions">functions</A> usable <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Files:	    runtime/doc/eval.txt, runtime/doc/testing.txt, src/evalfunc.c,
            src/testdir/test_popupwin.vim, src/testdir/test_bufwintabinfo.vim,
            src/testdir/test_bufline.vim, src/testdir/test_assert.vim

Patch 8.1.1910
Problem:    Redrawing too much when toggling <A HREF="options.html#'relativenumber'">'relativenumber'</A>.
Solution:   Only clear when <A HREF="options.html#'signcolumn'">'signcolumn'</A> is set to &quot;number&quot;. (Yegappan
            Lakshmanan, closes #4852)
Files:	    src/option.c

Patch 8.1.1911
Problem:    More <A HREF="eval.html#functions">functions</A> can be used <A HREF="motion.html#as">as</A> methods.
Solution:   Make a few more <A HREF="eval.html#functions">functions</A> usable <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test69.in,
            src/testdir/test69.ok, src/testdir/test_functions.vim

Patch 8.1.1912
Problem:    More <A HREF="eval.html#functions">functions</A> can be used <A HREF="motion.html#as">as</A> methods.
Solution:   Make <A HREF="channel.html#channel">channel</A> and <A HREF="channel.html#job">job</A> <A HREF="eval.html#functions">functions</A> usable <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Files:	    runtime/doc/channel.txt, src/evalfunc.c,
            src/testdir/test_channel.vim

Patch 8.1.1913
Problem:    Not <A HREF="starting.html#easy">easy</A> to compute the space on the command line.
Solution:   Add <A HREF="eval.html#v:echospace">v:echospace</A>. (Daniel Hahler, closes #4732)
Files:	    src/vim.h, src/eval.c, src/option.c, runtime/doc/eval.txt,
            src/testdir/test_messages.vim

Patch 8.1.1914
Problem:    Command line expansion code is spread out.
Solution:   Move set_one_cmd_context(). (Yegappan Lakshmanan, closes #4855)
Files:	    src/cmdexpand.c, src/ex_docmd.c, src/proto/ex_docmd.pro

Patch 8.1.1915
Problem:    More <A HREF="eval.html#functions">functions</A> can be used <A HREF="motion.html#as">as</A> methods.
Solution:   Make various <A HREF="eval.html#functions">functions</A> usable <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_functions.vim, src/testdir/test_cd.vim,
            src/testdir/test_cindent.vim, src/testdir/test_match.vim,
            src/testdir/test_popup.vim, src/testdir/test_cursor_func.vim,
            src/testdir/test_method.vim, src/testdir/test_bufline.vim,
            src/testdir/test_diffmode.vim

Patch 8.1.1916
Problem:    Trying to allocate negative amount of memory when closing a <A HREF="popup.html#popup">popup</A>.
Solution:   Check the rows are not out of bounds.  Don't finish a selection if
            <A HREF="motion.html#it">it</A> was never started.
Files:	    src/ui.c

Patch 8.1.1917
Problem:    Non-current <A HREF="windows.html#window">window</A> is not redrawn when moving <A HREF="popup.html#popup">popup</A>. (Ben Jackson)
Solution:   Redraw all <A HREF="windows.html#windows">windows</A> under a <A HREF="popup.html#popup">popup</A>. (closes #4860)
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_drag_01.dump,
            src/testdir/dumps/Test_popupwin_drag_02.dump,
            src/testdir/dumps/Test_popupwin_drag_03.dump

Patch 8.1.1918
Problem:    Redrawing popups is inefficient.
Solution:   Fix the logic to compute what <A HREF="windows.html#window">window</A> lines to redraw.  Make <A HREF="motion.html#it">it</A>
            work below the last line.  Remove redrawing all <A HREF="windows.html#windows">windows</A>.
Files:	    src/popupwin.c

Patch 8.1.1919
Problem:    Using current <A HREF="windows.html#window">window</A> option values when passing a buffer to
            <A HREF="popup.html#popup_create()">popup_create()</A>.
Solution:   Clear the window-local <A HREF="options.html#options">options</A>. (closes #4857)
Files:	    src/option.c, src/proto/option.pro, src/popupwin.c,
            src/testdir/test_popupwin.vim

Patch 8.1.1920
Problem:    Cannot close a <A HREF="popup.html#popup">popup</A> by the X when a <A HREF="change.html#filter">filter</A> consumes all events.
Solution:   Check for a click on the close button before invoking filters.
            (closes #4858)
Files:	    src/popupwin.c, src/proto/popupwin.pro, src/ui.c,
            src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_close_04.dump,
            src/testdir/dumps/Test_popupwin_close_05.dump

Patch 8.1.1921
Problem:    More <A HREF="eval.html#functions">functions</A> can be used <A HREF="motion.html#as">as</A> methods.
Solution:   Make various <A HREF="eval.html#functions">functions</A> usable <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_expand.vim,
            src/testdir/test_expand_func.vim, src/testdir/test_expr.vim,
            src/testdir/test_findfile.vim, src/testdir/test_fnameescape.vim,
            src/testdir/test_fnamemodify.vim, src/testdir/test_fold.vim,
            src/testdir/test_functions.vim, src/testdir/test_search.vim,
            src/testdir/test_vimscript.vim

Patch 8.1.1922
Problem:    In <A HREF="diff.html#diff">diff</A> mode global operations can be very slow.
Solution:   Do not call diff_redraw() many times, call <A HREF="motion.html#it">it</A> once when redrawing.
            And also don't update <A HREF="fold.html#folds">folds</A> multiple times.
Files:	    src/globals.h, src/diff.c, src/proto/diff.pro, src/screen.c,
            src/fold.c

Patch 8.1.1923
Problem:    Some source files are not in a normal encoding.
Solution:   Convert hangulin.c from euc-kr to <A HREF="mbyte.html#utf-8">utf-8</A> and digraph.c from latin1
            to <A HREF="mbyte.html#utf-8">utf-8</A>. (Daniel Hahler, closes #4731)
Files:	    src/hangulin.c, src/digraph.c, .travis.yml

Patch 8.1.1924
Problem:    Using empty <A HREF="eval.html#string">string</A> for current buffer is unexpected.
Solution:   Make the argument optional for <A HREF="builtin.html#bufname()">bufname()</A> and <A HREF="builtin.html#bufnr()">bufnr()</A>.
Files:	    src/evalfunc.c, src/testdir/test_arglist.vim, runtime/doc/eval.txt

Patch 8.1.1925
Problem:    More <A HREF="eval.html#functions">functions</A> can be used <A HREF="motion.html#as">as</A> methods.
Solution:   Make various <A HREF="eval.html#functions">functions</A> usable <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_bufline.vim, src/testdir/test_bufwintabinfo.vim,
            src/testdir/test_cd.vim, src/testdir/test_changelist.vim,
            src/testdir/test_cmdline.vim, src/testdir/test_edit.vim,
            src/testdir/test_environ.vim, src/testdir/test_file_perm.vim,
            src/testdir/test_getvar.vim, src/testdir/test_jumplist.vim,
            src/testdir/test_put.vim, src/testdir/test_stat.vim

Patch 8.1.1926
Problem:    Cursorline not redrawn when putting a line above the cursor.
Solution:   Redraw when the cursor line is below a change. (closes #4862)
Files:	    src/change.c

Patch 8.1.1927
Problem:    Code for dealing with <A HREF="usr_41.html#script">script</A> files is spread out.
Solution:   Move the code to scriptfile.c. (Yegappan Lakshmanan, closes #4861)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/cmdexpand.c, src/ex_cmds2.c, src/proto.h,
            src/proto/ex_cmds2.pro, src/proto/scriptfile.pro, src/scriptfile.c

Patch 8.1.1928
Problem:    Popup <A HREF="windows.html#windows">windows</A> don't move with the text when making changes.
Solution:   Add the '<A HREF="textprop.html#textprop">textprop</A>' property to the <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> <A HREF="options.html#options">options</A>, position
            the <A HREF="popup.html#popup">popup</A> relative to a text property. (closes #4560)
            No tests yet.
Files:	    runtime/doc/popup.txt, src/textprop.c, src/proto/textprop.pro,
            src/structs.h, src/popupwin.c, src/proto/popupwin.pro, src/move.c,
            src/proto/move.pro, src/window.c

Patch 8.1.1929
Problem:    No tests for text property <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Solution:   Add a few tests.
Files:	    src/testdir/Make_all.mak, src/textprop.c,
            src/testdir/test_popupwin_textprop.vim,
            src/testdir/dumps/Test_popup_textprop_01.dump,
            src/testdir/dumps/Test_popup_textprop_02.dump,
            src/testdir/dumps/Test_popup_textprop_03.dump,
            src/testdir/dumps/Test_popup_textprop_04.dump,
            src/testdir/dumps/Test_popup_textprop_05.dump,
            src/testdir/dumps/Test_popup_textprop_06.dump

Patch 8.1.1930
Problem:    Cannot recognize .jsx and .tsx files.
Solution:   Recognize them <A HREF="motion.html#as">as</A> javascriptreact and typescriptreact.
            (closes #4830)
Files:	    runtime/filetype.vim, src/testdir/test_filetype.vim,
            runtime/syntax/javascriptreact.vim,
            runtime/indent/javascriptreact.vim,
            runtime/ftplugin/javascriptreact.vim

Patch 8.1.1931 (after 8.1.1930)
Problem:    <A HREF="autocmd.html#Syntax">Syntax</A> test fails.
Solution:   Add new javascriptreact type to completions.
Files:	    src/testdir/test_syntax.vim

Patch 8.1.1932
Problem:    Ml_get <A HREF="message.html#errors">errors</A> after using <A HREF="builtin.html#append()">append()</A>. (Alex Genco)
Solution:   Do not update the cursor <A HREF="if_cscop.html#twice">twice</A>. (closes #1737)
Files:	    src/evalfunc.c, src/testdir/test_functions.vim

Patch 8.1.1933
Problem:    The eval.c file is too big.
Solution:   Move code related to <A HREF="eval.html#variables">variables</A> to evalvars.c. (Yegappan
            Lakshmanan, closes #4868)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/eval.c, src/evalfunc.c, src/evalvars.c, src/globals.h,
            src/proto.h, src/proto/eval.pro, src/proto/evalvars.pro, src/vim.h

Patch 8.1.1934
Problem:    Not enough tests for text property <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Solution:   Add a few more tests.
Files:	    src/popupwin.c, src/testdir/test_popupwin_textprop.vim,
            src/testdir/dumps/Test_popup_textprop_corn_1.dump,
            src/testdir/dumps/Test_popup_textprop_corn_2.dump,
            src/testdir/dumps/Test_popup_textprop_corn_3.dump,
            src/testdir/dumps/Test_popup_textprop_corn_4.dump

Patch 8.1.1935 (after 8.1.1934)
Problem:    Test for text property <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> is flaky.
Solution:   Remove the <A HREF="undo.html#undo">undo</A> message
Files:	    src/testdir/test_popupwin_textprop.vim,
            src/testdir/dumps/Test_popup_textprop_corn_4.dump

Patch 8.1.1936
Problem:    Not enough tests for text property <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Solution:   Add a few more tests.  Make negative offset work.  Close all
            popups when <A HREF="windows.html#window">window</A> closes.
Files:	    src/popupwin.c, src/testdir/test_popupwin_textprop.vim,
            src/testdir/dumps/Test_popup_textprop_07.dump,
            src/testdir/dumps/Test_popup_textprop_off_1.dump,
            src/testdir/dumps/Test_popup_textprop_off_2.dump,
            src/testdir/dumps/Test_popup_textprop_corn_5.dump,
            src/testdir/dumps/Test_popup_textprop_corn_6.dump

Patch 8.1.1937 (after 8.1.1930)
Problem:    Errors when using javascriptreact.
Solution:   Use &quot;<A HREF="repeat.html#:runtime">:runtime</A>&quot; instead of &quot;<A HREF="repeat.html#:source">:source</A>&quot;. (closes #4875)
Files:	    runtime/syntax/javascriptreact.vim,
            runtime/indent/javascriptreact.vim,
            runtime/ftplugin/javascriptreact.vim

Patch 8.1.1938
Problem:    May crash when out of memory.
Solution:   Initialize v_type to VAR_UNKNOWN. (Dominique Pelle, closes #4871)
Files:	    src/userfunc.c

Patch 8.1.1939
Problem:    Code for handling <A HREF="eval.html#v:">v:</A> <A HREF="eval.html#variables">variables</A> in generic <A HREF="eval.html#eval">eval</A> file.
Solution:   Move <A HREF="eval.html#v:">v:</A> <A HREF="eval.html#variables">variables</A> to evalvars.c. (Yegappan Lakshmanan,
            closes #4872)
Files:	    src/eval.c, src/evalvars.c, src/proto/eval.pro,
            src/proto/evalvars.pro

Patch 8.1.1940 (after 8.1.1939)
Problem:    Script tests fail.
Solution:   Don't set vimvars type in set_vim_var_nr().
Files:	    src/eval.c, src/evalvars.c, src/proto/evalvars.pro

Patch 8.1.1941
Problem:    <A HREF="builtin.html#getftype()">getftype()</A> test fails on <A HREF="os_mac.html#Mac">Mac</A>.
Solution:   Skip /dev/fd/.
Files:	    src/testdir/test_stat.vim

Patch 8.1.1942
Problem:    Shadow directory gets outdated when files are added.
Solution:   Add the &quot;shadowupdate&quot; target and add a few comments.
Files:	    src/Makefile

Patch 8.1.1943
Problem:    More code can be moved to evalvars.c.
Solution:   Move <A HREF="motion.html#it">it</A>, clean up comments.  Also move some <A HREF="windows.html#window">window</A> related
            <A HREF="eval.html#functions">functions</A> to window.c. (Yegappan Lakshmanan, closes #4874)
Files:	    src/eval.c, src/evalfunc.c, src/evalvars.c, src/proto/eval.pro,
            src/proto/evalvars.pro, src/proto/window.pro, src/window.c

Patch 8.1.1944
Problem:    Leaking memory when using sound callback.
Solution:   Free the callback queue item.
Files:	    src/sound.c

Patch 8.1.1945
Problem:    Popup <A HREF="windows.html#window">window</A> &quot;firstline&quot; cannot be reset.
Solution:   Allow for setting &quot;firstline&quot; to zero.  Fix that the text jumps to
            the top when using <A HREF="builtin.html#win_execute()">win_execute()</A>. (closes #4876)
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_scroll_5.dump,
            src/testdir/dumps/Test_popupwin_scroll_6.dump

Patch 8.1.1946
Problem:    Memory error when <A HREF="repeat.html#profiling">profiling</A> a function without a <A HREF="usr_41.html#script">script</A> ID.
Solution:   Check for missing <A HREF="usr_41.html#script">script</A> ID.  (closes #4877)
Files:	    src/testdir/test_profile.vim, src/profiler.c

Patch 8.1.1947
Problem:    When executing one test the report doesn't show <A HREF="motion.html#it">it</A>.
Solution:   Adjust the <A HREF="pattern.html#regexp">regexp</A>. (Daniel Hahler, closes #4879)
Files:	    src/testdir/summarize.vim

Patch 8.1.1948
Problem:    Mouse doesn't work in Linux console and causes 100&#37; CPU. (James <A HREF="change.html#P">P</A>.
            Harvey)
Solution:   Loop in WaitForCharOrMouse() when gpm_process_wanted is set.
            (closes #4828)
Files:	    src/os_unix.c

Patch 8.1.1949
Problem:    Cannot scroll a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> to the very bottom.
Solution:   Scroll to the bottom when the &quot;firstline&quot; property was set to -1.
            (closes #4577)  Allow resetting min/max width/height.
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/dict.c, src/proto/dict.pro,
            src/testdir/dumps/Test_popupwin_firstline.dump,
            src/testdir/dumps/Test_popupwin_firstline_1.dump,
            src/testdir/dumps/Test_popupwin_firstline_2.dump,
            src/testdir/dumps/Test_popupwin_scroll_10.dump

Patch 8.1.1950
Problem:    Using NULL pointer after an out-of-memory.
Solution:   Check for NULL pointer. (Dominique Pelle, closes #4881)
Files:	    src/syntax.c

Patch 8.1.1951
Problem:    Mouse double click test is a bit flaky.
Solution:   Add to <A HREF="eval.html#list">list</A> of flaky tests.  Update a couple of comments.
Files:	    src/testdir/runtest.vim, src/testdir/shared.vim,
            src/testdir/test_substitute.vim

Patch 8.1.1952
Problem:    More <A HREF="eval.html#functions">functions</A> can be used <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Solution:   Allow more <A HREF="eval.html#functions">functions</A> to be used <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_tagjump.vim, src/testdir/test_bufwintabinfo.vim,
            src/testdir/test_terminal.vim, src/testdir/test_getvar.vim,
            src/testdir/test_escaped_glob.vim,
            src/testdir/test_glob2regpat.vim

Patch 8.1.1953
Problem:    More <A HREF="eval.html#functions">functions</A> can be used <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Solution:   Allow more <A HREF="eval.html#functions">functions</A> to be used <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_blob.vim,
            src/testdir/test_breakindent.vim, src/testdir/test_delete.vim,
            src/testdir/test_functions.vim, src/testdir/test_getcwd.vim,
            src/testdir/test_history.vim, src/testdir/test_listdict.vim,
            src/testdir/test_syn_attr.vim, src/testdir/test_termcodes.vim,
            src/testdir/test_true_false.vim

Patch 8.1.1954
Problem:    More <A HREF="eval.html#functions">functions</A> can be used <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Solution:   Allow more <A HREF="eval.html#functions">functions</A> to be used <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_arglist.vim, src/testdir/test_functions.vim,
            src/testdir/test_json.vim, src/testdir/test_lispwords.vim,
            src/testdir/test_listener.vim, src/testdir/test_lua.vim,
            src/testdir/test_utf8.vim

Patch 8.1.1955
Problem:    Tests contain typos.
Solution:   Correct the typos. (Dominique Pelle)
Files:	    src/testdir/popupbounce.vim, src/testdir/runtest.vim,
            src/testdir/screendump.vim, src/testdir/test49.vim,
            src/testdir/test_autocmd.vim, src/testdir/test_cindent.vim,
            src/testdir/test_const.vim, src/testdir/test_popupwin.vim,
            src/testdir/test_quickfix.vim, src/testdir/test_search.vim,
            src/testdir/test_tabpage.vim, src/testdir/test_tcl.vim

Patch 8.1.1956
Problem:    Screenshot tests may use a different encoding. (Dominique Pelle)
Solution:   Always set <A HREF="options.html#'encoding'">'encoding'</A> to &quot;<A HREF="mbyte.html#utf-8">utf-8</A>&quot; when running Vim in a <A HREF="terminal.html#terminal">terminal</A>.
            (closes #4884)
Files:	    src/testdir/shared.vim, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_behind.dump

Patch 8.1.1957
Problem:    More code can be moved to evalvars.c.
Solution:   Move code to where <A HREF="motion.html#it">it</A> fits better. (Yegappan Lakshmanan,
            closes #4883)
Files:	    src/eval.c, src/evalvars.c, src/ex_getln.c, src/globals.h,
            src/if_py_both.h, src/proto/eval.pro, src/proto/evalvars.pro,
            src/proto/ex_getln.pro, src/proto/scriptfile.pro,
            src/scriptfile.c, src/session.c, src/viminfo.c

Patch 8.1.1958
Problem:    Old style comments taking up space.
Solution:   Change to new style comments.
Files:	    src/vim.h

Patch 8.1.1959
Problem:    When using &quot;firstline&quot; in <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> text may jump when
            redrawing <A HREF="motion.html#it">it</A>. (Nick Jensen)
Solution:   Set <A HREF="options.html#'scrolloff'">'scrolloff'</A> to zero in a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>. (closes #4882)
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_scroll_5.dump,
            src/testdir/dumps/Test_popupwin_scroll_6.dump

Patch 8.1.1960
Problem:    Fold code is spread out.
Solution:   Move fold <A HREF="eval.html#functions">functions</A> to fold.c.
Files:	    src/evalfunc.c, src/fold.c, src/proto/fold.pro

Patch 8.1.1961
Problem:    More <A HREF="eval.html#functions">functions</A> can be used <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Solution:   Allow more <A HREF="eval.html#functions">functions</A> to be used <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.  Add a test for
            <A HREF="builtin.html#mapcheck()">mapcheck()</A>.
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test70.in,
            src/testdir/test_functions.vim, src/testdir/test_getcwd.vim,
            src/testdir/test_maparg.vim, src/testdir/test_match.vim

Patch 8.1.1962
Problem:    Leaking memory when using tagfunc().
Solution:   Free the user_data. (Dominique Pelle, closes #4886)
Files:	    src/window.c

Patch 8.1.1963
Problem:    Popup <A HREF="windows.html#window">window</A> <A HREF="change.html#filter">filter</A> may be called recursively when using a <A HREF="intro.html#Normal">Normal</A>
            mode command. (Nick Jensen)
Solution:   Prevent recursiveness. (closes #4887)  Also restore KeyTyped.
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.1964
Problem:    Crash when using nested <A HREF="builtin.html#map()">map()</A> and <A HREF="builtin.html#filter()">filter()</A>.
Solution:   Do not set the <A HREF="eval.html#v:key">v:key</A> type to <A HREF="eval.html#string">string</A> without clearing the pointer.
            (closes #4888)
Files:	    src/eval.c, src/testdir/test_filter_map.vim

Patch 8.1.1965
Problem:    The search <A HREF="intro.html#count">count</A> message is not displayed when using a <A HREF="map.html#mapping">mapping</A>.
            (Gary Johnson)
Solution:   Ignore cmd_silent for showing the search <A HREF="intro.html#count">count</A>. (Christian
            Brabandt)
Files:	    src/search.c

Patch 8.1.1966
Problem:    Some code in options.c fits better elsewhere.
Solution:   Move <A HREF="eval.html#functions">functions</A> from options.c to other files. (Yegappan
            Lakshmanan, closes #4889)
Files:	    src/evalfunc.c, src/globals.h, src/indent.c, src/map.c,
            src/option.c, src/proto/map.pro, src/proto/option.pro,
            src/proto/quickfix.pro, src/proto/screen.pro, src/proto/spell.pro,
            src/proto/window.pro, src/quickfix.c, src/screen.c, src/spell.c,
            src/window.c

Patch 8.1.1967
Problem:    Line() only works for the current <A HREF="windows.html#window">window</A>.
Solution:   Add an optional argument for the <A HREF="windows.html#window">window</A> to use.
Files:	    runtime/eval.txt, src/evalfunc.c, src/testdir/test_popupwin.vim

Patch 8.1.1968
Problem:    Crash when using nested <A HREF="builtin.html#map()">map()</A>.
Solution:   Clear the pointer in prepare_vimvar(). (Ozaki Kiichi,
            closes #4890, closes #4891)
Files:	    src/evalvars.c, src/testdir/test_filter_map.vim,
            src/testdir/test_functions.vim

Patch 8.1.1969
Problem:    Popup <A HREF="windows.html#window">window</A> <A HREF="change.html#filter">filter</A> is used in all modes.
Solution:   Add the &quot;filtermode&quot; property.
Files:	    src/popupwin.c, src/vim.h, src/map.c, src/proto/map.pro,
            src/structs.h, runtime/doc/popup.txt,
            src/testdir/test_popupwin.vim

Patch 8.1.1970
Problem:    Search stat space wrong, no test for 8.1.1965.
Solution:   Fix check for cmd_silent.  Add a test. (Christian Brabandt)
Files:	    src/search.c, src/testdir/test_search_stat.vim

Patch 8.1.1971
Problem:    Manually enabling features causes build <A HREF="message.html#errors">errors</A>. (John Marriott)
Solution:   Adjust #ifdefs.
Files:	    src/proto.h, src/popupmnu.c, src/buffer.c, src/quickfix.c,
            src/ui.c

Patch 8.1.1972
Problem:    No proper test for <A HREF="builtin.html#getchar()">getchar()</A>.
Solution:   Add a test with special characters.
Files:	    src/testdir/test_functions.vim

Patch 8.1.1973
Problem:    Cannot build without the <A HREF="quickfix.html#quickfix">quickfix</A> feature.
Solution:   Remove #ifdef for qf_info_T.
Files:	    src/structs.h

Patch 8.1.1974
Problem:    Coverity warns for using pointer <A HREF="motion.html#as">as</A> array.
Solution:   Call var2fpos() directly instead of using f_line().
Files:	    src/evalfunc.c

Patch 8.1.1975
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> <A HREF="gui.html#GUI">GUI</A> responds slowly to <A HREF="builtin.html#timer">timer</A>.
Solution:   Break out of wait loop when <A HREF="builtin.html#timer">timer</A> was added or input is available.
            (closes #4893)
Files:	    src/gui_w32.c

Patch 8.1.1976
Problem:    Travis log always shows test output.
Solution:   Change <A HREF="usr_41.html#script">script</A> to avoid if/else. (Ozaki Kiichi, closes #4892)
Files:	    .travis.yml

Patch 8.1.1977
Problem:    Terminal debugger <A HREF="usr_05.html#plugin">plugin</A> may hang.
Solution:   Wait longer when still reading symbols.
Files:	    runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.1978
Problem:    The eval.c file is too big.
Solution:   Move <A HREF="builtin.html#filter()">filter()</A> and <A HREF="builtin.html#map()">map()</A> to list.c.
Files:	    src/eval.c, src/proto/eval.pro, src/list.c, src/proto/list.pro,
            src/evalfunc.c

Patch 8.1.1979
Problem:    Code for handling file names is spread out.
Solution:   Move code to new filepath.c file.  Graduate FEAT_MODIFY_FNAME.
Files:	    src/filepath.c, Filelist, src/Make_cyg_ming.mak,
            src/Make_morph.mak, src/Make_mvc.mak, src/Make_vms.mms,
            src/Makefile, src/README.md, src/eval.c, src/evalfunc.c,
            src/ex_docmd.c, src/feature.h, src/findfile.c, src/if_cscope.c,
            src/message.c, src/misc1.c, src/proto.h, src/proto/eval.pro,
            src/proto/evalvars.pro src/proto/filepath.pro,
            src/proto/findfile.pro, src/proto/message.pro, src/regexp.c,
            src/version.c

Patch 8.1.1980
Problem:    Fix for search stat not tested.
Solution:   Add a screenshot test. (Christian Brabandt)
Files:	    src/testdir/test_search_stat.vim,
            src/testdir/dumps/Test_searchstat_1.dump,
            src/testdir/dumps/Test_searchstat_2.dump

Patch 8.1.1981
Problem:    The evalfunc.c file is too big.
Solution:   Move <A HREF="undo.html#undo">undo</A> <A HREF="eval.html#functions">functions</A> to undo.c.  Move cmdline <A HREF="eval.html#functions">functions</A> to
            ex_getln.c.  Move some container <A HREF="eval.html#functions">functions</A> to list.c.
Files:	    src/evalfunc.c, src/undo.c, src/proto/undo.pro, src/ex_getln.c,
            src/proto/ex_getln.pro, src/list.c, src/proto/list.pro

Patch 8.1.1982
Problem:    More <A HREF="eval.html#functions">functions</A> can be used <A HREF="motion.html#as">as</A> methods.
Solution:   Make <A HREF="popup.html#popup">popup</A> <A HREF="eval.html#functions">functions</A> usable <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Files:	    runtime/doc/popup.txt, src/evalfunc.c,
            src/testdir/test_popupwin.vim

Patch 8.1.1983
Problem:    Compiler nags for uninitialized variable and unused function.
Solution:   Add unnecessary <A HREF="starting.html#initialization">initialization</A>.  Move function inside #ifdef.
Files:	    src/memline.c, src/channel.c

Patch 8.1.1984
Problem:    More <A HREF="eval.html#functions">functions</A> can be used <A HREF="motion.html#as">as</A> methods.
Solution:   Make various <A HREF="eval.html#functions">functions</A> usable <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_functions.vim, src/testdir/test_perl.vim,
            src/testdir/test_prompt_buffer.vim, src/testdir/test_python2.vim,
            src/testdir/test_python3.vim, src/testdir/test_pyx2.vim

Patch 8.1.1985
Problem:    Code for dealing with paths is spread out.
Solution:   Move path related <A HREF="eval.html#functions">functions</A> from misc1.c to filepath.c.
            Remove NO_EXPANDPATH.
Files:	    src/misc1.c, src/proto/misc1.pro, src/filepath.c,
            src/evalfunc.c, src/globals.h, src/misc2.c, src/os_unix.c,
            src/os_unix.h, src/proto/filepath.pro, src/scriptfile.c,
            src/proto/misc2.pro, src/proto/scriptfile.pro, src/vim.h

Patch 8.1.1986
Problem:    More <A HREF="eval.html#functions">functions</A> can be used <A HREF="motion.html#as">as</A> methods.
Solution:   Make <A HREF="textprop.html#textprop">textprop</A> <A HREF="eval.html#functions">functions</A> usable <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Files:	    runtime/doc/textprop.txt, src/evalfunc.c,
            src/testdir/test_textprop.vim

Patch 8.1.1987
Problem:    More <A HREF="eval.html#functions">functions</A> can be used <A HREF="motion.html#as">as</A> methods.
Solution:   Make various <A HREF="eval.html#functions">functions</A> usable <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_clientserver.vim,
            src/testdir/test_eval_stuff.vim, src/testdir/test_functions.vim,
            src/testdir/test_reltime.vim, src/testdir/test_rename.vim

Patch 8.1.1988
Problem:    <A HREF="insert.html#:startinsert">:startinsert</A>! does not work the same way <A HREF="motion.html#as">as</A> &quot;<A HREF="insert.html#A">A</A>&quot;.
Solution:   Use the same code to move the cursor. (closes #4896)
Files:	    src/ex_docmd.c, src/normal.c, src/proto/normal.pro,
            src/testdir/test_edit.vim

Patch 8.1.1989
Problem:    The evalfunc.c file is still too big.
Solution:   Move f_pathshorten() to filepath.c.  Move f_cscope_connection() to
            if_cscope.c.  Move diff_ <A HREF="eval.html#functions">functions</A> to diff.c.  Move timer_
            <A HREF="eval.html#functions">functions</A> to ex_cmds2.c.  move callback <A HREF="eval.html#functions">functions</A> to evalvars.c.
Files:	    src/evalfunc.c, src/proto/evalfunc.pro, src/filepath.c,
            src/proto/filepath.pro, src/if_cscope.c, src/proto/if_cscope.pro,
            src/diff.c, src/proto/diff.pro, src/ex_cmds2.c,
            src/proto/ex_cmds2.pro, src/evalvars.c, src/proto/evalvars.pro

Patch 8.1.1990
Problem:    Cannot build with <A HREF="eval.html#eval">eval</A> but without <A HREF="if_cscop.html#cscope">cscope</A>.
Solution:   Always include if_cscope.pro.
Files:	    src/proto.h

Patch 8.1.1991
Problem:    Still cannot build with <A HREF="eval.html#eval">eval</A> but without <A HREF="if_cscop.html#cscope">cscope</A>.
Solution:   Move f_cscope_connection() outside of #ifdef.
Files:	    src/if_cscope.c

Patch 8.1.1992
Problem:    The search stat moves when wrapping at the end of the buffer.
Solution:   Put the &quot;<A HREF="motion.html#W">W</A>&quot; in front instead of at the end.
Files:	    src/search.c, src/testdir/test_search_stat.vim

Patch 8.1.1993
Problem:    More <A HREF="eval.html#functions">functions</A> can be used <A HREF="motion.html#as">as</A> methods.
Solution:   Make various <A HREF="eval.html#functions">functions</A> usable <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_bufline.vim, src/testdir/test_charsearch.vim,
            src/testdir/test_clientserver.vim, src/testdir/test_cmdline.vim,
            src/testdir/test_cursor_func.vim, src/testdir/test_diffmode.vim,
            src/testdir/test_environ.vim, src/testdir/test_functions.vim,
            src/testdir/test_matchadd_conceal_utf8.vim,
            src/testdir/test_popupwin.vim, src/testdir/test_search.vim,
            src/testdir/test_searchpos.vim, src/testdir/test_utf8.vim

Patch 8.1.1994
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: cannot build with <A HREF="eval.html#eval">eval</A> but without <A HREF="if_cscop.html#cscope">cscope</A>
Solution:   Adjust the makefiles to always build if_cscope.obj.
Files:	    src/Make_mvc.mak, src/Make_cyg_ming.mak

Patch 8.1.1995
Problem:    More <A HREF="eval.html#functions">functions</A> can be used <A HREF="motion.html#as">as</A> methods.
Solution:   Make sign <A HREF="eval.html#functions">functions</A> usable <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Files:	    runtime/doc/sign.txt, src/evalfunc.c, src/testdir/test_signs.vim

Patch 8.1.1996
Problem:    More <A HREF="eval.html#functions">functions</A> can be used <A HREF="motion.html#as">as</A> methods.
Solution:   Make various <A HREF="eval.html#functions">functions</A> usable <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_bufwintabinfo.vim,
            src/testdir/test_cursor_func.vim, src/testdir/test_expr.vim,
            src/testdir/test_functions.vim, src/testdir/test_put.vim,
            src/testdir/test_quickfix.vim, src/testdir/test_sha256.vim,
            src/testdir/test_tabpage.vim, src/testdir/test_tagjump.vim,
            src/testdir/test_vartabs.vim

Patch 8.1.1997
Problem:    No redraw after a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> <A HREF="change.html#filter">filter</A> is invoked.
Solution:   Redraw if needed.
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim
            src/testdir/dumps/Test_popupwin_menu_filter_5.dump

Patch 8.1.1998
Problem:    Redraw even when no <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> <A HREF="change.html#filter">filter</A> was invoked.
Solution:   Only redraw when must_redraw was set to a larger value.
Files:	    src/popupwin.c

Patch 8.1.1999
Problem:    Calling both PlaySoundW() and PlaySoundA().
Solution:   Only use PlaySoundW(). (Dan Thompson, closes #4903)
Files:	    src/sound.c

Patch 8.1.2000
Problem:    Plugin cannot get the current <A HREF="mbyte.html#IME">IME</A> status.
Solution:   Add the <A HREF="builtin.html#getimstatus()">getimstatus()</A> function. (closes #4904)
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/mbyte.c,
            src/proto/mbyte.pro, src/testdir/test_iminsert.vim

Patch 8.1.2001
Problem:    Some source files are too big.
Solution:   Move buffer and <A HREF="windows.html#window">window</A> related <A HREF="eval.html#functions">functions</A> to evalbuffer.c and
            evalwindow.c. (Yegappan Lakshmanan, closes #4898)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/buffer.c, src/channel.c, src/evalbuffer.c, src/evalfunc.c,
            src/evalwindow.c, src/proto.h, src/proto/buffer.pro,
            src/proto/evalbuffer.pro, src/proto/evalfunc.pro,
            src/proto/evalwindow.pro, src/proto/window.pro, src/window.c

Patch 8.1.2002
Problem:    Version number 2000 missing.
Solution:   Add the number in the <A HREF="eval.html#list">list</A> of patches.
Files:	    src/version.c

Patch 8.1.2003
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: code page 65001 is not recognized.
Solution:   Use <A HREF="mbyte.html#utf-8">utf-8</A> for code page 65001. (Dan Thompson, closes #4902)
Files:	    src/mbyte.c

Patch 8.1.2004
Problem:    More <A HREF="eval.html#functions">functions</A> can be used <A HREF="motion.html#as">as</A> methods.
Solution:   Make various <A HREF="eval.html#functions">functions</A> usable <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_breakindent.vim, src/testdir/test_expr.vim,
            src/testdir/test_functions.vim, src/testdir/test_sound.vim,
            src/testdir/test_spell.vim, src/testdir/test_substitute.vim,
            src/testdir/test_swap.vim, src/testdir/test_utf8.vim

Patch 8.1.2005
Problem:    The regexp.c file is too big.
Solution:   Move the backtracking engine to a separate file. (Yegappan
            Lakshmanan, closes #4905)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_mvc.mak, src/Makefile,
            src/regexp.c, src/regexp_bt.c

Patch 8.1.2006
Problem:    Build failure with huge features but without <A HREF="channel.html#channel">channel</A> feature.
Solution:   Add #ifdef. (Dominique Pelle, closes #4906)
Files:	    src/ui.c

Patch 8.1.2007
Problem:    No test for what 8.1.1926 fixes.
Solution:   Add a test <A HREF="change.html#case">case</A>.
Files:	    src/testdir/test_highlight.vim

Patch 8.1.2008
Problem:    Error for invalid range when using listener and <A HREF="undo.html#undo">undo</A>. (Paul Jolly)
Solution:   Do not change the cursor before the lines are restored.
            (closes #4908)
Files:	    src/undo.c, src/testdir/test_listener.vim

Patch 8.1.2009
Problem:    Cursorline highlighting not updated in <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>. (Marko
            Mahni)
Solution:   Check if the cursor position changed. (closes #4912)
Files:	    src/popupwin.c, src/structs.h, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_cursorline_7.dump

Patch 8.1.2010
Problem:    New file uses old style comments.
Solution:   Change to new style comments. (Yegappan Lakshmanan, closes #4910)
Files:	    src/regexp_bt.c

Patch 8.1.2011
Problem:    More <A HREF="eval.html#functions">functions</A> can be used <A HREF="motion.html#as">as</A> methods.
Solution:   Make various <A HREF="eval.html#functions">functions</A> usable <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.  Make the <A HREF="windows.html#window">window</A>
            command test faster.
Files:	    runtime/doc/eval.txt, runtime/doc/testing.txt, src/evalfunc.c,
            src/testdir/test_assert.vim, src/testdir/test_gui.vim,
            src/testdir/test_messages.vim, src/testdir/test_options.vim,
            src/testdir/test_quickfix.vim, src/testdir/test_taglist.vim,
            src/testdir/test_termcodes.vim, src/testdir/test_timers.vim,
            src/testdir/test_vimscript.vim, src/testdir/test_viminfo.vim,
            src/testdir/test_window_cmd.vim

Patch 8.1.2012
Problem:    More <A HREF="eval.html#functions">functions</A> can be used <A HREF="motion.html#as">as</A> methods.
Solution:   Make <A HREF="terminal.html#terminal">terminal</A> <A HREF="eval.html#functions">functions</A> usable <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.  Fix <A HREF="terminal.html#term_getattr()">term_getattr()</A>.
Files:	    runtime/doc/terminal.txt, src/evalfunc.c, src/terminal.c
            src/testdir/test_mksession.vim, src/testdir/test_terminal.vim

Patch 8.1.2013
Problem:    More <A HREF="eval.html#functions">functions</A> can be used <A HREF="motion.html#as">as</A> methods.
Solution:   Make various <A HREF="eval.html#functions">functions</A> usable <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Files:	    runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_cursor_func.vim,
            src/testdir/test_execute_func.vim, src/testdir/test_functions.vim,
            src/testdir/test_listchars.vim, src/testdir/test_timers.vim,
            src/testdir/test_undo.vim, src/testdir/test_window_cmd.vim,
            src/testdir/test_window_id.vim

Patch 8.1.2014
Problem:    Terminal altscreen test fails sometimes.
Solution:   Use WaitFor().
Files:	    src/testdir/test_terminal.vim

Patch 8.1.2015
Problem:    Terminal altscreen test still fails sometimes.
Solution:   Write the <A HREF="intro.html#escape">escape</A> sequence in a file.
Files:	    src/testdir/test_terminal.vim

Patch 8.1.2016
Problem:    Terminal altscreen test now fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Skip the test on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>
Files:	    src/testdir/test_terminal.vim

Patch 8.1.2017
Problem:    Cannot execute commands after closing the cmdline <A HREF="windows.html#window">window</A>.
Solution:   Also trigger <A HREF="autocmd.html#BufEnter">BufEnter</A> and <A HREF="autocmd.html#WinEnter">WinEnter</A>. (closes #4762)
Files:	    runtime/doc/autocmd.txt, runtime/doc/cmdline.txt, src/ex_getln.c,
            src/testdir/test_cmdline.vim

Patch 8.1.2018
Problem:    Using freed memory when out of memory and displaying message.
Solution:   Make a copy of the message first.
Files:	    src/main.c, src/message.c, src/normal.c

Patch 8.1.2019
Problem:    <A HREF="options.html#'cursorline'">'cursorline'</A> always highlights the whole line.
Solution:   Add <A HREF="options.html#'cursorlineopt'">'cursorlineopt'</A> to specify what is highlighted.
            (Ozaki Kiichi, closes #4693)
Files:	    runtime/doc/options.txt, runtime/doc/quickref.txt,
            runtime/doc/syntax.txt, runtime/optwin.vim, src/option.c,
            src/option.h, src/screen.c, src/structs.h,
            src/testdir/Make_all.mak, src/testdir/gen_opt_test.vim,
            src/testdir/test_alot.vim, src/testdir/test_cursorline.vim

Patch 8.1.2020
Problem:    It is not <A HREF="starting.html#easy">easy</A> to change the <A HREF="windows.html#window">window</A> layout.
Solution:   Add <A HREF="builtin.html#win_splitmove()">win_splitmove()</A>. (Andy Massimino, closes #4561)
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/evalwindow.c,
            src/proto/evalwindow.pro, src/testdir/test_window_cmd.vim

Patch 8.1.2021
Problem:    Some global <A HREF="eval.html#functions">functions</A> can be local to the file.
Solution:   Add &quot;static&quot;. (Yegappan Lakshmanan, closes #4917)
Files:	    src/ex_cmds2.c, src/filepath.c, src/hangulin.c, src/mbyte.c,
            src/misc1.c, src/os_unix.c, src/proto/ex_cmds2.pro,
            src/proto/filepath.pro, src/proto/hangulin.pro,
            src/proto/mbyte.pro, src/proto/misc1.pro, src/proto/os_unix.pro,
            src/proto/terminal.pro, src/proto/undo.pro, src/pty.c,
            src/terminal.c, src/undo.c

Patch 8.1.2022
Problem:    The option.c file is too big.
Solution:   Move option <A HREF="intro.html#definitions">definitions</A> to a separate file. (Yegappan Lakshmanan,
            closes #4918)
Files:	    Filelist, src/Make_mvc.mak, src/Make_vms.mms, src/Makefile,
            src/option.c, src/optiondefs.h

Patch 8.1.2023
Problem:    No test for <A HREF="builtin.html#synIDattr()">synIDattr()</A> returning &quot;<A HREF="syntax.html#strikethrough">strikethrough</A>&quot;.
Solution:   Extend the <A HREF="builtin.html#synIDattr()">synIDattr()</A> test. (Jaskaran Singh, closes #4929)
Files:	    src/testdir/test_syn_attr.vim

Patch 8.1.2024
Problem:    Delete call commented out for debugging.
Solution:   Restore the delete call. (Christian Brabandt)
Files:	    src/testdir/test_undo.vim

Patch 8.1.2025
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: Including shlguid.h causes problems for msys2.
Solution:   Do not include shlguid.h. (closes #4913)
Files:	    src/GvimExt/gvimext.h

Patch 8.1.2026
Problem:    Possibly using uninitialized memory.
Solution:   Check if &quot;<A HREF="eval.html#dict">dict</A>&quot; is NULL. (closes #4925)
Files:	    src/ops.c

Patch 8.1.2027
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: problem with ambiwidth characters.
Solution:   handle ambiguous width characters in <A HREF="terminal.html#ConPTY">ConPTY</A> on Windows 10 (1903).
            (Nobuhiro Takasaki, closes #4411)
Files:	    src/Make_mvc.mak, src/Make_cyg_ming.mak, src/libvterm/src/parser.c,
            src/libvterm/src/state.c, src/libvterm/src/termscreen.c,
            src/libvterm/src/unicode.c, src/libvterm/src/vterm_internal.h,
            src/misc2.c, src/os_win32.c, src/proto/misc2.pro,
            src/proto/os_win32.pro

Patch 8.1.2028
Problem:    Options test <A HREF="usr_41.html#script">script</A> does not work.
Solution:   Use optiondefs.h for input.
Files:	    src/testdir/Makefile, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak

Patch 8.1.2029
Problem:    Cannot <A HREF="intro.html#control">control</A> <A HREF="options.html#'cursorline'">'cursorline'</A> highlighting well.
Solution:   Add &quot;screenline&quot;. (Christian Brabandt, closes #4933)
Files:	    runtime/doc/options.txt, src/change.c, src/main.c, src/option.c,
            src/option.h, src/optiondefs.h, src/screen.c, src/structs.h,
            src/highlight.c, src/testdir/dumps/Test_Xcursorline_1.dump,
            src/testdir/dumps/Test_Xcursorline_2.dump,
            src/testdir/dumps/Test_Xcursorline_3.dump,
            src/testdir/dumps/Test_Xcursorline_4.dump,
            src/testdir/dumps/Test_Xcursorline_5.dump,
            src/testdir/dumps/Test_Xcursorline_6.dump,
            src/testdir/dumps/Test_Xcursorline_7.dump,
            src/testdir/dumps/Test_Xcursorline_8.dump,
            src/testdir/dumps/Test_Xcursorline_9.dump,
            src/testdir/dumps/Test_Xcursorline_10.dump,
            src/testdir/dumps/Test_Xcursorline_11.dump,
            src/testdir/dumps/Test_Xcursorline_12.dump,
            src/testdir/dumps/Test_Xcursorline_13.dump,
            src/testdir/dumps/Test_Xcursorline_14.dump,
            src/testdir/dumps/Test_Xcursorline_15.dump,
            src/testdir/dumps/Test_Xcursorline_16.dump,
            src/testdir/dumps/Test_Xcursorline_17.dump,
            src/testdir/dumps/Test_Xcursorline_18.dump,
            src/testdir/gen_opt_test.vim, src/testdir/test_cursorline.vim,
            src/testdir/dumps/Test_cursorline_yank_01.dump,
            src/testdir/dumps/Test_wincolor_01.dump,
            src/testdir/dumps/Test_textprop_01.dump

Patch 8.1.2030
Problem:    Tests fail when build with normal features and <A HREF="terminal.html#terminal">terminal</A>.
            (Dominique Pelle)
Solution:   Disable tests that won't work. (closes #4932)
Files:	    src/testdir/test_popupwin.vim, src/testdir/test_terminal.vim

Patch 8.1.2031
Problem:    Cursor position wrong when resizing and using <A HREF="syntax.html#conceal">conceal</A>.
Solution:   Set the flags that the cursor position is valid when setting the
            row and column during redrawing. (closes #4931)
Files:	    src/screen.c, src/testdir/test_conceal.vim,
            src/testdir/dumps/Test_conceal_resize_01.dump,
            src/testdir/dumps/Test_conceal_resize_02.dump

Patch 8.1.2032
Problem:    Scrollbar thumb wrong in <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Solution:   Adjust thumb size and position when scrolled.
Files:	    src/popupwin.c, src/testdir/dumps/Test_popupwin_scroll_2.dump

Patch 8.1.2033
Problem:    Cannot build with tiny features.
Solution:   Add #ifdef.
Files:	    src/screen.c

Patch 8.1.2034
Problem:    Dark theme of <A HREF="gui_x11.html#GTK">GTK</A> 3 not supported.
Solution:   Add the &quot;<A HREF="change.html#d">d</A>&quot; flag in <A HREF="options.html#'guioptions'">'guioptions'</A>. (Jonathan Conder, closes #4934)
Files:	    runtime/doc/options.txt, src/feature.h, src/gui.c,
            src/gui_gtk_x11.c, src/option.h, src/proto/gui_gtk_x11.pro,
            src/testdir/test_gui.vim

Patch 8.1.2035
Problem:    Recognizing <A HREF="eval.html#octal">octal</A> numbers is confusing.
Solution:   Introduce <A HREF="eval.html#scriptversion">scriptversion</A> 4: <A HREF="diff.html#do">do</A> not use <A HREF="eval.html#octal">octal</A> and allow for single
            <A HREF="change.html#quote">quote</A> inside numbers.
Files:	    runtime/doc/eval.txt, src/vim.h, src/eval.c, src/scriptfile.c,
            src/evalfunc.c, src/testdir/test_eval_stuff.vim,
            src/testdir/test_functions.vim

Patch 8.1.2036 (after 8.1.2035)
Problem:    The <A HREF="builtin.html#str2nr()">str2nr()</A> tests fail.
Solution:   Add missing part of patch.
Files:	    src/charset.c

Patch 8.1.2037
Problem:    Can call <A HREF="builtin.html#win_gotoid()">win_gotoid()</A> in cmdline <A HREF="windows.html#window">window</A>.
Solution:   Disallow switching <A HREF="windows.html#windows">windows</A>. (Yasuhiro Matsumoto, closes #4940)
Files:	    src/evalwindow.c, src/testdir/test_cmdline.vim

Patch 8.1.2038
Problem:    has('vimscript-4') is always 0.
Solution:   Add &quot;vimscript-4&quot; to the feature table. (Naruhiko Nishino,
            closes #4941)
Files:	    src/evalfunc.c, src/testdir/test_eval_stuff.vim

Patch 8.1.2039
Problem:    Character from <A HREF="options.html#'showbreak'">'showbreak'</A> does not use <A HREF="options.html#'wincolor'">'wincolor'</A>. (Nick Jensen)
Solution:   Mix with <A HREF="options.html#'wincolor'">'wincolor'</A>. (closes #4938)
Files:	    src/screen.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_showbreak.dump

Patch 8.1.2040
Problem:    No highlighting of current line in <A HREF="quickfix.html#quickfix">quickfix</A> <A HREF="windows.html#window">window</A>.
Solution:   Combine with line_attr.
Files:	    src/screen.c, src/testdir/test_quickfix.vim,
            src/testdir/dumps/Test_quickfix_cwindow_1.dump,
            src/testdir/dumps/Test_quickfix_cwindow_2.dump

Patch 8.1.2041 (after 8.1.2040)
Problem:    No test for <A HREF="diff.html#diff">diff</A> mode with <A HREF="syntax.html#syntax">syntax</A> highlighting.
Solution:   Add a test <A HREF="change.html#case">case</A>.
Files:	    src/testdir/test_diffmode.vim,
            src/testdir/dumps/Test_diff_syntax_1.dump

Patch 8.1.2042
Problem:    The evalfunc.c file is too big.
Solution:   Move <A HREF="builtin.html#getchar()">getchar()</A> and parse_queued_messages() to getchar.c.
Files:	    src/getchar.c, src/proto/getchar.pro, src/evalfunc.c, src/misc2.c,
            src/proto/misc2.pro

Patch 8.1.2043
Problem:    Not sufficient <A HREF="testing.html#testing">testing</A> for quoted numbers.
Solution:   Add a few more test cases.
Files:	    src/testdir/test_functions.vim, src/testdir/test_eval_stuff.vim

Patch 8.1.2044
Problem:    No <A HREF="starting.html#easy">easy</A> way to process postponed work. (Paul Jolly)
Solution:   Add the <A HREF="autocmd.html#SafeState">SafeState</A> <A HREF="autocmd.html#autocommand">autocommand</A> event.
Files:	    runtime/doc/autocmd.txt, src/main.c, src/proto/main.pro,
            src/vim.h, src/autocmd.c, src/channel.c, src/edit.c,
            src/ex_getln.c

Patch 8.1.2045
Problem:    The option.c file is too big.
Solution:   Split off the code dealing with strings. (Yegappan Lakshmanan,
            closes #4937)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/option.c, src/option.h, src/optiondefs.h, src/optionstr.c,
            src/ops.c, src/os_unix.c, src/proto.h, src/proto/option.pro,
            src/proto/optionstr.pro

Patch 8.1.2046
Problem:    <A HREF="autocmd.html#SafeState">SafeState</A> may be triggered at the wrong moment.
Solution:   Move <A HREF="motion.html#it">it</A> up higher to after where <A HREF="message.html#messages">messages</A> are processed.  Add a
            <A HREF="autocmd.html#SafeStateAgain">SafeStateAgain</A> event to trigger there.
Files:	    runtime/doc/autocmd.txt, src/main.c, src/proto/main.pro,
            src/getchar.c, src/channel.c, src/autocmd.c, src/vim.h

Patch 8.1.2047
Problem:    Cannot check the current state.
Solution:   Add the <A HREF="builtin.html#state()">state()</A> function.
Files:	    runtime/doc/eval.txt, src/misc1.c, src/proto/misc1.pro,
            src/evalfunc.c, src/proto/evalfunc.pro, src/main.c,
            src/proto/main.pro, src/channel.c, src/proto/channel.pro,
            src/userfunc.c, src/proto/userfunc.pro

Patch 8.1.2048
Problem:    Not clear why <A HREF="autocmd.html#SafeState">SafeState</A> and <A HREF="autocmd.html#SafeStateAgain">SafeStateAgain</A> are not triggered.
Solution:   Add log statements.
Files:	    src/getchar.c, src/main.c, src/proto/main.pro

Patch 8.1.2049 (after 8.1.2048)
Problem:    Cannot build tiny version.
Solution:   Add #ifdefs.
Files:	    src/main.c

Patch 8.1.2050
Problem:    Popup <A HREF="windows.html#window">window</A> test fails in some configurations. (James McCoy)
Solution:   Clear the command line.
Files:	    src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_scroll_10.dump

Patch 8.1.2051
Problem:    Double-click test is a bit flaky.
Solution:   Correct entry in <A HREF="eval.html#list">list</A> of flaky tests.
Files:	    src/testdir/runtest.vim

Patch 8.1.2052
Problem:    Using &quot;<A HREF="change.html#x">x</A>&quot; before a closed fold may delete that fold.
Solution:   Do not translate '<A HREF="change.html#x">x</A>' <A HREF="diff.html#do">do</A> &quot;<A HREF="change.html#dl">dl</A>&quot;. (Christian Brabandt, closes #4927)
Files:	    src/normal.c, src/testdir/test_fold.vim

Patch 8.1.2053
Problem:    <A HREF="autocmd.html#SafeStateAgain">SafeStateAgain</A> not triggered if callback uses <A HREF="builtin.html#feedkeys()">feedkeys()</A>.
Solution:   Check for safe state in the input loop.  Make log <A HREF="message.html#messages">messages</A> easier
            to find. Add '<A HREF="change.html#S">S</A>' flag to <A HREF="builtin.html#state()">state()</A>.
Files:	    src/main.c, src/proto/main.pro, src/getchar.c,
            runtime/doc/eval.txt

Patch 8.1.2054
Problem:    Compiler test for <A HREF="if_perl.html#Perl">Perl</A> may fail.
Solution:   Accept any error line number. (James McCoy, closes #4944)
Files:	    src/testdir/test_compiler.vim

Patch 8.1.2055
Problem:    Not <A HREF="starting.html#easy">easy</A> to jump to function line from <A HREF="repeat.html#profile">profile</A>.
Solution:   Use &quot;file:99&quot; instead of &quot;file line 99&quot; so that &quot;<A HREF="editing.html#gf">gf</A>&quot; works.
            (Daniel Hahler, closes #4951)
Files:	    src/profiler.c, src/testdir/test_profile.vim

Patch 8.1.2056
Problem:    &quot;make test&quot; for indent files doesn't cause make to fail.
Solution:   Exit the <A HREF="usr_41.html#script">script</A> with &quot;<A HREF="quickfix.html#:cquit">:cquit</A>&quot;. (Daniel Hahler, closes #4949)
Files:	    runtime/indent/testdir/runtest.vim, .gitignore

Patch 8.1.2057
Problem:    The screen.c file is much too big.
Solution:   Split <A HREF="motion.html#it">it</A> in three parts. (Yegappan Lakshmanan, closes #4943)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/drawline.c, src/drawscreen.c, src/globals.h, src/proto.h,
            src/proto/drawline.pro, src/proto/drawscreen.pro,
            src/proto/screen.pro, src/screen.c, src/vim.h

Patch 8.1.2058
Problem:    Function for <A HREF="starting.html#ex">ex</A> command is named inconsistently.
Solution:   Rename do_marks() to ex_marks().
Files:	    src/mark.c, src/proto/mark.pro, src/ex_cmds.h

Patch 8.1.2059
Problem:    Fix for &quot;<A HREF="change.html#x">x</A>&quot; <A HREF="change.html#deleting">deleting</A> a fold has side effects.
Solution:   Fix <A HREF="motion.html#it">it</A> where the fold is included.
Files:	    src/normal.c

Patch 8.1.2060
Problem:    &quot;precedes&quot; in <A HREF="options.html#'listchars'">'listchars'</A> not used properly.
Solution:   Correctly handle the &quot;precedes&quot; char in <A HREF="eval.html#list">list</A> mode for long lines.
            (Zach Wegner, Christian Brabandt, closes #4953)
Files:	    runtime/doc/options.txt, src/drawline.c,
            src/testdir/test_display.vim, src/testdir/view_util.vim

Patch 8.1.2061
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> <A HREF="gui.html#GUI">GUI</A>: &quot;<A HREF="various.html#:sh">:sh</A>&quot; crashes when trying to use a <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Check for a NULL command. (Yasuhiro Matsumoto, closes #4958)
Files:	    src/os_win32.c

Patch 8.1.2062
Problem:    The mouse code is spread out.
Solution:   Move all the mouse code to mouse.c. (Yegappan Lakshmanan,
            closes #4959)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/auto/configure, src/configure.ac, src/edit.c, src/ex_cmds.c,
            src/ex_docmd.c, src/ex_getln.c, src/insexpand.c,
            src/libvterm/src/termmouse.c, src/libvterm/src/mouse.c,
            src/main.c, src/message.c, src/misc1.c, src/misc2.c, src/mouse.c,
            src/normal.c, src/proto.h, src/proto/edit.pro,
            src/proto/misc1.pro, src/proto/misc2.pro, src/proto/mouse.pro,
            src/proto/normal.pro, src/proto/term.pro, src/proto/ui.pro,
            src/search.c, src/term.c, src/ui.c, src/vim.h, src/window.c

Patch 8.1.2063
Problem:    Some tests fail when <A HREF="various.html#+balloon_eval_term">+balloon_eval_term</A> is missing but
            _balloon_eval is present. (Dominique Pelle)
Solution:   Check the right feature in the test. (closes #4962)
Files:	    src/testdir/test_popupwin.vim, src/testdir/test_terminal.vim

Patch 8.1.2064
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: compiler warnings for unused arguments.
Solution:   Add UNUSED. (Yegappan Lakshmanan, closes #4963)
Files:	    src/channel.c, src/ex_docmd.c, src/ex_getln.c, src/fileio.c,
            src/gui_w32.c, src/main.c, src/memline.c, src/os_mswin.c,
            src/os_win32.c, src/terminal.c, src/ui.c, src/undo.c

Patch 8.1.2065
Problem:    Compiler warning building non-GUI with MinGW.
Solution:   Adjust #ifdefs. (Yegappan Lakshmanan, closes #4964)
Files:	    sre/mouse.c

Patch 8.1.2066
Problem:    No tests for <A HREF="builtin.html#state()">state()</A>.
Solution:   Add tests.  Clean up some feature checks.  Make &quot;<A HREF="insert.html#a">a</A>&quot; flag work.
Files:	    src/testdir/test_functions.vim, src/testdir/test_terminal.vim,
            src/misc1.c

Patch 8.1.2067
Problem:    No tests for <A HREF="autocmd.html#SafeState">SafeState</A> and <A HREF="autocmd.html#SafeStateAgain">SafeStateAgain</A>.
Solution:   Add tests.
Files:	    src/testdir/test_autocmd.vim

Patch 8.1.2068 (after 8.1.2067)
Problem:    Test for <A HREF="autocmd.html#SafeState">SafeState</A> and <A HREF="autocmd.html#SafeStateAgain">SafeStateAgain</A> may fail.
Solution:   Accept more possible responses
Files:	    src/testdir/test_autocmd.vim

Patch 8.1.2069 (after 8.1.2068)
Problem:    Test for <A HREF="autocmd.html#SafeStateAgain">SafeStateAgain</A> may still fail.
Solution:   Send another message to trigger <A HREF="autocmd.html#SafeStateAgain">SafeStateAgain</A>.
Files:	    src/testdir/test_autocmd.vim

Patch 8.1.2070
Problem:    Mouse code is spread out.
Solution:   Move mouse <A HREF="terminal.html#terminal">terminal</A> code parsing to mouse.c. (Yegappan Lakshmanan,
            closes #4966)
Files:	    src/mouse.c, src/proto/mouse.pro, src/proto/term.pro, src/term.c

Patch 8.1.2071
Problem:    When <A HREF="options.html#'wincolor'">'wincolor'</A> is set text property changes highlighting. (Andy
            Stewart)
Solution:   Fix combining colors. (closes #4968)
Files:	    src/drawline.c, src/testdir/test_highlight.vim,
            src/testdir/dumps/Test_wincolor_01.dump

Patch 8.1.2072
Problem:    &quot;<A HREF="motion.html#gk">gk</A>&quot; moves to start of line instead of upwards.
Solution:   Fix off-by-one error. (Christian Brabandt, closes #4969)
Files:	    src/normal.c, src/testdir/test_normal.vim

Patch 8.1.2073
Problem:    When editing a buffer <A HREF="options.html#'colorcolumn'">'colorcolumn'</A> may not work.
Solution:   Set the buffer before <A HREF="uganda.html#copying">copying</A> option values. Call
            check_colorcolumn() after <A HREF="uganda.html#copying">copying</A> <A HREF="windows.html#window">window</A> <A HREF="options.html#options">options</A>.
Files:	    src/buffer.c, src/option.c, src/proto/option.pro,
            src/proto/indent.pro, src/testdir/test_highlight.vim,
            src/testdir/dumps/Test_colorcolumn_1.dump

Patch 8.1.2074
Problem:    Test for <A HREF="autocmd.html#SafeState">SafeState</A> <A HREF="autocmd.html#autocommand">autocommand</A> is a bit flaky.
Solution:   Add to <A HREF="eval.html#list">list</A> of flaky tests.
Files:	    src/testdir/runtest.vim

Patch 8.1.2075
Problem:    Get many log <A HREF="message.html#messages">messages</A> when waiting for a typed character.
Solution:   Do not repeat the repeated <A HREF="message.html#messages">messages</A> when nothing happens.
Files:	    src/globals.h, src/channel.c, src/main.c

Patch 8.1.2076
Problem:    Crash when trying to put a <A HREF="terminal.html#terminal">terminal</A> buffer in a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Solution:   Check for NULL buffer.  Do not allow putting a <A HREF="terminal.html#terminal">terminal</A> in a <A HREF="popup.html#popup">popup</A>
            <A HREF="windows.html#window">window</A>.
Files:	    src/libvterm/src/termscreen.c, src/terminal.c, src/popupwin.c,
            runtime/doc/popup.txt, src/testdir/test_popupwin.vim

Patch 8.1.2077
Problem:    The ops.c file is too big.
Solution:   Move code for dealing with <A HREF="change.html#registers">registers</A> to a new file. (Yegappan
            Lakshmanan, closes #4982)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms src/Makefile, src/README.md,
            src/ops.c, src/proto.h, src/proto/ops.pro, src/proto/register.pro,
            src/register.c, src/structs.h

Patch 8.1.2078
Problem:    Build error with <A HREF="various.html#+textprop">+textprop</A> but without <A HREF="various.html#+terminal">+terminal</A>. (Tony Mechelynck)
Solution:   Add #ifdef.
Files:	    src/popupwin.c

Patch 8.1.2079
Problem:    Popup <A HREF="windows.html#window">window</A> test fails without <A HREF="various.html#+terminal">+terminal</A>.
Solution:   Check for the <A HREF="various.html#+terminal">+terminal</A> feature.
Files:	    src/testdir/test_popupwin.vim

Patch 8.1.2080
Problem:    The <A HREF="terminal.html#terminal">terminal</A> API is limited and can't be disabled.
Solution:   Add <A HREF="terminal.html#term_setapi()">term_setapi()</A> to set the function prefix. (Ozaki Kiichi,
            closes #2907)
Files:	    runtime/doc/eval.txt, runtime/doc/terminal.txt, src/channel.c,
            src/evalfunc.c, src/proto/terminal.pro, src/structs.h,
            src/terminal.c, src/testdir/term_util.vim,
            src/testdir/test_terminal.vim

Patch 8.1.2081
Problem:    The spell.c file is too big.
Solution:   Move the code for <A HREF="spell.html#spell">spell</A> suggestions to a separate file. (Yegappan
            Lakshmanan, closes #4988)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/proto.h, src/proto/spell.pro, src/proto/spellsuggest.pro,
            src/spell.c, src/spell.h, src/spellsuggest.c

Patch 8.1.2082
Problem:    Some files have a weird name to fit in 8.3 characters.
Solution:   Use a nicer names.
Files:	    Filelist, Makefile, src/popupmnu.c, src/popupmenu.c,
            src/proto/popupmnu.pro, src/proto/popupmenu.pro,
            src/Make_cyg_ming.mak, src/Make_morph.mak, src/Make_mvc.mak,
            src/Make_vms.mms, src/Makefile, src/proto.h, src/README.md,
            src/uninstal.c, src/uninstall.c, uninstal.txt, uninstall.txt,
            nsis/gvim.nsi, src/INSTALLpc.txt, src/dosinst.c, src/dosinst.h

Patch 8.1.2083
Problem:    Multi-byte chars <A HREF="diff.html#do">do</A> not work properly with &quot;&#37;.*S&quot; in <A HREF="builtin.html#printf()">printf()</A>.
Solution:   Use mb_ptr2cells(). Daniel Hahler, closes #4989)
Files:	    src/testdir/test_expr.vim, src/message.c

Patch 8.1.2084
Problem:    <A HREF="os_amiga.html#Amiga">Amiga</A>: cannot get the user name.
Solution:   Use getpwuid() if available. (Ola Sder, closes #4985)
Files:	    src/os_amiga.c, src/os_amiga.h

Patch 8.1.2085
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: draw error moving cursor over double-cell character.
Solution:   Move the cursor to the left edge if needed. (Nobuhiro Takasaki,
            closes #4986)
Files:	    src/os_win32.c

Patch 8.1.2086 (after 8.1.2082)
Problem:    Missing a few changes for the renamed files.
Solution:   Rename in a few more places. (Ken Takata)
Files:	    nsis/README.txt, runtime/doc/gui_w32.txt, runtime/doc/usr_90.txt,
            src/GvimExt/GvimExt.reg, src/GvimExt/README.txt,
            src/proto/popupmenu.pro, src/proto/popupmnu.pro

Patch 8.1.2087
Problem:    Cannot easily select one test function to execute.
Solution:   Support the $TEST_FILTER environment variable. (Ozaki Kiichi,
            closes #2695)
Files:	    src/Makefile, src/testdir/runtest.vim, src/testdir/summarize.vim

Patch 8.1.2088
Problem:    Renamed libvterm mouse.c file not in distributed file <A HREF="eval.html#list">list</A>.
Solution:   Rename the file in the file <A HREF="eval.html#list">list</A>.
Files:	    Filelist

Patch 8.1.2089 (after 8.1.2087)
Problem:    Do not get a hint that $TEST_FILTER was active.
Solution:   Mention $TEST_FILTER if no <A HREF="eval.html#functions">functions</A> were executed.
Files:	    src/testdir/runtest.vim

Patch 8.1.2090
Problem:    Not clear why <A HREF="channel.html#channel">channel</A> log file ends.
Solution:   Add a &quot;closing&quot; line.
Files:	    src/channel.c

Patch 8.1.2091
Problem:    Double free when memory allocation fails. (Zu-Ming Jiang)
Solution:   Use VIM_CLEAR() instead of vim_free(). (closes #4991)
Files:	    src/getchar.c

Patch 8.1.2092
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: redirect in <A HREF="builtin.html#system()">system()</A> does not work.
Solution:   Handle <A HREF="options.html#'shellxescape'">'shellxescape'</A> and <A HREF="options.html#'shellxquote'">'shellxquote'</A> better. (Yasuhiro
            Matsumoto, closes #2054)
Files:	    src/ex_cmds.c, src/misc2.c, src/testdir/test_system.vim

Patch 8.1.2093
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="builtin.html#system()">system()</A> test fails.
Solution:   Expect CR when using <A HREF="builtin.html#systemlist()">systemlist()</A>.
Files:	    src/testdir/test_system.vim

Patch 8.1.2094
Problem:    The fileio.c file is too big.
Solution:   Move buf_write() to bufwrite.c. (Yegappan Lakshmanan,
            closes #4990)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/bufwrite.c, src/fileio.c, src/option.c, src/proto.h,
            src/proto/bufwrite.pro, src/proto/fileio.pro, src/structs.h

Patch 8.1.2095
Problem:    Leaking memory when getting item from <A HREF="eval.html#dict">dict</A>.
Solution:   Also free the key when not evaluating.
Files:	    src/dict.c

Patch 8.1.2096
Problem:    Too many #ifdefs.
Solution:   Graduate FEAT_COMMENTS.
Files:	    src/feature.h, src/buffer.c, src/change.c, src/edit.c,
            src/evalfunc.c, src/fold.c, src/insexpand.c, src/misc1.c,
            src/normal.c, src/ops.c, src/option.c, src/optionstr.c,
            src/search.c, src/version.c, src/globals.h, src/option.h,
            src/optiondefs.h, src/structs.h, runtime/doc/change.txt,
            runtime/doc/options.txt, runtime/doc/various.txt

Patch 8.1.2097
Problem:    <A HREF="starting.html#:mksession">:mksession</A> is not sufficiently tested.
Solution:   Add more test cases. (Yegappan Lakshmanan, closes #4992)
Files:	    src/testdir/test_mksession.vim

Patch 8.1.2098 (after 8.1.2097)
Problem:    mksession test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Skip <A HREF="testing.html#testing">testing</A> with backslashes on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Files:	    src/testdir/test_mksession.vim

Patch 8.1.2099
Problem:    <A HREF="builtin.html#state()">state()</A> test fails on some <A HREF="os_mac.html#Mac">Mac</A> systems.
Solution:   Increase the wait time. (closes #4983)
Files:	    src/testdir/test_functions.vim

Patch 8.1.2100
Problem:    <A HREF="starting.html#:mksession">:mksession</A> is not sufficiently tested.
Solution:   Add more test cases. (Yegappan Lakshmanan, closes #4993)
Files:	    src/testdir/test_mksession.vim

Patch 8.1.2101
Problem:    write_session_file() often defined but not used.
Solution:   Adjust the #ifdef. (Yegappan Lakshmanan, closes #4998)
Files:	    src/session.c

Patch 8.1.2102
Problem:    Can't build with <A HREF="gui_x11.html#GTK">GTK</A> and FEAT_GUI_GNOME. (Tony Mechelynck)
Solution:   Adjust the #ifdef. (Yegappan Lakshmanan)
Files:	    src/session.c

Patch 8.1.2103
Problem:    wrong error message if &quot;termdebugger&quot; is not executable.
Solution:   Check if &quot;termdebugger&quot; is executable and give a clear error
            message. (Ozaki Kiichi, closes #5000)  Fix indents.
Files:	    runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.2104
Problem:    The normal.c file is too big.
Solution:   Move do_pending_operator() to ops.c. (Yegappan Lakshmanan,
            closes #4999).
Files:	    src/normal.c, src/ops.c, src/proto/normal.pro, src/proto/ops.pro,
            src/globals.h

Patch 8.1.2105
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="builtin.html#system()">system()</A> may crash.
Solution:   Do not use &quot;itmp&quot; when <A HREF="motion.html#it">it</A> is NULL. (Yasuhiro Matsumoto,
            closes #5005)
Files:	    src/ex_cmds.c

Patch 8.1.2106
Problem:    No tests for dragging the mouse beyond the <A HREF="windows.html#window">window</A>.
Solution:   Add a test. (Dominique Pelle, closes #5004)
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.2107
Problem:    Various memory leaks reported by asan.
Solution:   Free the memory. (Ozaki Kiichi, closes #5003)
Files:	    src/buffer.c, src/change.c, src/eval.c, src/evalfunc.c,
            src/option.c, src/popupwin.c, src/proto/change.pro,
            src/scriptfile.c, src/terminal.c, src/testdir/test_method.vim

Patch 8.1.2108
Problem:    Cannot close the cmdline <A HREF="windows.html#window">window</A> from CmdWinEnter. (George Brown)
Solution:   Reset cmdwin_result earlier. (Christian Brabandt, closes #4980)
Files:	    src/ex_getln.c, src/testdir/test_autocmd.vim

Patch 8.1.2109
Problem:    <A HREF="popup.html#popup_getoptions()">popup_getoptions()</A> hangs with tab-local <A HREF="popup.html#popup">popup</A>.
Solution:   Correct pointer name. (Marko Mahni, closes #5006)
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.2110
Problem:    <A HREF="pattern.html#CTRL-C">CTRL-C</A> closes two popups instead of one.
Solution:   Reset got_int when the <A HREF="change.html#filter">filter</A> consumed the key.
Files:	    src/getchar.c, src/testdir/test_popupwin.vim

Patch 8.1.2111
Problem:    Viminfo file not sufficiently tested.
Solution:   Add more tests. (Yegappan Lakshmanan, closes #5009)
Files:	    src/testdir/test_viminfo.vim

Patch 8.1.2112
Problem:    Build number for <A HREF="terminal.html#ConPTY">ConPTY</A> is outdated.
Solution:   Update to new build number. (Nobuhiro Takasaki, closes #5014)
Files:	    src/os_win32.c

Patch 8.1.2113
Problem:    &quot;<A HREF="helphelp.html#:help">:help</A> expr-!~?&quot; only works after searching.
Solution:   Escape &quot;<A HREF="change.html#~">~</A>&quot; after &quot;expr-&quot;. (closes #5015)
Files:	    src/ex_cmds.c, src/testdir/test_help.vim

Patch 8.1.2114
Problem:    When a <A HREF="popup.html#popup">popup</A> is closed with <A HREF="pattern.html#CTRL-C">CTRL-C</A> the callback aborts.
Solution:   Reset got_int when invoking the callback. (closes #5008)
Files:	    src/popupwin.c

Patch 8.1.2115
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: shell commands fail if &amp;shell contains a space.
Solution:   Use <A HREF="quotes.html#quotes">quotes</A> instead of escaping. (closes #4920)
Files:	    src/option.c, src/os_win32.c, src/testdir/test_startup.vim,
            src/testdir/test_system.vim, src/vimrun.c,

Patch 8.1.2116
Problem:    No check for out of memory.
Solution:   Check for NULL pointer.
Files:	    src/option.c

Patch 8.1.2117
Problem:    CursorLine highlight used while <A HREF="options.html#'cursorline'">'cursorline'</A> is off.
Solution:   Check <A HREF="options.html#'cursorline'">'cursorline'</A> is set. (closes #5017)
Files:	    src/drawline.c, src/testdir/test_cursorline.vim

Patch 8.1.2118
Problem:    Termcodes test fails when $TERM is &quot;dumb&quot;.
Solution:   Skip the test. (James McCoy, closes #5019)
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.2119
Problem:    memory access error for empty <A HREF="eval.html#string">string</A> when <A HREF="options.html#'encoding'">'encoding'</A> is a single
            byte encoding.
Solution:   Check for empty <A HREF="eval.html#string">string</A> when getting the length. (Dominique Pelle,
            closes #5021, closes #5007)
Files:	    src/macros.h

Patch 8.1.2120
Problem:    Some MB_ macros are more complicated than necessary. (Dominique
            Pelle)
Solution:   Simplify the macros.  Expand inline.
Files:	    src/macros.h, src/beval.c, src/diff.c src/eval.c src/evalfunc.c
            src/ex_getln.c, src/filepath.c, src/findfile.c, src/getchar.c,
            src/highlight.c, src/ops.c, src/os_mswin.c, src/popupmenu.c,
            src/search.c, src/spell.c, src/spellsuggest.c, src/terminal.c

Patch 8.1.2121
Problem:    Mode is not updated when switching to <A HREF="terminal.html#terminal">terminal</A> in <A HREF="insert.html#Insert">Insert</A> mode.
Solution:   Redraw the mode when entering a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A>. (Jason Franklin)
Files:	    src/window.c, src/testdir/test_window_cmd.vim

Patch 8.1.2122 (after 8.1.2121)
Problem:    Cannot build without <A HREF="terminal.html#terminal">terminal</A> feature.
Solution:   Add #ifdef.
Files:	    src/window.c

Patch 8.1.2123
Problem:    Parsing CSI sequence is messy.
Solution:   Generalize parsing a CSI sequence.
Files:	    src/term.c

Patch 8.1.2124
Problem:    Ruler is not updated if <A HREF="builtin.html#win_execute()">win_execute()</A> moves cursor.
Solution:   Update the status line. (closes #5022)
Files:	    src/evalwindow.c, src/testdir/test_execute_func.vim

Patch 8.1.2125
Problem:    Fnamemodify() fails when <A HREF="repeat.html#repeating">repeating</A> <A HREF="editing.html#:e">:e</A>.
Solution:   Do not go before the tail. (Rob Pilling, closes #5024)
Files:	    src/filepath.c, src/testdir/test_fnamemodify.vim

Patch 8.1.2126
Problem:    Viminfo not sufficiently tested.
Solution:   Add more test cases.  Clean up comments. (Yegappan Lakshmanan,
            closes #5032)
Files:	    src/search.c, src/structs.h, src/testdir/test_viminfo.vim,
            src/viminfo.c

Patch 8.1.2127
Problem:    The indent.c file is a bit big.
Solution:   Move C-indent code to a new cindent.c file.  Move other
            indent-related code to indent.c. (Yegappan Lakshmanan,
            closes #5031)
Files:	    Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/change.c, src/cindent.c, src/edit.c, src/evalfunc.c,
            src/ex_cmds.c, src/globals.h, src/indent.c, src/misc1.c,
            src/ops.c, src/proto.h, src/proto/cindent.pro, src/proto/edit.pro,
            src/proto/ex_cmds.pro, src/proto/indent.pro, src/proto/misc1.pro,
            src/proto/ops.pro, src/userfunc.c

Patch 8.1.2128
Problem:    Renamed libvterm sources makes merging difficult.
Solution:   Rename back to the original name and only rename the .o files.
            Also clean the libvterm build artifacts. (James McCoy,
            closes #5027)
Files:	    src/libvterm/src/termmouse.c, src/libvterm/src/mouse.c,
	    src/libvterm/src/termscreen.c, src/libvterm/src/screen.c,
            src/Makefile, src/configure.ac, src/auto/configure,
            src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.1.2129
Problem:    Using hard coded executable path in test.
Solution:   Use <A HREF="eval.html#v:progpath">v:progpath</A>. Use <A HREF="starting.html#$VIMRUNTIME">$VIMRUNTIME</A> instead of &quot;runtime&quot;. (James
            McCoy, closes #5025)
Files:	    src/testdir/test49.vim, src/testdir/test_compiler.vim,
            src/testdir/test_spell.vim

Patch 8.1.2130 (after 8.1.2128)
Problem:    MSVC build fails.
Solution:   Add the source file name explicitly.
Files:	    src/Make_mvc.mak

Patch 8.1.2131 (after 8.1.2129)
Problem:    MSVC tests fail.
Solution:   <A HREF="insert.html#Replace">Replace</A> backslashes with slashes.
Files:	    src/testdir/test_compiler.vim, src/testdir/test_spell.vim

Patch 8.1.2132
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: screen mess when not recognizing insider build.
Solution:   Always move the cursor to the first column first. (Nobuhiro
            Takasaki, closes #5036)
Files:	    src/os_win32.c

Patch 8.1.2133
Problem:    Some tests fail when run <A HREF="motion.html#as">as</A> root.
Solution:   Add CheckNotRoot and use <A HREF="motion.html#it">it</A>. (James McCoy, closes #5020)
Files:	    src/testdir/check.vim, src/testdir/shared.vim,
            src/testdir/test_rename.vim, src/testdir/test_swap.vim,
            src/testdir/test_terminal.vim, src/testdir/test_viminfo.vim

Patch 8.1.2134
Problem:    Modifier keys are not always recognized.
Solution:   Handle key codes generated by xterm with <A HREF="map.html#modifyOtherKeys">modifyOtherKeys</A> set.
            Add this to libvterm so we can debug <A HREF="motion.html#it">it</A>.
Files:	    src/term.c, src/getchar.c, src/libvterm/src/vterm_internal.h,
            src/libvterm/src/state.c, src/libvterm/src/keyboard.c,
            src/libvterm/include/vterm.h, src/globals.h, src/terminal.c

Patch 8.1.2135
Problem:    With <A HREF="map.html#modifyOtherKeys">modifyOtherKeys</A> Alt-a does not work properly.
Solution:   Remove the ALT modifier.  Get <A HREF="mbyte.html#multibyte">multibyte</A> after applying ALT.
Files:	    src/getchar.c

Patch 8.1.2136
Problem:    using freed memory with autocmd from fuzzer. (Dhiraj Mishra,
            Dominique Pelle)
Solution:   Avoid using &quot;wp&quot; after <A HREF="autocmd.html#autocommands">autocommands</A>. (closes #5041)
Files:	    src/window.c, src/testdir/test_autocmd.vim

Patch 8.1.2137
Problem:    Parsing the termresponse is not tested.
Solution:   Add a first test. (related to #5042)
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.2138
Problem:    Including the build number in the <A HREF="os_win32.html#Win32">Win32</A> binary is confusing.
Solution:   Only use the patchlevel.
Files:	    src/vim.rc

Patch 8.1.2139
Problem:    The <A HREF="map.html#modifyOtherKeys">modifyOtherKeys</A> codes are not tested.
Solution:   Add a test <A HREF="change.html#case">case</A>.
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.2140
Problem:    &quot;<A HREF="motion.html#gk">gk</A>&quot; and &quot;<A HREF="motion.html#gj">gj</A>&quot; <A HREF="diff.html#do">do</A> not work correctly in number column.
Solution:   Allow for a negative &quot;curswant&quot;. (Zach Wegner, closes #4969)
Files:	    src/testdir/test_normal.vim, src/misc2.c, src/normal.c

Patch 8.1.2141
Problem:    <A HREF="tagsrch.html#:tselect">:tselect</A> has an extra <A HREF="message.html#hit-enter">hit-enter</A> prompt.
Solution:   Do not set need_wait_return when only moving the cursor.
            (closes #5040)
Files:	    src/message.c, src/testdir/test_tagjump.vim,
            src/testdir/dumps/Test_tselect_1.dump

Patch 8.1.2142
Problem:    Some key mappings <A HREF="diff.html#do">do</A> not work with <A HREF="map.html#modifyOtherKeys">modifyOtherKeys</A>.
Solution:   Remove the Shift modifier if <A HREF="motion.html#it">it</A> is already included in the key.
Files:	    src/term.c, src/testdir/test_termcodes.vim

Patch 8.1.2143
Problem:    Cannot see each command even when <A HREF="options.html#'verbose'">'verbose'</A> is set.
Solution:   <A HREF="eval.html#List">List</A> each command when <A HREF="options.html#'verbose'">'verbose'</A> is at least 16.
Files:	    src/ex_docmd.c src/testdir/test_tagjump.vim,
            src/testdir/test_cmdline.vim,
            src/testdir/dumps/Test_verbose_option_1.dump

Patch 8.1.2144
Problem:    Side effects when using <A HREF="term.html#t_ti">t_ti</A> to enable <A HREF="map.html#modifyOtherKeys">modifyOtherKeys</A>.
Solution:   Add <A HREF="term.html#t_TI">t_TI</A> and <A HREF="term.html#t_TE">t_TE</A>.
Files:	    runtime/doc/term.txt, src/term.c, src/optiondefs.h, src/term.h,

Patch 8.1.2145
Problem:    Cannot map &lt;C-H&gt; when <A HREF="map.html#modifyOtherKeys">modifyOtherKeys</A> is enabled.
Solution:   Add the &lt;C-H&gt; <A HREF="map.html#mapping">mapping</A> <A HREF="if_cscop.html#twice">twice</A>, both with modifier and <A HREF="motion.html#as">as</A> 0x08.  Use
            only the first one when <A HREF="map.html#modifyOtherKeys">modifyOtherKeys</A> has been detected.
Files:	    src/term.c, src/eval.c, src/getchar.c, src/globals.h,
            src/gui_mac.c, src/gui_w32.c, src/highlight.c, src/if_ole.cpp,
            src/main.c, src/map.c, src/menu.c, src/misc2.c, src/option.c,
            src/proto/misc2.pro, src/proto/term.pro,
            src/testdir/test_termcodes.vim, src/structs.h, src/terminal.c,
            src/usercmd.c, src/vim.h

Patch 8.1.2146 (after 8.1.2145)
Problem:    Build failure.
Solution:   Include omitted changed file.
Files:	    src/optionstr.c

Patch 8.1.2147
Problem:    Crash when allocating memory fails. (Zu-Ming Jiang)
Solution:   Check that <A HREF="options.html#'spellcapcheck'">'spellcapcheck'</A> is not NULL. (closes #5048)
Files:	    src/spell.c

Patch 8.1.2148
Problem:    No test for right click extending <A HREF="visual.html#Visual">Visual</A> area.
Solution:   Add a test. (Dominique Pelle, closes #5018)
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.2149
Problem:    Crash when running out of memory very early.
Solution:   Do not use IObuff when it's NULL. (closes #5052)
Files:	    src/message.c

Patch 8.1.2150
Problem:    No test for <A HREF="options.html#'ttymouse'">'ttymouse'</A> set from xterm version response.
Solution:   Test the three possible values.
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.2151
Problem:    State test is a bit flaky.
Solution:   Add to the <A HREF="eval.html#list">list</A> of flaky tests.
Files:	    src/testdir/runtest.vim

Patch 8.1.2152
Problem:    Problems navigating <A HREF="tagsrch.html#tags">tags</A> file on macOS Catalina.
Solution:   Use fseek instead of lseek. (John Lamb, fixes #5061)
Files:	    src/tag.c

Patch 8.1.2153
Problem:    Combining text property and <A HREF="syntax.html#syntax">syntax</A> highlight is wrong. (Nick
            Jensen)
Solution:   Compute the <A HREF="syntax.html#syntax">syntax</A> highlight attribute much earlier.
            (closes #5057)
Files:	    src/drawline.c, src/testdir/test_textprop.vim,
            src/testdir/dumps/Test_textprop_syn_1.dump

Patch 8.1.2154
Problem:    <A HREF="quickfix.html#Quickfix">Quickfix</A> <A HREF="windows.html#window">window</A> height wrong when there is a tabline. (Daniel
            Hahler)
Solution:   Take the tabline height into account. (closes #5058)
Files:	    src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.2155
Problem:    In a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> <A HREF="options.html#'cursorlineopt'">'cursorlineopt'</A> does not work properly.
Solution:   Check the <A HREF="options.html#'cursorlineopt'">'cursorlineopt'</A> value. (closes #5055)
Files:	    src/drawline.c, src/testdir/test_terminal.vim,
            src/testdir/dumps/Test_terminal_normal_1.dump,
            src/testdir/dumps/Test_terminal_normal_2.dump,
            src/testdir/dumps/Test_terminal_normal_3.dump

Patch 8.1.2156
Problem:    First character after <A HREF="intro.html#Tab">Tab</A> is not highlighted.
Solution:   Remember the <A HREF="syntax.html#syntax">syntax</A> attribute for a column.
Files:	    src/drawline.c, src/testdir/test_syntax.vim,
            src/testdir/dumps/Test_syntax_c_01.dump

Patch 8.1.2157
Problem:    Libvterm source files missing from <A HREF="intro.html#distribution">distribution</A>.
Solution:   Rename source files. (closes #5065)
Files:	    Filelist

Patch 8.1.2158
Problem:    Terminal attributes missing in Terminal-normal mode.
Solution:   Use &quot;syntax_attr&quot;.
Files:	    src/drawline.c, src/testdir/test_terminal.vim,
            src/testdir/dumps/Test_terminal_dumpload.dump

Patch 8.1.2159
Problem:    Some mappings are listed <A HREF="if_cscop.html#twice">twice</A>.
Solution:   Skip mappings duplicated for <A HREF="map.html#modifyOtherKeys">modifyOtherKeys</A>. (closes #5064)
Files:	    src/map.c, src/testdir/test_mapping.vim

Patch 8.1.2160
Problem:    Cannot build with <A HREF="various.html#+syntax">+syntax</A> but without <A HREF="various.html#+terminal">+terminal</A>.
Solution:   Add #ifdef.
Files:	    src/drawline.c

Patch 8.1.2161
Problem:    Mapping test fails.
Solution:   Run the test separately.
Files:	    src/testdir/Make_all.mak, src/testdir/test_alot.vim

Patch 8.1.2162
Problem:    Popup resize test is flaky. (Christian Brabandt)
Solution:   Add the function to the <A HREF="eval.html#list">list</A> of flaky tests.
Files:	    src/testdir/runtest.vim

Patch 8.1.2163
Problem:    Cannot build with <A HREF="various.html#+spell">+spell</A> but without <A HREF="various.html#+syntax">+syntax</A>.
Solution:   Add #ifdef. (John Marriott)
Files:	    src/drawline.c

Patch 8.1.2164
Problem:    Stuck when using &quot;<A HREF="motion.html#j">j</A>&quot; in a <A HREF="popup.html#popupwin">popupwin</A> with popup_filter_menu if a
            line wraps.
Solution:   Check the cursor line is visible. (closes #4577)
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_wrap_1.dump,
            src/testdir/dumps/Test_popupwin_wrap_2.dump

Patch 8.1.2165
Problem:    Mapping test fails on <A HREF="os_mac.html#Mac">Mac</A>.
Solution:   Remove the default <A HREF="os_mac.html#Mac">Mac</A> <A HREF="map.html#mapping">mapping</A>.
Files:	    src/testdir/test_mapping.vim

Patch 8.1.2166
Problem:    Rubyeval() not tested <A HREF="motion.html#as">as</A> a <A HREF="eval.html#method">method</A>.
Solution:   Change a test <A HREF="change.html#case">case</A>.
Files:	    src/testdir/test_ruby.vim

Patch 8.1.2167
Problem:    Mapping test fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Remove all the existing <A HREF="insert.html#Insert-mode">Insert-mode</A> mappings.
Files:	    src/testdir/test_mapping.vim

Patch 8.1.2168
Problem:    Heredoc assignment not skipped in if block.
Solution:   Check if &quot;skip&quot; is set. (closes #5063)
Files:	    src/evalvars.c, src/testdir/test_let.vim

Patch 8.1.2169
Problem:    Terminal flags are never reset.
Solution:   Reset the flags when setting <A HREF="options.html#'term'">'term'</A>.
Files:	    src/term.c, src/testdir/test_termcodes.vim

Patch 8.1.2170 (after 8.1.2169)
Problem:    Cannot build without the <A HREF="various.html#+termresponse">+termresponse</A> feature.
Solution:   Add #ifdef.
Files:	    src/term.c

Patch 8.1.2171
Problem:    Mouse support not always available.
Solution:   Enable mouse support also in tiny version.  Do not define
            FEAT_MOUSE_XTERM on <A HREF="os_win32.html#MS-Windows">MS-Windows</A> (didn't really work).
Files:	    src/feature.h, src/edit.c, src/evalfunc.c, src/ex_getln.c,
            src/getchar.c, src/message.c, src/misc1.c, src/mouse.c,
            src/move.c, src/normal.c, src/ops.c, src/option.c,
            src/optionstr.c, src/os_unix.c, src/os_win32.c, src/register.c,
            src/term.c, src/testing.c, src/window.c, src/globals.h,
            src/option.h, src/optiondefs.h, src/os_win32.h, src/vim.h,
            src/version.c

Patch 8.1.2172
Problem:    Spell highlight is wrong at start of the line.
Solution:   Fix setting the &quot;<A HREF="visual.html#v">v</A>&quot; variable. (closes #5078)
Files:	    src/drawline.c, src/testdir/test_spell.vim,
            src/testdir/dumps/Test_spell_1.dump

Patch 8.1.2173
Problem:    Searchit() has too many arguments.
Solution:   Move optional arguments to a struct.  Add the &quot;wrapped&quot; argument.
Files:	    src/search.c, src/proto/search.pro, src/structs.h, src/evalfunc.c,
            src/ex_docmd.c, src/gui.c, src/quickfix.c, src/spell.c, src/tag.c,
            src/ex_getln.c, src/insexpand.c, src/normal.c

Patch 8.1.2174
Problem:    Screen not recognized <A HREF="motion.html#as">as</A> supporting &quot;sgr&quot; mouse codes.
Solution:   Recognize screen 4.7. (Jordan Christiansen, closes #5042)
Files:	    src/term.c, src/testdir/test_termcodes.vim

Patch 8.1.2175
Problem:    Meson files are not recognized.
Solution:   Add the meson <A HREF="filetype.html#filetype">filetype</A>. (Liam Beguin, Nirbheek Chauhan,
            closes #5056)  Also recognize hollywood.
Files:	    runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.1.2176
Problem:    <A HREF="autocmd.html#Syntax">Syntax</A> attributes not combined with <A HREF="visual.html#Visual">Visual</A> highlighting. (Arseny
            Nasokin)
Solution:   Combine the attributes. (closes #5083)
Files:	    src/drawline.c, src/testdir/test_syntax.vim,
            src/testdir/dumps/Test_syntax_c_01.dump

Patch 8.1.2177
Problem:    Dart files are not recognized.
Solution:   Add a <A HREF="filetype.html#filetype">filetype</A> rule. (Eugene Ciurana, closes #5087)
Files:	    runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.1.2178
Problem:    Accessing uninitialized memory in test.
Solution:   Check if there was a match before using the match position.
            (Dominique Pelle, closes #5088)
Files:	    src/search.c

Patch 8.1.2179
Problem:    Pressing &quot;<A HREF="repeat.html#q">q</A>&quot; at the more prompt doesn't stop <A HREF="if_pyth.html#Python">Python</A> output. (Daniel
            Hahler)
Solution:   Check for got_int in writer(). (closes #5053)
            Also <A HREF="diff.html#do">do</A> this for <A HREF="if_lua.html#Lua">Lua</A>.
Files:	    src/if_py_both.h, src/if_lua.c

Patch 8.1.2180
Problem:    Error <A HREF="message.html#E303">E303</A> is not useful when <A HREF="options.html#'directory'">'directory'</A> is empty.
Solution:   Skip the error message. (Daniel Hahler, #5067)
Files:	    src/memline.c, src/testdir/test_recover.vim,
            runtime/doc/options.txt, runtime/doc/message.txt

Patch 8.1.2181
Problem:    Highlighting wrong when item follows <A HREF="intro.html#tab">tab</A>.
Solution:   Don't use <A HREF="syntax.html#syntax">syntax</A> attribute when n_extra is non-zero.
            (Christian Brabandt, closes #5076)
Files:	    src/drawline.c, src/feature.h,
            src/testdir/dumps/Test_syntax_c_01.dump

Patch 8.1.2182
Problem:    Test42 seen <A HREF="motion.html#as">as</A> binary by git <A HREF="diff.html#diff">diff</A>.
Solution:   Add .gitattributes file.  Make explicit that <A HREF="options.html#'cpo'">'cpo'</A> does not
            contain '<A HREF="change.html#S">S</A>'. (Daniel Hahler, closes #5072)
Files:	    .gitattributes, Filelist, src/testdir/test42.in

Patch 8.1.2183
Problem:    Running a test is a bit <A HREF="starting.html#verbose">verbose</A>.
Solution:   Silence some <A HREF="message.html#messages">messages</A>. (Daniel Hahler, closes #5070)
Files:	    src/testdir/Makefile

Patch 8.1.2184
Problem:    Option context is not copied when splitting a <A HREF="windows.html#window">window</A>. (Daniel
            Hahler)
Solution:   Copy the option context, so that &quot;<A HREF="various.html#:verbose">:verbose</A> set&quot; works.
            (closes #5066)
Files:	    src/option.c, src/testdir/test_options.vim

Patch 8.1.2185 (after 8.1.2181)
Problem:    <A HREF="autocmd.html#Syntax">Syntax</A> test fails.
Solution:   Add missing file patch.
Files:	    src/testdir/test_syntax.vim

Patch 8.1.2186 (after 8.1.2184)
Problem:    Cannot build without the <A HREF="various.html#+eval">+eval</A> feature.
Solution:   Move line inside #ifdef.
Files:	    src/option.c

Patch 8.1.2187
Problem:    Error for bad <A HREF="pattern.html#regexp">regexp</A> even though <A HREF="pattern.html#regexp">regexp</A> is not used when <A HREF="editing.html#writing">writing</A>
            a file. (Arseny Nasokin)
Solution:   Ignore <A HREF="pattern.html#regexp">regexp</A> <A HREF="message.html#errors">errors</A>. (closes #5059)
Files:	    src/cmdexpand.c, src/ex_docmd.c, src/testdir/test_writefile.vim

Patch 8.1.2188 (after 8.1.2187)
Problem:    Build error for missing define.
Solution:   Add missing change.
Files:	    src/vim.h

Patch 8.1.2189
Problem:    <A HREF="autocmd.html#Syntax">Syntax</A> highlighting wrong for <A HREF="intro.html#tab">tab</A>.
Solution:   Don't clear <A HREF="syntax.html#syntax">syntax</A> attribute n_extra is non-zero.
Files:	    src/drawline.c, src/testdir/test_syntax.vim,
            src/testdir/dumps/Test_syntax_c_01.dump

Patch 8.1.2190
Problem:    <A HREF="autocmd.html#Syntax">Syntax</A> test fails on <A HREF="os_mac.html#Mac">Mac</A>.
Solution:   Limit the <A HREF="windows.html#window">window</A> size to 20 rows.
Files:	    src/testdir/test_syntax.vim,
            src/testdir/dumps/Test_syntax_c_01.dump

Patch 8.1.2191
Problem:    When using <A HREF="map.html#modifyOtherKeys">modifyOtherKeys</A> <A HREF="change.html#CTRL-X">CTRL-X</A> mode may not work.
Solution:   Recognize a <A HREF="intro.html#control">control</A> character also in the form with a modifier.
Files:	    src/getchar.c

Patch 8.1.2192
Problem:    Cannot easily fill the info <A HREF="popup.html#popup">popup</A> asynchronously.
Solution:   Add the &quot;popuphidden&quot; value to <A HREF="options.html#'completeopt'">'completeopt'</A>. (closes #4924)
Files:	    src/popupmenu.c, src/proto/popupmenu.pro, src/popupwin.c,
            src/proto/popupwin.pro, src/vim.h, runtime/doc/options.txt,
            runtime/doc/insert.txt, src/ex_cmds.c, src/proto/ex_cmds.pro,
            src/optionstr.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_infopopup_hidden_1.dump,
            src/testdir/dumps/Test_popupwin_infopopup_hidden_2.dump,
            src/testdir/dumps/Test_popupwin_infopopup_hidden_3.dump

Patch 8.1.2193
Problem:    Popup_setoptions(popup_getoptions()) does not work.
Solution:   Also accept a <A HREF="eval.html#list">list</A> with three entries for &quot;moved&quot; and
            &quot;mousemoved&quot;. (closes #5081)
Files:	    runtime/doc/popup.txt, src/popupwin.c,
            src/testdir/test_popupwin.vim

Patch 8.1.2194
Problem:    ModifyOtherKeys is not enabled by default.
Solution:   Add <A HREF="term.html#t_TI">t_TI</A> and <A HREF="term.html#t_TE">t_TE</A> to the builtin xterm <A HREF="term.html#termcap">termcap</A>.
Files:	    runtime/doc/map.txt, src/term.c

Patch 8.1.2195
Problem:    Vim does not exit when closing a <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> and <A HREF="motion.html#it">it</A> is the
            last <A HREF="windows.html#window">window</A>.
Solution:   Exit Vim if the closed <A HREF="terminal.html#terminal">terminal</A> <A HREF="windows.html#window">window</A> is the last one.
            (closes #4539)
Files:	    runtime/doc/terminal.txt, src/terminal.c, src/ex_docmd.c,
            src/proto/ex_docmd.pro, src/testdir/test_terminal.vim

Patch 8.1.2196
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: running tests with MSVC lacks updates.
Solution:   Improve running individual tests on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>. (closes #4922)
Files:	    src/Make_mvc.mak, src/testdir/Make_dos.mak

Patch 8.1.2197
Problem:    <A HREF="autocmd.html#ExitPre">ExitPre</A> <A HREF="autocmd.html#autocommand">autocommand</A> may cause accessing freed memory.
Solution:   Check the <A HREF="windows.html#window">window</A> pointer is still valid. (closes #5093)
Files:	    src/testdir/test_exit.vim, src/ex_docmd.c

Patch 8.1.2198
Problem:    Crash when using <A HREF="change.html#:center">:center</A> in <A HREF="autocmd.html#autocommand">autocommand</A>.
Solution:   Bail out early for an empty line. (Dominique Pelle, closes #5095)
Files:	    src/ex_cmds.c, src/testdir/test_textformat.vim

Patch 8.1.2199
Problem:    Build failure when using normal features without <A HREF="gui.html#GUI">GUI</A> and EXITFREE
            defined.
Solution:   Add #ifdef. (Dominique Pelle, closes #5106)
Files:	    src/scriptfile.c

Patch 8.1.2200
Problem:    Crash when memory allocation fails.
Solution:   Check for NULL curwin and curbuf. (Christian Brabandt,
            closes #4839)
Files:	    src/getchar.c

Patch 8.1.2201
Problem:    Cannot build with dynamically linked <A HREF="if_pyth.html#Python">Python</A> 3.8.
Solution:   Implement py3__Py_DECREF() and py3__Py_XDECREF(). (Ken Takata,
            closes #4080)
Files:	    src/if_python3.c

Patch 8.1.2202
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: build failure with <A HREF="gui.html#GUI">GUI</A> and small features.
Solution:   Add #ifdef. (Michael Soyka, closes #5097)
Files:	    src/gui_w32.c

Patch 8.1.2203
Problem:    Running libvterm tests without the <A HREF="various.html#+terminal">+terminal</A> feature.
Solution:   Only add the libvterm test target when building libvterm.
Files:	    src/configure.ac, src/auto/configure, src/config.mk.in,
            src/Makefile

Patch 8.1.2204
Problem:    Crash on exit when closing terminals. (Corey Hickey)
Solution:   Actually wait for the <A HREF="channel.html#job">job</A> to stop. (closes #5100)
Files:	    src/terminal.c

Patch 8.1.2205
Problem:    Sign entry structure has confusing name.
Solution:   Rename signlist_T to sign_entry_T and prefix se_ to the fields.
Files:	    src/structs.h, src/netbeans.c, src/sign.c, src/globals.h,
            src/drawline.c

Patch 8.1.2206
Problem:    No test for fixed issue #3893.
Solution:   Add a test. (Christian Brabandt, #3893)
Files:	    src/testdir/test_display.vim,
            src/testdir/dumps/Test_winline_rnu.dump

Patch 8.1.2207
Problem:    &quot;<A HREF="visual.html#gn">gn</A>&quot; doesn't work quite right. (Jaehwang Jerry Jung)
Solution:   Improve and simplify the search logic. (Christian Brabandt,
            closes #5103, closes #5075)
Files:	    src/search.c, src/testdir/test_gn.vim

Patch 8.1.2208
Problem:    <A HREF="os_unix.html#Unix">Unix</A>: Tabs in output might be expanded to spaces.
Solution:   Reset the XTABS flag. (closes #5108)
Files:	    src/os_unix.c

Patch 8.1.2209
Problem:    LF in <A HREF="intro.html#escape">escape</A> codes may be expanded to CR-LF.
Solution:   Do not expand LF in <A HREF="intro.html#escape">escape</A> codes to CR-LF. (closes #5107)
Files:	    src/term.c

Patch 8.1.2210
Problem:    Using negative offset for <A HREF="popup.html#popup_create()">popup_create()</A> does not work.
Solution:   Use -1 instead of zero. (closes #5111)
Files:	    src/popupwin.c, src/popupwin.vim, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_corners.dump

Patch 8.1.2211
Problem:    Listener callback &quot;added&quot; argument is not the total. (Andy
            Massimino)
Solution:   Compute the total. (closes #5105)
Files:	    src/change.c, src/testdir/test_listener.vim

Patch 8.1.2212
Problem:    Cannot see the selection type in <A HREF="change.html#:reg">:reg</A> output. (Ayberk Aydn)
Solution:   Add c/l/b. (Christian Brabandt, closes #5110, closes #4546)
Files:	    runtime/doc/change.txt, src/register.c,
            src/testdir/test_registers.vim

Patch 8.1.2213
Problem:    Popup_textprop tests fail.
Solution:   Adjust the column and line positioning.
Files:	    src/popupwin.c

Patch 8.1.2214
Problem:    Too much is redrawn when <A HREF="options.html#'cursorline'">'cursorline'</A> is set.
Solution:   Don't <A HREF="diff.html#do">do</A> a complete redraw. (closes #5079)
Files:	    src/main.c, src/change.c, src/drawscreen.c,
            src/testdir/dumps/Test_Xcursorline_13.dump,
            src/testdir/dumps/Test_Xcursorline_14.dump,
            src/testdir/dumps/Test_Xcursorline_15.dump,
            src/testdir/dumps/Test_Xcursorline_16.dump,
            src/testdir/dumps/Test_Xcursorline_17.dump,
            src/testdir/dumps/Test_Xcursorline_18.dump

Patch 8.1.2215
Problem:    Unreachable code in adjusting text prop columns.
Solution:   Remove the code. (Christian Brabandt)
Files:	    src/textprop.c

Patch 8.1.2216
Problem:    Text property in wrong place after <A HREF="change.html#:substitute">:substitute</A>.
Solution:   Pass the new column instead of the old one. (Christian Brabandt,
            closes #4427)
Files:	    src/ex_cmds.c, src/testdir/test_textprop.vim

Patch 8.1.2217
Problem:    Compiler warning for unused variable.
Solution:   Move variable inside #ifdef. (John Marriott)
Files:	    src/ex_cmds.c

Patch 8.1.2218
Problem:    &quot;<A HREF="visual.html#gN">gN</A>&quot; is off by one in <A HREF="visual.html#Visual">Visual</A> mode.
Solution:   Check moving forward. (Christian Brabandt, #5075)
Files:	    src/search.c, src/testdir/test_gn.vim

Patch 8.1.2219
Problem:    No <A HREF="autocmd.html#autocommand">autocommand</A> for open <A HREF="windows.html#window">window</A> with <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Add <A HREF="autocmd.html#TerminalWinOpen">TerminalWinOpen</A>. (Christian Brabandt)
Files:	    runtime/doc/autocmd.txt, src/autocmd.c, src/terminal.c,
            src/testdir/test_terminal.vim, src/vim.h

Patch 8.1.2220
Problem:    <A HREF="quickfix.html#:cfile">:cfile</A> does not abort like other <A HREF="quickfix.html#quickfix">quickfix</A> commands.
Solution:   Abort when desired. Add tests for aborting. (Yegappan Lakshmanan,
            closes #5121)
Files:	    src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.2221
Problem:    Cannot <A HREF="change.html#filter">filter</A> :disp output.
Solution:   Support filtering :disp output. (Andy Massimino, closes #5117)
Files:	    runtime/doc/various.txt, src/register.c,
            src/testdir/test_filter_cmd.vim

Patch 8.1.2222
Problem:    Accessing invalid memory. (Dominique Pelle)
Solution:   Reset highlight_match every time.  (closes #5125)
Files:	    src/ex_getln.c

Patch 8.1.2223
Problem:    Cannot see what buffer an ml_get error is for.
Solution:   Add the buffer number and name in the message
Files:	    src/memline.c

Patch 8.1.2224
Problem:    Cannot build <A HREF="os_amiga.html#Amiga">Amiga</A> version.
Solution:   Add dummy mch_setmouse(). (Ola Sder, closes #5126)
Files:	    src/os_amiga.c, src/proto/os_amiga.pro

Patch 8.1.2225
Problem:    The &quot;last used&quot; info of a buffer is under used.
Solution:   Add &quot;lastused&quot; to <A HREF="builtin.html#getbufinfo()">getbufinfo()</A>. <A HREF="eval.html#List">List</A> <A HREF="windows.html#buffers">buffers</A> sorted by last-used
            field. (Andy Massimino, closes #4722)
Files:	    runtime/doc/eval.txt, runtime/doc/options.txt,
            runtime/doc/windows.txt, src/buffer.c, src/evalbuffer.c,
            src/ex_getln.c, src/misc1.c, src/option.c, src/option.h,
            src/proto/misc1.pro, src/proto/viminfo.pro,
            src/testdir/test_bufwintabinfo.vim, src/testdir/test_cmdline.vim,
            src/testdir/test_excmd.vim, src/undo.c, src/vim.h, src/viminfo.c

Patch 8.1.2226
Problem:    Cannot use system copy/paste in non-xterm terminals.
Solution:   Instead of setting <A HREF="options.html#'mouse'">'mouse'</A> to &quot;<A HREF="insert.html#a">a</A>&quot; set <A HREF="motion.html#it">it</A> to &quot;nvi&quot; in <A HREF="starting.html#defaults.vim">defaults.vim</A>.
Files:	    runtime/defaults.vim, runtime/doc/term.txt,
            runtime/doc/options.txt

Patch 8.1.2227
Problem:    Layout wrong if <A HREF="options.html#'lines'">'lines'</A> changes while cmdline <A HREF="windows.html#window">window</A> is open.
Solution:   Do not restore the <A HREF="windows.html#window">window</A> layout if <A HREF="options.html#'lines'">'lines'</A> changed.
            (closes #5130)
Files:	    src/window.c, src/testdir/test_cmdline.vim,
            src/testdir/dumps/Test_cmdwin_restore_1.dump,
            src/testdir/dumps/Test_cmdwin_restore_2.dump,
            src/testdir/dumps/Test_cmdwin_restore_3.dump

Patch 8.1.2228
Problem:    <A HREF="builtin.html#screenpos()">screenpos()</A> returns wrong values when <A HREF="options.html#'number'">'number'</A> is set. (Ben
            Jackson)
Solution:   Compare the column with the <A HREF="windows.html#window">window</A> width. (closes #5133)
Files:	    src/move.c, src/testdir/test_cursor_func.vim

Patch 8.1.2229
Problem:    Cannot color number column above/below cursor differently.
Solution:   Add LineNrAbove and LineNrBelow. (Shaun Brady, closes #624)
Files:	    runtime/doc/syntax.txt, runtime/doc/options.txt, src/optiondefs.h,
            src/drawline.c, src/vim.h, src/testdir/test_number.vim,
            src/testdir/dumps/Test_relnr_colors_1.dump,
            src/testdir/dumps/Test_relnr_colors_2.dump,
            src/testdir/dumps/Test_relnr_colors_3.dump,
            src/testdir/dumps/Test_relnr_colors_4.dump

Patch 8.1.2230
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: <A HREF="testing.html#testing">testing</A> external commands can be improved.
Solution:   Adjust tests, remove duplicate test. (closes #4928)
Files:	    src/testdir/test_normal.vim, src/testdir/test_system.vim,
            src/testdir/test_terminal.vim, src/testdir/test_undo.vim

Patch 8.1.2231
Problem:    Not <A HREF="starting.html#easy">easy</A> to move to the middle of a text line.
Solution:   Add the <A HREF="motion.html#gM">gM</A> command. (Yasuhiro Matsumoto, closes #2070)
Files:	    runtime/doc/index.txt, runtime/doc/motion.txt,
            runtime/doc/quickref.txt, runtime/doc/usr_25.txt, src/normal.c,
            src/testdir/test_normal.vim

Patch 8.1.2232
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: compiler warning for int size.
Solution:   Add type cast. (Mike Williams)
Files:	    src/normal.c

Patch 8.1.2233
Problem:    Cannot get the Vim command line arguments.
Solution:   Add <A HREF="eval.html#v:argv">v:argv</A>. (Dmitri Vereshchagin, closes #1322)
Files:	    runtime/doc/eval.txt, src/evalvars.c, src/vim.h,
            src/proto/evalvars.pro, src/main.c, src/testdir/test_startup.vim

Patch 8.1.2234
Problem:    get_short_pathname() fails depending on encoding.
Solution:   Use the wide version of the library function. (closes #5129)
Files:	    src/filepath.c, src/testdir/test_shortpathname.vim

Patch 8.1.2235
Problem:    &quot;<A HREF="change.html#C">C</A>&quot; with <A HREF="options.html#'virtualedit'">'virtualedit'</A> set does not include <A HREF="mbyte.html#multibyte">multibyte</A> char.
Solution:   Include the whole <A HREF="mbyte.html#multibyte">multibyte</A> char. (Nobuhiro Takasaki,
            closes #5152)
Files:	    src/ops.c, src/testdir/test_virtualedit.vim

Patch 8.1.2236
Problem:    Ml_get error if <A HREF="pattern.html#pattern">pattern</A> matches beyond last line.
Solution:   Adjust position if needed. (Christian Brabandt, closes #5139)
Files:	    src/ex_cmds.c, src/testdir/test_substitute.vim

Patch 8.1.2237
Problem:    Mode() result after using &quot;<A HREF="change.html#r">r</A>&quot; depends on whether CURSOR_SHAPE is
            defined. (Christian Brabandt)
Solution:   Move the #ifdef to only skip ui_cursor_shape().
Files:	    src/normal.c

Patch 8.1.2238
Problem:    Error in docs <A HREF="tagsrch.html#tags">tags</A> goes unnoticed.
Solution:   Adjust <A HREF="tagsrch.html#tags">tags</A> build command. (Ken Takata, closes #5158)
Files:	    Filelist, .travis.yml, runtime/doc/Makefile,
            runtime/doc/doctags.vim

Patch 8.1.2239
Problem:    CI fails when running tests without building Vim.
Solution:   Skip creating doc <A HREF="tagsrch.html#tags">tags</A> if the execute does not exist.
Files:	    runtime/doc/Makefile

Patch 8.1.2240
Problem:    Popup <A HREF="windows.html#window">window</A> width changes when <A HREF="scroll.html#scrolling">scrolling</A>.
Solution:   Also adjust maxwidth when applying minwidth and there is a
            scrollbar.  Fix off-by-one error. (closes #5162)
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_scroll_11.dump,
            src/testdir/dumps/Test_popupwin_scroll_12.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_4.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_5.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_7.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_8.dump,

Patch 8.1.2241
Problem:    Match highlight does not combine with <A HREF="options.html#'wincolor'">'wincolor'</A>.
Solution:   Apply <A HREF="options.html#'wincolor'">'wincolor'</A> last on top of any other attribute. (closes #5159)
Files:	    src/drawline.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_matches.dump
            src/testdir/dumps/Test_popupwin_menu_01.dump
            src/testdir/dumps/Test_popupwin_menu_02.dump
            src/testdir/dumps/Test_popupwin_menu_04.dump

Patch 8.1.2242
Problem:    Creating docs <A HREF="tagsrch.html#tags">tags</A> uses user preferences. (Tony Mechelynck)
Solution:   Add &quot;<A HREF="starting.html#--clean">--clean</A>&quot;.
Files:	    runtime/doc/Makefile

Patch 8.1.2243
Problem:    Typos in comments.
Solution:   Fix the typos. (Dominique Pelle, closes #5160)  Also adjust
            <A HREF="change.html#formatting">formatting</A> a bit.
Files:	    src/autocmd.c, src/buffer.c, src/cindent.c, src/crypt.c,
            src/diff.c, src/getchar.c, src/globals.h, src/gui_gtk_x11.c,
            src/highlight.c, src/insexpand.c, src/macros.h, src/map.c,
            src/memline.c, src/message.c, src/option.c, src/os_unix.c,
            src/pty.c, src/quickfix.c, src/regexp_nfa.c, src/register.c,
            src/spellsuggest.c, src/structs.h, src/textprop.c, src/ui.c,
            src/undo.c, src/vim.h, src/viminfo.c

Patch 8.1.2244
Problem:    <A HREF="options.html#'wrapscan'">'wrapscan'</A> is not used for &quot;<A HREF="visual.html#gn">gn</A>&quot;.
Solution:   Only reset <A HREF="options.html#'wrapscan'">'wrapscan'</A> for the first search round. (closes #5164)
Files:	    src/search.c, src/testdir/test_gn.vim

Patch 8.1.2245
Problem:    Third character of <A HREF="options.html#'listchars'">'listchars'</A> <A HREF="intro.html#tab">tab</A> shows in wrong place when
            <A HREF="options.html#'breakindent'">'breakindent'</A> is set.
Solution:   Set c_final to NUL. (Naruhiko Nishino, closes #5165)
Files:	    src/drawline.c, src/testdir/test_breakindent.vim

Patch 8.1.2246
Problem:    Some tests are still in old style.
Solution:   Change a few tests to new style. (Yegappan Lakshmanan)
Files:	    src/testdir/Make_all.mak, src/testdir/test49.ok,
            src/testdir/test49.vim, src/testdir/test_trycatch.vim,
            src/testdir/test_vimscript.vim

Patch 8.1.2247
Problem:    &quot;make vimtags&quot; does not work in runtime/doc.
Solution:   Test existence with &quot;which&quot; instead of &quot;test -x&quot;. (Ken Takata)
Files:	    runtime/doc/Makefile

Patch 8.1.2248
Problem:    <A HREF="index.html#CTRL-W">CTRL-W</A> dot does not work in a <A HREF="terminal.html#terminal">terminal</A> when <A HREF="map.html#modifyOtherKeys">modifyOtherKeys</A> is
            enabled.
Solution:   Use the modifier when needed.  Pass the modifier along with the
            key to avoid mistakes.
Files:	    src/terminal.c, src/proto/terminal.pro, src/mouse.c

Patch 8.1.2249
Problem:    &quot;make vimtags&quot; does not print any message.
Solution:   Add a message that the <A HREF="tagsrch.html#tags">tags</A> have been updated.
Files:	    runtime/doc/Makefile

Patch 8.1.2250
Problem:    <A HREF="scroll.html#CTRL-U">CTRL-U</A> and <A HREF="scroll.html#CTRL-D">CTRL-D</A> don't work in <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Solution:   Initialize <A HREF="options.html#'scroll'">'scroll'</A>.  Add &quot;lastline&quot; in <A HREF="popup.html#popup_getpos()">popup_getpos()</A>.
            (closes #5170)
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            runtime/doc/popup.txt

Patch 8.1.2251
Problem:    &quot;:term command&quot; may not work without a shell.
Solution:   Add the ++shell option to :term. (closes #3340)
Files:	    runtime/doc/terminal.txt, src/terminal.c,
            src/os_unix.c, src/proto/os_unix.pro,
            src/testdir/test_terminal.vim

Patch 8.1.2252
Problem:    Compiler warning for int size.
Solution:   Add type cast. (Mike Williams)
Files:	    src/filepath.c

Patch 8.1.2253
Problem:    Using &quot;which&quot; to check for an executable is not reliable.
Solution:   Use &quot;command -v&quot; instead.  Also exit with error code when
            generating <A HREF="tagsrch.html#tags">tags</A> has an error. (closes #5174)
Files:	    runtime/doc/Makefile

Patch 8.1.2254
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: mouse scroll wheel doesn't work in <A HREF="popup.html#popup">popup</A>.
Solution:   Handle mouse wheel events separately. (closes #5138)
Files:	    src/gui_w32.c, src/gui.c, src/proto/gui.pro

Patch 8.1.2255
Problem:    &quot;:term ++shell&quot; does not work on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Add <A HREF="os_win32.html#MS-Windows">MS-Windows</A> support.
Files:	    src/terminal.c, src/testdir/test_terminal.vim

Patch 8.1.2256 (after 8.1.2255)
Problem:    Test for &quot;:term ++shell&quot; fails on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Accept failure of &quot;dir&quot; executable.
Files:	    src/testdir/test_terminal.vim

Patch 8.1.2257
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> <A HREF="gui.html#GUI">GUI</A>: scroll wheel always uses current <A HREF="windows.html#window">window</A>.
Solution:   Add the <A HREF="options.html#'scrollfocus'">'scrollfocus'</A> option for <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Files:	    runtime/doc/options.txt, src/gui_w32.c, src/optiondefs.h,
            src/option.h

Patch 8.1.2258
Problem:    May get <A HREF="message.html#hit-enter">hit-enter</A> prompt after entering a number. (Malcolm Rowe)
Solution:   Put back accidentally deleted lines. (closes #5176)
Files:	    src/misc1.c

Patch 8.1.2259
Problem:    Running tests may leave XfakeHOME behind.
Solution:   Source summarize.vim without using setup.vim. (closes #5177)
            Also fix that on <A HREF="os_win32.html#MS-Windows">MS-Windows</A> the test log isn't echoed.
Files:	    src/testdir/Makefile, src/testdir/Make_dos.mak

Patch 8.1.2260
Problem:    Terminal test may fail on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Catch the situation that &quot;term dir&quot; fails with a CreateProcess
            error.
Files:	    src/testdir/test_terminal.vim

Patch 8.1.2261
Problem:    With <A HREF="map.html#modifyOtherKeys">modifyOtherKeys</A> set <A HREF="options.html#'noesckeys'">'noesckeys'</A> doesn't work. (James McCoy)
Solution:   Disable <A HREF="map.html#modifyOtherKeys">modifyOtherKeys</A> while in <A HREF="insert.html#Insert">Insert</A> mode when <A HREF="options.html#'noesckeys'">'noesckeys'</A> is
            set. (closes #5180)
Files:	    src/edit.c, src/testdir/test_edit.vim

Patch 8.1.2262
Problem:    Unpack assignment in function not recognized.
Solution:   Skip over &quot;[a, b]&quot;. (closes #5051)
Files:	    src/userfunc.c, src/testdir/test_let.vim

Patch 8.1.2263
Problem:    <A HREF="options.html#'noesckeys'">'noesckeys'</A> test fails in <A HREF="gui.html#GUI">GUI</A>.
Solution:   Skip the test in the <A HREF="gui.html#GUI">GUI</A>.
Files:	    src/testdir/test_edit.vim

Patch 8.1.2264
Problem:    There are two test files for <A HREF="eval.html#:let">:let</A>.
Solution:   Merge the two files.
Files:	    src/testdir/test_assign.vim, src/testdir/test_let.vim,
            src/testdir/Make_all.mak, src/testdir/test_alot.vim

Patch 8.1.2265
Problem:    When <A HREF="popup.html#popup">popup</A> with &quot;botleft&quot; does not fit <A HREF="motion.html#it">it</A> flips incorrectly.
Solution:   Only flip when there is more space on the other side.  Add the
            &quot;posinvert&quot; option to disable flipping and <A HREF="diff.html#do">do</A> <A HREF="motion.html#it">it</A> in both
            directions if enabled.  (closes #5151)
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim, src/vim.h,
            src/testdir/dumps/Test_popupwin_nospace.dump

Patch 8.1.2266
Problem:    Position unknown for a mouse click in a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Solution:   Set <A HREF="eval.html#v:mouse_col">v:mouse_col</A> and <A HREF="eval.html#v:mouse_lnum">v:mouse_lnum</A>. (closes #5171)
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.2267
Problem:    Compiler warning for uninitialized variable. (Tony Mechelynck)
Solution:   Rearrange the code.
Files:	    src/buffer.c

Patch 8.1.2268
Problem:    Spell file flag zero is not recognized.
Solution:   Use -1 <A HREF="motion.html#as">as</A> an error value, so that zero can be used <A HREF="motion.html#as">as</A> a valid flag
            number.
Files:	    src/spellfile.c, src/testdir/test_spell.vim

Patch 8.1.2269
Problem:    Tags file with very long line stops using binary search.
Solution:   Reallocate the buffer if needed.
Files:	    src/tag.c, src/testdir/test_tagjump.vim

Patch 8.1.2270
Problem:    &quot;<A HREF="editing.html#gf">gf</A>&quot; is not tested in <A HREF="visual.html#Visual">Visual</A> mode.
Solution:   Add <A HREF="visual.html#Visual">Visual</A> mode test and test <A HREF="message.html#errors">errors</A>. (Dominique Pelle,
            closes #5197)
Files:	    src/testdir/test_gf.vim

Patch 8.1.2271
Problem:    Build error if FEAT_TAG_BINS is not defined. (John Marriott)
Solution:   Add #ifdef.
Files:	    src/tag.c

Patch 8.1.2272
Problem:    Test may hang at more prompt.
Solution:   Reset <A HREF="options.html#'more'">'more'</A> after resetting <A HREF="options.html#'compatible'">'compatible'</A>. (Michael Soyka)
Files:	    src/testdir/test_vimscript.vim

Patch 8.1.2273
Problem:    Wrong default when &quot;pos&quot; is changed with <A HREF="popup.html#popup_atcursor()">popup_atcursor()</A>.
Solution:   Adjust the default line and col when &quot;pos&quot; is not the default
            value. (#5151)
Files:	    runtime/doc/popup.txt, src/structs.h, src/popupwin.c,
            src/proto/popupwin.pro, src/ex_cmds.c,
            src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_atcursor_pos.dump

Patch 8.1.2274
Problem:    Newlines in <A HREF="options.html#'balloonexpr'">'balloonexpr'</A> result only work in the <A HREF="gui.html#GUI">GUI</A>.
Solution:   Also recognize newlines in the <A HREF="terminal.html#terminal">terminal</A>. (closes #5193)
Files:	    src/popupmenu.c, src/testdir/test_balloon.vim,
            src/testdir/dumps/Test_balloon_eval_term_01.dump,
            src/testdir/dumps/Test_balloon_eval_term_01a.dump,
            src/testdir/dumps/Test_balloon_eval_term_02.dump

Patch 8.1.2275
Problem:    Using &quot;seesion&quot; looks like a mistake.
Solution:   Use an underscore to make the function sort first.
Files:	    src/testdir/test_mksession.vim

Patch 8.1.2276
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: session test leaves files behind.
Solution:   Wipe out <A HREF="windows.html#buffers">buffers</A> before <A HREF="change.html#deleting">deleting</A> the directory. (closes #5187)
Files:	    src/testdir/test_mksession.vim

Patch 8.1.2277
Problem:    Terminal <A HREF="windows.html#window">window</A> is not updated when info <A HREF="popup.html#popup">popup</A> changes.
Solution:   Redraw <A HREF="windows.html#windows">windows</A> when re-using an info <A HREF="popup.html#popup">popup</A>. (closes #5192)
Files:	    src/ex_cmds.c

Patch 8.1.2278
Problem:    Using &quot;cd&quot; with &quot;exe&quot; may fail.
Solution:   Use <A HREF="builtin.html#chdir()">chdir()</A> instead.
Files:	    src/testdir/test_autochdir.vim, src/testdir/test_autocmd.vim,
            src/testdir/test_cd.vim, src/testdir/test_expand.vim,
            src/testdir/test_find_complete.vim, src/testdir/test_findfile.vim,
            src/testdir/test_getcwd.vim, src/testdir/test_shortpathname.vim

Patch 8.1.2279
Problem:    Computation of highlight attributes is too complicated.
Solution:   Simplify the attribute computation and make <A HREF="motion.html#it">it</A> more consistent.
            (closes #5190)  Fix that 'combine' set to zero doesn't work.
Files:	    src/drawline.c, src/testdir/test_textprop.vim,
            src/testdir/dumps/Test_textprop_01.dump

Patch 8.1.2280
Problem:    Crash when passing <A HREF="builtin.html#partial">partial</A> to <A HREF="builtin.html#substitute()">substitute()</A>.
Solution:   Take extra arguments into account. (closes #5186)
Files:	    src/userfunc.c, src/structs.h, src/regexp.c, src/proto/regexp.pro,
            src/testdir/test_substitute.vim

Patch 8.1.2281
Problem:    <A HREF="options.html#'showbreak'">'showbreak'</A> cannot be set for one <A HREF="windows.html#window">window</A>.
Solution:   Make <A HREF="options.html#'showbreak'">'showbreak'</A> <A HREF="options.html#global-local">global-local</A>.
Files:	    src/optiondefs.h, src/option.c, src/option.h,
            src/proto/option.pro, src/structs.h, src/charset.c,
            src/drawline.c, src/edit.c, src/move.c, src/normal.c, src/ops.c,
            src/optionstr.c, src/testdir/test_highlight.vim,
            src/testdir/test_breakindent.vim, runtime/doc/options.txt

Patch 8.1.2282
Problem:    Crash when passing many arguments through a <A HREF="builtin.html#partial">partial</A>. (Andy
            Massimino)
Solution:   Check the number of arguments. (closes #5186)
Files:	    src/userfunc.c, src/proto/userfunc.pro, src/evalfunc.c,
            src/regexp.c, src/testdir/test_expr.vim,
            src/testdir/test_substitute.vim

Patch 8.1.2283
Problem:    Missed one use of p_sbr.
Solution:   Add missing p_sbr change.
Files:	    src/indent.c

Patch 8.1.2284
Problem:    Compiler warning for unused variable. (Tony Mechelynck)
Solution:   Add #ifdef.
Files:	    src/move.c

Patch 8.1.2285
Problem:    Padding in structures wastes memory.
Solution:   Move fields to avoid padding. (Dominique Pelle, closes #5202)
Files:	    src/structs.h

Patch 8.1.2286
Problem:    Using border highlight in <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A> leaks memory.
Solution:   Free memory before overwriting. (Dominique Pelle, closes #5203)
Files:	    src/popupwin.c

Patch 8.1.2287
Problem:    Using EndOfBuffer highlight in <A HREF="popup.html#popup">popup</A> does not look good.
Solution:   Do not EndOfBuffer highlight. (closes #5204)
Files:	    src/drawscreen.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_02.dump,
            src/testdir/dumps/Test_popupwin_04.dump,
            src/testdir/dumps/Test_popupwin_04a.dump,
            src/testdir/dumps/Test_popupwin_05.dump,
            src/testdir/dumps/Test_popupwin_06.dump,
            src/testdir/dumps/Test_popupwin_07.dump,
            src/testdir/dumps/Test_popupwin_08.dump

Patch 8.1.2288
Problem:    Not using all space when <A HREF="popup.html#popup">popup</A> with &quot;topleft&quot; flips to above.
Solution:   Recompute the height when a <A HREF="popup.html#popup">popup</A> flips from below to above.
            (closes #5151)
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_nospace.dump

Patch 8.1.2289
Problem:    After <A HREF="diff.html#:diffsplit">:diffsplit</A> closing the <A HREF="windows.html#window">window</A> does not disable <A HREF="diff.html#diff">diff</A>.
Solution:   Add &quot;closeoff&quot; to <A HREF="options.html#'diffopt'">'diffopt'</A> and add <A HREF="motion.html#it">it</A> to the default.
Files:	    runtime/doc/options.txt, src/optiondefs.h, src/diff.c,
            src/proto/diff.pro, src/window.c, src/testdir/test_diffmode.vim

Patch 8.1.2290
Problem:    Autocommand test fails.
Solution:   Remove 'closeoff' from <A HREF="options.html#'diffopt'">'diffopt'</A>.
Files:	    src/testdir/test_autocmd.vim

Patch 8.1.2291
Problem:    Memory leak when executing command in a <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Free &quot;argv&quot;. (Dominique Pelle, closes #5208)
Files:	    src/terminal.c

Patch 8.1.2292
Problem:    <A HREF="eval.html#v:mouse_winid">v:mouse_winid</A> not set on click in <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>.
Solution:   Set <A HREF="eval.html#v:mouse_winid">v:mouse_winid</A>. (closes #5171)
Files:	    runtime/doc/popup.txt, src/popupwin.c,
            src/testdir/test_popupwin.vim

Patch 8.1.2293
Problem:    Join adds trailing space when second line is empty. (Brennan
            Vincent)
Solution:   Do not add a trailing space.
Files:	    src/ops.c, src/testdir/test_join.vim

Patch 8.1.2294
Problem:    Cursor position wrong when characters are concealed and a search
            causes a scroll.
Solution:   Fix the cursor column in a concealed line after <A HREF="windows.html#window">window</A> scroll.
            (closes #5215, closes #5012)
Files:	    src/drawscreen.c, src/testdir/test_matchadd_conceal.vim

Patch 8.1.2295
Problem:    If buffer of <A HREF="popup.html#popup">popup</A> is in another <A HREF="windows.html#window">window</A> cursorline sign shows.
Solution:   Check the group of the sign.
Files:	    src/option.c, src/proto/option.pro, src/sign.c,
            src/proto/sign.pro, src/screen.c, src/drawline.c,
            src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_cursorline_8.dump

Patch 8.1.2296
Problem:    Text properties are not combined with <A HREF="syntax.html#syntax">syntax</A> by default.
Solution:   Make <A HREF="motion.html#it">it</A> work <A HREF="motion.html#as">as</A> documented. (closes #5190)
Files:	    src/testprop.c, src/testdir/test_textprop.vim

Patch 8.1.2297
Problem:    The ex_vimgrep() function is too long.
Solution:   Split <A HREF="motion.html#it">it</A> in three parts. (Yegappan Lakshmanan, closes #5211)
Files:	    src/quickfix.c

Patch 8.1.2298 (after 8.1.2296)
Problem:    Missing part of 8.1.2296.
Solution:   s/test/text/
Files:	    src/textprop.c

Patch 8.1.2299
Problem:    <A HREF="terminal.html#ConPTY">ConPTY</A> in <A HREF="os_win32.html#MS-Windows">MS-Windows</A> 1909 is still wrong.
Solution:   Use same solution <A HREF="motion.html#as">as</A> for 1903. (Nobuhiro Takasaki, closes #5217)
Files:	    src/misc2.c, src/os_win32.c

Patch 8.1.2300
Problem:    Redraw breaks going through <A HREF="eval.html#list">list</A> of <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#windows">windows</A>.
Solution:   Use different flags for popup_reset_handled(). (closes #5216)
Files:	    src/popupwin.c, src/proto/popupwin.pro, src/structs.h, src/vim.h,
            src/mouse.c, src/testdir/test_popupwin.vim

Patch 8.1.2301
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> <A HREF="gui.html#GUI">GUI</A>: drawing error when background color changes.
Solution:   Implement gui_mch_new_colors(). (Simon Sadler)
Files:	    src/gui_w32.c

Patch 8.1.2302
Problem:    <A HREF="motion.html#:lockmarks">:lockmarks</A> does not work for <A HREF="motion.html#'[">'[</A> and <A HREF="motion.html#']">']</A>.
Solution:   save and restore <A HREF="motion.html#'[">'[</A> and <A HREF="motion.html#']">']</A> marks. (James McCoy, closes #5222)
Files:	    runtime/doc/motion.txt, src/bufwrite.c, src/diff.c, src/ex_cmds.c,
            src/fileio.c, src/indent.c, src/ops.c, src/register.c,
            src/testdir/test_autocmd.vim, src/testdir/test_diffmode.vim

Patch 8.1.2303
Problem:    Cursor in wrong position after horizontal scroll.
Solution:   Set w_valid_leftcol.  (closes #5214, closes #5224)
Files:	    src/move.c, src/testdir/test_matchadd_conceal.vim

Patch 8.1.2304
Problem:    Cannot get the mouse position when getting a mouse click.
Solution:   Add <A HREF="builtin.html#getmousepos()">getmousepos()</A>.
Files:	    runtime/doc/eval.txt, runtime/doc/popup.txt, src/mouse.c
            src/proto/mouse.pro, src/evalfunc.c, src/popupwin.c,
            src/popupwin.pro, src/testdir/test_popupwin.vim,
            src/testdir/test_functions.vim

Patch 8.1.2305
Problem:    No warning for wrong entry in translations.
Solution:   Check semicolons in keywords entry of desktop file.
Files:	    src/po/check.vim

Patch 8.1.2306
Problem:    Double and triple clicks are not tested.
Solution:   Test mouse clicks to select text. (closes #5226)
Files:	    src/testdir/test_termcodes.vim

Patch 8.1.2307
Problem:    Positioning <A HREF="popup.html#popup">popup</A> doesn't work for buffer-local <A HREF="textprop.html#textprop">textprop</A>.
Solution:   Make <A HREF="motion.html#it">it</A> work. (closes #5225)
Files:	    src/popupwin.c, src/testdir/test_popupwin_textprop.vim

Patch 8.1.2308
Problem:    Deleting text before zero-width <A HREF="textprop.html#textprop">textprop</A> removes <A HREF="motion.html#it">it</A>.
Solution:   Keep zero-width <A HREF="textprop.html#textprop">textprop</A> when <A HREF="change.html#deleting">deleting</A> text.
Files:	    src/textprop.c, src/testdir/test_textprop.vim

Patch 8.1.2309
Problem:    Compiler warning for argument type.
Solution:   Use linenr_T and cast to varnumber_T. (John Marriott)
Files:	    src/mouse.c

Patch 8.1.2310
Problem:    No proper test for directory changes in <A HREF="quickfix.html#quickfix">quickfix</A>.
Solution:   Add a test that uses multiple directories. (Yegappan Lakshmanan,
            closes #5230)
Files:	    src/testdir/test_quickfix.vim

Patch 8.1.2311
Problem:    Warning for missing function prototype.
Solution:   Add the proto. (Dominique Pelle, closes #5233)
Files:	    src/proto/popupwin.pro

Patch 8.1.2312
Problem:    &quot;line:&quot; field in <A HREF="tagsrch.html#tags">tags</A> file not used.
Solution:   Recognize the field and use the value. (Andy Massimino, Daniel
            Hahler, closes #5232, closes #2546, closes #1057)
Files:	    src/tag.c, src/testdir/test_tagjump.vim

Patch 8.1.2313
Problem:    Debugging where a delay comes from is not <A HREF="starting.html#easy">easy</A>.
Solution:   Use different values when calling ui_delay().
Files:	    src/buffer.c, src/change.c, src/fileio.c, src/gui.c,
            src/if_xcmdsrv.c, src/insexpand.c, src/main.c, src/normal.c,
            src/screen.c, src/search.c, src/tag.c, src/term.c, src/ui.c

Patch 8.1.2314
Problem:    vi' sometimes does not select anything.
Solution:   Recognize an empty selection. (Christian Brabandt, closes #5183)
Files:	    src/search.c, src/testdir/test_textobjects.vim

Patch 8.1.2315
Problem:    Not always using the right <A HREF="windows.html#window">window</A> when jumping to an error.
Solution:   Add the &quot;uselast&quot; flag in <A HREF="options.html#'switchbuf'">'switchbuf'</A>. (closes #1652)
Files:	    runtime/doc/options.txt, src/option.h, src/optionstr.c,
            src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.2316
Problem:    FORTIFY_SOURCE can also be present in CPPFLAGS.
Solution:   Remove <A HREF="motion.html#it">it</A> in configure. (Benedikt Morbach, closes #2786)
Files:	    src/configure.ac, src/auto/configure

Patch 8.1.2317
Problem:    No test for <A HREF="spell.html#spell">spell</A> affix file with flag on suffix.
Solution:   Add a test <A HREF="change.html#case">case</A>.
Files:	    src/testdir/test_spell.vim

Patch 8.1.2318 (after 8.1.2301)
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> <A HREF="gui.html#GUI">GUI</A>: main background shows in toolbar.
Solution:   Remove transparency from the toolbar. (Simon Sadler)
Files:	    src/gui_w32.c

Patch 8.1.2319
Problem:    Compiler warning for int size.
Solution:   Add typecast. (Mike Williams)
Files:	    src/mouse.c

Patch 8.1.2320
Problem:    Insufficient test coverage for <A HREF="quickfix.html#quickfix">quickfix</A>.
Solution:   Add more tests.  Fix uncovered problem. (Yegappan Lakshmanan,
            closes #5238)
Files:	    src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.2321
Problem:    Cannot select all text with the mouse. (John Marriott)
Solution:   Move limiting the mouse column to f_getmousepos(). (closes #5242)
Files:	    src/mouse.c

Patch 8.1.2322 (after 8.1.2320)
Problem:    <A HREF="quickfix.html#Quickfix">Quickfix</A> test fails in very big <A HREF="terminal.html#terminal">terminal</A>.
Solution:   Adjust the expected result for the width. (Masato Nishihata,
            closes #5244)
Files:	    src/testdir/test_quickfix.vim

Patch 8.1.2323
Problem:    Old MSVC version no longer tested.
Solution:   Drop support for MSVC 2008 and older. (Ken Takata, closes #5248)
Files:	    src/INSTALLpc.txt, src/Make_mvc.mak, src/gui_w32.c, src/os_win32.c

Patch 8.1.2324
Problem:    Width of scrollbar in <A HREF="popup.html#popup">popup</A> menu not taken into account.
Solution:   Add the width of the scrollbar.
Files:	    src/popupmenu.c, src/testdir/dumps/Test_popupwin_infopopup_6.dump,
            src/testdir/test_popupwin.vim

Patch 8.1.2325
Problem:    Crash when using balloon with empty line.
Solution:   Handle empty lines. (Markus Braun)
Files:	    src/popupmenu.c, src/testdir/test_popup.vim

Patch 8.1.2326
Problem:    Cannot parse a date/time <A HREF="eval.html#string">string</A>.
Solution:   Add <A HREF="builtin.html#strptime()">strptime()</A>. (Stephen Wall, closes #5250)
Files:	    runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/auto/configure,
            src/config.h.in, src/configure.ac, src/evalfunc.c, src/os_unix.h,
            src/testdir/test_functions.vim

Patch 8.1.2327
Problem:    Cannot build with Hangul input.
Solution:   Remove Hangul input support.
Files:	    Filelist, src/Makefile, runtime/doc/hangulin.txt, src/feature.h,
            src/gui_gtk_x11.c, src/gui_x11.c, src/gui.c, src/edit.c,
            src/mbyte.c, src/screen.c, src/ui.c, src/hangulin.c,
            src/globals.h, src/proto/hangulin.pro, src/proto.h,
            src/evalfunc.c, src/version.c, src/configure.ac,
            src/auto/configure, src/config.h.in, src/config.mk.in

Patch 8.1.2328
Problem:    A few <A HREF="hangulin.html#hangul">hangul</A> input pieces remain.
Solution:   Update <A HREF="os_vms.html#VMS">VMS</A> makefile.
Files:	    src/Make_vms.mms

Patch 8.1.2329
Problem:    Mouse multiple click test is a bit flaky.
Solution:   Add <A HREF="motion.html#it">it</A> to the <A HREF="eval.html#list">list</A> of flaky tests.
Files:	    src/testdir/runtest.vim

Patch 8.1.2330 (after 8.1.2314)
Problem:    vi' does not always work when <A HREF="options.html#'selection'">'selection'</A> is <A HREF="motion.html#exclusive">exclusive</A>.
Solution:   Adjust start position.
Files:	    src/search.c, src/testdir/test_textobjects.vim

Patch 8.1.2331
Problem:    The option.c file is still very big.
Solution:   Move a few <A HREF="eval.html#functions">functions</A> to where they fit better. (Yegappan
            Lakshmanan, closes #4895)
Files:	    src/option.c, src/proto/option.pro, src/change.c,
            src/proto/change.pro, src/ex_getln.c, src/proto/ex_getln.pro,
            src/globals.h, src/gui.c, src/proto/gui.pro, src/ui.c,
            src/proto/ui.pro, src/term.c, src/proto/term.pro, src/indent.c,
            src/proto/indent.pro

Patch 8.1.2332 (after 8.1.2331)
Problem:    Missing file in refactoring.
Solution:   Update missing file.
Files:	    src/search.c

Patch 8.1.2333
Problem:    With <A HREF="map.html#modifyOtherKeys">modifyOtherKeys</A> <A HREF="editing.html#CTRL-^">CTRL-^</A> doesn't work.
Solution:   Handle the exception.
Files:	    src/getchar.c, src/testdir/test_termcodes.vim

Patch 8.1.2334
Problem:    Possible NULL pointer dereference in <A HREF="popup.html#popup_locate()">popup_locate()</A>. (Coverity)
Solution:   Check for NULL pointer.
Files:	    src/popupwin.c

Patch 8.1.2335
Problem:    Error message for function arguments may use NULL pointer.
            (Coverity)
Solution:   Use the original function name.
Files:	    src/evalfunc.c

Patch 8.1.2336
Problem:    When an <A HREF="eval.html#expr">expr</A> <A HREF="map.html#mapping">mapping</A> moves the cursor <A HREF="motion.html#it">it</A> is not restored.
Solution:   Position the cursor after an <A HREF="eval.html#expr">expr</A> <A HREF="map.html#mapping">mapping</A>. (closes #5256)
Files:	    src/getchar.c, src/testdir/test_mapping.vim,
            src/testdir/dumps/Test_map_expr_1.dump

Patch 8.1.2337
Problem:    Double-click time sometimes miscomputed.
Solution:   Correct time computation. (Dominique Pelle, closes #5259)
Files:	    src/mouse.c, src/testdir/runtest.vim

Patch 8.1.2338
Problem:    Using <A HREF="visual.html#Visual">Visual</A> <A HREF="motion.html#mark">mark</A> with <A HREF="change.html#:s">:s</A> gives <A HREF="motion.html#E20">E20</A> if not set.
Solution:   Ignore <A HREF="message.html#errors">errors</A> when handling <A HREF="options.html#'incsearch'">'incsearch'</A>. (closes #3837)
Files:	    src/ex_getln.c, src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_substitute_14.dump

Patch 8.1.2339
Problem:    Insufficient <A HREF="testing.html#testing">testing</A> for <A HREF="quickfix.html#quickfix">quickfix</A>.
Solution:   Add a few more tests. (Yegappan Lakshmanan, closes #5261)
Files:	    src/testdir/test_quickfix.vim

Patch 8.1.2340
Problem:    <A HREF="quickfix.html#Quickfix">Quickfix</A> test fails under <A HREF="debug.html#valgrind">valgrind</A> and asan.
Solution:   Make sure long line does not overflow IObuff. (Dominique Pelle,
            closes #5263)  Put back fix for large terminals. (Yegappan
            Lakshmanan, closes #5264)
Files:	    src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.2341
Problem:    Not so <A HREF="starting.html#easy">easy</A> to interrupt a <A HREF="usr_41.html#script">script</A> programmatically.
Solution:   Add the <A HREF="builtin.html#interrupt()">interrupt()</A> function. (Yasuhiro Matsumoto, closes #2834)
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/ex_eval.c,
            src/testdir/Make_all.mak, src/testdir/test_interrupt.vim

Patch 8.1.2342
Problem:    Random number generator in Vim <A HREF="usr_41.html#script">script</A> is slow.
Solution:   Add <A HREF="builtin.html#rand()">rand()</A> and <A HREF="builtin.html#srand()">srand()</A>. (Yasuhiro Matsumoto, closes #1277)
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/testdir/Make_all.mak,
            src/testdir/test_random.vim

Patch 8.1.2343
Problem:    Using time() for <A HREF="builtin.html#srand()">srand()</A> is not very <A HREF="builtin.html#random">random</A>.
Solution:   use /dev/urandom if available
Files:	    src/evalfunc.c, src/testdir/test_random.vim

Patch 8.1.2344
Problem:    Cygwin: warning for using <A HREF="builtin.html#strptime()">strptime()</A>.
Solution:   Move defining _XOPEN_SOURCE and __USE_XOPEN to vim.h. (Ken Takata,
            closes #5265)  Use 700 for _XOPEN_SOURCE for mkdtemp().
Files:	    src/os_unix.h, src/vim.h

Patch 8.1.2345
Problem:    .cjs files are not recognized <A HREF="motion.html#as">as</A> Javascript.
Solution:   Add the *.cjs <A HREF="pattern.html#pattern">pattern</A>. (closes #5268)
Files:	    runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.1.2346
Problem:    <A HREF="undo.html#CTRL-R">CTRL-R</A> <A HREF="undo.html#CTRL-R">CTRL-R</A> doesn't work with <A HREF="map.html#modifyOtherKeys">modifyOtherKeys</A>.
Solution:   Allow key codes when fetching argument for <A HREF="undo.html#CTRL-R">CTRL-R</A>. (closes #5266)
            Also fix <A HREF="editing.html#CTRL-G">CTRL-G</A> in <A HREF="insert.html#Insert">Insert</A> mode.
Files:	    src/edit.c, src/ex_getln.c, src/testdir/test_termcodes.vim

Patch 8.1.2347 (after 8.1.2344)
Problem:    macOS: build fails.
Solution:   Don't define _XOPEN_SOURCE for <A HREF="os_mac.html#Mac">Mac</A>.
Files:	    src/vim.h

Patch 8.1.2348
Problem:    <A HREF="eval.html#:const">:const</A> cannot be followed by &quot;| endif&quot;.
Solution:   Check following command for <A HREF="eval.html#:const">:const</A>. (closes #5269)
            Also fix completion after <A HREF="eval.html#:const">:const</A>.
Files:	    src/testdir/test_let.vim, src/testdir/test_const.vim,
            src/ex_docmd.c, src/cmdexpand.c, src/eval.c,
            src/testdir/test_cmdline.vim

Patch 8.1.2349
Problem:    <A HREF="eval.html#:lockvar">:lockvar</A> and <A HREF="eval.html#:unlockvar">:unlockvar</A> cannot be followed by &quot;| endif&quot;.
Solution:   Check for following commands. (closes #5269)
Files:	    src/testdir/test_const.vim, src/ex_docmd.c

Patch 8.1.2350
Problem:    Other text for <A HREF="visual.html#CTRL-V">CTRL-V</A> in <A HREF="insert.html#Insert">Insert</A> mode with <A HREF="map.html#modifyOtherKeys">modifyOtherKeys</A>.
Solution:   Convert the Escape sequence back to key <A HREF="motion.html#as">as</A> if <A HREF="map.html#modifyOtherKeys">modifyOtherKeys</A> is
            not set, and use CTRL-SHIFT-V to get the Escape sequence itself.
            (closes #5254)
Files:	    runtime/doc/insert.txt, runtime/doc/cmdline.txt, src/edit.c,
            src/proto/edit.pro, src/term.c, src/proto/term.pro, src/getchar.c,
            src/proto/getchar.pro, src/testdir/test_termcodes.vim,
            src/ex_getln.c

Patch 8.1.2351
Problem:    <A HREF="options.html#'wincolor'">'wincolor'</A> not used for <A HREF="change.html#&gt;">&gt;</A> for not fitting double width char.
            Also: <A HREF="popup.html#popup">popup</A> drawn on right half of double width character looks
            wrong.
Solution:   Adjust color for <A HREF="change.html#&gt;">&gt;</A> character.  Clear left half of double width
            character if right half is being overwritten.
Files:	    src/drawline.c, src/screen.c,
            src/testdir/dumps/Test_popupwin_doublewidth_1.dump

Patch 8.1.2352
Problem:    CI doesn't cover FreeBSD.
Solution:   Configure Cirrus-CI. (Christian Brabandt, closes #5273)
Files:	    .cirrus.yml, README.md

Patch 8.1.2353
Problem:    Build failure on FreeBSD.
Solution:   Change #ifdef to only check for Linux-like systems.
Files:	    src/vim.h

Patch 8.1.2354
Problem:    Cirrus CI runs on another repository.
Solution:   Run Cirrus CI on vim/vim.
Files:	    .cirrus.yml, README.md

Patch 8.1.2355
Problem:    Test with &quot;man&quot; fails on FreeBSD.
Solution:   Use &quot;<A HREF="starting.html#-P">-P</A>&quot; instead of &quot;--pager&quot;.
Files:	    src/testdir/test_normal.vim

Patch 8.1.2356
Problem:    <A HREF="builtin.html#rand()">rand()</A> does not use the best algorithm.

Solution:   use xoshiro128** instead of xorshift. (Kaito Udagawa,
            closes #5279)
Files:	    runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_random.vim

Patch 8.1.2357
Problem:    No test with wrong argument for <A HREF="builtin.html#rand()">rand()</A>.
Solution:   Add a test <A HREF="change.html#case">case</A>.
Files:	    src/testdir/test_random.vim

Patch 8.1.2358
Problem:    Tests fail on Cirrus CI for FreeBSD.
Solution:   Fix a test and skip some. (Christian Brabandt, closes #5281)
Files:	    Filelist, .cirrus.yml, src/testdir/check.vim,
            src/testdir/test_normal.vim, src/testdir/test_quickfix.vim,
            src/testdir/test_source_utf8.vim, src/testdir/test_terminal.vim,
            src/testdir/test_utf8_comparisons.vim

Patch 8.1.2359
Problem:    Cannot build without FEAT_FLOAT. (John Marriott)
Solution:   Fix #ifdefs around f_srand().
Files:	    src/evalfunc.c

Patch 8.1.2360
Problem:    <A HREF="quickfix.html#Quickfix">Quickfix</A> test coverage can still be improved.
Solution:   Add more test cases. (Yegappan Lakshmanan, closes #5276)
Files:	    src/testdir/test_quickfix.vim

Patch 8.1.2361
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: test failures related to VIMDLL.
Solution:   Adjust code and tests. (Ken Takata, closes #5283)
Files:	    src/evalfunc.c, src/ex_cmds.c, src/gui_w32.c, src/mbyte.c,
            src/menu.c, src/proto.h, src/testdir/test_highlight.vim

Patch 8.1.2362
Problem:    Cannot place <A HREF="sign.html#signs">signs</A> in a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>. (Maxim Kim)
Solution:   Use the group prefix &quot;PopUp&quot; to specify which <A HREF="sign.html#signs">signs</A> should show up
            in a <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>. (closes #5277)
Files:	    runtime/doc/sign.txt, src/popupwin.c, src/sign.c,
            src/testdir/dumps/Test_popupwin_sign_1.dump

Patch 8.1.2363
Problem:    ml_get error when accessing <A HREF="visual.html#Visual">Visual</A> area in <A HREF="options.html#'statusline'">'statusline'</A>.
Solution:   Disable <A HREF="visual.html#Visual">Visual</A> mode when using another <A HREF="windows.html#window">window</A>. (closes #5278)
Files:	    src/testdir/test_statusline.vim, src/buffer.c

Patch 8.1.2364
Problem:    Termwinscroll test is flaky on FreeBSD.
Solution:   Add to <A HREF="eval.html#list">list</A> of flaky tests.  Rename function.
Files:	    src/testdir/runtest.vim, src/testdir/test_terminal.vim

Patch 8.1.2365
Problem:    Missing tests for recent <A HREF="popup.html#popupwin">popupwin</A> changes.
Solution:   Add test cases.
Files:	    src/testdir/test_popupwin.vim

Patch 8.1.2366
Problem:    Using old C style comments.
Solution:   Use <A HREF="version7.html#//">//</A> comments where appropriate.
Files:	    src/ascii.h, src/beval.h, src/dosinst.h, src/feature.h,
            src/glbl_ime.h, src/globals.h, src/gui_at_sb.h, src/gui_gtk_f.h,
            src/gui_gtk_vms.h, src/gui.h, src/gui_x11_pm.h, src/gui_xmebwp.h,
            src/if_cscope.h, src/if_mzsch.h, src/if_ole.h, src/if_py_both.h,
            src/iscygpty.h, src/keymap.h, src/macros.h, src/nbdebug.h,
            src/option.h, src/os_amiga.h, src/os_beos.h, src/os_dos.h,
            src/os_mac.h, src/os_qnx.h, src/os_unix.h, src/os_unixx.h,
            src/os_vms_conf.h, src/os_win32.h, src/proto.h, src/regexp.h,
            src/spell.h, src/structs.h, src/term.h, src/version.h, src/vimio.h

Patch 8.1.2367
Problem:    Registers are not sufficiently tested.
Solution:   Add a few more test cases. (Yegappan Lakshmanan, closes #5288)
Files:	    src/testdir/test_registers.vim

Patch 8.1.2368
Problem:    Using old C style comments.
Solution:   Use <A HREF="version7.html#//">//</A> comments where appropriate.
Files:	    src/autocmd.c, src/beval.c, src/blob.c, src/blowfish.c,
            src/buffer.c, src/change.c, src/channel.c, src/charset.c,
            src/cindent.c, src/crypt.c, src/crypt_zip.c

Patch 8.1.2369
Problem:    Cannot build with <A HREF="quickfix.html#quickfix">quickfix</A> and without text properties.
Solution:   Fix typo. (Naruhiko Nishino)
Files:	    src/popupmenu.c

Patch 8.1.2370
Problem:    Build problems on <A HREF="os_vms.html#VMS">VMS</A>.
Solution:   Adjust the build file. (Zoltan Arpadffy)
Files:	    src/Make_vms.mms, src/os_unix.c, src/os_vms.c

Patch 8.1.2371
Problem:    FEAT_TEXT_PROP is a confusing name.
Solution:   Use FEAT_PROP_POPUP. (Naruhiko Nishino, closes #5291)
Files:	    runtime/doc/popup.txt, src/beval.c, src/buffer.c, src/change.c,
            src/drawline.c, src/drawscreen.c, src/edit.c, src/eval.c,
            src/evalbuffer.c, src/evalfunc.c, src/evalwindow.c, src/ex_cmds.c,
            src/ex_docmd.c, src/feature.h, src/fileio.c, src/getchar.c,
            src/globals.h, src/gui.c, src/gui_w32.c, src/indent.c,
            src/insexpand.c, src/macros.h, src/main.c, src/memline.c,
            src/misc2.c, src/mouse.c, src/move.c, src/ops.c, src/option.h,
            src/optiondefs.h, src/optionstr.c, src/popupmenu.c,
            src/popupwin.c, src/proto.h, src/screen.c, src/search.c,
            src/sign.c, src/structs.h, src/tag.c, src/testdir/runtest.vim,
            src/testdir/test_execute_func.vim, src/testdir/test_popupwin.vim,
            src/testdir/test_popupwin_textprop.vim, src/textprop.c, src/ui.c,
            src/version.c, src/vim.h, src/window.c

Patch 8.1.2372
Problem:    <A HREF="os_vms.html#VMS">VMS</A>: failing realloc leaks memory. (Chakshu Gupta)
Solution:   Free the memory. (partly fixes #5292)
Files:	    src/os_vms.c

Patch 8.1.2373
Problem:    Cannot build with <A HREF="various.html#+popupwin">+popupwin</A> but without <A HREF="various.html#+quickfix">+quickfix</A>. (John Marriott)
Solution:   Adjust #ifdefs.
Files:	    src/ex_cmds.c, src/popupmenu.c, src/popupwin.c, src/fileio.c,
            src/testdir/test_compiler.vim, src/testdir/test_tagjump.vim,
            src/testdir/test86.in, src/testdir/test87.in,
            src/testdir/test_autocmd.vim, src/testdir/test_bufwintabinfo.vim,
            src/testdir/test_channel.vim, src/testdir/test_edit.vim,
            src/testdir/test_execute_func.vim,
            src/testdir/test_filter_cmd.vim, src/testdir/test_gui.vim,
            src/testdir/test_makeencoding.vim, src/testdir/test_mksession.vim,
            src/testdir/test_normal.vim, src/testdir/test_popup.vim,
            src/testdir/test_popupwin.vim, src/testdir/test_preview.vim,
            src/testdir/test_startup.vim, src/testdir/test_statusline.vim,
            src/testdir/test_tabpage.vim, src/testdir/test_window_cmd.vim,
            src/testdir/test_window_id.vim

Patch 8.1.2374
Problem:    Unused parts of libvterm are included.
Solution:   Delete the unused files.
Files:	    Filelist, src/libvterm/bin/vterm-ctrl.c,
            src/libvterm/bin/unterm.c, src/libvterm/bin/vterm-dump.c

Patch 8.1.2375
Problem:    No sufficient <A HREF="testing.html#testing">testing</A> for <A HREF="change.html#registers">registers</A>.
Solution:   Add more test cases. (Yegappan Lakshmanan, closes #5296)
            Fix that &quot;<A HREF="change.html#p">p</A>&quot; on last virtual column of <A HREF="intro.html#tab">tab</A> inserts spaces.
Files:	    src/register.c, src/testdir/test_registers.vim,
            src/testdir/test_virtualedit.vim, src/testdir/test_visual.vim

Patch 8.1.2376
Problem:    Preprocessor indents are incorrect.
Solution:   Fix the indents. (Ken Takata, closes #5298)
Files:	    src/drawline.c, src/gui_w32.c, src/os_mswin.c, src/os_win32.c,
	    src/proto.h

Patch 8.1.2377
Problem:    <A HREF="gui.html#GUI">GUI</A>: when losing focus a pending <A HREF="motion.html#operator">operator</A> is executed.
Solution:   Do not execute an <A HREF="motion.html#operator">operator</A> when getting K_IGNORE. (closes #5300)
Files:	    src/normal.c

Patch 8.1.2378
Problem:    Using old C style comments.
Solution:   Use <A HREF="version7.html#//">//</A> comments where appropriate.
Files:	    src/dict.c, src/diff.c, src/digraph.c, src/dosinst.c, src/edit.c,
            src/eval.c, src/evalbuffer.c, src/evalfunc.c

Patch 8.1.2379
Problem:    Using old C style comments.
Solution:   Use <A HREF="version7.html#//">//</A> comments where appropriate.
Files:	    src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c, src/ex_eval.c,
            src/ex_getln.c, src/fileio.c, src/filepath.c, src/findfile.c,
            src/fold.c

Patch 8.1.2380
Problem:    Using old C style comments.
Solution:   Use <A HREF="version7.html#//">//</A> comments where appropriate.
Files:	    src/getchar.c, src/gui.c, src/gui_at_fs.c, src/gui_at_sb.c,
            src/gui_athena.c, src/gui_beval.c, src/gui_gtk.c, src/gui_gtk_f.c,
            src/gui_gtk_x11.c

Patch 8.1.2381
Problem:    Not all <A HREF="sponsor.html#register">register</A> related code is covered by tests.
Solution:   Add more test cases. (Yegappan Lakshmanan, closes #5301)
Files:	    src/testdir/test_marks.vim, src/testdir/test_registers.vim,
            src/testdir/test_virtualedit.vim

Patch 8.1.2382
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: When using VTP bold+inverse doesn't work.
Solution:   Compare with the default colors. (Nobuhiro Takasaki, closes #5303)
Files:	    src/os_win32.c, src/proto/os_win32.pro, src/screen.c

Patch 8.1.2383
Problem:    Using old C style comments.
Solution:   Use <A HREF="version7.html#//">//</A> comments where appropriate.
Files:	    src/gui_mac.c, src/gui_motif.c, src/gui_photon.c, src/gui_w32.c,
            src/gui_x11.c, src/gui_xmdlg.c, src/gui_xmebw.c

Patch 8.1.2384
Problem:    Test 48 is old style.
Solution:   Merge test cases into new style test. (Yegappan Lakshmanan,
            closes #5307)
Files:	    src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test48.in, src/testdir/test48.ok,
            src/testdir/test_virtualedit.vim

Patch 8.1.2385
Problem:    Opening cmdline <A HREF="windows.html#window">window</A> with <A HREF="builtin.html#feedkeys()">feedkeys()</A> does not work. (Yegappan
            Lakshmanan)
Solution:   Recognize K_CMDWIN also when ex_normal_busy is set.
Files:	    src/ex_getln.c, src/testdir/test_cmdline.vim

Patch 8.1.2386
Problem:    <A HREF="options.html#'wincolor'">'wincolor'</A> is not used for <A HREF="options.html#'listchars'">'listchars'</A>.
Solution:   Combine the colors. (closes #5308)
Files:	    src/drawline.c, src/testdir/test_highlight.vim,
            src/testdir/dumps/Test_wincolor_lcs.dump

Patch 8.1.2387
Problem:    Using old C style comments.
Solution:   Use <A HREF="version7.html#//">//</A> comments where appropriate.
Files:	    src/hardcopy.c, src/hashtab.c, src/if_cscope.c, src/if_lua.c,
            src/if_mzsch.c, src/if_perlsfio.c, src/if_python.c,
            src/if_python3.c, src/if_ruby.c, src/if_tcl.c, src/if_xcmdsrv.c

Patch 8.1.2388
Problem:    Using old C style comments.
Solution:   Use <A HREF="version7.html#//">//</A> comments where appropriate.
Files:	    src/json.c, src/json_test.c, src/kword_test.c, src/list.c,
            src/main.c, src/mark.c, src/mbyte.c, src/memfile.c,
            src/memfile_test.c, src/memline.c, src/menu.c

Patch 8.1.2389
Problem:    Using old C style comments.
Solution:   Use <A HREF="version7.html#//">//</A> comments where appropriate.
Files:	    src/libvterm/src/screen.c, src/libvterm/src/unicode.c,
            src/libvterm/src/vterm.c, src/libvterm/t/harness.c,
            src/libvterm/include/vterm.h, src/xdiff/xdiffi.c,
            src/xdiff/xemit.c, src/xdiff/xhistogram.c, src/xdiff/xpatience.c,
            src/xdiff/xutils.c, src/xdiff/xdiff.h, src/xdiff/xdiffi.h,
            src/xdiff/xemit.h, src/xdiff/xinclude.h, src/xdiff/xmacros.h,
            src/xdiff/xprepare.h, src/xdiff/xtypes.h, src/xdiff/xutils.h

Patch 8.1.2390
Problem:    Test94 is old style, fix 7.4.441 not tested.
Solution:   Turn test94 into a new style test.  Add tests for the fix in patch
            7.4.441. (Yegappan Lakshmanan, closes #5316)
Files:	    src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test94.in, src/testdir/test94.ok,
            src/testdir/test_cmdline.vim, src/testdir/test_visual.vim

Patch 8.1.2391
Problem:    Cannot build when __QNXNTO__ is defined. (Ian Wayne Larson)
Solution:   Move the check for &quot;qansi&quot;. (Ken Takata, closes #5317)
Files:	    src/highlight.c

Patch 8.1.2392
Problem:    Using old C style comments.
Solution:   Use <A HREF="version7.html#//">//</A> comments where appropriate.
Files:	    src/nbdebug.c, src/netbeans.c, src/normal.c, src/ops.c,
            src/option.c

Patch 8.1.2393
Problem:    Using old C style comments.
Solution:   Use <A HREF="version7.html#//">//</A> comments where appropriate.
Files:	    src/os_amiga.c, src/os_beos.c, src/os_mac_conv.c, src/os_mswin.c,
            src/os_qnx.c, src/os_unix.c, src/os_vms.c, src/os_win32.c

Patch 8.1.2394
Problem:    Using old C style comments.
Solution:   Use <A HREF="version7.html#//">//</A> comments where appropriate.
Files:	    src/popupmenu.c, src/pty.c, src/quickfix.c, src/regexp.c,
            src/regexp_nfa.c, src/screen.c, src/search.c, src/sha256.c,
            src/sign.c

Patch 8.1.2395
Problem:    Using old C style comments.
Solution:   Use <A HREF="version7.html#//">//</A> comments where appropriate.
Files:	    src/spell.c, src/spellfile.c, src/syntax.c, src/tag.c, src/term.c,
            src/terminal.c, src/termlib.c, src/testing.c

Patch 8.1.2396
Problem:    Using old C style comments.
Solution:   Use <A HREF="version7.html#//">//</A> comments where appropriate.
Files:	    src/ui.c, src/undo.c, src/uninstall.c, src/usercmd.c,
            src/userfunc.c, src/winclip.c, src/window.c, src/xpm_w32.c

Patch 8.1.2397
Problem:    Should not define __USE_XOPEN. _XOPEN_SOURCE is not needed for
            Android.
Solution:   Remove __USE_XOPEN and adjust #ifdefs. (Ozaki Kiichi,
            closes #5322)
Files:	    src/vim.h

Patch 8.1.2398
Problem:    <A HREF="builtin.html#strptime()">strptime()</A> test fails on <A HREF="mbyte.html#Japanese">Japanese</A> <A HREF="os_mac.html#Mac">Mac</A>.
Solution:   Use &#37;T instead of &#37;X.
Files:	    src/testdir/test_functions.vim

Patch 8.1.2399
Problem:    Info <A HREF="popup.html#popup">popup</A> on top of cursor if <A HREF="motion.html#it">it</A> doesn't fit.
Solution:   Hide the <A HREF="popup.html#popup">popup</A> if <A HREF="motion.html#it">it</A> doesn't fit.
Files:	    src/popupmenu.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_infopopup_wide_1.dump

Patch 8.1.2400
Problem:    Test39 is old style.
Solution:   Convert the test cases into new style. (Yegappan Lakshmanan,
            closes #5324)
Files:	    src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test39.in, src/testdir/test39.ok,
            src/testdir/test_blockedit.vim, src/testdir/test_visual.vim

Patch 8.1.2401
Problem:    <A HREF="quickfix.html#:cexpr">:cexpr</A> does not handle &#124; in <A HREF="eval.html#expression">expression</A>.
Solution:   Remove EX_TRLBAR and set nextcmd pointer.
Files:	    src/testdir/test_quickfix.vim, src/ex_cmds.h, src/quickfix.c

Patch 8.1.2402
Problem:    Typos and other small things.
Solution:   Small fixes.
Files:	    .gitignore, src/testdir/shared.vim, src/testdir/test49.vim,
            src/message.c, src/Makefile

Patch 8.1.2403
Problem:    Autocmd test fails under <A HREF="debug.html#valgrind">valgrind</A>.
Solution:   Wait a bit longer.
Files:	    src/testdir/test_autocmd.vim

Patch 8.1.2404
Problem:    <A HREF="eval.html#Channel">Channel</A> test fails under <A HREF="debug.html#valgrind">valgrind</A>.
Solution:   Sleep a bit longer.
Files:	    src/testdir/test_channel.vim

Patch 8.1.2405
Problem:    matchadd_conceal test fails under <A HREF="debug.html#valgrind">valgrind</A>.
Solution:   Use WaitForAssert() and wait a bit longer.
Files:	    src/testdir/test_matchadd_conceal.vim

Patch 8.1.2406
Problem:    Leaking memory in test_paste and test_registers.
Solution:   Free the old title.  Don't copy expr_line.
Files:	    src/term.c, src/os_unix.c, src/register.c

Patch 8.1.2407
Problem:    proto file and dependencies outdated.
Solution:   Update proto files and dependencies.
Files:	    src/Makefile, src/proto/bufwrite.pro, src/proto/cmdhist.pro,
            src/proto/optionstr.pro, src/proto/popupwin.pro,
            src/proto/viminfo.pro, src/proto/if_cscope.pro

Patch 8.1.2408
Problem:    <A HREF="autocmd.html#Syntax">Syntax</A> menu and build instructions outdated.
Solution:   Update build instructions and <A HREF="syntax.html#syntax">syntax</A> menu.
Files:	    Makefile, runtime/makemenu.vim, runtime/synmenu.vim

Patch 8.1.2409
Problem:    Creating the <A HREF="intro.html#distribution">distribution</A> doesn't work <A HREF="motion.html#as">as</A> documented.
Solution:   Adjust name of uninstall binary. Create src/auto directory if
            needed.
Files:	    tools/rename.bat, src/Make_mvc.mak

Patch 8.1.2410
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: test_iminsert fails without <A HREF="mbyte.html#IME">IME</A> support.
Solution:   Skip the test when imgetstatus() doesn't work.
Files:	    src/testdir/test_iminsert.vim

Patch 8.1.2411
Problem:    Function argument copied unnecessarily.
Solution:   Use the argument directly.
Files:	    src/ex_docmd.c

Patch 8.1.2412
Problem:    Crash when evaluating <A HREF="eval.html#expression">expression</A> with error. (Dhiraj Mishra)
Solution:   Check parsing failed. (closes #5329)
Files:	    src/eval.c, src/testdir/test_lambda.vim

Patch 8.1.2413
Problem:    Cannot update ex_cmdidxs.h on <A HREF="os_win32.html#MS-Windows">MS-Windows</A>.
Solution:   Add build rules and dependencies. (Ken Takata, closes #5337)
Files:	    src/Make_cyg_ming.mak, src/Make_mvc.mak, src/Make_vms.mms

Patch 8.1.2414
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: properties <A HREF="gui_w32.html#dialog">dialog</A> box shows wrong character.
Solution:   Explicitly specify encoding. (Ken Takata, closes #5338)
Files:	    src/vim.rc

Patch 8.1.2415
Problem:    Popup menu flickers if an info <A HREF="popup.html#popup">popup</A> is used. (Nick Jensen)
Solution:   Set the pum_skip_redraw flag.
Files:	    src/popupmenu.c

Patch 8.1.2416
Problem:    Loading <A HREF="gui.html#menus">menus</A> sets <A HREF="eval.html#v:errmsg">v:errmsg</A>.
Solution:   Avoid setting <A HREF="eval.html#v:errmsg">v:errmsg</A> and add a test for that. (Jason Franklin)
Files:	    runtime/delmenu.vim, runtime/menu.vim, src/testdir/test_menu.vim

Patch 8.1.2417
Problem:    MinGW/Cygwin build does not clean up all files.
Solution:   Delete *.map files. (Michael Soyka)
Files:	    src/Make_cyg_ming.mak

Patch 8.1.2418
Problem:    bufnr('$') is wrong after recycling <A HREF="popup.html#popup">popup</A> buffer.
Solution:   Sort the buffer <A HREF="eval.html#list">list</A> by buffer number. (closes #5335)
Files:	    src/buffer.c, src/testdir/test_popupwin.vim

Patch 8.1.2419
Problem:    With a long file name the <A HREF="message.html#hit-enter">hit-enter</A> prompt appears. (J. Lewis
            Muir)
Solution:   When checking for text to wrap don't <A HREF="diff.html#do">do</A> this when outputting a CR.
Files:	    src/message.c, src/testdir/test_display.vim,
            src/testdir/dumps/Test_long_file_name_1.dump

Patch 8.1.2420
Problem:    Crash when calling <A HREF="popup.html#popup_close()">popup_close()</A> in <A HREF="builtin.html#win_execute()">win_execute()</A>.
Solution:   Disallow <A HREF="popup.html#popup_close()">popup_close()</A> in <A HREF="popup.html#popup">popup</A> <A HREF="windows.html#window">window</A>. (Yasuhiro Matsumoto,
            closes #5345)
Files:	    src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.2421
Problem:    Test88 is old style.
Solution:   Turn into a new style test. (Yegappan Lakshmanan, closes #5347)
Files:	    src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test88.in, src/testdir/test88.ok,
            src/testdir/test_conceal.vim, src/testdir/test_python2.vim
            src/testdir/test_python3.vim

Patch 8.1.2422
Problem:    &quot;make depend&quot; does not work correctly for libvterm.
Solution:   Fix build dependencies. And a few minor improvements.
Files:	    src/Makefile, src/filepath.c, src/insexpand.c, src/main.c

Patch 8.1.2423
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A> properties shows version <A HREF="motion.html#as">as</A> &quot;8, 1, 0&quot;.
Solution:   Use &quot;8.1.0&quot;. (Ken Takata, closes #5342)
Files:	    src/vim.rc

Patch 8.1.2424
Problem:    <A HREF="os_win32.html#MS-Windows">MS-Windows</A>: console buffer is resized unnecessarily.
Solution:   Only call ResizeConBuf() when the size differs. (Nobuhiro
            Takasaki, closes #5343)
Files:	    src/os_win32.c

==============================================================================

Patch 8.2.0001 and later can be found at |<A HREF="version9.html#patches-after-8.2">patches-after-8.2</A>|.


<A HREF="#top">top</A> - <A HREF="index.html">main help file</A>
</PRE>
</BODY>


</HTML>
